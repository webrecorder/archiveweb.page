(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.IpfsCore = factory()}(typeof self !== 'undefined' ? self : this, function () {
var IpfsCore=(()=>{var K_e=Object.create;var f6=Object.defineProperty;var V_e=Object.getOwnPropertyDescriptor;var z_e=Object.getOwnPropertyNames;var H_e=Object.getPrototypeOf,$_e=Object.prototype.hasOwnProperty;var fO=t=>f6(t,"__esModule",{value:!0});var ua=typeof require!="undefined"?require:t=>{throw new Error('Dynamic require of "'+t+'" is not supported')};var Se=(t,e)=>()=>(t&&(e=t(t=0)),e);var p=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),bt=(t,e)=>{fO(t);for(var r in e)f6(t,r,{get:e[r],enumerable:!0})},G_e=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of z_e(e))!$_e.call(t,i)&&i!=="default"&&f6(t,i,{get:()=>e[i],enumerable:!(r=V_e(e,i))||r.enumerable});return t},Wt=t=>G_e(fO(f6(t!=null?K_e(H_e(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var hO=p(l6=>{l();"use strict";l6.byteLength=Y_e;l6.toByteArray=Q_e;l6.fromByteArray=eEe;var fa=[],As=[],W_e=typeof Uint8Array!="undefined"?Uint8Array:Array,D7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(sl=0,lO=D7.length;sl<lO;++sl)fa[sl]=D7[sl],As[D7.charCodeAt(sl)]=sl;var sl,lO;As["-".charCodeAt(0)]=62;As["_".charCodeAt(0)]=63;function dO(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var i=r===e?0:4-r%4;return[r,i]}function Y_e(t){var e=dO(t),r=e[0],i=e[1];return(r+i)*3/4-i}function X_e(t,e,r){return(e+r)*3/4-r}function Q_e(t){var e,r=dO(t),i=r[0],n=r[1],s=new W_e(X_e(t,i,n)),o=0,a=n>0?i-4:i,c;for(c=0;c<a;c+=4)e=As[t.charCodeAt(c)]<<18|As[t.charCodeAt(c+1)]<<12|As[t.charCodeAt(c+2)]<<6|As[t.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return n===2&&(e=As[t.charCodeAt(c)]<<2|As[t.charCodeAt(c+1)]>>4,s[o++]=e&255),n===1&&(e=As[t.charCodeAt(c)]<<10|As[t.charCodeAt(c+1)]<<4|As[t.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Z_e(t){return fa[t>>18&63]+fa[t>>12&63]+fa[t>>6&63]+fa[t&63]}function J_e(t,e,r){for(var i,n=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),n.push(Z_e(i));return n.join("")}function eEe(t){for(var e,r=t.length,i=r%3,n=[],s=16383,o=0,a=r-i;o<a;o+=s)n.push(J_e(t,o,o+s>a?a:o+s));return i===1?(e=t[r-1],n.push(fa[e>>2]+fa[e<<4&63]+"==")):i===2&&(e=(t[r-2]<<8)+t[r-1],n.push(fa[e>>10]+fa[e>>4&63]+fa[e<<2&63]+"=")),n.join("")}});var pO=p(N7=>{l();N7.read=function(t,e,r,i,n){var s,o,a=n*8-i-1,c=(1<<a)-1,u=c>>1,f=-7,d=r?n-1:0,h=r?-1:1,y=t[e+d];for(d+=h,s=y&(1<<-f)-1,y>>=-f,f+=a;f>0;s=s*256+t[e+d],d+=h,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=i;f>0;o=o*256+t[e+d],d+=h,f-=8);if(s===0)s=1-u;else{if(s===c)return o?NaN:(y?-1:1)*(1/0);o=o+Math.pow(2,i),s=s-u}return(y?-1:1)*o*Math.pow(2,s-i)};N7.write=function(t,e,r,i,n,s){var o,a,c,u=s*8-n-1,f=(1<<u)-1,d=f>>1,h=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=i?0:s-1,g=i?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=h/c:e+=h*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=f?(a=0,o=f):o+d>=1?(a=(e*c-1)*Math.pow(2,n),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,n),o=0));n>=8;t[r+y]=a&255,y+=g,a/=256,n-=8);for(o=o<<n|a,u+=n;u>0;t[r+y]=o&255,y+=g,o/=256,u-=8);t[r+y-g]|=m*128}});var Vt=p(sh=>{l();"use strict";var B7=hO(),rh=pO(),yO=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;sh.Buffer=ue;sh.SlowBuffer=oEe;sh.INSPECT_MAX_BYTES=50;var d6=2147483647;sh.kMaxLength=d6;ue.TYPED_ARRAY_SUPPORT=tEe();!ue.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function tEe(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch(t){return!1}}Object.defineProperty(ue.prototype,"parent",{enumerable:!0,get:function(){if(!!ue.isBuffer(this))return this.buffer}});Object.defineProperty(ue.prototype,"offset",{enumerable:!0,get:function(){if(!!ue.isBuffer(this))return this.byteOffset}});function Ec(t){if(t>d6)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,ue.prototype),e}function ue(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return M7(t)}return gO(t,e,r)}ue.poolSize=8192;function gO(t,e,r){if(typeof t=="string")return iEe(t,e);if(ArrayBuffer.isView(t))return nEe(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(la(t,ArrayBuffer)||t&&la(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(la(t,SharedArrayBuffer)||t&&la(t.buffer,SharedArrayBuffer)))return U7(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let i=t.valueOf&&t.valueOf();if(i!=null&&i!==t)return ue.from(i,e,r);let n=sEe(t);if(n)return n;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return ue.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}ue.from=function(t,e,r){return gO(t,e,r)};Object.setPrototypeOf(ue.prototype,Uint8Array.prototype);Object.setPrototypeOf(ue,Uint8Array);function bO(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function rEe(t,e,r){return bO(t),t<=0?Ec(t):e!==void 0?typeof r=="string"?Ec(t).fill(e,r):Ec(t).fill(e):Ec(t)}ue.alloc=function(t,e,r){return rEe(t,e,r)};function M7(t){return bO(t),Ec(t<0?0:F7(t)|0)}ue.allocUnsafe=function(t){return M7(t)};ue.allocUnsafeSlow=function(t){return M7(t)};function iEe(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!ue.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=mO(t,e)|0,i=Ec(r),n=i.write(t,e);return n!==r&&(i=i.slice(0,n)),i}function L7(t){let e=t.length<0?0:F7(t.length)|0,r=Ec(e);for(let i=0;i<e;i+=1)r[i]=t[i]&255;return r}function nEe(t){if(la(t,Uint8Array)){let e=new Uint8Array(t);return U7(e.buffer,e.byteOffset,e.byteLength)}return L7(t)}function U7(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let i;return e===void 0&&r===void 0?i=new Uint8Array(t):r===void 0?i=new Uint8Array(t,e):i=new Uint8Array(t,e,r),Object.setPrototypeOf(i,ue.prototype),i}function sEe(t){if(ue.isBuffer(t)){let e=F7(t.length)|0,r=Ec(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||V7(t.length)?Ec(0):L7(t);if(t.type==="Buffer"&&Array.isArray(t.data))return L7(t.data)}function F7(t){if(t>=d6)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d6.toString(16)+" bytes");return t|0}function oEe(t){return+t!=t&&(t=0),ue.alloc(+t)}ue.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==ue.prototype};ue.compare=function(e,r){if(la(e,Uint8Array)&&(e=ue.from(e,e.offset,e.byteLength)),la(r,Uint8Array)&&(r=ue.from(r,r.offset,r.byteLength)),!ue.isBuffer(e)||!ue.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let i=e.length,n=r.length;for(let s=0,o=Math.min(i,n);s<o;++s)if(e[s]!==r[s]){i=e[s],n=r[s];break}return i<n?-1:n<i?1:0};ue.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};ue.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return ue.alloc(0);let i;if(r===void 0)for(r=0,i=0;i<e.length;++i)r+=e[i].length;let n=ue.allocUnsafe(r),s=0;for(i=0;i<e.length;++i){let o=e[i];if(la(o,Uint8Array))s+o.length>n.length?(ue.isBuffer(o)||(o=ue.from(o)),o.copy(n,s)):Uint8Array.prototype.set.call(n,o,s);else if(ue.isBuffer(o))o.copy(n,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return n};function mO(t,e){if(ue.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||la(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&r===0)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return K7(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return CO(t).length;default:if(n)return i?-1:K7(t).length;e=(""+e).toLowerCase(),n=!0}}ue.byteLength=mO;function aEe(t,e,r){let i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return bEe(this,e,r);case"utf8":case"utf-8":return _O(this,e,r);case"ascii":return yEe(this,e,r);case"latin1":case"binary":return gEe(this,e,r);case"base64":return hEe(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return mEe(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}ue.prototype._isBuffer=!0;function ol(t,e,r){let i=t[e];t[e]=t[r],t[r]=i}ue.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)ol(this,r,r+1);return this};ue.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)ol(this,r,r+3),ol(this,r+1,r+2);return this};ue.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)ol(this,r,r+7),ol(this,r+1,r+6),ol(this,r+2,r+5),ol(this,r+3,r+4);return this};ue.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?_O(this,0,e):aEe.apply(this,arguments)};ue.prototype.toLocaleString=ue.prototype.toString;ue.prototype.equals=function(e){if(!ue.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:ue.compare(this,e)===0};ue.prototype.inspect=function(){let e="",r=sh.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};yO&&(ue.prototype[yO]=ue.prototype.inspect);ue.prototype.compare=function(e,r,i,n,s){if(la(e,Uint8Array)&&(e=ue.from(e,e.offset,e.byteLength)),!ue.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),i===void 0&&(i=e?e.length:0),n===void 0&&(n=0),s===void 0&&(s=this.length),r<0||i>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&r>=i)return 0;if(n>=s)return-1;if(r>=i)return 1;if(r>>>=0,i>>>=0,n>>>=0,s>>>=0,this===e)return 0;let o=s-n,a=i-r,c=Math.min(o,a),u=this.slice(n,s),f=e.slice(r,i);for(let d=0;d<c;++d)if(u[d]!==f[d]){o=u[d],a=f[d];break}return o<a?-1:a<o?1:0};function vO(t,e,r,i,n){if(t.length===0)return-1;if(typeof r=="string"?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,V7(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0)if(n)r=0;else return-1;if(typeof e=="string"&&(e=ue.from(e,i)),ue.isBuffer(e))return e.length===0?-1:wO(t,e,r,i,n);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):wO(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function wO(t,e,r,i,n){let s=1,o=t.length,a=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,o/=2,a/=2,r/=2}function c(f,d){return s===1?f[d]:f.readUInt16BE(d*s)}let u;if(n){let f=-1;for(u=r;u<o;u++)if(c(t,u)===c(e,f===-1?0:u-f)){if(f===-1&&(f=u),u-f+1===a)return f*s}else f!==-1&&(u-=u-f),f=-1}else for(r+a>o&&(r=o-a),u=r;u>=0;u--){let f=!0;for(let d=0;d<a;d++)if(c(t,u+d)!==c(e,d)){f=!1;break}if(f)return u}return-1}ue.prototype.includes=function(e,r,i){return this.indexOf(e,r,i)!==-1};ue.prototype.indexOf=function(e,r,i){return vO(this,e,r,i,!0)};ue.prototype.lastIndexOf=function(e,r,i){return vO(this,e,r,i,!1)};function cEe(t,e,r,i){r=Number(r)||0;let n=t.length-r;i?(i=Number(i),i>n&&(i=n)):i=n;let s=e.length;i>s/2&&(i=s/2);let o;for(o=0;o<i;++o){let a=parseInt(e.substr(o*2,2),16);if(V7(a))return o;t[r+o]=a}return o}function uEe(t,e,r,i){return h6(K7(e,t.length-r),t,r,i)}function fEe(t,e,r,i){return h6(EEe(e),t,r,i)}function lEe(t,e,r,i){return h6(CO(e),t,r,i)}function dEe(t,e,r,i){return h6(SEe(e,t.length-r),t,r,i)}ue.prototype.write=function(e,r,i,n){if(r===void 0)n="utf8",i=this.length,r=0;else if(i===void 0&&typeof r=="string")n=r,i=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(i)?(i=i>>>0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-r;if((i===void 0||i>s)&&(i=s),e.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return cEe(this,e,r,i);case"utf8":case"utf-8":return uEe(this,e,r,i);case"ascii":case"latin1":case"binary":return fEe(this,e,r,i);case"base64":return lEe(this,e,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return dEe(this,e,r,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}};ue.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function hEe(t,e,r){return e===0&&r===t.length?B7.fromByteArray(t):B7.fromByteArray(t.slice(e,r))}function _O(t,e,r){r=Math.min(t.length,r);let i=[],n=e;for(;n<r;){let s=t[n],o=null,a=s>239?4:s>223?3:s>191?2:1;if(n+a<=r){let c,u,f,d;switch(a){case 1:s<128&&(o=s);break;case 2:c=t[n+1],(c&192)==128&&(d=(s&31)<<6|c&63,d>127&&(o=d));break;case 3:c=t[n+1],u=t[n+2],(c&192)==128&&(u&192)==128&&(d=(s&15)<<12|(c&63)<<6|u&63,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:c=t[n+1],u=t[n+2],f=t[n+3],(c&192)==128&&(u&192)==128&&(f&192)==128&&(d=(s&15)<<18|(c&63)<<12|(u&63)<<6|f&63,d>65535&&d<1114112&&(o=d))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|o&1023),i.push(o),n+=a}return pEe(i)}var EO=4096;function pEe(t){let e=t.length;if(e<=EO)return String.fromCharCode.apply(String,t);let r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=EO));return r}function yEe(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]&127);return i}function gEe(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}function bEe(t,e,r){let i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);let n="";for(let s=e;s<r;++s)n+=xEe[t[s]];return n}function mEe(t,e,r){let i=t.slice(e,r),n="";for(let s=0;s<i.length-1;s+=2)n+=String.fromCharCode(i[s]+i[s+1]*256);return n}ue.prototype.slice=function(e,r){let i=this.length;e=~~e,r=r===void 0?i:~~r,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),r<0?(r+=i,r<0&&(r=0)):r>i&&(r=i),r<e&&(r=e);let n=this.subarray(e,r);return Object.setPrototypeOf(n,ue.prototype),n};function Oi(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}ue.prototype.readUintLE=ue.prototype.readUIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||Oi(e,r,this.length);let n=this[e],s=1,o=0;for(;++o<r&&(s*=256);)n+=this[e+o]*s;return n};ue.prototype.readUintBE=ue.prototype.readUIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||Oi(e,r,this.length);let n=this[e+--r],s=1;for(;r>0&&(s*=256);)n+=this[e+--r]*s;return n};ue.prototype.readUint8=ue.prototype.readUInt8=function(e,r){return e=e>>>0,r||Oi(e,1,this.length),this[e]};ue.prototype.readUint16LE=ue.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||Oi(e,2,this.length),this[e]|this[e+1]<<8};ue.prototype.readUint16BE=ue.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||Oi(e,2,this.length),this[e]<<8|this[e+1]};ue.prototype.readUint32LE=ue.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||Oi(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};ue.prototype.readUint32BE=ue.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||Oi(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};ue.prototype.readBigUInt64LE=Ou(function(e){e=e>>>0,nh(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Qp(e,this.length-8);let n=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+i*2**24;return BigInt(n)+(BigInt(s)<<BigInt(32))});ue.prototype.readBigUInt64BE=Ou(function(e){e=e>>>0,nh(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Qp(e,this.length-8);let n=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i;return(BigInt(n)<<BigInt(32))+BigInt(s)});ue.prototype.readIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||Oi(e,r,this.length);let n=this[e],s=1,o=0;for(;++o<r&&(s*=256);)n+=this[e+o]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*r)),n};ue.prototype.readIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||Oi(e,r,this.length);let n=r,s=1,o=this[e+--n];for(;n>0&&(s*=256);)o+=this[e+--n]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*r)),o};ue.prototype.readInt8=function(e,r){return e=e>>>0,r||Oi(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};ue.prototype.readInt16LE=function(e,r){e=e>>>0,r||Oi(e,2,this.length);let i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};ue.prototype.readInt16BE=function(e,r){e=e>>>0,r||Oi(e,2,this.length);let i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};ue.prototype.readInt32LE=function(e,r){return e=e>>>0,r||Oi(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};ue.prototype.readInt32BE=function(e,r){return e=e>>>0,r||Oi(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};ue.prototype.readBigInt64LE=Ou(function(e){e=e>>>0,nh(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Qp(e,this.length-8);let n=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(i<<24);return(BigInt(n)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});ue.prototype.readBigInt64BE=Ou(function(e){e=e>>>0,nh(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Qp(e,this.length-8);let n=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i)});ue.prototype.readFloatLE=function(e,r){return e=e>>>0,r||Oi(e,4,this.length),rh.read(this,e,!0,23,4)};ue.prototype.readFloatBE=function(e,r){return e=e>>>0,r||Oi(e,4,this.length),rh.read(this,e,!1,23,4)};ue.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||Oi(e,8,this.length),rh.read(this,e,!0,52,8)};ue.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||Oi(e,8,this.length),rh.read(this,e,!1,52,8)};function Mn(t,e,r,i,n,s){if(!ue.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}ue.prototype.writeUintLE=ue.prototype.writeUIntLE=function(e,r,i,n){if(e=+e,r=r>>>0,i=i>>>0,!n){let a=Math.pow(2,8*i)-1;Mn(this,e,r,i,a,0)}let s=1,o=0;for(this[r]=e&255;++o<i&&(s*=256);)this[r+o]=e/s&255;return r+i};ue.prototype.writeUintBE=ue.prototype.writeUIntBE=function(e,r,i,n){if(e=+e,r=r>>>0,i=i>>>0,!n){let a=Math.pow(2,8*i)-1;Mn(this,e,r,i,a,0)}let s=i-1,o=1;for(this[r+s]=e&255;--s>=0&&(o*=256);)this[r+s]=e/o&255;return r+i};ue.prototype.writeUint8=ue.prototype.writeUInt8=function(e,r,i){return e=+e,r=r>>>0,i||Mn(this,e,r,1,255,0),this[r]=e&255,r+1};ue.prototype.writeUint16LE=ue.prototype.writeUInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||Mn(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};ue.prototype.writeUint16BE=ue.prototype.writeUInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||Mn(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};ue.prototype.writeUint32LE=ue.prototype.writeUInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||Mn(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};ue.prototype.writeUint32BE=ue.prototype.writeUInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||Mn(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function SO(t,e,r,i,n){PO(e,i,n,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,r}function xO(t,e,r,i,n){PO(e,i,n,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s=s>>8,t[r+6]=s,s=s>>8,t[r+5]=s,s=s>>8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o=o>>8,t[r+2]=o,o=o>>8,t[r+1]=o,o=o>>8,t[r]=o,r+8}ue.prototype.writeBigUInt64LE=Ou(function(e,r=0){return SO(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});ue.prototype.writeBigUInt64BE=Ou(function(e,r=0){return xO(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});ue.prototype.writeIntLE=function(e,r,i,n){if(e=+e,r=r>>>0,!n){let c=Math.pow(2,8*i-1);Mn(this,e,r,i,c-1,-c)}let s=0,o=1,a=0;for(this[r]=e&255;++s<i&&(o*=256);)e<0&&a===0&&this[r+s-1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+i};ue.prototype.writeIntBE=function(e,r,i,n){if(e=+e,r=r>>>0,!n){let c=Math.pow(2,8*i-1);Mn(this,e,r,i,c-1,-c)}let s=i-1,o=1,a=0;for(this[r+s]=e&255;--s>=0&&(o*=256);)e<0&&a===0&&this[r+s+1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+i};ue.prototype.writeInt8=function(e,r,i){return e=+e,r=r>>>0,i||Mn(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};ue.prototype.writeInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||Mn(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};ue.prototype.writeInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||Mn(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};ue.prototype.writeInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||Mn(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};ue.prototype.writeInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||Mn(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};ue.prototype.writeBigInt64LE=Ou(function(e,r=0){return SO(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});ue.prototype.writeBigInt64BE=Ou(function(e,r=0){return xO(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function AO(t,e,r,i,n,s){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function IO(t,e,r,i,n){return e=+e,r=r>>>0,n||AO(t,e,r,4,34028234663852886e22,-34028234663852886e22),rh.write(t,e,r,i,23,4),r+4}ue.prototype.writeFloatLE=function(e,r,i){return IO(this,e,r,!0,i)};ue.prototype.writeFloatBE=function(e,r,i){return IO(this,e,r,!1,i)};function TO(t,e,r,i,n){return e=+e,r=r>>>0,n||AO(t,e,r,8,17976931348623157e292,-17976931348623157e292),rh.write(t,e,r,i,52,8),r+8}ue.prototype.writeDoubleLE=function(e,r,i){return TO(this,e,r,!0,i)};ue.prototype.writeDoubleBE=function(e,r,i){return TO(this,e,r,!1,i)};ue.prototype.copy=function(e,r,i,n){if(!ue.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),!n&&n!==0&&(n=this.length),r>=e.length&&(r=e.length),r||(r=0),n>0&&n<i&&(n=i),n===i||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-r<n-i&&(n=e.length-r+i);let s=n-i;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,i,n):Uint8Array.prototype.set.call(e,this.subarray(i,n),r),s};ue.prototype.fill=function(e,r,i,n){if(typeof e=="string"){if(typeof r=="string"?(n=r,r=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!ue.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(e.length===1){let o=e.charCodeAt(0);(n==="utf8"&&o<128||n==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;r=r>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);let s;if(typeof e=="number")for(s=r;s<i;++s)this[s]=e;else{let o=ue.isBuffer(e)?e:ue.from(e,n),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<i-r;++s)this[s+r]=o[s%a]}return this};var ih={};function j7(t,e,r){ih[t]=class extends r{constructor(){super();Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(n){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:n,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}j7("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);j7("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);j7("ERR_OUT_OF_RANGE",function(t,e,r){let i=`The value of "${t}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=RO(String(r)):typeof r=="bigint"&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=RO(n)),n+="n"),i+=` It must be ${e}. Received ${n}`,i},RangeError);function RO(t){let e="",r=t.length,i=t[0]==="-"?1:0;for(;r>=i+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function vEe(t,e,r){nh(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Qp(e,t.length-(r+1))}function PO(t,e,r,i,n,s){if(t>r||t<e){let o=typeof e=="bigint"?"n":"",a;throw s>3?e===0||e===BigInt(0)?a=`>= 0${o} and < 2${o} ** ${(s+1)*8}${o}`:a=`>= -(2${o} ** ${(s+1)*8-1}${o}) and < 2 ** ${(s+1)*8-1}${o}`:a=`>= ${e}${o} and <= ${r}${o}`,new ih.ERR_OUT_OF_RANGE("value",a,t)}vEe(i,n,s)}function nh(t,e){if(typeof t!="number")throw new ih.ERR_INVALID_ARG_TYPE(e,"number",t)}function Qp(t,e,r){throw Math.floor(t)!==t?(nh(t,r),new ih.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new ih.ERR_BUFFER_OUT_OF_BOUNDS:new ih.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var wEe=/[^+/0-9A-Za-z-_]/g;function _Ee(t){if(t=t.split("=")[0],t=t.trim().replace(wEe,""),t.length<2)return"";for(;t.length%4!=0;)t=t+"=";return t}function K7(t,e){e=e||1/0;let r,i=t.length,n=null,s=[];for(let o=0;o<i;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===i){(e-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function EEe(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function SEe(t,e){let r,i,n,s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),i=r>>8,n=r%256,s.push(n),s.push(i);return s}function CO(t){return B7.toByteArray(_Ee(t))}function h6(t,e,r,i){let n;for(n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}function la(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function V7(t){return t!==t}var xEe=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let i=r*16;for(let n=0;n<16;++n)e[i+n]=t[r]+t[n]}return e}();function Ou(t){return typeof BigInt=="undefined"?AEe:t}function AEe(){throw new Error("BigInt not supported")}});var NO=p(($7t,DO)=>{l();var Jr=DO.exports={},da,ha;function z7(){throw new Error("setTimeout has not been defined")}function H7(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?da=setTimeout:da=z7}catch(t){da=z7}try{typeof clearTimeout=="function"?ha=clearTimeout:ha=H7}catch(t){ha=H7}})();function OO(t){if(da===setTimeout)return setTimeout(t,0);if((da===z7||!da)&&setTimeout)return da=setTimeout,setTimeout(t,0);try{return da(t,0)}catch(e){try{return da.call(null,t,0)}catch(r){return da.call(this,t,0)}}}function IEe(t){if(ha===clearTimeout)return clearTimeout(t);if((ha===H7||!ha)&&clearTimeout)return ha=clearTimeout,clearTimeout(t);try{return ha(t)}catch(e){try{return ha.call(null,t)}catch(r){return ha.call(this,t)}}}var Sc=[],oh=!1,al,p6=-1;function TEe(){!oh||!al||(oh=!1,al.length?Sc=al.concat(Sc):p6=-1,Sc.length&&kO())}function kO(){if(!oh){var t=OO(TEe);oh=!0;for(var e=Sc.length;e;){for(al=Sc,Sc=[];++p6<e;)al&&al[p6].run();p6=-1,e=Sc.length}al=null,oh=!1,IEe(t)}}Jr.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Sc.push(new qO(t,e)),Sc.length===1&&!oh&&OO(kO)};function qO(t,e){this.fun=t,this.array=e}qO.prototype.run=function(){this.fun.apply(null,this.array)};Jr.title="browser";Jr.browser=!0;Jr.env={};Jr.argv=[];Jr.version="";Jr.versions={};function xc(){}Jr.on=xc;Jr.addListener=xc;Jr.once=xc;Jr.off=xc;Jr.removeListener=xc;Jr.removeAllListeners=xc;Jr.emit=xc;Jr.prependListener=xc;Jr.prependOnceListener=xc;Jr.listeners=function(t){return[]};Jr.binding=function(t){throw new Error("process.binding is not supported")};Jr.cwd=function(){return"/"};Jr.chdir=function(t){throw new Error("process.chdir is not supported")};Jr.umask=function(){return 0}});var Buffer,process,l=Se(()=>{({Buffer}=Vt()),process=NO()});var $7=p(()=>{l()});var G7=p(y6=>{l();"use strict";var BO=class extends Error{constructor(e="Request timed out"){super(e);this.name="TimeoutError"}};y6.TimeoutError=BO;var MO=class extends Error{constructor(e="The operation was aborted."){super(e);this.name="AbortError"}};y6.AbortError=MO;var LO=class extends Error{constructor(e){super(e.statusText);this.name="HTTPError",this.response=e}};y6.HTTPError=LO});var W7=p((Q7t,UO)=>{l();function REe(){return typeof window!="undefined"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process!="undefined"&&typeof process.versions=="object"&&!!process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0}UO.exports=REe});var Jp=p((Z7t,FO)=>{l();"use strict";var PEe=W7(),g6=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,Zp=PEe(),CEe=g6&&!Zp,OEe=Zp&&!g6,kEe=Zp&&g6,qEe=typeof ua=="function"&&typeof process!="undefined"&&typeof process.release!="undefined"&&process.release.name==="node"&&!Zp,DEe=typeof importScripts=="function"&&typeof self!="undefined"&&typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope,NEe=typeof process!="undefined"&&typeof process.env!="undefined"&&!1,BEe=typeof navigator!="undefined"&&navigator.product==="ReactNative";FO.exports={isTest:NEe,isElectron:Zp,isElectronMain:OEe,isElectronRenderer:kEe,isNode:qEe,isBrowser:CEe,isWebWorker:DEe,isEnvWithDom:g6,isReactNative:BEe}});var jO=p(()=>{l()});var e2=p((ah,KO)=>{l();"use strict";var MEe=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof Ac!="undefined")return Ac;throw new Error("unable to locate global object")},Ac=MEe();KO.exports=ah=Ac.fetch;Ac.fetch&&(ah.default=Ac.fetch.bind(Ac));ah.Headers=Ac.Headers;ah.Request=Ac.Request;ah.Response=Ac.Response});var X7=p((twt,Y7)=>{l();"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?Y7.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:Y7.exports={default:e2().default,Headers:e2().Headers,Request:e2().Request,Response:e2().Response}});var VO=p((rwt,Q7)=>{l();"use strict";var{isElectronMain:LEe}=Jp();LEe?Q7.exports=jO():Q7.exports=X7()});var GO=p((iwt,$O)=>{l();"use strict";var{TimeoutError:UEe,AbortError:FEe}=G7(),{Response:zO,Request:jEe,Headers:Z7,default:KEe}=VO(),VEe=(t,e={})=>{let r=new XMLHttpRequest;r.open(e.method||"GET",t.toString(),!0);let{timeout:i,headers:n}=e;if(i&&i>0&&i<1/0&&(r.timeout=i),e.overrideMimeType!=null&&r.overrideMimeType(e.overrideMimeType),n)for(let[s,o]of new Z7(n))r.setRequestHeader(s,o);return e.signal&&(e.signal.onabort=()=>r.abort()),e.onUploadProgress&&(r.upload.onprogress=e.onUploadProgress),r.responseType="arraybuffer",new Promise((s,o)=>{let a=c=>{switch(c.type){case"error":{s(zO.error());break}case"load":{s(new HO(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:$Ee(r.getAllResponseHeaders())}));break}case"timeout":{o(new UEe);break}case"abort":{o(new FEe);break}default:break}};r.onerror=a,r.onload=a,r.ontimeout=a,r.onabort=a,r.send(e.body)})},zEe=KEe,HEe=(t,e={})=>e.onUploadProgress!=null?VEe(t,e):zEe(t,e),$Ee=t=>{let e=new Z7;for(let r of t.trim().split(/[\r\n]+/)){let i=r.indexOf(": ");i>0&&e.set(r.slice(0,i),r.slice(i+1))}return e},HO=class extends zO{constructor(e,r,i){super(r,i);Object.defineProperty(this,"url",{value:e})}};$O.exports={fetch:HEe,Request:jEe,Headers:Z7}});var YO=p((nwt,WO)=>{l();"use strict";WO.exports=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}});var br=p((JO,ek)=>{l();"use strict";var b6=YO(),{hasOwnProperty:XO}=Object.prototype,{propertyIsEnumerable:GEe}=Object,ch=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),WEe=JO,QO={concatArrays:!1,ignoreUndefined:!1},m6=t=>{let e=[];for(let r in t)XO.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){let r=Object.getOwnPropertySymbols(t);for(let i of r)GEe.call(t,i)&&e.push(i)}return e};function uh(t){return Array.isArray(t)?YEe(t):b6(t)?XEe(t):t}function YEe(t){let e=t.slice(0,0);return m6(t).forEach(r=>{ch(e,r,uh(t[r]))}),e}function XEe(t){let e=Object.getPrototypeOf(t)===null?Object.create(null):{};return m6(t).forEach(r=>{ch(e,r,uh(t[r]))}),e}var ZO=(t,e,r,i)=>(r.forEach(n=>{typeof e[n]=="undefined"&&i.ignoreUndefined||(n in t&&t[n]!==Object.getPrototypeOf(t)?ch(t,n,J7(t[n],e[n],i)):ch(t,n,uh(e[n])))}),t),QEe=(t,e,r)=>{let i=t.slice(0,0),n=0;return[t,e].forEach(s=>{let o=[];for(let a=0;a<s.length;a++)!XO.call(s,a)||(o.push(String(a)),s===t?ch(i,n++,s[a]):ch(i,n++,uh(s[a])));i=ZO(i,s,m6(s).filter(a=>!o.includes(a)),r)}),i};function J7(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?QEe(t,e,r):!b6(e)||!b6(t)?uh(e):ZO(t,e,m6(e),r)}ek.exports=function(...t){let e=J7(uh(QO),this!==WEe&&this||{},QO),r={_:{}};for(let i of t)if(i!==void 0){if(!b6(i))throw new TypeError("`"+i+"` is not an Option Object");r=J7(r,{_:i},e)}return r._}});var ew=p((swt,ik)=>{l();"use strict";var ZEe=typeof navigator!="undefined"&&navigator.product==="ReactNative";function JEe(){return ZEe?"http://localhost":self.location.protocol+"//"+self.location.host}var t2=self.URL,tk=JEe(),rk=class{constructor(e="",r=tk){this.super=new t2(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return t2.createObjectURL(e)}static revokeObjectURL(e){t2.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function eSe(t){if(typeof t=="string")return new t2(t).toString();if(!(t instanceof t2)){let e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",i=t.port?":"+t.port:"",n=t.protocol?t.protocol+"//":"",s=t.host||"",o=t.hostname||"",a=t.search||(t.query?"?"+t.query:""),c=t.hash||"",u=t.pathname||"",f=t.path||u+a;return`${n}${e||r}${s||o+i}${f}${c}`}}ik.exports={URLWithLegacySupport:rk,URLSearchParams:self.URLSearchParams,defaultBase:tk,format:eSe}});var ok=p((owt,sk)=>{l();"use strict";var{URLWithLegacySupport:nk,format:tSe}=ew();sk.exports=(t,e={},r={},i)=>{let n=e.protocol?e.protocol.replace(":",""):"http";n=(r[n]||i||n)+":";let s;try{s=new nk(t)}catch(a){s={}}let o=Object.assign({},e,{protocol:n||s.protocol,host:e.host||s.host});return new nk(t,tSe(o)).toString()}});var v6=p((awt,ak)=>{l();"use strict";var{URLWithLegacySupport:rSe,format:iSe,URLSearchParams:nSe,defaultBase:sSe}=ew(),oSe=ok();ak.exports={URL:rSe,URLSearchParams:nSe,format:iSe,relative:oSe,defaultBase:sSe}});var fh=p((cwt,w6)=>{l();"use strict";var{AbortController:ck,AbortSignal:aSe}=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;w6.exports=ck;w6.exports.AbortSignal=aSe;w6.exports.default=ck});var sn=p((uwt,uk)=>{l();"use strict";var _6;globalThis.AbortController&&globalThis.AbortSignal?_6=globalThis:_6=fh();uk.exports={AbortController:_6.AbortController,AbortSignal:_6.AbortSignal}});var ku=p((fwt,tw)=>{l();var{AbortController:cSe}=sn();function fk(t){let e=new cSe;function r(){e.abort();for(let i of t)!i||!i.removeEventListener||i.removeEventListener("abort",r)}for(let i of t)if(!(!i||!i.addEventListener)){if(i.aborted){r();break}i.addEventListener("abort",r)}return e.signal}tw.exports=fk;tw.exports.anySignal=fk});var r2=p((lwt,gk)=>{l();"use strict";var{fetch:uSe,Request:fSe,Headers:lSe}=GO(),{TimeoutError:rw,HTTPError:lk}=G7(),dk=br().bind({ignoreUndefined:!0}),{URL:hk,URLSearchParams:pk}=v6(),{AbortController:dSe}=sn(),hSe=ku(),pSe=(t,e,r)=>{if(e===void 0)return t;let i=Date.now(),n=()=>Date.now()-i>=e;return new Promise((s,o)=>{let a=setTimeout(()=>{n()&&(o(new rw),r.abort())},e),c=u=>d=>{if(clearTimeout(a),n()){o(new rw);return}u(d)};t.then(c(s),c(o))})},ySe={throwHttpErrors:!0,credentials:"same-origin"},xn=class{constructor(e={}){this.opts=dk(ySe,e)}async fetch(e,r={}){let i=dk(this.opts,r),n=new lSe(i.headers);if(typeof e!="string"&&!(e instanceof hk||e instanceof fSe))throw new TypeError("`resource` must be a string, URL, or Request");let s=new hk(e.toString(),i.base),{searchParams:o,transformSearchParams:a,json:c}=i;o&&(typeof a=="function"?s.search=a(new pk(i.searchParams)):s.search=new pk(i.searchParams)),c&&(i.body=JSON.stringify(i.json),n.set("content-type","application/json"));let u=new dSe,f=hSe([u.signal,i.signal]),d=await pSe(uSe(s.toString(),{...i,signal:f,timeout:void 0,headers:n}),i.timeout,u);if(!d.ok&&i.throwHttpErrors)throw i.handleError&&await i.handleError(d),new lk(d);return d.iterator=function(){return yk(d.body)},d.ndjson=async function*(){for await(let h of gSe(d.iterator()))r.transform?yield r.transform(h):yield h},d}post(e,r={}){return this.fetch(e,{...r,method:"POST"})}get(e,r={}){return this.fetch(e,{...r,method:"GET"})}put(e,r={}){return this.fetch(e,{...r,method:"PUT"})}delete(e,r={}){return this.fetch(e,{...r,method:"DELETE"})}options(e,r={}){return this.fetch(e,{...r,method:"OPTIONS"})}},gSe=async function*(t){let e=new TextDecoder,r="";for await(let i of t){r+=e.decode(i,{stream:!0});let n=r.split(/\r?\n/);for(let s=0;s<n.length-1;s++){let o=n[s].trim();o.length>0&&(yield JSON.parse(o))}r=n[n.length-1]}r+=e.decode(),r=r.trim(),r.length!==0&&(yield JSON.parse(r))},yk=t=>{if(vSe(t)){let e=t[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:e.next.bind(e),return(r){return t.destroy(),typeof e.return=="function"?e.return():Promise.resolve({done:!0,value:r})}}}}}if(mSe(t)){let e=t.getReader();return async function*(){try{for(;;){let{done:r,value:i}=await e.read();if(r)return;i&&(yield i)}}finally{e.releaseLock()}}()}if(bSe(t))return t;throw new TypeError("Body can't be converted to AsyncIterable")},bSe=t=>typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function",mSe=t=>t&&typeof t.getReader=="function",vSe=t=>Object.prototype.hasOwnProperty.call(t,"readable")&&Object.prototype.hasOwnProperty.call(t,"writable");xn.HTTPError=lk;xn.TimeoutError=rw;xn.streamToAsyncIterator=yk;xn.post=(t,e)=>new xn(e).post(t,e);xn.get=(t,e)=>new xn(e).get(t,e);xn.put=(t,e)=>new xn(e).put(t,e);xn.delete=(t,e)=>new xn(e).delete(t,e);xn.options=(t,e)=>new xn(e).options(t,e);gk.exports=xn});var iw=p((dwt,bk)=>{l();"use strict";var wSe=r2(),_Se=(t,e)=>({path:decodeURIComponent(new URL(t).pathname.split("/").pop()||""),content:ESe(t,e)});async function*ESe(t,e){yield*(await new wSe().get(t,e)).iterator()}bk.exports=_Se});function vk(t,e,r){e=e||[],r=r||0;for(var i=r;t>=ISe;)e[r++]=t&255|mk,t/=128;for(;t&ASe;)e[r++]=t&255|mk,t>>>=7;return e[r]=t|0,vk.bytes=r-i+1,e}function nw(t,e){var r=0,e=e||0,i=0,n=e,s,o=t.length;do{if(n>=o)throw nw.bytes=0,new RangeError("Could not decode varint");s=t[n++],r+=i<28?(s&wk)<<i:(s&wk)*Math.pow(2,i),i+=7}while(s>=RSe);return nw.bytes=n-e,r}var SSe,mk,xSe,ASe,ISe,TSe,RSe,wk,PSe,CSe,OSe,kSe,qSe,DSe,NSe,BSe,MSe,LSe,USe,FSe,i2,_k=Se(()=>{l();SSe=vk,mk=128,xSe=127,ASe=~xSe,ISe=Math.pow(2,31);TSe=nw,RSe=128,wk=127;PSe=Math.pow(2,7),CSe=Math.pow(2,14),OSe=Math.pow(2,21),kSe=Math.pow(2,28),qSe=Math.pow(2,35),DSe=Math.pow(2,42),NSe=Math.pow(2,49),BSe=Math.pow(2,56),MSe=Math.pow(2,63),LSe=function(t){return t<PSe?1:t<CSe?2:t<OSe?3:t<kSe?4:t<qSe?5:t<DSe?6:t<NSe?7:t<BSe?8:t<MSe?9:10},USe={encode:SSe,decode:TSe,encodingLength:LSe},FSe=USe,i2=FSe});var n2={};bt(n2,{decode:()=>lh,encodeTo:()=>cl,encodingLength:()=>ul});var lh,cl,ul,E6=Se(()=>{l();_k();lh=t=>[i2.decode(t),i2.decode.bytes],cl=(t,e,r=0)=>(i2.encode(t,e,r),e),ul=t=>i2.encodingLength(t)});var Ic={};bt(Ic,{coerce:()=>Is,empty:()=>Ek,equals:()=>sw,fromHex:()=>KSe,fromString:()=>ow,isBinary:()=>VSe,toHex:()=>jSe,toString:()=>aw});var Ek,jSe,KSe,sw,Is,VSe,ow,aw,qu=Se(()=>{l();Ek=new Uint8Array(0),jSe=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),KSe=t=>{let e=t.match(/../g);return e?new Uint8Array(e.map(r=>parseInt(r,16))):Ek},sw=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Is=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},VSe=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),ow=t=>new TextEncoder().encode(t),aw=t=>new TextDecoder().decode(t)});var Ln={};bt(Ln,{Digest:()=>dh,create:()=>s2,decode:()=>Du,equals:()=>cw});var s2,Du,cw,dh,An=Se(()=>{l();qu();E6();s2=(t,e)=>{let r=e.byteLength,i=ul(t),n=i+ul(r),s=new Uint8Array(n+r);return cl(t,s,0),cl(r,s,i),s.set(e,n),new dh(t,r,e,s)},Du=t=>{let e=Is(t),[r,i]=lh(e),[n,s]=lh(e.subarray(i)),o=e.subarray(i+s);if(o.byteLength!==n)throw new Error("Incorrect length");return new dh(r,n,o,e)},cw=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&sw(t.bytes,e.bytes),dh=class{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}}});function zSe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var m=0,E=0,v=0,A=g.length;v!==A&&g[v]===0;)v++,m++;for(var R=(A-v)*f+1>>>0,F=new Uint8Array(R);v!==A;){for(var q=g[v],D=0,z=R-1;(q!==0||D<E)&&z!==-1;z--,D++)q+=256*F[z]>>>0,F[z]=q%a>>>0,q=q/a>>>0;if(q!==0)throw new Error("Non-zero carry");E=D,v++}for(var G=R-E;G!==R&&F[G]===0;)G++;for(var Y=c.repeat(m);G<R;++G)Y+=t.charAt(F[G]);return Y}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var m=0;if(g[m]!==" "){for(var E=0,v=0;g[m]===c;)E++,m++;for(var A=(g.length-m)*u+1>>>0,R=new Uint8Array(A);g[m];){var F=r[g.charCodeAt(m)];if(F===255)return;for(var q=0,D=A-1;(F!==0||q<v)&&D!==-1;D--,q++)F+=a*R[D]>>>0,R[D]=F%256>>>0,F=F/256>>>0;if(F!==0)throw new Error("Non-zero carry");v=q,m++}if(g[m]!==" "){for(var z=A-v;z!==A&&R[z]===0;)z++;for(var G=new Uint8Array(E+(A-z)),Y=E;z!==A;)G[Y++]=R[z++];return G}}}function y(g){var m=h(g);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:y}}var HSe,$Se,Sk,xk=Se(()=>{l();HSe=zSe,$Se=HSe,Sk=$Se});var Ak,Ik,S6,Tk,x6,Nu,GSe,WSe,Kr,pa=Se(()=>{l();xk();qu();Ak=class{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Ik=class{constructor(e,r,i){this.name=e,this.prefix=r,this.baseDecode=i}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){let r={[this.prefix]:this,...e.decoders||{[e.prefix]:e}};return new S6(r)}},S6=class{constructor(e){this.decoders=e}or(e){let r=e.decoders||{[e.prefix]:e};return new S6({...this.decoders,...r})}decode(e){let r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Tk=class{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new Ak(e,r,i),this.decoder=new Ik(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},x6=({name:t,prefix:e,encode:r,decode:i})=>new Tk(t,e,r,i),Nu=({prefix:t,name:e,alphabet:r})=>{let{encode:i,decode:n}=Sk(r,e);return x6({prefix:t,name:e,encode:i,decode:s=>Is(n(s))})},GSe=(t,e,r,i)=>{let n={};for(let f=0;f<e.length;++f)n[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,c=0,u=0;for(let f=0;f<s;++f){let d=n[t[f]];if(d===void 0)throw new SyntaxError(`Non-${i} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},WSe=(t,e,r)=>{let i=e[e.length-1]==="=",n=(1<<r)-1,s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[n&a>>o];if(o&&(s+=e[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},Kr=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>x6({prefix:e,name:t,encode(n){return WSe(n,i,r)},decode(n){return GSe(n,i,r,t)}})});var ei={};bt(ei,{base58btc:()=>ya,base58flickr:()=>YSe});var ya,YSe,ti=Se(()=>{l();pa();ya=Nu({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),YSe=Nu({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var on={};bt(on,{base32:()=>hh,base32hex:()=>JSe,base32hexpad:()=>txe,base32hexpadupper:()=>rxe,base32hexupper:()=>exe,base32pad:()=>QSe,base32padupper:()=>ZSe,base32upper:()=>XSe,base32z:()=>ixe});var hh,XSe,QSe,ZSe,JSe,exe,txe,rxe,ixe,an=Se(()=>{l();pa();hh=Kr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),XSe=Kr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),QSe=Kr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ZSe=Kr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),JSe=Kr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),exe=Kr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),txe=Kr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),rxe=Kr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ixe=Kr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var De={};bt(De,{CID:()=>Ge});var Ge,nxe,sxe,oxe,o2,axe,Rk,Pk,A6,I6,cxe,uxe,fxe,Ae=Se(()=>{l();E6();An();ti();an();qu();Ge=class{constructor(e,r,i,n){this.code=r,this.version=e,this.multihash=i,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:I6,byteLength:I6,code:A6,version:A6,multihash:A6,bytes:A6,_baseCache:I6,asCID:I6})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==o2)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==axe)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ge.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,i=s2(e,r);return Ge.createV1(this.code,i)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&cw(this.multihash,e.multihash)}toString(e){let{bytes:r,version:i,_baseCache:n}=this;switch(i){case 0:return sxe(r,n,e||ya.encoder);default:return oxe(r,n,e||hh.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return uxe(/^0\.0/,fxe),!!(e&&(e[Pk]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Ge)return e;if(e!=null&&e.asCID===e){let{version:r,code:i,multihash:n,bytes:s}=e;return new Ge(r,i,n,s||Rk(r,i,n.bytes))}else if(e!=null&&e[Pk]===!0){let{version:r,multihash:i,code:n}=e,s=Du(i);return Ge.create(r,n,s)}else return null}static create(e,r,i){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==o2)throw new Error(`Version 0 CID must use dag-pb (code: ${o2}) block encoding`);return new Ge(e,r,i,i.bytes)}case 1:{let n=Rk(e,r,i.bytes);return new Ge(e,r,i,n)}default:throw new Error("Invalid version")}}static createV0(e){return Ge.create(0,o2,e)}static createV1(e,r){return Ge.create(1,e,r)}static decode(e){let[r,i]=Ge.decodeFirst(e);if(i.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=Ge.inspectBytes(e),i=r.size-r.multihashSize,n=Is(e.subarray(i,i+r.multihashSize));if(n.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=n.subarray(r.multihashSize-r.digestSize),o=new dh(r.multihashCode,r.digestSize,s,n);return[r.version===0?Ge.createV0(o):Ge.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,i=()=>{let[d,h]=lh(e.subarray(r));return r+=h,d},n=i(),s=o2;if(n===18?(n=0,r=0):n===1&&(s=i()),n!==0&&n!==1)throw new RangeError(`Invalid CID version ${n}`);let o=r,a=i(),c=i(),u=r+c,f=u-o;return{version:n,codec:s,multihashCode:a,digestSize:c,multihashSize:f,size:u}}static parse(e,r){let[i,n]=nxe(e,r),s=Ge.decode(n);return s._baseCache.set(i,e),s}},nxe=(t,e)=>{switch(t[0]){case"Q":{let r=e||ya;return[ya.prefix,r.decode(`${ya.prefix}${t}`)]}case ya.prefix:{let r=e||ya;return[ya.prefix,r.decode(t)]}case hh.prefix:{let r=e||hh;return[hh.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},sxe=(t,e,r)=>{let{prefix:i}=r;if(i!==ya.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let n=e.get(i);if(n==null){let s=r.encode(t).slice(1);return e.set(i,s),s}else return n},oxe=(t,e,r)=>{let{prefix:i}=r,n=e.get(i);if(n==null){let s=r.encode(t);return e.set(i,s),s}else return n},o2=112,axe=18,Rk=(t,e,r)=>{let i=ul(t),n=i+ul(e),s=new Uint8Array(n+r.byteLength);return cl(t,s,0),cl(e,s,i),s.set(r,n),s},Pk=Symbol.for("@ipld/js-cid/CID"),A6={writable:!1,configurable:!1,enumerable:!0},I6={writable:!1,enumerable:!1,configurable:!1},cxe="0.0.0-dev",uxe=(t,e)=>{if(t.test(cxe))console.warn(e);else throw new Error(e)},fxe=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var T6={};bt(T6,{base36:()=>lxe,base36upper:()=>dxe});var lxe,dxe,uw=Se(()=>{l();pa();lxe=Nu({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),dxe=Nu({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var ph={};bt(ph,{base64:()=>hxe,base64pad:()=>pxe,base64url:()=>yxe,base64urlpad:()=>gxe});var hxe,pxe,yxe,gxe,a2=Se(()=>{l();pa();hxe=Kr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),pxe=Kr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),yxe=Kr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),gxe=Kr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var R6={};bt(R6,{base16:()=>bxe,base16upper:()=>mxe});var bxe,mxe,fw=Se(()=>{l();pa();bxe=Kr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),mxe=Kr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var Ok=p((Owt,Ck)=>{l();"use strict";Ck.exports=vxe;function vxe(t,e){for(var r=new Array(arguments.length-1),i=0,n=2,s=!0;n<arguments.length;)r[i++]=arguments[n++];return new Promise(function(a,c){r[i]=function(f){if(s)if(s=!1,f)c(f);else{for(var d=new Array(arguments.length-1),h=0;h<d.length;)d[h++]=arguments[h];a.apply(null,d)}};try{t.apply(e||null,r)}catch(u){s&&(s=!1,c(u))}})}});var Nk=p(Dk=>{l();"use strict";var P6=Dk;P6.length=function(e){var r=e.length;if(!r)return 0;for(var i=0;--r%4>1&&e.charAt(r)==="=";)++i;return Math.ceil(e.length*3)/4-i};var yh=new Array(64),kk=new Array(123);for(bo=0;bo<64;)kk[yh[bo]=bo<26?bo+65:bo<52?bo+71:bo<62?bo-4:bo-59|43]=bo++;var bo;P6.encode=function(e,r,i){for(var n=null,s=[],o=0,a=0,c;r<i;){var u=e[r++];switch(a){case 0:s[o++]=yh[u>>2],c=(u&3)<<4,a=1;break;case 1:s[o++]=yh[c|u>>4],c=(u&15)<<2,a=2;break;case 2:s[o++]=yh[c|u>>6],s[o++]=yh[u&63],a=0;break}o>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=yh[c],s[o++]=61,a===1&&(s[o++]=61)),n?(o&&n.push(String.fromCharCode.apply(String,s.slice(0,o))),n.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var qk="invalid encoding";P6.decode=function(e,r,i){for(var n=i,s=0,o,a=0;a<e.length;){var c=e.charCodeAt(a++);if(c===61&&s>1)break;if((c=kk[c])===void 0)throw Error(qk);switch(s){case 0:o=c,s=1;break;case 1:r[i++]=o<<2|(c&48)>>4,o=c,s=2;break;case 2:r[i++]=(o&15)<<4|(c&60)>>2,o=c,s=3;break;case 3:r[i++]=(o&3)<<6|c,s=0;break}}if(s===1)throw Error(qk);return i-n};P6.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var Mk=p((qwt,Bk)=>{l();"use strict";Bk.exports=C6;function C6(){this._listeners={}}C6.prototype.on=function(e,r,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:i||this}),this};C6.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var i=this._listeners[e],n=0;n<i.length;)i[n].fn===r?i.splice(n,1):++n;return this};C6.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var i=[],n=1;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<r.length;)r[n].fn.apply(r[n++].ctx,i)}return this}});var zk=p((Dwt,Vk)=>{l();"use strict";Vk.exports=Lk(Lk);function Lk(t){return typeof Float32Array!="undefined"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),i=r[3]===128;function n(c,u,f){e[0]=c,u[f]=r[0],u[f+1]=r[1],u[f+2]=r[2],u[f+3]=r[3]}function s(c,u,f){e[0]=c,u[f]=r[3],u[f+1]=r[2],u[f+2]=r[1],u[f+3]=r[0]}t.writeFloatLE=i?n:s,t.writeFloatBE=i?s:n;function o(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],e[0]}function a(c,u){return r[3]=c[u],r[2]=c[u+1],r[1]=c[u+2],r[0]=c[u+3],e[0]}t.readFloatLE=i?o:a,t.readFloatBE=i?a:o}():function(){function e(i,n,s,o){var a=n<0?1:0;if(a&&(n=-n),n===0)i(1/n>0?0:2147483648,s,o);else if(isNaN(n))i(2143289344,s,o);else if(n>34028234663852886e22)i((a<<31|2139095040)>>>0,s,o);else if(n<11754943508222875e-54)i((a<<31|Math.round(n/1401298464324817e-60))>>>0,s,o);else{var c=Math.floor(Math.log(n)/Math.LN2),u=Math.round(n*Math.pow(2,-c)*8388608)&8388607;i((a<<31|c+127<<23|u)>>>0,s,o)}}t.writeFloatLE=e.bind(null,Uk),t.writeFloatBE=e.bind(null,Fk);function r(i,n,s){var o=i(n,s),a=(o>>31)*2+1,c=o>>>23&255,u=o&8388607;return c===255?u?NaN:a*(1/0):c===0?a*1401298464324817e-60*u:a*Math.pow(2,c-150)*(u+8388608)}t.readFloatLE=r.bind(null,jk),t.readFloatBE=r.bind(null,Kk)}(),typeof Float64Array!="undefined"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),i=r[7]===128;function n(c,u,f){e[0]=c,u[f]=r[0],u[f+1]=r[1],u[f+2]=r[2],u[f+3]=r[3],u[f+4]=r[4],u[f+5]=r[5],u[f+6]=r[6],u[f+7]=r[7]}function s(c,u,f){e[0]=c,u[f]=r[7],u[f+1]=r[6],u[f+2]=r[5],u[f+3]=r[4],u[f+4]=r[3],u[f+5]=r[2],u[f+6]=r[1],u[f+7]=r[0]}t.writeDoubleLE=i?n:s,t.writeDoubleBE=i?s:n;function o(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],r[4]=c[u+4],r[5]=c[u+5],r[6]=c[u+6],r[7]=c[u+7],e[0]}function a(c,u){return r[7]=c[u],r[6]=c[u+1],r[5]=c[u+2],r[4]=c[u+3],r[3]=c[u+4],r[2]=c[u+5],r[1]=c[u+6],r[0]=c[u+7],e[0]}t.readDoubleLE=i?o:a,t.readDoubleBE=i?a:o}():function(){function e(i,n,s,o,a,c){var u=o<0?1:0;if(u&&(o=-o),o===0)i(0,a,c+n),i(1/o>0?0:2147483648,a,c+s);else if(isNaN(o))i(0,a,c+n),i(2146959360,a,c+s);else if(o>17976931348623157e292)i(0,a,c+n),i((u<<31|2146435072)>>>0,a,c+s);else{var f;if(o<22250738585072014e-324)f=o/5e-324,i(f>>>0,a,c+n),i((u<<31|f/4294967296)>>>0,a,c+s);else{var d=Math.floor(Math.log(o)/Math.LN2);d===1024&&(d=1023),f=o*Math.pow(2,-d),i(f*4503599627370496>>>0,a,c+n),i((u<<31|d+1023<<20|f*1048576&1048575)>>>0,a,c+s)}}}t.writeDoubleLE=e.bind(null,Uk,0,4),t.writeDoubleBE=e.bind(null,Fk,4,0);function r(i,n,s,o,a){var c=i(o,a+n),u=i(o,a+s),f=(u>>31)*2+1,d=u>>>20&2047,h=4294967296*(u&1048575)+c;return d===2047?h?NaN:f*(1/0):d===0?f*5e-324*h:f*Math.pow(2,d-1075)*(h+4503599627370496)}t.readDoubleLE=r.bind(null,jk,0,4),t.readDoubleBE=r.bind(null,Kk,4,0)}(),t}function Uk(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function Fk(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function jk(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function Kk(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var Hk=p((exports,module)=>{l();"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var Gk=p($k=>{l();"use strict";var lw=$k;lw.length=function(e){for(var r=0,i=0,n=0;n<e.length;++n)i=e.charCodeAt(n),i<128?r+=1:i<2048?r+=2:(i&64512)==55296&&(e.charCodeAt(n+1)&64512)==56320?(++n,r+=4):r+=3;return r};lw.read=function(e,r,i){var n=i-r;if(n<1)return"";for(var s=null,o=[],a=0,c;r<i;)c=e[r++],c<128?o[a++]=c:c>191&&c<224?o[a++]=(c&31)<<6|e[r++]&63:c>239&&c<365?(c=((c&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,o[a++]=55296+(c>>10),o[a++]=56320+(c&1023)):o[a++]=(c&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};lw.write=function(e,r,i){for(var n=i,s,o,a=0;a<e.length;++a)s=e.charCodeAt(a),s<128?r[i++]=s:s<2048?(r[i++]=s>>6|192,r[i++]=s&63|128):(s&64512)==55296&&((o=e.charCodeAt(a+1))&64512)==56320?(s=65536+((s&1023)<<10)+(o&1023),++a,r[i++]=s>>18|240,r[i++]=s>>12&63|128,r[i++]=s>>6&63|128,r[i++]=s&63|128):(r[i++]=s>>12|224,r[i++]=s>>6&63|128,r[i++]=s&63|128);return i-n}});var Yk=p((Bwt,Wk)=>{l();"use strict";Wk.exports=wxe;function wxe(t,e,r){var i=r||8192,n=i>>>1,s=null,o=i;return function(c){if(c<1||c>n)return t(c);o+c>i&&(s=t(i),o=0);var u=e.call(s,o,o+=c);return o&7&&(o=(o|7)+1),u}}});var Qk=p((Mwt,Xk)=>{l();"use strict";Xk.exports=ki;var c2=Mu();function ki(t,e){this.lo=t>>>0,this.hi=e>>>0}var fl=ki.zero=new ki(0,0);fl.toNumber=function(){return 0};fl.zzEncode=fl.zzDecode=function(){return this};fl.length=function(){return 1};var _xe=ki.zeroHash="\0\0\0\0\0\0\0\0";ki.fromNumber=function(e){if(e===0)return fl;var r=e<0;r&&(e=-e);var i=e>>>0,n=(e-i)/4294967296>>>0;return r&&(n=~n>>>0,i=~i>>>0,++i>4294967295&&(i=0,++n>4294967295&&(n=0))),new ki(i,n)};ki.from=function(e){if(typeof e=="number")return ki.fromNumber(e);if(c2.isString(e))if(c2.Long)e=c2.Long.fromString(e);else return ki.fromNumber(parseInt(e,10));return e.low||e.high?new ki(e.low>>>0,e.high>>>0):fl};ki.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,i=~this.hi>>>0;return r||(i=i+1>>>0),-(r+i*4294967296)}return this.lo+this.hi*4294967296};ki.prototype.toLong=function(e){return c2.Long?new c2.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var Bu=String.prototype.charCodeAt;ki.fromHash=function(e){return e===_xe?fl:new ki((Bu.call(e,0)|Bu.call(e,1)<<8|Bu.call(e,2)<<16|Bu.call(e,3)<<24)>>>0,(Bu.call(e,4)|Bu.call(e,5)<<8|Bu.call(e,6)<<16|Bu.call(e,7)<<24)>>>0)};ki.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};ki.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};ki.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};ki.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return i===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:i<128?9:10}});var Mu=p(dw=>{l();"use strict";var He=dw;He.asPromise=Ok();He.base64=Nk();He.EventEmitter=Mk();He.float=zk();He.inquire=Hk();He.utf8=Gk();He.pool=Yk();He.LongBits=Qk();He.isNode=Boolean(typeof globalThis!="undefined"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);He.global=He.isNode&&globalThis||typeof window!="undefined"&&window||typeof self!="undefined"&&self||dw;He.emptyArray=Object.freeze?Object.freeze([]):[];He.emptyObject=Object.freeze?Object.freeze({}):{};He.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};He.isString=function(e){return typeof e=="string"||e instanceof String};He.isObject=function(e){return e&&typeof e=="object"};He.isset=He.isSet=function(e,r){var i=e[r];return i!=null&&e.hasOwnProperty(r)?typeof i!="object"||(Array.isArray(i)?i.length:Object.keys(i).length)>0:!1};He.Buffer=function(){try{var t=He.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}();He._Buffer_from=null;He._Buffer_allocUnsafe=null;He.newBuffer=function(e){return typeof e=="number"?He.Buffer?He._Buffer_allocUnsafe(e):new He.Array(e):He.Buffer?He._Buffer_from(e):typeof Uint8Array=="undefined"?e:new Uint8Array(e)};He.Array=typeof Uint8Array!="undefined"?Uint8Array:Array;He.Long=He.global.dcodeIO&&He.global.dcodeIO.Long||He.global.Long||He.inquire("long");He.key2Re=/^true|false|0|1$/;He.key32Re=/^-?(?:0|[1-9][0-9]*)$/;He.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;He.longToHash=function(e){return e?He.LongBits.from(e).toHash():He.LongBits.zeroHash};He.longFromHash=function(e,r){var i=He.LongBits.fromHash(e);return He.Long?He.Long.fromBits(i.lo,i.hi,r):i.toNumber(Boolean(r))};function Zk(t,e,r){for(var i=Object.keys(e),n=0;n<i.length;++n)(t[i[n]]===void 0||!r)&&(t[i[n]]=e[i[n]]);return t}He.merge=Zk;He.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function Jk(t){function e(r,i){if(!(this instanceof e))return new e(r,i);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),i&&Zk(this,i)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}He.newError=Jk;He.ProtocolError=Jk("ProtocolError");He.oneOfGetter=function(e){for(var r={},i=0;i<e.length;++i)r[e[i]]=1;return function(){for(var n=Object.keys(this),s=n.length-1;s>-1;--s)if(r[n[s]]===1&&this[n[s]]!==void 0&&this[n[s]]!==null)return n[s]}};He.oneOfSetter=function(e){return function(r){for(var i=0;i<e.length;++i)e[i]!==r&&delete this[e[i]]}};He.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};He._configure=function(){var t=He.Buffer;if(!t){He._Buffer_from=He._Buffer_allocUnsafe=null;return}He._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,i){return new t(r,i)},He._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var vw=p((Uwt,iq)=>{l();"use strict";iq.exports=kt;var Ts=Mu(),hw,O6=Ts.LongBits,eq=Ts.base64,tq=Ts.utf8;function u2(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function pw(){}function Exe(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function kt(){this.len=0,this.head=new u2(pw,0,0),this.tail=this.head,this.states=null}var rq=function(){return Ts.Buffer?function(){return(kt.create=function(){return new hw})()}:function(){return new kt}};kt.create=rq();kt.alloc=function(e){return new Ts.Array(e)};Ts.Array!==Array&&(kt.alloc=Ts.pool(kt.alloc,Ts.Array.prototype.subarray));kt.prototype._push=function(e,r,i){return this.tail=this.tail.next=new u2(e,r,i),this.len+=r,this};function yw(t,e,r){e[r]=t&255}function Sxe(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function gw(t,e){this.len=t,this.next=void 0,this.val=e}gw.prototype=Object.create(u2.prototype);gw.prototype.fn=Sxe;kt.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new gw((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};kt.prototype.int32=function(e){return e<0?this._push(bw,10,O6.fromNumber(e)):this.uint32(e)};kt.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function bw(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}kt.prototype.uint64=function(e){var r=O6.from(e);return this._push(bw,r.length(),r)};kt.prototype.int64=kt.prototype.uint64;kt.prototype.sint64=function(e){var r=O6.from(e).zzEncode();return this._push(bw,r.length(),r)};kt.prototype.bool=function(e){return this._push(yw,1,e?1:0)};function mw(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}kt.prototype.fixed32=function(e){return this._push(mw,4,e>>>0)};kt.prototype.sfixed32=kt.prototype.fixed32;kt.prototype.fixed64=function(e){var r=O6.from(e);return this._push(mw,4,r.lo)._push(mw,4,r.hi)};kt.prototype.sfixed64=kt.prototype.fixed64;kt.prototype.float=function(e){return this._push(Ts.float.writeFloatLE,4,e)};kt.prototype.double=function(e){return this._push(Ts.float.writeDoubleLE,8,e)};var xxe=Ts.Array.prototype.set?function(e,r,i){r.set(e,i)}:function(e,r,i){for(var n=0;n<e.length;++n)r[i+n]=e[n]};kt.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(yw,1,0);if(Ts.isString(e)){var i=kt.alloc(r=eq.length(e));eq.decode(e,i,0),e=i}return this.uint32(r)._push(xxe,r,e)};kt.prototype.string=function(e){var r=tq.length(e);return r?this.uint32(r)._push(tq.write,r,e):this._push(yw,1,0)};kt.prototype.fork=function(){return this.states=new Exe(this),this.head=this.tail=new u2(pw,0,0),this.len=0,this};kt.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u2(pw,0,0),this.len=0),this};kt.prototype.ldelim=function(){var e=this.head,r=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=r,this.len+=i),this};kt.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,r,i),i+=e.len,e=e.next;return r};kt._configure=function(t){hw=t,kt.create=rq(),hw._configure()}});var oq=p((Fwt,sq)=>{l();"use strict";sq.exports=ga;var nq=vw();(ga.prototype=Object.create(nq.prototype)).constructor=ga;var Lu=Mu();function ga(){nq.call(this)}ga._configure=function(){ga.alloc=Lu._Buffer_allocUnsafe,ga.writeBytesBuffer=Lu.Buffer&&Lu.Buffer.prototype instanceof Uint8Array&&Lu.Buffer.prototype.set.name==="set"?function(e,r,i){r.set(e,i)}:function(e,r,i){if(e.copy)e.copy(r,i,0,e.length);else for(var n=0;n<e.length;)r[i++]=e[n++]}};ga.prototype.bytes=function(e){Lu.isString(e)&&(e=Lu._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(ga.writeBytesBuffer,r,e),this};function Axe(t,e,r){t.length<40?Lu.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}ga.prototype.string=function(e){var r=Lu.Buffer.byteLength(e);return this.uint32(r),r&&this._push(Axe,r,e),this};ga._configure()});var Ew=p((jwt,lq)=>{l();"use strict";lq.exports=ri;var ba=Mu(),ww,aq=ba.LongBits,Ixe=ba.utf8;function mo(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function ri(t){this.buf=t,this.pos=0,this.len=t.length}var cq=typeof Uint8Array!="undefined"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new ri(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new ri(e);throw Error("illegal buffer")},uq=function(){return ba.Buffer?function(r){return(ri.create=function(n){return ba.Buffer.isBuffer(n)?new ww(n):cq(n)})(r)}:cq};ri.create=uq();ri.prototype._slice=ba.Array.prototype.subarray||ba.Array.prototype.slice;ri.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,mo(this,10);return e}}();ri.prototype.int32=function(){return this.uint32()|0};ri.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function _w(){var t=new aq(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw mo(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw mo(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}ri.prototype.bool=function(){return this.uint32()!==0};function k6(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}ri.prototype.fixed32=function(){if(this.pos+4>this.len)throw mo(this,4);return k6(this.buf,this.pos+=4)};ri.prototype.sfixed32=function(){if(this.pos+4>this.len)throw mo(this,4);return k6(this.buf,this.pos+=4)|0};function fq(){if(this.pos+8>this.len)throw mo(this,8);return new aq(k6(this.buf,this.pos+=4),k6(this.buf,this.pos+=4))}ri.prototype.float=function(){if(this.pos+4>this.len)throw mo(this,4);var e=ba.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};ri.prototype.double=function(){if(this.pos+8>this.len)throw mo(this,4);var e=ba.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};ri.prototype.bytes=function(){var e=this.uint32(),r=this.pos,i=this.pos+e;if(i>this.len)throw mo(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,i):r===i?new this.buf.constructor(0):this._slice.call(this.buf,r,i)};ri.prototype.string=function(){var e=this.bytes();return Ixe.read(e,0,e.length)};ri.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw mo(this,e);this.pos+=e}else do if(this.pos>=this.len)throw mo(this);while(this.buf[this.pos++]&128);return this};ri.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!=4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};ri._configure=function(t){ww=t,ri.create=uq(),ww._configure();var e=ba.Long?"toLong":"toNumber";ba.merge(ri.prototype,{int64:function(){return _w.call(this)[e](!1)},uint64:function(){return _w.call(this)[e](!0)},sint64:function(){return _w.call(this).zzDecode()[e](!1)},fixed64:function(){return fq.call(this)[e](!0)},sfixed64:function(){return fq.call(this)[e](!1)}})}});var yq=p((Kwt,pq)=>{l();"use strict";pq.exports=ll;var dq=Ew();(ll.prototype=Object.create(dq.prototype)).constructor=ll;var hq=Mu();function ll(t){dq.call(this,t)}ll._configure=function(){hq.Buffer&&(ll.prototype._slice=hq.Buffer.prototype.slice)};ll.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};ll._configure()});var bq=p((Vwt,gq)=>{l();"use strict";gq.exports=f2;var Sw=Mu();(f2.prototype=Object.create(Sw.EventEmitter.prototype)).constructor=f2;function f2(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");Sw.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}f2.prototype.rpcCall=function t(e,r,i,n,s){if(!n)throw TypeError("request must be specified");var o=this;if(!s)return Sw.asPromise(t,o,e,r,i,n);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(e,r[o.requestDelimited?"encodeDelimited":"encode"](n).finish(),function(c,u){if(c)return o.emit("error",c,e),s(c);if(u===null){o.end(!0);return}if(!(u instanceof i))try{u=i[o.responseDelimited?"decodeDelimited":"decode"](u)}catch(f){return o.emit("error",f,e),s(f)}return o.emit("data",u,e),s(null,u)})}catch(a){o.emit("error",a,e),setTimeout(function(){s(a)},0);return}};f2.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var vq=p(mq=>{l();"use strict";var Txe=mq;Txe.Service=bq()});var _q=p((Hwt,wq)=>{l();"use strict";wq.exports={}});var xq=p(Sq=>{l();"use strict";var Un=Sq;Un.build="minimal";Un.Writer=vw();Un.BufferWriter=oq();Un.Reader=Ew();Un.BufferReader=yq();Un.util=Mu();Un.rpc=vq();Un.roots=_q();Un.configure=Eq;function Eq(){Un.util._configure(),Un.Writer._configure(Un.BufferWriter),Un.Reader._configure(Un.BufferReader)}Eq()});var qi=p((Gwt,Aq)=>{l();"use strict";Aq.exports=xq()});var D6=p((Wwt,Tq)=>{l();"use strict";var dl=qi(),q6=dl.Reader,Iq=dl.Writer,cn=dl.util,Rs=dl.roots["libp2p-crypto-keys"]||(dl.roots["libp2p-crypto-keys"]={});Rs.KeyType=function(){var t={},e=Object.create(t);return e[t[0]="RSA"]=0,e[t[1]="Ed25519"]=1,e[t[2]="Secp256k1"]=2,e}();Rs.PublicKey=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=cn.newBuffer([]),t.encode=function(r,i){return i||(i=Iq.create()),i.uint32(8).int32(r.Type),i.uint32(18).bytes(r.Data),i},t.decode=function(r,i){r instanceof q6||(r=q6.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Rs.PublicKey;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("Type"))throw cn.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw cn.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Rs.PublicKey)return r;var i=new Rs.PublicKey;switch(r.Type){case"RSA":case 0:i.Type=0;break;case"Ed25519":case 1:i.Type=1;break;case"Secp256k1":case 2:i.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?cn.base64.decode(r.Data,i.Data=cn.newBuffer(cn.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.Type=i.enums===String?"RSA":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=cn.newBuffer(n.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?Rs.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?cn.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,dl.util.toJSONOptions)},t}();Rs.PrivateKey=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=cn.newBuffer([]),t.encode=function(r,i){return i||(i=Iq.create()),i.uint32(8).int32(r.Type),i.uint32(18).bytes(r.Data),i},t.decode=function(r,i){r instanceof q6||(r=q6.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Rs.PrivateKey;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("Type"))throw cn.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw cn.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Rs.PrivateKey)return r;var i=new Rs.PrivateKey;switch(r.Type){case"RSA":case 0:i.Type=0;break;case"Ed25519":case 1:i.Type=1;break;case"Secp256k1":case 2:i.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?cn.base64.decode(r.Data,i.Data=cn.newBuffer(cn.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.Type=i.enums===String?"RSA":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=cn.newBuffer(n.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?Rs.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?cn.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,dl.util.toJSONOptions)},t}();Tq.exports=Rs});var ft=p((Ywt,Rq)=>{l();Rq.exports={options:{usePureJavaScript:!1}}});var Oq=p((Xwt,Cq)=>{l();var xw={};Cq.exports=xw;var Pq={};xw.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var i="";if(!(t instanceof Uint8Array))i=Rxe(t,e);else{var n=0,s=e.length,o=e.charAt(0),a=[0];for(n=0;n<t.length;++n){for(var c=0,u=t[n];c<a.length;++c)u+=a[c]<<8,a[c]=u%s,u=u/s|0;for(;u>0;)a.push(u%s),u=u/s|0}for(n=0;t[n]===0&&n<t.length-1;++n)i+=o;for(n=a.length-1;n>=0;--n)i+=e[a[n]]}if(r){var f=new RegExp(".{1,"+r+"}","g");i=i.match(f).join(`\r
`)}return i};xw.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=Pq[e];if(!r){r=Pq[e]=[];for(var i=0;i<e.length;++i)r[e.charCodeAt(i)]=i}t=t.replace(/\s/g,"");for(var n=e.length,s=e.charAt(0),o=[0],i=0;i<t.length;i++){var a=r[t.charCodeAt(i)];if(a===void 0)return;for(var c=0,u=a;c<o.length;++c)u+=o[c]*n,o[c]=u&255,u>>=8;for(;u>0;)o.push(u&255),u>>=8}for(var f=0;t[f]===s&&f<t.length-1;++f)o.push(0);return typeof Buffer!="undefined"?Buffer.from(o.reverse()):new Uint8Array(o.reverse())};function Rxe(t,e){var r=0,i=e.length,n=e.charAt(0),s=[0];for(r=0;r<t.length();++r){for(var o=0,a=t.at(r);o<s.length;++o)a+=s[o]<<8,s[o]=a%i,a=a/i|0;for(;a>0;)s.push(a%i),a=a/i|0}var c="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)c+=n;for(r=s.length-1;r>=0;--r)c+=e[s[r]];return c}});var Qt=p((Qwt,Nq)=>{l();var kq=ft(),qq=Oq(),re=Nq.exports=kq.util=kq.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){re.nextTick=process.nextTick,typeof setImmediate=="function"?re.setImmediate=setImmediate:re.setImmediate=re.nextTick;return}if(typeof setImmediate=="function"){re.setImmediate=function(){return setImmediate.apply(void 0,arguments)},re.nextTick=function(a){return setImmediate(a)};return}if(re.setImmediate=function(a){setTimeout(a,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let a=function(c){if(c.source===window&&c.data===t){c.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(f){f()})}};var o=a,t="forge.setImmediate",e=[];re.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),i=!0,n=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(u){u()})}).observe(n,{attributes:!0});var s=re.setImmediate;re.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),s(c)):(e.push(c),e.length===1&&n.setAttribute("a",i=!i))}}re.nextTick=re.setImmediate})();re.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;re.globalScope=function(){return re.isNodejs?globalThis:typeof self=="undefined"?window:self}();re.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};re.isArrayBuffer=function(t){return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer};re.isArrayBufferView=function(t){return t&&re.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function l2(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}re.ByteBuffer=Aw;function Aw(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(re.isArrayBuffer(t)||re.isArrayBufferView(t))if(typeof Buffer!="undefined"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(i){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof Aw||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}re.ByteStringBuffer=Aw;var Pxe=4096;re.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>Pxe&&(this.data.substr(0,1),this._constructedStringLength=0)};re.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};re.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};re.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};re.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};re.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};re.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(re.encodeUtf8(t))};re.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};re.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};re.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};re.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};re.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};re.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};re.ByteStringBuffer.prototype.putInt=function(t,e){l2(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};re.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};re.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};re.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};re.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};re.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};re.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};re.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};re.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};re.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};re.ByteStringBuffer.prototype.getInt=function(t){l2(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};re.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};re.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};re.ByteStringBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};re.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};re.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};re.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};re.ByteStringBuffer.prototype.copy=function(){var t=re.createBuffer(this.data);return t.read=this.read,t};re.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};re.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};re.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};re.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};re.ByteStringBuffer.prototype.toString=function(){return re.decodeUtf8(this.bytes())};function Cxe(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=re.isArrayBuffer(t),i=re.isArrayBufferView(t);if(r||i){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}re.DataBuffer=Cxe;re.DataBuffer.prototype.length=function(){return this.write-this.read};re.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};re.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),i=new Uint8Array(this.length()+e);return i.set(r),this.data=new DataView(i.buffer),this};re.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};re.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};re.DataBuffer.prototype.putBytes=function(t,e){if(re.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i=r.byteLength-r.byteOffset;this.accommodate(i);var n=new Uint8Array(this.data.buffer,this.write);return n.set(r),this.write+=i,this}if(re.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var n=new Uint8Array(this.data.buffer);return n.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof re.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&re.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var n=new Uint8Array(t.data.byteLength,this.write);return n.set(r),this.write+=r.byteLength,this}if(t instanceof re.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var s;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=re.binary.hex.decode(t,s,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=re.binary.base64.decode(t,s,this.write),this;if(e==="utf8"&&(t=re.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=re.binary.raw.decode(s),this;if(e==="utf16")return this.accommodate(t.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=re.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};re.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};re.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};re.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};re.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};re.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};re.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};re.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};re.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};re.DataBuffer.prototype.putInt=function(t,e){l2(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};re.DataBuffer.prototype.putSignedInt=function(t,e){return l2(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};re.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};re.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};re.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};re.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};re.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};re.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};re.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};re.DataBuffer.prototype.getInt=function(t){l2(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};re.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};re.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};re.DataBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};re.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};re.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};re.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};re.DataBuffer.prototype.copy=function(){return new re.DataBuffer(this)};re.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};re.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};re.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};re.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};re.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return re.binary.raw.encode(e);if(t==="hex")return re.binary.hex.encode(e);if(t==="base64")return re.binary.base64.encode(e);if(t==="utf8")return re.text.utf8.decode(e);if(t==="utf16")return re.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};re.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=re.encodeUtf8(t)),new re.ByteBuffer(t)};re.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};re.xorBytes=function(t,e,r){for(var i="",n="",s="",o=0,a=0;r>0;--r,++o)n=t.charCodeAt(o)^e.charCodeAt(o),a>=10&&(i+=s,s="",a=0),s+=String.fromCharCode(n),++a;return i+=s,i};re.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};re.bytesToHex=function(t){return re.createBuffer(t).toHex()};re.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Uu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Fu=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Dq="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";re.encode64=function(t,e){for(var r="",i="",n,s,o,a=0;a<t.length;)n=t.charCodeAt(a++),s=t.charCodeAt(a++),o=t.charCodeAt(a++),r+=Uu.charAt(n>>2),r+=Uu.charAt((n&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Uu.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":Uu.charAt(o&63)),e&&r.length>e&&(i+=r.substr(0,e)+`\r
`,r=r.substr(e));return i+=r,i};re.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,i,n,s,o=0;o<t.length;)r=Fu[t.charCodeAt(o++)-43],i=Fu[t.charCodeAt(o++)-43],n=Fu[t.charCodeAt(o++)-43],s=Fu[t.charCodeAt(o++)-43],e+=String.fromCharCode(r<<2|i>>4),n!==64&&(e+=String.fromCharCode((i&15)<<4|n>>2),s!==64&&(e+=String.fromCharCode((n&3)<<6|s)));return e};re.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};re.decodeUtf8=function(t){return decodeURIComponent(escape(t))};re.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:qq.encode,decode:qq.decode}};re.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};re.binary.raw.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length)),r=r||0;for(var n=r,s=0;s<t.length;++s)i[n++]=t.charCodeAt(s);return e?n-r:i};re.binary.hex.encode=re.bytesToHex;re.binary.hex.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var n=0,s=r;for(t.length&1&&(n=1,i[s++]=parseInt(t[0],16));n<t.length;n+=2)i[s++]=parseInt(t.substr(n,2),16);return e?s-r:i};re.binary.base64.encode=function(t,e){for(var r="",i="",n,s,o,a=0;a<t.byteLength;)n=t[a++],s=t[a++],o=t[a++],r+=Uu.charAt(n>>2),r+=Uu.charAt((n&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Uu.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":Uu.charAt(o&63)),e&&r.length>e&&(i+=r.substr(0,e)+`\r
`,r=r.substr(e));return i+=r,i};re.binary.base64.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var n,s,o,a,c=0,u=r;c<t.length;)n=Fu[t.charCodeAt(c++)-43],s=Fu[t.charCodeAt(c++)-43],o=Fu[t.charCodeAt(c++)-43],a=Fu[t.charCodeAt(c++)-43],i[u++]=n<<2|s>>4,o!==64&&(i[u++]=(s&15)<<4|o>>2,a!==64&&(i[u++]=(o&3)<<6|a));return e?u-r:i.subarray(0,u)};re.binary.base58.encode=function(t,e){return re.binary.baseN.encode(t,Dq,e)};re.binary.base58.decode=function(t,e){return re.binary.baseN.decode(t,Dq,e)};re.text={utf8:{},utf16:{}};re.text.utf8.encode=function(t,e,r){t=re.encodeUtf8(t);var i=e;i||(i=new Uint8Array(t.length)),r=r||0;for(var n=r,s=0;s<t.length;++s)i[n++]=t.charCodeAt(s);return e?n-r:i};re.text.utf8.decode=function(t){return re.decodeUtf8(String.fromCharCode.apply(null,t))};re.text.utf16.encode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length*2));var n=new Uint16Array(i.buffer);r=r||0;for(var s=r,o=r,a=0;a<t.length;++a)n[o++]=t.charCodeAt(a),s+=2;return e?s-r:i};re.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};re.deflate=function(t,e,r){if(e=re.decode64(t.deflate(re.encode64(e)).rval),r){var i=2,n=e.charCodeAt(1);n&32&&(i=6),e=e.substring(i,e.length-4)}return e};re.inflate=function(t,e,r){var i=t.inflate(re.encode64(e)).rval;return i===null?null:re.decode64(i)};var Iw=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var i;if(r===null?i=t.removeItem(e):(r=re.encode64(JSON.stringify(r)),i=t.setItem(e,r)),typeof i!="undefined"&&i.rval!==!0){var n=new Error(i.error.message);throw n.id=i.error.id,n.name=i.error.name,n}},Tw=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(re.decode64(r))),r},Oxe=function(t,e,r,i){var n=Tw(t,e);n===null&&(n={}),n[r]=i,Iw(t,e,n)},kxe=function(t,e,r){var i=Tw(t,e);return i!==null&&(i=r in i?i[r]:null),i},qxe=function(t,e,r){var i=Tw(t,e);if(i!==null&&r in i){delete i[r];var n=!0;for(var s in i){n=!1;break}n&&(i=null),Iw(t,e,i)}},Dxe=function(t,e){Iw(t,e,null)},N6=function(t,e,r){var i=null;typeof r=="undefined"&&(r=["web","flash"]);var n,s=!1,o=null;for(var a in r){n=r[a];try{if(n==="flash"||n==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");i=t.apply(this,e),s=n==="flash"}(n==="web"||n==="both")&&(e[0]=localStorage,i=t.apply(this,e),s=!0)}catch(c){o=c}if(s)break}if(!s)throw o;return i};re.setItem=function(t,e,r,i,n){N6(Oxe,arguments,n)};re.getItem=function(t,e,r,i){return N6(kxe,arguments,i)};re.removeItem=function(t,e,r,i){N6(qxe,arguments,i)};re.clearItems=function(t,e,r){N6(Dxe,arguments,r)};re.parseUrl=function(t){var e=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;e.lastIndex=0;var r=e.exec(t),i=r===null?null:{full:t,scheme:r[1],host:r[2],port:r[3],path:r[4]};return i&&(i.fullHost=i.host,i.port?(i.port!==80&&i.scheme==="http"||i.port!==443&&i.scheme==="https")&&(i.fullHost+=":"+i.port):i.scheme==="http"?i.port=80:i.scheme==="https"&&(i.port=443),i.full=i.scheme+"://"+i.fullHost),i};var B6=null;re.getQueryVariables=function(t){var e=function(i){for(var n={},s=i.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("="),c,u;a>0?(c=s[o].substring(0,a),u=s[o].substring(a+1)):(c=s[o],u=null),c in n||(n[c]=[]),!(c in Object.prototype)&&u!==null&&n[c].push(unescape(u))}return n},r;return typeof t=="undefined"?(B6===null&&(typeof window!="undefined"&&window.location&&window.location.search?B6=e(window.location.search.substring(1)):B6={}),r=B6):r=e(t),r};re.parseFragment=function(t){var e=t,r="",i=t.indexOf("?");i>0&&(e=t.substring(0,i),r=t.substring(i+1));var n=e.split("/");n.length>0&&n[0]===""&&n.shift();var s=r===""?{}:re.getQueryVariables(r);return{pathString:e,queryString:r,path:n,query:s}};re.makeRequest=function(t){var e=re.parseFragment(t),r={path:e.pathString,query:e.queryString,getPath:function(i){return typeof i=="undefined"?e.path:e.path[i]},getQuery:function(i,n){var s;return typeof i=="undefined"?s=e.query:(s=e.query[i],s&&typeof n!="undefined"&&(s=s[n])),s},getQueryLast:function(i,n){var s,o=r.getQuery(i);return o?s=o[o.length-1]:s=n,s}};return r};re.makeLink=function(t,e,r){t=jQuery.isArray(t)?t.join("/"):t;var i=jQuery.param(e||{});return r=r||"",t+(i.length>0?"?"+i:"")+(r.length>0?"#"+r:"")};re.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};re.format=function(t){for(var e=/%./g,r,i,n=0,s=[],o=0;r=e.exec(t);){i=t.substring(o,e.lastIndex-2),i.length>0&&s.push(i),o=e.lastIndex;var a=r[0][1];switch(a){case"s":case"o":n<arguments.length?s.push(arguments[n+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(t.substring(o)),s.join("")};re.formatNumber=function(t,e,r,i){var n=t,s=isNaN(e=Math.abs(e))?2:e,o=r===void 0?",":r,a=i===void 0?".":i,c=n<0?"-":"",u=parseInt(n=Math.abs(+n||0).toFixed(s),10)+"",f=u.length>3?u.length%3:0;return c+(f?u.substr(0,f)+a:"")+u.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(n-u).toFixed(s).slice(2):"")};re.formatSize=function(t){return t>=1073741824?t=re.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=re.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=re.formatNumber(t/1024,0)+" KiB":t=re.formatNumber(t,0)+" bytes",t};re.bytesFromIP=function(t){return t.indexOf(".")!==-1?re.bytesFromIPv4(t):t.indexOf(":")!==-1?re.bytesFromIPv6(t):null};re.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=re.createBuffer(),r=0;r<t.length;++r){var i=parseInt(t[r],10);if(isNaN(i))return null;e.putByte(i)}return e.getBytes()};re.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(o){return o.length===0&&++e,!0});for(var r=(8-t.length+e)*2,i=re.createBuffer(),n=0;n<8;++n){if(!t[n]||t[n].length===0){i.fillWithByte(0,r),r=0;continue}var s=re.hexToBytes(t[n]);s.length<2&&i.putByte(0),i.putBytes(s)}return i.getBytes()};re.bytesToIP=function(t){return t.length===4?re.bytesToIPv4(t):t.length===16?re.bytesToIPv6(t):null};re.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};re.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],i=0,n=0;n<t.length;n+=2){for(var s=re.bytesToHex(t[n]+t[n+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var o=r[r.length-1],a=e.length;!o||a!==o.end+1?r.push({start:a,end:a}):(o.end=a,o.end-o.start>r[i].end-r[i].start&&(i=r.length-1))}e.push(s)}if(r.length>0){var c=r[i];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};re.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in re&&!t.update)return e(null,re.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return re.cores=navigator.hardwareConcurrency,e(null,re.cores);if(typeof Worker=="undefined")return re.cores=1,e(null,re.cores);if(typeof Blob=="undefined")return re.cores=2,e(null,re.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(o){for(var a=Date.now(),c=a+4;Date.now()<c;);self.postMessage({st:a,et:c})})}.toString(),")()"],{type:"application/javascript"}));i([],5,16);function i(o,a,c){if(a===0){var u=Math.floor(o.reduce(function(f,d){return f+d},0)/o.length);return re.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,re.cores)}n(c,function(f,d){o.push(s(c,d)),i(o,a-1,c)})}function n(o,a){for(var c=[],u=[],f=0;f<o;++f){var d=new Worker(r);d.addEventListener("message",function(h){if(u.push(h.data),u.length===o){for(var y=0;y<o;++y)c[y].terminate();a(null,u)}}),c.push(d)}for(var f=0;f<o;++f)c[f].postMessage(f)}function s(o,a){for(var c=[],u=0;u<o;++u)for(var f=a[u],d=c[u]=[],h=0;h<o;++h)if(u!==h){var y=a[h];(f.st>y.st&&f.st<y.et||y.st>f.st&&y.st<f.et)&&d.push(h)}return c.reduce(function(g,m){return Math.max(g,m.length)},0)}}});var gh=p((Zwt,Bq)=>{l();var d2=ft();d2.pki=d2.pki||{};var Rw=Bq.exports=d2.pki.oids=d2.oids=d2.oids||{};function xe(t,e){Rw[t]=e,Rw[e]=t}function Ht(t,e){Rw[t]=e}xe("1.2.840.113549.1.1.1","rsaEncryption");xe("1.2.840.113549.1.1.4","md5WithRSAEncryption");xe("1.2.840.113549.1.1.5","sha1WithRSAEncryption");xe("1.2.840.113549.1.1.7","RSAES-OAEP");xe("1.2.840.113549.1.1.8","mgf1");xe("1.2.840.113549.1.1.9","pSpecified");xe("1.2.840.113549.1.1.10","RSASSA-PSS");xe("1.2.840.113549.1.1.11","sha256WithRSAEncryption");xe("1.2.840.113549.1.1.12","sha384WithRSAEncryption");xe("1.2.840.113549.1.1.13","sha512WithRSAEncryption");xe("1.3.101.112","EdDSA25519");xe("1.2.840.10040.4.3","dsa-with-sha1");xe("1.3.14.3.2.7","desCBC");xe("1.3.14.3.2.26","sha1");xe("2.16.840.1.101.3.4.2.1","sha256");xe("2.16.840.1.101.3.4.2.2","sha384");xe("2.16.840.1.101.3.4.2.3","sha512");xe("1.2.840.113549.2.5","md5");xe("1.2.840.113549.1.7.1","data");xe("1.2.840.113549.1.7.2","signedData");xe("1.2.840.113549.1.7.3","envelopedData");xe("1.2.840.113549.1.7.4","signedAndEnvelopedData");xe("1.2.840.113549.1.7.5","digestedData");xe("1.2.840.113549.1.7.6","encryptedData");xe("1.2.840.113549.1.9.1","emailAddress");xe("1.2.840.113549.1.9.2","unstructuredName");xe("1.2.840.113549.1.9.3","contentType");xe("1.2.840.113549.1.9.4","messageDigest");xe("1.2.840.113549.1.9.5","signingTime");xe("1.2.840.113549.1.9.6","counterSignature");xe("1.2.840.113549.1.9.7","challengePassword");xe("1.2.840.113549.1.9.8","unstructuredAddress");xe("1.2.840.113549.1.9.14","extensionRequest");xe("1.2.840.113549.1.9.20","friendlyName");xe("1.2.840.113549.1.9.21","localKeyId");xe("1.2.840.113549.1.9.22.1","x509Certificate");xe("1.2.840.113549.1.12.10.1.1","keyBag");xe("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");xe("1.2.840.113549.1.12.10.1.3","certBag");xe("1.2.840.113549.1.12.10.1.4","crlBag");xe("1.2.840.113549.1.12.10.1.5","secretBag");xe("1.2.840.113549.1.12.10.1.6","safeContentsBag");xe("1.2.840.113549.1.5.13","pkcs5PBES2");xe("1.2.840.113549.1.5.12","pkcs5PBKDF2");xe("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");xe("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");xe("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");xe("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");xe("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");xe("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");xe("1.2.840.113549.2.7","hmacWithSHA1");xe("1.2.840.113549.2.8","hmacWithSHA224");xe("1.2.840.113549.2.9","hmacWithSHA256");xe("1.2.840.113549.2.10","hmacWithSHA384");xe("1.2.840.113549.2.11","hmacWithSHA512");xe("1.2.840.113549.3.7","des-EDE3-CBC");xe("2.16.840.1.101.3.4.1.2","aes128-CBC");xe("2.16.840.1.101.3.4.1.22","aes192-CBC");xe("2.16.840.1.101.3.4.1.42","aes256-CBC");xe("2.5.4.3","commonName");xe("2.5.4.5","serialName");xe("2.5.4.6","countryName");xe("2.5.4.7","localityName");xe("2.5.4.8","stateOrProvinceName");xe("2.5.4.9","streetAddress");xe("2.5.4.10","organizationName");xe("2.5.4.11","organizationalUnitName");xe("2.5.4.13","description");xe("2.5.4.15","businessCategory");xe("2.5.4.17","postalCode");xe("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");xe("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");xe("2.16.840.1.113730.1.1","nsCertType");xe("2.16.840.1.113730.1.13","nsComment");Ht("2.5.29.1","authorityKeyIdentifier");Ht("2.5.29.2","keyAttributes");Ht("2.5.29.3","certificatePolicies");Ht("2.5.29.4","keyUsageRestriction");Ht("2.5.29.5","policyMapping");Ht("2.5.29.6","subtreesConstraint");Ht("2.5.29.7","subjectAltName");Ht("2.5.29.8","issuerAltName");Ht("2.5.29.9","subjectDirectoryAttributes");Ht("2.5.29.10","basicConstraints");Ht("2.5.29.11","nameConstraints");Ht("2.5.29.12","policyConstraints");Ht("2.5.29.13","basicConstraints");xe("2.5.29.14","subjectKeyIdentifier");xe("2.5.29.15","keyUsage");Ht("2.5.29.16","privateKeyUsagePeriod");xe("2.5.29.17","subjectAltName");xe("2.5.29.18","issuerAltName");xe("2.5.29.19","basicConstraints");Ht("2.5.29.20","cRLNumber");Ht("2.5.29.21","cRLReason");Ht("2.5.29.22","expirationDate");Ht("2.5.29.23","instructionCode");Ht("2.5.29.24","invalidityDate");Ht("2.5.29.25","cRLDistributionPoints");Ht("2.5.29.26","issuingDistributionPoint");Ht("2.5.29.27","deltaCRLIndicator");Ht("2.5.29.28","issuingDistributionPoint");Ht("2.5.29.29","certificateIssuer");Ht("2.5.29.30","nameConstraints");xe("2.5.29.31","cRLDistributionPoints");xe("2.5.29.32","certificatePolicies");Ht("2.5.29.33","policyMappings");Ht("2.5.29.34","policyConstraints");xe("2.5.29.35","authorityKeyIdentifier");Ht("2.5.29.36","policyConstraints");xe("2.5.29.37","extKeyUsage");Ht("2.5.29.46","freshestCRL");Ht("2.5.29.54","inhibitAnyPolicy");xe("1.3.6.1.4.1.11129.2.4.2","timestampList");xe("1.3.6.1.5.5.7.1.1","authorityInfoAccess");xe("1.3.6.1.5.5.7.3.1","serverAuth");xe("1.3.6.1.5.5.7.3.2","clientAuth");xe("1.3.6.1.5.5.7.3.3","codeSigning");xe("1.3.6.1.5.5.7.3.4","emailProtection");xe("1.3.6.1.5.5.7.3.8","timeStamping")});var Tc=p((Jwt,Lq)=>{l();var mr=ft();Qt();gh();var Be=Lq.exports=mr.asn1=mr.asn1||{};Be.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};Be.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};Be.create=function(t,e,r,i,n){if(mr.util.isArray(i)){for(var s=[],o=0;o<i.length;++o)i[o]!==void 0&&s.push(i[o]);i=s}var a={tagClass:t,type:e,constructed:r,composed:r||mr.util.isArray(i),value:i};return n&&"bitStringContents"in n&&(a.bitStringContents=n.bitStringContents,a.original=Be.copy(a)),a};Be.copy=function(t,e){var r;if(mr.util.isArray(t)){r=[];for(var i=0;i<t.length;++i)r.push(Be.copy(t[i],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:Be.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};Be.equals=function(t,e,r){if(mr.util.isArray(t)){if(!mr.util.isArray(e)||t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(!Be.equals(t[i],e[i]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var n=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&Be.equals(t.value,e.value);return r&&r.includeBitStringContents&&(n=n&&t.bitStringContents===e.bitStringContents),n};Be.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,i=e&128;return i?r=t.getInt((e&127)<<3):r=e,r}};function h2(t,e,r){if(r>e){var i=new Error("Too few bytes to parse DER.");throw i.available=t.length(),i.remaining=e,i.requested=r,i}}var Nxe=function(t,e){var r=t.getByte();if(e--,r!==128){var i,n=r&128;if(!n)i=r;else{var s=r&127;h2(t,e,s),i=t.getInt(s<<3)}if(i<0)throw new Error("Negative length: "+i);return i}};Be.fromDer=function(t,e){return e===void 0&&(e={strict:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=mr.util.createBuffer(t)),M6(t,t.length(),0,e)};function M6(t,e,r,i){var n;h2(t,e,2);var s=t.getByte();e--;var o=s&192,a=s&31;n=t.length();var c=Nxe(t,e);if(e-=n-t.length(),c!==void 0&&c>e){if(i.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=c,u}c=e}var f,d,h=(s&32)==32;if(h)if(f=[],c===void 0)for(;;){if(h2(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}n=t.length(),f.push(M6(t,e,r+1,i)),e-=n-t.length()}else for(;c>0;)n=t.length(),f.push(M6(t,c,r+1,i)),e-=n-t.length(),c-=n-t.length();if(f===void 0&&o===Be.Class.UNIVERSAL&&a===Be.Type.BITSTRING&&(d=t.bytes(c)),f===void 0&&i.decodeBitStrings&&o===Be.Class.UNIVERSAL&&a===Be.Type.BITSTRING&&c>1){var y=t.read,g=e,m=0;if(a===Be.Type.BITSTRING&&(h2(t,e,1),m=t.getByte(),e--),m===0)try{n=t.length();var E={verbose:i.verbose,strict:!0,decodeBitStrings:!0},v=M6(t,e,r+1,E),A=n-t.length();e-=A,a==Be.Type.BITSTRING&&A++;var R=v.tagClass;A===c&&(R===Be.Class.UNIVERSAL||R===Be.Class.CONTEXT_SPECIFIC)&&(f=[v])}catch(q){}f===void 0&&(t.read=y,e=g)}if(f===void 0){if(c===void 0){if(i.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(a===Be.Type.BMPSTRING)for(f="";c>0;c-=2)h2(t,e,2),f+=String.fromCharCode(t.getInt16()),e-=2;else f=t.getBytes(c)}var F=d===void 0?null:{bitStringContents:d};return Be.create(o,a,h,f,F)}Be.toDer=function(t){var e=mr.util.createBuffer(),r=t.tagClass|t.type,i=mr.util.createBuffer(),n=!1;if("bitStringContents"in t&&(n=!0,t.original&&(n=Be.equals(t,t.original))),n)i.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:i.putByte(0);for(var s=0;s<t.value.length;++s)t.value[s]!==void 0&&i.putBuffer(Be.toDer(t.value[s]))}else if(t.type===Be.Type.BMPSTRING)for(var s=0;s<t.value.length;++s)i.putInt16(t.value.charCodeAt(s));else t.type===Be.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)==0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)==128)?i.putBytes(t.value.substr(1)):i.putBytes(t.value);if(e.putByte(r),i.length()<=127)e.putByte(i.length()&127);else{var o=i.length(),a="";do a+=String.fromCharCode(o&255),o=o>>>8;while(o>0);e.putByte(a.length|128);for(var s=a.length-1;s>=0;--s)e.putByte(a.charCodeAt(s))}return e.putBuffer(i),e};Be.oidToDer=function(t){var e=t.split("."),r=mr.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var i,n,s,o,a=2;a<e.length;++a){i=!0,n=[],s=parseInt(e[a],10);do o=s&127,s=s>>>7,i||(o|=128),n.push(o),i=!1;while(s>0);for(var c=n.length-1;c>=0;--c)r.putByte(n[c])}return r};Be.derToOid=function(t){var e;typeof t=="string"&&(t=mr.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var i=0;t.length()>0;)r=t.getByte(),i=i<<7,r&128?i+=r&127:(e+="."+(i+r),i=0);return e};Be.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var i=parseInt(t.substr(2,2),10)-1,n=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var c=t.charAt(10),u=10;c!=="+"&&c!=="-"&&(a=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,i,n),e.setUTCHours(s,o,a,0),u&&(c=t.charAt(u),c==="+"||c==="-")){var f=parseInt(t.substr(u+1,2),10),d=parseInt(t.substr(u+4,2),10),h=f*60+d;h*=6e4,c==="+"?e.setTime(+e-h):e.setTime(+e+h)}return e};Be.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),i=parseInt(t.substr(4,2),10)-1,n=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),o=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),c=0,u=0,f=!1;t.charAt(t.length-1)==="Z"&&(f=!0);var d=t.length-5,h=t.charAt(d);if(h==="+"||h==="-"){var y=parseInt(t.substr(d+1,2),10),g=parseInt(t.substr(d+4,2),10);u=y*60+g,u*=6e4,h==="+"&&(u*=-1),f=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),f?(e.setUTCFullYear(r,i,n),e.setUTCHours(s,o,a,c),e.setTime(+e+u)):(e.setFullYear(r,i,n),e.setHours(s,o,a,c)),e};Be.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z",e};Be.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z",e};Be.integerToDer=function(t){var e=mr.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};Be.derToInteger=function(t){typeof t=="string"&&(t=mr.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};Be.validate=function(t,e,r,i){var n=!1;if((t.tagClass===e.tagClass||typeof e.tagClass=="undefined")&&(t.type===e.type||typeof e.type=="undefined"))if(t.constructed===e.constructed||typeof e.constructed=="undefined"){if(n=!0,e.value&&mr.util.isArray(e.value))for(var s=0,o=0;n&&o<e.value.length;++o)n=e.value[o].optional||!1,t.value[s]&&(n=Be.validate(t.value[s],e.value[o],r,i),n?++s:e.value[o].optional&&(n=!0)),!n&&i&&i.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(n&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var a;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else i&&i.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else i&&(t.tagClass!==e.tagClass&&i.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&i.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return n};var Mq=/[^\\u0000-\\u00ff]/;Be.prettyPrint=function(t,e,r){var i="";e=e||0,r=r||2,e>0&&(i+=`
`);for(var n="",s=0;s<e*r;++s)n+=" ";switch(i+=n+"Tag: ",t.tagClass){case Be.Class.UNIVERSAL:i+="Universal:";break;case Be.Class.APPLICATION:i+="Application:";break;case Be.Class.CONTEXT_SPECIFIC:i+="Context-Specific:";break;case Be.Class.PRIVATE:i+="Private:";break}if(t.tagClass===Be.Class.UNIVERSAL)switch(i+=t.type,t.type){case Be.Type.NONE:i+=" (None)";break;case Be.Type.BOOLEAN:i+=" (Boolean)";break;case Be.Type.INTEGER:i+=" (Integer)";break;case Be.Type.BITSTRING:i+=" (Bit string)";break;case Be.Type.OCTETSTRING:i+=" (Octet string)";break;case Be.Type.NULL:i+=" (Null)";break;case Be.Type.OID:i+=" (Object Identifier)";break;case Be.Type.ODESC:i+=" (Object Descriptor)";break;case Be.Type.EXTERNAL:i+=" (External or Instance of)";break;case Be.Type.REAL:i+=" (Real)";break;case Be.Type.ENUMERATED:i+=" (Enumerated)";break;case Be.Type.EMBEDDED:i+=" (Embedded PDV)";break;case Be.Type.UTF8:i+=" (UTF8)";break;case Be.Type.ROID:i+=" (Relative Object Identifier)";break;case Be.Type.SEQUENCE:i+=" (Sequence)";break;case Be.Type.SET:i+=" (Set)";break;case Be.Type.PRINTABLESTRING:i+=" (Printable String)";break;case Be.Type.IA5String:i+=" (IA5String (ASCII))";break;case Be.Type.UTCTIME:i+=" (UTC time)";break;case Be.Type.GENERALIZEDTIME:i+=" (Generalized time)";break;case Be.Type.BMPSTRING:i+=" (BMP String)";break}else i+=t.type;if(i+=`
`,i+=n+"Constructed: "+t.constructed+`
`,t.composed){for(var o=0,a="",s=0;s<t.value.length;++s)t.value[s]!==void 0&&(o+=1,a+=Be.prettyPrint(t.value[s],e+1,r),s+1<t.value.length&&(a+=","));i+=n+"Sub values: "+o+a}else{if(i+=n+"Value: ",t.type===Be.Type.OID){var c=Be.derToOid(t.value);i+=c,mr.pki&&mr.pki.oids&&c in mr.pki.oids&&(i+=" ("+mr.pki.oids[c]+") ")}if(t.type===Be.Type.INTEGER)try{i+=Be.derToInteger(t.value)}catch(f){i+="0x"+mr.util.bytesToHex(t.value)}else if(t.type===Be.Type.BITSTRING){if(t.value.length>1?i+="0x"+mr.util.bytesToHex(t.value.slice(1)):i+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?i+=" (1 unused bit shown)":u>1&&(i+=" ("+u+" unused bits shown)")}}else t.type===Be.Type.OCTETSTRING?(Mq.test(t.value)||(i+="("+t.value+") "),i+="0x"+mr.util.bytesToHex(t.value)):t.type===Be.Type.UTF8?i+=mr.util.decodeUtf8(t.value):t.type===Be.Type.PRINTABLESTRING||t.type===Be.Type.IA5String?i+=t.value:Mq.test(t.value)?i+="0x"+mr.util.bytesToHex(t.value):t.value.length===0?i+="[null]":i+=t.value}return i}});var Cw=p((e9t,Uq)=>{l();var Di=ft();Qt();Uq.exports=Di.cipher=Di.cipher||{};Di.cipher.algorithms=Di.cipher.algorithms||{};Di.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Di.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Di.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Di.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Di.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Di.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Di.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Di.cipher.algorithms[t]=e};Di.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Di.cipher.algorithms?Di.cipher.algorithms[t]:null};var Pw=Di.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};Pw.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Di.util.createBuffer(),this.output=t.output||Di.util.createBuffer(),this.mode.start(e)};Pw.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};Pw.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var kw=p((t9t,Fq)=>{l();var Ni=ft();Qt();Ni.cipher=Ni.cipher||{};var mt=Fq.exports=Ni.cipher.modes=Ni.cipher.modes||{};mt.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};mt.ecb.prototype.start=function(t){};mt.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])};mt.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])};mt.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};mt.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return i>this.blockSize<<2?!1:(t.truncate(i),!0)};mt.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};mt.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=L6(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};mt.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=this._prev[i]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]);this._prev=this._outBlock};mt.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._prev[i]^this._outBlock[i]);this._prev=this._inBlock.slice(0)};mt.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};mt.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return i>this.blockSize<<2?!1:(t.truncate(i),!0)};mt.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Ni.util.createBuffer(),this._partialBytes=0};mt.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=L6(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};mt.cfb.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32()^this._outBlock[n],e.putInt32(this._inBlock[n]);return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32()^this._outBlock[n],this._partialOutput.putInt32(this._partialBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};mt.cfb.prototype.decrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32(),e.putInt32(this._inBlock[n]^this._outBlock[n]);return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[n]^this._outBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};mt.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Ni.util.createBuffer(),this._partialBytes=0};mt.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=L6(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};mt.ofb.prototype.encrypt=function(t,e,r){var i=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]),this._inBlock[n]=this._outBlock[n];return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._outBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};mt.ofb.prototype.decrypt=mt.ofb.prototype.encrypt;mt.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Ni.util.createBuffer(),this._partialBytes=0};mt.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=L6(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};mt.ctr.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize)for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]);else{var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}U6(this._inBlock)};mt.ctr.prototype.decrypt=mt.ctr.prototype.encrypt;mt.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Ni.util.createBuffer(),this._partialBytes=0,this._R=3774873600};mt.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Ni.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Ni.util.createBuffer(t.additionalData):r=Ni.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Ni.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=e.length();if(i===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Ow(i*8)))}this._inBlock=this._j0.slice(0),U6(this._inBlock),this._partialBytes=0,r=Ni.util.createBuffer(r),this._aDataLength=Ow(r.length()*8);var n=r.length()%this.blockSize;for(n&&r.fillWithByte(0,this.blockSize-n),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};mt.gcm.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s<=0||r){if(r){var o=i%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(var n=0;n<this._ints;++n)this._outBlock[n]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),U6(this._inBlock)};mt.gcm.prototype.decrypt=function(t,e,r){var i=t.length();if(i<this.blockSize&&!(r&&i>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),U6(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^this._hashBlock[n]);i<this.blockSize?this._cipherLength+=i%this.blockSize:this._cipherLength+=this.blockSize};mt.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Ni.util.createBuffer();var i=this._aDataLength.concat(Ow(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,i);var n=[];this.cipher.encrypt(this._j0,n);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^n[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};mt.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],i=e.slice(0),n=0;n<128;++n){var s=t[n/32|0]&1<<31-n%32;s&&(r[0]^=i[0],r[1]^=i[1],r[2]^=i[2],r[3]^=i[3]),this.pow(i,i)}return r};mt.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,i=3;i>0;--i)e[i]=t[i]>>>1|(t[i-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};mt.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var i=r/8|0,n=t[i]>>>(7-r%8)*4&15,s=this._m[r][n];e[0]^=s[0],e[1]^=s[1],e[2]^=s[2],e[3]^=s[3]}return e};mt.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};mt.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,i=4*r,n=16*r,s=new Array(n),o=0;o<n;++o){var a=[0,0,0,0],c=o/i|0,u=(i-1-o%i)*e;a[c]=1<<e-1<<u,s[o]=this.generateSubHashTable(this.multiply(a,t),e)}return s};mt.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,i=r>>>1,n=new Array(r);n[i]=t.slice(0);for(var s=i>>>1;s>0;)this.pow(n[2*s],n[s]=[]),s>>=1;for(s=2;s<i;){for(var o=1;o<s;++o){var a=n[s],c=n[o];n[s+o]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}s*=2}for(n[0]=[0,0,0,0],s=i+1;s<r;++s){var u=n[s^i];n[s]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return n};function L6(t,e){if(typeof t=="string"&&(t=Ni.util.createBuffer(t)),Ni.util.isArray(t)&&t.length>4){var r=t;t=Ni.util.createBuffer();for(var i=0;i<r.length;++i)t.putByte(r[i])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Ni.util.isArray(t)){for(var n=[],s=e/4,i=0;i<s;++i)n.push(t.getInt32());t=n}return t}function U6(t){t[t.length-1]=t[t.length-1]+1&4294967295}function Ow(t){return[t/4294967296|0,t&4294967295]}});var vh=p((r9t,zq)=>{l();var sr=ft();Cw();kw();Qt();zq.exports=sr.aes=sr.aes||{};sr.aes.startEncrypting=function(t,e,r,i){var n=F6({key:t,output:r,decrypt:!1,mode:i});return n.start(e),n};sr.aes.createEncryptionCipher=function(t,e){return F6({key:t,output:null,decrypt:!1,mode:e})};sr.aes.startDecrypting=function(t,e,r,i){var n=F6({key:t,output:r,decrypt:!0,mode:i});return n.start(e),n};sr.aes.createDecryptionCipher=function(t,e){return F6({key:t,output:null,decrypt:!0,mode:e})};sr.aes.Algorithm=function(t,e){qw||Kq();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(i,n){return Nw(r._w,i,n,!1)},decrypt:function(i,n){return Nw(r._w,i,n,!0)}}}),r._init=!1};sr.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=sr.util.createBuffer(e);else if(sr.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=sr.util.createBuffer();for(var i=0;i<r.length;++i)e.putByte(r[i])}if(!sr.util.isArray(e)){r=e,e=[];var n=r.length();if(n===16||n===24||n===32){n=n>>>2;for(var i=0;i<n;++i)e.push(r.getInt32())}}if(!sr.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,o=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=Vq(e,t.decrypt&&!o),this._init=!0}};sr.aes._expandKey=function(t,e){return qw||Kq(),Vq(t,e)};sr.aes._updateBlock=Nw;bh("AES-ECB",sr.cipher.modes.ecb);bh("AES-CBC",sr.cipher.modes.cbc);bh("AES-CFB",sr.cipher.modes.cfb);bh("AES-OFB",sr.cipher.modes.ofb);bh("AES-CTR",sr.cipher.modes.ctr);bh("AES-GCM",sr.cipher.modes.gcm);function bh(t,e){var r=function(){return new sr.aes.Algorithm(t,e)};sr.cipher.registerAlgorithm(t,r)}var qw=!1,mh=4,In,Dw,jq,hl,vo;function Kq(){qw=!0,jq=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;In=new Array(256),Dw=new Array(256),hl=new Array(4),vo=new Array(4);for(var e=0;e<4;++e)hl[e]=new Array(256),vo[e]=new Array(256);for(var r=0,i=0,n,s,o,a,c,u,f,e=0;e<256;++e){a=i^i<<1^i<<2^i<<3^i<<4,a=a>>8^a&255^99,In[r]=a,Dw[a]=r,c=t[a],n=t[r],s=t[n],o=t[s],u=c<<24^a<<16^a<<8^(a^c),f=(n^s^o)<<24^(r^o)<<16^(r^s^o)<<8^(r^n^o);for(var d=0;d<4;++d)hl[d][r]=u,vo[d][a]=f,u=u<<24|u>>>8,f=f<<24|f>>>8;r===0?r=i=1:(r=n^t[t[t[n^o]]],i^=t[t[i]])}}function Vq(t,e){for(var r=t.slice(0),i,n=1,s=r.length,o=s+6+1,a=mh*o,c=s;c<a;++c)i=r[c-1],c%s==0?(i=In[i>>>16&255]<<24^In[i>>>8&255]<<16^In[i&255]<<8^In[i>>>24]^jq[n]<<24,n++):s>6&&c%s==4&&(i=In[i>>>24]<<24^In[i>>>16&255]<<16^In[i>>>8&255]<<8^In[i&255]),r[c]=r[c-s]^i;if(e){var u,f=vo[0],d=vo[1],h=vo[2],y=vo[3],g=r.slice(0);a=r.length;for(var c=0,m=a-mh;c<a;c+=mh,m-=mh)if(c===0||c===a-mh)g[c]=r[m],g[c+1]=r[m+3],g[c+2]=r[m+2],g[c+3]=r[m+1];else for(var E=0;E<mh;++E)u=r[m+E],g[c+(3&-E)]=f[In[u>>>24]]^d[In[u>>>16&255]]^h[In[u>>>8&255]]^y[In[u&255]];r=g}return r}function Nw(t,e,r,i){var n=t.length/4-1,s,o,a,c,u;i?(s=vo[0],o=vo[1],a=vo[2],c=vo[3],u=Dw):(s=hl[0],o=hl[1],a=hl[2],c=hl[3],u=In);var f,d,h,y,g,m,E;f=e[0]^t[0],d=e[i?3:1]^t[1],h=e[2]^t[2],y=e[i?1:3]^t[3];for(var v=3,A=1;A<n;++A)g=s[f>>>24]^o[d>>>16&255]^a[h>>>8&255]^c[y&255]^t[++v],m=s[d>>>24]^o[h>>>16&255]^a[y>>>8&255]^c[f&255]^t[++v],E=s[h>>>24]^o[y>>>16&255]^a[f>>>8&255]^c[d&255]^t[++v],y=s[y>>>24]^o[f>>>16&255]^a[d>>>8&255]^c[h&255]^t[++v],f=g,d=m,h=E;r[0]=u[f>>>24]<<24^u[d>>>16&255]<<16^u[h>>>8&255]<<8^u[y&255]^t[++v],r[i?3:1]=u[d>>>24]<<24^u[h>>>16&255]<<16^u[y>>>8&255]<<8^u[f&255]^t[++v],r[2]=u[h>>>24]<<24^u[y>>>16&255]<<16^u[f>>>8&255]<<8^u[d&255]^t[++v],r[i?1:3]=u[y>>>24]<<24^u[f>>>16&255]<<16^u[d>>>8&255]<<8^u[h&255]^t[++v]}function F6(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,i;t.decrypt?i=sr.cipher.createDecipher(r,t.key):i=sr.cipher.createCipher(r,t.key);var n=i.start;return i.start=function(s,o){var a=null;o instanceof sr.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,n.call(i,o)},i}});var K6=p((i9t,$q)=>{l();var vr=ft();Cw();kw();Qt();$q.exports=vr.des=vr.des||{};vr.des.startEncrypting=function(t,e,r,i){var n=j6({key:t,output:r,decrypt:!1,mode:i||(e===null?"ECB":"CBC")});return n.start(e),n};vr.des.createEncryptionCipher=function(t,e){return j6({key:t,output:null,decrypt:!1,mode:e})};vr.des.startDecrypting=function(t,e,r,i){var n=j6({key:t,output:r,decrypt:!0,mode:i||(e===null?"ECB":"CBC")});return n.start(e),n};vr.des.createDecryptionCipher=function(t,e){return j6({key:t,output:null,decrypt:!0,mode:e})};vr.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(i,n){return Hq(r._keys,i,n,!1)},decrypt:function(i,n){return Hq(r._keys,i,n,!0)}}}),r._init=!1};vr.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=vr.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=zxe(e),this._init=!0}};ma("DES-ECB",vr.cipher.modes.ecb);ma("DES-CBC",vr.cipher.modes.cbc);ma("DES-CFB",vr.cipher.modes.cfb);ma("DES-OFB",vr.cipher.modes.ofb);ma("DES-CTR",vr.cipher.modes.ctr);ma("3DES-ECB",vr.cipher.modes.ecb);ma("3DES-CBC",vr.cipher.modes.cbc);ma("3DES-CFB",vr.cipher.modes.cfb);ma("3DES-OFB",vr.cipher.modes.ofb);ma("3DES-CTR",vr.cipher.modes.ctr);function ma(t,e){var r=function(){return new vr.des.Algorithm(t,e)};vr.cipher.registerAlgorithm(t,r)}var Bxe=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],Mxe=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],Lxe=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],Uxe=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],Fxe=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],jxe=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],Kxe=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],Vxe=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function zxe(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],n=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],d=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],y=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],m=t.length()>8?3:1,E=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],A=0,R,F=0;F<m;F++){var q=t.getInt32(),D=t.getInt32();R=(q>>>4^D)&252645135,D^=R,q^=R<<4,R=(D>>>-16^q)&65535,q^=R,D^=R<<-16,R=(q>>>2^D)&858993459,D^=R,q^=R<<2,R=(D>>>-16^q)&65535,q^=R,D^=R<<-16,R=(q>>>1^D)&1431655765,D^=R,q^=R<<1,R=(D>>>8^q)&16711935,q^=R,D^=R<<8,R=(q>>>1^D)&1431655765,D^=R,q^=R<<1,R=q<<8|D>>>20&240,q=D<<24|D<<8&16711680|D>>>8&65280|D>>>24&240,D=R;for(var z=0;z<v.length;++z){v[z]?(q=q<<2|q>>>26,D=D<<2|D>>>26):(q=q<<1|q>>>27,D=D<<1|D>>>27),q&=-15,D&=-15;var G=e[q>>>28]|r[q>>>24&15]|i[q>>>20&15]|n[q>>>16&15]|s[q>>>12&15]|o[q>>>8&15]|a[q>>>4&15],Y=c[D>>>28]|u[D>>>24&15]|f[D>>>20&15]|d[D>>>16&15]|h[D>>>12&15]|y[D>>>8&15]|g[D>>>4&15];R=(Y>>>16^G)&65535,E[A++]=G^R,E[A++]=Y^R<<16}}return E}function Hq(t,e,r,i){var n=t.length===32?3:9,s;n===3?s=i?[30,-2,-2]:[0,32,2]:s=i?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var o,a=e[0],c=e[1];o=(a>>>4^c)&252645135,c^=o,a^=o<<4,o=(a>>>16^c)&65535,c^=o,a^=o<<16,o=(c>>>2^a)&858993459,a^=o,c^=o<<2,o=(c>>>8^a)&16711935,a^=o,c^=o<<8,o=(a>>>1^c)&1431655765,c^=o,a^=o<<1,a=a<<1|a>>>31,c=c<<1|c>>>31;for(var u=0;u<n;u+=3){for(var f=s[u+1],d=s[u+2],h=s[u];h!=f;h+=d){var y=c^t[h],g=(c>>>4|c<<28)^t[h+1];o=a,a=c,c=o^(Mxe[y>>>24&63]|Uxe[y>>>16&63]|jxe[y>>>8&63]|Vxe[y&63]|Bxe[g>>>24&63]|Lxe[g>>>16&63]|Fxe[g>>>8&63]|Kxe[g&63])}o=a,a=c,c=o}a=a>>>1|a<<31,c=c>>>1|c<<31,o=(a>>>1^c)&1431655765,c^=o,a^=o<<1,o=(c>>>8^a)&16711935,a^=o,c^=o<<8,o=(c>>>2^a)&858993459,a^=o,c^=o<<2,o=(a>>>16^c)&65535,c^=o,a^=o<<16,o=(a>>>4^c)&252645135,c^=o,a^=o<<4,r[0]=a,r[1]=c}function j6(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,i;t.decrypt?i=vr.cipher.createDecipher(r,t.key):i=vr.cipher.createCipher(r,t.key);var n=i.start;return i.start=function(s,o){var a=null;o instanceof vr.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,n.call(i,o)},i}});var ju=p((n9t,Gq)=>{l();var V6=ft();Gq.exports=V6.md=V6.md||{};V6.md.algorithms=V6.md.algorithms||{}});var Yq=p((s9t,Wq)=>{l();var Rc=ft();ju();Qt();var Hxe=Wq.exports=Rc.hmac=Rc.hmac||{};Hxe.create=function(){var t=null,e=null,r=null,i=null,n={};return n.start=function(s,o){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in Rc.md.algorithms)e=Rc.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else e=s;if(o===null)o=t;else{if(typeof o=="string")o=Rc.util.createBuffer(o);else if(Rc.util.isArray(o)){var a=o;o=Rc.util.createBuffer();for(var c=0;c<a.length;++c)o.putByte(a[c])}var u=o.length();u>e.blockLength&&(e.start(),e.update(o.bytes()),o=e.digest()),r=Rc.util.createBuffer(),i=Rc.util.createBuffer(),u=o.length();for(var c=0;c<u;++c){var a=o.at(c);r.putByte(54^a),i.putByte(92^a)}if(u<e.blockLength)for(var a=e.blockLength-u,c=0;c<a;++c)r.putByte(54),i.putByte(92);t=o,r=r.bytes(),i=i.bytes()}e.start(),e.update(r)},n.update=function(s){e.update(s)},n.getMac=function(){var s=e.digest().bytes();return e.start(),e.update(i),e.update(s),e.digest()},n.digest=n.getMac,n}});var wh=p(()=>{l()});var Bw=p((c9t,Xq)=>{l();var Tn=ft();Yq();ju();Qt();var $xe=Tn.pkcs5=Tn.pkcs5||{},Pc;Tn.util.isNodejs&&!Tn.options.usePureJavaScript&&(Pc=wh());Xq.exports=Tn.pbkdf2=$xe.pbkdf2=function(t,e,r,i,n,s){if(typeof n=="function"&&(s=n,n=null),Tn.util.isNodejs&&!Tn.options.usePureJavaScript&&Pc.pbkdf2&&(n===null||typeof n!="object")&&(Pc.pbkdf2Sync.length>4||!n||n==="sha1"))return typeof n!="string"&&(n="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),s?Pc.pbkdf2Sync.length===4?Pc.pbkdf2(t,e,r,i,function(R,F){if(R)return s(R);s(null,F.toString("binary"))}):Pc.pbkdf2(t,e,r,i,n,function(R,F){if(R)return s(R);s(null,F.toString("binary"))}):Pc.pbkdf2Sync.length===4?Pc.pbkdf2Sync(t,e,r,i).toString("binary"):Pc.pbkdf2Sync(t,e,r,i,n).toString("binary");if((typeof n=="undefined"||n===null)&&(n="sha1"),typeof n=="string"){if(!(n in Tn.md.algorithms))throw new Error("Unknown hash algorithm: "+n);n=Tn.md[n].create()}var o=n.digestLength;if(i>4294967295*o){var a=new Error("Derived key is too long.");if(s)return s(a);throw a}var c=Math.ceil(i/o),u=i-(c-1)*o,f=Tn.hmac.create();f.start(n,t);var d="",h,y,g;if(!s){for(var m=1;m<=c;++m){f.start(null,null),f.update(e),f.update(Tn.util.int32ToBytes(m)),h=g=f.digest().getBytes();for(var E=2;E<=r;++E)f.start(null,null),f.update(g),y=f.digest().getBytes(),h=Tn.util.xorBytes(h,y,o),g=y;d+=m<c?h:h.substr(0,u)}return d}var m=1,E;function v(){if(m>c)return s(null,d);f.start(null,null),f.update(e),f.update(Tn.util.int32ToBytes(m)),h=g=f.digest().getBytes(),E=2,A()}function A(){if(E<=r)return f.start(null,null),f.update(g),y=f.digest().getBytes(),h=Tn.util.xorBytes(h,y,o),g=y,++E,Tn.util.setImmediate(A);d+=m<c?h:h.substr(0,u),++m,v()}v()}});var $6=p((u9t,Zq)=>{l();var z6=ft();Qt();var Qq=Zq.exports=z6.pem=z6.pem||{};Qq.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,i;if(t.procType&&(i={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=H6(i)),t.contentDomain&&(i={name:"Content-Domain",values:[t.contentDomain]},r+=H6(i)),t.dekInfo&&(i={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&i.values.push(t.dekInfo.parameters),r+=H6(i)),t.headers)for(var n=0;n<t.headers.length;++n)r+=H6(t.headers[n]);return t.procType&&(r+=`\r
`),r+=z6.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};Qq.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,i=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,n=/\r?\n/,s;s=r.exec(t),!!s;){var o={type:s[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:z6.util.decode64(s[3])};if(e.push(o),!!s[2]){for(var a=s[2].split(n),c=0;s&&c<a.length;){for(var u=a[c].replace(/\s+$/,""),f=c+1;f<a.length;++f){var d=a[f];if(!/\s/.test(d[0]))break;u+=d,c=f}if(s=u.match(i),s){for(var h={name:s[1],values:[]},y=s[2].split(","),g=0;g<y.length;++g)h.values.push(Gxe(y[g]));if(o.procType)if(!o.contentDomain&&h.name==="Content-Domain")o.contentDomain=y[0]||"";else if(!o.dekInfo&&h.name==="DEK-Info"){if(h.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:y[0],parameters:y[1]||null}}else o.headers.push(h);else{if(h.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(h.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:y[0],type:y[1]}}}++c}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function H6(t){for(var e=t.name+": ",r=[],i=function(c,u){return" "+u},n=0;n<t.values.length;++n)r.push(t.values[n].replace(/^(\S+\r\n)/,i));e+=r.join(",")+`\r
`;for(var s=0,o=-1,n=0;n<e.length;++n,++s)if(s>65&&o!==-1){var a=e[o];a===","?(++o,e=e.substr(0,o)+`\r
 `+e.substr(o)):e=e.substr(0,o)+`\r
`+a+e.substr(o+1),s=n-o-1,o=-1,++n}else(e[n]===" "||e[n]==="	"||e[n]===",")&&(o=n);return e}function Gxe(t){return t.replace(/^\s+/,"")}});var nD=p((f9t,iD)=>{l();var va=ft();ju();Qt();var Jq=iD.exports=va.sha256=va.sha256||{};va.md.sha256=va.md.algorithms.sha256=Jq;Jq.create=function(){eD||Wxe();var t=null,e=va.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return i.start=function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return e=va.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i},i.start(),i.update=function(n,s){s==="utf8"&&(n=va.util.encodeUtf8(n));var o=n.length;i.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=i.fullMessageLength.length-1;a>=0;--a)i.fullMessageLength[a]+=o[1],o[1]=o[0]+(i.fullMessageLength[a]/4294967296>>>0),i.fullMessageLength[a]=i.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return e.putBytes(n),rD(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),i},i.digest=function(){var n=va.util.createBuffer();n.putBytes(e.bytes());var s=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,o=s&i.blockLength-1;n.putBytes(Mw.substr(0,i.blockLength-o));for(var a,c,u=i.fullMessageLength[0]*8,f=0;f<i.fullMessageLength.length-1;++f)a=i.fullMessageLength[f+1]*8,c=a/4294967296>>>0,u+=c,n.putInt32(u>>>0),u=a>>>0;n.putInt32(u);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};rD(d,r,n);var h=va.util.createBuffer();return h.putInt32(d.h0),h.putInt32(d.h1),h.putInt32(d.h2),h.putInt32(d.h3),h.putInt32(d.h4),h.putInt32(d.h5),h.putInt32(d.h6),h.putInt32(d.h7),h},i};var Mw=null,eD=!1,tD=null;function Wxe(){Mw=String.fromCharCode(128),Mw+=va.util.fillString(String.fromCharCode(0),64),tD=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],eD=!0}function rD(t,e,r){for(var i,n,s,o,a,c,u,f,d,h,y,g,m,E,v,A=r.length();A>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)i=e[u-2],i=(i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,n=e[u-15],n=(n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,e[u]=i+e[u-7]+n+e[u-16]|0;for(f=t.h0,d=t.h1,h=t.h2,y=t.h3,g=t.h4,m=t.h5,E=t.h6,v=t.h7,u=0;u<64;++u)o=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),a=E^g&(m^E),s=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),c=f&d|h&(f^d),i=v+o+a+tD[u]+e[u],n=s+c,v=E,E=m,m=g,g=y+i>>>0,y=h,h=d,d=f,f=i+n>>>0;t.h0=t.h0+f|0,t.h1=t.h1+d|0,t.h2=t.h2+h|0,t.h3=t.h3+y|0,t.h4=t.h4+g|0,t.h5=t.h5+m|0,t.h6=t.h6+E|0,t.h7=t.h7+v|0,A-=64}}});var oD=p((l9t,sD)=>{l();var wa=ft();Qt();var G6=null;wa.util.isNodejs&&!wa.options.usePureJavaScript&&!process.versions["node-webkit"]&&(G6=wh());var Yxe=sD.exports=wa.prng=wa.prng||{};Yxe.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,i=new Array(32),n=0;n<32;++n)i[n]=r.create();e.pools=i,e.pool=0,e.generate=function(u,f){if(!f)return e.generateSync(u);var d=e.plugin.cipher,h=e.plugin.increment,y=e.plugin.formatKey,g=e.plugin.formatSeed,m=wa.util.createBuffer();e.key=null,E();function E(v){if(v)return f(v);if(m.length()>=u)return f(null,m.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return wa.util.nextTick(function(){s(E)});var A=d(e.key,e.seed);e.generated+=A.length,m.putBytes(A),e.key=y(d(e.key,h(e.seed))),e.seed=g(d(e.key,e.seed)),wa.util.setImmediate(E)}},e.generateSync=function(u){var f=e.plugin.cipher,d=e.plugin.increment,h=e.plugin.formatKey,y=e.plugin.formatSeed;e.key=null;for(var g=wa.util.createBuffer();g.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&o();var m=f(e.key,e.seed);e.generated+=m.length,g.putBytes(m),e.key=h(f(e.key,d(e.seed))),e.seed=y(f(e.key,e.seed))}return g.getBytes(u)};function s(u){if(e.pools[0].messageLength>=32)return a(),u();var f=32-e.pools[0].messageLength<<5;e.seedFile(f,function(d,h){if(d)return u(d);e.collect(h),a(),u()})}function o(){if(e.pools[0].messageLength>=32)return a();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),a()}function a(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var f=1,d=0;d<32;++d)e.reseeds%f==0&&(u.update(e.pools[d].digest().getBytes()),e.pools[d].start()),f=f<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var h=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(h),e.generated=0}function c(u){var f=null,d=wa.util.globalScope,h=d.crypto||d.msCrypto;h&&h.getRandomValues&&(f=function(q){return h.getRandomValues(q)});var y=wa.util.createBuffer();if(f)for(;y.length()<u;){var g=Math.max(1,Math.min(u-y.length(),65536)/4),m=new Uint32Array(Math.floor(g));try{f(m);for(var E=0;E<m.length;++E)y.putInt32(m[E])}catch(q){if(!(typeof QuotaExceededError!="undefined"&&q instanceof QuotaExceededError))throw q}}if(y.length()<u)for(var v,A,R,F=Math.floor(Math.random()*65536);y.length()<u;){A=16807*(F&65535),v=16807*(F>>16),A+=(v&32767)<<16,A+=v>>15,A=(A&2147483647)+(A>>31),F=A&4294967295;for(var E=0;E<3;++E)R=F>>>(E<<3),R^=Math.floor(Math.random()*256),y.putByte(String.fromCharCode(R&255))}return y.getBytes(u)}return G6?(e.seedFile=function(u,f){G6.randomBytes(u,function(d,h){if(d)return f(d);f(null,h.toString())})},e.seedFileSync=function(u){return G6.randomBytes(u).toString()}):(e.seedFile=function(u,f){try{f(null,c(u))}catch(d){f(d)}},e.seedFileSync=c),e.collect=function(u){for(var f=u.length,d=0;d<f;++d)e.pools[e.pool].update(u.substr(d,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,f){for(var d="",h=0;h<f;h+=8)d+=String.fromCharCode(u>>h&255);e.collect(d)},e.registerWorker=function(u){if(u===self)e.seedFile=function(d,h){function y(g){var m=g.data;m.forge&&m.forge.prng&&(self.removeEventListener("message",y),h(m.forge.prng.err,m.forge.prng.bytes))}self.addEventListener("message",y),self.postMessage({forge:{prng:{needed:d}}})};else{var f=function(d){var h=d.data;h.forge&&h.forge.prng&&e.seedFile(h.forge.prng.needed,function(y,g){u.postMessage({forge:{prng:{err:y,bytes:g}}})})};u.addEventListener("message",f)}},e}});var Ku=p((d9t,Lw)=>{l();var Bi=ft();vh();nD();oD();Qt();(function(){if(Bi.random&&Bi.random.getBytes){Lw.exports=Bi.random;return}(function(t){var e={},r=new Array(4),i=Bi.util.createBuffer();e.formatKey=function(d){var h=Bi.util.createBuffer(d);return d=new Array(4),d[0]=h.getInt32(),d[1]=h.getInt32(),d[2]=h.getInt32(),d[3]=h.getInt32(),Bi.aes._expandKey(d,!1)},e.formatSeed=function(d){var h=Bi.util.createBuffer(d);return d=new Array(4),d[0]=h.getInt32(),d[1]=h.getInt32(),d[2]=h.getInt32(),d[3]=h.getInt32(),d},e.cipher=function(d,h){return Bi.aes._updateBlock(d,h,r,!1),i.putInt32(r[0]),i.putInt32(r[1]),i.putInt32(r[2]),i.putInt32(r[3]),i.getBytes()},e.increment=function(d){return++d[3],d},e.md=Bi.md.sha256;function n(){var d=Bi.prng.create(e);return d.getBytes=function(h,y){return d.generate(h,y)},d.getBytesSync=function(h){return d.generate(h)},d}var s=n(),o=null,a=Bi.util.globalScope,c=a.crypto||a.msCrypto;if(c&&c.getRandomValues&&(o=function(d){return c.getRandomValues(d)}),Bi.options.usePureJavaScript||!Bi.util.isNodejs&&!o){if(typeof window=="undefined"||window.document===void 0,s.collectInt(+new Date,32),typeof navigator!="undefined"){var u="";for(var f in navigator)try{typeof navigator[f]=="string"&&(u+=navigator[f])}catch(d){}s.collect(u),u=null}t&&(t().mousemove(function(d){s.collectInt(d.clientX,16),s.collectInt(d.clientY,16)}),t().keypress(function(d){s.collectInt(d.charCode,8)}))}if(!Bi.random)Bi.random=s;else for(var f in s)Bi.random[f]=s[f];Bi.random.createInstance=n,Lw.exports=Bi.random})(typeof jQuery!="undefined"?jQuery:null)})()});var fD=p((h9t,uD)=>{l();var Fn=ft();Qt();var Uw=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],aD=[1,2,3,5],Xxe=function(t,e){return t<<e&65535|(t&65535)>>16-e},Qxe=function(t,e){return(t&65535)>>e|t<<16-e&65535};uD.exports=Fn.rc2=Fn.rc2||{};Fn.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Fn.util.createBuffer(t)),e=e||128;var r=t,i=t.length(),n=e,s=Math.ceil(n/8),o=255>>(n&7),a;for(a=i;a<128;a++)r.putByte(Uw[r.at(a-1)+r.at(a-i)&255]);for(r.setAt(128-s,Uw[r.at(128-s)&o]),a=127-s;a>=0;a--)r.setAt(a,Uw[r.at(a+1)^r.at(a+s)]);return r};var cD=function(t,e,r){var i=!1,n=null,s=null,o=null,a,c,u,f,d=[];for(t=Fn.rc2.expandKey(t,e),u=0;u<64;u++)d.push(t.getInt16Le());r?(a=function(g){for(u=0;u<4;u++)g[u]+=d[f]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),g[u]=Xxe(g[u],aD[u]),f++},c=function(g){for(u=0;u<4;u++)g[u]+=d[g[(u+3)%4]&63]}):(a=function(g){for(u=3;u>=0;u--)g[u]=Qxe(g[u],aD[u]),g[u]-=d[f]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),f--},c=function(g){for(u=3;u>=0;u--)g[u]-=d[g[(u+3)%4]&63]});var h=function(g){var m=[];for(u=0;u<4;u++){var E=n.getInt16Le();o!==null&&(r?E^=o.getInt16Le():o.putInt16Le(E)),m.push(E&65535)}f=r?0:63;for(var v=0;v<g.length;v++)for(var A=0;A<g[v][0];A++)g[v][1](m);for(u=0;u<4;u++)o!==null&&(r?o.putInt16Le(m[u]):m[u]^=o.getInt16Le()),s.putInt16Le(m[u])},y=null;return y={start:function(g,m){g&&typeof g=="string"&&(g=Fn.util.createBuffer(g)),i=!1,n=Fn.util.createBuffer(),s=m||new Fn.util.createBuffer,o=g,y.output=s},update:function(g){for(i||n.putBuffer(g);n.length()>=8;)h([[5,a],[1,c],[6,a],[1,c],[5,a]])},finish:function(g){var m=!0;if(r)if(g)m=g(8,n,!r);else{var E=n.length()===8?8:8-n.length();n.fillWithByte(E,E)}if(m&&(i=!0,y.update()),!r&&(m=n.length()===0,m))if(g)m=g(8,s,!r);else{var v=s.length(),A=s.at(v-1);A>v?m=!1:s.truncate(A)}return m}},y};Fn.rc2.startEncrypting=function(t,e,r){var i=Fn.rc2.createEncryptionCipher(t,128);return i.start(e,r),i};Fn.rc2.createEncryptionCipher=function(t,e){return cD(t,e,!0)};Fn.rc2.startDecrypting=function(t,e,r){var i=Fn.rc2.createDecryptionCipher(t,128);return i.start(e,r),i};Fn.rc2.createDecryptionCipher=function(t,e){return cD(t,e,!1)}});var y2=p((p9t,mD)=>{l();var Fw=ft();mD.exports=Fw.jsbn=Fw.jsbn||{};var Cc,Zxe=244837814094590,lD=(Zxe&16777215)==15715070;function ve(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}Fw.jsbn.BigInteger=ve;function qt(){return new ve(null)}function Jxe(t,e,r,i,n,s){for(;--s>=0;){var o=e*this.data[t++]+r.data[i]+n;n=Math.floor(o/67108864),r.data[i++]=o&67108863}return n}function eAe(t,e,r,i,n,s){for(var o=e&32767,a=e>>15;--s>=0;){var c=this.data[t]&32767,u=this.data[t++]>>15,f=a*c+u*o;c=o*c+((f&32767)<<15)+r.data[i]+(n&1073741823),n=(c>>>30)+(f>>>15)+a*u+(n>>>30),r.data[i++]=c&1073741823}return n}function dD(t,e,r,i,n,s){for(var o=e&16383,a=e>>14;--s>=0;){var c=this.data[t]&16383,u=this.data[t++]>>14,f=a*c+u*o;c=o*c+((f&16383)<<14)+r.data[i]+n,n=(c>>28)+(f>>14)+a*u,r.data[i++]=c&268435455}return n}typeof navigator=="undefined"?(ve.prototype.am=dD,Cc=28):lD&&navigator.appName=="Microsoft Internet Explorer"?(ve.prototype.am=eAe,Cc=30):lD&&navigator.appName!="Netscape"?(ve.prototype.am=Jxe,Cc=26):(ve.prototype.am=dD,Cc=28);ve.prototype.DB=Cc;ve.prototype.DM=(1<<Cc)-1;ve.prototype.DV=1<<Cc;var jw=52;ve.prototype.FV=Math.pow(2,jw);ve.prototype.F1=jw-Cc;ve.prototype.F2=2*Cc-jw;var tAe="0123456789abcdefghijklmnopqrstuvwxyz",W6=new Array,_h,Ps;_h="0".charCodeAt(0);for(Ps=0;Ps<=9;++Ps)W6[_h++]=Ps;_h="a".charCodeAt(0);for(Ps=10;Ps<36;++Ps)W6[_h++]=Ps;_h="A".charCodeAt(0);for(Ps=10;Ps<36;++Ps)W6[_h++]=Ps;function hD(t){return tAe.charAt(t)}function pD(t,e){var r=W6[t.charCodeAt(e)];return r??-1}function rAe(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function iAe(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function Vu(t){var e=qt();return e.fromInt(t),e}function nAe(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var i=t.length,n=!1,s=0;--i>=0;){var o=r==8?t[i]&255:pD(t,i);if(o<0){t.charAt(i)=="-"&&(n=!0);continue}n=!1,s==0?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),n&&ve.ZERO.subTo(this,this)}function sAe(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function oAe(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,i,n=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(i=this.data[o]>>a)>0&&(n=!0,s=hD(i));o>=0;)a<e?(i=(this.data[o]&(1<<a)-1)<<e-a,i|=this.data[--o]>>(a+=this.DB-e)):(i=this.data[o]>>(a-=e)&r,a<=0&&(a+=this.DB,--o)),i>0&&(n=!0),n&&(s+=hD(i));return n?s:"0"}function aAe(){var t=qt();return ve.ZERO.subTo(this,t),t}function cAe(){return this.s<0?this.negate():this}function uAe(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function Y6(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function fAe(){return this.t<=0?0:this.DB*(this.t-1)+Y6(this.data[this.t-1]^this.s&this.DM)}function lAe(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function dAe(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function hAe(t,e){var r=t%this.DB,i=this.DB-r,n=(1<<i)-1,s=Math.floor(t/this.DB),o=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)e.data[a+s+1]=this.data[a]>>i|o,o=(this.data[a]&n)<<r;for(a=s-1;a>=0;--a)e.data[a]=0;e.data[s]=o,e.t=this.t+s+1,e.s=this.s,e.clamp()}function pAe(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var i=t%this.DB,n=this.DB-i,s=(1<<i)-1;e.data[0]=this.data[r]>>i;for(var o=r+1;o<this.t;++o)e.data[o-r-1]|=(this.data[o]&s)<<n,e.data[o-r]=this.data[o]>>i;i>0&&(e.data[this.t-r-1]|=(this.s&s)<<n),e.t=this.t-r,e.clamp()}function yAe(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this.data[r]-t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i-=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=i<0?-1:0,i<-1?e.data[r++]=this.DV+i:i>0&&(e.data[r++]=i),e.t=r,e.clamp()}function gAe(t,e){var r=this.abs(),i=t.abs(),n=r.t;for(e.t=n+i.t;--n>=0;)e.data[n]=0;for(n=0;n<i.t;++n)e.data[n+r.t]=r.am(0,i.data[n],e,n,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&ve.ZERO.subTo(e,e)}function bAe(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var i=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,i,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function mAe(t,e,r){var i=t.abs();if(!(i.t<=0)){var n=this.abs();if(n.t<i.t){e!=null&&e.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=qt());var s=qt(),o=this.s,a=t.s,c=this.DB-Y6(i.data[i.t-1]);c>0?(i.lShiftTo(c,s),n.lShiftTo(c,r)):(i.copyTo(s),n.copyTo(r));var u=s.t,f=s.data[u-1];if(f!=0){var d=f*(1<<this.F1)+(u>1?s.data[u-2]>>this.F2:0),h=this.FV/d,y=(1<<this.F1)/d,g=1<<this.F2,m=r.t,E=m-u,v=e??qt();for(s.dlShiftTo(E,v),r.compareTo(v)>=0&&(r.data[r.t++]=1,r.subTo(v,r)),ve.ONE.dlShiftTo(u,v),v.subTo(s,s);s.t<u;)s.data[s.t++]=0;for(;--E>=0;){var A=r.data[--m]==f?this.DM:Math.floor(r.data[m]*h+(r.data[m-1]+g)*y);if((r.data[m]+=s.am(0,A,r,E,0,u))<A)for(s.dlShiftTo(E,v),r.subTo(v,r);r.data[m]<--A;)r.subTo(v,r)}e!=null&&(r.drShiftTo(u,e),o!=a&&ve.ZERO.subTo(e,e)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),o<0&&ve.ZERO.subTo(r,r)}}}function vAe(t){var e=qt();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(ve.ZERO)>0&&t.subTo(e,e),e}function pl(t){this.m=t}function wAe(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function _Ae(t){return t}function EAe(t){t.divRemTo(this.m,null,t)}function SAe(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function xAe(t,e){t.squareTo(e),this.reduce(e)}pl.prototype.convert=wAe;pl.prototype.revert=_Ae;pl.prototype.reduce=EAe;pl.prototype.mulTo=SAe;pl.prototype.sqrTo=xAe;function AAe(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function yl(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function IAe(t){var e=qt();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(ve.ZERO)>0&&this.m.subTo(e,e),e}function TAe(t){var e=qt();return t.copyTo(e),this.reduce(e),e}function RAe(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,i=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,i,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function PAe(t,e){t.squareTo(e),this.reduce(e)}function CAe(t,e,r){t.multiplyTo(e,r),this.reduce(r)}yl.prototype.convert=IAe;yl.prototype.revert=TAe;yl.prototype.reduce=RAe;yl.prototype.mulTo=CAe;yl.prototype.sqrTo=PAe;function OAe(){return(this.t>0?this.data[0]&1:this.s)==0}function kAe(t,e){if(t>4294967295||t<1)return ve.ONE;var r=qt(),i=qt(),n=e.convert(this),s=Y6(t)-1;for(n.copyTo(r);--s>=0;)if(e.sqrTo(r,i),(t&1<<s)>0)e.mulTo(i,n,r);else{var o=r;r=i,i=o}return e.revert(r)}function qAe(t,e){var r;return t<256||e.isEven()?r=new pl(e):r=new yl(e),this.exp(t,r)}ve.prototype.copyTo=rAe;ve.prototype.fromInt=iAe;ve.prototype.fromString=nAe;ve.prototype.clamp=sAe;ve.prototype.dlShiftTo=lAe;ve.prototype.drShiftTo=dAe;ve.prototype.lShiftTo=hAe;ve.prototype.rShiftTo=pAe;ve.prototype.subTo=yAe;ve.prototype.multiplyTo=gAe;ve.prototype.squareTo=bAe;ve.prototype.divRemTo=mAe;ve.prototype.invDigit=AAe;ve.prototype.isEven=OAe;ve.prototype.exp=kAe;ve.prototype.toString=oAe;ve.prototype.negate=aAe;ve.prototype.abs=cAe;ve.prototype.compareTo=uAe;ve.prototype.bitLength=fAe;ve.prototype.mod=vAe;ve.prototype.modPowInt=qAe;ve.ZERO=Vu(0);ve.ONE=Vu(1);function DAe(){var t=qt();return this.copyTo(t),t}function NAe(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function BAe(){return this.t==0?this.s:this.data[0]<<24>>24}function MAe(){return this.t==0?this.s:this.data[0]<<16>>16}function LAe(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function UAe(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function FAe(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=Vu(r),n=qt(),s=qt(),o="";for(this.divRemTo(i,n,s);n.signum()>0;)o=(r+s.intValue()).toString(t).substr(1)+o,n.divRemTo(i,n,s);return s.intValue().toString(t)+o}function jAe(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),i=Math.pow(e,r),n=!1,s=0,o=0,a=0;a<t.length;++a){var c=pD(t,a);if(c<0){t.charAt(a)=="-"&&this.signum()==0&&(n=!0);continue}o=e*o+c,++s>=r&&(this.dMultiply(i),this.dAddOffset(o,0),s=0,o=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),n&&ve.ZERO.subTo(this,this)}function KAe(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(ve.ONE.shiftLeft(t-1),Kw,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(ve.ONE.shiftLeft(t-1),this);else{var i=new Array,n=t&7;i.length=(t>>3)+1,e.nextBytes(i),n>0?i[0]&=(1<<n)-1:i[0]=0,this.fromString(i,256)}}function VAe(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,i,n=0;if(t-- >0)for(r<this.DB&&(i=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[n++]=i|this.s<<this.DB-r);t>=0;)r<8?(i=(this.data[t]&(1<<r)-1)<<8-r,i|=this.data[--t]>>(r+=this.DB-8)):(i=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(i&128)!=0&&(i|=-256),n==0&&(this.s&128)!=(i&128)&&++n,(n>0||i!=this.s)&&(e[n++]=i);return e}function zAe(t){return this.compareTo(t)==0}function HAe(t){return this.compareTo(t)<0?this:t}function $Ae(t){return this.compareTo(t)>0?this:t}function GAe(t,e,r){var i,n,s=Math.min(t.t,this.t);for(i=0;i<s;++i)r.data[i]=e(this.data[i],t.data[i]);if(t.t<this.t){for(n=t.s&this.DM,i=s;i<this.t;++i)r.data[i]=e(this.data[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=s;i<t.t;++i)r.data[i]=e(n,t.data[i]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function WAe(t,e){return t&e}function YAe(t){var e=qt();return this.bitwiseTo(t,WAe,e),e}function Kw(t,e){return t|e}function XAe(t){var e=qt();return this.bitwiseTo(t,Kw,e),e}function yD(t,e){return t^e}function QAe(t){var e=qt();return this.bitwiseTo(t,yD,e),e}function gD(t,e){return t&~e}function ZAe(t){var e=qt();return this.bitwiseTo(t,gD,e),e}function JAe(){for(var t=qt(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function eIe(t){var e=qt();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function tIe(t){var e=qt();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function rIe(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}function iIe(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+rIe(this.data[t]);return this.s<0?this.t*this.DB:-1}function nIe(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function sIe(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=nIe(this.data[r]^e);return t}function oIe(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function aIe(t,e){var r=ve.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function cIe(t){return this.changeBit(t,Kw)}function uIe(t){return this.changeBit(t,gD)}function fIe(t){return this.changeBit(t,yD)}function lIe(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this.data[r]+t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i+=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=i<0?-1:0,i>0?e.data[r++]=i:i<-1&&(e.data[r++]=this.DV+i),e.t=r,e.clamp()}function dIe(t){var e=qt();return this.addTo(t,e),e}function hIe(t){var e=qt();return this.subTo(t,e),e}function pIe(t){var e=qt();return this.multiplyTo(t,e),e}function yIe(t){var e=qt();return this.divRemTo(t,e,null),e}function gIe(t){var e=qt();return this.divRemTo(t,null,e),e}function bIe(t){var e=qt(),r=qt();return this.divRemTo(t,e,r),new Array(e,r)}function mIe(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function vIe(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function p2(){}function bD(t){return t}function wIe(t,e,r){t.multiplyTo(e,r)}function _Ie(t,e){t.squareTo(e)}p2.prototype.convert=bD;p2.prototype.revert=bD;p2.prototype.mulTo=wIe;p2.prototype.sqrTo=_Ie;function EIe(t){return this.exp(t,new p2)}function SIe(t,e,r){var i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;var n;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,t.data[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t.data[i],r,i,0,e-i);r.clamp()}function xIe(t,e,r){--e;var i=r.t=this.t+t.t-e;for(r.s=0;--i>=0;)r.data[i]=0;for(i=Math.max(e-this.t,0);i<t.t;++i)r.data[this.t+i-e]=this.am(e-i,t.data[i],r,0,0,this.t+i-e);r.clamp(),r.drShiftTo(1,r)}function Eh(t){this.r2=qt(),this.q3=qt(),ve.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function AIe(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=qt();return t.copyTo(e),this.reduce(e),e}function IIe(t){return t}function TIe(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function RIe(t,e){t.squareTo(e),this.reduce(e)}function PIe(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Eh.prototype.convert=AIe;Eh.prototype.revert=IIe;Eh.prototype.reduce=TIe;Eh.prototype.mulTo=PIe;Eh.prototype.sqrTo=RIe;function CIe(t,e){var r=t.bitLength(),i,n=Vu(1),s;if(r<=0)return n;r<18?i=1:r<48?i=3:r<144?i=4:r<768?i=5:i=6,r<8?s=new pl(e):e.isEven()?s=new Eh(e):s=new yl(e);var o=new Array,a=3,c=i-1,u=(1<<i)-1;if(o[1]=s.convert(this),i>1){var f=qt();for(s.sqrTo(o[1],f);a<=u;)o[a]=qt(),s.mulTo(f,o[a-2],o[a]),a+=2}var d=t.t-1,h,y=!0,g=qt(),m;for(r=Y6(t.data[d])-1;d>=0;){for(r>=c?h=t.data[d]>>r-c&u:(h=(t.data[d]&(1<<r+1)-1)<<c-r,d>0&&(h|=t.data[d-1]>>this.DB+r-c)),a=i;(h&1)==0;)h>>=1,--a;if((r-=a)<0&&(r+=this.DB,--d),y)o[h].copyTo(n),y=!1;else{for(;a>1;)s.sqrTo(n,g),s.sqrTo(g,n),a-=2;a>0?s.sqrTo(n,g):(m=n,n=g,g=m),s.mulTo(g,o[h],n)}for(;d>=0&&(t.data[d]&1<<r)==0;)s.sqrTo(n,g),m=n,n=g,g=m,--r<0&&(r=this.DB-1,--d)}return s.revert(n)}function OIe(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var i=e;e=r,r=i}var n=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(n<s&&(s=n),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function kIe(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var i=this.t-1;i>=0;--i)r=(e*r+this.data[i])%t;return r}function qIe(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return ve.ZERO;for(var r=t.clone(),i=this.clone(),n=Vu(1),s=Vu(0),o=Vu(0),a=Vu(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!n.isEven()||!s.isEven())&&(n.addTo(this,n),s.subTo(t,s)),n.rShiftTo(1,n)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),e?((!o.isEven()||!a.isEven())&&(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(i)>=0?(r.subTo(i,r),e&&n.subTo(o,n),s.subTo(a,s)):(i.subTo(r,i),e&&o.subTo(n,o),a.subTo(s,a))}if(i.compareTo(ve.ONE)!=0)return ve.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var wo=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],DIe=(1<<26)/wo[wo.length-1];function NIe(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=wo[wo.length-1]){for(e=0;e<wo.length;++e)if(r.data[0]==wo[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<wo.length;){for(var i=wo[e],n=e+1;n<wo.length&&i<DIe;)i*=wo[n++];for(i=r.modInt(i);e<n;)if(i%wo[e++]==0)return!1}return r.millerRabin(t)}function BIe(t){var e=this.subtract(ve.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var i=e.shiftRight(r),n=MIe(),s,o=0;o<t;++o){do s=new ve(this.bitLength(),n);while(s.compareTo(ve.ONE)<=0||s.compareTo(e)>=0);var a=s.modPow(i,this);if(a.compareTo(ve.ONE)!=0&&a.compareTo(e)!=0){for(var c=1;c++<r&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(ve.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}function MIe(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}ve.prototype.chunkSize=LAe;ve.prototype.toRadix=FAe;ve.prototype.fromRadix=jAe;ve.prototype.fromNumber=KAe;ve.prototype.bitwiseTo=GAe;ve.prototype.changeBit=aIe;ve.prototype.addTo=lIe;ve.prototype.dMultiply=mIe;ve.prototype.dAddOffset=vIe;ve.prototype.multiplyLowerTo=SIe;ve.prototype.multiplyUpperTo=xIe;ve.prototype.modInt=kIe;ve.prototype.millerRabin=BIe;ve.prototype.clone=DAe;ve.prototype.intValue=NAe;ve.prototype.byteValue=BAe;ve.prototype.shortValue=MAe;ve.prototype.signum=UAe;ve.prototype.toByteArray=VAe;ve.prototype.equals=zAe;ve.prototype.min=HAe;ve.prototype.max=$Ae;ve.prototype.and=YAe;ve.prototype.or=XAe;ve.prototype.xor=QAe;ve.prototype.andNot=ZAe;ve.prototype.not=JAe;ve.prototype.shiftLeft=eIe;ve.prototype.shiftRight=tIe;ve.prototype.getLowestSetBit=iIe;ve.prototype.bitCount=sIe;ve.prototype.testBit=oIe;ve.prototype.setBit=cIe;ve.prototype.clearBit=uIe;ve.prototype.flipBit=fIe;ve.prototype.add=dIe;ve.prototype.subtract=hIe;ve.prototype.multiply=pIe;ve.prototype.divide=yIe;ve.prototype.remainder=gIe;ve.prototype.divideAndRemainder=bIe;ve.prototype.modPow=CIe;ve.prototype.modInverse=qIe;ve.prototype.pow=EIe;ve.prototype.gcd=OIe;ve.prototype.isProbablePrime=NIe});var SD=p((y9t,ED)=>{l();var _a=ft();ju();Qt();var vD=ED.exports=_a.sha1=_a.sha1||{};_a.md.sha1=_a.md.algorithms.sha1=vD;vD.create=function(){wD||LIe();var t=null,e=_a.util.createBuffer(),r=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return i.start=function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return e=_a.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i},i.start(),i.update=function(n,s){s==="utf8"&&(n=_a.util.encodeUtf8(n));var o=n.length;i.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=i.fullMessageLength.length-1;a>=0;--a)i.fullMessageLength[a]+=o[1],o[1]=o[0]+(i.fullMessageLength[a]/4294967296>>>0),i.fullMessageLength[a]=i.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return e.putBytes(n),_D(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),i},i.digest=function(){var n=_a.util.createBuffer();n.putBytes(e.bytes());var s=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,o=s&i.blockLength-1;n.putBytes(Vw.substr(0,i.blockLength-o));for(var a,c,u=i.fullMessageLength[0]*8,f=0;f<i.fullMessageLength.length-1;++f)a=i.fullMessageLength[f+1]*8,c=a/4294967296>>>0,u+=c,n.putInt32(u>>>0),u=a>>>0;n.putInt32(u);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};_D(d,r,n);var h=_a.util.createBuffer();return h.putInt32(d.h0),h.putInt32(d.h1),h.putInt32(d.h2),h.putInt32(d.h3),h.putInt32(d.h4),h},i};var Vw=null,wD=!1;function LIe(){Vw=String.fromCharCode(128),Vw+=_a.util.fillString(String.fromCharCode(0),64),wD=!0}function _D(t,e,r){for(var i,n,s,o,a,c,u,f,d=r.length();d>=64;){for(n=t.h0,s=t.h1,o=t.h2,a=t.h3,c=t.h4,f=0;f<16;++f)i=r.getInt32(),e[f]=i,u=a^s&(o^a),i=(n<<5|n>>>27)+u+c+1518500249+i,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=i;for(;f<20;++f)i=e[f-3]^e[f-8]^e[f-14]^e[f-16],i=i<<1|i>>>31,e[f]=i,u=a^s&(o^a),i=(n<<5|n>>>27)+u+c+1518500249+i,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=i;for(;f<32;++f)i=e[f-3]^e[f-8]^e[f-14]^e[f-16],i=i<<1|i>>>31,e[f]=i,u=s^o^a,i=(n<<5|n>>>27)+u+c+1859775393+i,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=i;for(;f<40;++f)i=e[f-6]^e[f-16]^e[f-28]^e[f-32],i=i<<2|i>>>30,e[f]=i,u=s^o^a,i=(n<<5|n>>>27)+u+c+1859775393+i,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=i;for(;f<60;++f)i=e[f-6]^e[f-16]^e[f-28]^e[f-32],i=i<<2|i>>>30,e[f]=i,u=s&o|a&(s^o),i=(n<<5|n>>>27)+u+c+2400959708+i,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=i;for(;f<80;++f)i=e[f-6]^e[f-16]^e[f-28]^e[f-32],i=i<<2|i>>>30,e[f]=i,u=s^o^a,i=(n<<5|n>>>27)+u+c+3395469782+i,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=i;t.h0=t.h0+n|0,t.h1=t.h1+s|0,t.h2=t.h2+o|0,t.h3=t.h3+a|0,t.h4=t.h4+c|0,d-=64}}});var ID=p((g9t,AD)=>{l();var Ea=ft();Qt();Ku();SD();var xD=AD.exports=Ea.pkcs1=Ea.pkcs1||{};xD.encode_rsa_oaep=function(t,e,r){var i,n,s,o;typeof r=="string"?(i=r,n=arguments[3]||void 0,s=arguments[4]||void 0):r&&(i=r.label||void 0,n=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md)),s?s.start():s=Ea.md.sha1.create(),o||(o=s);var a=Math.ceil(t.n.bitLength()/8),c=a-2*s.digestLength-2;if(e.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=c,u}i||(i=""),s.update(i,"raw");for(var f=s.digest(),d="",h=c-e.length,y=0;y<h;y++)d+="\0";var g=f.getBytes()+d+""+e;if(!n)n=Ea.random.getBytes(s.digestLength);else if(n.length!==s.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=n.length,u.digestLength=s.digestLength,u}var m=X6(n,a-s.digestLength-1,o),E=Ea.util.xorBytes(g,m,g.length),v=X6(E,s.digestLength,o),A=Ea.util.xorBytes(n,v,n.length);return"\0"+A+E};xD.decode_rsa_oaep=function(t,e,r){var i,n,s;typeof r=="string"?(i=r,n=arguments[3]||void 0):r&&(i=r.label||void 0,n=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var o=Math.ceil(t.n.bitLength()/8);if(e.length!==o){var E=new Error("RSAES-OAEP encoded message length is invalid.");throw E.length=e.length,E.expectedLength=o,E}if(n===void 0?n=Ea.md.sha1.create():n.start(),s||(s=n),o<2*n.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),n.update(i,"raw");for(var a=n.digest().getBytes(),c=e.charAt(0),u=e.substring(1,n.digestLength+1),f=e.substring(1+n.digestLength),d=X6(f,n.digestLength,s),h=Ea.util.xorBytes(u,d,u.length),y=X6(h,o-n.digestLength-1,s),g=Ea.util.xorBytes(f,y,f.length),m=g.substring(0,n.digestLength),E=c!=="\0",v=0;v<n.digestLength;++v)E|=a.charAt(v)!==m.charAt(v);for(var A=1,R=n.digestLength,F=n.digestLength;F<g.length;F++){var q=g.charCodeAt(F),D=q&1^1,z=A?65534:0;E|=q&z,A=A&D,R+=A}if(E||g.charCodeAt(R)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(R+1)};function X6(t,e,r){r||(r=Ea.md.sha1.create());for(var i="",n=Math.ceil(e/r.digestLength),s=0;s<n;++s){var o=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(t+o),i+=r.digest().getBytes()}return i.substring(0,e)}});var TD=p((b9t,zw)=>{l();var zu=ft();Qt();y2();Ku();(function(){if(zu.prime){zw.exports=zu.prime;return}var t=zw.exports=zu.prime=zu.prime||{},e=zu.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],i=new e(null);i.fromInt(30);var n=function(d,h){return d|h};t.generateProbablePrime=function(d,h,y){typeof h=="function"&&(y=h,h={}),h=h||{};var g=h.algorithm||"PRIMEINC";typeof g=="string"&&(g={name:g}),g.options=g.options||{};var m=h.prng||zu.random,E={nextBytes:function(v){for(var A=m.getBytesSync(v.length),R=0;R<v.length;++R)v[R]=A.charCodeAt(R)}};if(g.name==="PRIMEINC")return s(d,E,g.options,y);throw new Error("Invalid prime generation algorithm: "+g.name)};function s(d,h,y,g){return"workers"in y?c(d,h,y,g):o(d,h,y,g)}function o(d,h,y,g){var m=u(d,h),E=0,v=f(m.bitLength());"millerRabinTests"in y&&(v=y.millerRabinTests);var A=10;"maxBlockTime"in y&&(A=y.maxBlockTime),a(m,d,h,E,v,A,g)}function a(d,h,y,g,m,E,v){var A=+new Date;do{if(d.bitLength()>h&&(d=u(h,y)),d.isProbablePrime(m))return v(null,d);d.dAddOffset(r[g++%8],0)}while(E<0||+new Date-A<E);zu.util.setImmediate(function(){a(d,h,y,g,m,E,v)})}function c(d,h,y,g){if(typeof Worker=="undefined")return o(d,h,y,g);var m=u(d,h),E=y.workers,v=y.workLoad||100,A=v*30/8,R=y.workerScript||"forge/prime.worker.js";if(E===-1)return zu.util.estimateCores(function(q,D){q&&(D=2),E=D-1,F()});F();function F(){E=Math.max(1,E);for(var q=[],D=0;D<E;++D)q[D]=new Worker(R);for(var z=E,D=0;D<E;++D)q[D].addEventListener("message",Y);var G=!1;function Y(P){if(!G){--z;var b=P.data;if(b.found){for(var w=0;w<q.length;++w)q[w].terminate();return G=!0,g(null,new e(b.prime,16))}m.bitLength()>d&&(m=u(d,h));var S=m.toString(16);P.target.postMessage({hex:S,workLoad:v}),m.dAddOffset(A,0)}}}}function u(d,h){var y=new e(d,h),g=d-1;return y.testBit(g)||y.bitwiseTo(e.ONE.shiftLeft(g),n,y),y.dAddOffset(31-y.mod(i).byteValue(),0),y}function f(d){return d<=100?27:d<=150?18:d<=200?15:d<=250?12:d<=300?9:d<=350?8:d<=400?7:d<=500?6:d<=600?5:d<=800?4:d<=1250?3:2}})()});var g2=p((m9t,DD)=>{l();var ot=ft();Tc();y2();gh();ID();TD();Ku();Qt();typeof Pt=="undefined"&&(Pt=ot.jsbn.BigInteger);var Pt,Hw=ot.util.isNodejs?wh():null,se=ot.asn1,Cs=ot.util;ot.pki=ot.pki||{};DD.exports=ot.pki.rsa=ot.rsa=ot.rsa||{};var at=ot.pki,UIe=[6,4,2,4,2,4,6,2],FIe={name:"PrivateKeyInfo",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:se.Class.UNIVERSAL,type:se.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:se.Class.UNIVERSAL,type:se.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},jIe={name:"RSAPrivateKey",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},KIe={name:"RSAPublicKey",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},VIe=ot.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:se.Class.UNIVERSAL,type:se.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:se.Class.UNIVERSAL,type:se.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},zIe=function(t){var e;if(t.algorithm in at.oids)e=at.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var i=se.oidToDer(e).getBytes(),n=se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[]),s=se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[]);s.value.push(se.create(se.Class.UNIVERSAL,se.Type.OID,!1,i)),s.value.push(se.create(se.Class.UNIVERSAL,se.Type.NULL,!1,""));var o=se.create(se.Class.UNIVERSAL,se.Type.OCTETSTRING,!1,t.digest().getBytes());return n.value.push(s),n.value.push(o),se.toDer(n).getBytes()},RD=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Pt.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Pt.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var i;do i=new Pt(ot.util.bytesToHex(ot.random.getBytes(e.n.bitLength()/8)),16);while(i.compareTo(e.n)>=0||!i.gcd(e.n).equals(Pt.ONE));t=t.multiply(i.modPow(e.e,e.n)).mod(e.n);for(var n=t.mod(e.p).modPow(e.dP,e.p),s=t.mod(e.q).modPow(e.dQ,e.q);n.compareTo(s)<0;)n=n.add(e.p);var o=n.subtract(s).multiply(e.qInv).mod(e.p).multiply(e.q).add(s);return o=o.multiply(i.modInverse(e.n)).mod(e.n),o};at.rsa.encrypt=function(t,e,r){var i=r,n,s=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(i=r===2,n=PD(t,e,r)):(n=ot.util.createBuffer(),n.putBytes(t));for(var o=new Pt(n.toHex(),16),a=RD(o,e,i),c=a.toString(16),u=ot.util.createBuffer(),f=s-Math.ceil(c.length/2);f>0;)u.putByte(0),--f;return u.putBytes(ot.util.hexToBytes(c)),u.getBytes()};at.rsa.decrypt=function(t,e,r,i){var n=Math.ceil(e.n.bitLength()/8);if(t.length!==n){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=n,s}var o=new Pt(ot.util.createBuffer(t).toHex(),16);if(o.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=RD(o,e,r),c=a.toString(16),u=ot.util.createBuffer(),f=n-Math.ceil(c.length/2);f>0;)u.putByte(0),--f;return u.putBytes(ot.util.hexToBytes(c)),i!==!1?Q6(u.getBytes(),e,r):u.getBytes()};at.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var i=r.prng||ot.random,n={nextBytes:function(a){for(var c=i.getBytesSync(a.length),u=0;u<a.length;++u)a[u]=c.charCodeAt(u)}},s=r.algorithm||"PRIMEINC",o;if(s==="PRIMEINC")o={algorithm:s,state:0,bits:t,rng:n,eInt:e||65537,e:new Pt(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},o.e.fromInt(o.eInt);else throw new Error("Invalid key generation algorithm: "+s);return o};at.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new Pt(null);r.fromInt(30);for(var i=0,n=function(d,h){return d|h},s=+new Date,o,a=0;t.keys===null&&(e<=0||a<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,u=c-1;t.pqState===0?(t.num=new Pt(c,t.rng),t.num.testBit(u)||t.num.bitwiseTo(Pt.ONE.shiftLeft(u),n,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),i=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime($Ie(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(UIe[i++%8],0):t.pqState===2?t.pqState=t.num.subtract(Pt.ONE).gcd(t.e).compareTo(Pt.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Pt.ONE),t.q1=t.q.subtract(Pt.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Pt.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var f=t.e.modInverse(t.phi);t.keys={privateKey:at.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:at.rsa.setPublicKey(t.n,t.e)}}o=+new Date,a+=o-s,s=o}return t.keys!==null};at.rsa.generateKeyPair=function(t,e,r,i){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(i=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(i=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,i=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(i=r,r=void 0):(i=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!ot.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(i){if(CD("generateKeyPair"))return Hw.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,c,u){if(a)return i(a);i(null,{privateKey:at.privateKeyFromPem(u),publicKey:at.publicKeyFromPem(c)})});if(OD("generateKey")&&OD("exportKey"))return Cs.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:qD(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return Cs.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){i(a)}).then(function(a){if(a){var c=at.privateKeyFromAsn1(se.fromDer(ot.util.createBuffer(a)));i(null,{privateKey:c,publicKey:at.setRsaPublicKey(c.n,c.e)})}});if(kD("generateKey")&&kD("exportKey")){var n=Cs.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:qD(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);n.oncomplete=function(a){var c=a.target.result,u=Cs.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(f){var d=f.target.result,h=at.privateKeyFromAsn1(se.fromDer(ot.util.createBuffer(d)));i(null,{privateKey:h,publicKey:at.setRsaPublicKey(h.n,h.e)})},u.onerror=function(f){i(f)}},n.onerror=function(a){i(a)};return}}else if(CD("generateKeyPairSync")){var s=Hw.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:at.privateKeyFromPem(s.privateKey),publicKey:at.publicKeyFromPem(s.publicKey)}}}var o=at.rsa.createKeyPairGenerationState(t,e,r);if(!i)return at.rsa.stepKeyPairGenerationState(o,0),o.keys;HIe(o,r,i)};at.setRsaPublicKey=at.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(i,n,s){if(typeof n=="string"?n=n.toUpperCase():n===void 0&&(n="RSAES-PKCS1-V1_5"),n==="RSAES-PKCS1-V1_5")n={encode:function(a,c,u){return PD(a,c,2).getBytes()}};else if(n==="RSA-OAEP"||n==="RSAES-OAEP")n={encode:function(a,c){return ot.pkcs1.encode_rsa_oaep(c,a,s)}};else if(["RAW","NONE","NULL",null].indexOf(n)!==-1)n={encode:function(a){return a}};else if(typeof n=="string")throw new Error('Unsupported encryption scheme: "'+n+'".');var o=n.encode(i,r,!0);return at.rsa.encrypt(o,r,!0)},r.verify=function(i,n,s){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),s==="RSASSA-PKCS1-V1_5"?s={verify:function(a,c){c=Q6(c,r,!0);var u=se.fromDer(c);return a===u.value[1].value}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(a,c){return c=Q6(c,r,!0),a===c}});var o=at.rsa.decrypt(n,r,!0,!1);return s.verify(i,o,r.n.bitLength())},r};at.setRsaPrivateKey=at.rsa.setPrivateKey=function(t,e,r,i,n,s,o,a){var c={n:t,e,d:r,p:i,q:n,dP:s,dQ:o,qInv:a};return c.decrypt=function(u,f,d){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var h=at.rsa.decrypt(u,c,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:Q6};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:function(y,g){return ot.pkcs1.decode_rsa_oaep(g,y,d)}};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:function(y){return y}};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(h,c,!1)},c.sign=function(u,f){var d=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:zIe},d=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:function(){return u}},d=1);var h=f.encode(u,c.n.bitLength());return at.rsa.encrypt(h,c,d)},c};at.wrapRsaPrivateKey=function(t){return se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.INTEGER,!1,se.integerToDer(0).getBytes()),se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.OID,!1,se.oidToDer(at.oids.rsaEncryption).getBytes()),se.create(se.Class.UNIVERSAL,se.Type.NULL,!1,"")]),se.create(se.Class.UNIVERSAL,se.Type.OCTETSTRING,!1,se.toDer(t).getBytes())])};at.privateKeyFromAsn1=function(t){var e={},r=[];if(se.validate(t,FIe,e,r)&&(t=se.fromDer(ot.util.createBuffer(e.privateKey))),e={},r=[],!se.validate(t,jIe,e,r)){var i=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw i.errors=r,i}var n,s,o,a,c,u,f,d;return n=ot.util.createBuffer(e.privateKeyModulus).toHex(),s=ot.util.createBuffer(e.privateKeyPublicExponent).toHex(),o=ot.util.createBuffer(e.privateKeyPrivateExponent).toHex(),a=ot.util.createBuffer(e.privateKeyPrime1).toHex(),c=ot.util.createBuffer(e.privateKeyPrime2).toHex(),u=ot.util.createBuffer(e.privateKeyExponent1).toHex(),f=ot.util.createBuffer(e.privateKeyExponent2).toHex(),d=ot.util.createBuffer(e.privateKeyCoefficient).toHex(),at.setRsaPrivateKey(new Pt(n,16),new Pt(s,16),new Pt(o,16),new Pt(a,16),new Pt(c,16),new Pt(u,16),new Pt(f,16),new Pt(d,16))};at.privateKeyToAsn1=at.privateKeyToRSAPrivateKey=function(t){return se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.INTEGER,!1,se.integerToDer(0).getBytes()),se.create(se.Class.UNIVERSAL,se.Type.INTEGER,!1,Sa(t.n)),se.create(se.Class.UNIVERSAL,se.Type.INTEGER,!1,Sa(t.e)),se.create(se.Class.UNIVERSAL,se.Type.INTEGER,!1,Sa(t.d)),se.create(se.Class.UNIVERSAL,se.Type.INTEGER,!1,Sa(t.p)),se.create(se.Class.UNIVERSAL,se.Type.INTEGER,!1,Sa(t.q)),se.create(se.Class.UNIVERSAL,se.Type.INTEGER,!1,Sa(t.dP)),se.create(se.Class.UNIVERSAL,se.Type.INTEGER,!1,Sa(t.dQ)),se.create(se.Class.UNIVERSAL,se.Type.INTEGER,!1,Sa(t.qInv))])};at.publicKeyFromAsn1=function(t){var e={},r=[];if(se.validate(t,VIe,e,r)){var i=se.derToOid(e.publicKeyOid);if(i!==at.oids.rsaEncryption){var n=new Error("Cannot read public key. Unknown OID.");throw n.oid=i,n}t=e.rsaPublicKey}if(r=[],!se.validate(t,KIe,e,r)){var n=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw n.errors=r,n}var s=ot.util.createBuffer(e.publicKeyModulus).toHex(),o=ot.util.createBuffer(e.publicKeyExponent).toHex();return at.setRsaPublicKey(new Pt(s,16),new Pt(o,16))};at.publicKeyToAsn1=at.publicKeyToSubjectPublicKeyInfo=function(t){return se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.OID,!1,se.oidToDer(at.oids.rsaEncryption).getBytes()),se.create(se.Class.UNIVERSAL,se.Type.NULL,!1,"")]),se.create(se.Class.UNIVERSAL,se.Type.BITSTRING,!1,[at.publicKeyToRSAPublicKey(t)])])};at.publicKeyToRSAPublicKey=function(t){return se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.INTEGER,!1,Sa(t.n)),se.create(se.Class.UNIVERSAL,se.Type.INTEGER,!1,Sa(t.e))])};function PD(t,e,r){var i=ot.util.createBuffer(),n=Math.ceil(e.n.bitLength()/8);if(t.length>n-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=n-11,s}i.putByte(0),i.putByte(r);var o=n-3-t.length,a;if(r===0||r===1){a=r===0?0:255;for(var c=0;c<o;++c)i.putByte(a)}else for(;o>0;){for(var u=0,f=ot.random.getBytes(o),c=0;c<o;++c)a=f.charCodeAt(c),a===0?++u:i.putByte(a);o=u}return i.putByte(0),i.putBytes(t),i}function Q6(t,e,r,i){var n=Math.ceil(e.n.bitLength()/8),s=ot.util.createBuffer(t),o=s.getByte(),a=s.getByte();if(o!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof i=="undefined")throw new Error("Encryption block is invalid.");var c=0;if(a===0){c=n-3-i;for(var u=0;u<c;++u)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(c=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++c}else if(a===2)for(c=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++c}var f=s.getByte();if(f!==0||c!==n-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function HIe(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var i={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(i.prng=e.prng),n();function n(){s(t.pBits,function(a,c){if(a)return r(a);if(t.p=c,t.q!==null)return o(a,t.q);s(t.qBits,o)})}function s(a,c){ot.prime.generateProbablePrime(a,i,c)}function o(a,c){if(a)return r(a);if(t.q=c,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(Pt.ONE).gcd(t.e).compareTo(Pt.ONE)!==0){t.p=null,n();return}if(t.q.subtract(Pt.ONE).gcd(t.e).compareTo(Pt.ONE)!==0){t.q=null,s(t.qBits,o);return}if(t.p1=t.p.subtract(Pt.ONE),t.q1=t.q.subtract(Pt.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Pt.ONE)!==0){t.p=t.q=null,n();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,s(t.qBits,o);return}var f=t.e.modInverse(t.phi);t.keys={privateKey:at.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:at.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function Sa(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=ot.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function $Ie(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function CD(t){return ot.util.isNodejs&&typeof Hw[t]=="function"}function OD(t){return typeof Cs.globalScope!="undefined"&&typeof Cs.globalScope.crypto=="object"&&typeof Cs.globalScope.crypto.subtle=="object"&&typeof Cs.globalScope.crypto.subtle[t]=="function"}function kD(t){return typeof Cs.globalScope!="undefined"&&typeof Cs.globalScope.msCrypto=="object"&&typeof Cs.globalScope.msCrypto.subtle=="object"&&typeof Cs.globalScope.msCrypto.subtle[t]=="function"}function qD(t){for(var e=ot.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),i=0;i<e.length;++i)r[i]=e.charCodeAt(i);return r}});var $w=p((v9t,UD)=>{l();var Le=ft();vh();Tc();K6();ju();gh();Bw();$6();Ku();fD();g2();Qt();typeof ND=="undefined"&&(ND=Le.jsbn.BigInteger);var ND,fe=Le.asn1,ct=Le.pki=Le.pki||{};UD.exports=ct.pbe=Le.pbe=Le.pbe||{};var gl=ct.oids,GIe={name:"EncryptedPrivateKeyInfo",tagClass:fe.Class.UNIVERSAL,type:fe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:fe.Class.UNIVERSAL,type:fe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:fe.Class.UNIVERSAL,type:fe.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:fe.Class.UNIVERSAL,type:fe.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:fe.Class.UNIVERSAL,type:fe.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},WIe={name:"PBES2Algorithms",tagClass:fe.Class.UNIVERSAL,type:fe.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:fe.Class.UNIVERSAL,type:fe.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:fe.Class.UNIVERSAL,type:fe.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:fe.Class.UNIVERSAL,type:fe.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:fe.Class.UNIVERSAL,type:fe.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:fe.Class.UNIVERSAL,type:fe.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:fe.Class.UNIVERSAL,type:fe.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:fe.Class.UNIVERSAL,type:fe.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:fe.Class.UNIVERSAL,type:fe.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:fe.Class.UNIVERSAL,type:fe.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:fe.Class.UNIVERSAL,type:fe.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:fe.Class.UNIVERSAL,type:fe.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},YIe={name:"pkcs-12PbeParams",tagClass:fe.Class.UNIVERSAL,type:fe.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:fe.Class.UNIVERSAL,type:fe.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:fe.Class.UNIVERSAL,type:fe.Type.INTEGER,constructed:!1,capture:"iterations"}]};ct.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var i=Le.random.getBytesSync(r.saltSize),n=r.count,s=fe.integerToDer(n),o,a,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,f,d;switch(r.algorithm){case"aes128":o=16,u=16,f=gl["aes128-CBC"],d=Le.aes.createEncryptionCipher;break;case"aes192":o=24,u=16,f=gl["aes192-CBC"],d=Le.aes.createEncryptionCipher;break;case"aes256":o=32,u=16,f=gl["aes256-CBC"],d=Le.aes.createEncryptionCipher;break;case"des":o=8,u=8,f=gl.desCBC,d=Le.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var y="hmacWith"+r.prfAlgorithm.toUpperCase(),g=LD(y),m=Le.pkcs5.pbkdf2(e,i,n,o,g),E=Le.random.getBytesSync(u),v=d(m);v.start(E),v.update(fe.toDer(t)),v.finish(),c=v.output.getBytes();var A=XIe(i,s,o,y);a=fe.create(fe.Class.UNIVERSAL,fe.Type.SEQUENCE,!0,[fe.create(fe.Class.UNIVERSAL,fe.Type.OID,!1,fe.oidToDer(gl.pkcs5PBES2).getBytes()),fe.create(fe.Class.UNIVERSAL,fe.Type.SEQUENCE,!0,[fe.create(fe.Class.UNIVERSAL,fe.Type.SEQUENCE,!0,[fe.create(fe.Class.UNIVERSAL,fe.Type.OID,!1,fe.oidToDer(gl.pkcs5PBKDF2).getBytes()),A]),fe.create(fe.Class.UNIVERSAL,fe.Type.SEQUENCE,!0,[fe.create(fe.Class.UNIVERSAL,fe.Type.OID,!1,fe.oidToDer(f).getBytes()),fe.create(fe.Class.UNIVERSAL,fe.Type.OCTETSTRING,!1,E)])])])}else if(r.algorithm==="3des"){o=24;var R=new Le.util.ByteBuffer(i),m=ct.pbe.generatePkcs12Key(e,R,1,n,o),E=ct.pbe.generatePkcs12Key(e,R,2,n,o),v=Le.des.createEncryptionCipher(m);v.start(E),v.update(fe.toDer(t)),v.finish(),c=v.output.getBytes(),a=fe.create(fe.Class.UNIVERSAL,fe.Type.SEQUENCE,!0,[fe.create(fe.Class.UNIVERSAL,fe.Type.OID,!1,fe.oidToDer(gl["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),fe.create(fe.Class.UNIVERSAL,fe.Type.SEQUENCE,!0,[fe.create(fe.Class.UNIVERSAL,fe.Type.OCTETSTRING,!1,i),fe.create(fe.Class.UNIVERSAL,fe.Type.INTEGER,!1,s.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var F=fe.create(fe.Class.UNIVERSAL,fe.Type.SEQUENCE,!0,[a,fe.create(fe.Class.UNIVERSAL,fe.Type.OCTETSTRING,!1,c)]);return F};ct.decryptPrivateKeyInfo=function(t,e){var r=null,i={},n=[];if(!fe.validate(t,GIe,i,n)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}var o=fe.derToOid(i.encryptionOid),a=ct.pbe.getCipher(o,i.encryptionParams,e),c=Le.util.createBuffer(i.encryptedData);return a.update(c),a.finish()&&(r=fe.fromDer(a.output)),r};ct.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:fe.toDer(t).getBytes()};return Le.pem.encode(r,{maxline:e})};ct.encryptedPrivateKeyFromPem=function(t){var e=Le.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return fe.fromDer(e.body)};ct.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var i=ct.wrapRsaPrivateKey(ct.privateKeyToAsn1(t));return i=ct.encryptPrivateKeyInfo(i,e,r),ct.encryptedPrivateKeyToPem(i)}var n,s,o,a;switch(r.algorithm){case"aes128":n="AES-128-CBC",o=16,s=Le.random.getBytesSync(16),a=Le.aes.createEncryptionCipher;break;case"aes192":n="AES-192-CBC",o=24,s=Le.random.getBytesSync(16),a=Le.aes.createEncryptionCipher;break;case"aes256":n="AES-256-CBC",o=32,s=Le.random.getBytesSync(16),a=Le.aes.createEncryptionCipher;break;case"3des":n="DES-EDE3-CBC",o=24,s=Le.random.getBytesSync(8),a=Le.des.createEncryptionCipher;break;case"des":n="DES-CBC",o=8,s=Le.random.getBytesSync(8),a=Le.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var u=Le.pbe.opensslDeriveBytes(e,s.substr(0,8),o),f=a(u);f.start(s),f.update(fe.toDer(ct.privateKeyToAsn1(t))),f.finish();var d={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:n,parameters:Le.util.bytesToHex(s).toUpperCase()},body:f.output.getBytes()};return Le.pem.encode(d)};ct.decryptRsaPrivateKey=function(t,e){var r=null,i=Le.pem.decode(t)[0];if(i.type!=="ENCRYPTED PRIVATE KEY"&&i.type!=="PRIVATE KEY"&&i.type!=="RSA PRIVATE KEY"){var n=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw n.headerType=n,n}if(i.procType&&i.procType.type==="ENCRYPTED"){var s,o;switch(i.dekInfo.algorithm){case"DES-CBC":s=8,o=Le.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,o=Le.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,o=Le.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,o=Le.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,o=Le.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,o=function(d){return Le.rc2.createDecryptionCipher(d,40)};break;case"RC2-64-CBC":s=8,o=function(d){return Le.rc2.createDecryptionCipher(d,64)};break;case"RC2-128-CBC":s=16,o=function(d){return Le.rc2.createDecryptionCipher(d,128)};break;default:var n=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".');throw n.algorithm=i.dekInfo.algorithm,n}var a=Le.util.hexToBytes(i.dekInfo.parameters),c=Le.pbe.opensslDeriveBytes(e,a.substr(0,8),s),u=o(c);if(u.start(a),u.update(Le.util.createBuffer(i.body)),u.finish())r=u.output.getBytes();else return r}else r=i.body;return i.type==="ENCRYPTED PRIVATE KEY"?r=ct.decryptPrivateKeyInfo(fe.fromDer(r),e):r=fe.fromDer(r),r!==null&&(r=ct.privateKeyFromAsn1(r)),r};ct.pbe.generatePkcs12Key=function(t,e,r,i,n,s){var o,a;if(typeof s=="undefined"||s===null){if(!("sha1"in Le.md))throw new Error('"sha1" hash algorithm unavailable.');s=Le.md.sha1.create()}var c=s.digestLength,u=s.blockLength,f=new Le.util.ByteBuffer,d=new Le.util.ByteBuffer;if(t!=null){for(a=0;a<t.length;a++)d.putInt16(t.charCodeAt(a));d.putInt16(0)}var h=d.length(),y=e.length(),g=new Le.util.ByteBuffer;g.fillWithByte(r,u);var m=u*Math.ceil(y/u),E=new Le.util.ByteBuffer;for(a=0;a<m;a++)E.putByte(e.at(a%y));var v=u*Math.ceil(h/u),A=new Le.util.ByteBuffer;for(a=0;a<v;a++)A.putByte(d.at(a%h));var R=E;R.putBuffer(A);for(var F=Math.ceil(n/c),q=1;q<=F;q++){var D=new Le.util.ByteBuffer;D.putBytes(g.bytes()),D.putBytes(R.bytes());for(var z=0;z<i;z++)s.start(),s.update(D.getBytes()),D=s.digest();var G=new Le.util.ByteBuffer;for(a=0;a<u;a++)G.putByte(D.at(a%c));var Y=Math.ceil(y/u)+Math.ceil(h/u),P=new Le.util.ByteBuffer;for(o=0;o<Y;o++){var b=new Le.util.ByteBuffer(R.getBytes(u)),w=511;for(a=G.length()-1;a>=0;a--)w=w>>8,w+=G.at(a)+b.at(a),b.setAt(a,w&255);P.putBuffer(b)}R=P,f.putBuffer(D)}return f.truncate(f.length()-n),f};ct.pbe.getCipher=function(t,e,r){switch(t){case ct.oids.pkcs5PBES2:return ct.pbe.getCipherForPBES2(t,e,r);case ct.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case ct.oids["pbewithSHAAnd40BitRC2-CBC"]:return ct.pbe.getCipherForPKCS12PBE(t,e,r);default:var i=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw i.oid=t,i.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],i}};ct.pbe.getCipherForPBES2=function(t,e,r){var i={},n=[];if(!fe.validate(e,WIe,i,n)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}if(t=fe.derToOid(i.kdfOid),t!==ct.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=t,s.supportedOids=["pkcs5PBKDF2"],s}if(t=fe.derToOid(i.encOid),t!==ct.oids["aes128-CBC"]&&t!==ct.oids["aes192-CBC"]&&t!==ct.oids["aes256-CBC"]&&t!==ct.oids["des-EDE3-CBC"]&&t!==ct.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=t,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var o=i.kdfSalt,a=Le.util.createBuffer(i.kdfIterationCount);a=a.getInt(a.length()<<3);var c,u;switch(ct.oids[t]){case"aes128-CBC":c=16,u=Le.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=Le.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=Le.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=Le.des.createDecryptionCipher;break;case"desCBC":c=8,u=Le.des.createDecryptionCipher;break}var f=MD(i.prfOid),d=Le.pkcs5.pbkdf2(r,o,a,c,f),h=i.encIv,y=u(d);return y.start(h),y};ct.pbe.getCipherForPKCS12PBE=function(t,e,r){var i={},n=[];if(!fe.validate(e,YIe,i,n)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}var o=Le.util.createBuffer(i.salt),a=Le.util.createBuffer(i.iterations);a=a.getInt(a.length()<<3);var c,u,f;switch(t){case ct.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,f=Le.des.startDecrypting;break;case ct.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,f=function(m,E){var v=Le.rc2.createDecryptionCipher(m,40);return v.start(E,null),v};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=t,s}var d=MD(i.prfOid),h=ct.pbe.generatePkcs12Key(r,o,1,a,c,d);d.start();var y=ct.pbe.generatePkcs12Key(r,o,2,a,u,d);return f(h,y)};ct.pbe.opensslDeriveBytes=function(t,e,r,i){if(typeof i=="undefined"||i===null){if(!("md5"in Le.md))throw new Error('"md5" hash algorithm unavailable.');i=Le.md.md5.create()}e===null&&(e="");for(var n=[BD(i,t+e)],s=16,o=1;s<r;++o,s+=16)n.push(BD(i,n[o-1]+t+e));return n.join("").substr(0,r)};function BD(t,e){return t.start().update(e).digest().getBytes()}function MD(t){var e;if(!t)e="hmacWithSHA1";else if(e=ct.oids[fe.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return LD(e)}function LD(t){var e=Le.md;switch(t){case"hmacWithSHA224":e=Le.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function XIe(t,e,r,i){var n=fe.create(fe.Class.UNIVERSAL,fe.Type.SEQUENCE,!0,[fe.create(fe.Class.UNIVERSAL,fe.Type.OCTETSTRING,!1,t),fe.create(fe.Class.UNIVERSAL,fe.Type.INTEGER,!1,e.getBytes())]);return i!=="hmacWithSHA1"&&n.value.push(fe.create(fe.Class.UNIVERSAL,fe.Type.INTEGER,!1,Le.util.hexToBytes(r.toString(16))),fe.create(fe.Class.UNIVERSAL,fe.Type.SEQUENCE,!0,[fe.create(fe.Class.UNIVERSAL,fe.Type.OID,!1,fe.oidToDer(ct.oids[i]).getBytes()),fe.create(fe.Class.UNIVERSAL,fe.Type.NULL,!1,"")])),n}});var _o=p((w9t,jD)=>{l();"use strict";function FD(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function QIe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return FD(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),FD(new n,r)}}jD.exports=QIe});var Gw={};bt(Gw,{identity:()=>ZIe});var ZIe,KD=Se(()=>{l();pa();qu();ZIe=x6({prefix:"\0",name:"identity",encode:t=>aw(t),decode:t=>ow(t)})});var Ww={};bt(Ww,{base2:()=>JIe});var JIe,VD=Se(()=>{l();pa();JIe=Kr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var Yw={};bt(Yw,{base8:()=>eTe});var eTe,zD=Se(()=>{l();pa();eTe=Kr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var Xw={};bt(Xw,{base10:()=>tTe});var tTe,HD=Se(()=>{l();pa();tTe=Nu({prefix:"9",name:"base10",alphabet:"0123456789"})});var b2={};bt(b2,{Hasher:()=>Qw,from:()=>Oc});var Oc,Qw,m2=Se(()=>{l();An();Oc=({name:t,code:e,encode:r})=>new Qw(t,e,r),Qw=class{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}async digest(e){if(e instanceof Uint8Array){let r=await this.encode(e);return s2(this.code,r)}else throw Error("Unknown type, must be binary type")}}});var fi={};bt(fi,{sha256:()=>Sh,sha512:()=>rTe});var $D,Sh,rTe,ii=Se(()=>{l();m2();$D=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Sh=Oc({name:"sha2-256",code:18,encode:$D("SHA-256")}),rTe=Oc({name:"sha2-512",code:19,encode:$D("SHA-512")})});var kc={};bt(kc,{identity:()=>Zw});var Zw,qc=Se(()=>{l();m2();qu();Zw=Oc({name:"identity",code:0,encode:t=>Is(t)})});var Eo={};bt(Eo,{code:()=>Dc,decode:()=>sTe,encode:()=>nTe,name:()=>iTe});var iTe,Dc,nTe,sTe,Os=Se(()=>{l();qu();iTe="raw",Dc=85,nTe=t=>Is(t),sTe=t=>Is(t)});var Z6={};bt(Z6,{code:()=>uTe,decode:()=>lTe,encode:()=>fTe,name:()=>cTe});var oTe,aTe,cTe,uTe,fTe,lTe,Jw=Se(()=>{l();oTe=new TextEncoder,aTe=new TextDecoder,cTe="json",uTe=512,fTe=t=>oTe.encode(JSON.stringify(t)),lTe=t=>JSON.parse(aTe.decode(t))});var xh={};bt(xh,{CID:()=>Ge,bytes:()=>Ic,digest:()=>Ln,hasher:()=>b2,varint:()=>n2});var Nc=Se(()=>{l();Ae();E6();qu();m2();An()});var e9={};bt(e9,{CID:()=>Ge,bases:()=>J6,bytes:()=>Ic,codecs:()=>hTe,digest:()=>Ln,hasher:()=>b2,hashes:()=>dTe,varint:()=>n2});var J6,dTe,hTe,e4=Se(()=>{l();KD();VD();zD();HD();fw();an();uw();ti();a2();ii();qc();Os();Jw();Nc();J6={...Gw,...Ww,...Yw,...Xw,...R6,...on,...T6,...ei,...ph},dTe={...fi,...kc},hTe={raw:Eo,json:Z6}});function GD(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}var WD,t9,pTe,t4,r9=Se(()=>{l();e4();WD=GD("utf8","u",t=>{let e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),t9=GD("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),pTe={utf8:WD,"utf-8":WD,hex:J6.base16,latin1:t9,ascii:t9,binary:t9,...J6},t4=pTe});var lt={};bt(lt,{fromString:()=>i9});function i9(t,e="utf8"){let r=t4[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}var ut=Se(()=>{l();r9()});var un={};bt(un,{concat:()=>yTe});function yTe(t,e){e||(e=t.reduce((n,s)=>n+s.length,0));let r=new Uint8Array(e),i=0;for(let n of t)r.set(n,i),i+=n.length;return r}var fn=Se(()=>{l()});var v2=p(YD=>{l();"use strict";YD.get=(t=self)=>{let e=t.crypto||t.msCrypto;if(!e||!e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}});var n9=p((M9t,QD)=>{l();"use strict";var{concat:gTe}=(fn(),un),{fromString:XD}=(ut(),lt),bTe=v2();function mTe({algorithm:t="AES-GCM",nonceLength:e=12,keyLength:r=16,digest:i="SHA-256",saltLength:n=16,iterations:s=32767}={}){let o=bTe.get();r*=8;async function a(u,f){let d=o.getRandomValues(new Uint8Array(n)),h=o.getRandomValues(new Uint8Array(e)),y={name:t,iv:h},g={name:"PBKDF2",salt:d,iterations:s,hash:{name:i}},m=await o.subtle.importKey("raw",XD(f),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),E=await o.subtle.deriveKey(g,m,{name:t,length:r},!0,["encrypt"]),v=await o.subtle.encrypt(y,E,u);return gTe([d,y.iv,new Uint8Array(v)])}async function c(u,f){let d=u.slice(0,n),h=u.slice(n,n+e),y=u.slice(n+e),g={name:t,iv:h},m={name:"PBKDF2",salt:d,iterations:s,hash:{name:i}},E=await o.subtle.importKey("raw",XD(f),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),v=await o.subtle.deriveKey(m,E,{name:t,length:r},!0,["decrypt"]),A=await o.subtle.decrypt(g,v,y);return new Uint8Array(A)}return{encrypt:a,decrypt:c}}QD.exports={create:mTe}});var JD=p((L9t,ZD)=>{l();"use strict";var{base64:vTe}=(a2(),ph),wTe=n9();ZD.exports={import:async function(t,e){let r=vTe.decode(t);return await wTe.create().decrypt(r,e)}}});var li={};bt(li,{equals:()=>_Te});function _Te(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var di=Se(()=>{l()});var Je={};bt(Je,{toString:()=>ETe});function ETe(t,e="utf8"){let r=t4[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var et=Se(()=>{l();r9()});var r4=p((F9t,iN)=>{l();var yr=ft();ju();Qt();var w2=iN.exports=yr.sha512=yr.sha512||{};yr.md.sha512=yr.md.algorithms.sha512=w2;var eN=yr.sha384=yr.sha512.sha384=yr.sha512.sha384||{};eN.create=function(){return w2.create("SHA-384")};yr.md.sha384=yr.md.algorithms.sha384=eN;yr.sha512.sha256=yr.sha512.sha256||{create:function(){return w2.create("SHA-512/256")}};yr.md["sha512/256"]=yr.md.algorithms["sha512/256"]=yr.sha512.sha256;yr.sha512.sha224=yr.sha512.sha224||{create:function(){return w2.create("SHA-512/224")}};yr.md["sha512/224"]=yr.md.algorithms["sha512/224"]=yr.sha512.sha224;w2.create=function(t){if(tN||STe(),typeof t=="undefined"&&(t="SHA-512"),!(t in bl))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=bl[t],r=null,i=yr.util.createBuffer(),n=new Array(80),s=0;s<80;++s)n[s]=new Array(2);var o=64;switch(t){case"SHA-384":o=48;break;case"SHA-512/256":o=32;break;case"SHA-512/224":o=28;break}var a={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:o,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var c=a.messageLengthSize/4,u=0;u<c;++u)a.fullMessageLength.push(0);i=yr.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return a},a.start(),a.update=function(c,u){u==="utf8"&&(c=yr.util.encodeUtf8(c));var f=c.length;a.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var d=a.fullMessageLength.length-1;d>=0;--d)a.fullMessageLength[d]+=f[1],f[1]=f[0]+(a.fullMessageLength[d]/4294967296>>>0),a.fullMessageLength[d]=a.fullMessageLength[d]>>>0,f[0]=f[1]/4294967296>>>0;return i.putBytes(c),rN(r,n,i),(i.read>2048||i.length()===0)&&i.compact(),a},a.digest=function(){var c=yr.util.createBuffer();c.putBytes(i.bytes());var u=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,f=u&a.blockLength-1;c.putBytes(s9.substr(0,a.blockLength-f));for(var d,h,y=a.fullMessageLength[0]*8,g=0;g<a.fullMessageLength.length-1;++g)d=a.fullMessageLength[g+1]*8,h=d/4294967296>>>0,y+=h,c.putInt32(y>>>0),y=d>>>0;c.putInt32(y);for(var m=new Array(r.length),g=0;g<r.length;++g)m[g]=r[g].slice(0);rN(m,n,c);var E=yr.util.createBuffer(),v;t==="SHA-512"?v=m.length:t==="SHA-384"?v=m.length-2:v=m.length-4;for(var g=0;g<v;++g)E.putInt32(m[g][0]),(g!==v-1||t!=="SHA-512/224")&&E.putInt32(m[g][1]);return E},a};var s9=null,tN=!1,o9=null,bl=null;function STe(){s9=String.fromCharCode(128),s9+=yr.util.fillString(String.fromCharCode(0),128),o9=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],bl={},bl["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],bl["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],bl["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],bl["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],tN=!0}function rN(t,e,r){for(var i,n,s,o,a,c,u,f,d,h,y,g,m,E,v,A,R,F,q,D,z,G,Y,P,b,w,S,C,B,W,K,M,_,L,ae,X=r.length();X>=128;){for(B=0;B<16;++B)e[B][0]=r.getInt32()>>>0,e[B][1]=r.getInt32()>>>0;for(;B<80;++B)M=e[B-2],W=M[0],K=M[1],i=((W>>>19|K<<13)^(K>>>29|W<<3)^W>>>6)>>>0,n=((W<<13|K>>>19)^(K<<3|W>>>29)^(W<<26|K>>>6))>>>0,L=e[B-15],W=L[0],K=L[1],s=((W>>>1|K<<31)^(W>>>8|K<<24)^W>>>7)>>>0,o=((W<<31|K>>>1)^(W<<24|K>>>8)^(W<<25|K>>>7))>>>0,_=e[B-7],ae=e[B-16],K=n+_[1]+o+ae[1],e[B][0]=i+_[0]+s+ae[0]+(K/4294967296>>>0)>>>0,e[B][1]=K>>>0;for(m=t[0][0],E=t[0][1],v=t[1][0],A=t[1][1],R=t[2][0],F=t[2][1],q=t[3][0],D=t[3][1],z=t[4][0],G=t[4][1],Y=t[5][0],P=t[5][1],b=t[6][0],w=t[6][1],S=t[7][0],C=t[7][1],B=0;B<80;++B)u=((z>>>14|G<<18)^(z>>>18|G<<14)^(G>>>9|z<<23))>>>0,f=((z<<18|G>>>14)^(z<<14|G>>>18)^(G<<23|z>>>9))>>>0,d=(b^z&(Y^b))>>>0,h=(w^G&(P^w))>>>0,a=((m>>>28|E<<4)^(E>>>2|m<<30)^(E>>>7|m<<25))>>>0,c=((m<<4|E>>>28)^(E<<30|m>>>2)^(E<<25|m>>>7))>>>0,y=(m&v|R&(m^v))>>>0,g=(E&A|F&(E^A))>>>0,K=C+f+h+o9[B][1]+e[B][1],i=S+u+d+o9[B][0]+e[B][0]+(K/4294967296>>>0)>>>0,n=K>>>0,K=c+g,s=a+y+(K/4294967296>>>0)>>>0,o=K>>>0,S=b,C=w,b=Y,w=P,Y=z,P=G,K=D+n,z=q+i+(K/4294967296>>>0)>>>0,G=K>>>0,q=R,D=F,R=v,F=A,v=m,A=E,K=n+o,m=i+s+(K/4294967296>>>0)>>>0,E=K>>>0;K=t[0][1]+E,t[0][0]=t[0][0]+m+(K/4294967296>>>0)>>>0,t[0][1]=K>>>0,K=t[1][1]+A,t[1][0]=t[1][0]+v+(K/4294967296>>>0)>>>0,t[1][1]=K>>>0,K=t[2][1]+F,t[2][0]=t[2][0]+R+(K/4294967296>>>0)>>>0,t[2][1]=K>>>0,K=t[3][1]+D,t[3][0]=t[3][0]+q+(K/4294967296>>>0)>>>0,t[3][1]=K>>>0,K=t[4][1]+G,t[4][0]=t[4][0]+z+(K/4294967296>>>0)>>>0,t[4][1]=K>>>0,K=t[5][1]+P,t[5][0]=t[5][0]+Y+(K/4294967296>>>0)>>>0,t[5][1]=K>>>0,K=t[6][1]+w,t[6][0]=t[6][0]+b+(K/4294967296>>>0)>>>0,t[6][1]=K>>>0,K=t[7][1]+C,t[7][0]=t[7][0]+S+(K/4294967296>>>0)>>>0,t[7][1]=K>>>0,X-=128}}});var nN=p(a9=>{l();var xTe=ft();Tc();var Mi=xTe.asn1;a9.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Mi.Class.UNIVERSAL,type:Mi.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Mi.Class.UNIVERSAL,type:Mi.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Mi.Class.UNIVERSAL,type:Mi.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Mi.Class.UNIVERSAL,type:Mi.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Mi.Class.UNIVERSAL,type:Mi.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};a9.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Mi.Class.UNIVERSAL,type:Mi.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Mi.Class.UNIVERSAL,type:Mi.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Mi.Class.UNIVERSAL,type:Mi.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Mi.Class.UNIVERSAL,type:Mi.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var g9=p((K9t,gN)=>{l();var Yi=ft();y2();Ku();r4();Qt();var sN=nN(),ATe=sN.publicKeyValidator,ITe=sN.privateKeyValidator;typeof oN=="undefined"&&(oN=Yi.jsbn.BigInteger);var oN,c9=Yi.util.ByteBuffer,jn=typeof Buffer=="undefined"?Uint8Array:Buffer;Yi.pki=Yi.pki||{};gN.exports=Yi.pki.ed25519=Yi.ed25519=Yi.ed25519||{};var vt=Yi.ed25519;vt.constants={};vt.constants.PUBLIC_KEY_BYTE_LENGTH=32;vt.constants.PRIVATE_KEY_BYTE_LENGTH=64;vt.constants.SEED_BYTE_LENGTH=32;vt.constants.SIGN_BYTE_LENGTH=64;vt.constants.HASH_BYTE_LENGTH=64;vt.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=Yi.random.getBytesSync(vt.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==vt.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+vt.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=Bc({message:e,encoding:"binary"});for(var r=new jn(vt.constants.PUBLIC_KEY_BYTE_LENGTH),i=new jn(vt.constants.PRIVATE_KEY_BYTE_LENGTH),n=0;n<32;++n)i[n]=e[n];return CTe(r,i),{publicKey:r,privateKey:i}};vt.privateKeyFromAsn1=function(t){var e={},r=[],i=Yi.asn1.validate(t,ITe,e,r);if(!i){var n=new Error("Invalid Key.");throw n.errors=r,n}var s=Yi.asn1.derToOid(e.privateKeyOid),o=Yi.oids.EdDSA25519;if(s!==o)throw new Error('Invalid OID "'+s+'"; OID must be "'+o+'".');var a=e.privateKey,c=Bc({message:Yi.asn1.fromDer(a).value,encoding:"binary"});return{privateKeyBytes:c}};vt.publicKeyFromAsn1=function(t){var e={},r=[],i=Yi.asn1.validate(t,ATe,e,r);if(!i){var n=new Error("Invalid Key.");throw n.errors=r,n}var s=Yi.asn1.derToOid(e.publicKeyOid),o=Yi.oids.EdDSA25519;if(s!==o)throw new Error('Invalid OID "'+s+'"; OID must be "'+o+'".');var a=e.ed25519PublicKey;if(a.length!==vt.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Bc({message:a,encoding:"binary"})};vt.publicKeyFromPrivateKey=function(t){t=t||{};var e=Bc({message:t.privateKey,encoding:"binary"});if(e.length!==vt.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+vt.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new jn(vt.constants.PUBLIC_KEY_BYTE_LENGTH),i=0;i<r.length;++i)r[i]=e[32+i];return r};vt.sign=function(t){t=t||{};var e=Bc(t),r=Bc({message:t.privateKey,encoding:"binary"});if(r.length===vt.constants.SEED_BYTE_LENGTH){var i=vt.generateKeyPair({seed:r});r=i.privateKey}else if(r.length!==vt.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+vt.constants.SEED_BYTE_LENGTH+" or "+vt.constants.PRIVATE_KEY_BYTE_LENGTH);var n=new jn(vt.constants.SIGN_BYTE_LENGTH+e.length);OTe(n,e,e.length,r);for(var s=new jn(vt.constants.SIGN_BYTE_LENGTH),o=0;o<s.length;++o)s[o]=n[o];return s};vt.verify=function(t){t=t||{};var e=Bc(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=Bc({message:t.signature,encoding:"binary"});if(r.length!==vt.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+vt.constants.SIGN_BYTE_LENGTH);var i=Bc({message:t.publicKey,encoding:"binary"});if(i.length!==vt.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+vt.constants.PUBLIC_KEY_BYTE_LENGTH);var n=new jn(vt.constants.SIGN_BYTE_LENGTH+e.length),s=new jn(vt.constants.SIGN_BYTE_LENGTH+e.length),o;for(o=0;o<vt.constants.SIGN_BYTE_LENGTH;++o)n[o]=r[o];for(o=0;o<e.length;++o)n[o+vt.constants.SIGN_BYTE_LENGTH]=e[o];return kTe(s,n,n.length,i)>=0};function Bc(t){var e=t.message;if(e instanceof Uint8Array||e instanceof jn)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer!="undefined")return Buffer.from(e,r);e=new c9(e,r)}else if(!(e instanceof c9))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var i=new jn(e.length()),n=0;n<i.length;++n)i[n]=e.at(n);return i}var u9=Ye(),i4=Ye([1]),TTe=Ye([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),RTe=Ye([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),aN=Ye([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),cN=Ye([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),f9=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),PTe=Ye([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function _2(t,e){var r=Yi.md.sha512.create(),i=new c9(t);r.update(i.getBytes(e),"binary");var n=r.digest().getBytes();if(typeof Buffer!="undefined")return Buffer.from(n,"binary");for(var s=new jn(vt.constants.HASH_BYTE_LENGTH),o=0;o<64;++o)s[o]=n.charCodeAt(o);return s}function CTe(t,e){var r=[Ye(),Ye(),Ye(),Ye()],i,n=_2(e,32);for(n[0]&=248,n[31]&=127,n[31]|=64,p9(r,n),h9(t,r),i=0;i<32;++i)e[i+32]=t[i];return 0}function OTe(t,e,r,i){var n,s,o=new Float64Array(64),a=[Ye(),Ye(),Ye(),Ye()],c=_2(i,32);c[0]&=248,c[31]&=127,c[31]|=64;var u=r+64;for(n=0;n<r;++n)t[64+n]=e[n];for(n=0;n<32;++n)t[32+n]=c[32+n];var f=_2(t.subarray(32),r+32);for(l9(f),p9(a,f),h9(t,a),n=32;n<64;++n)t[n]=i[n];var d=_2(t,r+64);for(l9(d),n=32;n<64;++n)o[n]=0;for(n=0;n<32;++n)o[n]=f[n];for(n=0;n<32;++n)for(s=0;s<32;s++)o[n+s]+=d[n]*c[s];return uN(t.subarray(32),o),u}function kTe(t,e,r,i){var n,s,o=new jn(32),a=[Ye(),Ye(),Ye(),Ye()],c=[Ye(),Ye(),Ye(),Ye()];if(s=-1,r<64||qTe(c,i))return-1;for(n=0;n<r;++n)t[n]=e[n];for(n=0;n<32;++n)t[n+32]=i[n];var u=_2(t,r);if(l9(u),pN(a,c,u),p9(c,e.subarray(32)),d9(a,c),h9(o,a),r-=64,dN(e,0,o,0)){for(n=0;n<r;++n)t[n]=0;return-1}for(n=0;n<r;++n)t[n]=e[n+64];return s=r,s}function uN(t,e){var r,i,n,s;for(i=63;i>=32;--i){for(r=0,n=i-32,s=i-12;n<s;++n)e[n]+=r-16*e[i]*f9[n-(i-32)],r=e[n]+128>>8,e[n]-=r*256;e[n]+=r,e[i]=0}for(r=0,n=0;n<32;++n)e[n]+=r-(e[31]>>4)*f9[n],r=e[n]>>8,e[n]&=255;for(n=0;n<32;++n)e[n]-=r*f9[n];for(i=0;i<32;++i)e[i+1]+=e[i]>>8,t[i]=e[i]&255}function l9(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;uN(t,e)}function d9(t,e){var r=Ye(),i=Ye(),n=Ye(),s=Ye(),o=Ye(),a=Ye(),c=Ye(),u=Ye(),f=Ye();Ih(r,t[1],t[0]),Ih(f,e[1],e[0]),Zt(r,r,f),Ah(i,t[0],t[1]),Ah(f,e[0],e[1]),Zt(i,i,f),Zt(n,t[3],e[3]),Zt(n,n,RTe),Zt(s,t[2],e[2]),Ah(s,s,s),Ih(o,i,r),Ih(a,s,n),Ah(c,s,n),Ah(u,i,r),Zt(t[0],o,a),Zt(t[1],u,c),Zt(t[2],c,a),Zt(t[3],o,u)}function fN(t,e,r){for(var i=0;i<4;++i)yN(t[i],e[i],r)}function h9(t,e){var r=Ye(),i=Ye(),n=Ye();MTe(n,e[2]),Zt(r,e[0],n),Zt(i,e[1],n),n4(t,i),t[31]^=hN(r)<<7}function n4(t,e){var r,i,n,s=Ye(),o=Ye();for(r=0;r<16;++r)o[r]=e[r];for(y9(o),y9(o),y9(o),i=0;i<2;++i){for(s[0]=o[0]-65517,r=1;r<15;++r)s[r]=o[r]-65535-(s[r-1]>>16&1),s[r-1]&=65535;s[15]=o[15]-32767-(s[14]>>16&1),n=s[15]>>16&1,s[14]&=65535,yN(o,s,1-n)}for(r=0;r<16;r++)t[2*r]=o[r]&255,t[2*r+1]=o[r]>>8}function qTe(t,e){var r=Ye(),i=Ye(),n=Ye(),s=Ye(),o=Ye(),a=Ye(),c=Ye();return Hu(t[2],i4),DTe(t[1],e),ml(n,t[1]),Zt(s,n,TTe),Ih(n,n,t[2]),Ah(s,t[2],s),ml(o,s),ml(a,o),Zt(c,a,o),Zt(r,c,n),Zt(r,r,s),NTe(r,r),Zt(r,r,n),Zt(r,r,s),Zt(r,r,s),Zt(t[0],r,s),ml(i,t[0]),Zt(i,i,s),lN(i,n)&&Zt(t[0],t[0],PTe),ml(i,t[0]),Zt(i,i,s),lN(i,n)?-1:(hN(t[0])===e[31]>>7&&Ih(t[0],u9,t[0]),Zt(t[3],t[0],t[1]),0)}function DTe(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function NTe(t,e){var r=Ye(),i;for(i=0;i<16;++i)r[i]=e[i];for(i=250;i>=0;--i)ml(r,r),i!==1&&Zt(r,r,e);for(i=0;i<16;++i)t[i]=r[i]}function lN(t,e){var r=new jn(32),i=new jn(32);return n4(r,t),n4(i,e),dN(r,0,i,0)}function dN(t,e,r,i){return BTe(t,e,r,i,32)}function BTe(t,e,r,i,n){var s,o=0;for(s=0;s<n;++s)o|=t[e+s]^r[i+s];return(1&o-1>>>8)-1}function hN(t){var e=new jn(32);return n4(e,t),e[0]&1}function pN(t,e,r){var i,n;for(Hu(t[0],u9),Hu(t[1],i4),Hu(t[2],i4),Hu(t[3],u9),n=255;n>=0;--n)i=r[n/8|0]>>(n&7)&1,fN(t,e,i),d9(e,t),d9(t,t),fN(t,e,i)}function p9(t,e){var r=[Ye(),Ye(),Ye(),Ye()];Hu(r[0],aN),Hu(r[1],cN),Hu(r[2],i4),Zt(r[3],aN,cN),pN(t,r,e)}function Hu(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}function MTe(t,e){var r=Ye(),i;for(i=0;i<16;++i)r[i]=e[i];for(i=253;i>=0;--i)ml(r,r),i!==2&&i!==4&&Zt(r,r,e);for(i=0;i<16;++i)t[i]=r[i]}function y9(t){var e,r,i=1;for(e=0;e<16;++e)r=t[e]+i+65535,i=Math.floor(r/65536),t[e]=r-i*65536;t[0]+=i-1+37*(i-1)}function yN(t,e,r){for(var i,n=~(r-1),s=0;s<16;++s)i=n&(t[s]^e[s]),t[s]^=i,e[s]^=i}function Ye(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function Ah(t,e,r){for(var i=0;i<16;++i)t[i]=e[i]+r[i]}function Ih(t,e,r){for(var i=0;i<16;++i)t[i]=e[i]-r[i]}function ml(t,e){Zt(t,e,e)}function Zt(t,e,r){var i,n,s=0,o=0,a=0,c=0,u=0,f=0,d=0,h=0,y=0,g=0,m=0,E=0,v=0,A=0,R=0,F=0,q=0,D=0,z=0,G=0,Y=0,P=0,b=0,w=0,S=0,C=0,B=0,W=0,K=0,M=0,_=0,L=r[0],ae=r[1],X=r[2],ne=r[3],oe=r[4],de=r[5],he=r[6],we=r[7],k=r[8],j=r[9],$=r[10],Z=r[11],I=r[12],U=r[13],V=r[14],N=r[15];i=e[0],s+=i*L,o+=i*ae,a+=i*X,c+=i*ne,u+=i*oe,f+=i*de,d+=i*he,h+=i*we,y+=i*k,g+=i*j,m+=i*$,E+=i*Z,v+=i*I,A+=i*U,R+=i*V,F+=i*N,i=e[1],o+=i*L,a+=i*ae,c+=i*X,u+=i*ne,f+=i*oe,d+=i*de,h+=i*he,y+=i*we,g+=i*k,m+=i*j,E+=i*$,v+=i*Z,A+=i*I,R+=i*U,F+=i*V,q+=i*N,i=e[2],a+=i*L,c+=i*ae,u+=i*X,f+=i*ne,d+=i*oe,h+=i*de,y+=i*he,g+=i*we,m+=i*k,E+=i*j,v+=i*$,A+=i*Z,R+=i*I,F+=i*U,q+=i*V,D+=i*N,i=e[3],c+=i*L,u+=i*ae,f+=i*X,d+=i*ne,h+=i*oe,y+=i*de,g+=i*he,m+=i*we,E+=i*k,v+=i*j,A+=i*$,R+=i*Z,F+=i*I,q+=i*U,D+=i*V,z+=i*N,i=e[4],u+=i*L,f+=i*ae,d+=i*X,h+=i*ne,y+=i*oe,g+=i*de,m+=i*he,E+=i*we,v+=i*k,A+=i*j,R+=i*$,F+=i*Z,q+=i*I,D+=i*U,z+=i*V,G+=i*N,i=e[5],f+=i*L,d+=i*ae,h+=i*X,y+=i*ne,g+=i*oe,m+=i*de,E+=i*he,v+=i*we,A+=i*k,R+=i*j,F+=i*$,q+=i*Z,D+=i*I,z+=i*U,G+=i*V,Y+=i*N,i=e[6],d+=i*L,h+=i*ae,y+=i*X,g+=i*ne,m+=i*oe,E+=i*de,v+=i*he,A+=i*we,R+=i*k,F+=i*j,q+=i*$,D+=i*Z,z+=i*I,G+=i*U,Y+=i*V,P+=i*N,i=e[7],h+=i*L,y+=i*ae,g+=i*X,m+=i*ne,E+=i*oe,v+=i*de,A+=i*he,R+=i*we,F+=i*k,q+=i*j,D+=i*$,z+=i*Z,G+=i*I,Y+=i*U,P+=i*V,b+=i*N,i=e[8],y+=i*L,g+=i*ae,m+=i*X,E+=i*ne,v+=i*oe,A+=i*de,R+=i*he,F+=i*we,q+=i*k,D+=i*j,z+=i*$,G+=i*Z,Y+=i*I,P+=i*U,b+=i*V,w+=i*N,i=e[9],g+=i*L,m+=i*ae,E+=i*X,v+=i*ne,A+=i*oe,R+=i*de,F+=i*he,q+=i*we,D+=i*k,z+=i*j,G+=i*$,Y+=i*Z,P+=i*I,b+=i*U,w+=i*V,S+=i*N,i=e[10],m+=i*L,E+=i*ae,v+=i*X,A+=i*ne,R+=i*oe,F+=i*de,q+=i*he,D+=i*we,z+=i*k,G+=i*j,Y+=i*$,P+=i*Z,b+=i*I,w+=i*U,S+=i*V,C+=i*N,i=e[11],E+=i*L,v+=i*ae,A+=i*X,R+=i*ne,F+=i*oe,q+=i*de,D+=i*he,z+=i*we,G+=i*k,Y+=i*j,P+=i*$,b+=i*Z,w+=i*I,S+=i*U,C+=i*V,B+=i*N,i=e[12],v+=i*L,A+=i*ae,R+=i*X,F+=i*ne,q+=i*oe,D+=i*de,z+=i*he,G+=i*we,Y+=i*k,P+=i*j,b+=i*$,w+=i*Z,S+=i*I,C+=i*U,B+=i*V,W+=i*N,i=e[13],A+=i*L,R+=i*ae,F+=i*X,q+=i*ne,D+=i*oe,z+=i*de,G+=i*he,Y+=i*we,P+=i*k,b+=i*j,w+=i*$,S+=i*Z,C+=i*I,B+=i*U,W+=i*V,K+=i*N,i=e[14],R+=i*L,F+=i*ae,q+=i*X,D+=i*ne,z+=i*oe,G+=i*de,Y+=i*he,P+=i*we,b+=i*k,w+=i*j,S+=i*$,C+=i*Z,B+=i*I,W+=i*U,K+=i*V,M+=i*N,i=e[15],F+=i*L,q+=i*ae,D+=i*X,z+=i*ne,G+=i*oe,Y+=i*de,P+=i*he,b+=i*we,w+=i*k,S+=i*j,C+=i*$,B+=i*Z,W+=i*I,K+=i*U,M+=i*V,_+=i*N,s+=38*q,o+=38*D,a+=38*z,c+=38*G,u+=38*Y,f+=38*P,d+=38*b,h+=38*w,y+=38*S,g+=38*C,m+=38*B,E+=38*W,v+=38*K,A+=38*M,R+=38*_,n=1,i=s+n+65535,n=Math.floor(i/65536),s=i-n*65536,i=o+n+65535,n=Math.floor(i/65536),o=i-n*65536,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=c+n+65535,n=Math.floor(i/65536),c=i-n*65536,i=u+n+65535,n=Math.floor(i/65536),u=i-n*65536,i=f+n+65535,n=Math.floor(i/65536),f=i-n*65536,i=d+n+65535,n=Math.floor(i/65536),d=i-n*65536,i=h+n+65535,n=Math.floor(i/65536),h=i-n*65536,i=y+n+65535,n=Math.floor(i/65536),y=i-n*65536,i=g+n+65535,n=Math.floor(i/65536),g=i-n*65536,i=m+n+65535,n=Math.floor(i/65536),m=i-n*65536,i=E+n+65535,n=Math.floor(i/65536),E=i-n*65536,i=v+n+65535,n=Math.floor(i/65536),v=i-n*65536,i=A+n+65535,n=Math.floor(i/65536),A=i-n*65536,i=R+n+65535,n=Math.floor(i/65536),R=i-n*65536,i=F+n+65535,n=Math.floor(i/65536),F=i-n*65536,s+=n-1+37*(n-1),n=1,i=s+n+65535,n=Math.floor(i/65536),s=i-n*65536,i=o+n+65535,n=Math.floor(i/65536),o=i-n*65536,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=c+n+65535,n=Math.floor(i/65536),c=i-n*65536,i=u+n+65535,n=Math.floor(i/65536),u=i-n*65536,i=f+n+65535,n=Math.floor(i/65536),f=i-n*65536,i=d+n+65535,n=Math.floor(i/65536),d=i-n*65536,i=h+n+65535,n=Math.floor(i/65536),h=i-n*65536,i=y+n+65535,n=Math.floor(i/65536),y=i-n*65536,i=g+n+65535,n=Math.floor(i/65536),g=i-n*65536,i=m+n+65535,n=Math.floor(i/65536),m=i-n*65536,i=E+n+65535,n=Math.floor(i/65536),E=i-n*65536,i=v+n+65535,n=Math.floor(i/65536),v=i-n*65536,i=A+n+65535,n=Math.floor(i/65536),A=i-n*65536,i=R+n+65535,n=Math.floor(i/65536),R=i-n*65536,i=F+n+65535,n=Math.floor(i/65536),F=i-n*65536,s+=n-1+37*(n-1),t[0]=s,t[1]=o,t[2]=a,t[3]=c,t[4]=u,t[5]=f,t[6]=d,t[7]=h,t[8]=y,t[9]=g,t[10]=m,t[11]=E,t[12]=v,t[13]=A,t[14]=R,t[15]=F}});var mN=p((V9t,bN)=>{l();"use strict";var s4=65536;function LTe(t){let e=new Uint8Array(t),r=0;if(t>0)if(t>s4)for(;r<t;)r+s4>t?(crypto.getRandomValues(e.subarray(r,r+(t-r))),r+=t-r):(crypto.getRandomValues(e.subarray(r,r+s4)),r+=s4);else crypto.getRandomValues(e);return e}bN.exports=LTe});var E2=p((z9t,vN)=>{l();"use strict";var UTe=mN(),FTe=_o();vN.exports=function(t){if(isNaN(t)||t<=0)throw FTe(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return UTe(t)}});var o4=p(S2=>{l();"use strict";Qt();y2();var jTe=ft(),{fromString:KTe}=(ut(),lt),{toString:wN}=(et(),Je),{concat:_N}=(fn(),un);S2.bigIntegerToUintBase64url=(t,e)=>{let r=Uint8Array.from(t.abs().toByteArray());if(r=r[0]===0?r.slice(1):r,e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=_N([new Uint8Array(e-r.length),r])}return wN(r,"base64url")};S2.base64urlToBigInteger=t=>{let e=S2.base64urlToBuffer(t);return new jTe.jsbn.BigInteger(wN(e,"base16"),16)};S2.base64urlToBuffer=(t,e)=>{let r=KTe(t,"base64urlpad");if(e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=_N([new Uint8Array(e-r.length),r])}return r}});var xN=p(x2=>{l();"use strict";Tc();g2();var $u=ft(),{bigIntegerToUintBase64url:xa,base64urlToBigInteger:Aa}=o4(),{fromString:EN}=(ut(),lt),{toString:SN}=(et(),Je);x2.pkcs1ToJwk=function(t){let e=$u.asn1.fromDer(SN(t,"ascii")),r=$u.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:xa(r.n),e:xa(r.e),d:xa(r.d),p:xa(r.p),q:xa(r.q),dp:xa(r.dP),dq:xa(r.dQ),qi:xa(r.qInv),alg:"RS256",kid:"2011-04-29"}};x2.jwkToPkcs1=function(t){let e=$u.pki.privateKeyToAsn1({n:Aa(t.n),e:Aa(t.e),d:Aa(t.d),p:Aa(t.p),q:Aa(t.q),dP:Aa(t.dp),dQ:Aa(t.dq),qInv:Aa(t.qi)});return EN($u.asn1.toDer(e).getBytes(),"ascii")};x2.pkixToJwk=function(t){let e=$u.asn1.fromDer(SN(t,"ascii")),r=$u.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:xa(r.n),e:xa(r.e),alg:"RS256",kid:"2011-04-29"}};x2.jwkToPkix=function(t){let e=$u.pki.publicKeyToAsn1({n:Aa(t.n),e:Aa(t.e)});return EN($u.asn1.toDer(e).getBytes(),"ascii")}});var RN=p((G9t,TN)=>{l();"use strict";g2();var AN=ft(),{base64urlToBigInteger:VTe}=o4();function IN(t,e){return e.map(r=>VTe(t[r]))}function zTe(t){return AN.pki.setRsaPrivateKey(...IN(t,["n","e","d","p","q","dp","dq","qi"]))}function HTe(t){return AN.pki.setRsaPublicKey(...IN(t,["n","e"]))}TN.exports={jwk2pub:HTe,jwk2priv:zTe}});var ON=p(Lc=>{l();"use strict";var Mc=v2(),$Te=E2(),{toString:GTe}=(et(),Je),{fromString:WTe}=(ut(),lt);Lc.utils=xN();Lc.generateKey=async function(t){let e=await Mc.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await PN(e);return{privateKey:r[0],publicKey:r[1]}};Lc.unmarshalPrivateKey=async function(t){let r=[await Mc.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await YTe(t)],i=await PN({privateKey:r[0],publicKey:r[1]});return{privateKey:i[0],publicKey:i[1]}};Lc.getRandomValues=$Te;Lc.hashAndSign=async function(t,e){let r=await Mc.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),i=await Mc.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(i,i.byteOffset,i.byteLength)};Lc.hashAndVerify=async function(t,e,r){let i=await Mc.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return Mc.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},i,e,r)};function PN(t){return Promise.all([Mc.get().subtle.exportKey("jwk",t.privateKey),Mc.get().subtle.exportKey("jwk",t.publicKey)])}function YTe(t){return Mc.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}var{jwk2pub:XTe,jwk2priv:QTe}=RN();function CN(t,e,r,i){let n=e?XTe(t):QTe(t),s=GTe(Uint8Array.from(r),"ascii"),o=i(s,n);return WTe(o,"ascii")}Lc.encrypt=function(t,e){return CN(t,!0,e,(r,i)=>i.encrypt(r))};Lc.decrypt=function(t,e){return CN(t,!1,e,(r,i)=>i.decrypt(r))}});var a4=p((Y9t,kN)=>{l();"use strict";var{base64:ZTe}=(a2(),ph),JTe=n9();kN.exports={export:async function(t,e){let i=await JTe.create().encrypt(t,e);return ZTe.encode(i)}}});var MN=p((X9t,BN)=>{l();"use strict";var{sha256:qN}=(ii(),fi),DN=_o(),{equals:NN}=(di(),li),{toString:eRe}=(et(),Je);r4();g9();var c4=ft(),ks=ON(),u4=D6(),tRe=a4(),f4=class{constructor(e){this._key=e}async verify(e,r){return ks.hashAndVerify(this._key,r,e)}marshal(){return ks.utils.jwkToPkix(this._key)}get bytes(){return u4.PublicKey.encode({Type:u4.KeyType.RSA,Data:this.marshal()}).finish()}encrypt(e){return ks.encrypt(this._key,e)}equals(e){return NN(this.bytes,e.bytes)}async hash(){let{bytes:e}=await qN.digest(this.bytes);return e}},A2=class{constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return ks.getRandomValues(16)}async sign(e){return ks.hashAndSign(this._key,e)}get public(){if(!this._publicKey)throw DN(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new f4(this._publicKey)}decrypt(e){return ks.decrypt(this._key,e)}marshal(){return ks.utils.jwkToPkcs1(this._key)}get bytes(){return u4.PrivateKey.encode({Type:u4.KeyType.RSA,Data:this.marshal()}).finish()}equals(e){return NN(this.bytes,e.bytes)}async hash(){let{bytes:e}=await qN.digest(this.bytes);return e}async id(){let e=await this.public.hash();return eRe(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8"){let i=new c4.util.ByteBuffer(this.marshal()),n=c4.asn1.fromDer(i),s=c4.pki.privateKeyFromAsn1(n),o={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return c4.pki.encryptRsaPrivateKey(s,e,o)}else{if(r==="libp2p-key")return tRe.export(this.bytes,e);throw DN(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}};async function rRe(t){let e=ks.utils.pkcs1ToJwk(t),r=await ks.unmarshalPrivateKey(e);return new A2(r.privateKey,r.publicKey)}function iRe(t){let e=ks.utils.pkixToJwk(t);return new f4(e)}async function nRe(t){let e=await ks.unmarshalPrivateKey(t);return new A2(e.privateKey,e.publicKey)}async function sRe(t){let e=await ks.generateKey(t);return new A2(e.privateKey,e.publicKey)}BN.exports={RsaPublicKey:f4,RsaPrivateKey:A2,unmarshalRsaPublicKey:iRe,unmarshalRsaPrivateKey:rRe,generateKeyPair:sRe,fromJwk:nRe}});var LN=p(vl=>{l();"use strict";g9();var Th=ft();vl.publicKeyLength=Th.pki.ed25519.constants.PUBLIC_KEY_BYTE_LENGTH;vl.privateKeyLength=Th.pki.ed25519.constants.PRIVATE_KEY_BYTE_LENGTH;vl.generateKey=async function(){return Th.pki.ed25519.generateKeyPair()};vl.generateKeyFromSeed=async function(t){return Th.pki.ed25519.generateKeyPair({seed:t})};vl.hashAndSign=async function(t,e){return Th.pki.ed25519.sign({message:e,privateKey:t})};vl.hashAndVerify=async function(t,e,r){return Th.pki.ed25519.verify({signature:e,message:r,publicKey:t})}});var VN=p((Z9t,KN)=>{l();"use strict";var UN=_o(),{equals:FN}=(di(),li),{sha256:jN}=(ii(),fi),{base58btc:oRe}=(ti(),ei),{identity:aRe}=(qc(),kc),ln=LN(),l4=D6(),cRe=a4(),d4=class{constructor(e){this._key=Ph(e,ln.publicKeyLength)}async verify(e,r){return ln.hashAndVerify(this._key,r,e)}marshal(){return this._key}get bytes(){return l4.PublicKey.encode({Type:l4.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return FN(this.bytes,e.bytes)}async hash(){let{bytes:e}=await jN.digest(this.bytes);return e}},Rh=class{constructor(e,r){this._key=Ph(e,ln.privateKeyLength),this._publicKey=Ph(r,ln.publicKeyLength)}async sign(e){return ln.hashAndSign(this._key,e)}get public(){return new d4(this._publicKey)}marshal(){return this._key}get bytes(){return l4.PrivateKey.encode({Type:l4.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return FN(this.bytes,e.bytes)}async hash(){let{bytes:e}=await jN.digest(this.bytes);return e}async id(){let e=await aRe.digest(this.public.bytes);return oRe.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return cRe.export(this.bytes,e);throw UN(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function uRe(t){if(t.length>ln.privateKeyLength){t=Ph(t,ln.privateKeyLength+ln.publicKeyLength);let i=t.slice(0,ln.privateKeyLength),n=t.slice(ln.privateKeyLength,t.length);return new Rh(i,n)}t=Ph(t,ln.privateKeyLength);let e=t.slice(0,ln.privateKeyLength),r=t.slice(ln.publicKeyLength);return new Rh(e,r)}function fRe(t){return t=Ph(t,ln.publicKeyLength),new d4(t)}async function lRe(){let{privateKey:t,publicKey:e}=await ln.generateKey();return new Rh(t,e)}async function dRe(t){let{privateKey:e,publicKey:r}=await ln.generateKeyFromSeed(t);return new Rh(e,r)}function Ph(t,e){if(t=Uint8Array.from(t||[]),t.length!==e)throw UN(new Error(`Key must be a Uint8Array of length ${e}, got ${t.length}`),"ERR_INVALID_KEY_TYPE");return t}KN.exports={Ed25519PublicKey:d4,Ed25519PrivateKey:Rh,unmarshalEd25519PrivateKey:uRe,unmarshalEd25519PublicKey:fRe,generateKeyPair:lRe,generateKeyPairFromSeed:dRe}});var HN=p((J9t,zN)=>{l();var Bt={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function qs(t,e){if(!t)throw new Error(e)}function Ct(t,e,r){if(qs(e instanceof Uint8Array,`Expected ${t} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){let i=r.join(", "),n=`Expected ${t} to be an Uint8Array with length [${i}]`;qs(r.includes(e.length),n)}else{let i=`Expected ${t} to be an Uint8Array with length ${r}`;qs(e.length===r,i)}}function wl(t){qs(Ch(t)==="Boolean","Expected compressed to be a Boolean")}function So(t=r=>new Uint8Array(r),e){return typeof t=="function"&&(t=t(e)),Ct("output",t,e),t}function Ch(t){return Object.prototype.toString.call(t).slice(8,-1)}zN.exports=t=>({contextRandomize(e){switch(qs(e===null||e instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),e!==null&&Ct("seed",e,32),t.contextRandomize(e)){case 1:throw new Error(Bt.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(e){return Ct("private key",e,32),t.privateKeyVerify(e)===0},privateKeyNegate(e){switch(Ct("private key",e,32),t.privateKeyNegate(e)){case 0:return e;case 1:throw new Error(Bt.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(e,r){switch(Ct("private key",e,32),Ct("tweak",r,32),t.privateKeyTweakAdd(e,r)){case 0:return e;case 1:throw new Error(Bt.TWEAK_ADD)}},privateKeyTweakMul(e,r){switch(Ct("private key",e,32),Ct("tweak",r,32),t.privateKeyTweakMul(e,r)){case 0:return e;case 1:throw new Error(Bt.TWEAK_MUL)}},publicKeyVerify(e){return Ct("public key",e,[33,65]),t.publicKeyVerify(e)===0},publicKeyCreate(e,r=!0,i){switch(Ct("private key",e,32),wl(r),i=So(i,r?33:65),t.publicKeyCreate(i,e)){case 0:return i;case 1:throw new Error(Bt.SECKEY_INVALID);case 2:throw new Error(Bt.PUBKEY_SERIALIZE)}},publicKeyConvert(e,r=!0,i){switch(Ct("public key",e,[33,65]),wl(r),i=So(i,r?33:65),t.publicKeyConvert(i,e)){case 0:return i;case 1:throw new Error(Bt.PUBKEY_PARSE);case 2:throw new Error(Bt.PUBKEY_SERIALIZE)}},publicKeyNegate(e,r=!0,i){switch(Ct("public key",e,[33,65]),wl(r),i=So(i,r?33:65),t.publicKeyNegate(i,e)){case 0:return i;case 1:throw new Error(Bt.PUBKEY_PARSE);case 2:throw new Error(Bt.IMPOSSIBLE_CASE);case 3:throw new Error(Bt.PUBKEY_SERIALIZE)}},publicKeyCombine(e,r=!0,i){qs(Array.isArray(e),"Expected public keys to be an Array"),qs(e.length>0,"Expected public keys array will have more than zero items");for(let n of e)Ct("public key",n,[33,65]);switch(wl(r),i=So(i,r?33:65),t.publicKeyCombine(i,e)){case 0:return i;case 1:throw new Error(Bt.PUBKEY_PARSE);case 2:throw new Error(Bt.PUBKEY_COMBINE);case 3:throw new Error(Bt.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(e,r,i=!0,n){switch(Ct("public key",e,[33,65]),Ct("tweak",r,32),wl(i),n=So(n,i?33:65),t.publicKeyTweakAdd(n,e,r)){case 0:return n;case 1:throw new Error(Bt.PUBKEY_PARSE);case 2:throw new Error(Bt.TWEAK_ADD)}},publicKeyTweakMul(e,r,i=!0,n){switch(Ct("public key",e,[33,65]),Ct("tweak",r,32),wl(i),n=So(n,i?33:65),t.publicKeyTweakMul(n,e,r)){case 0:return n;case 1:throw new Error(Bt.PUBKEY_PARSE);case 2:throw new Error(Bt.TWEAK_MUL)}},signatureNormalize(e){switch(Ct("signature",e,64),t.signatureNormalize(e)){case 0:return e;case 1:throw new Error(Bt.SIG_PARSE)}},signatureExport(e,r){Ct("signature",e,64),r=So(r,72);let i={output:r,outputlen:72};switch(t.signatureExport(i,e)){case 0:return r.slice(0,i.outputlen);case 1:throw new Error(Bt.SIG_PARSE);case 2:throw new Error(Bt.IMPOSSIBLE_CASE)}},signatureImport(e,r){switch(Ct("signature",e),r=So(r,64),t.signatureImport(r,e)){case 0:return r;case 1:throw new Error(Bt.SIG_PARSE);case 2:throw new Error(Bt.IMPOSSIBLE_CASE)}},ecdsaSign(e,r,i={},n){Ct("message",e,32),Ct("private key",r,32),qs(Ch(i)==="Object","Expected options to be an Object"),i.data!==void 0&&Ct("options.data",i.data),i.noncefn!==void 0&&qs(Ch(i.noncefn)==="Function","Expected options.noncefn to be a Function"),n=So(n,64);let s={signature:n,recid:null};switch(t.ecdsaSign(s,e,r,i.data,i.noncefn)){case 0:return s;case 1:throw new Error(Bt.SIGN);case 2:throw new Error(Bt.IMPOSSIBLE_CASE)}},ecdsaVerify(e,r,i){switch(Ct("signature",e,64),Ct("message",r,32),Ct("public key",i,[33,65]),t.ecdsaVerify(e,r,i)){case 0:return!0;case 3:return!1;case 1:throw new Error(Bt.SIG_PARSE);case 2:throw new Error(Bt.PUBKEY_PARSE)}},ecdsaRecover(e,r,i,n=!0,s){switch(Ct("signature",e,64),qs(Ch(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),Ct("message",i,32),wl(n),s=So(s,n?33:65),t.ecdsaRecover(s,e,r,i)){case 0:return s;case 1:throw new Error(Bt.SIG_PARSE);case 2:throw new Error(Bt.RECOVER);case 3:throw new Error(Bt.IMPOSSIBLE_CASE)}},ecdh(e,r,i={},n){switch(Ct("public key",e,[33,65]),Ct("private key",r,32),qs(Ch(i)==="Object","Expected options to be an Object"),i.data!==void 0&&Ct("options.data",i.data),i.hashfn!==void 0?(qs(Ch(i.hashfn)==="Function","Expected options.hashfn to be a Function"),i.xbuf!==void 0&&Ct("options.xbuf",i.xbuf,32),i.ybuf!==void 0&&Ct("options.ybuf",i.ybuf,32),Ct("output",n)):n=So(n,32),t.ecdh(n,e,r,i.data,i.hashfn,i.xbuf,i.ybuf)){case 0:return n;case 1:throw new Error(Bt.PUBKEY_PARSE);case 2:throw new Error(Bt.ECDH)}}})});var $N=p((e_t,hRe)=>{hRe.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}});var GN=p(()=>{l()});var Ia=p((WN,b9)=>{l();(function(t,e){"use strict";function r(P,b){if(!P)throw new Error(b||"Assertion failed")}function i(P,b){P.super_=b;var w=function(){};w.prototype=b.prototype,P.prototype=new w,P.prototype.constructor=P}function n(P,b,w){if(n.isBN(P))return P;this.negative=0,this.words=null,this.length=0,this.red=null,P!==null&&((b==="le"||b==="be")&&(w=b,b=10),this._init(P||0,b||10,w||"be"))}typeof t=="object"?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;var s;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?s=window.Buffer:s=GN().Buffer}catch(P){}n.isBN=function(b){return b instanceof n?!0:b!==null&&typeof b=="object"&&b.constructor.wordSize===n.wordSize&&Array.isArray(b.words)},n.max=function(b,w){return b.cmp(w)>0?b:w},n.min=function(b,w){return b.cmp(w)<0?b:w},n.prototype._init=function(b,w,S){if(typeof b=="number")return this._initNumber(b,w,S);if(typeof b=="object")return this._initArray(b,w,S);w==="hex"&&(w=16),r(w===(w|0)&&w>=2&&w<=36),b=b.toString().replace(/\s+/g,"");var C=0;b[0]==="-"&&(C++,this.negative=1),C<b.length&&(w===16?this._parseHex(b,C,S):(this._parseBase(b,w,C),S==="le"&&this._initArray(this.toArray(),w,S)))},n.prototype._initNumber=function(b,w,S){b<0&&(this.negative=1,b=-b),b<67108864?(this.words=[b&67108863],this.length=1):b<4503599627370496?(this.words=[b&67108863,b/67108864&67108863],this.length=2):(r(b<9007199254740992),this.words=[b&67108863,b/67108864&67108863,1],this.length=3),S==="le"&&this._initArray(this.toArray(),w,S)},n.prototype._initArray=function(b,w,S){if(r(typeof b.length=="number"),b.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(b.length/3),this.words=new Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var B,W,K=0;if(S==="be")for(C=b.length-1,B=0;C>=0;C-=3)W=b[C]|b[C-1]<<8|b[C-2]<<16,this.words[B]|=W<<K&67108863,this.words[B+1]=W>>>26-K&67108863,K+=24,K>=26&&(K-=26,B++);else if(S==="le")for(C=0,B=0;C<b.length;C+=3)W=b[C]|b[C+1]<<8|b[C+2]<<16,this.words[B]|=W<<K&67108863,this.words[B+1]=W>>>26-K&67108863,K+=24,K>=26&&(K-=26,B++);return this.strip()};function o(P,b){var w=P.charCodeAt(b);return w>=65&&w<=70?w-55:w>=97&&w<=102?w-87:w-48&15}function a(P,b,w){var S=o(P,w);return w-1>=b&&(S|=o(P,w-1)<<4),S}n.prototype._parseHex=function(b,w,S){this.length=Math.ceil((b.length-w)/6),this.words=new Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var B=0,W=0,K;if(S==="be")for(C=b.length-1;C>=w;C-=2)K=a(b,w,C)<<B,this.words[W]|=K&67108863,B>=18?(B-=18,W+=1,this.words[W]|=K>>>26):B+=8;else{var M=b.length-w;for(C=M%2==0?w+1:w;C<b.length;C+=2)K=a(b,w,C)<<B,this.words[W]|=K&67108863,B>=18?(B-=18,W+=1,this.words[W]|=K>>>26):B+=8}this.strip()};function c(P,b,w,S){for(var C=0,B=Math.min(P.length,w),W=b;W<B;W++){var K=P.charCodeAt(W)-48;C*=S,K>=49?C+=K-49+10:K>=17?C+=K-17+10:C+=K}return C}n.prototype._parseBase=function(b,w,S){this.words=[0],this.length=1;for(var C=0,B=1;B<=67108863;B*=w)C++;C--,B=B/w|0;for(var W=b.length-S,K=W%C,M=Math.min(W,W-K)+S,_=0,L=S;L<M;L+=C)_=c(b,L,L+C,w),this.imuln(B),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(K!==0){var ae=1;for(_=c(b,L,b.length,w),L=0;L<K;L++)ae*=w;this.imuln(ae),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this.strip()},n.prototype.copy=function(b){b.words=new Array(this.length);for(var w=0;w<this.length;w++)b.words[w]=this.words[w];b.length=this.length,b.negative=this.negative,b.red=this.red},n.prototype.clone=function(){var b=new n(null);return this.copy(b),b},n.prototype._expand=function(b){for(;this.length<b;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(b,w){b=b||10,w=w|0||1;var S;if(b===16||b==="hex"){S="";for(var C=0,B=0,W=0;W<this.length;W++){var K=this.words[W],M=((K<<C|B)&16777215).toString(16);B=K>>>24-C&16777215,B!==0||W!==this.length-1?S=u[6-M.length]+M+S:S=M+S,C+=2,C>=26&&(C-=26,W--)}for(B!==0&&(S=B.toString(16)+S);S.length%w!=0;)S="0"+S;return this.negative!==0&&(S="-"+S),S}if(b===(b|0)&&b>=2&&b<=36){var _=f[b],L=d[b];S="";var ae=this.clone();for(ae.negative=0;!ae.isZero();){var X=ae.modn(L).toString(b);ae=ae.idivn(L),ae.isZero()?S=X+S:S=u[_-X.length]+X+S}for(this.isZero()&&(S="0"+S);S.length%w!=0;)S="0"+S;return this.negative!==0&&(S="-"+S),S}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var b=this.words[0];return this.length===2?b+=this.words[1]*67108864:this.length===3&&this.words[2]===1?b+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-b:b},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(b,w){return r(typeof s!="undefined"),this.toArrayLike(s,b,w)},n.prototype.toArray=function(b,w){return this.toArrayLike(Array,b,w)},n.prototype.toArrayLike=function(b,w,S){var C=this.byteLength(),B=S||Math.max(1,C);r(C<=B,"byte array longer than desired length"),r(B>0,"Requested array length <= 0"),this.strip();var W=w==="le",K=new b(B),M,_,L=this.clone();if(W){for(_=0;!L.isZero();_++)M=L.andln(255),L.iushrn(8),K[_]=M;for(;_<B;_++)K[_]=0}else{for(_=0;_<B-C;_++)K[_]=0;for(_=0;!L.isZero();_++)M=L.andln(255),L.iushrn(8),K[B-_-1]=M}return K},Math.clz32?n.prototype._countBits=function(b){return 32-Math.clz32(b)}:n.prototype._countBits=function(b){var w=b,S=0;return w>=4096&&(S+=13,w>>>=13),w>=64&&(S+=7,w>>>=7),w>=8&&(S+=4,w>>>=4),w>=2&&(S+=2,w>>>=2),S+w},n.prototype._zeroBits=function(b){if(b===0)return 26;var w=b,S=0;return(w&8191)==0&&(S+=13,w>>>=13),(w&127)==0&&(S+=7,w>>>=7),(w&15)==0&&(S+=4,w>>>=4),(w&3)==0&&(S+=2,w>>>=2),(w&1)==0&&S++,S},n.prototype.bitLength=function(){var b=this.words[this.length-1],w=this._countBits(b);return(this.length-1)*26+w};function h(P){for(var b=new Array(P.bitLength()),w=0;w<b.length;w++){var S=w/26|0,C=w%26;b[w]=(P.words[S]&1<<C)>>>C}return b}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var b=0,w=0;w<this.length;w++){var S=this._zeroBits(this.words[w]);if(b+=S,S!==26)break}return b},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(b){return this.negative!==0?this.abs().inotn(b).iaddn(1):this.clone()},n.prototype.fromTwos=function(b){return this.testn(b-1)?this.notn(b).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(b){for(;this.length<b.length;)this.words[this.length++]=0;for(var w=0;w<b.length;w++)this.words[w]=this.words[w]|b.words[w];return this.strip()},n.prototype.ior=function(b){return r((this.negative|b.negative)==0),this.iuor(b)},n.prototype.or=function(b){return this.length>b.length?this.clone().ior(b):b.clone().ior(this)},n.prototype.uor=function(b){return this.length>b.length?this.clone().iuor(b):b.clone().iuor(this)},n.prototype.iuand=function(b){var w;this.length>b.length?w=b:w=this;for(var S=0;S<w.length;S++)this.words[S]=this.words[S]&b.words[S];return this.length=w.length,this.strip()},n.prototype.iand=function(b){return r((this.negative|b.negative)==0),this.iuand(b)},n.prototype.and=function(b){return this.length>b.length?this.clone().iand(b):b.clone().iand(this)},n.prototype.uand=function(b){return this.length>b.length?this.clone().iuand(b):b.clone().iuand(this)},n.prototype.iuxor=function(b){var w,S;this.length>b.length?(w=this,S=b):(w=b,S=this);for(var C=0;C<S.length;C++)this.words[C]=w.words[C]^S.words[C];if(this!==w)for(;C<w.length;C++)this.words[C]=w.words[C];return this.length=w.length,this.strip()},n.prototype.ixor=function(b){return r((this.negative|b.negative)==0),this.iuxor(b)},n.prototype.xor=function(b){return this.length>b.length?this.clone().ixor(b):b.clone().ixor(this)},n.prototype.uxor=function(b){return this.length>b.length?this.clone().iuxor(b):b.clone().iuxor(this)},n.prototype.inotn=function(b){r(typeof b=="number"&&b>=0);var w=Math.ceil(b/26)|0,S=b%26;this._expand(w),S>0&&w--;for(var C=0;C<w;C++)this.words[C]=~this.words[C]&67108863;return S>0&&(this.words[C]=~this.words[C]&67108863>>26-S),this.strip()},n.prototype.notn=function(b){return this.clone().inotn(b)},n.prototype.setn=function(b,w){r(typeof b=="number"&&b>=0);var S=b/26|0,C=b%26;return this._expand(S+1),w?this.words[S]=this.words[S]|1<<C:this.words[S]=this.words[S]&~(1<<C),this.strip()},n.prototype.iadd=function(b){var w;if(this.negative!==0&&b.negative===0)return this.negative=0,w=this.isub(b),this.negative^=1,this._normSign();if(this.negative===0&&b.negative!==0)return b.negative=0,w=this.isub(b),b.negative=1,w._normSign();var S,C;this.length>b.length?(S=this,C=b):(S=b,C=this);for(var B=0,W=0;W<C.length;W++)w=(S.words[W]|0)+(C.words[W]|0)+B,this.words[W]=w&67108863,B=w>>>26;for(;B!==0&&W<S.length;W++)w=(S.words[W]|0)+B,this.words[W]=w&67108863,B=w>>>26;if(this.length=S.length,B!==0)this.words[this.length]=B,this.length++;else if(S!==this)for(;W<S.length;W++)this.words[W]=S.words[W];return this},n.prototype.add=function(b){var w;return b.negative!==0&&this.negative===0?(b.negative=0,w=this.sub(b),b.negative^=1,w):b.negative===0&&this.negative!==0?(this.negative=0,w=b.sub(this),this.negative=1,w):this.length>b.length?this.clone().iadd(b):b.clone().iadd(this)},n.prototype.isub=function(b){if(b.negative!==0){b.negative=0;var w=this.iadd(b);return b.negative=1,w._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(b),this.negative=1,this._normSign();var S=this.cmp(b);if(S===0)return this.negative=0,this.length=1,this.words[0]=0,this;var C,B;S>0?(C=this,B=b):(C=b,B=this);for(var W=0,K=0;K<B.length;K++)w=(C.words[K]|0)-(B.words[K]|0)+W,W=w>>26,this.words[K]=w&67108863;for(;W!==0&&K<C.length;K++)w=(C.words[K]|0)+W,W=w>>26,this.words[K]=w&67108863;if(W===0&&K<C.length&&C!==this)for(;K<C.length;K++)this.words[K]=C.words[K];return this.length=Math.max(this.length,K),C!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(b){return this.clone().isub(b)};function y(P,b,w){w.negative=b.negative^P.negative;var S=P.length+b.length|0;w.length=S,S=S-1|0;var C=P.words[0]|0,B=b.words[0]|0,W=C*B,K=W&67108863,M=W/67108864|0;w.words[0]=K;for(var _=1;_<S;_++){for(var L=M>>>26,ae=M&67108863,X=Math.min(_,b.length-1),ne=Math.max(0,_-P.length+1);ne<=X;ne++){var oe=_-ne|0;C=P.words[oe]|0,B=b.words[ne]|0,W=C*B+ae,L+=W/67108864|0,ae=W&67108863}w.words[_]=ae|0,M=L|0}return M!==0?w.words[_]=M|0:w.length--,w.strip()}var g=function(b,w,S){var C=b.words,B=w.words,W=S.words,K=0,M,_,L,ae=C[0]|0,X=ae&8191,ne=ae>>>13,oe=C[1]|0,de=oe&8191,he=oe>>>13,we=C[2]|0,k=we&8191,j=we>>>13,$=C[3]|0,Z=$&8191,I=$>>>13,U=C[4]|0,V=U&8191,N=U>>>13,Q=C[5]|0,ee=Q&8191,J=Q>>>13,ce=C[6]|0,ye=ce&8191,ge=ce>>>13,je=C[7]|0,Te=je&8191,Ke=je>>>13,Ze=C[8]|0,ze=Ze&8191,Ve=Ze>>>13,pt=C[9]|0,Yt=pt&8191,ir=pt>>>13,Sn=B[0]|0,zt=Sn&8191,At=Sn>>>13,Zr=B[1]|0,it=Zr&8191,Ar=Zr>>>13,J3=B[2]|0,Tr=J3&8191,Rr=J3>>>13,e6=B[3]|0,Pr=e6&8191,Cr=e6>>>13,t6=B[4]|0,Or=t6&8191,kr=t6>>>13,r6=B[5]|0,qr=r6&8191,Dr=r6>>>13,i6=B[6]|0,Nr=i6&8191,Br=i6>>>13,n6=B[7]|0,Mr=n6&8191,Lr=n6>>>13,s6=B[8]|0,Ur=s6&8191,Fr=s6>>>13,o6=B[9]|0,jr=o6&8191,nr=o6>>>13;S.negative=b.negative^w.negative,S.length=19,M=Math.imul(X,zt),_=Math.imul(X,At),_=_+Math.imul(ne,zt)|0,L=Math.imul(ne,At);var th=(K+M|0)+((_&8191)<<13)|0;K=(L+(_>>>13)|0)+(th>>>26)|0,th&=67108863,M=Math.imul(de,zt),_=Math.imul(de,At),_=_+Math.imul(he,zt)|0,L=Math.imul(he,At),M=M+Math.imul(X,it)|0,_=_+Math.imul(X,Ar)|0,_=_+Math.imul(ne,it)|0,L=L+Math.imul(ne,Ar)|0;var Np=(K+M|0)+((_&8191)<<13)|0;K=(L+(_>>>13)|0)+(Np>>>26)|0,Np&=67108863,M=Math.imul(k,zt),_=Math.imul(k,At),_=_+Math.imul(j,zt)|0,L=Math.imul(j,At),M=M+Math.imul(de,it)|0,_=_+Math.imul(de,Ar)|0,_=_+Math.imul(he,it)|0,L=L+Math.imul(he,Ar)|0,M=M+Math.imul(X,Tr)|0,_=_+Math.imul(X,Rr)|0,_=_+Math.imul(ne,Tr)|0,L=L+Math.imul(ne,Rr)|0;var Bp=(K+M|0)+((_&8191)<<13)|0;K=(L+(_>>>13)|0)+(Bp>>>26)|0,Bp&=67108863,M=Math.imul(Z,zt),_=Math.imul(Z,At),_=_+Math.imul(I,zt)|0,L=Math.imul(I,At),M=M+Math.imul(k,it)|0,_=_+Math.imul(k,Ar)|0,_=_+Math.imul(j,it)|0,L=L+Math.imul(j,Ar)|0,M=M+Math.imul(de,Tr)|0,_=_+Math.imul(de,Rr)|0,_=_+Math.imul(he,Tr)|0,L=L+Math.imul(he,Rr)|0,M=M+Math.imul(X,Pr)|0,_=_+Math.imul(X,Cr)|0,_=_+Math.imul(ne,Pr)|0,L=L+Math.imul(ne,Cr)|0;var Mp=(K+M|0)+((_&8191)<<13)|0;K=(L+(_>>>13)|0)+(Mp>>>26)|0,Mp&=67108863,M=Math.imul(V,zt),_=Math.imul(V,At),_=_+Math.imul(N,zt)|0,L=Math.imul(N,At),M=M+Math.imul(Z,it)|0,_=_+Math.imul(Z,Ar)|0,_=_+Math.imul(I,it)|0,L=L+Math.imul(I,Ar)|0,M=M+Math.imul(k,Tr)|0,_=_+Math.imul(k,Rr)|0,_=_+Math.imul(j,Tr)|0,L=L+Math.imul(j,Rr)|0,M=M+Math.imul(de,Pr)|0,_=_+Math.imul(de,Cr)|0,_=_+Math.imul(he,Pr)|0,L=L+Math.imul(he,Cr)|0,M=M+Math.imul(X,Or)|0,_=_+Math.imul(X,kr)|0,_=_+Math.imul(ne,Or)|0,L=L+Math.imul(ne,kr)|0;var Lp=(K+M|0)+((_&8191)<<13)|0;K=(L+(_>>>13)|0)+(Lp>>>26)|0,Lp&=67108863,M=Math.imul(ee,zt),_=Math.imul(ee,At),_=_+Math.imul(J,zt)|0,L=Math.imul(J,At),M=M+Math.imul(V,it)|0,_=_+Math.imul(V,Ar)|0,_=_+Math.imul(N,it)|0,L=L+Math.imul(N,Ar)|0,M=M+Math.imul(Z,Tr)|0,_=_+Math.imul(Z,Rr)|0,_=_+Math.imul(I,Tr)|0,L=L+Math.imul(I,Rr)|0,M=M+Math.imul(k,Pr)|0,_=_+Math.imul(k,Cr)|0,_=_+Math.imul(j,Pr)|0,L=L+Math.imul(j,Cr)|0,M=M+Math.imul(de,Or)|0,_=_+Math.imul(de,kr)|0,_=_+Math.imul(he,Or)|0,L=L+Math.imul(he,kr)|0,M=M+Math.imul(X,qr)|0,_=_+Math.imul(X,Dr)|0,_=_+Math.imul(ne,qr)|0,L=L+Math.imul(ne,Dr)|0;var Up=(K+M|0)+((_&8191)<<13)|0;K=(L+(_>>>13)|0)+(Up>>>26)|0,Up&=67108863,M=Math.imul(ye,zt),_=Math.imul(ye,At),_=_+Math.imul(ge,zt)|0,L=Math.imul(ge,At),M=M+Math.imul(ee,it)|0,_=_+Math.imul(ee,Ar)|0,_=_+Math.imul(J,it)|0,L=L+Math.imul(J,Ar)|0,M=M+Math.imul(V,Tr)|0,_=_+Math.imul(V,Rr)|0,_=_+Math.imul(N,Tr)|0,L=L+Math.imul(N,Rr)|0,M=M+Math.imul(Z,Pr)|0,_=_+Math.imul(Z,Cr)|0,_=_+Math.imul(I,Pr)|0,L=L+Math.imul(I,Cr)|0,M=M+Math.imul(k,Or)|0,_=_+Math.imul(k,kr)|0,_=_+Math.imul(j,Or)|0,L=L+Math.imul(j,kr)|0,M=M+Math.imul(de,qr)|0,_=_+Math.imul(de,Dr)|0,_=_+Math.imul(he,qr)|0,L=L+Math.imul(he,Dr)|0,M=M+Math.imul(X,Nr)|0,_=_+Math.imul(X,Br)|0,_=_+Math.imul(ne,Nr)|0,L=L+Math.imul(ne,Br)|0;var ho=(K+M|0)+((_&8191)<<13)|0;K=(L+(_>>>13)|0)+(ho>>>26)|0,ho&=67108863,M=Math.imul(Te,zt),_=Math.imul(Te,At),_=_+Math.imul(Ke,zt)|0,L=Math.imul(Ke,At),M=M+Math.imul(ye,it)|0,_=_+Math.imul(ye,Ar)|0,_=_+Math.imul(ge,it)|0,L=L+Math.imul(ge,Ar)|0,M=M+Math.imul(ee,Tr)|0,_=_+Math.imul(ee,Rr)|0,_=_+Math.imul(J,Tr)|0,L=L+Math.imul(J,Rr)|0,M=M+Math.imul(V,Pr)|0,_=_+Math.imul(V,Cr)|0,_=_+Math.imul(N,Pr)|0,L=L+Math.imul(N,Cr)|0,M=M+Math.imul(Z,Or)|0,_=_+Math.imul(Z,kr)|0,_=_+Math.imul(I,Or)|0,L=L+Math.imul(I,kr)|0,M=M+Math.imul(k,qr)|0,_=_+Math.imul(k,Dr)|0,_=_+Math.imul(j,qr)|0,L=L+Math.imul(j,Dr)|0,M=M+Math.imul(de,Nr)|0,_=_+Math.imul(de,Br)|0,_=_+Math.imul(he,Nr)|0,L=L+Math.imul(he,Br)|0,M=M+Math.imul(X,Mr)|0,_=_+Math.imul(X,Lr)|0,_=_+Math.imul(ne,Mr)|0,L=L+Math.imul(ne,Lr)|0;var Fp=(K+M|0)+((_&8191)<<13)|0;K=(L+(_>>>13)|0)+(Fp>>>26)|0,Fp&=67108863,M=Math.imul(ze,zt),_=Math.imul(ze,At),_=_+Math.imul(Ve,zt)|0,L=Math.imul(Ve,At),M=M+Math.imul(Te,it)|0,_=_+Math.imul(Te,Ar)|0,_=_+Math.imul(Ke,it)|0,L=L+Math.imul(Ke,Ar)|0,M=M+Math.imul(ye,Tr)|0,_=_+Math.imul(ye,Rr)|0,_=_+Math.imul(ge,Tr)|0,L=L+Math.imul(ge,Rr)|0,M=M+Math.imul(ee,Pr)|0,_=_+Math.imul(ee,Cr)|0,_=_+Math.imul(J,Pr)|0,L=L+Math.imul(J,Cr)|0,M=M+Math.imul(V,Or)|0,_=_+Math.imul(V,kr)|0,_=_+Math.imul(N,Or)|0,L=L+Math.imul(N,kr)|0,M=M+Math.imul(Z,qr)|0,_=_+Math.imul(Z,Dr)|0,_=_+Math.imul(I,qr)|0,L=L+Math.imul(I,Dr)|0,M=M+Math.imul(k,Nr)|0,_=_+Math.imul(k,Br)|0,_=_+Math.imul(j,Nr)|0,L=L+Math.imul(j,Br)|0,M=M+Math.imul(de,Mr)|0,_=_+Math.imul(de,Lr)|0,_=_+Math.imul(he,Mr)|0,L=L+Math.imul(he,Lr)|0,M=M+Math.imul(X,Ur)|0,_=_+Math.imul(X,Fr)|0,_=_+Math.imul(ne,Ur)|0,L=L+Math.imul(ne,Fr)|0;var jp=(K+M|0)+((_&8191)<<13)|0;K=(L+(_>>>13)|0)+(jp>>>26)|0,jp&=67108863,M=Math.imul(Yt,zt),_=Math.imul(Yt,At),_=_+Math.imul(ir,zt)|0,L=Math.imul(ir,At),M=M+Math.imul(ze,it)|0,_=_+Math.imul(ze,Ar)|0,_=_+Math.imul(Ve,it)|0,L=L+Math.imul(Ve,Ar)|0,M=M+Math.imul(Te,Tr)|0,_=_+Math.imul(Te,Rr)|0,_=_+Math.imul(Ke,Tr)|0,L=L+Math.imul(Ke,Rr)|0,M=M+Math.imul(ye,Pr)|0,_=_+Math.imul(ye,Cr)|0,_=_+Math.imul(ge,Pr)|0,L=L+Math.imul(ge,Cr)|0,M=M+Math.imul(ee,Or)|0,_=_+Math.imul(ee,kr)|0,_=_+Math.imul(J,Or)|0,L=L+Math.imul(J,kr)|0,M=M+Math.imul(V,qr)|0,_=_+Math.imul(V,Dr)|0,_=_+Math.imul(N,qr)|0,L=L+Math.imul(N,Dr)|0,M=M+Math.imul(Z,Nr)|0,_=_+Math.imul(Z,Br)|0,_=_+Math.imul(I,Nr)|0,L=L+Math.imul(I,Br)|0,M=M+Math.imul(k,Mr)|0,_=_+Math.imul(k,Lr)|0,_=_+Math.imul(j,Mr)|0,L=L+Math.imul(j,Lr)|0,M=M+Math.imul(de,Ur)|0,_=_+Math.imul(de,Fr)|0,_=_+Math.imul(he,Ur)|0,L=L+Math.imul(he,Fr)|0,M=M+Math.imul(X,jr)|0,_=_+Math.imul(X,nr)|0,_=_+Math.imul(ne,jr)|0,L=L+Math.imul(ne,nr)|0;var Kp=(K+M|0)+((_&8191)<<13)|0;K=(L+(_>>>13)|0)+(Kp>>>26)|0,Kp&=67108863,M=Math.imul(Yt,it),_=Math.imul(Yt,Ar),_=_+Math.imul(ir,it)|0,L=Math.imul(ir,Ar),M=M+Math.imul(ze,Tr)|0,_=_+Math.imul(ze,Rr)|0,_=_+Math.imul(Ve,Tr)|0,L=L+Math.imul(Ve,Rr)|0,M=M+Math.imul(Te,Pr)|0,_=_+Math.imul(Te,Cr)|0,_=_+Math.imul(Ke,Pr)|0,L=L+Math.imul(Ke,Cr)|0,M=M+Math.imul(ye,Or)|0,_=_+Math.imul(ye,kr)|0,_=_+Math.imul(ge,Or)|0,L=L+Math.imul(ge,kr)|0,M=M+Math.imul(ee,qr)|0,_=_+Math.imul(ee,Dr)|0,_=_+Math.imul(J,qr)|0,L=L+Math.imul(J,Dr)|0,M=M+Math.imul(V,Nr)|0,_=_+Math.imul(V,Br)|0,_=_+Math.imul(N,Nr)|0,L=L+Math.imul(N,Br)|0,M=M+Math.imul(Z,Mr)|0,_=_+Math.imul(Z,Lr)|0,_=_+Math.imul(I,Mr)|0,L=L+Math.imul(I,Lr)|0,M=M+Math.imul(k,Ur)|0,_=_+Math.imul(k,Fr)|0,_=_+Math.imul(j,Ur)|0,L=L+Math.imul(j,Fr)|0,M=M+Math.imul(de,jr)|0,_=_+Math.imul(de,nr)|0,_=_+Math.imul(he,jr)|0,L=L+Math.imul(he,nr)|0;var Vp=(K+M|0)+((_&8191)<<13)|0;K=(L+(_>>>13)|0)+(Vp>>>26)|0,Vp&=67108863,M=Math.imul(Yt,Tr),_=Math.imul(Yt,Rr),_=_+Math.imul(ir,Tr)|0,L=Math.imul(ir,Rr),M=M+Math.imul(ze,Pr)|0,_=_+Math.imul(ze,Cr)|0,_=_+Math.imul(Ve,Pr)|0,L=L+Math.imul(Ve,Cr)|0,M=M+Math.imul(Te,Or)|0,_=_+Math.imul(Te,kr)|0,_=_+Math.imul(Ke,Or)|0,L=L+Math.imul(Ke,kr)|0,M=M+Math.imul(ye,qr)|0,_=_+Math.imul(ye,Dr)|0,_=_+Math.imul(ge,qr)|0,L=L+Math.imul(ge,Dr)|0,M=M+Math.imul(ee,Nr)|0,_=_+Math.imul(ee,Br)|0,_=_+Math.imul(J,Nr)|0,L=L+Math.imul(J,Br)|0,M=M+Math.imul(V,Mr)|0,_=_+Math.imul(V,Lr)|0,_=_+Math.imul(N,Mr)|0,L=L+Math.imul(N,Lr)|0,M=M+Math.imul(Z,Ur)|0,_=_+Math.imul(Z,Fr)|0,_=_+Math.imul(I,Ur)|0,L=L+Math.imul(I,Fr)|0,M=M+Math.imul(k,jr)|0,_=_+Math.imul(k,nr)|0,_=_+Math.imul(j,jr)|0,L=L+Math.imul(j,nr)|0;var zp=(K+M|0)+((_&8191)<<13)|0;K=(L+(_>>>13)|0)+(zp>>>26)|0,zp&=67108863,M=Math.imul(Yt,Pr),_=Math.imul(Yt,Cr),_=_+Math.imul(ir,Pr)|0,L=Math.imul(ir,Cr),M=M+Math.imul(ze,Or)|0,_=_+Math.imul(ze,kr)|0,_=_+Math.imul(Ve,Or)|0,L=L+Math.imul(Ve,kr)|0,M=M+Math.imul(Te,qr)|0,_=_+Math.imul(Te,Dr)|0,_=_+Math.imul(Ke,qr)|0,L=L+Math.imul(Ke,Dr)|0,M=M+Math.imul(ye,Nr)|0,_=_+Math.imul(ye,Br)|0,_=_+Math.imul(ge,Nr)|0,L=L+Math.imul(ge,Br)|0,M=M+Math.imul(ee,Mr)|0,_=_+Math.imul(ee,Lr)|0,_=_+Math.imul(J,Mr)|0,L=L+Math.imul(J,Lr)|0,M=M+Math.imul(V,Ur)|0,_=_+Math.imul(V,Fr)|0,_=_+Math.imul(N,Ur)|0,L=L+Math.imul(N,Fr)|0,M=M+Math.imul(Z,jr)|0,_=_+Math.imul(Z,nr)|0,_=_+Math.imul(I,jr)|0,L=L+Math.imul(I,nr)|0;var Hp=(K+M|0)+((_&8191)<<13)|0;K=(L+(_>>>13)|0)+(Hp>>>26)|0,Hp&=67108863,M=Math.imul(Yt,Or),_=Math.imul(Yt,kr),_=_+Math.imul(ir,Or)|0,L=Math.imul(ir,kr),M=M+Math.imul(ze,qr)|0,_=_+Math.imul(ze,Dr)|0,_=_+Math.imul(Ve,qr)|0,L=L+Math.imul(Ve,Dr)|0,M=M+Math.imul(Te,Nr)|0,_=_+Math.imul(Te,Br)|0,_=_+Math.imul(Ke,Nr)|0,L=L+Math.imul(Ke,Br)|0,M=M+Math.imul(ye,Mr)|0,_=_+Math.imul(ye,Lr)|0,_=_+Math.imul(ge,Mr)|0,L=L+Math.imul(ge,Lr)|0,M=M+Math.imul(ee,Ur)|0,_=_+Math.imul(ee,Fr)|0,_=_+Math.imul(J,Ur)|0,L=L+Math.imul(J,Fr)|0,M=M+Math.imul(V,jr)|0,_=_+Math.imul(V,nr)|0,_=_+Math.imul(N,jr)|0,L=L+Math.imul(N,nr)|0;var $p=(K+M|0)+((_&8191)<<13)|0;K=(L+(_>>>13)|0)+($p>>>26)|0,$p&=67108863,M=Math.imul(Yt,qr),_=Math.imul(Yt,Dr),_=_+Math.imul(ir,qr)|0,L=Math.imul(ir,Dr),M=M+Math.imul(ze,Nr)|0,_=_+Math.imul(ze,Br)|0,_=_+Math.imul(Ve,Nr)|0,L=L+Math.imul(Ve,Br)|0,M=M+Math.imul(Te,Mr)|0,_=_+Math.imul(Te,Lr)|0,_=_+Math.imul(Ke,Mr)|0,L=L+Math.imul(Ke,Lr)|0,M=M+Math.imul(ye,Ur)|0,_=_+Math.imul(ye,Fr)|0,_=_+Math.imul(ge,Ur)|0,L=L+Math.imul(ge,Fr)|0,M=M+Math.imul(ee,jr)|0,_=_+Math.imul(ee,nr)|0,_=_+Math.imul(J,jr)|0,L=L+Math.imul(J,nr)|0;var Gp=(K+M|0)+((_&8191)<<13)|0;K=(L+(_>>>13)|0)+(Gp>>>26)|0,Gp&=67108863,M=Math.imul(Yt,Nr),_=Math.imul(Yt,Br),_=_+Math.imul(ir,Nr)|0,L=Math.imul(ir,Br),M=M+Math.imul(ze,Mr)|0,_=_+Math.imul(ze,Lr)|0,_=_+Math.imul(Ve,Mr)|0,L=L+Math.imul(Ve,Lr)|0,M=M+Math.imul(Te,Ur)|0,_=_+Math.imul(Te,Fr)|0,_=_+Math.imul(Ke,Ur)|0,L=L+Math.imul(Ke,Fr)|0,M=M+Math.imul(ye,jr)|0,_=_+Math.imul(ye,nr)|0,_=_+Math.imul(ge,jr)|0,L=L+Math.imul(ge,nr)|0;var Wp=(K+M|0)+((_&8191)<<13)|0;K=(L+(_>>>13)|0)+(Wp>>>26)|0,Wp&=67108863,M=Math.imul(Yt,Mr),_=Math.imul(Yt,Lr),_=_+Math.imul(ir,Mr)|0,L=Math.imul(ir,Lr),M=M+Math.imul(ze,Ur)|0,_=_+Math.imul(ze,Fr)|0,_=_+Math.imul(Ve,Ur)|0,L=L+Math.imul(Ve,Fr)|0,M=M+Math.imul(Te,jr)|0,_=_+Math.imul(Te,nr)|0,_=_+Math.imul(Ke,jr)|0,L=L+Math.imul(Ke,nr)|0;var vi=(K+M|0)+((_&8191)<<13)|0;K=(L+(_>>>13)|0)+(vi>>>26)|0,vi&=67108863,M=Math.imul(Yt,Ur),_=Math.imul(Yt,Fr),_=_+Math.imul(ir,Ur)|0,L=Math.imul(ir,Fr),M=M+Math.imul(ze,jr)|0,_=_+Math.imul(ze,nr)|0,_=_+Math.imul(Ve,jr)|0,L=L+Math.imul(Ve,nr)|0;var Yp=(K+M|0)+((_&8191)<<13)|0;K=(L+(_>>>13)|0)+(Yp>>>26)|0,Yp&=67108863,M=Math.imul(Yt,jr),_=Math.imul(Yt,nr),_=_+Math.imul(ir,jr)|0,L=Math.imul(ir,nr);var Xp=(K+M|0)+((_&8191)<<13)|0;return K=(L+(_>>>13)|0)+(Xp>>>26)|0,Xp&=67108863,W[0]=th,W[1]=Np,W[2]=Bp,W[3]=Mp,W[4]=Lp,W[5]=Up,W[6]=ho,W[7]=Fp,W[8]=jp,W[9]=Kp,W[10]=Vp,W[11]=zp,W[12]=Hp,W[13]=$p,W[14]=Gp,W[15]=Wp,W[16]=vi,W[17]=Yp,W[18]=Xp,K!==0&&(W[19]=K,S.length++),S};Math.imul||(g=y);function m(P,b,w){w.negative=b.negative^P.negative,w.length=P.length+b.length;for(var S=0,C=0,B=0;B<w.length-1;B++){var W=C;C=0;for(var K=S&67108863,M=Math.min(B,b.length-1),_=Math.max(0,B-P.length+1);_<=M;_++){var L=B-_,ae=P.words[L]|0,X=b.words[_]|0,ne=ae*X,oe=ne&67108863;W=W+(ne/67108864|0)|0,oe=oe+K|0,K=oe&67108863,W=W+(oe>>>26)|0,C+=W>>>26,W&=67108863}w.words[B]=K,S=W,W=C}return S!==0?w.words[B]=S:w.length--,w.strip()}function E(P,b,w){var S=new v;return S.mulp(P,b,w)}n.prototype.mulTo=function(b,w){var S,C=this.length+b.length;return this.length===10&&b.length===10?S=g(this,b,w):C<63?S=y(this,b,w):C<1024?S=m(this,b,w):S=E(this,b,w),S};function v(P,b){this.x=P,this.y=b}v.prototype.makeRBT=function(b){for(var w=new Array(b),S=n.prototype._countBits(b)-1,C=0;C<b;C++)w[C]=this.revBin(C,S,b);return w},v.prototype.revBin=function(b,w,S){if(b===0||b===S-1)return b;for(var C=0,B=0;B<w;B++)C|=(b&1)<<w-B-1,b>>=1;return C},v.prototype.permute=function(b,w,S,C,B,W){for(var K=0;K<W;K++)C[K]=w[b[K]],B[K]=S[b[K]]},v.prototype.transform=function(b,w,S,C,B,W){this.permute(W,b,w,S,C,B);for(var K=1;K<B;K<<=1)for(var M=K<<1,_=Math.cos(2*Math.PI/M),L=Math.sin(2*Math.PI/M),ae=0;ae<B;ae+=M)for(var X=_,ne=L,oe=0;oe<K;oe++){var de=S[ae+oe],he=C[ae+oe],we=S[ae+oe+K],k=C[ae+oe+K],j=X*we-ne*k;k=X*k+ne*we,we=j,S[ae+oe]=de+we,C[ae+oe]=he+k,S[ae+oe+K]=de-we,C[ae+oe+K]=he-k,oe!==M&&(j=_*X-L*ne,ne=_*ne+L*X,X=j)}},v.prototype.guessLen13b=function(b,w){var S=Math.max(w,b)|1,C=S&1,B=0;for(S=S/2|0;S;S=S>>>1)B++;return 1<<B+1+C},v.prototype.conjugate=function(b,w,S){if(!(S<=1))for(var C=0;C<S/2;C++){var B=b[C];b[C]=b[S-C-1],b[S-C-1]=B,B=w[C],w[C]=-w[S-C-1],w[S-C-1]=-B}},v.prototype.normalize13b=function(b,w){for(var S=0,C=0;C<w/2;C++){var B=Math.round(b[2*C+1]/w)*8192+Math.round(b[2*C]/w)+S;b[C]=B&67108863,B<67108864?S=0:S=B/67108864|0}return b},v.prototype.convert13b=function(b,w,S,C){for(var B=0,W=0;W<w;W++)B=B+(b[W]|0),S[2*W]=B&8191,B=B>>>13,S[2*W+1]=B&8191,B=B>>>13;for(W=2*w;W<C;++W)S[W]=0;r(B===0),r((B&~8191)==0)},v.prototype.stub=function(b){for(var w=new Array(b),S=0;S<b;S++)w[S]=0;return w},v.prototype.mulp=function(b,w,S){var C=2*this.guessLen13b(b.length,w.length),B=this.makeRBT(C),W=this.stub(C),K=new Array(C),M=new Array(C),_=new Array(C),L=new Array(C),ae=new Array(C),X=new Array(C),ne=S.words;ne.length=C,this.convert13b(b.words,b.length,K,C),this.convert13b(w.words,w.length,L,C),this.transform(K,W,M,_,C,B),this.transform(L,W,ae,X,C,B);for(var oe=0;oe<C;oe++){var de=M[oe]*ae[oe]-_[oe]*X[oe];_[oe]=M[oe]*X[oe]+_[oe]*ae[oe],M[oe]=de}return this.conjugate(M,_,C),this.transform(M,_,ne,W,C,B),this.conjugate(ne,W,C),this.normalize13b(ne,C),S.negative=b.negative^w.negative,S.length=b.length+w.length,S.strip()},n.prototype.mul=function(b){var w=new n(null);return w.words=new Array(this.length+b.length),this.mulTo(b,w)},n.prototype.mulf=function(b){var w=new n(null);return w.words=new Array(this.length+b.length),E(this,b,w)},n.prototype.imul=function(b){return this.clone().mulTo(b,this)},n.prototype.imuln=function(b){r(typeof b=="number"),r(b<67108864);for(var w=0,S=0;S<this.length;S++){var C=(this.words[S]|0)*b,B=(C&67108863)+(w&67108863);w>>=26,w+=C/67108864|0,w+=B>>>26,this.words[S]=B&67108863}return w!==0&&(this.words[S]=w,this.length++),this},n.prototype.muln=function(b){return this.clone().imuln(b)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(b){var w=h(b);if(w.length===0)return new n(1);for(var S=this,C=0;C<w.length&&w[C]===0;C++,S=S.sqr());if(++C<w.length)for(var B=S.sqr();C<w.length;C++,B=B.sqr())w[C]!==0&&(S=S.mul(B));return S},n.prototype.iushln=function(b){r(typeof b=="number"&&b>=0);var w=b%26,S=(b-w)/26,C=67108863>>>26-w<<26-w,B;if(w!==0){var W=0;for(B=0;B<this.length;B++){var K=this.words[B]&C,M=(this.words[B]|0)-K<<w;this.words[B]=M|W,W=K>>>26-w}W&&(this.words[B]=W,this.length++)}if(S!==0){for(B=this.length-1;B>=0;B--)this.words[B+S]=this.words[B];for(B=0;B<S;B++)this.words[B]=0;this.length+=S}return this.strip()},n.prototype.ishln=function(b){return r(this.negative===0),this.iushln(b)},n.prototype.iushrn=function(b,w,S){r(typeof b=="number"&&b>=0);var C;w?C=(w-w%26)/26:C=0;var B=b%26,W=Math.min((b-B)/26,this.length),K=67108863^67108863>>>B<<B,M=S;if(C-=W,C=Math.max(0,C),M){for(var _=0;_<W;_++)M.words[_]=this.words[_];M.length=W}if(W!==0)if(this.length>W)for(this.length-=W,_=0;_<this.length;_++)this.words[_]=this.words[_+W];else this.words[0]=0,this.length=1;var L=0;for(_=this.length-1;_>=0&&(L!==0||_>=C);_--){var ae=this.words[_]|0;this.words[_]=L<<26-B|ae>>>B,L=ae&K}return M&&L!==0&&(M.words[M.length++]=L),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(b,w,S){return r(this.negative===0),this.iushrn(b,w,S)},n.prototype.shln=function(b){return this.clone().ishln(b)},n.prototype.ushln=function(b){return this.clone().iushln(b)},n.prototype.shrn=function(b){return this.clone().ishrn(b)},n.prototype.ushrn=function(b){return this.clone().iushrn(b)},n.prototype.testn=function(b){r(typeof b=="number"&&b>=0);var w=b%26,S=(b-w)/26,C=1<<w;if(this.length<=S)return!1;var B=this.words[S];return!!(B&C)},n.prototype.imaskn=function(b){r(typeof b=="number"&&b>=0);var w=b%26,S=(b-w)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=S)return this;if(w!==0&&S++,this.length=Math.min(S,this.length),w!==0){var C=67108863^67108863>>>w<<w;this.words[this.length-1]&=C}return this.strip()},n.prototype.maskn=function(b){return this.clone().imaskn(b)},n.prototype.iaddn=function(b){return r(typeof b=="number"),r(b<67108864),b<0?this.isubn(-b):this.negative!==0?this.length===1&&(this.words[0]|0)<b?(this.words[0]=b-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(b),this.negative=1,this):this._iaddn(b)},n.prototype._iaddn=function(b){this.words[0]+=b;for(var w=0;w<this.length&&this.words[w]>=67108864;w++)this.words[w]-=67108864,w===this.length-1?this.words[w+1]=1:this.words[w+1]++;return this.length=Math.max(this.length,w+1),this},n.prototype.isubn=function(b){if(r(typeof b=="number"),r(b<67108864),b<0)return this.iaddn(-b);if(this.negative!==0)return this.negative=0,this.iaddn(b),this.negative=1,this;if(this.words[0]-=b,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var w=0;w<this.length&&this.words[w]<0;w++)this.words[w]+=67108864,this.words[w+1]-=1;return this.strip()},n.prototype.addn=function(b){return this.clone().iaddn(b)},n.prototype.subn=function(b){return this.clone().isubn(b)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(b,w,S){var C=b.length+S,B;this._expand(C);var W,K=0;for(B=0;B<b.length;B++){W=(this.words[B+S]|0)+K;var M=(b.words[B]|0)*w;W-=M&67108863,K=(W>>26)-(M/67108864|0),this.words[B+S]=W&67108863}for(;B<this.length-S;B++)W=(this.words[B+S]|0)+K,K=W>>26,this.words[B+S]=W&67108863;if(K===0)return this.strip();for(r(K===-1),K=0,B=0;B<this.length;B++)W=-(this.words[B]|0)+K,K=W>>26,this.words[B]=W&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(b,w){var S=this.length-b.length,C=this.clone(),B=b,W=B.words[B.length-1]|0,K=this._countBits(W);S=26-K,S!==0&&(B=B.ushln(S),C.iushln(S),W=B.words[B.length-1]|0);var M=C.length-B.length,_;if(w!=="mod"){_=new n(null),_.length=M+1,_.words=new Array(_.length);for(var L=0;L<_.length;L++)_.words[L]=0}var ae=C.clone()._ishlnsubmul(B,1,M);ae.negative===0&&(C=ae,_&&(_.words[M]=1));for(var X=M-1;X>=0;X--){var ne=(C.words[B.length+X]|0)*67108864+(C.words[B.length+X-1]|0);for(ne=Math.min(ne/W|0,67108863),C._ishlnsubmul(B,ne,X);C.negative!==0;)ne--,C.negative=0,C._ishlnsubmul(B,1,X),C.isZero()||(C.negative^=1);_&&(_.words[X]=ne)}return _&&_.strip(),C.strip(),w!=="div"&&S!==0&&C.iushrn(S),{div:_||null,mod:C}},n.prototype.divmod=function(b,w,S){if(r(!b.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var C,B,W;return this.negative!==0&&b.negative===0?(W=this.neg().divmod(b,w),w!=="mod"&&(C=W.div.neg()),w!=="div"&&(B=W.mod.neg(),S&&B.negative!==0&&B.iadd(b)),{div:C,mod:B}):this.negative===0&&b.negative!==0?(W=this.divmod(b.neg(),w),w!=="mod"&&(C=W.div.neg()),{div:C,mod:W.mod}):(this.negative&b.negative)!=0?(W=this.neg().divmod(b.neg(),w),w!=="div"&&(B=W.mod.neg(),S&&B.negative!==0&&B.isub(b)),{div:W.div,mod:B}):b.length>this.length||this.cmp(b)<0?{div:new n(0),mod:this}:b.length===1?w==="div"?{div:this.divn(b.words[0]),mod:null}:w==="mod"?{div:null,mod:new n(this.modn(b.words[0]))}:{div:this.divn(b.words[0]),mod:new n(this.modn(b.words[0]))}:this._wordDiv(b,w)},n.prototype.div=function(b){return this.divmod(b,"div",!1).div},n.prototype.mod=function(b){return this.divmod(b,"mod",!1).mod},n.prototype.umod=function(b){return this.divmod(b,"mod",!0).mod},n.prototype.divRound=function(b){var w=this.divmod(b);if(w.mod.isZero())return w.div;var S=w.div.negative!==0?w.mod.isub(b):w.mod,C=b.ushrn(1),B=b.andln(1),W=S.cmp(C);return W<0||B===1&&W===0?w.div:w.div.negative!==0?w.div.isubn(1):w.div.iaddn(1)},n.prototype.modn=function(b){r(b<=67108863);for(var w=(1<<26)%b,S=0,C=this.length-1;C>=0;C--)S=(w*S+(this.words[C]|0))%b;return S},n.prototype.idivn=function(b){r(b<=67108863);for(var w=0,S=this.length-1;S>=0;S--){var C=(this.words[S]|0)+w*67108864;this.words[S]=C/b|0,w=C%b}return this.strip()},n.prototype.divn=function(b){return this.clone().idivn(b)},n.prototype.egcd=function(b){r(b.negative===0),r(!b.isZero());var w=this,S=b.clone();w.negative!==0?w=w.umod(b):w=w.clone();for(var C=new n(1),B=new n(0),W=new n(0),K=new n(1),M=0;w.isEven()&&S.isEven();)w.iushrn(1),S.iushrn(1),++M;for(var _=S.clone(),L=w.clone();!w.isZero();){for(var ae=0,X=1;(w.words[0]&X)==0&&ae<26;++ae,X<<=1);if(ae>0)for(w.iushrn(ae);ae-- >0;)(C.isOdd()||B.isOdd())&&(C.iadd(_),B.isub(L)),C.iushrn(1),B.iushrn(1);for(var ne=0,oe=1;(S.words[0]&oe)==0&&ne<26;++ne,oe<<=1);if(ne>0)for(S.iushrn(ne);ne-- >0;)(W.isOdd()||K.isOdd())&&(W.iadd(_),K.isub(L)),W.iushrn(1),K.iushrn(1);w.cmp(S)>=0?(w.isub(S),C.isub(W),B.isub(K)):(S.isub(w),W.isub(C),K.isub(B))}return{a:W,b:K,gcd:S.iushln(M)}},n.prototype._invmp=function(b){r(b.negative===0),r(!b.isZero());var w=this,S=b.clone();w.negative!==0?w=w.umod(b):w=w.clone();for(var C=new n(1),B=new n(0),W=S.clone();w.cmpn(1)>0&&S.cmpn(1)>0;){for(var K=0,M=1;(w.words[0]&M)==0&&K<26;++K,M<<=1);if(K>0)for(w.iushrn(K);K-- >0;)C.isOdd()&&C.iadd(W),C.iushrn(1);for(var _=0,L=1;(S.words[0]&L)==0&&_<26;++_,L<<=1);if(_>0)for(S.iushrn(_);_-- >0;)B.isOdd()&&B.iadd(W),B.iushrn(1);w.cmp(S)>=0?(w.isub(S),C.isub(B)):(S.isub(w),B.isub(C))}var ae;return w.cmpn(1)===0?ae=C:ae=B,ae.cmpn(0)<0&&ae.iadd(b),ae},n.prototype.gcd=function(b){if(this.isZero())return b.abs();if(b.isZero())return this.abs();var w=this.clone(),S=b.clone();w.negative=0,S.negative=0;for(var C=0;w.isEven()&&S.isEven();C++)w.iushrn(1),S.iushrn(1);do{for(;w.isEven();)w.iushrn(1);for(;S.isEven();)S.iushrn(1);var B=w.cmp(S);if(B<0){var W=w;w=S,S=W}else if(B===0||S.cmpn(1)===0)break;w.isub(S)}while(!0);return S.iushln(C)},n.prototype.invm=function(b){return this.egcd(b).a.umod(b)},n.prototype.isEven=function(){return(this.words[0]&1)==0},n.prototype.isOdd=function(){return(this.words[0]&1)==1},n.prototype.andln=function(b){return this.words[0]&b},n.prototype.bincn=function(b){r(typeof b=="number");var w=b%26,S=(b-w)/26,C=1<<w;if(this.length<=S)return this._expand(S+1),this.words[S]|=C,this;for(var B=C,W=S;B!==0&&W<this.length;W++){var K=this.words[W]|0;K+=B,B=K>>>26,K&=67108863,this.words[W]=K}return B!==0&&(this.words[W]=B,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(b){var w=b<0;if(this.negative!==0&&!w)return-1;if(this.negative===0&&w)return 1;this.strip();var S;if(this.length>1)S=1;else{w&&(b=-b),r(b<=67108863,"Number is too big");var C=this.words[0]|0;S=C===b?0:C<b?-1:1}return this.negative!==0?-S|0:S},n.prototype.cmp=function(b){if(this.negative!==0&&b.negative===0)return-1;if(this.negative===0&&b.negative!==0)return 1;var w=this.ucmp(b);return this.negative!==0?-w|0:w},n.prototype.ucmp=function(b){if(this.length>b.length)return 1;if(this.length<b.length)return-1;for(var w=0,S=this.length-1;S>=0;S--){var C=this.words[S]|0,B=b.words[S]|0;if(C!==B){C<B?w=-1:C>B&&(w=1);break}}return w},n.prototype.gtn=function(b){return this.cmpn(b)===1},n.prototype.gt=function(b){return this.cmp(b)===1},n.prototype.gten=function(b){return this.cmpn(b)>=0},n.prototype.gte=function(b){return this.cmp(b)>=0},n.prototype.ltn=function(b){return this.cmpn(b)===-1},n.prototype.lt=function(b){return this.cmp(b)===-1},n.prototype.lten=function(b){return this.cmpn(b)<=0},n.prototype.lte=function(b){return this.cmp(b)<=0},n.prototype.eqn=function(b){return this.cmpn(b)===0},n.prototype.eq=function(b){return this.cmp(b)===0},n.red=function(b){return new G(b)},n.prototype.toRed=function(b){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),b.convertTo(this)._forceRed(b)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(b){return this.red=b,this},n.prototype.forceRed=function(b){return r(!this.red,"Already a number in reduction context"),this._forceRed(b)},n.prototype.redAdd=function(b){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,b)},n.prototype.redIAdd=function(b){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,b)},n.prototype.redSub=function(b){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,b)},n.prototype.redISub=function(b){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,b)},n.prototype.redShl=function(b){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,b)},n.prototype.redMul=function(b){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,b),this.red.mul(this,b)},n.prototype.redIMul=function(b){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,b),this.red.imul(this,b)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(b){return r(this.red&&!b.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,b)};var A={k256:null,p224:null,p192:null,p25519:null};function R(P,b){this.name=P,this.p=new n(b,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}R.prototype._tmp=function(){var b=new n(null);return b.words=new Array(Math.ceil(this.n/13)),b},R.prototype.ireduce=function(b){var w=b,S;do this.split(w,this.tmp),w=this.imulK(w),w=w.iadd(this.tmp),S=w.bitLength();while(S>this.n);var C=S<this.n?-1:w.ucmp(this.p);return C===0?(w.words[0]=0,w.length=1):C>0?w.isub(this.p):w.strip!==void 0?w.strip():w._strip(),w},R.prototype.split=function(b,w){b.iushrn(this.n,0,w)},R.prototype.imulK=function(b){return b.imul(this.k)};function F(){R.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(F,R),F.prototype.split=function(b,w){for(var S=4194303,C=Math.min(b.length,9),B=0;B<C;B++)w.words[B]=b.words[B];if(w.length=C,b.length<=9){b.words[0]=0,b.length=1;return}var W=b.words[9];for(w.words[w.length++]=W&S,B=10;B<b.length;B++){var K=b.words[B]|0;b.words[B-10]=(K&S)<<4|W>>>22,W=K}W>>>=22,b.words[B-10]=W,W===0&&b.length>10?b.length-=10:b.length-=9},F.prototype.imulK=function(b){b.words[b.length]=0,b.words[b.length+1]=0,b.length+=2;for(var w=0,S=0;S<b.length;S++){var C=b.words[S]|0;w+=C*977,b.words[S]=w&67108863,w=C*64+(w/67108864|0)}return b.words[b.length-1]===0&&(b.length--,b.words[b.length-1]===0&&b.length--),b};function q(){R.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(q,R);function D(){R.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(D,R);function z(){R.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(z,R),z.prototype.imulK=function(b){for(var w=0,S=0;S<b.length;S++){var C=(b.words[S]|0)*19+w,B=C&67108863;C>>>=26,b.words[S]=B,w=C}return w!==0&&(b.words[b.length++]=w),b},n._prime=function(b){if(A[b])return A[b];var w;if(b==="k256")w=new F;else if(b==="p224")w=new q;else if(b==="p192")w=new D;else if(b==="p25519")w=new z;else throw new Error("Unknown prime "+b);return A[b]=w,w};function G(P){if(typeof P=="string"){var b=n._prime(P);this.m=b.p,this.prime=b}else r(P.gtn(1),"modulus must be greater than 1"),this.m=P,this.prime=null}G.prototype._verify1=function(b){r(b.negative===0,"red works only with positives"),r(b.red,"red works only with red numbers")},G.prototype._verify2=function(b,w){r((b.negative|w.negative)==0,"red works only with positives"),r(b.red&&b.red===w.red,"red works only with red numbers")},G.prototype.imod=function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):b.umod(this.m)._forceRed(this)},G.prototype.neg=function(b){return b.isZero()?b.clone():this.m.sub(b)._forceRed(this)},G.prototype.add=function(b,w){this._verify2(b,w);var S=b.add(w);return S.cmp(this.m)>=0&&S.isub(this.m),S._forceRed(this)},G.prototype.iadd=function(b,w){this._verify2(b,w);var S=b.iadd(w);return S.cmp(this.m)>=0&&S.isub(this.m),S},G.prototype.sub=function(b,w){this._verify2(b,w);var S=b.sub(w);return S.cmpn(0)<0&&S.iadd(this.m),S._forceRed(this)},G.prototype.isub=function(b,w){this._verify2(b,w);var S=b.isub(w);return S.cmpn(0)<0&&S.iadd(this.m),S},G.prototype.shl=function(b,w){return this._verify1(b),this.imod(b.ushln(w))},G.prototype.imul=function(b,w){return this._verify2(b,w),this.imod(b.imul(w))},G.prototype.mul=function(b,w){return this._verify2(b,w),this.imod(b.mul(w))},G.prototype.isqr=function(b){return this.imul(b,b.clone())},G.prototype.sqr=function(b){return this.mul(b,b)},G.prototype.sqrt=function(b){if(b.isZero())return b.clone();var w=this.m.andln(3);if(r(w%2==1),w===3){var S=this.m.add(new n(1)).iushrn(2);return this.pow(b,S)}for(var C=this.m.subn(1),B=0;!C.isZero()&&C.andln(1)===0;)B++,C.iushrn(1);r(!C.isZero());var W=new n(1).toRed(this),K=W.redNeg(),M=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new n(2*_*_).toRed(this);this.pow(_,M).cmp(K)!==0;)_.redIAdd(K);for(var L=this.pow(_,C),ae=this.pow(b,C.addn(1).iushrn(1)),X=this.pow(b,C),ne=B;X.cmp(W)!==0;){for(var oe=X,de=0;oe.cmp(W)!==0;de++)oe=oe.redSqr();r(de<ne);var he=this.pow(L,new n(1).iushln(ne-de-1));ae=ae.redMul(he),L=he.redSqr(),X=X.redMul(L),ne=de}return ae},G.prototype.invm=function(b){var w=b._invmp(this.m);return w.negative!==0?(w.negative=0,this.imod(w).redNeg()):this.imod(w)},G.prototype.pow=function(b,w){if(w.isZero())return new n(1).toRed(this);if(w.cmpn(1)===0)return b.clone();var S=4,C=new Array(1<<S);C[0]=new n(1).toRed(this),C[1]=b;for(var B=2;B<C.length;B++)C[B]=this.mul(C[B-1],b);var W=C[0],K=0,M=0,_=w.bitLength()%26;for(_===0&&(_=26),B=w.length-1;B>=0;B--){for(var L=w.words[B],ae=_-1;ae>=0;ae--){var X=L>>ae&1;if(W!==C[0]&&(W=this.sqr(W)),X===0&&K===0){M=0;continue}K<<=1,K|=X,M++,!(M!==S&&(B!==0||ae!==0))&&(W=this.mul(W,C[K]),M=0,K=0)}_=26}return W},G.prototype.convertTo=function(b){var w=b.umod(this.m);return w===b?w.clone():w},G.prototype.convertFrom=function(b){var w=b.clone();return w.red=null,w},n.mont=function(b){return new Y(b)};function Y(P){G.call(this,P),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(Y,G),Y.prototype.convertTo=function(b){return this.imod(b.ushln(this.shift))},Y.prototype.convertFrom=function(b){var w=this.imod(b.mul(this.rinv));return w.red=null,w},Y.prototype.imul=function(b,w){if(b.isZero()||w.isZero())return b.words[0]=0,b.length=1,b;var S=b.imul(w),C=S.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),B=S.isub(C).iushrn(this.shift),W=B;return B.cmp(this.m)>=0?W=B.isub(this.m):B.cmpn(0)<0&&(W=B.iadd(this.m)),W._forceRed(this)},Y.prototype.mul=function(b,w){if(b.isZero()||w.isZero())return new n(0)._forceRed(this);var S=b.mul(w),C=S.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),B=S.isub(C).iushrn(this.shift),W=B;return B.cmp(this.m)>=0?W=B.isub(this.m):B.cmpn(0)<0&&(W=B.iadd(this.m)),W._forceRed(this)},Y.prototype.invm=function(b){var w=this.imod(b._invmp(this.m).mul(this.r2));return w._forceRed(this)}})(typeof b9=="undefined"||b9,WN)});var Gu=p((i_t,XN)=>{l();XN.exports=YN;function YN(t,e){if(!t)throw new Error(e||"Assertion failed")}YN.equal=function(e,r,i){if(e!=r)throw new Error(i||"Assertion failed: "+e+" != "+r)}});var m9=p(JN=>{l();"use strict";var h4=JN;function pRe(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t!="string"){for(var i=0;i<t.length;i++)r[i]=t[i]|0;return r}if(e==="hex"){t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!=0&&(t="0"+t);for(var i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var i=0;i<t.length;i++){var n=t.charCodeAt(i),s=n>>8,o=n&255;s?r.push(s,o):r.push(o)}return r}h4.toArray=pRe;function QN(t){return t.length===1?"0"+t:t}h4.zero2=QN;function ZN(t){for(var e="",r=0;r<t.length;r++)e+=QN(t[r].toString(16));return e}h4.toHex=ZN;h4.encode=function(e,r){return r==="hex"?ZN(e):e}});var os=p(eB=>{l();"use strict";var xo=eB,yRe=Ia(),gRe=Gu(),p4=m9();xo.assert=gRe;xo.toArray=p4.toArray;xo.zero2=p4.zero2;xo.toHex=p4.toHex;xo.encode=p4.encode;function bRe(t,e,r){var i=new Array(Math.max(t.bitLength(),r)+1);i.fill(0);for(var n=1<<e+1,s=t.clone(),o=0;o<i.length;o++){var a,c=s.andln(n-1);s.isOdd()?(c>(n>>1)-1?a=(n>>1)-c:a=c,s.isubn(a)):a=0,i[o]=a,s.iushrn(1)}return i}xo.getNAF=bRe;function mRe(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var i=0,n=0,s;t.cmpn(-i)>0||e.cmpn(-n)>0;){var o=t.andln(3)+i&3,a=e.andln(3)+n&3;o===3&&(o=-1),a===3&&(a=-1);var c;(o&1)==0?c=0:(s=t.andln(7)+i&7,(s===3||s===5)&&a===2?c=-o:c=o),r[0].push(c);var u;(a&1)==0?u=0:(s=e.andln(7)+n&7,(s===3||s===5)&&o===2?u=-a:u=a),r[1].push(u),2*i===c+1&&(i=1-i),2*n===u+1&&(n=1-n),t.iushrn(1),e.iushrn(1)}return r}xo.getJSF=mRe;function vRe(t,e,r){var i="_"+e;t.prototype[e]=function(){return this[i]!==void 0?this[i]:this[i]=r.call(this)}}xo.cachedProperty=vRe;function wRe(t){return typeof t=="string"?xo.toArray(t,"hex"):t}xo.parseBytes=wRe;function _Re(t){return new yRe(t,"hex","le")}xo.intFromLE=_Re});var E9=p((o_t,_9)=>{l();var v9;_9.exports=function(e){return v9||(v9=new Wu(null)),v9.generate(e)};function Wu(t){this.rand=t}_9.exports.Rand=Wu;Wu.prototype.generate=function(e){return this._rand(e)};Wu.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),i=0;i<r.length;i++)r[i]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Wu.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?Wu.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(Wu.prototype._rand=function(){throw new Error("Not implemented yet")});else try{if(w9=wh(),typeof w9.randomBytes!="function")throw new Error("Not supported");Wu.prototype._rand=function(e){return w9.randomBytes(e)}}catch(t){}var w9});var T2=p((a_t,tB)=>{l();"use strict";var _l=Ia(),I2=os(),y4=I2.getNAF,ERe=I2.getJSF,g4=I2.assert;function Yu(t,e){this.type=t,this.p=new _l(e.p,16),this.red=e.prime?_l.red(e.prime):_l.mont(this.p),this.zero=new _l(0).toRed(this.red),this.one=new _l(1).toRed(this.red),this.two=new _l(2).toRed(this.red),this.n=e.n&&new _l(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}tB.exports=Yu;Yu.prototype.point=function(){throw new Error("Not implemented")};Yu.prototype.validate=function(){throw new Error("Not implemented")};Yu.prototype._fixedNafMul=function(e,r){g4(e.precomputed);var i=e._getDoubles(),n=y4(r,1,this._bitLength),s=(1<<i.step+1)-(i.step%2==0?2:1);s/=3;var o=[],a,c;for(a=0;a<n.length;a+=i.step){c=0;for(var u=a+i.step-1;u>=a;u--)c=(c<<1)+n[u];o.push(c)}for(var f=this.jpoint(null,null,null),d=this.jpoint(null,null,null),h=s;h>0;h--){for(a=0;a<o.length;a++)c=o[a],c===h?d=d.mixedAdd(i.points[a]):c===-h&&(d=d.mixedAdd(i.points[a].neg()));f=f.add(d)}return f.toP()};Yu.prototype._wnafMul=function(e,r){var i=4,n=e._getNAFPoints(i);i=n.wnd;for(var s=n.points,o=y4(r,i,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var u=0;c>=0&&o[c]===0;c--)u++;if(c>=0&&u++,a=a.dblp(u),c<0)break;var f=o[c];g4(f!==0),e.type==="affine"?f>0?a=a.mixedAdd(s[f-1>>1]):a=a.mixedAdd(s[-f-1>>1].neg()):f>0?a=a.add(s[f-1>>1]):a=a.add(s[-f-1>>1].neg())}return e.type==="affine"?a.toP():a};Yu.prototype._wnafMulAdd=function(e,r,i,n,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,u=0,f,d,h;for(f=0;f<n;f++){h=r[f];var y=h._getNAFPoints(e);o[f]=y.wnd,a[f]=y.points}for(f=n-1;f>=1;f-=2){var g=f-1,m=f;if(o[g]!==1||o[m]!==1){c[g]=y4(i[g],o[g],this._bitLength),c[m]=y4(i[m],o[m],this._bitLength),u=Math.max(c[g].length,u),u=Math.max(c[m].length,u);continue}var E=[r[g],null,null,r[m]];r[g].y.cmp(r[m].y)===0?(E[1]=r[g].add(r[m]),E[2]=r[g].toJ().mixedAdd(r[m].neg())):r[g].y.cmp(r[m].y.redNeg())===0?(E[1]=r[g].toJ().mixedAdd(r[m]),E[2]=r[g].add(r[m].neg())):(E[1]=r[g].toJ().mixedAdd(r[m]),E[2]=r[g].toJ().mixedAdd(r[m].neg()));var v=[-3,-1,-5,-7,0,7,5,1,3],A=ERe(i[g],i[m]);for(u=Math.max(A[0].length,u),c[g]=new Array(u),c[m]=new Array(u),d=0;d<u;d++){var R=A[0][d]|0,F=A[1][d]|0;c[g][d]=v[(R+1)*3+(F+1)],c[m][d]=0,a[g]=E}}var q=this.jpoint(null,null,null),D=this._wnafT4;for(f=u;f>=0;f--){for(var z=0;f>=0;){var G=!0;for(d=0;d<n;d++)D[d]=c[d][f]|0,D[d]!==0&&(G=!1);if(!G)break;z++,f--}if(f>=0&&z++,q=q.dblp(z),f<0)break;for(d=0;d<n;d++){var Y=D[d];Y!==0&&(Y>0?h=a[d][Y-1>>1]:Y<0&&(h=a[d][-Y-1>>1].neg()),h.type==="affine"?q=q.mixedAdd(h):q=q.add(h))}}for(f=0;f<n;f++)a[f]=null;return s?q:q.toP()};function Ds(t,e){this.curve=t,this.type=e,this.precomputed=null}Yu.BasePoint=Ds;Ds.prototype.eq=function(){throw new Error("Not implemented")};Ds.prototype.validate=function(){return this.curve.validate(this)};Yu.prototype.decodePoint=function(e,r){e=I2.toArray(e,r);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1==2*i){e[0]===6?g4(e[e.length-1]%2==0):e[0]===7&&g4(e[e.length-1]%2==1);var n=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return n}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")};Ds.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Ds.prototype._encode=function(e){var r=this.curve.p.byteLength(),i=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",r))};Ds.prototype.encode=function(e,r){return I2.encode(this._encode(r),e)};Ds.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Ds.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Ds.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],n=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)n=n.dbl();i.push(n)}return{step:e,points:i}};Ds.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],i=(1<<e)-1,n=i===1?null:this.dbl(),s=1;s<i;s++)r[s]=r[s-1].add(n);return{wnd:e,points:r}};Ds.prototype._getBeta=function(){return null};Ds.prototype.dblp=function(e){for(var r=this,i=0;i<e;i++)r=r.dbl();return r}});var Xi=p((c_t,S9)=>{l();typeof Object.create=="function"?S9.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:S9.exports=function(e,r){if(r){e.super_=r;var i=function(){};i.prototype=r.prototype,e.prototype=new i,e.prototype.constructor=e}}});var iB=p((u_t,rB)=>{l();"use strict";var SRe=os(),Vr=Ia(),x9=Xi(),Oh=T2(),xRe=SRe.assert;function Ns(t){Oh.call(this,"short",t),this.a=new Vr(t.a,16).toRed(this.red),this.b=new Vr(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}x9(Ns,Oh);rB.exports=Ns;Ns.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,i;if(e.beta)r=new Vr(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);r=n[0].cmp(n[1])<0?n[0]:n[1],r=r.toRed(this.red)}if(e.lambda)i=new Vr(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?i=s[0]:(i=s[1],xRe(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new Vr(a.a,16),b:new Vr(a.b,16)}}):o=this._getEndoBasis(i),{beta:r,lambda:i,basis:o}}};Ns.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Vr.mont(e),i=new Vr(2).toRed(r).redInvm(),n=i.redNeg(),s=new Vr(3).toRed(r).redNeg().redSqrt().redMul(i),o=n.redAdd(s).fromRed(),a=n.redSub(s).fromRed();return[o,a]};Ns.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,n=this.n.clone(),s=new Vr(1),o=new Vr(0),a=new Vr(0),c=new Vr(1),u,f,d,h,y,g,m,E=0,v,A;i.cmpn(0)!==0;){var R=n.div(i);v=n.sub(R.mul(i)),A=a.sub(R.mul(s));var F=c.sub(R.mul(o));if(!d&&v.cmp(r)<0)u=m.neg(),f=s,d=v.neg(),h=A;else if(d&&++E==2)break;m=v,n=i,i=v,a=s,s=A,c=o,o=F}y=v.neg(),g=A;var q=d.sqr().add(h.sqr()),D=y.sqr().add(g.sqr());return D.cmp(q)>=0&&(y=u,g=f),d.negative&&(d=d.neg(),h=h.neg()),y.negative&&(y=y.neg(),g=g.neg()),[{a:d,b:h},{a:y,b:g}]};Ns.prototype._endoSplit=function(e){var r=this.endo.basis,i=r[0],n=r[1],s=n.b.mul(e).divRound(this.n),o=i.b.neg().mul(e).divRound(this.n),a=s.mul(i.a),c=o.mul(n.a),u=s.mul(i.b),f=o.mul(n.b),d=e.sub(a).sub(c),h=u.add(f).neg();return{k1:d,k2:h}};Ns.prototype.pointFromX=function(e,r){e=new Vr(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(n.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var s=n.fromRed().isOdd();return(r&&!s||!r&&s)&&(n=n.redNeg()),this.point(e,n)};Ns.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,i=e.y,n=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(n).redIAdd(this.b);return i.redSqr().redISub(s).cmpn(0)===0};Ns.prototype._endoWnafMulAdd=function(e,r,i){for(var n=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),c=e[o],u=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),n[o*2]=c,n[o*2+1]=u,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var f=this._wnafMulAdd(1,n,s,o*2,i),d=0;d<o*2;d++)n[d]=null,s[d]=null;return f};function Li(t,e,r,i){Oh.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Vr(e,16),this.y=new Vr(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}x9(Li,Oh.BasePoint);Ns.prototype.point=function(e,r,i){return new Li(this,e,r,i)};Ns.prototype.pointFromJSON=function(e,r){return Li.fromJSON(this,e,r)};Li.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,n=function(s){return i.point(s.x.redMul(i.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return r}};Li.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Li.fromJSON=function(e,r,i){typeof r=="string"&&(r=JSON.parse(r));var n=e.point(r[0],r[1],i);if(!r[2])return n;function s(a){return e.point(a[0],a[1],i)}var o=r[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(s))}},n};Li.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Li.prototype.isInfinity=function(){return this.inf};Li.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var i=r.redSqr().redISub(this.x).redISub(e.x),n=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)};Li.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,i=this.x.redSqr(),n=e.redInvm(),s=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(n),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};Li.prototype.getX=function(){return this.x.fromRed()};Li.prototype.getY=function(){return this.y.fromRed()};Li.prototype.mul=function(e){return e=new Vr(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Li.prototype.mulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s):this.curve._wnafMulAdd(1,n,s,2)};Li.prototype.jmulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s,!0):this.curve._wnafMulAdd(1,n,s,2,!0)};Li.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Li.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,n=function(s){return s.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return r};Li.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Qi(t,e,r,i){Oh.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Vr(0)):(this.x=new Vr(e,16),this.y=new Vr(r,16),this.z=new Vr(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}x9(Qi,Oh.BasePoint);Ns.prototype.jpoint=function(e,r,i){return new Qi(this,e,r,i)};Qi.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),i=this.x.redMul(r),n=this.y.redMul(r).redMul(e);return this.curve.point(i,n)};Qi.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Qi.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),i=this.z.redSqr(),n=this.x.redMul(r),s=e.x.redMul(i),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(i.redMul(this.z)),c=n.redSub(s),u=o.redSub(a);if(c.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=c.redSqr(),d=f.redMul(c),h=n.redMul(f),y=u.redSqr().redIAdd(d).redISub(h).redISub(h),g=u.redMul(h.redISub(y)).redISub(o.redMul(d)),m=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(y,g,m)};Qi.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),i=this.x,n=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=i.redSub(n),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),f=u.redMul(a),d=i.redMul(u),h=c.redSqr().redIAdd(f).redISub(d).redISub(d),y=c.redMul(d.redISub(h)).redISub(s.redMul(f)),g=this.z.redMul(a);return this.curve.jpoint(h,y,g)};Qi.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<e;r++)i=i.dbl();return i}var n=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,u=c.redSqr().redSqr(),f=a.redAdd(a);for(r=0;r<e;r++){var d=o.redSqr(),h=f.redSqr(),y=h.redSqr(),g=d.redAdd(d).redIAdd(d).redIAdd(n.redMul(u)),m=o.redMul(h),E=g.redSqr().redISub(m.redAdd(m)),v=m.redISub(E),A=g.redMul(v);A=A.redIAdd(A).redISub(y);var R=f.redMul(c);r+1<e&&(u=u.redMul(y)),o=E,c=R,f=A}return this.curve.jpoint(o,f.redMul(s),c)};Qi.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Qi.prototype._zeroDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var c=n.redAdd(n).redIAdd(n),u=c.redSqr().redISub(a).redISub(a),f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),e=u,r=c.redMul(a.redISub(u)).redISub(f),i=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),h=this.y.redSqr(),y=h.redSqr(),g=this.x.redAdd(h).redSqr().redISub(d).redISub(y);g=g.redIAdd(g);var m=d.redAdd(d).redIAdd(d),E=m.redSqr(),v=y.redIAdd(y);v=v.redIAdd(v),v=v.redIAdd(v),e=E.redISub(g).redISub(g),r=m.redMul(g.redISub(e)).redISub(v),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,r,i)};Qi.prototype._threeDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var c=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=c.redSqr().redISub(a).redISub(a);e=u;var f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),r=c.redMul(a.redISub(u)).redISub(f),i=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),h=this.y.redSqr(),y=this.x.redMul(h),g=this.x.redSub(d).redMul(this.x.redAdd(d));g=g.redAdd(g).redIAdd(g);var m=y.redIAdd(y);m=m.redIAdd(m);var E=m.redAdd(m);e=g.redSqr().redISub(E),i=this.y.redAdd(this.z).redSqr().redISub(h).redISub(d);var v=h.redSqr();v=v.redIAdd(v),v=v.redIAdd(v),v=v.redIAdd(v),r=g.redMul(m.redISub(e)).redISub(v)}return this.curve.jpoint(e,r,i)};Qi.prototype._dbl=function(){var e=this.curve.a,r=this.x,i=this.y,n=this.z,s=n.redSqr().redSqr(),o=r.redSqr(),a=i.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),u=r.redAdd(r);u=u.redIAdd(u);var f=u.redMul(a),d=c.redSqr().redISub(f.redAdd(f)),h=f.redISub(d),y=a.redSqr();y=y.redIAdd(y),y=y.redIAdd(y),y=y.redIAdd(y);var g=c.redMul(h).redISub(y),m=i.redAdd(i).redMul(n);return this.curve.jpoint(d,g,m)};Qi.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),n=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(n);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),u=n.redIAdd(n);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var f=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(u),d=r.redMul(f);d=d.redIAdd(d),d=d.redIAdd(d);var h=this.x.redMul(c).redISub(d);h=h.redIAdd(h),h=h.redIAdd(h);var y=this.y.redMul(f.redMul(u.redISub(f)).redISub(a.redMul(c)));y=y.redIAdd(y),y=y.redIAdd(y),y=y.redIAdd(y);var g=this.z.redAdd(a).redSqr().redISub(i).redISub(c);return this.curve.jpoint(h,y,g)};Qi.prototype.mul=function(e,r){return e=new Vr(e,r),this.curve._wnafMul(this,e)};Qi.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var n=r.redMul(this.z),s=i.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(n)).cmpn(0)===0};Qi.prototype.eqXToP=function(e){var r=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return!0;for(var n=e.clone(),s=this.curve.redN.redMul(r);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(s),this.x.cmp(i)===0)return!0}};Qi.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Qi.prototype.isInfinity=function(){return this.z.cmpn(0)===0}});var oB=p((f_t,sB)=>{l();"use strict";var kh=Ia(),nB=Xi(),b4=T2(),ARe=os();function qh(t){b4.call(this,"mont",t),this.a=new kh(t.a,16).toRed(this.red),this.b=new kh(t.b,16).toRed(this.red),this.i4=new kh(4).toRed(this.red).redInvm(),this.two=new kh(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}nB(qh,b4);sB.exports=qh;qh.prototype.validate=function(e){var r=e.normalize().x,i=r.redSqr(),n=i.redMul(r).redAdd(i.redMul(this.a)).redAdd(r),s=n.redSqrt();return s.redSqr().cmp(n)===0};function Ui(t,e,r){b4.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new kh(e,16),this.z=new kh(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}nB(Ui,b4.BasePoint);qh.prototype.decodePoint=function(e,r){return this.point(ARe.toArray(e,r),1)};qh.prototype.point=function(e,r){return new Ui(this,e,r)};qh.prototype.pointFromJSON=function(e){return Ui.fromJSON(this,e)};Ui.prototype.precompute=function(){};Ui.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Ui.fromJSON=function(e,r){return new Ui(e,r[0],r[1]||e.one)};Ui.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Ui.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Ui.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),i=this.x.redSub(this.z),n=i.redSqr(),s=r.redSub(n),o=r.redMul(n),a=s.redMul(n.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,a)};Ui.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Ui.prototype.diffAdd=function(e,r){var i=this.x.redAdd(this.z),n=this.x.redSub(this.z),s=e.x.redAdd(e.z),o=e.x.redSub(e.z),a=o.redMul(i),c=s.redMul(n),u=r.z.redMul(a.redAdd(c).redSqr()),f=r.x.redMul(a.redISub(c).redSqr());return this.curve.point(u,f)};Ui.prototype.mul=function(e){for(var r=e.clone(),i=this,n=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var a=o.length-1;a>=0;a--)o[a]===0?(i=i.diffAdd(n,s),n=n.dbl()):(n=i.diffAdd(n,s),i=i.dbl());return n};Ui.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Ui.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Ui.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Ui.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Ui.prototype.getX=function(){return this.normalize(),this.x.fromRed()}});var uB=p((l_t,cB)=>{l();"use strict";var IRe=os(),Uc=Ia(),aB=Xi(),m4=T2(),TRe=IRe.assert;function Ta(t){this.twisted=(t.a|0)!=1,this.mOneA=this.twisted&&(t.a|0)==-1,this.extended=this.mOneA,m4.call(this,"edwards",t),this.a=new Uc(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Uc(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Uc(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),TRe(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)==1}aB(Ta,m4);cB.exports=Ta;Ta.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};Ta.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};Ta.prototype.jpoint=function(e,r,i,n){return this.point(e,r,i,n)};Ta.prototype.pointFromX=function(e,r){e=new Uc(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),n=this.c2.redSub(this.a.redMul(i)),s=this.one.redSub(this.c2.redMul(this.d).redMul(i)),o=n.redMul(s.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var c=a.fromRed().isOdd();return(r&&!c||!r&&c)&&(a=a.redNeg()),this.point(e,a)};Ta.prototype.pointFromY=function(e,r){e=new Uc(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),n=i.redSub(this.c2),s=i.redMul(this.d).redMul(this.c2).redSub(this.a),o=n.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,e)};Ta.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),i=e.y.redSqr(),n=r.redMul(this.a).redAdd(i),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(i)));return n.cmp(s)===0};function or(t,e,r,i,n){m4.BasePoint.call(this,t,"projective"),e===null&&r===null&&i===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Uc(e,16),this.y=new Uc(r,16),this.z=i?new Uc(i,16):this.curve.one,this.t=n&&new Uc(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}aB(or,m4.BasePoint);Ta.prototype.pointFromJSON=function(e){return or.fromJSON(this,e)};Ta.prototype.point=function(e,r,i,n){return new or(this,e,r,i,n)};or.fromJSON=function(e,r){return new or(e,r[0],r[1],r[2])};or.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};or.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};or.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var n=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),o=n.redAdd(r),a=o.redSub(i),c=n.redSub(r),u=s.redMul(a),f=o.redMul(c),d=s.redMul(c),h=a.redMul(o);return this.curve.point(u,f,h,d)};or.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),i=this.y.redSqr(),n,s,o,a,c,u;if(this.curve.twisted){a=this.curve._mulA(r);var f=a.redAdd(i);this.zOne?(n=e.redSub(r).redSub(i).redMul(f.redSub(this.curve.two)),s=f.redMul(a.redSub(i)),o=f.redSqr().redSub(f).redSub(f)):(c=this.z.redSqr(),u=f.redSub(c).redISub(c),n=e.redSub(r).redISub(i).redMul(u),s=f.redMul(a.redSub(i)),o=f.redMul(u))}else a=r.redAdd(i),c=this.curve._mulC(this.z).redSqr(),u=a.redSub(c).redSub(c),n=this.curve._mulC(e.redISub(a)).redMul(u),s=this.curve._mulC(a).redMul(r.redISub(i)),o=a.redMul(u);return this.curve.point(n,s,o)};or.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};or.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),o=i.redSub(r),a=s.redSub(n),c=s.redAdd(n),u=i.redAdd(r),f=o.redMul(a),d=c.redMul(u),h=o.redMul(u),y=a.redMul(c);return this.curve.point(f,d,y,h)};or.prototype._projAdd=function(e){var r=this.z.redMul(e.z),i=r.redSqr(),n=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(n).redMul(s),a=i.redSub(o),c=i.redAdd(o),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(n).redISub(s),f=r.redMul(a).redMul(u),d,h;return this.curve.twisted?(d=r.redMul(c).redMul(s.redSub(this.curve._mulA(n))),h=a.redMul(c)):(d=r.redMul(c).redMul(s.redSub(n)),h=this.curve._mulC(a).redMul(c)),this.curve.point(f,d,h)};or.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};or.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};or.prototype.mulAdd=function(e,r,i){return this.curve._wnafMulAdd(1,[this,r],[e,i],2,!1)};or.prototype.jmulAdd=function(e,r,i){return this.curve._wnafMulAdd(1,[this,r],[e,i],2,!0)};or.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};or.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};or.prototype.getX=function(){return this.normalize(),this.x.fromRed()};or.prototype.getY=function(){return this.normalize(),this.y.fromRed()};or.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};or.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var i=e.clone(),n=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),this.x.cmp(r)===0)return!0}};or.prototype.toP=or.prototype.normalize;or.prototype.mixedAdd=or.prototype.add});var A9=p(fB=>{l();"use strict";var v4=fB;v4.base=T2();v4.short=iB();v4.mont=oB();v4.edwards=uB()});var Ao=p(Jt=>{l();"use strict";var RRe=Gu(),PRe=Xi();Jt.inherits=PRe;function CRe(t,e){return(t.charCodeAt(e)&64512)!=55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)==56320}function ORe(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!=0&&(t="0"+t),n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(var i=0,n=0;n<t.length;n++){var s=t.charCodeAt(n);s<128?r[i++]=s:s<2048?(r[i++]=s>>6|192,r[i++]=s&63|128):CRe(t,n)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),r[i++]=s>>18|240,r[i++]=s>>12&63|128,r[i++]=s>>6&63|128,r[i++]=s&63|128):(r[i++]=s>>12|224,r[i++]=s>>6&63|128,r[i++]=s&63|128)}else for(n=0;n<t.length;n++)r[n]=t[n]|0;return r}Jt.toArray=ORe;function kRe(t){for(var e="",r=0;r<t.length;r++)e+=dB(t[r].toString(16));return e}Jt.toHex=kRe;function lB(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Jt.htonl=lB;function qRe(t,e){for(var r="",i=0;i<t.length;i++){var n=t[i];e==="little"&&(n=lB(n)),r+=hB(n.toString(16))}return r}Jt.toHex32=qRe;function dB(t){return t.length===1?"0"+t:t}Jt.zero2=dB;function hB(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Jt.zero8=hB;function DRe(t,e,r,i){var n=r-e;RRe(n%4==0);for(var s=new Array(n/4),o=0,a=e;o<s.length;o++,a+=4){var c;i==="big"?c=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:c=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=c>>>0}return s}Jt.join32=DRe;function NRe(t,e){for(var r=new Array(t.length*4),i=0,n=0;i<t.length;i++,n+=4){var s=t[i];e==="big"?(r[n]=s>>>24,r[n+1]=s>>>16&255,r[n+2]=s>>>8&255,r[n+3]=s&255):(r[n+3]=s>>>24,r[n+2]=s>>>16&255,r[n+1]=s>>>8&255,r[n]=s&255)}return r}Jt.split32=NRe;function BRe(t,e){return t>>>e|t<<32-e}Jt.rotr32=BRe;function MRe(t,e){return t<<e|t>>>32-e}Jt.rotl32=MRe;function LRe(t,e){return t+e>>>0}Jt.sum32=LRe;function URe(t,e,r){return t+e+r>>>0}Jt.sum32_3=URe;function FRe(t,e,r,i){return t+e+r+i>>>0}Jt.sum32_4=FRe;function jRe(t,e,r,i,n){return t+e+r+i+n>>>0}Jt.sum32_5=jRe;function KRe(t,e,r,i){var n=t[e],s=t[e+1],o=i+s>>>0,a=(o<i?1:0)+r+n;t[e]=a>>>0,t[e+1]=o}Jt.sum64=KRe;function VRe(t,e,r,i){var n=e+i>>>0,s=(n<e?1:0)+t+r;return s>>>0}Jt.sum64_hi=VRe;function zRe(t,e,r,i){var n=e+i;return n>>>0}Jt.sum64_lo=zRe;function HRe(t,e,r,i,n,s,o,a){var c=0,u=e;u=u+i>>>0,c+=u<e?1:0,u=u+s>>>0,c+=u<s?1:0,u=u+a>>>0,c+=u<a?1:0;var f=t+r+n+o+c;return f>>>0}Jt.sum64_4_hi=HRe;function $Re(t,e,r,i,n,s,o,a){var c=e+i+s+a;return c>>>0}Jt.sum64_4_lo=$Re;function GRe(t,e,r,i,n,s,o,a,c,u){var f=0,d=e;d=d+i>>>0,f+=d<e?1:0,d=d+s>>>0,f+=d<s?1:0,d=d+a>>>0,f+=d<a?1:0,d=d+u>>>0,f+=d<u?1:0;var h=t+r+n+o+c+f;return h>>>0}Jt.sum64_5_hi=GRe;function WRe(t,e,r,i,n,s,o,a,c,u){var f=e+i+s+a+u;return f>>>0}Jt.sum64_5_lo=WRe;function YRe(t,e,r){var i=e<<32-r|t>>>r;return i>>>0}Jt.rotr64_hi=YRe;function XRe(t,e,r){var i=t<<32-r|e>>>r;return i>>>0}Jt.rotr64_lo=XRe;function QRe(t,e,r){return t>>>r}Jt.shr64_hi=QRe;function ZRe(t,e,r){var i=t<<32-r|e>>>r;return i>>>0}Jt.shr64_lo=ZRe});var Dh=p(yB=>{l();"use strict";var pB=Ao(),JRe=Gu();function w4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}yB.BlockHash=w4;w4.prototype.update=function(e,r){if(e=pB.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var i=e.length%this._delta8;this.pending=e.slice(e.length-i,e.length),this.pending.length===0&&(this.pending=null),e=pB.join32(e,0,e.length-i,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this};w4.prototype.digest=function(e){return this.update(this._pad()),JRe(this.pending===null),this._digest(e)};w4.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,i=r-(e+this.padLength)%r,n=new Array(i+this.padLength);n[0]=128;for(var s=1;s<i;s++)n[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)n[s++]=0;n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=e>>>24&255,n[s++]=e>>>16&255,n[s++]=e>>>8&255,n[s++]=e&255}else for(n[s++]=e&255,n[s++]=e>>>8&255,n[s++]=e>>>16&255,n[s++]=e>>>24&255,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,o=8;o<this.padLength;o++)n[s++]=0;return n}});var I9=p(Fc=>{l();"use strict";var ePe=Ao(),Ra=ePe.rotr32;function tPe(t,e,r,i){if(t===0)return gB(e,r,i);if(t===1||t===3)return mB(e,r,i);if(t===2)return bB(e,r,i)}Fc.ft_1=tPe;function gB(t,e,r){return t&e^~t&r}Fc.ch32=gB;function bB(t,e,r){return t&e^t&r^e&r}Fc.maj32=bB;function mB(t,e,r){return t^e^r}Fc.p32=mB;function rPe(t){return Ra(t,2)^Ra(t,13)^Ra(t,22)}Fc.s0_256=rPe;function iPe(t){return Ra(t,6)^Ra(t,11)^Ra(t,25)}Fc.s1_256=iPe;function nPe(t){return Ra(t,7)^Ra(t,18)^t>>>3}Fc.g0_256=nPe;function sPe(t){return Ra(t,17)^Ra(t,19)^t>>>10}Fc.g1_256=sPe});var _B=p((g_t,wB)=>{l();"use strict";var Nh=Ao(),oPe=Dh(),aPe=I9(),T9=Nh.rotl32,R2=Nh.sum32,cPe=Nh.sum32_5,uPe=aPe.ft_1,vB=oPe.BlockHash,fPe=[1518500249,1859775393,2400959708,3395469782];function Pa(){if(!(this instanceof Pa))return new Pa;vB.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Nh.inherits(Pa,vB);wB.exports=Pa;Pa.blockSize=512;Pa.outSize=160;Pa.hmacStrength=80;Pa.padLength=64;Pa.prototype._update=function(e,r){for(var i=this.W,n=0;n<16;n++)i[n]=e[r+n];for(;n<i.length;n++)i[n]=T9(i[n-3]^i[n-8]^i[n-14]^i[n-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],u=this.h[4];for(n=0;n<i.length;n++){var f=~~(n/20),d=cPe(T9(s,5),uPe(f,o,a,c),u,i[n],fPe[f]);u=c,c=a,a=T9(o,30),o=s,s=d}this.h[0]=R2(this.h[0],s),this.h[1]=R2(this.h[1],o),this.h[2]=R2(this.h[2],a),this.h[3]=R2(this.h[3],c),this.h[4]=R2(this.h[4],u)};Pa.prototype._digest=function(e){return e==="hex"?Nh.toHex32(this.h,"big"):Nh.split32(this.h,"big")}});var R9=p((b_t,SB)=>{l();"use strict";var Bh=Ao(),lPe=Dh(),Mh=I9(),dPe=Gu(),Io=Bh.sum32,hPe=Bh.sum32_4,pPe=Bh.sum32_5,yPe=Mh.ch32,gPe=Mh.maj32,bPe=Mh.s0_256,mPe=Mh.s1_256,vPe=Mh.g0_256,wPe=Mh.g1_256,EB=lPe.BlockHash,_Pe=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ca(){if(!(this instanceof Ca))return new Ca;EB.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=_Pe,this.W=new Array(64)}Bh.inherits(Ca,EB);SB.exports=Ca;Ca.blockSize=512;Ca.outSize=256;Ca.hmacStrength=192;Ca.padLength=64;Ca.prototype._update=function(e,r){for(var i=this.W,n=0;n<16;n++)i[n]=e[r+n];for(;n<i.length;n++)i[n]=hPe(wPe(i[n-2]),i[n-7],vPe(i[n-15]),i[n-16]);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],u=this.h[4],f=this.h[5],d=this.h[6],h=this.h[7];for(dPe(this.k.length===i.length),n=0;n<i.length;n++){var y=pPe(h,mPe(u),yPe(u,f,d),this.k[n],i[n]),g=Io(bPe(s),gPe(s,o,a));h=d,d=f,f=u,u=Io(c,y),c=a,a=o,o=s,s=Io(y,g)}this.h[0]=Io(this.h[0],s),this.h[1]=Io(this.h[1],o),this.h[2]=Io(this.h[2],a),this.h[3]=Io(this.h[3],c),this.h[4]=Io(this.h[4],u),this.h[5]=Io(this.h[5],f),this.h[6]=Io(this.h[6],d),this.h[7]=Io(this.h[7],h)};Ca.prototype._digest=function(e){return e==="hex"?Bh.toHex32(this.h,"big"):Bh.split32(this.h,"big")}});var IB=p((m_t,AB)=>{l();"use strict";var P9=Ao(),xB=R9();function jc(){if(!(this instanceof jc))return new jc;xB.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}P9.inherits(jc,xB);AB.exports=jc;jc.blockSize=512;jc.outSize=224;jc.hmacStrength=192;jc.padLength=64;jc.prototype._digest=function(e){return e==="hex"?P9.toHex32(this.h.slice(0,7),"big"):P9.split32(this.h.slice(0,7),"big")}});var k9=p((v_t,CB)=>{l();"use strict";var Kn=Ao(),EPe=Dh(),SPe=Gu(),Oa=Kn.rotr64_hi,ka=Kn.rotr64_lo,TB=Kn.shr64_hi,RB=Kn.shr64_lo,Xu=Kn.sum64,C9=Kn.sum64_hi,O9=Kn.sum64_lo,xPe=Kn.sum64_4_hi,APe=Kn.sum64_4_lo,IPe=Kn.sum64_5_hi,TPe=Kn.sum64_5_lo,PB=EPe.BlockHash,RPe=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function To(){if(!(this instanceof To))return new To;PB.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=RPe,this.W=new Array(160)}Kn.inherits(To,PB);CB.exports=To;To.blockSize=1024;To.outSize=512;To.hmacStrength=192;To.padLength=128;To.prototype._prepareBlock=function(e,r){for(var i=this.W,n=0;n<32;n++)i[n]=e[r+n];for(;n<i.length;n+=2){var s=UPe(i[n-4],i[n-3]),o=FPe(i[n-4],i[n-3]),a=i[n-14],c=i[n-13],u=MPe(i[n-30],i[n-29]),f=LPe(i[n-30],i[n-29]),d=i[n-32],h=i[n-31];i[n]=xPe(s,o,a,c,u,f,d,h),i[n+1]=APe(s,o,a,c,u,f,d,h)}};To.prototype._update=function(e,r){this._prepareBlock(e,r);var i=this.W,n=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],u=this.h[5],f=this.h[6],d=this.h[7],h=this.h[8],y=this.h[9],g=this.h[10],m=this.h[11],E=this.h[12],v=this.h[13],A=this.h[14],R=this.h[15];SPe(this.k.length===i.length);for(var F=0;F<i.length;F+=2){var q=A,D=R,z=NPe(h,y),G=BPe(h,y),Y=PPe(h,y,g,m,E,v),P=CPe(h,y,g,m,E,v),b=this.k[F],w=this.k[F+1],S=i[F],C=i[F+1],B=IPe(q,D,z,G,Y,P,b,w,S,C),W=TPe(q,D,z,G,Y,P,b,w,S,C);q=qPe(n,s),D=DPe(n,s),z=OPe(n,s,o,a,c,u),G=kPe(n,s,o,a,c,u);var K=C9(q,D,z,G),M=O9(q,D,z,G);A=E,R=v,E=g,v=m,g=h,m=y,h=C9(f,d,B,W),y=O9(d,d,B,W),f=c,d=u,c=o,u=a,o=n,a=s,n=C9(B,W,K,M),s=O9(B,W,K,M)}Xu(this.h,0,n,s),Xu(this.h,2,o,a),Xu(this.h,4,c,u),Xu(this.h,6,f,d),Xu(this.h,8,h,y),Xu(this.h,10,g,m),Xu(this.h,12,E,v),Xu(this.h,14,A,R)};To.prototype._digest=function(e){return e==="hex"?Kn.toHex32(this.h,"big"):Kn.split32(this.h,"big")};function PPe(t,e,r,i,n){var s=t&r^~t&n;return s<0&&(s+=4294967296),s}function CPe(t,e,r,i,n,s){var o=e&i^~e&s;return o<0&&(o+=4294967296),o}function OPe(t,e,r,i,n){var s=t&r^t&n^r&n;return s<0&&(s+=4294967296),s}function kPe(t,e,r,i,n,s){var o=e&i^e&s^i&s;return o<0&&(o+=4294967296),o}function qPe(t,e){var r=Oa(t,e,28),i=Oa(e,t,2),n=Oa(e,t,7),s=r^i^n;return s<0&&(s+=4294967296),s}function DPe(t,e){var r=ka(t,e,28),i=ka(e,t,2),n=ka(e,t,7),s=r^i^n;return s<0&&(s+=4294967296),s}function NPe(t,e){var r=Oa(t,e,14),i=Oa(t,e,18),n=Oa(e,t,9),s=r^i^n;return s<0&&(s+=4294967296),s}function BPe(t,e){var r=ka(t,e,14),i=ka(t,e,18),n=ka(e,t,9),s=r^i^n;return s<0&&(s+=4294967296),s}function MPe(t,e){var r=Oa(t,e,1),i=Oa(t,e,8),n=TB(t,e,7),s=r^i^n;return s<0&&(s+=4294967296),s}function LPe(t,e){var r=ka(t,e,1),i=ka(t,e,8),n=RB(t,e,7),s=r^i^n;return s<0&&(s+=4294967296),s}function UPe(t,e){var r=Oa(t,e,19),i=Oa(e,t,29),n=TB(t,e,6),s=r^i^n;return s<0&&(s+=4294967296),s}function FPe(t,e){var r=ka(t,e,19),i=ka(e,t,29),n=RB(t,e,6),s=r^i^n;return s<0&&(s+=4294967296),s}});var qB=p((w_t,kB)=>{l();"use strict";var q9=Ao(),OB=k9();function Kc(){if(!(this instanceof Kc))return new Kc;OB.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}q9.inherits(Kc,OB);kB.exports=Kc;Kc.blockSize=1024;Kc.outSize=384;Kc.hmacStrength=192;Kc.padLength=128;Kc.prototype._digest=function(e){return e==="hex"?q9.toHex32(this.h.slice(0,12),"big"):q9.split32(this.h.slice(0,12),"big")}});var DB=p(Lh=>{l();"use strict";Lh.sha1=_B();Lh.sha224=IB();Lh.sha256=R9();Lh.sha384=qB();Lh.sha512=k9()});var FB=p(UB=>{l();"use strict";var El=Ao(),jPe=Dh(),_4=El.rotl32,NB=El.sum32,P2=El.sum32_3,BB=El.sum32_4,MB=jPe.BlockHash;function qa(){if(!(this instanceof qa))return new qa;MB.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}El.inherits(qa,MB);UB.ripemd160=qa;qa.blockSize=512;qa.outSize=160;qa.hmacStrength=192;qa.padLength=64;qa.prototype._update=function(e,r){for(var i=this.h[0],n=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],c=i,u=n,f=s,d=o,h=a,y=0;y<80;y++){var g=NB(_4(BB(i,LB(y,n,s,o),e[zPe[y]+r],KPe(y)),$Pe[y]),a);i=a,a=o,o=_4(s,10),s=n,n=g,g=NB(_4(BB(c,LB(79-y,u,f,d),e[HPe[y]+r],VPe(y)),GPe[y]),h),c=h,h=d,d=_4(f,10),f=u,u=g}g=P2(this.h[1],s,d),this.h[1]=P2(this.h[2],o,h),this.h[2]=P2(this.h[3],a,c),this.h[3]=P2(this.h[4],i,u),this.h[4]=P2(this.h[0],n,f),this.h[0]=g};qa.prototype._digest=function(e){return e==="hex"?El.toHex32(this.h,"little"):El.split32(this.h,"little")};function LB(t,e,r,i){return t<=15?e^r^i:t<=31?e&r|~e&i:t<=47?(e|~r)^i:t<=63?e&i|r&~i:e^(r|~i)}function KPe(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function VPe(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var zPe=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],HPe=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],$Pe=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],GPe=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]});var KB=p((S_t,jB)=>{l();"use strict";var WPe=Ao(),YPe=Gu();function Uh(t,e,r){if(!(this instanceof Uh))return new Uh(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(WPe.toArray(e,r))}jB.exports=Uh;Uh.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),YPe(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};Uh.prototype.update=function(e,r){return this.inner.update(e,r),this};Uh.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}});var E4=p(VB=>{l();var Zi=VB;Zi.utils=Ao();Zi.common=Dh();Zi.sha=DB();Zi.ripemd=FB();Zi.hmac=KB();Zi.sha1=Zi.sha.sha1;Zi.sha256=Zi.sha.sha256;Zi.sha224=Zi.sha.sha224;Zi.sha384=Zi.sha.sha384;Zi.sha512=Zi.sha.sha512;Zi.ripemd160=Zi.ripemd.ripemd160});var HB=p((A_t,zB)=>{l();zB.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}});var S4=p(WB=>{l();"use strict";var D9=WB,Qu=E4(),N9=A9(),XPe=os(),$B=XPe.assert;function GB(t){t.type==="short"?this.curve=new N9.short(t):t.type==="edwards"?this.curve=new N9.edwards(t):this.curve=new N9.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,$B(this.g.validate(),"Invalid curve"),$B(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}D9.PresetCurve=GB;function Zu(t,e){Object.defineProperty(D9,t,{configurable:!0,enumerable:!0,get:function(){var r=new GB(e);return Object.defineProperty(D9,t,{configurable:!0,enumerable:!0,value:r}),r}})}Zu("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Qu.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});Zu("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Qu.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});Zu("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Qu.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});Zu("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Qu.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});Zu("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Qu.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});Zu("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Qu.sha256,gRed:!1,g:["9"]});Zu("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Qu.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var B9;try{B9=HB()}catch(t){B9=void 0}Zu("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Qu.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",B9]})});var QB=p((T_t,XB)=>{l();"use strict";var QPe=E4(),Sl=m9(),YB=Gu();function Ju(t){if(!(this instanceof Ju))return new Ju(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Sl.toArray(t.entropy,t.entropyEnc||"hex"),r=Sl.toArray(t.nonce,t.nonceEnc||"hex"),i=Sl.toArray(t.pers,t.persEnc||"hex");YB(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,i)}XB.exports=Ju;Ju.prototype._init=function(e,r,i){var n=e.concat(r).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656};Ju.prototype._hmac=function(){return new QPe.hmac(this.hash,this.K)};Ju.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),!!e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Ju.prototype.reseed=function(e,r,i,n){typeof r!="string"&&(n=i,i=r,r=null),e=Sl.toArray(e,r),i=Sl.toArray(i,n),YB(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1};Ju.prototype.generate=function(e,r,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(n=i,i=r,r=null),i&&(i=Sl.toArray(i,n||"hex"),this._update(i));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(i),this._reseed++,Sl.encode(o,r)}});var JB=p((R_t,ZB)=>{l();"use strict";var ZPe=Ia(),JPe=os(),M9=JPe.assert;function dn(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}ZB.exports=dn;dn.fromPublic=function(e,r,i){return r instanceof dn?r:new dn(e,{pub:r,pubEnc:i})};dn.fromPrivate=function(e,r,i){return r instanceof dn?r:new dn(e,{priv:r,privEnc:i})};dn.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};dn.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};dn.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};dn.prototype._importPrivate=function(e,r){this.priv=new ZPe(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};dn.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?M9(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&M9(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};dn.prototype.derive=function(e){return e.validate()||M9(e.validate(),"public point not validated"),e.mul(this.priv).getX()};dn.prototype.sign=function(e,r,i){return this.ec.sign(e,this,r,i)};dn.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};dn.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}});var rM=p((P_t,tM)=>{l();"use strict";var x4=Ia(),L9=os(),eCe=L9.assert;function A4(t,e){if(t instanceof A4)return t;this._importDER(t,e)||(eCe(t.r&&t.s,"Signature without r or s"),this.r=new x4(t.r,16),this.s=new x4(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}tM.exports=A4;function tCe(){this.place=0}function U9(t,e){var r=t[e.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4)return!1;for(var n=0,s=0,o=e.place;s<i;s++,o++)n<<=8,n|=t[o],n>>>=0;return n<=127?!1:(e.place=o,n)}function eM(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}A4.prototype._importDER=function(e,r){e=L9.toArray(e,r);var i=new tCe;if(e[i.place++]!==48)return!1;var n=U9(e,i);if(n===!1||n+i.place!==e.length||e[i.place++]!==2)return!1;var s=U9(e,i);if(s===!1)return!1;var o=e.slice(i.place,s+i.place);if(i.place+=s,e[i.place++]!==2)return!1;var a=U9(e,i);if(a===!1||e.length!==a+i.place)return!1;var c=e.slice(i.place,a+i.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new x4(o),this.s=new x4(c),this.recoveryParam=null,!0};function F9(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}A4.prototype.toDER=function(e){var r=this.r.toArray(),i=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),i[0]&128&&(i=[0].concat(i)),r=eM(r),i=eM(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var n=[2];F9(n,r.length),n=n.concat(r),n.push(2),F9(n,i.length);var s=n.concat(i),o=[48];return F9(o,s.length),o=o.concat(s),L9.encode(o,e)}});var oM=p((C_t,sM)=>{l();"use strict";var xl=Ia(),iM=QB(),rCe=os(),j9=S4(),iCe=E9(),nM=rCe.assert,K9=JB(),I4=rM();function Bs(t){if(!(this instanceof Bs))return new Bs(t);typeof t=="string"&&(nM(Object.prototype.hasOwnProperty.call(j9,t),"Unknown curve "+t),t=j9[t]),t instanceof j9.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}sM.exports=Bs;Bs.prototype.keyPair=function(e){return new K9(this,e)};Bs.prototype.keyFromPrivate=function(e,r){return K9.fromPrivate(this,e,r)};Bs.prototype.keyFromPublic=function(e,r){return K9.fromPublic(this,e,r)};Bs.prototype.genKeyPair=function(e){e||(e={});for(var r=new iM({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||iCe(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new xl(2));;){var s=new xl(r.generate(i));if(!(s.cmp(n)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Bs.prototype._truncateToN=function(e,r){var i=e.byteLength()*8-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};Bs.prototype.sign=function(e,r,i,n){typeof i=="object"&&(n=i,i=null),n||(n={}),r=this.keyFromPrivate(r,i),e=this._truncateToN(new xl(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=e.toArray("be",s),c=new iM({hash:this.hash,entropy:o,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new xl(1)),f=0;;f++){var d=n.k?n.k(f):new xl(c.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(u)>=0)){var h=this.g.mul(d);if(!h.isInfinity()){var y=h.getX(),g=y.umod(this.n);if(g.cmpn(0)!==0){var m=d.invm(this.n).mul(g.mul(r.getPrivate()).iadd(e));if(m=m.umod(this.n),m.cmpn(0)!==0){var E=(h.getY().isOdd()?1:0)|(y.cmp(g)!==0?2:0);return n.canonical&&m.cmp(this.nh)>0&&(m=this.n.sub(m),E^=1),new I4({r:g,s:m,recoveryParam:E})}}}}}};Bs.prototype.verify=function(e,r,i,n){e=this._truncateToN(new xl(e,16)),i=this.keyFromPublic(i,n),r=new I4(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),c=a.mul(e).umod(this.n),u=a.mul(s).umod(this.n),f;return this.curve._maxwellTrick?(f=this.g.jmulAdd(c,i.getPublic(),u),f.isInfinity()?!1:f.eqXToP(s)):(f=this.g.mulAdd(c,i.getPublic(),u),f.isInfinity()?!1:f.getX().umod(this.n).cmp(s)===0)};Bs.prototype.recoverPubKey=function(t,e,r,i){nM((3&r)===r,"The recovery param is more than two bits"),e=new I4(e,i);var n=this.n,s=new xl(t),o=e.r,a=e.s,c=r&1,u=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var f=e.r.invm(n),d=n.sub(s).mul(f).umod(n),h=a.mul(f).umod(n);return this.g.mulAdd(d,o,h)};Bs.prototype.getKeyRecoveryParam=function(t,e,r,i){if(e=new I4(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(t,e,n)}catch(o){continue}if(s.eq(r))return n}throw new Error("Unable to find valid recovery factor")}});var fM=p((O_t,uM)=>{l();"use strict";var C2=os(),aM=C2.assert,cM=C2.parseBytes,Fh=C2.cachedProperty;function Fi(t,e){this.eddsa=t,this._secret=cM(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=cM(e.pub)}Fi.fromPublic=function(e,r){return r instanceof Fi?r:new Fi(e,{pub:r})};Fi.fromSecret=function(e,r){return r instanceof Fi?r:new Fi(e,{secret:r})};Fi.prototype.secret=function(){return this._secret};Fh(Fi,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Fh(Fi,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Fh(Fi,"privBytes",function(){var e=this.eddsa,r=this.hash(),i=e.encodingLength-1,n=r.slice(0,e.encodingLength);return n[0]&=248,n[i]&=127,n[i]|=64,n});Fh(Fi,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Fh(Fi,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Fh(Fi,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Fi.prototype.sign=function(e){return aM(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Fi.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};Fi.prototype.getSecret=function(e){return aM(this._secret,"KeyPair is public only"),C2.encode(this.secret(),e)};Fi.prototype.getPublic=function(e){return C2.encode(this.pubBytes(),e)};uM.exports=Fi});var dM=p((k_t,lM)=>{l();"use strict";var nCe=Ia(),T4=os(),sCe=T4.assert,R4=T4.cachedProperty,oCe=T4.parseBytes;function Al(t,e){this.eddsa=t,typeof e!="object"&&(e=oCe(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),sCe(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof nCe&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}R4(Al,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});R4(Al,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});R4(Al,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});R4(Al,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Al.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Al.prototype.toHex=function(){return T4.encode(this.toBytes(),"hex").toUpperCase()};lM.exports=Al});var bM=p((q_t,gM)=>{l();"use strict";var aCe=E4(),cCe=S4(),jh=os(),uCe=jh.assert,hM=jh.parseBytes,pM=fM(),yM=dM();function Vn(t){if(uCe(t==="ed25519","only tested with ed25519 so far"),!(this instanceof Vn))return new Vn(t);t=cCe[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=aCe.sha512}gM.exports=Vn;Vn.prototype.sign=function(e,r){e=hM(e);var i=this.keyFromSecret(r),n=this.hashInt(i.messagePrefix(),e),s=this.g.mul(n),o=this.encodePoint(s),a=this.hashInt(o,i.pubBytes(),e).mul(i.priv()),c=n.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:c,Rencoded:o})};Vn.prototype.verify=function(e,r,i){e=hM(e),r=this.makeSignature(r);var n=this.keyFromPublic(i),s=this.hashInt(r.Rencoded(),n.pubBytes(),e),o=this.g.mul(r.S()),a=r.R().add(n.pub().mul(s));return a.eq(o)};Vn.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return jh.intFromLE(e.digest()).umod(this.curve.n)};Vn.prototype.keyFromPublic=function(e){return pM.fromPublic(this,e)};Vn.prototype.keyFromSecret=function(e){return pM.fromSecret(this,e)};Vn.prototype.makeSignature=function(e){return e instanceof yM?e:new yM(this,e)};Vn.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};Vn.prototype.decodePoint=function(e){e=jh.parseBytes(e);var r=e.length-1,i=e.slice(0,r).concat(e[r]&~128),n=(e[r]&128)!=0,s=jh.intFromLE(i);return this.curve.pointFromY(s,n)};Vn.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};Vn.prototype.decodeInt=function(e){return jh.intFromLE(e)};Vn.prototype.isPoint=function(e){return e instanceof this.pointClass}});var vM=p(mM=>{l();"use strict";var Il=mM;Il.version=$N().version;Il.utils=os();Il.rand=E9();Il.curve=A9();Il.curves=S4();Il.ec=oM();Il.eddsa=bM()});var _M=p((N_t,wM)=>{l();var fCe=vM().ec,Da=new fCe("secp256k1"),It=Da.curve,er=It.n.constructor;function lCe(t,e){let r=new er(e);if(r.cmp(It.p)>=0)return null;r=r.toRed(It.red);let i=r.redSqr().redIMul(r).redIAdd(It.b).redSqrt();return t===3!==i.isOdd()&&(i=i.redNeg()),Da.keyPair({pub:{x:r,y:i}})}function dCe(t,e,r){let i=new er(e),n=new er(r);if(i.cmp(It.p)>=0||n.cmp(It.p)>=0||(i=i.toRed(It.red),n=n.toRed(It.red),(t===6||t===7)&&n.isOdd()!==(t===7)))return null;let s=i.redSqr().redIMul(i);return n.redSqr().redISub(s.redIAdd(It.b)).isZero()?Da.keyPair({pub:{x:i,y:n}}):null}function ef(t){let e=t[0];switch(e){case 2:case 3:return t.length!==33?null:lCe(e,t.subarray(1,33));case 4:case 6:case 7:return t.length!==65?null:dCe(e,t.subarray(1,33),t.subarray(33,65));default:return null}}function Tl(t,e){let r=e.encode(null,t.length===33);for(let i=0;i<t.length;++i)t[i]=r[i]}wM.exports={contextRandomize(){return 0},privateKeyVerify(t){let e=new er(t);return e.cmp(It.n)<0&&!e.isZero()?0:1},privateKeyNegate(t){let e=new er(t),r=It.n.sub(e).umod(It.n).toArrayLike(Uint8Array,"be",32);return t.set(r),0},privateKeyTweakAdd(t,e){let r=new er(e);if(r.cmp(It.n)>=0||(r.iadd(new er(t)),r.cmp(It.n)>=0&&r.isub(It.n),r.isZero()))return 1;let i=r.toArrayLike(Uint8Array,"be",32);return t.set(i),0},privateKeyTweakMul(t,e){let r=new er(e);if(r.cmp(It.n)>=0||r.isZero())return 1;r.imul(new er(t)),r.cmp(It.n)>=0&&(r=r.umod(It.n));let i=r.toArrayLike(Uint8Array,"be",32);return t.set(i),0},publicKeyVerify(t){return ef(t)===null?1:0},publicKeyCreate(t,e){let r=new er(e);if(r.cmp(It.n)>=0||r.isZero())return 1;let i=Da.keyFromPrivate(e).getPublic();return Tl(t,i),0},publicKeyConvert(t,e){let r=ef(e);if(r===null)return 1;let i=r.getPublic();return Tl(t,i),0},publicKeyNegate(t,e){let r=ef(e);if(r===null)return 1;let i=r.getPublic();return i.y=i.y.redNeg(),Tl(t,i),0},publicKeyCombine(t,e){let r=new Array(e.length);for(let n=0;n<e.length;++n)if(r[n]=ef(e[n]),r[n]===null)return 1;let i=r[0].getPublic();for(let n=1;n<r.length;++n)i=i.add(r[n].pub);return i.isInfinity()?2:(Tl(t,i),0)},publicKeyTweakAdd(t,e,r){let i=ef(e);if(i===null)return 1;if(r=new er(r),r.cmp(It.n)>=0)return 2;let n=i.getPublic().add(It.g.mul(r));return n.isInfinity()?2:(Tl(t,n),0)},publicKeyTweakMul(t,e,r){let i=ef(e);if(i===null)return 1;if(r=new er(r),r.cmp(It.n)>=0||r.isZero())return 2;let n=i.getPublic().mul(r);return Tl(t,n),0},signatureNormalize(t){let e=new er(t.subarray(0,32)),r=new er(t.subarray(32,64));return e.cmp(It.n)>=0||r.cmp(It.n)>=0?1:(r.cmp(Da.nh)===1&&t.set(It.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(t,e){let r=e.subarray(0,32),i=e.subarray(32,64);if(new er(r).cmp(It.n)>=0||new er(i).cmp(It.n)>=0)return 1;let{output:n}=t,s=n.subarray(4,4+33);s[0]=0,s.set(r,1);let o=33,a=0;for(;o>1&&s[a]===0&&!(s[a+1]&128);--o,++a);if(s=s.subarray(a),s[0]&128||o>1&&s[0]===0&&!(s[1]&128))return 1;let c=n.subarray(6+33,6+33+33);c[0]=0,c.set(i,1);let u=33,f=0;for(;u>1&&c[f]===0&&!(c[f+1]&128);--u,++f);return c=c.subarray(f),c[0]&128||u>1&&c[0]===0&&!(c[1]&128)?1:(t.outputlen=6+o+u,n[0]=48,n[1]=t.outputlen-2,n[2]=2,n[3]=s.length,n.set(s,4),n[4+o]=2,n[5+o]=c.length,n.set(c,6+o),0)},signatureImport(t,e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return 1;let r=e[3];if(r===0||5+r>=e.length||e[4+r]!==2)return 1;let i=e[5+r];if(i===0||6+r+i!==e.length||e[4]&128||r>1&&e[4]===0&&!(e[5]&128)||e[r+6]&128||i>1&&e[r+6]===0&&!(e[r+7]&128))return 1;let n=e.subarray(4,4+r);if(n.length===33&&n[0]===0&&(n=n.subarray(1)),n.length>32)return 1;let s=e.subarray(6+r);if(s.length===33&&s[0]===0&&(s=s.slice(1)),s.length>32)throw new Error("S length is too long");let o=new er(n);o.cmp(It.n)>=0&&(o=new er(0));let a=new er(e.subarray(6+r));return a.cmp(It.n)>=0&&(a=new er(0)),t.set(o.toArrayLike(Uint8Array,"be",32),0),t.set(a.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(t,e,r,i,n){if(n){let a=n;n=c=>{let u=a(e,r,null,i,c);if(!(u instanceof Uint8Array&&u.length===32))throw new Error("This is the way");return new er(u)}}let s=new er(r);if(s.cmp(It.n)>=0||s.isZero())return 1;let o;try{o=Da.sign(e,r,{canonical:!0,k:n,pers:i})}catch(a){return 1}return t.signature.set(o.r.toArrayLike(Uint8Array,"be",32),0),t.signature.set(o.s.toArrayLike(Uint8Array,"be",32),32),t.recid=o.recoveryParam,0},ecdsaVerify(t,e,r){let i={r:t.subarray(0,32),s:t.subarray(32,64)},n=new er(i.r),s=new er(i.s);if(n.cmp(It.n)>=0||s.cmp(It.n)>=0)return 1;if(s.cmp(Da.nh)===1||n.isZero()||s.isZero())return 3;let o=ef(r);if(o===null)return 2;let a=o.getPublic();return Da.verify(e,i,a)?0:3},ecdsaRecover(t,e,r,i){let n={r:e.slice(0,32),s:e.slice(32,64)},s=new er(n.r),o=new er(n.s);if(s.cmp(It.n)>=0||o.cmp(It.n)>=0)return 1;if(s.isZero()||o.isZero())return 2;let a;try{a=Da.recoverPubKey(i,n,r)}catch(c){return 2}return Tl(t,a),0},ecdh(t,e,r,i,n,s,o){let a=ef(e);if(a===null)return 1;let c=new er(r);if(c.cmp(It.n)>=0||c.isZero())return 2;let u=a.getPublic().mul(c);if(n===void 0){let f=u.encode(null,!0),d=Da.hash().update(f).digest();for(let h=0;h<32;++h)t[h]=d[h]}else{s||(s=new Uint8Array(32));let f=u.getX().toArray("be",32);for(let g=0;g<32;++g)s[g]=f[g];o||(o=new Uint8Array(32));let d=u.getY().toArray("be",32);for(let g=0;g<32;++g)o[g]=d[g];let h=n(s,o,i);if(!(h instanceof Uint8Array&&h.length===t.length))return 2;t.set(h)}return 0}}});var SM=p((B_t,EM)=>{l();EM.exports=HN()(_M())});var IM=p((M_t,AM)=>{l();"use strict";var Ro=SM(),{sha256:xM}=(ii(),fi);AM.exports=t=>{let e=32;function r(){let f;do f=t(32);while(!Ro.privateKeyVerify(f));return f}async function i(f,d){let{digest:h}=await xM.digest(d),y=Ro.ecdsaSign(h,f);return Ro.signatureExport(y.signature)}async function n(f,d,h){let{digest:y}=await xM.digest(h);return d=Ro.signatureImport(d),Ro.ecdsaVerify(d,y,f)}function s(f){if(!Ro.publicKeyVerify(f))throw new Error("Invalid public key");return Ro.publicKeyConvert(f,!0)}function o(f){return Ro.publicKeyConvert(f,!1)}function a(f){if(!Ro.privateKeyVerify(f))throw new Error("Invalid private key")}function c(f){if(!Ro.publicKeyVerify(f))throw new Error("Invalid public key")}function u(f){return a(f),Ro.publicKeyCreate(f)}return{generateKey:r,privateKeyLength:e,hashAndSign:i,hashAndVerify:n,compressPublicKey:s,decompressPublicKey:o,validatePrivateKey:a,validatePublicKey:c,computePublicKey:u}}});var CM=p((L_t,PM)=>{l();"use strict";var{sha256:TM}=(ii(),fi),hCe=_o(),{equals:RM}=(di(),li),{toString:pCe}=(et(),Je),yCe=a4();PM.exports=(t,e,r)=>{r=r||IM()(e);class i{constructor(u){r.validatePublicKey(u),this._key=u}verify(u,f){return r.hashAndVerify(this._key,f,u)}marshal(){return r.compressPublicKey(this._key)}get bytes(){return t.PublicKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(u){return RM(this.bytes,u.bytes)}async hash(){let{bytes:u}=await TM.digest(this.bytes);return u}}class n{constructor(u,f){this._key=u,this._publicKey=f||r.computePublicKey(u),r.validatePrivateKey(this._key),r.validatePublicKey(this._publicKey)}sign(u){return r.hashAndSign(this._key,u)}get public(){return new i(this._publicKey)}marshal(){return this._key}get bytes(){return t.PrivateKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(u){return RM(this.bytes,u.bytes)}async hash(){let{bytes:u}=await TM.digest(this.bytes);return u}async id(){let u=await this.public.hash();return pCe(u,"base58btc")}async export(u,f="libp2p-key"){if(f==="libp2p-key")return yCe.export(this.bytes,u);throw hCe(new Error(`export format '${f}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function s(c){return new n(c)}function o(c){return new i(c)}async function a(){let c=await r.generateKey();return new n(c)}return{Secp256k1PublicKey:i,Secp256k1PrivateKey:n,unmarshalSecp256k1PrivateKey:s,unmarshalSecp256k1PublicKey:o,generateKeyPair:a}}});var kM=p((U_t,OM)=>{l();"use strict";OM.exports={SHA1:20,SHA256:32,SHA512:64}});var V9=p(DM=>{l();"use strict";var qM=v2(),gCe=kM(),bCe={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},mCe=async(t,e)=>{let r=await qM.get().subtle.sign({name:"HMAC"},t,e);return new Uint8Array(r,r.byteOffset,r.byteLength)};DM.create=async function(t,e){let r=bCe[t],i=await qM.get().subtle.importKey("raw",e,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{async digest(n){return mCe(i,n)},length:gCe[t]}}});var UM=p((j_t,LM)=>{l();"use strict";var NM=_o(),{concat:BM}=(fn(),un),{fromString:vCe}=(ut(),lt),wCe=V9(),MM={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};LM.exports=async(t,e,r)=>{let i=MM[t];if(!i){let A=Object.keys(MM).join(" / ");throw NM(new Error(`unknown cipher type '${t}'. Must be ${A}`),"ERR_INVALID_CIPHER_TYPE")}if(!e)throw NM(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");let n=i.keySize,s=i.ivSize,o=20,a=vCe("key expansion"),c=2*(s+n+o),u=await wCe.create(e,r),f=await u.digest(a),d=[],h=0;for(;h<c;){let A=await u.digest(BM([f,a])),R=A.length;h+R>c&&(R=c-h),d.push(A),h+=R,f=await u.digest(f)}let y=c/2,g=BM(d),m=g.slice(0,y),E=g.slice(y,c),v=A=>({iv:A.slice(0,s),cipherKey:A.slice(s,s+n),macKey:A.slice(s+n)});return{k1:v(m),k2:v(E)}}});var jM=p((K_t,FM)=>{l();"use strict";var _Ce=_o();FM.exports=function(t,e){if(!t.includes(e)){let r=t.join(" / ");throw _Ce(new Error(`Unknown curve: ${e}. Must be ${r}`),"ERR_INVALID_CURVE")}}});var GM=p($M=>{l();"use strict";var ECe=_o(),O2=v2(),{base64urlToBuffer:KM}=o4(),SCe=jM(),{toString:z9}=(et(),Je),{concat:xCe}=(fn(),un),{equals:ACe}=(di(),li),VM={"P-256":256,"P-384":384,"P-521":521};$M.generateEphmeralKeyPair=async function(t){SCe(Object.keys(VM),t);let e=await O2.get().subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]),r=async(n,s)=>{let o;s?o=await O2.get().subtle.importKey("jwk",TCe(t,s),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):o=e.privateKey;let a=[await O2.get().subtle.importKey("jwk",HM(t,n),{name:"ECDH",namedCurve:t},!1,[]),o],c=await O2.get().subtle.deriveBits({name:"ECDH",namedCurve:t,public:a[0]},a[1],VM[t]);return new Uint8Array(c,c.byteOffset,c.byteLength)},i=await O2.get().subtle.exportKey("jwk",e.publicKey);return{key:ICe(i),genSharedKey:r}};var zM={"P-256":32,"P-384":48,"P-521":66};function ICe(t){let e=zM[t.crv];return xCe([Uint8Array.from([4]),KM(t.x,e),KM(t.y,e)],1+e*2)}function HM(t,e){let r=zM[t];if(ACe(!e.slice(0,1),Uint8Array.from([4])))throw ECe(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:t,x:z9(e.slice(1,r+1),"base64url"),y:z9(e.slice(1+r),"base64url"),ext:!0}}var TCe=(t,e)=>({...HM(t,e.public),d:z9(e.private,"base64url")})});var YM=p((z_t,WM)=>{l();"use strict";var RCe=GM();WM.exports=async t=>RCe.generateEphmeralKeyPair(t)});var C4=p((H_t,QM)=>{l();"use strict";var Na=D6();Tc();$w();var H9=ft(),k2=_o(),{fromString:PCe}=(ut(),lt),CCe=JD(),Ms={rsa:MN(),ed25519:VN(),secp256k1:CM()(Na,E2())},P4={message:"secp256k1 support requires libp2p-crypto-secp256k1 package",code:"ERR_MISSING_PACKAGE"};function Kh(t){let e=Ms[t.toLowerCase()];if(!e){let r=Object.keys(Ms).join(" / ");throw k2(new Error(`invalid or unsupported key type ${t}. Must be ${r}`),"ERR_UNSUPPORTED_KEY_TYPE")}return e}var OCe=async(t,e)=>Kh(t).generateKeyPair(e),kCe=async(t,e,r)=>{let i=Kh(t);if(t.toLowerCase()!=="ed25519")throw k2(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return i.generateKeyPairFromSeed(e,r)},qCe=t=>{let e=Na.PublicKey.decode(t),r=e.Data;switch(e.Type){case Na.KeyType.RSA:return Ms.rsa.unmarshalRsaPublicKey(r);case Na.KeyType.Ed25519:return Ms.ed25519.unmarshalEd25519PublicKey(r);case Na.KeyType.Secp256k1:if(Ms.secp256k1)return Ms.secp256k1.unmarshalSecp256k1PublicKey(r);throw k2(new Error(P4.message),P4.code);default:Kh(e.Type)}},DCe=(t,e)=>(e=(e||"rsa").toLowerCase(),Kh(e),t.bytes),XM=async t=>{let e=Na.PrivateKey.decode(t),r=e.Data;switch(e.Type){case Na.KeyType.RSA:return Ms.rsa.unmarshalRsaPrivateKey(r);case Na.KeyType.Ed25519:return Ms.ed25519.unmarshalEd25519PrivateKey(r);case Na.KeyType.Secp256k1:if(Ms.secp256k1)return Ms.secp256k1.unmarshalSecp256k1PrivateKey(r);throw k2(new Error(P4.message),P4.code);default:Kh(e.Type)}},NCe=(t,e)=>(e=(e||"rsa").toLowerCase(),Kh(e),t.bytes),BCe=async(t,e)=>{try{let n=await CCe.import(t,e);return XM(n)}catch(n){}let r=H9.pki.decryptRsaPrivateKey(t,e);if(r===null)throw k2(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let i=H9.asn1.toDer(H9.pki.privateKeyToAsn1(r));return i=PCe(i.getBytes(),"ascii"),Ms.rsa.unmarshalRsaPrivateKey(i)};QM.exports={supportedKeys:Ms,keysPBM:Na,keyStretcher:UM(),generateEphemeralKeyPair:YM(),generateKeyPair:OCe,generateKeyPairFromSeed:kCe,unmarshalPublicKey:qCe,marshalPublicKey:DCe,unmarshalPrivateKey:XM,marshalPrivateKey:NCe,import:BCe}});var O4=p(($_t,$9)=>{l();"use strict";function MCe(t,{className:e,symbolName:r}){let i=Symbol.for(r),n={[e]:class extends t{constructor(...s){super(...s);Object.defineProperty(this,i,{value:!0})}get[Symbol.toStringTag](){return e}}}[e];return n[`is${e}`]=s=>!!(s&&s[i]),n}function LCe(t,{className:e,symbolName:r,withoutNew:i}){let n=Symbol.for(r),s={[e]:function(...o){if(i&&!(this instanceof s))return new s(...o);let a=t.call(this,...o)||this;return a&&!a[n]&&Object.defineProperty(a,n,{value:!0}),a}}[e];return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,Object.defineProperty(s.prototype,Symbol.toStringTag,{get(){return e}}),s[`is${e}`]=o=>!!(o&&o[n]),s}$9.exports=MCe;$9.exports.proto=LCe});var eL=p((G_t,JM)=>{l();"use strict";var Vh=qi(),ZM=Vh.Reader,UCe=Vh.Writer,wi=Vh.util,q2=Vh.roots["libp2p-peer-id"]||(Vh.roots["libp2p-peer-id"]={});q2.PeerIdProto=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.id=wi.newBuffer([]),t.prototype.pubKey=wi.newBuffer([]),t.prototype.privKey=wi.newBuffer([]),t.encode=function(r,i){return i||(i=UCe.create()),i.uint32(10).bytes(r.id),r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&i.uint32(18).bytes(r.pubKey),r.privKey!=null&&Object.hasOwnProperty.call(r,"privKey")&&i.uint32(26).bytes(r.privKey),i},t.decode=function(r,i){r instanceof ZM||(r=ZM.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new q2.PeerIdProto;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.id=r.bytes();break;case 2:s.pubKey=r.bytes();break;case 3:s.privKey=r.bytes();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("id"))throw wi.ProtocolError("missing required 'id'",{instance:s});return s},t.fromObject=function(r){if(r instanceof q2.PeerIdProto)return r;var i=new q2.PeerIdProto;return r.id!=null&&(typeof r.id=="string"?wi.base64.decode(r.id,i.id=wi.newBuffer(wi.base64.length(r.id)),0):r.id.length&&(i.id=r.id)),r.pubKey!=null&&(typeof r.pubKey=="string"?wi.base64.decode(r.pubKey,i.pubKey=wi.newBuffer(wi.base64.length(r.pubKey)),0):r.pubKey.length&&(i.pubKey=r.pubKey)),r.privKey!=null&&(typeof r.privKey=="string"?wi.base64.decode(r.privKey,i.privKey=wi.newBuffer(wi.base64.length(r.privKey)),0):r.privKey.length&&(i.privKey=r.privKey)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(i.bytes===String?n.id="":(n.id=[],i.bytes!==Array&&(n.id=wi.newBuffer(n.id))),i.bytes===String?n.pubKey="":(n.pubKey=[],i.bytes!==Array&&(n.pubKey=wi.newBuffer(n.pubKey))),i.bytes===String?n.privKey="":(n.privKey=[],i.bytes!==Array&&(n.privKey=wi.newBuffer(n.privKey)))),r.id!=null&&r.hasOwnProperty("id")&&(n.id=i.bytes===String?wi.base64.encode(r.id,0,r.id.length):i.bytes===Array?Array.prototype.slice.call(r.id):r.id),r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(n.pubKey=i.bytes===String?wi.base64.encode(r.pubKey,0,r.pubKey.length):i.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey),r.privKey!=null&&r.hasOwnProperty("privKey")&&(n.privKey=i.bytes===String?wi.base64.encode(r.privKey,0,r.privKey.length):i.bytes===Array?Array.prototype.slice.call(r.privKey):r.privKey),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Vh.util.toJSONOptions)},t}();JM.exports=q2});var tt=p((hn,cL)=>{l();"use strict";var{CID:G9}=(Ae(),De),FCe=(an(),on),jCe=(uw(),T6),KCe=(ti(),ei),VCe=(a2(),ph),{base58btc:W9}=(ti(),ei),{base32:zCe}=(an(),on),{base16:tL}=(fw(),R6),D2=(An(),Ln),Ba=C4(),HCe=O4(),{PeerIdProto:rL}=eL(),{equals:Rl}=(di(),li),{fromString:N2}=(ut(),lt),{toString:$Ce}=(et(),Je),{identity:k4}=(qc(),kc),iL={...FCe,...jCe,...KCe,...VCe},GCe=Object.keys(iL).reduce((t,e)=>t.or(iL[e]),zCe.decoder),WCe=112,nL=114,sL=class{constructor(e,r,i){if(!(e instanceof Uint8Array))throw new Error("invalid id provided");if(r&&i&&!Rl(r.public.bytes,i.bytes))throw new Error("inconsistent arguments");this._id=e,this._idB58String=W9.encode(this.id).substring(1),this._privKey=r,this._pubKey=i}get id(){return this._id}set id(e){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(e){this._privKey=e}get pubKey(){if(this._pubKey)return this._pubKey;if(this._privKey)return this._privKey.public;try{let e=D2.decode(this.id);e.code===k4.code&&(this._pubKey=Ba.unmarshalPublicKey(e.digest))}catch(e){}return this._pubKey}set pubKey(e){this._pubKey=e}marshalPubKey(){if(this.pubKey)return Ba.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return Ba.marshalPrivateKey(this.privKey)}marshal(e){return rL.encode({id:this.toBytes(),pubKey:this.marshalPubKey(),privKey:e?null:this.marshalPrivKey()}).finish()}toPrint(){let e=this.toB58String();e.startsWith("Qm")&&(e=e.slice(2));let r=6;return e.length<r&&(r=e.length),"<peer.ID "+e.substr(0,r)+">"}toJSON(){return{id:this.toB58String(),privKey:aL(this.marshalPrivKey()),pubKey:aL(this.marshalPubKey())}}toHexString(){return tL.encode(this.id).substring(1)}toBytes(){return this.id}toB58String(){return this._idB58String}toString(){if(!this._idCIDString){let e=G9.createV1(nL,D2.decode(this.id));Object.defineProperty(this,"_idCIDString",{value:e.toString(),enumerable:!1})}return this._idCIDString}equals(e){if(e instanceof Uint8Array)return Rl(this.id,e);if(e.id)return Rl(this.id,e.id);throw new Error("not valid Id")}isEqual(e){return this.equals(e)}isValid(){return Boolean(this.privKey&&this.privKey.public&&this.privKey.public.bytes&&this.pubKey.bytes instanceof Uint8Array&&Rl(this.privKey.public.bytes,this.pubKey.bytes))}hasInlinePublicKey(){try{if(D2.decode(this.id).code===k4.code)return!0}catch(e){}return!1}},Ma=HCe(sL,{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});hn=cL.exports=Ma;var B2=t=>t.bytes.length<=42?D2.create(k4.code,t.bytes).bytes:t.hash(),Y9=async(t,e)=>{let r=await B2(e);return new Ma(r,t,e)};hn.create=async t=>{t=t||{},t.bits=t.bits||2048,t.keyType=t.keyType||"RSA";let e=await Ba.generateKeyPair(t.keyType,t.bits);return Y9(e,e.public)};hn.createFromHexString=t=>new Ma(tL.decode("f"+t));hn.createFromBytes=t=>{try{let e=G9.decode(t);if(!oL(e))throw new Error("Supplied PeerID CID is invalid");return hn.createFromCID(e)}catch{if(D2.decode(t).code!==k4.code)throw new Error("Supplied PeerID CID is invalid");return new Ma(t)}};hn.createFromB58String=t=>hn.createFromBytes(W9.decode("z"+t));var oL=t=>t.code===nL||t.code===WCe;hn.createFromCID=t=>{if(t=G9.asCID(t),!t||!oL(t))throw new Error("Supplied PeerID CID is invalid");return new Ma(t.multihash.bytes)};hn.createFromPubKey=async t=>{let e=t;if(typeof e=="string"&&(e=N2(t,"base64pad")),!(e instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let r=await Ba.unmarshalPublicKey(e);return Y9(void 0,r)};hn.createFromPrivKey=async t=>{if(typeof t=="string"&&(t=N2(t,"base64pad")),!(t instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let e=await Ba.unmarshalPrivateKey(t);return Y9(e,e.public)};hn.createFromJSON=async t=>{let e=W9.decode("z"+t.id),r=t.privKey&&N2(t.privKey,"base64pad"),i=t.pubKey&&N2(t.pubKey,"base64pad"),n=i&&await Ba.unmarshalPublicKey(i);if(!r)return new Ma(e,void 0,n);let s=await Ba.unmarshalPrivateKey(r),o=await B2(s.public),a;if(n&&(a=await B2(n)),n&&!Rl(o,a))throw new Error("Public and private key do not match");if(e&&!Rl(o,e))throw new Error("Id and private key do not match");return new Ma(e,s,n)};hn.createFromProtobuf=async t=>{typeof t=="string"&&(t=N2(t,"base16"));let{id:e,privKey:r,pubKey:i}=rL.decode(t);r=r?await Ba.unmarshalPrivateKey(r):!1,i=i?await Ba.unmarshalPublicKey(i):!1;let n,s;if(r&&(s=await B2(r.public)),i&&(n=await B2(i)),r){if(i&&!Rl(s,n))throw new Error("Public and private key do not match");return new Ma(s,r,r.public)}if(i)return new Ma(n,void 0,i);if(e)return new Ma(e);throw new Error("Protobuf did not contain any usable key material")};hn.parse=t=>((t.charAt(0)==="1"||t.charAt(0)==="Q")&&(t=`z${t}`),hn.createFromBytes(GCe.decode(t)));hn.isPeerId=t=>Boolean(typeof t=="object"&&t._id&&t._idB58String);function aL(t){if(t)return $Ce(t,"base64pad")}});var lL=p((W_t,fL)=>{l();"use strict";vh();var q4=ft(),{toString:zh}=(et(),Je),{fromString:uL}=(ut(),lt);fL.exports={createCipheriv:(t,e,r)=>{let i=q4.cipher.createCipher("AES-CTR",zh(e,"ascii"));return i.start({iv:zh(r,"ascii")}),{update:n=>(i.update(q4.util.createBuffer(zh(n,"ascii"))),uL(i.output.getBytes(),"ascii"))}},createDecipheriv:(t,e,r)=>{let i=q4.cipher.createDecipher("AES-CTR",zh(e,"ascii"));return i.start({iv:zh(r,"ascii")}),{update:n=>(i.update(q4.util.createBuffer(zh(n,"ascii"))),uL(i.output.getBytes(),"ascii"))}}}});var pL=p((Y_t,hL)=>{l();"use strict";var YCe=_o(),dL={16:"aes-128-ctr",32:"aes-256-ctr"};hL.exports=function(t){let e=dL[t.length];if(!e){let r=Object.entries(dL).map(([i,n])=>`${i} (${n})`).join(" / ");throw YCe(new Error(`Invalid key length ${t.length} bytes. Must be ${r}`),"ERR_INVALID_KEY_LENGTH")}return e}});var bL=p(gL=>{l();"use strict";var yL=lL(),XCe=pL();gL.create=async function(t,e){let r=XCe(t),i=yL.createCipheriv(r,t,e),n=yL.createDecipheriv(r,t,e);return{async encrypt(o){return i.update(o)},async decrypt(o){return n.update(o)}}}});var wL=p((Q_t,vL)=>{l();"use strict";var QCe=Bw(),ZCe=Qt(),JCe=_o(),mL={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};function eOe(t,e,r,i,n){let s=mL[n];if(!s){let a=Object.keys(mL).join(" / ");throw JCe(new Error(`Hash '${n}' is unknown or not supported. Must be ${a}`),"ERR_UNSUPPORTED_HASH_TYPE")}let o=QCe(t,e,r,i,s);return ZCe.encode64(o)}vL.exports=eOe});var La=p(Hh=>{l();"use strict";var tOe=V9(),rOe=bL(),iOe=C4();Hh.aes=rOe;Hh.hmac=tOe;Hh.keys=iOe;Hh.randomBytes=E2();Hh.pbkdf2=wL()});var Q9=p((J_t,EL)=>{l();"use strict";var _L="[a-fA-F\\d:]",tf=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${_L})|(?<=${_L})(?=\\s|$))`:"",Po="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",hi="[a-fA-F\\d]{1,4}",D4=`
(?:
(?:${hi}:){7}(?:${hi}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${hi}:){6}(?:${Po}|:${hi}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${hi}:){5}(?::${Po}|(?::${hi}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${hi}:){4}(?:(?::${hi}){0,1}:${Po}|(?::${hi}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${hi}:){3}(?:(?::${hi}){0,2}:${Po}|(?::${hi}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${hi}:){2}(?:(?::${hi}){0,3}:${Po}|(?::${hi}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${hi}:){1}(?:(?::${hi}){0,4}:${Po}|(?::${hi}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${hi}){0,5}:${Po}|(?::${hi}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),nOe=new RegExp(`(?:^${Po}$)|(?:^${D4}$)`),sOe=new RegExp(`^${Po}$`),oOe=new RegExp(`^${D4}$`),X9=t=>t&&t.exact?nOe:new RegExp(`(?:${tf(t)}${Po}${tf(t)})|(?:${tf(t)}${D4}${tf(t)})`,"g");X9.v4=t=>t&&t.exact?sOe:new RegExp(`${tf(t)}${Po}${tf(t)}`,"g");X9.v6=t=>t&&t.exact?oOe:new RegExp(`${tf(t)}${D4}${tf(t)}`,"g");EL.exports=X9});var xL=p((eEt,SL)=>{l();"use strict";var Z9=Q9(),$h=t=>Z9({exact:!0}).test(t);$h.v4=t=>Z9.v4({exact:!0}).test(t);$h.v6=t=>Z9.v6({exact:!0}).test(t);$h.version=t=>$h(t)?$h.v4(t)?4:6:void 0;SL.exports=$h});var PL=p((tEt,RL)=>{l();"use strict";var J9=xL(),{toString:AL}=(et(),Je),aOe=J9,e_=J9.v4,IL=J9.v6,TL=function(t,e,r){r=~~r;let i;if(e_(t))i=e||new Uint8Array(r+4),t.split(/\./g).map(function(n){i[r++]=parseInt(n,10)&255});else if(IL(t)){let n=t.split(":",8),s;for(s=0;s<n.length;s++){let o=e_(n[s]),a;o&&(a=TL(n[s]),n[s]=AL(a.slice(0,2),"base16")),a&&++s<8&&n.splice(s,0,AL(a.slice(2,4),"base16"))}if(n[0]==="")for(;n.length<8;)n.unshift("0");else if(n[n.length-1]==="")for(;n.length<8;)n.push("0");else if(n.length<8){for(s=0;s<n.length&&n[s]!=="";s++);let o=[s,"1"];for(s=9-n.length;s>0;s--)o.push("0");n.splice.apply(n,o)}for(i=e||new Uint8Array(r+16),s=0;s<n.length;s++){let o=parseInt(n[s],16);i[r++]=o>>8&255,i[r++]=o&255}}if(!i)throw Error("Invalid ip address: "+t);return i},cOe=function(t,e,r){e=~~e,r=r||t.length-e;let i=[],n,s=new DataView(t.buffer);if(r===4){for(let o=0;o<r;o++)i.push(t[e+o]);n=i.join(".")}else if(r===16){for(let o=0;o<r;o+=2)i.push(s.getUint16(e+o).toString(16));n=i.join(":"),n=n.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),n=n.replace(/:{3,4}/,"::")}return n};RL.exports={isIP:aOe,isV4:e_,isV6:IL,toBytes:TL,toString:cOe}});var M2=p((rEt,OL)=>{l();"use strict";function zn(t){if(typeof t=="number"){if(zn.codes[t])return zn.codes[t];throw new Error("no protocol with code: "+t)}else if(typeof t=="string"){if(zn.names[t])return zn.names[t];throw new Error("no protocol with name: "+t)}throw new Error("invalid protocol id type: "+t)}var Ls=-1;zn.lengthPrefixedVarSize=Ls;zn.V=Ls;zn.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,Ls,"ip6zone"],[53,Ls,"dns","resolvable"],[54,Ls,"dns4","resolvable"],[55,Ls,"dns6","resolvable"],[56,Ls,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,Ls,"unix",!1,"path"],[421,Ls,"ipfs"],[421,Ls,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,Ls,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,Ls,"memory"]];zn.names={};zn.codes={};zn.table.map(t=>{let e=CL.apply(null,t);return zn.codes[e.code]=e,zn.names[e.name]=e,null});zn.object=CL;function CL(t,e,r,i,n){return{code:t,size:e,name:r,resolvable:Boolean(i),path:Boolean(n)}}OL.exports=zn});var DL=p((iEt,qL)=>{l();qL.exports=t_;var kL=128,uOe=127,fOe=~uOe,lOe=Math.pow(2,31);function t_(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw t_.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var i=r;t>=lOe;)e[r++]=t&255|kL,t/=128;for(;t&fOe;)e[r++]=t&255|kL,t>>>=7;return e[r]=t|0,t_.bytes=r-i+1,e}});var ML=p((nEt,BL)=>{l();BL.exports=r_;var dOe=128,NL=127;function r_(t,e){var r=0,e=e||0,i=0,n=e,s,o=t.length;do{if(n>=o||i>49)throw r_.bytes=0,new RangeError("Could not decode varint");s=t[n++],r+=i<28?(s&NL)<<i:(s&NL)*Math.pow(2,i),i+=7}while(s>=dOe);return r_.bytes=n-e,r}});var UL=p((sEt,LL)=>{l();var hOe=Math.pow(2,7),pOe=Math.pow(2,14),yOe=Math.pow(2,21),gOe=Math.pow(2,28),bOe=Math.pow(2,35),mOe=Math.pow(2,42),vOe=Math.pow(2,49),wOe=Math.pow(2,56),_Oe=Math.pow(2,63);LL.exports=function(t){return t<hOe?1:t<pOe?2:t<yOe?3:t<gOe?4:t<bOe?5:t<mOe?6:t<vOe?7:t<wOe?8:t<_Oe?9:10}});var as=p((oEt,FL)=>{l();FL.exports={encode:DL(),decode:ML(),encodingLength:UL()}});var WL=p((aEt,GL)=>{l();"use strict";var N4=PL(),jL=M2(),{CID:EOe}=(Ae(),De),{base32:KL}=(an(),on),{base58btc:SOe}=(ti(),ei),xOe=(An(),Ln),Gh=as(),{toString:B4}=(et(),Je),{fromString:VL}=(ut(),lt),{concat:M4}=(fn(),un);GL.exports=L2;function L2(t,e){return e instanceof Uint8Array?L2.toString(t,e):L2.toBytes(t,e)}L2.toString=function(e,r){switch(jL(e).code){case 4:case 41:return AOe(r);case 6:case 273:case 33:case 132:return HL(r).toString();case 53:case 54:case 55:case 56:case 400:case 777:return TOe(r);case 421:return POe(r);case 444:return $L(r);case 445:return $L(r);default:return B4(r,"base16")}};L2.toBytes=function(e,r){switch(jL(e).code){case 4:return zL(r);case 41:return zL(r);case 6:case 273:case 33:case 132:return i_(parseInt(r,10));case 53:case 54:case 55:case 56:case 400:case 777:return IOe(r);case 421:return ROe(r);case 444:return COe(r);case 445:return OOe(r);default:return VL(r,"base16")}};function zL(t){if(!N4.isIP(t))throw new Error("invalid ip address");return N4.toBytes(t)}function AOe(t){let e=N4.toString(t);if(!e||!N4.isIP(e))throw new Error("invalid ip address");return e}function i_(t){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function HL(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function IOe(t){let e=VL(t),r=Uint8Array.from(Gh.encode(e.length));return M4([r,e],r.length+e.length)}function TOe(t){let e=Gh.decode(t);if(t=t.slice(Gh.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return B4(t)}function ROe(t){let e;t[0]==="Q"||t[0]==="1"?e=xOe.decode(SOe.decode(`z${t}`)).bytes:e=EOe.parse(t).multihash.bytes;let r=Uint8Array.from(Gh.encode(e.length));return M4([r,e],r.length+e.length)}function POe(t){let e=Gh.decode(t),r=t.slice(Gh.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return B4(r,"base58btc")}function COe(t){let e=t.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==16)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion address.");let r=KL.decode("b"+e[0]),i=parseInt(e[1],10);if(i<1||i>65536)throw new Error("Port number is not in range(1, 65536)");let n=i_(i);return M4([r,n],r.length+n.length)}function OOe(t){let e=t.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==56)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion3 address.");let r=KL.decode("b"+e[0]),i=parseInt(e[1],10);if(i<1||i>65536)throw new Error("Port number is not in range(1, 65536)");let n=i_(i);return M4([r,n],r.length+n.length)}function $L(t){let e=t.slice(0,t.length-2),r=t.slice(t.length-2),i=B4(e,"base32"),n=HL(r);return i+":"+n}});var oU=p((cEt,sU)=>{l();"use strict";var YL=WL(),n_=M2(),U2=as(),{concat:XL}=(fn(),un),{toString:kOe}=(et(),Je);sU.exports={stringToStringTuples:QL,stringTuplesToString:ZL,tuplesToStringTuples:eU,stringTuplesToTuples:JL,bytesToTuples:s_,tuplesToBytes:tU,bytesToString:qOe,stringToBytes:iU,fromString:DOe,fromBytes:nU,validateBytes:o_,isValidBytes:NOe,cleanPath:L4,ParseError:a_,protoFromTuple:F2,sizeForAddr:rU};function QL(t){let e=[],r=t.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let i=0;i<r.length;i++){let n=r[i],s=n_(n);if(s.size===0){e.push([n]);continue}if(i++,i>=r.length)throw a_("invalid address: "+t);if(s.path){e.push([n,L4(r.slice(i).join("/"))]);break}e.push([n,r[i]])}return e}function ZL(t){let e=[];return t.map(r=>{let i=F2(r);return e.push(i.name),r.length>1&&e.push(r[1]),null}),L4(e.join("/"))}function JL(t){return t.map(e=>{Array.isArray(e)||(e=[e]);let r=F2(e);return e.length>1?[r.code,YL.toBytes(r.code,e[1])]:[r.code]})}function eU(t){return t.map(e=>{let r=F2(e);return e[1]?[r.code,YL.toString(r.code,e[1])]:[r.code]})}function tU(t){return nU(XL(t.map(e=>{let r=F2(e),i=Uint8Array.from(U2.encode(r.code));return e.length>1&&(i=XL([i,e[1]])),i})))}function rU(t,e){return t.size>0?t.size/8:t.size===0?0:U2.decode(e)+U2.decode.bytes}function s_(t){let e=[],r=0;for(;r<t.length;){let i=U2.decode(t,r),n=U2.decode.bytes,s=n_(i),o=rU(s,t.slice(r+n));if(o===0){e.push([i]),r+=n;continue}let a=t.slice(r+n,r+n+o);if(r+=o+n,r>t.length)throw a_("Invalid address Uint8Array: "+kOe(t,"base16"));e.push([i,a])}return e}function qOe(t){let e=s_(t),r=eU(e);return ZL(r)}function iU(t){t=L4(t);let e=QL(t),r=JL(e);return tU(r)}function DOe(t){return iU(t)}function nU(t){let e=o_(t);if(e)throw e;return Uint8Array.from(t)}function o_(t){try{s_(t)}catch(e){return e}}function NOe(t){return o_(t)===void 0}function L4(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function a_(t){return new Error("Error parsing address: "+t)}function F2(t){return n_(t[0])}});var uU=p((uEt,cU)=>{l();"use strict";function aU(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function BOe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return aU(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),aU(new n,r)}}cU.exports=BOe});var rt=p((fEt,dU)=>{l();"use strict";var Co=oU(),Wh=M2(),fU=as(),{CID:MOe}=(Ae(),De),{base58btc:LOe}=(ti(),ei),UOe=uU(),FOe=Symbol.for("nodejs.util.inspect.custom"),{toString:U4}=(et(),Je),{equals:jOe}=(di(),li),c_=new Map,lU=Symbol.for("@multiformats/js-multiaddr/multiaddr"),Rn=class{constructor(e){if(e==null&&(e=""),Object.defineProperty(this,lU,{value:!0}),e instanceof Uint8Array)this.bytes=Co.fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=Co.fromString(e)}else if(Rn.isMultiaddr(e))this.bytes=Co.fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return Co.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let e={},r=this.toString().split("/");return e.family=r[1]==="ip4"?4:6,e.host=r[2],e.transport=r[3],e.port=parseInt(r[4]),e}protos(){return this.protoCodes().map(e=>Object.assign({},Wh(e)))}protoCodes(){let e=[],r=this.bytes,i=0;for(;i<r.length;){let n=fU.decode(r,i),s=fU.decode.bytes,o=Wh(n);i+=Co.sizeForAddr(o,r.slice(i+s))+s,e.push(n)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return Co.bytesToTuples(this.bytes)}stringTuples(){let e=Co.bytesToTuples(this.bytes);return Co.tuplesToStringTuples(e)}encapsulate(e){return e=new Rn(e),new Rn(this.toString()+e.toString())}decapsulate(e){let r=e.toString(),i=this.toString(),n=i.lastIndexOf(r);if(n<0)throw new Error("Address "+this+" does not contain subaddress: "+e);return new Rn(i.slice(0,n))}decapsulateCode(e){let r=this.tuples();for(let i=r.length-1;i>=0;i--)if(r[i][0]===e)return new Rn(Co.tuplesToBytes(r.slice(0,i)));return this}getPeerId(){try{let r=this.stringTuples().filter(i=>i[0]===Wh.names.ipfs.code).pop();if(r&&r[1]){let i=r[1];return i[0]==="Q"||i[0]==="1"?U4(LOe.decode(`z${i}`),"base58btc"):U4(MOe.parse(i).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){let e=null;try{e=this.stringTuples().filter(r=>!!Wh(r[0]).path)[0][1],e||(e=null)}catch(r){e=null}return e}equals(e){return jOe(this.bytes,e.bytes)}async resolve(){let e=this.protos().find(n=>n.resolvable);if(!e)return[this];let r=c_.get(e.name);if(!r)throw UOe(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await r(this)).map(n=>new Rn(n))}nodeAddress(){let e=this.protoCodes(),r=this.protoNames(),i=this.toString().split("/").slice(1);if(i.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(e[0]!==4&&e[0]!==41&&e[0]!==54&&e[0]!==55)throw new Error(`no protocol with name: "'${r[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(i[2]!=="tcp"&&i[2]!=="udp")throw new Error(`no protocol with name: "'${r[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:e[0]===41||e[0]===55?6:4,address:i[1],port:parseInt(i[3])}}isThinWaistAddress(e){let r=(e||this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}static fromNodeAddress(e,r){if(!e)throw new Error("requires node address object");if(!r)throw new Error("requires transport protocol");let i;switch(e.family){case 4:i="ip4";break;case 6:i="ip6";break;default:throw Error(`Invalid addr family. Got '${e.family}' instead of 4 or 6`)}return new Rn("/"+[i,e.address,r,e.port].join("/"))}static isName(e){return Rn.isMultiaddr(e)?e.protos().some(r=>r.resolvable):!1}static isMultiaddr(e){return e instanceof Rn||Boolean(e&&e[lU])}[FOe](){return"<Multiaddr "+U4(this.bytes,"base16")+" - "+Co.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+U4(this.bytes,"base16")+" - "+Co.bytesToString(this.bytes)+">"}};Rn.protocols=Wh;Rn.resolvers=c_;function KOe(t){return new Rn(t)}dU.exports={Multiaddr:Rn,multiaddr:KOe,protocols:Wh,resolvers:c_}});var Cl=p((lEt,EU)=>{l();"use strict";var{Multiaddr:u_}=rt(),hU=Xe("dns4"),pU=Xe("dns6"),yU=Xe("dnsaddr"),Pl=pn(Xe("dns"),yU,hU,pU),j2=pn(Xe("ip4"),Xe("ip6")),Yh=pn(dt(j2,Xe("tcp")),dt(Pl,Xe("tcp"))),f_=dt(j2,Xe("udp")),gU=dt(f_,Xe("utp")),bU=dt(f_,Xe("quic")),Xh=pn(dt(Yh,Xe("ws")),dt(Pl,Xe("ws"))),Qh=pn(dt(Yh,Xe("wss")),dt(Pl,Xe("wss"))),F4=pn(dt(Yh,Xe("http")),dt(j2,Xe("http")),dt(Pl,Xe("http"))),j4=pn(dt(Yh,Xe("https")),dt(j2,Xe("https")),dt(Pl,Xe("https"))),l_=pn(dt(Xh,Xe("p2p-webrtc-star"),Xe("p2p")),dt(Qh,Xe("p2p-webrtc-star"),Xe("p2p")),dt(Xh,Xe("p2p-webrtc-star")),dt(Qh,Xe("p2p-webrtc-star"))),VOe=pn(dt(Xh,Xe("p2p-websocket-star"),Xe("p2p")),dt(Qh,Xe("p2p-websocket-star"),Xe("p2p")),dt(Xh,Xe("p2p-websocket-star")),dt(Qh,Xe("p2p-websocket-star"))),d_=pn(dt(F4,Xe("p2p-webrtc-direct"),Xe("p2p")),dt(j4,Xe("p2p-webrtc-direct"),Xe("p2p")),dt(F4,Xe("p2p-webrtc-direct")),dt(j4,Xe("p2p-webrtc-direct"))),Zh=pn(Xh,Qh,F4,j4,l_,d_,Yh,gU,bU,Pl),zOe=pn(dt(Zh,Xe("p2p-stardust"),Xe("p2p")),dt(Zh,Xe("p2p-stardust"))),rf=pn(dt(Zh,Xe("p2p")),l_,d_,Xe("p2p")),mU=pn(dt(rf,Xe("p2p-circuit"),rf),dt(rf,Xe("p2p-circuit")),dt(Xe("p2p-circuit"),rf),dt(Zh,Xe("p2p-circuit")),dt(Xe("p2p-circuit"),Zh),Xe("p2p-circuit")),vU=()=>pn(dt(mU,vU),mU),Jh=vU(),wU=pn(dt(Jh,rf,Jh),dt(rf,Jh),dt(Jh,rf),Jh,rf);EU.exports={DNS:Pl,DNS4:hU,DNS6:pU,DNSADDR:yU,IP:j2,TCP:Yh,UDP:f_,QUIC:bU,UTP:gU,HTTP:F4,HTTPS:j4,WebSockets:Xh,WebSocketsSecure:Qh,WebSocketStar:VOe,WebRTCStar:l_,WebRTCDirect:d_,Reliable:Zh,Stardust:zOe,Circuit:Jh,P2P:wU,IPFS:wU};function _U(t){function e(r){if(!u_.isMultiaddr(r))try{r=new u_(r)}catch(n){return!1}let i=t(r.protoNames());return i===null?!1:i===!0||i===!1?i:i.length===0}return e}function dt(...t){function e(r){if(r.length<t.length)return null;let i=r;return t.some(n=>(i=typeof n=="function"?n().partialMatch(r):n.partialMatch(r),Array.isArray(i)&&(r=i),i===null)),i}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:_U(e),partialMatch:e}}function pn(...t){function e(i){let n=null;return t.some(s=>{let o=typeof s=="function"?s().partialMatch(i):s.partialMatch(i);return o?(n=o,!0):!1}),n}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:_U(e),partialMatch:e}}function Xe(t){let e=t;function r(n){let s;if(typeof n=="string"||n instanceof Uint8Array)try{s=new u_(n)}catch(a){return!1}else s=n;let o=s.protoNames();return o.length===1&&o[0]===e}function i(n){return n.length===0?null:n[0]===e?n.slice(1):null}return{toString:function(){return e},matches:r,partialMatch:i}}});var t0=p((dEt,NU)=>{l();"use strict";var{base58btc:HOe}=(ti(),ei),{base32:$Oe}=(an(),on),GOe=(An(),Ln),{Multiaddr:SU}=rt(),WOe=Cl(),{CID:h_}=(Ae(),De),{URL:YOe}=v6(),{toString:XOe}=(et(),Je),p_=/^https?:\/\/[^/]+\/(ip[fn]s)\/([^/?#]+)/,e0=/^\/(ip[fn]s)\/([^/?#]+)/,xU=1,AU=2,K2=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,IU=1,TU=2,QOe=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function ZOe(t){let e=y_(t);try{GOe.decode(HOe.decode("z"+e))}catch{return!1}return!0}function JOe(t){try{$Oe.decode(t)}catch{return!1}return!0}function V2(t){try{return typeof t=="string"?Boolean(h_.parse(t)):t instanceof Uint8Array?Boolean(h_.decode(t)):Boolean(h_.asCID(t))}catch(e){return!1}}function RU(t){if(!t)return!1;if(SU.isMultiaddr(t))return!0;try{return new SU(t),!0}catch(e){return!1}}function eke(t){return RU(t)&&WOe.P2P.matches(t)}function z2(t,e,r=xU,i=AU){let n=y_(t);if(!n)return!1;let s=n.match(e);if(!s||s[r]!=="ipfs")return!1;let o=s[i];return o&&e===K2&&(o=o.toLowerCase()),V2(o)}function K4(t,e,r=xU,i=AU){let n=y_(t);if(!n)return!1;let s=n.match(e);if(!s||s[r]!=="ipns")return!1;let o=s[i];if(o&&e===K2){if(o=o.toLowerCase(),V2(o))return!0;try{!o.includes(".")&&o.includes("-")&&(o=o.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));let{hostname:a}=new YOe(`http://${o}`);return QOe.test(a)}catch(a){return!1}}return!0}function PU(t){return typeof t=="string"}function y_(t){return t instanceof Uint8Array?XOe(t,"base58btc"):PU(t)?t:!1}var g_=t=>z2(t,K2,TU,IU),b_=t=>K4(t,K2,TU,IU),CU=t=>g_(t)||b_(t),OU=t=>z2(t,p_)||g_(t),kU=t=>K4(t,p_)||b_(t),qU=t=>OU(t)||kU(t)||CU(t),DU=t=>z2(t,e0)||K4(t,e0);NU.exports={multihash:ZOe,multiaddr:RU,peerMultiaddr:eke,cid:V2,base32cid:t=>JOe(t)&&V2(t),ipfsSubdomain:g_,ipnsSubdomain:b_,subdomain:CU,subdomainGatewayPattern:K2,ipfsUrl:OU,ipnsUrl:kU,url:qU,pathGatewayPattern:p_,ipfsPath:t=>z2(t,e0),ipnsPath:t=>K4(t,e0),path:DU,pathPattern:e0,urlOrPath:t=>qU(t)||DU(t),cidPath:t=>PU(t)&&!V2(t)&&z2(`/ipfs/${t}`,e0)}});var m_=p((hEt,BU)=>{l();var r0=1e3,i0=r0*60,n0=i0*60,Ol=n0*24,tke=Ol*7,rke=Ol*365.25;BU.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return ike(t);if(r==="number"&&isFinite(t))return e.long?ske(t):nke(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function ike(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*rke;case"weeks":case"week":case"w":return r*tke;case"days":case"day":case"d":return r*Ol;case"hours":case"hour":case"hrs":case"hr":case"h":return r*n0;case"minutes":case"minute":case"mins":case"min":case"m":return r*i0;case"seconds":case"second":case"secs":case"sec":case"s":return r*r0;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function nke(t){var e=Math.abs(t);return e>=Ol?Math.round(t/Ol)+"d":e>=n0?Math.round(t/n0)+"h":e>=i0?Math.round(t/i0)+"m":e>=r0?Math.round(t/r0)+"s":t+"ms"}function ske(t){var e=Math.abs(t);return e>=Ol?V4(t,e,Ol,"day"):e>=n0?V4(t,e,n0,"hour"):e>=i0?V4(t,e,i0,"minute"):e>=r0?V4(t,e,r0,"second"):t+" ms"}function V4(t,e,r,i){var n=e>=r*1.5;return Math.round(t/r)+" "+i+(n?"s":"")}});var LU=p((pEt,MU)=>{l();function oke(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=n,r.enabled=o,r.humanize=m_(),r.destroy=u,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let d=0;for(let h=0;h<f.length;h++)d=(d<<5)-d+f.charCodeAt(h),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(f){let d,h=null,y,g;function m(...E){if(!m.enabled)return;let v=m,A=Number(new Date),R=A-(d||A);v.diff=R,v.prev=d,v.curr=A,d=A,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let F=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(D,z)=>{if(D==="%%")return"%";F++;let G=r.formatters[z];if(typeof G=="function"){let Y=E[F];D=G.call(v,Y),E.splice(F,1),F--}return D}),r.formatArgs.call(v,E),(v.log||r.log).apply(v,E)}return m.namespace=f,m.useColors=r.useColors(),m.color=r.selectColor(f),m.extend=i,m.destroy=r.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(y!==r.namespaces&&(y=r.namespaces,g=r.enabled(f)),g),set:E=>{h=E}}),typeof r.init=="function"&&r.init(m),m}function i(f,d){let h=r(this.namespace+(typeof d=="undefined"?":":d)+f);return h.log=this.log,h}function n(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let d,h=(typeof f=="string"?f:"").split(/[\s,]+/),y=h.length;for(d=0;d<y;d++)!h[d]||(f=h[d].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.substr(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function s(){let f=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),f}function o(f){if(f[f.length-1]==="*")return!0;let d,h;for(d=0,h=r.skips.length;d<h;d++)if(r.skips[d].test(f))return!1;for(d=0,h=r.names.length;d<h;d++)if(r.names[d].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function c(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}MU.exports=oke});var be=p((cs,z4)=>{l();cs.formatArgs=cke;cs.save=uke;cs.load=fke;cs.useColors=ake;cs.storage=lke();cs.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();cs.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ake(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function cke(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+z4.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(i=r))}),t.splice(i,0,e)}cs.log=console.debug||console.log||(()=>{});function uke(t){try{t?cs.storage.setItem("debug",t):cs.storage.removeItem("debug")}catch(e){}}function fke(){let t;try{t=cs.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function lke(){try{return localStorage}catch(t){}}z4.exports=LU()(cs);var{formatters:dke}=z4.exports;dke.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var xt=p((yEt,FU)=>{l();"use strict";function UU(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function hke(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return UU(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),UU(new n,r)}}FU.exports=hke});var VU=p((gEt,KU)=>{l();"use strict";function jU(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function pke(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return jU(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),jU(new n,r)}}KU.exports=pke});var Vc,s0,v_,Qe,Ji,zU,bEt,mEt,HU=Se(()=>{l();Vc=Wt(qi()),s0=Vc.default.Reader,v_=Vc.default.Writer,Qe=Vc.default.util,Ji=Vc.default.roots["ipfs-unixfs"]||(Vc.default.roots["ipfs-unixfs"]={}),zU=Ji.Data=(()=>{function t(e){if(this.blocksizes=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=Qe.newBuffer([]),t.prototype.filesize=Qe.Long?Qe.Long.fromBits(0,0,!0):0,t.prototype.blocksizes=Qe.emptyArray,t.prototype.hashType=Qe.Long?Qe.Long.fromBits(0,0,!0):0,t.prototype.fanout=Qe.Long?Qe.Long.fromBits(0,0,!0):0,t.prototype.mode=0,t.prototype.mtime=null,t.encode=function(r,i){if(i||(i=v_.create()),i.uint32(8).int32(r.Type),r.Data!=null&&Object.hasOwnProperty.call(r,"Data")&&i.uint32(18).bytes(r.Data),r.filesize!=null&&Object.hasOwnProperty.call(r,"filesize")&&i.uint32(24).uint64(r.filesize),r.blocksizes!=null&&r.blocksizes.length)for(var n=0;n<r.blocksizes.length;++n)i.uint32(32).uint64(r.blocksizes[n]);return r.hashType!=null&&Object.hasOwnProperty.call(r,"hashType")&&i.uint32(40).uint64(r.hashType),r.fanout!=null&&Object.hasOwnProperty.call(r,"fanout")&&i.uint32(48).uint64(r.fanout),r.mode!=null&&Object.hasOwnProperty.call(r,"mode")&&i.uint32(56).uint32(r.mode),r.mtime!=null&&Object.hasOwnProperty.call(r,"mtime")&&Ji.UnixTime.encode(r.mtime,i.uint32(66).fork()).ldelim(),i},t.decode=function(r,i){r instanceof s0||(r=s0.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Ji.Data;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;case 3:s.filesize=r.uint64();break;case 4:if(s.blocksizes&&s.blocksizes.length||(s.blocksizes=[]),(o&7)==2)for(var a=r.uint32()+r.pos;r.pos<a;)s.blocksizes.push(r.uint64());else s.blocksizes.push(r.uint64());break;case 5:s.hashType=r.uint64();break;case 6:s.fanout=r.uint64();break;case 7:s.mode=r.uint32();break;case 8:s.mtime=Ji.UnixTime.decode(r,r.uint32());break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("Type"))throw Qe.ProtocolError("missing required 'Type'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Ji.Data)return r;var i=new Ji.Data;switch(r.Type){case"Raw":case 0:i.Type=0;break;case"Directory":case 1:i.Type=1;break;case"File":case 2:i.Type=2;break;case"Metadata":case 3:i.Type=3;break;case"Symlink":case 4:i.Type=4;break;case"HAMTShard":case 5:i.Type=5;break}if(r.Data!=null&&(typeof r.Data=="string"?Qe.base64.decode(r.Data,i.Data=Qe.newBuffer(Qe.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),r.filesize!=null&&(Qe.Long?(i.filesize=Qe.Long.fromValue(r.filesize)).unsigned=!0:typeof r.filesize=="string"?i.filesize=parseInt(r.filesize,10):typeof r.filesize=="number"?i.filesize=r.filesize:typeof r.filesize=="object"&&(i.filesize=new Qe.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0))),r.blocksizes){if(!Array.isArray(r.blocksizes))throw TypeError(".Data.blocksizes: array expected");i.blocksizes=[];for(var n=0;n<r.blocksizes.length;++n)Qe.Long?(i.blocksizes[n]=Qe.Long.fromValue(r.blocksizes[n])).unsigned=!0:typeof r.blocksizes[n]=="string"?i.blocksizes[n]=parseInt(r.blocksizes[n],10):typeof r.blocksizes[n]=="number"?i.blocksizes[n]=r.blocksizes[n]:typeof r.blocksizes[n]=="object"&&(i.blocksizes[n]=new Qe.LongBits(r.blocksizes[n].low>>>0,r.blocksizes[n].high>>>0).toNumber(!0))}if(r.hashType!=null&&(Qe.Long?(i.hashType=Qe.Long.fromValue(r.hashType)).unsigned=!0:typeof r.hashType=="string"?i.hashType=parseInt(r.hashType,10):typeof r.hashType=="number"?i.hashType=r.hashType:typeof r.hashType=="object"&&(i.hashType=new Qe.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0))),r.fanout!=null&&(Qe.Long?(i.fanout=Qe.Long.fromValue(r.fanout)).unsigned=!0:typeof r.fanout=="string"?i.fanout=parseInt(r.fanout,10):typeof r.fanout=="number"?i.fanout=r.fanout:typeof r.fanout=="object"&&(i.fanout=new Qe.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0))),r.mode!=null&&(i.mode=r.mode>>>0),r.mtime!=null){if(typeof r.mtime!="object")throw TypeError(".Data.mtime: object expected");i.mtime=Ji.UnixTime.fromObject(r.mtime)}return i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.blocksizes=[]),i.defaults){if(n.Type=i.enums===String?"Raw":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=Qe.newBuffer(n.Data))),Qe.Long){var s=new Qe.Long(0,0,!0);n.filesize=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.filesize=i.longs===String?"0":0;if(Qe.Long){var s=new Qe.Long(0,0,!0);n.hashType=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.hashType=i.longs===String?"0":0;if(Qe.Long){var s=new Qe.Long(0,0,!0);n.fanout=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.fanout=i.longs===String?"0":0;n.mode=0,n.mtime=null}if(r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?Ji.Data.DataType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?Qe.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),r.filesize!=null&&r.hasOwnProperty("filesize")&&(typeof r.filesize=="number"?n.filesize=i.longs===String?String(r.filesize):r.filesize:n.filesize=i.longs===String?Qe.Long.prototype.toString.call(r.filesize):i.longs===Number?new Qe.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0):r.filesize),r.blocksizes&&r.blocksizes.length){n.blocksizes=[];for(var o=0;o<r.blocksizes.length;++o)typeof r.blocksizes[o]=="number"?n.blocksizes[o]=i.longs===String?String(r.blocksizes[o]):r.blocksizes[o]:n.blocksizes[o]=i.longs===String?Qe.Long.prototype.toString.call(r.blocksizes[o]):i.longs===Number?new Qe.LongBits(r.blocksizes[o].low>>>0,r.blocksizes[o].high>>>0).toNumber(!0):r.blocksizes[o]}return r.hashType!=null&&r.hasOwnProperty("hashType")&&(typeof r.hashType=="number"?n.hashType=i.longs===String?String(r.hashType):r.hashType:n.hashType=i.longs===String?Qe.Long.prototype.toString.call(r.hashType):i.longs===Number?new Qe.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0):r.hashType),r.fanout!=null&&r.hasOwnProperty("fanout")&&(typeof r.fanout=="number"?n.fanout=i.longs===String?String(r.fanout):r.fanout:n.fanout=i.longs===String?Qe.Long.prototype.toString.call(r.fanout):i.longs===Number?new Qe.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0):r.fanout),r.mode!=null&&r.hasOwnProperty("mode")&&(n.mode=r.mode),r.mtime!=null&&r.hasOwnProperty("mtime")&&(n.mtime=Ji.UnixTime.toObject(r.mtime,i)),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Vc.default.util.toJSONOptions)},t.DataType=function(){let e={},r=Object.create(e);return r[e[0]="Raw"]=0,r[e[1]="Directory"]=1,r[e[2]="File"]=2,r[e[3]="Metadata"]=3,r[e[4]="Symlink"]=4,r[e[5]="HAMTShard"]=5,r}(),t})(),bEt=Ji.UnixTime=(()=>{function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Seconds=Qe.Long?Qe.Long.fromBits(0,0,!1):0,t.prototype.FractionalNanoseconds=0,t.encode=function(r,i){return i||(i=v_.create()),i.uint32(8).int64(r.Seconds),r.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(r,"FractionalNanoseconds")&&i.uint32(21).fixed32(r.FractionalNanoseconds),i},t.decode=function(r,i){r instanceof s0||(r=s0.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Ji.UnixTime;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.Seconds=r.int64();break;case 2:s.FractionalNanoseconds=r.fixed32();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("Seconds"))throw Qe.ProtocolError("missing required 'Seconds'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Ji.UnixTime)return r;var i=new Ji.UnixTime;return r.Seconds!=null&&(Qe.Long?(i.Seconds=Qe.Long.fromValue(r.Seconds)).unsigned=!1:typeof r.Seconds=="string"?i.Seconds=parseInt(r.Seconds,10):typeof r.Seconds=="number"?i.Seconds=r.Seconds:typeof r.Seconds=="object"&&(i.Seconds=new Qe.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber())),r.FractionalNanoseconds!=null&&(i.FractionalNanoseconds=r.FractionalNanoseconds>>>0),i},t.toObject=function(r,i){i||(i={});var n={};if(i.defaults){if(Qe.Long){var s=new Qe.Long(0,0,!1);n.Seconds=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.Seconds=i.longs===String?"0":0;n.FractionalNanoseconds=0}return r.Seconds!=null&&r.hasOwnProperty("Seconds")&&(typeof r.Seconds=="number"?n.Seconds=i.longs===String?String(r.Seconds):r.Seconds:n.Seconds=i.longs===String?Qe.Long.prototype.toString.call(r.Seconds):i.longs===Number?new Qe.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber():r.Seconds),r.FractionalNanoseconds!=null&&r.hasOwnProperty("FractionalNanoseconds")&&(n.FractionalNanoseconds=r.FractionalNanoseconds),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Vc.default.util.toJSONOptions)},t})(),mEt=Ji.Metadata=(()=>{function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.MimeType="",t.encode=function(r,i){return i||(i=v_.create()),r.MimeType!=null&&Object.hasOwnProperty.call(r,"MimeType")&&i.uint32(10).string(r.MimeType),i},t.decode=function(r,i){r instanceof s0||(r=s0.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Ji.Metadata;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.MimeType=r.string();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof Ji.Metadata)return r;var i=new Ji.Metadata;return r.MimeType!=null&&(i.MimeType=String(r.MimeType)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.MimeType=""),r.MimeType!=null&&r.hasOwnProperty("MimeType")&&(n.MimeType=r.MimeType),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Vc.default.util.toJSONOptions)},t})()});var us={};bt(us,{UnixFS:()=>_i,parseMode:()=>$4,parseMtime:()=>w_});function $4(t){if(t!=null)return typeof t=="number"?t&4095:(t=t.toString(),t.substring(0,1)==="0"?parseInt(t,8)&4095:parseInt(t,10)&4095)}function w_(t){if(t==null)return;let e;if(t.secs!=null&&(e={secs:t.secs,nsecs:t.nsecs}),t.Seconds!=null&&(e={secs:t.Seconds,nsecs:t.FractionalNanoseconds}),Array.isArray(t)&&(e={secs:t[0],nsecs:t[1]}),t instanceof Date){let r=t.getTime(),i=Math.floor(r/1e3);e={secs:i,nsecs:(r-i*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw(0,H4.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}var H4,zc,$U,yke,GU,WU,_i,pi=Se(()=>{l();H4=Wt(VU());HU();zc=zU,$U=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],yke=["directory","hamt-sharded-directory"],GU=parseInt("0644",8),WU=parseInt("0755",8);_i=class{static unmarshal(e){let r=zc.decode(e),i=zc.toObject(r,{defaults:!1,arrays:!0,longs:Number,objects:!1}),n=new _i({type:$U[i.Type],data:i.Data,blockSizes:i.blocksizes,mode:i.mode,mtime:i.mtime?{secs:i.mtime.Seconds,nsecs:i.mtime.FractionalNanoseconds}:void 0});return n._originalMode=i.mode||0,n}constructor(e={type:"file"}){let{type:r,data:i,blockSizes:n,hashType:s,fanout:o,mtime:a,mode:c}=e;if(r&&!$U.includes(r))throw(0,H4.default)(new Error("Type: "+r+" is not valid"),"ERR_INVALID_TYPE");this.type=r||"file",this.data=i,this.hashType=s,this.fanout=o,this.blockSizes=n||[],this._originalMode=0,this.mode=$4(c),a&&(this.mtime=w_(a),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}set mode(e){this._mode=this.isDirectory()?WU:GU;let r=$4(e);r!==void 0&&(this._mode=r)}get mode(){return this._mode}isDirectory(){return Boolean(this.type&&yke.includes(this.type))}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0;let e=0;return this.blockSizes.forEach(r=>{e+=r}),this.data&&(e+=this.data.length),e}marshal(){let e;switch(this.type){case"raw":e=zc.DataType.Raw;break;case"directory":e=zc.DataType.Directory;break;case"file":e=zc.DataType.File;break;case"metadata":e=zc.DataType.Metadata;break;case"symlink":e=zc.DataType.Symlink;break;case"hamt-sharded-directory":e=zc.DataType.HAMTShard;break;default:throw(0,H4.default)(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}let r=this.data;(!this.data||!this.data.length)&&(r=void 0);let i;this.mode!=null&&(i=this._originalMode&4294963200|($4(this.mode)||0),i===GU&&!this.isDirectory()&&(i=void 0),i===WU&&this.isDirectory()&&(i=void 0));let n;if(this.mtime!=null){let o=w_(this.mtime);o&&(n={Seconds:o.secs,FractionalNanoseconds:o.nsecs},n.FractionalNanoseconds===0&&delete n.FractionalNanoseconds)}let s={Type:e,Data:r,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:i,mtime:n};return zc.encode(s).finish()}}});function __(t,e){let r=0;for(let i=0;;i+=7){if(i>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");let n=t[e++];if(r+=i<28?(n&127)<<i:(n&127)*2**i,n<128)break}return[r,e]}function G4(t,e){let r;[r,e]=__(t,e);let i=e+r;if(r<0||i<0)throw new Error("protobuf: invalid length");if(i>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,i),i]}function YU(t,e){let r;return[r,e]=__(t,e),[r&7,r>>3,e]}function bke(t){let e={},r=t.length,i=0;for(;i<r;){let n,s;if([n,s,i]=YU(t,i),s===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(n!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,i]=G4(t,i)}else if(s===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(n!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let o;[o,i]=G4(t,i),e.Name=gke.decode(o)}else if(s===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(n!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Tsize`);[e.Tsize,i]=__(t,i)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`)}if(i>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function XU(t){let e=t.length,r=0,i,n=!1,s;for(;r<e;){let a,c;if([a,c,r]=YU(t,r),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(c===1){if(s)throw new Error("protobuf: (PBNode) duplicate Data section");[s,r]=G4(t,r),i&&(n=!0)}else if(c===2){if(n)throw new Error("protobuf: (PBNode) duplicate Links section");i||(i=[]);let u;[u,r]=G4(t,r),i.push(bke(u))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");let o={};return s&&(o.Data=s),o.Links=i||[],o}var gke,QU=Se(()=>{l();gke=new TextDecoder});function vke(t,e){let r=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");r=H2(e,r,t.Tsize)-1,e[r]=24}if(typeof t.Name=="string"){let i=ZU.encode(t.Name);r-=i.length,e.set(i,r),r=H2(e,r,i.length)-1,e[r]=18}return t.Hash&&(r-=t.Hash.length,e.set(t.Hash,r),r=H2(e,r,t.Hash.length)-1,e[r]=10),e.length-r}function eF(t){let e=_ke(t),r=new Uint8Array(e),i=e;if(t.Data&&(i-=t.Data.length,r.set(t.Data,i),i=H2(r,i,t.Data.length)-1,r[i]=10),t.Links)for(let n=t.Links.length-1;n>=0;n--){let s=vke(t.Links[n],r.subarray(0,i));i-=s,i=H2(r,i,s)-1,r[i]=18}return r}function wke(t){let e=0;if(t.Hash){let r=t.Hash.length;e+=1+r+o0(r)}if(typeof t.Name=="string"){let r=ZU.encode(t.Name).length;e+=1+r+o0(r)}return typeof t.Tsize=="number"&&(e+=1+o0(t.Tsize)),e}function _ke(t){let e=0;if(t.Data){let r=t.Data.length;e+=1+r+o0(r)}if(t.Links)for(let r of t.Links){let i=wke(r);e+=1+i+o0(i)}return e}function H2(t,e,r){e-=o0(r);let i=e;for(;r>=mke;)t[e++]=r&127|128,r/=128;for(;r>=128;)t[e++]=r&127|128,r>>>=7;return t[e]=r,i}function o0(t){return t%2==0&&t++,Math.floor((Eke(t)+6)/7)}function Eke(t){let e=0;return t>=JU&&(t=Math.floor(t/JU),e=32),t>=1<<16&&(t>>>=16,e+=16),t>=1<<8&&(t>>>=8,e+=8),e+Ske[t]}var ZU,JU,mke,Ske,tF=Se(()=>{l();ZU=new TextEncoder,JU=2**32,mke=2**31;Ske=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8]});function rF(t,e){if(t===e)return 0;let r=t.Name?E_.encode(t.Name):[],i=e.Name?E_.encode(e.Name):[],n=r.length,s=i.length;for(let o=0,a=Math.min(n,s);o<a;++o)if(r[o]!==i[o]){n=r[o],s=i[o];break}return n<s?-1:s<n?1:0}function iF(t,e){return!Object.keys(t).some(r=>!e.includes(r))}function nF(t){if(typeof t.asCID=="object"){let r=Ge.asCID(t);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");let e={};if(t.Hash){let r=Ge.asCID(t.Hash);try{r||(typeof t.Hash=="string"?r=Ge.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=Ge.decode(t.Hash)))}catch(i){throw new TypeError(`Invalid DAG-PB form: ${i.message}`)}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(e.Name=t.Name),typeof t.Tsize=="number"&&(e.Tsize=t.Tsize),e}function Us(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");let e={};if(t.Data!==void 0)if(typeof t.Data=="string")e.Data=E_.encode(t.Data);else if(t.Data instanceof Uint8Array)e.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))e.Links=t.Links.map(nF),e.Links.sort(rF);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function S_(t){if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");if(!iF(t,xke))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<t.Links.length;e++){let r=t.Links[e];if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!iF(r,Ake))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash.asCID!==r.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0&&(typeof r.Tsize!="number"||r.Tsize%1!=0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&rF(r,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function sF(t,e=[]){return Us({Data:t,Links:e})}function oF(t,e,r){return nF({Hash:r,Name:t,Tsize:e})}var xke,Ake,E_,aF=Se(()=>{l();Ae();xke=["Data","Links"],Ake=["Hash","Name","Tsize"],E_=new TextEncoder});var Mt={};bt(Mt,{code:()=>$2,createLink:()=>oF,createNode:()=>sF,decode:()=>Hc,encode:()=>Oo,name:()=>Ike,prepare:()=>Us,validate:()=>S_});function Oo(t){S_(t);let e={};return t.Links&&(e.Links=t.Links.map(r=>{let i={};return r.Hash&&(i.Hash=r.Hash.bytes),r.Name!==void 0&&(i.Name=r.Name),r.Tsize!==void 0&&(i.Tsize=r.Tsize),i})),t.Data&&(e.Data=t.Data),eF(e)}function Hc(t){let e=XU(t),r={};return e.Data&&(r.Data=e.Data),e.Links&&(r.Links=e.Links.map(i=>{let n={};try{n.Hash=Ge.decode(i.Hash)}catch(s){}if(!n.Hash)throw new Error("Invalid Hash field found in link, expected CID");return i.Name!==void 0&&(n.Name=i.Name),i.Tsize!==void 0&&(n.Tsize=i.Tsize),n})),r}var Ike,$2,wt=Se(()=>{l();Ae();QU();tF();aF();Ike="dag-pb",$2=112});function cF(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";let e=typeof t;if(Tke.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(Pke(t))return"Buffer";let r=Cke(t);return r||"Object"}function Pke(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function Cke(t){let e=Object.prototype.toString.call(t).slice(8,-1);if(Rke.includes(e))return e}var Tke,Rke,uF=Se(()=>{l();Tke=["string","number","bigint","symbol"],Rke=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"]});var le,Ue,fs=Se(()=>{l();le=class{constructor(e,r,i){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=i}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};le.uint=new le(0,"uint",!0);le.negint=new le(1,"negint",!0);le.bytes=new le(2,"bytes",!0);le.string=new le(3,"string",!0);le.array=new le(4,"array",!1);le.map=new le(5,"map",!1);le.tag=new le(6,"tag",!1);le.float=new le(7,"float",!0);le.false=new le(7,"false",!0);le.true=new le(7,"true",!0);le.null=new le(7,"null",!0);le.undefined=new le(7,"undefined",!0);le.break=new le(7,"break",!0);Ue=class{constructor(e,r,i){this.type=e,this.value=r,this.encodedLength=i,this.encodedBytes=void 0}toString(){return`Token[${this.type}].${this.value}`}}});function W4(t){return a0&&globalThis.Buffer.isBuffer(t)}function x_(t){return t instanceof Uint8Array?W4(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}function pF(t,e){if(W4(t)&&W4(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function yF(t,e=1/0){let r,i=t.length,n=null,s=[];for(let o=0;o<i;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===i){(e-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function gF(t,e,r){let i=[];for(;e<r;){let n=t[e],s=null,o=n>239?4:n>223?3:n>191?2:1;if(e+o<=r){let a,c,u,f;switch(o){case 1:n<128&&(s=n);break;case 2:a=t[e+1],(a&192)==128&&(f=(n&31)<<6|a&63,f>127&&(s=f));break;case 3:a=t[e+1],c=t[e+2],(a&192)==128&&(c&192)==128&&(f=(n&15)<<12|(a&63)<<6|c&63,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:a=t[e+1],c=t[e+2],u=t[e+3],(a&192)==128&&(c&192)==128&&(u&192)==128&&(f=(n&15)<<18|(a&63)<<12|(c&63)<<6|u&63,f>65535&&f<1114112&&(s=f))}}s===null?(s=65533,o=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|s&1023),i.push(s),e+=o}return qke(i)}function qke(t){let e=t.length;if(e<=bF)return String.fromCharCode.apply(String,t);let r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=bF));return r}var a0,Oke,kke,fF,lF,Ua,Y4,dF,hF,bF,c0=Se(()=>{l();a0=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Oke=new TextDecoder,kke=new TextEncoder;fF=a0?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):gF(t,e,r):(t,e,r)=>r-e>64?Oke.decode(t.subarray(e,r)):gF(t,e,r),lF=a0?t=>t.length>64?globalThis.Buffer.from(t):yF(t):t=>t.length>64?kke.encode(t):yF(t),Ua=t=>Uint8Array.from(t),Y4=a0?(t,e,r)=>W4(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),dF=a0?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),x_(globalThis.Buffer.concat(t,e))):(t,e)=>{let r=new Uint8Array(e),i=0;for(let n of t)i+n.length>r.length&&(n=n.subarray(0,r.length-i)),r.set(n,i),i+=n.length;return r},hF=a0?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);bF=4096});var Dke,X4,mF=Se(()=>{l();c0();Dke=256,X4=class{constructor(e=Dke){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.chunks=[],this.cursor=0,this.maxCursor=-1,this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let n=r.length-(this.maxCursor-this.cursor)-1;r.set(e,n)}else{if(r){let n=r.length-(this.maxCursor-this.cursor)-1;n<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,n),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=hF(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){let i=this.chunks[0];e&&this.cursor>i.length/2?(r=this.cursor===i.length?i:i.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=Y4(i,0,this.cursor)}else r=dF(this.chunks,this.cursor);return e&&this.reset(),r}}});function $c(t,e,r){if(t.length-e<r)throw new Error(`${st} not enough data for type`)}var st,A_,G2,ko=Se(()=>{l();st="CBOR decode error:",A_="CBOR encode error:",G2=[];G2[23]=1;G2[24]=2;G2[25]=3;G2[26]=5;G2[27]=9});function ls(t,e,r){$c(t,e,1);let i=t[e];if(r.strict===!0&&i<ji[0])throw new Error(`${st} integer encoded in more bytes than necessary (strict decode)`);return i}function ds(t,e,r){$c(t,e,2);let i=t[e]<<8|t[e+1];if(r.strict===!0&&i<ji[1])throw new Error(`${st} integer encoded in more bytes than necessary (strict decode)`);return i}function hs(t,e,r){$c(t,e,4);let i=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&i<ji[2])throw new Error(`${st} integer encoded in more bytes than necessary (strict decode)`);return i}function ps(t,e,r){$c(t,e,8);let i=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],n=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],s=(BigInt(i)<<BigInt(32))+BigInt(n);if(r.strict===!0&&s<ji[3])throw new Error(`${st} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(r.allowBigInt===!0)return s;throw new Error(`${st} integers outside of the safe integer range are not supported`)}function vF(t,e,r,i){return new Ue(le.uint,ls(t,e+1,i),2)}function wF(t,e,r,i){return new Ue(le.uint,ds(t,e+1,i),3)}function _F(t,e,r,i){return new Ue(le.uint,hs(t,e+1,i),5)}function EF(t,e,r,i){return new Ue(le.uint,ps(t,e+1,i),9)}function Fs(t,e){return Hn(t,0,e.value)}function Hn(t,e,r){if(r<ji[0]){let i=Number(r);t.push([e|i])}else if(r<ji[1]){let i=Number(r);t.push([e|24,i])}else if(r<ji[2]){let i=Number(r);t.push([e|25,i>>>8,i&255])}else if(r<ji[3]){let i=Number(r);t.push([e|26,i>>>24&255,i>>>16&255,i>>>8&255,i&255])}else{let i=BigInt(r);if(i<ji[4]){let n=[e|27,0,0,0,0,0,0,0],s=Number(i&BigInt(4294967295)),o=Number(i>>BigInt(32)&BigInt(4294967295));n[8]=s&255,s=s>>8,n[7]=s&255,s=s>>8,n[6]=s&255,s=s>>8,n[5]=s&255,n[4]=o&255,o=o>>8,n[3]=o&255,o=o>>8,n[2]=o&255,o=o>>8,n[1]=o&255,t.push(n)}else throw new Error(`${st} encountered BigInt larger than allowable range`)}}var ji,Fa=Se(()=>{l();fs();ko();ji=[24,256,65536,4294967296,BigInt("18446744073709551616")];Fs.encodedSize=function(e){return Hn.encodedSize(e.value)};Hn.encodedSize=function(e){return e<ji[0]?1:e<ji[1]?2:e<ji[2]?3:e<ji[3]?5:9};Fs.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0}});function SF(t,e,r,i){return new Ue(le.negint,-1-ls(t,e+1,i),2)}function xF(t,e,r,i){return new Ue(le.negint,-1-ds(t,e+1,i),3)}function AF(t,e,r,i){return new Ue(le.negint,-1-hs(t,e+1,i),5)}function TF(t,e,r,i){let n=ps(t,e+1,i);if(typeof n!="bigint"){let s=-1-n;if(s>=Number.MIN_SAFE_INTEGER)return new Ue(le.negint,s,9)}if(i.allowBigInt!==!0)throw new Error(`${st} integers outside of the safe integer range are not supported`);return new Ue(le.negint,I_-BigInt(n),9)}function Q4(t,e){let r=e.value,i=typeof r=="bigint"?r*I_-IF:r*-1-1;Hn(t,e.type.majorEncoded,i)}var I_,IF,T_=Se(()=>{l();fs();Fa();ko();I_=BigInt(-1),IF=BigInt(1);Q4.encodedSize=function(e){let r=e.value,i=typeof r=="bigint"?r*I_-IF:r*-1-1;return i<ji[0]?1:i<ji[1]?2:i<ji[2]?3:i<ji[3]?5:9};Q4.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0}});function W2(t,e,r,i){$c(t,e,r+i);let n=Y4(t,e+r,e+r+i);return new Ue(le.bytes,n,r+i)}function RF(t,e,r,i){return W2(t,e,1,r)}function PF(t,e,r,i){return W2(t,e,2,ls(t,e+1,i))}function CF(t,e,r,i){return W2(t,e,3,ds(t,e+1,i))}function OF(t,e,r,i){return W2(t,e,5,hs(t,e+1,i))}function kF(t,e,r,i){let n=ps(t,e+1,i);if(typeof n=="bigint")throw new Error(`${st} 64-bit integer bytes lengths not supported`);return W2(t,e,9,n)}function Z4(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===le.string?lF(t.value):t.value),t.encodedBytes}function u0(t,e){let r=Z4(e);Hn(t,e.type.majorEncoded,r.length),t.push(r)}function Nke(t,e){return t.length<e.length?-1:t.length>e.length?1:pF(t,e)}var J4=Se(()=>{l();fs();ko();Fa();c0();u0.encodedSize=function(e){let r=Z4(e);return Hn.encodedSize(r.length)+r.length};u0.compareTokens=function(e,r){return Nke(Z4(e),Z4(r))}});function Y2(t,e,r,i){let n=r+i;return $c(t,e,n),new Ue(le.string,fF(t,e+r,e+n),n)}function qF(t,e,r,i){return Y2(t,e,1,r)}function DF(t,e,r,i){return Y2(t,e,2,ls(t,e+1,i))}function NF(t,e,r,i){return Y2(t,e,3,ds(t,e+1,i))}function BF(t,e,r,i){return Y2(t,e,5,hs(t,e+1,i))}function MF(t,e,r,i){let n=ps(t,e+1,i);if(typeof n=="bigint")throw new Error(`${st} 64-bit integer string lengths not supported`);return Y2(t,e,9,n)}var LF,R_=Se(()=>{l();fs();ko();Fa();J4();c0();LF=u0});function f0(t,e,r,i){return new Ue(le.array,i,r)}function UF(t,e,r,i){return f0(t,e,1,r)}function FF(t,e,r,i){return f0(t,e,2,ls(t,e+1,i))}function jF(t,e,r,i){return f0(t,e,3,ds(t,e+1,i))}function KF(t,e,r,i){return f0(t,e,5,hs(t,e+1,i))}function VF(t,e,r,i){let n=ps(t,e+1,i);if(typeof n=="bigint")throw new Error(`${st} 64-bit integer array lengths not supported`);return f0(t,e,9,n)}function zF(t,e,r,i){if(i.allowIndefinite===!1)throw new Error(`${st} indefinite length items not allowed`);return f0(t,e,1,1/0)}function P_(t,e){Hn(t,le.array.majorEncoded,e.value)}var C_=Se(()=>{l();fs();Fa();ko();P_.compareTokens=Fs.compareTokens});function l0(t,e,r,i){return new Ue(le.map,i,r)}function HF(t,e,r,i){return l0(t,e,1,r)}function $F(t,e,r,i){return l0(t,e,2,ls(t,e+1,i))}function GF(t,e,r,i){return l0(t,e,3,ds(t,e+1,i))}function WF(t,e,r,i){return l0(t,e,5,hs(t,e+1,i))}function YF(t,e,r,i){let n=ps(t,e+1,i);if(typeof n=="bigint")throw new Error(`${st} 64-bit integer map lengths not supported`);return l0(t,e,9,n)}function XF(t,e,r,i){if(i.allowIndefinite===!1)throw new Error(`${st} indefinite length items not allowed`);return l0(t,e,1,1/0)}function O_(t,e){Hn(t,le.map.majorEncoded,e.value)}var k_=Se(()=>{l();fs();Fa();ko();O_.compareTokens=Fs.compareTokens});function QF(t,e,r,i){return new Ue(le.tag,r,1)}function ZF(t,e,r,i){return new Ue(le.tag,ls(t,e+1,i),2)}function JF(t,e,r,i){return new Ue(le.tag,ds(t,e+1,i),3)}function ej(t,e,r,i){return new Ue(le.tag,hs(t,e+1,i),5)}function tj(t,e,r,i){return new Ue(le.tag,ps(t,e+1,i),9)}function q_(t,e){Hn(t,le.tag.majorEncoded,e.value)}var D_=Se(()=>{l();fs();Fa();q_.compareTokens=Fs.compareTokens});function rj(t,e,r,i){if(i.allowUndefined===!1)throw new Error(`${st} undefined values are not supported`);return new Ue(le.undefined,void 0,1)}function ij(t,e,r,i){if(i.allowIndefinite===!1)throw new Error(`${st} indefinite length items not allowed`);return new Ue(le.break,void 0,1)}function N_(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${st} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${st} Infinity values are not supported`)}return new Ue(le.float,t,e)}function nj(t,e,r,i){return N_(B_(t,e+1),3,i)}function sj(t,e,r,i){return N_(M_(t,e+1),5,i)}function oj(t,e,r,i){return N_(fj(t,e+1),9,i)}function eb(t,e,r){let i=e.value;if(i===!1)t.push([le.float.majorEncoded|Bke]);else if(i===!0)t.push([le.float.majorEncoded|Mke]);else if(i===null)t.push([le.float.majorEncoded|Lke]);else if(i===void 0)t.push([le.float.majorEncoded|Uke]);else{let n,s=!1;(!r||r.float64!==!0)&&(cj(i),n=B_(qo,1),i===n||Number.isNaN(i)?(qo[0]=249,t.push(qo.slice(0,3)),s=!0):(uj(i),n=M_(qo,1),i===n&&(qo[0]=250,t.push(qo.slice(0,5)),s=!0))),s||(Fke(i),n=fj(qo,1),qo[0]=251,t.push(qo.slice(0,9)))}}function cj(t){if(t===1/0)js.setUint16(0,31744,!1);else if(t===-1/0)js.setUint16(0,64512,!1);else if(Number.isNaN(t))js.setUint16(0,32256,!1);else{js.setFloat32(0,t);let e=js.getUint32(0),r=(e&2139095040)>>23,i=e&8388607;if(r===255)js.setUint16(0,31744,!1);else if(r===0)js.setUint16(0,(t&2147483648)>>16|i>>13,!1);else{let n=r-127;n<-24?js.setUint16(0,0):n<-14?js.setUint16(0,(e&2147483648)>>16|1<<24+n,!1):js.setUint16(0,(e&2147483648)>>16|n+15<<10|i>>13,!1)}}}function B_(t,e){if(t.length-e<2)throw new Error(`${st} not enough data for float16`);let r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let i=r>>10&31,n=r&1023,s;return i===0?s=n*2**-24:i!==31?s=(n+1024)*2**(i-25):s=n===0?1/0:NaN,r&32768?-s:s}function uj(t){js.setFloat32(0,t,!1)}function M_(t,e){if(t.length-e<4)throw new Error(`${st} not enough data for float32`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function Fke(t){js.setFloat64(0,t,!1)}function fj(t,e){if(t.length-e<8)throw new Error(`${st} not enough data for float64`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}var Bke,Mke,Lke,Uke,aj,js,qo,L_=Se(()=>{l();fs();ko();Fa();Bke=20,Mke=21,Lke=22,Uke=23;eb.encodedSize=function(e,r){let i=e.value;if(i===!1||i===!0||i===null||i===void 0)return 1;let n;if(!r||r.float64!==!0){if(cj(i),n=B_(qo,1),i===n||Number.isNaN(i))return 3;if(uj(i),n=M_(qo,1),i===n)return 5}return 9};aj=new ArrayBuffer(9),js=new DataView(aj,1),qo=new Uint8Array(aj,0);eb.compareTokens=Fs.compareTokens});function Lt(t,e,r){throw new Error(`${st} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function tb(t){return()=>{throw new Error(`${st} ${t}`)}}function lj(t){switch(t.type){case le.false:return Ua([244]);case le.true:return Ua([245]);case le.null:return Ua([246]);case le.bytes:return t.value.length?void 0:Ua([64]);case le.string:return t.value===""?Ua([96]):void 0;case le.array:return t.value===0?Ua([128]):void 0;case le.map:return t.value===0?Ua([160]):void 0;case le.uint:return t.value<24?Ua([Number(t.value)]):void 0;case le.negint:if(t.value>=-24)return Ua([31-Number(t.value)])}}var Oe,Do,U_=Se(()=>{l();fs();Fa();T_();J4();R_();C_();k_();D_();L_();ko();c0();Oe=[];for(let t=0;t<=23;t++)Oe[t]=Lt;Oe[24]=vF;Oe[25]=wF;Oe[26]=_F;Oe[27]=EF;Oe[28]=Lt;Oe[29]=Lt;Oe[30]=Lt;Oe[31]=Lt;for(let t=32;t<=55;t++)Oe[t]=Lt;Oe[56]=SF;Oe[57]=xF;Oe[58]=AF;Oe[59]=TF;Oe[60]=Lt;Oe[61]=Lt;Oe[62]=Lt;Oe[63]=Lt;for(let t=64;t<=87;t++)Oe[t]=RF;Oe[88]=PF;Oe[89]=CF;Oe[90]=OF;Oe[91]=kF;Oe[92]=Lt;Oe[93]=Lt;Oe[94]=Lt;Oe[95]=tb("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)Oe[t]=qF;Oe[120]=DF;Oe[121]=NF;Oe[122]=BF;Oe[123]=MF;Oe[124]=Lt;Oe[125]=Lt;Oe[126]=Lt;Oe[127]=tb("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)Oe[t]=UF;Oe[152]=FF;Oe[153]=jF;Oe[154]=KF;Oe[155]=VF;Oe[156]=Lt;Oe[157]=Lt;Oe[158]=Lt;Oe[159]=zF;for(let t=160;t<=183;t++)Oe[t]=HF;Oe[184]=$F;Oe[185]=GF;Oe[186]=WF;Oe[187]=YF;Oe[188]=Lt;Oe[189]=Lt;Oe[190]=Lt;Oe[191]=XF;for(let t=192;t<=215;t++)Oe[t]=QF;Oe[216]=ZF;Oe[217]=JF;Oe[218]=ej;Oe[219]=tj;Oe[220]=Lt;Oe[221]=Lt;Oe[222]=Lt;Oe[223]=Lt;for(let t=224;t<=243;t++)Oe[t]=tb("simple values are not supported");Oe[244]=Lt;Oe[245]=Lt;Oe[246]=Lt;Oe[247]=rj;Oe[248]=tb("simple values are not supported");Oe[249]=nj;Oe[250]=sj;Oe[251]=oj;Oe[252]=Lt;Oe[253]=Lt;Oe[254]=Lt;Oe[255]=ij;Do=[];for(let t=0;t<24;t++)Do[t]=new Ue(le.uint,t,1);for(let t=-1;t>=-24;t--)Do[31-t]=new Ue(le.negint,t,1);Do[64]=new Ue(le.bytes,new Uint8Array(0),1);Do[96]=new Ue(le.string,"",1);Do[128]=new Ue(le.array,0,1);Do[160]=new Ue(le.map,0,1);Do[244]=new Ue(le.false,!1,1);Do[245]=new Ue(le.true,!0,1);Do[246]=new Ue(le.null,null,1)});function rb(t,e={},r){let i=cF(t),n=e&&e.typeEncoders&&e.typeEncoders[i]||sf[i];if(typeof n=="function"){let o=n(t,i,e,r);if(o!=null)return o}let s=sf[i];if(!s)throw new Error(`${A_} unsupported type: ${i}`);return s(t,i,e,r)}function Kke(t,e){e.mapSorter&&t.sort(e.mapSorter)}function Vke(t,e){let r=Array.isArray(t[0])?t[0][0]:t[0],i=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==i.type)return r.type.compare(i.type);let n=r.type.major,s=ja[n].compareTokens(r,i);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function hj(t,e,r,i){if(Array.isArray(e))for(let n of e)hj(t,n,r,i);else r[e.type.major](t,e,i)}function zke(t,e,r){let i=rb(t,r);if(!Array.isArray(i)&&r.quickEncodeToken){let n=r.quickEncodeToken(i);if(n)return n;let s=e[i.type.major];if(s.encodedSize){let o=s.encodedSize(i,r),a=new X4(o);if(s(a,i,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${i} was wrong`);return x_(a.chunks[0])}}return hj(dj,i,e,r),dj.toBytes(!0)}function ib(t,e){return e=Object.assign({},jke,e),zke(t,ja,e)}var jke,ja,dj,X2,nf,sf,pj=Se(()=>{l();uF();fs();mF();ko();U_();c0();Fa();T_();J4();R_();C_();k_();D_();L_();jke={float64:!1,mapSorter:Vke,quickEncodeToken:lj},ja=[];ja[le.uint.major]=Fs;ja[le.negint.major]=Q4;ja[le.bytes.major]=u0;ja[le.string.major]=LF;ja[le.array.major]=P_;ja[le.map.major]=O_;ja[le.tag.major]=q_;ja[le.float.major]=eb;dj=new X4,X2=class{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${A_} object contains circular references`);return new X2(r,e)}},nf={null:new Ue(le.null,null),undefined:new Ue(le.undefined,void 0),true:new Ue(le.true,!0),false:new Ue(le.false,!1),emptyArray:new Ue(le.array,0),emptyMap:new Ue(le.map,0)},sf={number(t,e,r,i){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new Ue(le.float,t):t>=0?new Ue(le.uint,t):new Ue(le.negint,t)},bigint(t,e,r,i){return t>=BigInt(0)?new Ue(le.uint,t):new Ue(le.negint,t)},Uint8Array(t,e,r,i){return new Ue(le.bytes,t)},string(t,e,r,i){return new Ue(le.string,t)},boolean(t,e,r,i){return t?nf.true:nf.false},null(t,e,r,i){return nf.null},undefined(t,e,r,i){return nf.undefined},ArrayBuffer(t,e,r,i){return new Ue(le.bytes,new Uint8Array(t))},DataView(t,e,r,i){return new Ue(le.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,i){if(!t.length)return r.addBreakTokens===!0?[nf.emptyArray,new Ue(le.break)]:nf.emptyArray;i=X2.createCheck(i,t);let n=[],s=0;for(let o of t)n[s++]=rb(o,r,i);return r.addBreakTokens?[new Ue(le.array,t.length),n,new Ue(le.break)]:[new Ue(le.array,t.length),n]},Object(t,e,r,i){let n=e!=="Object",s=n?t.keys():Object.keys(t),o=n?t.size:s.length;if(!o)return r.addBreakTokens===!0?[nf.emptyMap,new Ue(le.break)]:nf.emptyMap;i=X2.createCheck(i,t);let a=[],c=0;for(let u of s)a[c++]=[rb(u,r,i),rb(n?t.get(u):t[u],r,i)];return Kke(a,r),r.addBreakTokens?[new Ue(le.map,o),a,new Ue(le.break)]:[new Ue(le.map,o),a]}};sf.Map=sf.Object;sf.Buffer=sf.Uint8Array;for(let t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))sf[`${t}Array`]=sf.DataView});function $ke(t,e,r){let i=[];for(let n=0;n<t.value;n++){let s=Z2(e,r);if(s===nb){if(t.value===1/0)break;throw new Error(`${st} got unexpected break to lengthed array`)}if(s===Q2)throw new Error(`${st} found array but not enough entries (got ${n}, expected ${t.value})`);i[n]=s}return i}function Gke(t,e,r){let i=r.useMaps===!0,n=i?void 0:{},s=i?new Map:void 0;for(let o=0;o<t.value;o++){let a=Z2(e,r);if(a===nb){if(t.value===1/0)break;throw new Error(`${st} got unexpected break to lengthed map`)}if(a===Q2)throw new Error(`${st} found map but not enough entries (got ${o} [no key], expected ${t.value})`);if(i!==!0&&typeof a!="string")throw new Error(`${st} non-string keys not supported (got ${typeof a})`);let c=Z2(e,r);if(c===Q2)throw new Error(`${st} found map but not enough entries (got ${o} [no value], expected ${t.value})`);i?s.set(a,c):n[a]=c}return i?s:n}function Z2(t,e){if(t.done())return Q2;let r=t.next();if(r.type===le.break)return nb;if(r.type.terminal)return r.value;if(r.type===le.array)return $ke(r,t,e);if(r.type===le.map)return Gke(r,t,e);if(r.type===le.tag){if(e.tags&&typeof e.tags[r.value]=="function"){let i=Z2(t,e);return e.tags[r.value](i)}throw new Error(`${st} tag not supported (${r.value})`)}throw new Error("unsupported")}function sb(t,e){if(!(t instanceof Uint8Array))throw new Error(`${st} data to decode must be a Uint8Array`);e=Object.assign({},Hke,e);let r=e.tokenizer||new yj(t,e),i=Z2(r,e);if(i===Q2)throw new Error(`${st} did not find any content to decode`);if(i===nb)throw new Error(`${st} got unexpected break`);if(!r.done())throw new Error(`${st} too many terminals, data makes no sense`);return i}var Hke,yj,Q2,nb,gj=Se(()=>{l();ko();fs();U_();Hke={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},yj=class{constructor(e,r={}){this.pos=0,this.data=e,this.options=r}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],r=Do[e];if(r===void 0){let i=Oe[e];if(!i)throw new Error(`${st} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let n=e&31;r=i(this.data,this.pos,n,this.options)}return this.pos+=r.encodedLength,r}},Q2=Symbol.for("DONE"),nb=Symbol.for("BREAK")});var ob={};bt(ob,{Token:()=>Ue,Type:()=>le,decode:()=>sb,encode:()=>ib});var J2=Se(()=>{l();pj();gj();fs()});var ab={};bt(ab,{code:()=>ey,decode:()=>kl,encode:()=>F_,name:()=>Jke});function Wke(t){if(t.asCID!==t)return null;let e=Ge.asCID(t);if(!e)return null;let r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new Ue(le.tag,bj),new Ue(le.bytes,r)]}function Yke(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Xke(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}function Zke(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Ge.decode(t.subarray(1))}var bj,Qke,mj,Jke,ey,F_,kl,Gc=Se(()=>{l();J2();Ae();bj=42;Qke={float64:!0,typeEncoders:{Object:Wke,undefined:Yke,number:Xke}};mj={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};mj.tags[bj]=Zke;Jke="dag-cbor",ey=113,F_=t=>ib(t,Qke),kl=t=>sb(t,mj)});var wj=p((XSt,vj)=>{l();"use strict";vj.exports=()=>{}});var af=p(of=>{l();"use strict";var ty=class extends Error{constructor(e="not initialized"){super(e);this.name="NotInitializedError",this.code=ty.code}};ty.code="ERR_NOT_INITIALIZED";of.NotInitializedError=ty;var j_=class extends Error{constructor(e="cannot initialize an initializing node"){super(e);this.name="AlreadyInitializingError",this.code=d0.code}};j_.code="ERR_ALREADY_INITIALIZING";of.AlreadyInitializingError=j_;var d0=class extends Error{constructor(e="cannot re-initialize an initialized node"){super(e);this.name="AlreadyInitializedError",this.code=d0.code}};d0.code="ERR_ALREADY_INITIALIZED";of.AlreadyInitializedError=d0;var ry=class extends Error{constructor(e="not started"){super(e);this.name="NotStartedError",this.code=ry.code}};ry.code="ERR_NOT_STARTED";of.NotStartedError=ry;var iy=class extends Error{constructor(e="cannot start, already startin"){super(e);this.name="AlreadyStartingError",this.code=iy.code}};iy.code="ERR_ALREADY_STARTING";of.AlreadyStartingError=iy;var ny=class extends Error{constructor(e="cannot start, already started"){super(e);this.name="AlreadyStartedError",this.code=ny.code}};ny.code="ERR_ALREADY_STARTED";of.AlreadyStartedError=ny;var sy=class extends Error{constructor(e="not enabled"){super(e);this.name="NotEnabledError",this.code=sy.code}};sy.code="ERR_NOT_ENABLED";of.NotEnabledError=sy});var _j,Ej=Se(()=>{l();_j="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"});var oy={};bt(oy,{customAlphabet:()=>eqe,customRandom:()=>xj,nanoid:()=>tqe,random:()=>Sj,urlAlphabet:()=>_j});var Sj,xj,eqe,tqe,ay=Se(()=>{l();Ej();Sj=t=>crypto.getRandomValues(new Uint8Array(t)),xj=(t,e,r)=>{let i=(2<<Math.log(t.length-1)/Math.LN2)-1,n=-~(1.6*i*e/t.length);return()=>{let s="";for(;;){let o=r(n),a=n;for(;a--;)if(s+=t[o[a]&i]||"",s.length===e)return s}}},eqe=(t,e)=>xj(t,e,Sj),tqe=(t=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let i=r[t]&63;i<36?e+=i.toString(36):i<62?e+=(i-26).toString(36).toUpperCase():i<63?e+="_":e+="-"}return e}});var K_=p((ext,Ij)=>{l();"use strict";var{nanoid:rqe}=(ay(),oy),{toString:iqe}=(et(),Je),{fromString:nqe}=(ut(),lt),Wc="/",Aj=new TextEncoder().encode(Wc),cb=Aj[0],$n=class{constructor(e,r){if(typeof e=="string")this._buf=nqe(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(r==null&&(r=!0),r&&this.clean(),this._buf.byteLength===0||this._buf[0]!==cb)throw new Error("Invalid key")}toString(e="utf8"){return iqe(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new $n(e.join(Wc))}static random(){return new $n(rqe().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new $n(e):e.uint8Array?new $n(e.uint8Array()):null}clean(){if((!this._buf||this._buf.byteLength===0)&&(this._buf=Aj),this._buf[0]!==cb){let e=new Uint8Array(this._buf.byteLength+1);e.fill(cb,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===cb;)this._buf=this._buf.subarray(0,-1)}less(e){let r=this.list(),i=e.list();for(let n=0;n<r.length;n++){if(i.length<n+1)return!1;let s=r[n],o=i[n];if(s<o)return!0;if(s>o)return!1}return r.length<i.length}reverse(){return $n.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(Wc).slice(1)}type(){return sqe(this.baseNamespace())}name(){return oqe(this.baseNamespace())}instance(e){return new $n(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(Wc)||(e+=Wc),e+=this.type(),new $n(e)}parent(){let e=this.list();return e.length===1?new $n(Wc):new $n(e.slice(0,-1).join(Wc))}child(e){return this.toString()===Wc?e:e.toString()===Wc?this:new $n(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return $n.withNamespaces([...this.namespaces(),...aqe(e.map(r=>r.namespaces()))])}};function sqe(t){let e=t.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function oqe(t){let e=t.split(":");return e[e.length-1]}function aqe(t){return[].concat(...t)}Ij.exports=$n});var Rj=p((txt,Tj)=>{l();"use strict";var{nanoid:cqe}=(ay(),oy),uqe=(t=e=>e)=>t(cqe());Tj.exports=uqe});var h0=p((rxt,Pj)=>{l();"use strict";var fqe=async t=>{let e=[];for await(let r of t)e.push(r);return e};Pj.exports=fqe});var V_=p((ixt,Cj)=>{l();"use strict";var lqe=Rj(),dqe=h0(),hqe=(t,e)=>async function*(){yield*(await dqe(t)).sort(e)}(),pqe=(t,e)=>{let r=new RegExp("^"+e);return t.replace(r,"")};Cj.exports={sortAll:hqe,tmpdir:lqe,replaceStartWith:pqe}});var Ka=p((nxt,Oj)=>{l();"use strict";var yqe=async t=>{for await(let e of t);};Oj.exports=yqe});var Va=p((sxt,kj)=>{l();"use strict";var gqe=async function*(t,e){for await(let r of t)await e(r)&&(yield r)};kj.exports=gqe});var p0=p((oxt,qj)=>{l();"use strict";var bqe=async function*(t,e){let r=0;if(!(e<1)){for await(let i of t)if(yield i,r++,r===e)return}};qj.exports=bqe});var z_=p((axt,Lj)=>{l();"use strict";var{sortAll:Dj}=V_(),Nj=Ka(),y0=Va(),Bj=p0(),Mj=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,r,i){return Promise.reject(new Error(".put is not implemented"))}get(e,r){return Promise.reject(new Error(".get is not implemented"))}has(e,r){return Promise.reject(new Error(".has is not implemented"))}delete(e,r){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,r={}){for await(let{key:i,value:n}of e)await this.put(i,n,r),yield{key:i,value:n}}async*getMany(e,r={}){for await(let i of e)yield this.get(i,r)}async*deleteMany(e,r={}){for await(let i of e)await this.delete(i,r),yield i}batch(){let e=[],r=[];return{put(i,n){e.push({key:i,value:n})},delete(i){r.push(i)},commit:async i=>{await Nj(this.putMany(e,i)),e=[],await Nj(this.deleteMany(r,i)),r=[]}}}async*_all(e,r){throw new Error("._all is not implemented")}async*_allKeys(e,r){throw new Error("._allKeys is not implemented")}query(e,r){let i=this._all(e,r);if(e.prefix!=null&&(i=y0(i,n=>n.key.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(i=e.filters.reduce((n,s)=>y0(n,s),i)),Array.isArray(e.orders)&&(i=e.orders.reduce((n,s)=>Dj(n,s),i)),e.offset!=null){let n=0;i=y0(i,()=>n++>=e.offset)}return e.limit!=null&&(i=Bj(i,e.limit)),i}queryKeys(e,r){let i=this._allKeys(e,r);if(e.prefix!=null&&(i=y0(i,n=>n.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(i=e.filters.reduce((n,s)=>y0(n,s),i)),Array.isArray(e.orders)&&(i=e.orders.reduce((n,s)=>Dj(n,s),i)),e.offset!=null){let n=0;i=y0(i,()=>n++>=e.offset)}return e.limit!=null&&(i=Bj(i,e.limit)),i}};Lj.exports=Mj});var jj=p((cxt,Fj)=>{l();"use strict";function Uj(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function mqe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Uj(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),Uj(new n,r)}}Fj.exports=mqe});var H_=p((uxt,Kj)=>{l();"use strict";var cy=jj();function vqe(t){return t=t||new Error("Cannot open database"),cy(t,"ERR_DB_OPEN_FAILED")}function wqe(t){return t=t||new Error("Delete failed"),cy(t,"ERR_DB_DELETE_FAILED")}function _qe(t){return t=t||new Error("Write failed"),cy(t,"ERR_DB_WRITE_FAILED")}function Eqe(t){return t=t||new Error("Not Found"),cy(t,"ERR_NOT_FOUND")}function Sqe(t){return t=t||new Error("Aborted"),cy(t,"ERR_ABORTED")}Kj.exports={dbOpenFailedError:vqe,dbDeleteFailedError:wqe,dbWriteFailedError:_qe,notFoundError:Eqe,abortedError:Sqe}});var $j=p((fxt,Hj)=>{l();"use strict";var Vj=K_(),xqe=z_(),Aqe=H_(),zj=class extends xqe{constructor(){super();this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,r){this.data[e.toString()]=r}async get(e){if(!await this.has(e))throw Aqe.notFoundError();return this.data[e.toString()]}async has(e){return this.data[e.toString()]!==void 0}async delete(e){delete this.data[e.toString()]}async*_all(){yield*Object.entries(this.data).map(([e,r])=>({key:new Vj(e),value:r}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>new Vj(e))}};Hj.exports=zj});var Ut=p((lxt,Gj)=>{l();"use strict";var Iqe=K_(),Tqe=$j(),Rqe=V_(),Pqe=H_(),Cqe=z_();Gj.exports={Key:Iqe,MemoryDatastore:Tqe,utils:Rqe,Errors:Pqe,Adapter:Cqe}});var Yj=p((dxt,Wj)=>{l();"use strict";Wj.exports=function(){return Date.now()}});var Qj=p((hxt,Xj)=>{l();"use strict";var $_=Yj();function G_(t,e,r){var i=this;this._started=$_(),this._rescheduled=0,this._scheduled=e,this._args=r,this._timer=setTimeout(n,e);function n(){i._rescheduled>0?(i._scheduled=i._rescheduled-($_()-i._started),i._timer=setTimeout(n,i._scheduled),i._rescheduled=0):t.apply(null,i._args)}}G_.prototype.reschedule=function(t){var e=$_();return e+t-(this._started+this._scheduled)<0?!1:(this._started=e,this._rescheduled=t,!0)};G_.prototype.clear=function(){clearTimeout(this._timer)};function Oqe(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");var t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new G_(arguments[0],arguments[1],t)}Xj.exports=Oqe});var ub=p((pxt,W_)=>{l();"use strict";var{AbortController:kqe}=typeof self!="undefined"?self:typeof window!="undefined"?window:fh(),Zj=Qj(),uy=class extends kqe{constructor(e){super();this._ms=e,this._timer=Zj(()=>this.abort(),e),Object.setPrototypeOf(this,uy.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=Zj(()=>this.abort(),this._ms)}};W_.exports=uy;W_.exports.TimeoutController=uy});var fy=p((yxt,Y_)=>{l();"use strict";var qqe=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;Y_.exports=ht;Y_.exports.default=ht;ht.nanosecond=ht.ns=1/1e6;ht.\u00B5s=ht.\u03BCs=ht.us=ht.microsecond=1/1e3;ht.millisecond=ht.ms=ht[""]=1;ht.second=ht.sec=ht.s=ht.ms*1e3;ht.minute=ht.min=ht.m=ht.s*60;ht.hour=ht.hr=ht.h=ht.m*60;ht.day=ht.d=ht.h*24;ht.week=ht.wk=ht.w=ht.d*7;ht.month=ht.b=ht.d*(365.25/12);ht.year=ht.yr=ht.y=ht.d*365.25;function ht(t="",e="ms"){var r=null;return t=(t+"").replace(/(\d)[,_](\d)/g,"$1$2"),t.replace(qqe,function(i,n,s){s=Jj(s),s&&(r=(r||0)+parseFloat(n,10)*s)}),r&&r/(Jj(e)||1)}function Jj(t){return ht[t]||ht[t.toLowerCase().replace(/s$/,"")]}});var tK=p(eK=>{l();"use strict";var ly=class extends Error{constructor(e="request timed out"){super(e);this.name="TimeoutError",this.code=ly.code}};ly.code="ERR_TIMEOUT";eK.TimeoutError=ly});var ke=p((bxt,rK)=>{l();"use strict";var Dqe=ub(),{anySignal:Nqe}=ku(),{default:Bqe}=fy(),{TimeoutError:X_}=tK();function Mqe(t,e){return(...r)=>{let i=r[e??r.length-1];if(!i||!i.timeout)return t(...r);let n=typeof i.timeout=="string"?Bqe(i.timeout):i.timeout,s=new Dqe(n);i.signal=Nqe([i.signal,s.signal]);let o=t(...r),a=new Promise((f,d)=>{s.signal.addEventListener("abort",()=>{d(new X_)})}),c=Date.now(),u=()=>{if(s.signal.aborted)throw new X_;if(Date.now()-c>n)throw s.abort(),new X_};return o[Symbol.asyncIterator]?async function*(){let f=o[Symbol.asyncIterator]();try{for(;;){let{value:d,done:h}=await Promise.race([f.next(),a]);if(h)break;u(),yield d}}catch(d){throw u(),d}finally{s.clear(),f.return&&f.return()}}():(async()=>{try{let f=await Promise.race([o,a]);return u(),f}catch(f){throw u(),f}finally{s.clear()}})()}}rK.exports=Mqe});var g0=p((mxt,nK)=>{l();"use strict";function iK(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Lqe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return iK(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),iK(new n,r)}}nK.exports=Lqe});var dy=p((vxt,aK)=>{l();"use strict";var{CID:Q_}=(Ae(),De),sK=g0(),oK="/ipfs/",Uqe=t=>{if(t instanceof Uint8Array)try{t=Q_.decode(t)}catch(n){throw sK(n,"ERR_INVALID_CID")}let e=Q_.asCID(t);if(e)return{cid:e,path:void 0};t=t.toString(),t.startsWith(oK)&&(t=t.substring(oK.length));let r=t.split("/"),i;try{e=Q_.parse(r.shift()||"")}catch(n){throw sK(n,"ERR_INVALID_CID")}return r.length&&(i=`/${r.join("/")}`),{cid:e,path:i}};aK.exports=Uqe});var Ki=p((wxt,uK)=>{l();"use strict";var Fqe=t0(),{CID:hy}=(Ae(),De),jqe=Ut().Key,Z_=xt(),Kqe=ke(),Vqe=dy(),zqe=(wt(),Mt),Hqe="ERR_BAD_PATH",$qe=t=>{if(hy.asCID(t))return`/ipfs/${t}`;let r=t.toString();try{return`/ipfs/${hy.parse(r)}`}catch{}if(Fqe.path(r))return r;throw Z_(new Error(`invalid path: ${t}`),Hqe)},Gqe=t=>t instanceof Uint8Array?hy.decode(t).toString():(t=t.toString(),t.indexOf("/ipfs/")===0&&(t=t.substring("/ipfs/".length)),t.charAt(t.length-1)==="/"&&(t=t.substring(0,t.length-1)),t),Wqe=async function(t,e,r,i={}){let{cid:n,path:s}=Vqe(r);s&&(i.path=s);let o=n,a=i.path||"";if(a.startsWith("/")&&(a=a.substring(1)),i.path)try{for await(let{value:c,remainderPath:u}of cK(n,i.path,e,t,{signal:i.signal})){if(!hy.asCID(c))break;a=u,o=c}}catch(c){throw c.message.startsWith("Object has no property")&&(c.message=`no link named "${a.split("/")[0]}" under ${o}`,c.code="ERR_NO_LINK"),c}return{cid:o,remainderPath:a||""}},Yqe=t=>{if(t.type!=="file"&&t.type!=="directory"&&t.type!=="raw")throw new Error(`Unknown node type '${t.type}'`);let e={cid:t.cid,path:t.path,name:t.name,size:t.size,type:"file"};return t.type==="directory"&&(e.type="dir"),t.type==="file"&&(e.size=t.unixfs.fileSize()),(t.type==="file"||t.type==="directory")&&(e.mode=t.unixfs.mode,t.unixfs.mtime!==void 0&&(e.mtime=t.unixfs.mtime)),e},Xqe=Kqe(async(t,e)=>await t),cK=async function*(t,e,r,i,n){let s=async u=>{let f=await r.getCodec(u.code),d=await i.blocks.get(u,n);return f.decode(d)},o=e.split("/").filter(Boolean),a=await s(t),c=t;for(o.length||(yield{value:a,remainderPath:""});o.length;){let u=o.shift();if(!u)throw Z_(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(t.code===zqe.code&&Array.isArray(a.Links)){let f=a.Links.find(d=>d.Name===u);if(f){yield{value:f.Hash,remainderPath:o.join("/")},a=await s(f.Hash),c=f.Hash;continue}}if(Object.prototype.hasOwnProperty.call(a,u))a=a[u],yield{value:a,remainderPath:o.join("/")};else throw Z_(new Error(`no link named "${u}" under ${c}`),"ERR_NO_LINK");hy.asCID(a)&&(c=a,a=await s(a))}};uK.exports={normalizePath:$qe,normalizeCidPath:Gqe,resolvePath:Wqe,mapFile:Yqe,withTimeout:Xqe,resolve:cK,OFFLINE_ERROR:"This command must be run in online mode. Try running 'ipfs daemon' first.",MFS_ROOT_KEY:new jqe("/local/filesroot"),MFS_MAX_CHUNK_SIZE:262144,MFS_MAX_LINKS:174}});var fb=p((_xt,fK)=>{l();"use strict";var{NotStartedError:Qqe,AlreadyStartingError:Zqe,AlreadyStartedError:Jqe}=af(),{withTimeout:eDe}=Ki(),za=class{static create({start:e,stop:r}){return new za(e,r)}static async start(e,r){let{state:i,activate:n}=e;switch(i.status){case"stopped":try{let s=n(r);e.state={status:"starting",ready:s};let o=await s;return e.state={status:"started",value:o},o}catch(s){throw e.state={status:"stopped"},s}case"starting":throw new Zqe;case"started":throw new Jqe;case"stopping":return await i.ready,await za.start(e,r);default:return za.panic(e)}}static async stop(e){let{state:r,deactivate:i}=e;switch(r.status){case"stopped":break;case"starting":{try{await r.ready}catch(n){}return await za.stop(e)}case"stopping":return await r.ready;case"started":{i&&await i(r.value),e.state={status:"stopped"};break}default:za.panic(r)}}static try({state:e}){switch(e.status){case"started":return e.value;default:return null}}static async use({state:e},r){switch(e.status){case"started":return e.value;case"starting":return await eDe(e.ready,r);default:throw new Qqe}}static panic({state:e}){let r=JSON.stringify({status:e.status});throw RangeError(`Service in invalid state ${r}, should never happen if you see this please report a bug`)}constructor(e,r){this.activate=e,this.deactivate=r,this.state={status:"stopped"}}async use(e){return await za.use(this,e)}try(){return za.try(this)}};fK.exports=za});var dK=p((Ext,lK)=>{l();"use strict";var tDe=fb();lK.exports=({network:t,preload:e,peerId:r,keychain:i,repo:n,ipns:s,mfsPreload:o,print:a,options:c})=>async()=>{let{libp2p:f}=await tDe.start(t,{peerId:r,repo:n,print:a,options:c});await Promise.all([s.startOnline({keychain:i,libp2p:f,peerId:r,repo:n}),e.start(),o.start()])}});var pK=p((Sxt,hK)=>{l();"use strict";var rDe=fb();hK.exports=({network:t,preload:e,ipns:r,repo:i,mfsPreload:n})=>async()=>{await Promise.all([e.stop(),r.stop(),n.stop(),rDe.stop(t),i.close()])}});var py=p((xxt,yK)=>{l();yK.exports=function(t){if(!t)throw Error("hashlru must have a max value, of type number, greater than 0");var e=0,r=Object.create(null),i=Object.create(null);function n(s,o){r[s]=o,e++,e>=t&&(e=0,i=r,r=Object.create(null))}return{has:function(s){return r[s]!==void 0||i[s]!==void 0},remove:function(s){r[s]!==void 0&&(r[s]=void 0),i[s]!==void 0&&(i[s]=void 0)},get:function(s){var o=r[s];if(o!==void 0)return o;if((o=i[s])!==void 0)return n(s,o),o},set:function(s,o){r[s]!==void 0?r[s]=o:n(s,o)},clear:function(){r=Object.create(null),i=Object.create(null)}}}});var J_=p((Axt,bK)=>{l();"use strict";var iDe=py(),gK=class{constructor(e){this.lru=iDe(e)}get(e){let r=this.lru.get(e);if(r){if(r.expire&&r.expire<Date.now()){this.lru.remove(e);return}return r.value}}set(e,r,i){this.lru.set(e,{value:r,expire:Date.now()+i})}has(e){return!!this.get(e)}remove(e){this.lru.remove(e)}clear(){this.lru.clear()}};bK.exports=gK});var vK=p((Ixt,eE)=>{l();"use strict";var nDe=Object.prototype.hasOwnProperty,Pn="~";function yy(){}Object.create&&(yy.prototype=Object.create(null),new yy().__proto__||(Pn=!1));function sDe(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function mK(t,e,r,i,n){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new sDe(r,i||t,n),o=Pn?Pn+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],s]:t._events[o].push(s):(t._events[o]=s,t._eventsCount++),t}function lb(t,e){--t._eventsCount==0?t._events=new yy:delete t._events[e]}function yn(){this._events=new yy,this._eventsCount=0}yn.prototype.eventNames=function(){var e=[],r,i;if(this._eventsCount===0)return e;for(i in r=this._events)nDe.call(r,i)&&e.push(Pn?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};yn.prototype.listeners=function(e){var r=Pn?Pn+e:e,i=this._events[r];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,o=new Array(s);n<s;n++)o[n]=i[n].fn;return o};yn.prototype.listenerCount=function(e){var r=Pn?Pn+e:e,i=this._events[r];return i?i.fn?1:i.length:0};yn.prototype.emit=function(e,r,i,n,s,o){var a=Pn?Pn+e:e;if(!this._events[a])return!1;var c=this._events[a],u=arguments.length,f,d;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,r),!0;case 3:return c.fn.call(c.context,r,i),!0;case 4:return c.fn.call(c.context,r,i,n),!0;case 5:return c.fn.call(c.context,r,i,n,s),!0;case 6:return c.fn.call(c.context,r,i,n,s,o),!0}for(d=1,f=new Array(u-1);d<u;d++)f[d-1]=arguments[d];c.fn.apply(c.context,f)}else{var h=c.length,y;for(d=0;d<h;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),u){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,r);break;case 3:c[d].fn.call(c[d].context,r,i);break;case 4:c[d].fn.call(c[d].context,r,i,n);break;default:if(!f)for(y=1,f=new Array(u-1);y<u;y++)f[y-1]=arguments[y];c[d].fn.apply(c[d].context,f)}}return!0};yn.prototype.on=function(e,r,i){return mK(this,e,r,i,!1)};yn.prototype.once=function(e,r,i){return mK(this,e,r,i,!0)};yn.prototype.removeListener=function(e,r,i,n){var s=Pn?Pn+e:e;if(!this._events[s])return this;if(!r)return lb(this,s),this;var o=this._events[s];if(o.fn)o.fn===r&&(!n||o.once)&&(!i||o.context===i)&&lb(this,s);else{for(var a=0,c=[],u=o.length;a<u;a++)(o[a].fn!==r||n&&!o[a].once||i&&o[a].context!==i)&&c.push(o[a]);c.length?this._events[s]=c.length===1?c[0]:c:lb(this,s)}return this};yn.prototype.removeAllListeners=function(e){var r;return e?(r=Pn?Pn+e:e,this._events[r]&&lb(this,r)):(this._events=new yy,this._eventsCount=0),this};yn.prototype.off=yn.prototype.removeListener;yn.prototype.addListener=yn.prototype.on;yn.prefixed=Pn;yn.EventEmitter=yn;typeof eE!="undefined"&&(eE.exports=yn)});var _K=p((Txt,wK)=>{l();"use strict";wK.exports=(t,e)=>(e=e||(()=>{}),t.then(r=>new Promise(i=>{i(e())}).then(()=>r),r=>new Promise(i=>{i(e())}).then(()=>{throw r})))});var SK=p((Rxt,db)=>{l();"use strict";var oDe=_K(),tE=class extends Error{constructor(e){super(e);this.name="TimeoutError"}},EK=(t,e,r)=>new Promise((i,n)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){i(t);return}let s=setTimeout(()=>{if(typeof r=="function"){try{i(r())}catch(c){n(c)}return}let o=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,a=r instanceof Error?r:new tE(o);typeof t.cancel=="function"&&t.cancel(),n(a)},e);oDe(t.then(i,n),()=>{clearTimeout(s)})});db.exports=EK;db.exports.default=EK;db.exports.TimeoutError=tE});var xK=p(rE=>{l();"use strict";Object.defineProperty(rE,"__esModule",{value:!0});function aDe(t,e,r){let i=0,n=t.length;for(;n>0;){let s=n/2|0,o=i+s;r(t[o],e)<=0?(i=++o,n-=s+1):n=s}return i}rE.default=aDe});var IK=p(iE=>{l();"use strict";Object.defineProperty(iE,"__esModule",{value:!0});var cDe=xK(),AK=class{constructor(){this._queue=[]}enqueue(e,r){r=Object.assign({priority:0},r);let i={priority:r.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(i);return}let n=cDe.default(this._queue,i,(s,o)=>o.priority-s.priority);this._queue.splice(n,0,i)}dequeue(){let e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return this._queue.length}};iE.default=AK});var Yc=p(nE=>{l();"use strict";Object.defineProperty(nE,"__esModule",{value:!0});var uDe=vK(),TK=SK(),fDe=IK(),hb=()=>{},lDe=new TK.TimeoutError,RK=class extends uDe{constructor(e){var r,i,n,s;super();if(this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=hb,this._resolveIdle=hb,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:fDe.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(i=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(n=e.interval)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=hb,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=hb,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(this._intervalId===void 0){let r=this._intervalEnd-e;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let r=this._queue.dequeue();return r?(this.emit("active"),r(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,r={}){return new Promise((i,n)=>{let s=async()=>{this._pendingCount++,this._intervalCount++;try{let o=this._timeout===void 0&&r.timeout===void 0?e():TK.default(Promise.resolve(e()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&n(lDe)});i(await o)}catch(o){n(o)}this._next()};this._queue.enqueue(s,r),this._tryToStartAnother(),this.emit("add")})}async addAll(e,r){return Promise.all(e.map(async i=>this.add(i,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{let r=this._resolveEmpty;this._resolveEmpty=()=>{r(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{let r=this._resolveIdle;this._resolveIdle=()=>{r(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}};nE.default=RK});var OK=p((kxt,CK)=>{l();"use strict";var dDe=J_(),{default:hDe}=Yc(),pDe=r2(),sE=new dDe(1e3),yDe=60*1e3,gDe=new hDe({concurrency:4}),PK=t=>{if(t.Path)return t.Path;throw new Error(t.Message)};CK.exports=async(t,e)=>(async(i,n={})=>{let s=new URLSearchParams(n);s.set("arg",i);let o=s.toString();if(!n.nocache&&sE.has(o)){let c=sE.get(o);return PK(c)}let a=await gDe.add(async()=>{let c=await pDe.get("https://ipfs.io/api/v0/dns",{searchParams:s}),u=new URL(c.url).search.slice(1),f=await c.json();return sE.set(u,f,yDe),f});return PK(a)})(t,e)});var qK=p((qxt,kK)=>{l();"use strict";var bDe=OK(),mDe=ke();function vDe(t){return t.endsWith(".eth")&&(t=t.replace(/.eth$/,".eth.link")),t}kK.exports=()=>mDe(async(e,r={recursive:!0})=>{if(typeof e!="string")throw new Error("Invalid arguments, domain must be a string");return e=vDe(e),bDe(e,r)})});var NK=p((Dxt,DK)=>{l();"use strict";DK.exports=({network:t})=>()=>{let e=t.try();return e!=null&&Boolean(e.libp2p.isStarted())}});var LK=p((Nxt,MK)=>{l();"use strict";var BK=t0(),{CID:oE}=(Ae(),De),wDe=tt(),_De=ke(),{resolve:EDe}=Ki();MK.exports=({repo:t,codecs:e,bases:r,name:i})=>{async function n(s,o={}){if(!BK.path(s))throw new Error("invalid argument "+s);if(BK.ipnsPath(s))for await(let E of i.resolve(s,o))s=E;let[,a,c,...u]=s.split("/"),f=o.cidBase?await r.getBase(o.cidBase):void 0,d=SDe(c);if(u.length===0){let E=f?f.encoder.encode(d):c;return`/${a}/${E}`}let h=oE.decode(d);s=u.join("/");let y=EDe(h,s,e,t,o),g=h,m=s;for await(let E of y)oE.asCID(E.value)&&(g=E.value,m=E.remainderPath);return`/ipfs/${g.toString(f&&f.encoder)}${m?"/"+m:""}`}return _De(n)};function SDe(t){try{return wDe.parse(t).toBytes()}catch{return oE.parse(t).bytes}}});var Gn=p((Bxt,UK)=>{l();"use strict";var xDe=async t=>{let e;for await(let r of t)e=r;return e};UK.exports=xDe});var jK=p((Mxt,FK)=>{l();"use strict";var ADe=Gn(),{CID:IDe}=(Ae(),De);FK.exports=({addAll:t})=>(e,r={})=>{let i,n=IDe.asCID(e);return n?i=t([{cid:n,...r}],r):i=t([{path:e.toString(),...r}],r),ADe(i)}});var b0=p((Lxt,KK)=>{l();"use strict";var gy=g0(),{CID:aE}=(Ae(),De);async function*TDe(t){if(t==null)throw gy(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");let e=aE.asCID(t);if(e){yield No({cid:e});return}if(t instanceof String||typeof t=="string"){yield No({path:t});return}if(t.cid!=null||t.path!=null)return yield No(t);if(Symbol.iterator in t){let r=t[Symbol.iterator](),i=r.next();if(i.done)return r;if(aE.asCID(i.value)||i.value instanceof String||typeof i.value=="string"){yield No({cid:i.value});for(let n of r)yield No({cid:n});return}if(i.value.cid!=null||i.value.path!=null){yield No(i.value);for(let n of r)yield No(n);return}throw gy(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}if(Symbol.asyncIterator in t){let r=t[Symbol.asyncIterator](),i=await r.next();if(i.done)return r;if(aE.asCID(i.value)||i.value instanceof String||typeof i.value=="string"){yield No({cid:i.value});for await(let n of r)yield No({cid:n});return}if(i.value.cid!=null||i.value.path!=null){yield No(i.value);for await(let n of r)yield No(n);return}throw gy(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}throw gy(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}function No(t){let e=t.cid||`${t.path}`;if(!e)throw gy(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");let r={path:e,recursive:t.recursive!==!1};return t.metadata!=null&&(r.metadata=t.metadata),r}KK.exports={normaliseInput:TDe}});var cE=p((Uxt,VK)=>{l();VK.exports=RDe;function RDe(t,e,r){if(!t)return r;var i,n;if(Array.isArray(e)&&(i=e.slice(0)),typeof e=="string"&&(i=e.split(".")),typeof e=="symbol"&&(i=[e]),!Array.isArray(i))throw new Error("props arg must be an array, a string or a symbol");for(;i.length;)if(n=i.shift(),!t||(t=t[n],t===void 0))return r;return t}});var ql=p((Fxt,HK)=>{l();"use strict";function zK(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function PDe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return zK(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),zK(new n,r)}}HK.exports=PDe});var pb=p((jxt,$K)=>{l();"use strict";var CDe=async t=>{let e=0;for await(let r of t)e++;return e};$K.exports=CDe});var ZK=p((Kxt,QK)=>{l();"use strict";var{CID:GK}=(Ae(),De),WK=Ut().Key,ODe=be()("ipfs:repo:migrator:migration-8"),kDe=pb(),{base32:yb}=(an(),on),qDe=(Os(),Eo),DDe=(An(),Ln);function YK(t){return t.child?YK(t.child):t}function NDe(t){try{let e=yb.decode(`b${t.toString().toLowerCase().slice(1)}`),r=GK.decode(e).multihash.bytes,i=yb.encode(r).slice(1).toUpperCase();return new WK(`/${i}`,!1)}catch(e){return t}}function BDe(t){try{let e=yb.decode(`b${t.toString().toLowerCase().slice(1)}`),r=DDe.decode(e),i=yb.encode(GK.createV1(qDe.code,r).bytes).slice(1);return new WK(`/${i.toUpperCase()}`,!1)}catch{return t}}async function XK(t,e,r){let i=t.blocks;await i.open();let n=YK(i),s=await kDe(n.queryKeys({filters:[o=>r(o).toString()!==o.toString()]}));try{let o=0;for await(let a of n.query({})){let c=r(a.key);c.toString()!==a.key.toString()&&(o+=1,ODe(`Migrating Block from ${a.key} to ${c}`,await n.has(a.key)),await n.delete(a.key),await n.put(c,a.value),e(o/s*100,`Migrated Block from ${a.key} to ${c}`))}}finally{await i.close()}}QK.exports={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(t,e=()=>{})=>XK(t,e,NDe),revert:(t,e=()=>{})=>XK(t,e,BDe)}});var tV=p((zxt,eV)=>{l();"use strict";var m0=qi(),JK=m0.Reader,MDe=m0.Writer,Vxt=m0.util,by=m0.roots.default||(m0.roots.default={});by.ipfs=function(){var t={};return t.pin=function(){var e={};return e.Set=function(){function r(i){if(i)for(var n=Object.keys(i),s=0;s<n.length;++s)i[n[s]]!=null&&(this[n[s]]=i[n[s]])}return r.prototype.version=0,r.prototype.fanout=0,r.prototype.seed=0,r.encode=function(n,s){return s||(s=MDe.create()),n.version!=null&&Object.hasOwnProperty.call(n,"version")&&s.uint32(8).uint32(n.version),n.fanout!=null&&Object.hasOwnProperty.call(n,"fanout")&&s.uint32(16).uint32(n.fanout),n.seed!=null&&Object.hasOwnProperty.call(n,"seed")&&s.uint32(29).fixed32(n.seed),s},r.decode=function(n,s){n instanceof JK||(n=JK.create(n));for(var o=s===void 0?n.len:n.pos+s,a=new by.ipfs.pin.Set;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.version=n.uint32();break;case 2:a.fanout=n.uint32();break;case 3:a.seed=n.fixed32();break;default:n.skipType(c&7);break}}return a},r.fromObject=function(n){if(n instanceof by.ipfs.pin.Set)return n;var s=new by.ipfs.pin.Set;return n.version!=null&&(s.version=n.version>>>0),n.fanout!=null&&(s.fanout=n.fanout>>>0),n.seed!=null&&(s.seed=n.seed>>>0),s},r.toObject=function(n,s){s||(s={});var o={};return s.defaults&&(o.version=0,o.fanout=0,o.seed=0),n.version!=null&&n.hasOwnProperty("version")&&(o.version=n.version),n.fanout!=null&&n.hasOwnProperty("fanout")&&(o.fanout=n.fanout),n.seed!=null&&n.hasOwnProperty("seed")&&(o.seed=n.seed),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,m0.util.toJSONOptions)},r}(),e}(),t}();eV.exports=by});var iV=p((Hxt,rV)=>{l();uE.BASE=2166136261;function uE(t){for(var e=uE.BASE,r=0,i=t.length;r<i;r++)e^=t.charCodeAt(r),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0}rV.exports=uE});var fE=p(($xt,sV)=>{l();"use strict";var{Key:nV}=Ut(),{base32:LDe}=(an(),on),{CID:UDe}=(Nc(),xh),FDe=new nV("/local/pins"),jDe=256,KDe=8192,VDe=UDe.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),zDe={direct:"direct",recursive:"recursive"};function HDe(t){return new nV(`/${LDe.encode(t.multihash.bytes).toUpperCase().substring(1)}`)}sV.exports={PIN_DS_KEY:FDe,DEFAULT_FANOUT:jDe,MAX_ITEMS:KDe,EMPTY_KEY:VDe,PinTypes:zDe,cidToKey:HDe}});var gb={};bt(gb,{compare:()=>$De});function $De(t,e){for(let r=0;r<t.byteLength;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}var bb=Se(()=>{l()});var lV=p((Gxt,fV)=>{l();"use strict";var{CID:oV}=(Ae(),De),{ipfs:{pin:{Set:lE}}}=tV(),GDe=iV(),dE=as(),mb=(wt(),Mt),{DEFAULT_FANOUT:hE,MAX_ITEMS:WDe,EMPTY_KEY:aV}=fE(),{concat:pE}=(fn(),un),{compare:YDe}=(bb(),gb),{toString:XDe}=(et(),Je),{fromString:QDe}=(ut(),lt),{sha256:cV}=(ii(),fi);function ZDe(t){let e=t.Data;if(!e)throw new Error("No data present");let r=dE.decode(e),i=dE.decode.bytes;if(i<=0)throw new Error("Invalid Set header length");if(i+r>e.length)throw new Error("Impossibly large set header length");let n=e.slice(i,r+i),s=lE.toObject(lE.decode(n),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(s.version!==1)throw new Error(`Unsupported Set version: ${s.version}`);if(s.fanout>t.Links.length)throw new Error("Impossibly large fanout");return{header:s,data:e.slice(r+i)}}function JDe(t,e){let r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,t,!0);let n=QDe(e.toString()),s=pE([r,n],r.byteLength+n.byteLength);return GDe(XDe(s))}async function*uV(t,e){let r=ZDe(e),i=0;for(let n of e.Links){if(i<r.header.fanout){let s=n.Hash;if(!aV.equals(s)){let o=await t.get(s),a=mb.decode(o);yield*uV(t,a)}}else yield n.Hash;i++}}async function*eNe(t,e,r){let i=e.Links.find(o=>o.Name===r);if(!i)throw new Error("No link found with name "+r);let n=await t.get(i.Hash),s=mb.decode(n);yield*uV(t,s)}function tNe(t,e){return r(e,0);async function r(i,n){let s=lE.encode({version:1,fanout:hE,seed:n}).finish(),o=dE.encode(s.length),a=pE([o,s]),c=[];for(let f=0;f<hE;f++)c.push({Name:"",Tsize:1,Hash:aV});if(i.length<=WDe){let f=i.map(y=>({link:{Name:"",Tsize:1,Hash:y.key},data:y.data||new Uint8Array})).sort((y,g)=>YDe(y.link.Hash.bytes,g.link.Hash.bytes)),d=c.concat(f.map(y=>y.link));return{Data:pE([a,...f.map(y=>y.data)]),Links:d}}else{let f=i.reduce((h,y)=>{let g=JDe(n,y.key)%hE;return h[g]=g in h?h[g].concat([y]):[y],h},[]),d=0;for(let h of f){let y=await r(h,n+1);await u(y,d),d++}return{Data:a,Links:c}}async function u(f,d){let h=mb.encode(f),y=await cV.digest(h),g=oV.createV0(y);await t.put(g,h);let m=f.Links.reduce((E,v)=>E+(v.Tsize||0),0)+h.length;c[d]={Name:"",Tsize:m,Hash:g}}}}async function rNe(t,e,r){let i=await tNe(t,r.map(c=>({key:c}))),n=mb.encode(i),s=await cV.digest(n),o=oV.createV0(s);await t.put(o,n);let a=i.Links.reduce((c,u)=>c+u.Tsize,0)+n.length;return{Name:e,Tsize:a,Hash:o}}fV.exports={loadSet:eNe,storeSet:rNe}});var yV=p((Wxt,pV)=>{l();"use strict";var{CID:yE}=(Ae(),De),my=(wt(),Mt),gE=(J2(),ob),v0=lV(),{cidToKey:dV,PIN_DS_KEY:vb,PinTypes:w0}=fE(),bE=pb(),{sha256:iNe}=(ii(),fi),nNe=(An(),Ln),{base32:sNe}=(an(),on);async function oNe(t,e,r,i){if(!await e.has(vb))return;let n=await e.get(vb),s=yE.decode(n),o=await t.get(s),a=my.decode(o),c=0,u=await bE(v0.loadSet(t,a,w0.recursive))+await bE(v0.loadSet(t,a,w0.direct));for await(let f of v0.loadSet(t,a,w0.recursive)){c++;let d={depth:1/0};f.version!==0&&(d.version=f.version),f.code!==my.code&&(d.codec=f.code),await r.put(dV(f),gE.encode(d)),i(c/u*100,`Migrated recursive pin ${f}`)}for await(let f of v0.loadSet(t,a,w0.direct)){c++;let d={depth:0};f.version!==0&&(d.version=f.version),f.code!==my.code&&(d.codec=f.code),await r.put(dV(f),gE.encode(d)),i(c/u*100,`Migrated direct pin ${f}`)}await t.delete(s),await e.delete(vb)}async function aNe(t,e,r,i){let n=[],s=[],o=0,a=await bE(r.queryKeys({}));for await(let{key:h,value:y}of r.query({})){o++;let g=gE.decode(y),m=yE.create(g.version||0,g.codec||my.code,nNe.decode(sNe.decode("b"+h.toString().toLowerCase().split("/").pop())));g.depth===0?(i(o/a*100,`Reverted direct pin ${m}`),s.push(m)):(i(o/a*100,`Reverted recursive pin ${m}`),n.push(m))}i(100,"Updating pin root");let c={Links:[await v0.storeSet(t,w0.direct,s),await v0.storeSet(t,w0.recursive,n)]},u=my.encode(c),f=await iNe.digest(u),d=yE.createV0(f);await t.put(d,u),await e.put(vb,d.bytes)}async function hV(t,e,r){let i=t.blocks,n=t.datastore,s=t.pins;await i.open(),await n.open(),await s.open();try{await r(i,n,s,e)}finally{await s.close(),await n.close(),await i.close()}}pV.exports={version:9,description:"Migrates pins to datastore",migrate:(t,e=()=>{})=>hV(t,e,oNe),revert:(t,e=()=>{})=>hV(t,e,aNe)}});var Dl=p((Yxt,wV)=>{l();"use strict";var{Key:gV,Errors:bV}=Ut(),cNe=new gV("/config"),uNe=new gV("/version");function mE(t){let e=t;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}async function mV(t,e,r){let i=await e(t);if(i)return i;let n=mE(r);return n?new Promise((s,o)=>{let a=n.store("readonly").get(t.toString());a.transaction.onabort=()=>{o(a.transaction.error)},a.transaction.oncomplete=()=>{s(Boolean(a.result))}}):!1}async function vV(t,e,r,i){if(await r(t))return e(t);let n=mE(i);if(!n)throw bV.notFoundError();return new Promise((s,o)=>{let a=n.store("readonly").get(t.toString());a.transaction.onabort=()=>{o(a.transaction.error)},a.transaction.oncomplete=()=>{if(a.result)return s(a.result);o(bV.notFoundError())}})}function wb(t){let e=t.get.bind(t),r=t.has.bind(t);return t.get=i=>vV(i,e,r,t),t.has=i=>mV(i,r,t),t}function fNe(t){return{...t,root:wb(t.root),datastore:wb(t.datastore),pins:wb(t.pins),keys:wb(t.keys)}}wV.exports={wrapBackends:fNe,hasWithFallback:mV,getWithFallback:vV,findLevelJs:mE,CONFIG_KEY:cNe,VERSION_KEY:uNe}});var IV=p((Xxt,AV)=>{l();"use strict";var{findLevelJs:_V}=Dl(),{fromString:lNe}=(ut(),lt),{toString:dNe}=(et(),Je);async function hNe(t,e,r=()=>{}){let i=_V(e);if(!i){r(`${t} did not need an upgrade`);return}r(`Upgrading ${t}`),await xV(i,(s,o)=>[{type:"del",key:s},{type:"put",key:lNe(s),value:o}])}async function pNe(t,e,r=()=>{}){let i=_V(e);if(!i){r(`${t} did not need a downgrade`);return}r(`Downgrading ${t}`),await xV(i,(s,o)=>[{type:"del",key:s},{type:"put",key:dNe(s),value:o}])}function EV(t){return t.child?EV(t.child):t}async function SV(t,e,r){let i=Object.entries(t).map(([o,a])=>({key:o,backend:EV(a)})).filter(({key:o,backend:a})=>a.constructor.name==="LevelDatastore").map(({key:o,backend:a})=>({name:o,store:a}));e(0,`Migrating ${i.length} dbs`);let n=0,s=o=>{e(Math.round(n/i.length*100),o)};for(let{name:o,store:a}of i){await a.open();try{await r(o,a,s)}finally{n++,await a.close()}}e(100,`Migrated ${i.length} dbs`)}AV.exports={version:10,description:"Migrates datastore-level keys to binary",migrate:(t,e=()=>{})=>SV(t,e,hNe),revert:(t,e=()=>{})=>SV(t,e,pNe)};function xV(t,e){function r(i,n){let s=t.store("readwrite"),o=s.transaction,a=0,c;o.onabort=()=>n(c||o.error||new Error("aborted by user")),o.oncomplete=()=>n();function u(){let f=i[a++],d=f.key,h;try{h=f.type==="del"?s.delete(d):s.put(f.value,d)}catch(y){c=y,o.abort();return}a<i.length&&(h.onsuccess=u)}u()}return new Promise((i,n)=>{let s=t.iterator(),o=c=>c;s._deserializeKey=s._deserializeValue=o,a();function a(){let c=(u,f,d)=>{if(u||f===void 0){let h=y=>{if(y){n(y);return}i()};s.end(h);return}r(e(f,d),a)};s.next(c)}})}});var RV=p((Qxt,TV)=>{l();"use strict";var{Key:yNe}=Ut(),cf=new yNe("/local/filesroot");async function gNe(t,e=()=>{}){if(e(100,"Migrating MFS root to repo datastore"),await t.root.open(),await t.datastore.open(),await t.root.has(cf)){let r=await t.root.get(cf);await t.datastore.put(cf,r),await t.root.delete(cf)}await t.datastore.close(),await t.root.close(),e(100,"Stored MFS root in repo datastore")}async function bNe(t,e=()=>{}){if(e(100,"Migrating MFS root to repo root datastore"),await t.root.open(),await t.datastore.open(),await t.datastore.has(cf)){let r=await t.datastore.get(cf);await t.root.put(cf,r),await t.datastore.delete(cf)}await t.datastore.close(),await t.root.close(),e(100,"Stored MFS root in repo root datastore")}TV.exports={version:11,description:"Store mfs root in the datastore",migrate:gNe,revert:bNe}});var CV=p((Zxt,PV)=>{l();"use strict";var Nl={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0};PV.exports=[Object.assign({version:1},Nl),Object.assign({version:2},Nl),Object.assign({version:3},Nl),Object.assign({version:4},Nl),Object.assign({version:5},Nl),Object.assign({version:6},Nl),Object.assign({version:7},Nl),ZK(),yV(),IV(),RV()]});var _b=p((Jxt,OV)=>{l();"use strict";var vE=class extends Error{constructor(e){super(e);this.name="NonReversibleMigrationError",this.code="ERR_NON_REVERSIBLE_MIGRATION",this.message=e}};vE.code="ERR_NON_REVERSIBLE_MIGRATION";var wE=class extends Error{constructor(e){super(e);this.name="NotInitializedRepoError",this.code="ERR_NOT_INITIALIZED_REPO",this.message=e}};wE.code="ERR_NOT_INITIALIZED_REPO";var _E=class extends Error{constructor(e){super(e);this.name="RequiredParameterError",this.code="ERR_REQUIRED_PARAMETER",this.message=e}};_E.code="ERR_REQUIRED_PARAMETER";var EE=class extends Error{constructor(e){super(e);this.name="InvalidValueError",this.code="ERR_INVALID_VALUE",this.message=e}};EE.code="ERR_INVALID_VALUE";var SE=class extends Error{constructor(e){super(e);this.name="MissingRepoOptionsError",this.code="ERR_MISSING_REPO_OPTIONS",this.message=e}};SE.code="ERR_MISSING_REPO_OPTIONS";OV.exports={NonReversibleMigrationError:vE,NotInitializedRepoError:wE,RequiredParameterError:_E,InvalidValueError:EE,MissingRepoOptionsError:SE}});var qV=p((eAt,kV)=>{l();"use strict";var xE=be()("ipfs:repo:migrator:repo:init"),{CONFIG_KEY:mNe,VERSION_KEY:vNe}=Dl(),{MissingRepoOptionsError:wNe}=_b();async function _Ne(t){if(!t)throw new wNe("Please pass repo options when trying to open a repo");let e=t.root;try{await e.open();let r=await e.has(vNe),i=await e.has(mNe);return!r||!i?(xE(`Version entry present: ${r}`),xE(`Config entry present: ${i}`),!1):!0}catch(r){return xE("While checking if repo is initialized error was thrown: "+r.message),!1}finally{if(e!==void 0)try{await e.close()}catch{}}}kV.exports={isRepoInitialized:_Ne}});var BV=p((tAt,NV)=>{l();"use strict";var ENe=qV(),{MissingRepoOptionsError:SNe,NotInitializedRepoError:xNe}=_b(),{VERSION_KEY:DV}=Dl(),{fromString:ANe}=(ut(),lt),{toString:INe}=(et(),Je);async function TNe(t){if(!await ENe.isRepoInitialized(t))throw new xNe("Repo is not initialized!");let e=t.root;await e.open();try{return parseInt(INe(await e.get(DV)))}finally{await e.close()}}async function RNe(t,e){if(!e)throw new SNe("Please pass repo options when trying to open a repo");let r=e.root;await r.open(),await r.put(DV,ANe(String(t))),await r.close()}NV.exports={getVersion:TNe,setVersion:RNe}});var jV=p((rAt,FV)=>{l();"use strict";var AE=CV(),Bl=BV(),ys=_b(),{wrapBackends:MV}=Dl(),Bo=be()("ipfs:repo:migrator");function LV(t){return t=t||AE,!Array.isArray(t)||t.length===0?0:t[t.length-1].version}async function PNe(t,e,r,i,{ignoreLock:n=!1,onProgress:s,isDryRun:o=!1,migrations:a}){if(a=a||AE,!t)throw new ys.RequiredParameterError("Path argument is required!");if(!r)throw new ys.RequiredParameterError("repoOptions argument is required!");if(!i)throw new ys.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(i)||i<=0)throw new ys.InvalidValueError("Version has to be positive integer!");e=MV(e);let c=await Bl.getVersion(e);if(c===i){Bo("Nothing to migrate.");return}if(c>i)throw new ys.InvalidValueError(`Current repo's version (${c}) is higher then toVersion (${i}), you probably wanted to revert it?`);UV(a,c,i);let u;!o&&!n&&(u=await r.repoLock.lock(t));try{for(let f of a){if(i!==void 0&&f.version>i)break;if(!(f.version<=c)){Bo(`Migrating version ${f.version}`);try{if(!o){let d=()=>{};s&&(d=(h,y)=>s(f.version,h.toFixed(2),y)),await f.migrate(e,d)}}catch(d){let h=f.version-1;throw Bo(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${h}`),await Bl.setVersion(h,e),new Error(`During migration to version ${f.version} exception was raised: ${d.stack||d.message||d}`)}Bo(`Migrating to version ${f.version} finished`)}}o||await Bl.setVersion(i||LV(a),e),Bo("Repo successfully migrated",i!==void 0?`to version ${i}!`:"to latest version!")}finally{!o&&!n&&u&&await u.close()}}async function CNe(t,e,r,i,{ignoreLock:n=!1,onProgress:s,isDryRun:o=!1,migrations:a}){if(a=a||AE,!t)throw new ys.RequiredParameterError("Path argument is required!");if(!r)throw new ys.RequiredParameterError("repoOptions argument is required!");if(!i)throw new ys.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(i)||i<=0)throw new ys.InvalidValueError("Version has to be positive integer!");e=MV(e);let c=await Bl.getVersion(e);if(c===i){Bo("Nothing to revert.");return}if(c<i)throw new ys.InvalidValueError(`Current repo's version (${c}) is lower then toVersion (${i}), you probably wanted to migrate it?`);UV(a,i,c,!0);let u;!o&&!n&&(u=await r.repoLock.lock(t)),Bo(`Reverting from version ${c} to ${i}`);try{let f=a.slice().reverse();for(let d of f){if(d.version<=i)break;if(!(d.version>c)){Bo(`Reverting migration version ${d.version}`);try{if(!o){let h=()=>{};s&&(h=(y,g)=>s(d.version,y.toFixed(2),g)),await d.revert(e,h)}}catch(h){let y=d.version;throw Bo(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${y}`),await Bl.setVersion(y,e),h.message=`During reversion to version ${d.version} exception was raised: ${h.message}`,h}Bo(`Reverting to version ${d.version} finished`)}}o||await Bl.setVersion(i,e),Bo(`All migrations successfully reverted to version ${i}!`)}finally{!o&&!n&&u&&await u.close()}}function UV(t,e,r,i=!1){let n=0;for(let s of t){if(s.version>r)break;if(s.version>e){if(i&&!s.revert)throw new ys.NonReversibleMigrationError(`It is not possible to revert to version ${e} because migration version ${s.version} is not reversible. Cancelling reversion.`);n++}}if(n!==r-e)throw new ys.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${e} to ${r}`)}FV.exports={getCurrentRepoVersion:Bl.getVersion,getLatestMigrationVersion:LV,errors:ys,migrate:PNe,revert:CNe}});var zV=p((iAt,Eb)=>{l();"use strict";Eb.exports=DNe;Eb.exports.format=KV;Eb.exports.parse=VV;var ONe=/\B(?=(\d{3})+(?!\d))/g,kNe=/(?:\.0*|(\.[^0]+)0+)$/,uf={b:1,kb:1<<10,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},qNe=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function DNe(t,e){return typeof t=="string"?VV(t):typeof t=="number"?KV(t,e):null}function KV(t,e){if(!Number.isFinite(t))return null;var r=Math.abs(t),i=e&&e.thousandsSeparator||"",n=e&&e.unitSeparator||"",s=e&&e.decimalPlaces!==void 0?e.decimalPlaces:2,o=Boolean(e&&e.fixedDecimals),a=e&&e.unit||"";(!a||!uf[a.toLowerCase()])&&(r>=uf.pb?a="PB":r>=uf.tb?a="TB":r>=uf.gb?a="GB":r>=uf.mb?a="MB":r>=uf.kb?a="KB":a="B");var c=t/uf[a.toLowerCase()],u=c.toFixed(s);return o||(u=u.replace(kNe,"$1")),i&&(u=u.replace(ONe,i)),u+n+a}function VV(t){if(typeof t=="number"&&!isNaN(t))return t;if(typeof t!="string")return null;var e=qNe.exec(t),r,i="b";return e?(r=parseFloat(e[1]),i=e[4].toLowerCase()):(r=parseInt(t,10),i="b"),Math.floor(uf[i]*r)}});var $V=p((nAt,HV)=>{l();"use strict";HV.exports={repoVersion:11}});var WV=p((sAt,GV)=>{l();"use strict";var NNe=Ut().Key,BNe=be(),MNe=BNe("ipfs:repo:version"),{toString:LNe}=(et(),Je),{fromString:UNe}=(ut(),lt),{hasWithFallback:FNe,getWithFallback:jNe}=Dl(),IE=new NNe("version");GV.exports=t=>({async exists(){return FNe(IE,t.has.bind(t),t)},async get(){let e=await jNe(IE,t.get.bind(t),t.has.bind(t),t);return parseInt(LNe(e),10)},set(e){return t.put(IE,UNe(String(e)))},async check(e){let r=await this.get();return MNe("comparing version: %s and %s",r,e),r===e||(r===6&&e===7||e===6&&r===7)}})});var TE=p((oAt,XV)=>{l();XV.exports=KNe;function KNe(t,e,r){var i,n;if(Array.isArray(e)&&(i=e.slice(0)),typeof e=="string"&&(i=e.split(".")),typeof e=="symbol"&&(i=[e]),!Array.isArray(i))throw new Error("props arg must be an array, a string or a symbol");if(n=i.pop(),!n)return!1;YV(n);for(var s;s=i.shift();)if(YV(s),typeof t[s]=="undefined"&&(t[s]={}),t=t[s],!t||typeof t!="object")return!1;return t[n]=r,!0}function YV(t){if(t==="__proto__"||t==="constructor"||t==="prototype")throw new Error("setting of prototype values not supported")}});var Sb=p(Ml=>{l();"use strict";var vy=class extends Error{constructor(e){super(e);this.name="LockExistsError",this.code=vy.code}};vy.code="ERR_LOCK_EXISTS";Ml.LockExistsError=vy;var wy=class extends Error{constructor(e){super(e);this.name="NotFoundError",this.code=wy.code}};wy.code="ERR_NOT_FOUND";Ml.NotFoundError=wy;var _y=class extends Error{constructor(e){super(e);this.name="InvalidRepoVersionError",this.code=_y.code}};_y.code="ERR_INVALID_REPO_VERSION";Ml.InvalidRepoVersionError=_y;Ml.ERR_REPO_NOT_INITIALIZED="ERR_REPO_NOT_INITIALIZED";Ml.ERR_REPO_ALREADY_OPEN="ERR_REPO_ALREADY_OPEN";Ml.ERR_REPO_ALREADY_CLOSED="ERR_REPO_ALREADY_CLOSED"});var JV=p((cAt,ZV)=>{l();"use strict";var{Key:VNe}=Ut(),{default:zNe}=Yc(),HNe=cE(),$Ne=TE(),RE=ql(),QV=Sb(),{toString:GNe}=(et(),Je),{fromString:WNe}=(ut(),lt),{hasWithFallback:YNe,getWithFallback:XNe}=Dl(),PE=new VNe("config");ZV.exports=t=>{let e=new zNe({concurrency:1}),r={async getAll(s={}){let o=await XNe(PE,t.get.bind(t),t.has.bind(t),t,{signal:s.signal});return JSON.parse(GNe(o))},async get(s,o={}){if(s==null)throw new QV.NotFoundError(`Key ${s} does not exist in config`);let a=await this.getAll(o),c=HNe(a,s);if(c===void 0)throw new QV.NotFoundError(`Key ${s} does not exist in config`);return c},set(s,o,a={}){if(typeof s!="string"&&!(s instanceof String))throw RE(new Error("Invalid key type: "+typeof s),"ERR_INVALID_KEY");if(o===void 0||o instanceof Uint8Array)throw RE(new Error("Invalid value type: "+typeof o),"ERR_INVALID_VALUE");return e.add(()=>i({key:s,value:o},a.signal))},replace(s,o={}){if(!s||s instanceof Uint8Array)throw RE(new Error("Invalid value type: "+typeof s),"ERR_INVALID_VALUE");return e.add(()=>i({key:void 0,value:s},o.signal))},async exists(){return YNe(PE,t.has.bind(t),t)}};return r;async function i(s,o){if(o&&o.aborted)return;let a=s.key,c=s.value;if(a){let u=await r.getAll();return typeof u=="object"&&u!==null&&$Ne(u,a,c),n(u)}return n(c)}function n(s){let o=WNe(JSON.stringify(s,null,2));return t.put(PE,o)}}});var tz=p((uAt,ez)=>{l();"use strict";ez.exports=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}});var iz=p((fAt,rz)=>{l();"use strict";var CE=tz();rz.exports=(t,e={})=>{if(!CE(t)&&!Array.isArray(t))throw new TypeError("Expected a plain object or array");let{deep:r}=e,i=[],n=[],s=a=>{let c=i.indexOf(a);if(c!==-1)return n[c];let u=[];return i.push(a),n.push(u),u.push(...a.map(f=>Array.isArray(f)?s(f):CE(f)?o(f):f)),u},o=a=>{let c=i.indexOf(a);if(c!==-1)return n[c];let u={},f=Object.keys(a).sort(e.compare);i.push(a),n.push(u);for(let d of f){let h=a[d],y;r&&Array.isArray(h)?y=s(h):y=r&&CE(h)?o(h):h,Object.defineProperty(u,d,{...Object.getOwnPropertyDescriptor(a,d),value:y})}return u};return Array.isArray(t)?r?s(t):t.slice():o(t)}});var sz=p((lAt,nz)=>{l();"use strict";var QNe=Ut().Key,ZNe=iz(),{toString:JNe}=(et(),Je),{fromString:eBe}=(ut(),lt),OE=new QNe("datastore_spec");nz.exports=t=>({exists(){return t.has(OE)},async get(){let e=await t.get(OE);return JSON.parse(JNe(e))},async set(e){return t.put(OE,eBe(JSON.stringify(ZNe(e,{deep:!0}))))}})});var az=p((dAt,oz)=>{l();"use strict";var tBe=Ut().Key,{fromString:rBe}=(ut(),lt),kE=new tBe("api");oz.exports=t=>({async get(){let e=await t.get(kE);return e&&e.toString()},set(e){return t.put(kE,rBe(e.toString()))},delete(){return t.delete(kE)}})});var uz=p((pAt,cz)=>{l();cz.exports=class{constructor(e){if(!(e>0)||(e-1&e)!=0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}}});var qE=p((gAt,lz)=>{l();var fz=uz();lz.exports=class{constructor(e){this.hwm=e||16,this.head=new fz(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let r=this.head;this.head=r.next=new fz(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let r=this.tail.next;return this.tail.next=null,this.tail=r,this.tail.shift()}return e}isEmpty(){return this.head.isEmpty()}}});var Ha=p((bAt,dz)=>{l();var DE=qE();dz.exports=t=>{t=t||{};let e;typeof t=="function"?(e=t,t={}):e=t.onEnd;let r=new DE,i,n,s,o=()=>{if(!r.isEmpty()){if(t.writev){let m,E=[];for(;!r.isEmpty();){if(m=r.shift(),m.error)throw m.error;E.push(m.value)}return{done:m.done,value:E}}let g=r.shift();if(g.error)throw g.error;return g}return s?{done:!0}:new Promise((g,m)=>{n=E=>(n=null,E.error?m(E.error):t.writev&&!E.done?g({done:E.done,value:[E.value]}):g(E),i)})},a=g=>n?n(g):(r.push(g),i),c=g=>(r=new DE,n?n({error:g}):(r.push({error:g}),i)),u=g=>s?i:a({done:!1,value:g}),f=g=>s?i:(s=!0,g?c(g):a({done:!0})),d=()=>(r=new DE,f(),{done:!0}),h=g=>(f(g),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:o,return:d,throw:h,push:u,end:f},!e)return i;let y=i;return i={[Symbol.asyncIterator](){return this},next(){return y.next()},throw(g){return y.throw(g),e&&(e(g),e=null),{done:!0}},return(){return y.return(),e&&(e(),e=null),{done:!0}},push:u,end(g){return y.end(g),e&&(e(g),e=null),i}},i}});var pz=p((mAt,hz)=>{l();"use strict";var iBe=Va(),nBe=Ha(),sBe=Ka(),{CID:oBe}=(Ae(),De),aBe=ql(),{identity:cBe}=(qc(),kc);hz.exports=uBe;function uBe(t){return{open(){return t.open()},close(){return t.close()},query(e,r){return t.query(e,r)},queryKeys(e,r){return t.queryKeys(e,r)},async get(e,r){let i=ff(e);return i.isIdentity?Promise.resolve(i.digest):t.get(e,r)},async*getMany(e,r){for await(let i of e)yield this.get(i,r)},async put(e,r,i){let{isIdentity:n}=ff(e);n||await t.put(e,r,i)},async*putMany(e,r){let i=nBe();(process&&process.nextTick?process.nextTick:setImmediate)(async()=>{try{await sBe(t.putMany(async function*(){for await(let{key:s,value:o}of e)ff(s).isIdentity||(yield{key:s,value:o}),i.push({key:s,value:o})}())),i.end()}catch(s){i.end(s)}}),yield*i},has(e,r){let{isIdentity:i}=ff(e);return i?Promise.resolve(!0):t.has(e,r)},delete(e,r){let{isIdentity:i}=ff(e);return i?Promise.resolve():t.delete(e,r)},deleteMany(e,r){return t.deleteMany(iBe(e,i=>!ff(i).isIdentity),r)},batch(){let e=t.batch();return{put(r,i){let{isIdentity:n}=ff(r);n||e.put(r,i)},delete(r){let{isIdentity:i}=ff(r);i||e.delete(r)},commit:r=>e.commit(r)}}}}function ff(t){let e=oBe.asCID(t);if(e==null)throw aBe(new Error("Not a valid cid"),"ERR_INVALID_CID");return e.multihash.code!==cBe.code?{isIdentity:!1}:{isIdentity:!0,digest:e.multihash.digest}}});var xb=p(NE=>{l();"use strict";var fBe=Sb(),lBe=be(),yz=lBe("ipfs:repo:lock:memory"),gz="repo.lock",Ey={};NE.lock=async t=>{let e=t+"/"+gz;if(yz("locking %s",e),Ey[e]===!0)throw new fBe.LockExistsError(`Lock already being held for file: ${e}`);return Ey[e]=!0,{async close(){Ey[e]&&delete Ey[e]}}};NE.locked=async t=>{let e=t+"/"+gz;return yz(`checking lock: ${e}`),Boolean(Ey[e])}});var mz=p((wAt,bz)=>{l();"use strict";bz.exports={autoMigrate:!0,onMigrationProgress:()=>{},repoOwner:!0,repoLock:xb()}});var wz=p((_At,vz)=>{l();"use strict";vz.exports={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}}});var Ll=p((EAt,_z)=>{l();"use strict";var dBe=async t=>{for await(let e of t)return e};_z.exports=dBe});var Ib={};bt(Ib,{Block:()=>Sy,create:()=>gBe,createUnsafe:()=>Ez,decode:()=>yBe,encode:()=>pBe});var Ab,BE,ME,hBe,Sy,pBe,yBe,Ez,gBe,Tb=Se(()=>{l();Nc();Ab=({enumerable:t=!0,configurable:e=!1}={})=>({enumerable:t,configurable:e,writable:!1}),BE=function*(t,e){if(t!=null&&!(t instanceof Uint8Array))for(let[r,i]of Object.entries(t)){let n=[...e,r];if(i!=null&&typeof i=="object")if(Array.isArray(i))for(let[s,o]of i.entries()){let a=[...n,s],c=Ge.asCID(o);c?yield[a.join("/"),c]:typeof o=="object"&&(yield*BE(o,a))}else{let s=Ge.asCID(i);s?yield[n.join("/"),s]:yield*BE(i,n)}}},ME=function*(t,e){if(t!=null)for(let[r,i]of Object.entries(t)){let n=[...e,r];if(yield n.join("/"),i!=null&&!(i instanceof Uint8Array)&&typeof i=="object"&&!Ge.asCID(i))if(Array.isArray(i))for(let[s,o]of i.entries()){let a=[...n,s];yield a.join("/"),typeof o=="object"&&!Ge.asCID(o)&&(yield*ME(o,a))}else yield*ME(i,n)}},hBe=(t,e)=>{let r=t;for(let[i,n]of e.entries()){if(r=r[n],r==null)throw new Error(`Object has no property at ${e.slice(0,i+1).map(o=>`[${JSON.stringify(o)}]`).join("")}`);let s=Ge.asCID(r);if(s)return{value:s,remaining:e.slice(i+1).join("/")}}return{value:r}},Sy=class{constructor({cid:e,bytes:r,value:i}){if(!e||!r||typeof i=="undefined")throw new Error("Missing required argument");this.cid=e,this.bytes=r,this.value=i,this.asBlock=this,Object.defineProperties(this,{cid:Ab(),bytes:Ab(),value:Ab(),asBlock:Ab()})}links(){return BE(this.value,[])}tree(){return ME(this.value,[])}get(e="/"){return hBe(this.value,e.split("/").filter(Boolean))}},pBe=async({value:t,codec:e,hasher:r})=>{if(typeof t=="undefined")throw new Error('Missing required argument "value"');if(!e||!r)throw new Error("Missing required argument: codec or hasher");let i=e.encode(t),n=await r.digest(i),s=Ge.create(1,e.code,n);return new Sy({value:t,bytes:i,cid:s})},yBe=async({bytes:t,codec:e,hasher:r})=>{if(!t)throw new Error('Missing required argument "bytes"');if(!e||!r)throw new Error("Missing required argument: codec or hasher");let i=e.decode(t),n=await r.digest(t),s=Ge.create(1,e.code,n);return new Sy({value:i,bytes:t,cid:s})},Ez=({bytes:t,cid:e,value:r,codec:i})=>{let n=r!==void 0?r:i&&i.decode(t);if(n===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new Sy({cid:e,bytes:t,value:n})},gBe=async({bytes:t,cid:e,hasher:r,codec:i})=>{if(!t)throw new Error('Missing required argument "bytes"');if(!r)throw new Error('Missing required argument "hasher"');let n=i.decode(t),s=await r.digest(t);if(!Ic.equals(e.multihash.bytes,s.bytes))throw new Error("CID hash does not match bytes");return Ez({bytes:t,cid:e,value:n,codec:i})}});var LE=p((xAt,Iz)=>{l();"use strict";var{Key:bBe}=Ut(),{CID:Sz}=(Nc(),xh),mBe=(Os(),Eo),vBe=ql(),{base32:xz}=(an(),on),wBe=(An(),Ln);function _Be(t){let e=Sz.asCID(t);if(e==null)throw vBe(new Error("Not a valid cid"),"ERR_INVALID_CID");let r=xz.encode(e.multihash.bytes);return new bBe("/"+r.slice(1).toUpperCase(),!1)}function EBe(t){return Sz.createV1(mBe.code,Az(t))}function Az(t){return wBe.decode(xz.decode(`b${t.toString().toLowerCase().substring(1)}`))}Iz.exports={cidToKey:_Be,keyToCid:EBe,keyToMultihash:Az}});var UE=p((AAt,Rz)=>{l();"use strict";var SBe=be()("ipfs:repo:utils:walk-dag"),xBe=(Tb(),Ib);async function*Tz(t,e,r,i){try{let n=await e.get(t,i),s=await r(t.code),o=xBe.createUnsafe({bytes:n,cid:t,codec:s});for(let[,a]of o.links())yield a,yield*Tz(a,e,r,i)}catch(n){throw SBe("Could not walk DAG for CID",t.toString(),n),n}}Rz.exports=Tz});var FE=p((IAt,Dz)=>{l();"use strict";var{CID:Pz}=(Ae(),De),ABe=ql(),IBe=be(),Cz=Ll(),TBe=(Tb(),Ib),lf=(J2(),ob),Rb=(wt(),Mt),{cidToKey:Pb,keyToMultihash:Oz}=LE(),kz=UE();function RBe(t){let e=`Invalid type '${t}', must be one of {direct, indirect, recursive, all}`;return ABe(new Error(e),"ERR_INVALID_PIN_TYPE")}var Ks={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"},qz=class{constructor({pinstore:e,blockstore:r,loadCodec:i}){this.pinstore=e,this.blockstore=r,this.loadCodec=i,this.log=IBe("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}async pinDirectly(e,r={}){await this.blockstore.get(e,r);let i={depth:0};return e.version!==0&&(i.version=e.version),e.code!==Rb.code&&(i.codec=e.code),r.metadata&&(i.metadata=r.metadata),this.pinstore.put(Pb(e),lf.encode(i))}unpin(e,r){return this.pinstore.delete(Pb(e),r)}async pinRecursively(e,r={}){await this.fetchCompleteDag(e,r);let i={depth:1/0};e.version!==0&&(i.version=e.version),e.code!==Rb.code&&(i.codec=e.code),r.metadata&&(i.metadata=r.metadata),await this.pinstore.put(Pb(e),lf.encode(i))}async*directKeys(e){for await(let r of this.pinstore.query({filters:[i=>lf.decode(i.value).depth===0]})){let i=lf.decode(r.value),n=i.version||0,s=i.codec!=null?i.codec:Rb.code,o=Oz(r.key);yield{cid:Pz.create(n,s,o),metadata:i.metadata}}}async*recursiveKeys(e){for await(let r of this.pinstore.query({filters:[i=>lf.decode(i.value).depth===1/0]})){let i=lf.decode(r.value),n=i.version||0,s=i.codec!=null?i.codec:Rb.code,o=Oz(r.key);yield{cid:Pz.create(n,s,o),metadata:i.metadata}}}async*indirectKeys(e){for await(let{cid:r}of this.recursiveKeys())for await(let i of kz(r,this.blockstore,this.loadCodec,e)){let n=[Ks.recursive];(await this.isPinnedWithType(i,n)).pinned||(yield i)}}async isPinnedWithType(e,r,i){Array.isArray(r)||(r=[r]);let n=r.includes(Ks.all),s=r.includes(Ks.direct),o=r.includes(Ks.recursive),a=r.includes(Ks.indirect);if(o||s||n){let f=await Cz(this.pinstore.query({prefix:Pb(e).toString(),filters:[d=>{if(n)return!0;let h=lf.decode(d.value);return r.includes(h.depth===0?Ks.direct:Ks.recursive)}],limit:1}));if(f){let d=lf.decode(f.value);return{cid:e,pinned:!0,reason:d.depth===0?Ks.direct:Ks.recursive,metadata:d.metadata}}}let c=this;async function*u(f,d){for await(let{cid:h}of d)for await(let y of kz(h,c.blockstore,c.loadCodec))if(y.equals(f)){yield h;return}}if(n||a){let f=await Cz(u(e,this.recursiveKeys()));if(f)return{cid:e,pinned:!0,reason:Ks.indirect,parent:f}}return{cid:e,pinned:!1}}async fetchCompleteDag(e,r){let i=new Set,n=async(s,o)=>{if(i.has(s.toString()))return;i.add(s.toString());let a=await this.blockstore.get(s,o),c=await this.loadCodec(s.code),u=TBe.createUnsafe({bytes:a,cid:s,codec:c});await Promise.all([...u.links()].map(([,f])=>n(f,o)))};await n(e,r)}static checkPinType(e){if(typeof e!="string"||!Object.keys(Ks).includes(e))throw RBe(e);return!0}};Dz.exports={PinManager:qz,PinTypes:Ks}});var Mo=p((TAt,Nz)=>{l();"use strict";var PBe=async function*(t,e){for await(let r of t)yield e(r)};Nz.exports=PBe});var Lz=p((RAt,Mz)=>{l();"use strict";var CBe=Mo(),OBe=ql(),{PinTypes:kBe}=FE();Mz.exports=qBe;function qBe(t,e){return{open(){return e.open()},close(){return e.close()},query(r,i){return e.query(r,i)},queryKeys(r,i){return e.queryKeys(r,i)},async get(r,i){return e.get(r,i)},async*getMany(r,i){yield*e.getMany(r,i)},async put(r,i,n){await e.put(r,i,n)},async*putMany(r,i){yield*e.putMany(r,i)},has(r,i){return e.has(r,i)},async delete(r,i){return await Bz(r,t),e.delete(r,i)},deleteMany(r,i){return e.deleteMany(CBe(r,async n=>(await Bz(n,t),n)),i)},batch(){return e.batch()}}}async function Bz(t,e){let{pinned:r,reason:i}=await e.isPinnedWithType(t,kBe.all);if(r)throw OBe(new Error(`pinned: ${i}`),"ERR_BLOCK_PINNED")}});var gr=p((PAt,jE)=>{l();"use strict";var _0=typeof Reflect=="object"?Reflect:null,Uz=_0&&typeof _0.apply=="function"?_0.apply:function(e,r,i){return Function.prototype.apply.call(e,r,i)},Cb;_0&&typeof _0.ownKeys=="function"?Cb=_0.ownKeys:Object.getOwnPropertySymbols?Cb=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Cb=function(e){return Object.getOwnPropertyNames(e)};function DBe(t){console&&console.warn&&console.warn(t)}var Fz=Number.isNaN||function(e){return e!==e};function Xt(){Xt.init.call(this)}jE.exports=Xt;jE.exports.once=LBe;Xt.EventEmitter=Xt;Xt.prototype._events=void 0;Xt.prototype._eventsCount=0;Xt.prototype._maxListeners=void 0;var jz=10;function Ob(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Xt,"defaultMaxListeners",{enumerable:!0,get:function(){return jz},set:function(t){if(typeof t!="number"||t<0||Fz(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");jz=t}});Xt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Xt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Fz(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Kz(t){return t._maxListeners===void 0?Xt.defaultMaxListeners:t._maxListeners}Xt.prototype.getMaxListeners=function(){return Kz(this)};Xt.prototype.emit=function(e){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var n=e==="error",s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")Uz(c,this,r);else for(var u=c.length,f=Gz(c,u),i=0;i<u;++i)Uz(f[i],this,r);return!0};function Vz(t,e,r,i){var n,s,o;if(Ob(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),n=Kz(t),n>0&&o.length>n&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,DBe(a)}return t}Xt.prototype.addListener=function(e,r){return Vz(this,e,r,!1)};Xt.prototype.on=Xt.prototype.addListener;Xt.prototype.prependListener=function(e,r){return Vz(this,e,r,!0)};function NBe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function zz(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},n=NBe.bind(i);return n.listener=r,i.wrapFn=n,n}Xt.prototype.once=function(e,r){return Ob(r),this.on(e,zz(this,e,r)),this};Xt.prototype.prependOnceListener=function(e,r){return Ob(r),this.prependListener(e,zz(this,e,r)),this};Xt.prototype.removeListener=function(e,r){var i,n,s,o,a;if(Ob(r),n=this._events,n===void 0)return this;if(i=n[e],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount==0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||r));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===r||i[o].listener===r){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():BBe(i,s),i.length===1&&(n[e]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};Xt.prototype.off=Xt.prototype.removeListener;Xt.prototype.removeAllListeners=function(e){var r,i,n;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(n=0;n<s.length;++n)o=s[n],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(n=r.length-1;n>=0;n--)this.removeListener(e,r[n]);return this};function Hz(t,e,r){var i=t._events;if(i===void 0)return[];var n=i[e];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?MBe(n):Gz(n,n.length)}Xt.prototype.listeners=function(e){return Hz(this,e,!0)};Xt.prototype.rawListeners=function(e){return Hz(this,e,!1)};Xt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):$z.call(t,e)};Xt.prototype.listenerCount=$z;function $z(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Xt.prototype.eventNames=function(){return this._eventsCount>0?Cb(this._events):[]};function Gz(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function BBe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function MBe(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function LBe(t,e){return new Promise(function(r,i){function n(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",n),r([].slice.call(arguments))}Wz(t,e,s,{once:!0}),e!=="error"&&UBe(t,n,{once:!0})})}function UBe(t,e,r){typeof t.on=="function"&&Wz(t,"error",e,r)}function Wz(t,e,r,i){if(typeof t.on=="function")i.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function n(s){i.once&&t.removeEventListener(e,n),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var KE=p((CAt,Yz)=>{l();Yz.exports={WORKER_REQUEST_READ_LOCK:"lock:worker:request-read",WORKER_RELEASE_READ_LOCK:"lock:worker:release-read",MASTER_GRANT_READ_LOCK:"lock:master:grant-read",WORKER_REQUEST_WRITE_LOCK:"lock:worker:request-write",WORKER_RELEASE_WRITE_LOCK:"lock:worker:release-write",MASTER_GRANT_WRITE_LOCK:"lock:master:grant-write"}});var Xz=p(()=>{l()});var oH=p((qAt,sH)=>{l();var FBe=gr().EventEmitter,{nanoid:jBe}=(ay(),oy),{WORKER_REQUEST_READ_LOCK:Qz,WORKER_RELEASE_READ_LOCK:Zz,MASTER_GRANT_READ_LOCK:Jz,WORKER_REQUEST_WRITE_LOCK:eH,WORKER_RELEASE_WRITE_LOCK:tH,MASTER_GRANT_WRITE_LOCK:rH}=KE(),xy,iH=(t,e,r,i,n)=>(s,o)=>{o&&o.type===r&&t.emit(e,o.name,()=>(s.send({type:n,name:o.name,identifier:o.identifier}),new Promise(a=>{let c=u=>{u&&u.type===i&&u.identifier===o.identifier&&(s.removeListener("message",c),a())};s.on("message",c)})))},nH=(t,e,r,i)=>()=>{let n=jBe();return process.send({type:e,identifier:n,name:t}),new Promise(s=>{let o=a=>{a&&a.type===r&&a.identifier===n&&(process.removeListener("message",o),s(()=>{process.send({type:i,identifier:n,name:t})}))};process.on("message",o)})};sH.exports=t=>{try{if(xy=Xz(),!Object.keys(xy).length)return}catch(e){return}if(xy.isMaster||t.singleProcess){let e=new FBe;return xy.on("message",iH(e,"requestReadLock",Qz,Zz,Jz)),xy.on("message",iH(e,"requestWriteLock",eH,tH,rH)),e}return{isWorker:!0,readLock:e=>nH(e,Qz,Jz,Zz),writeLock:e=>nH(e,eH,rH,tH)}}});var VE=p((DAt,aH)=>{l();var df={},E0=t=>{t.addEventListener("message",e=>{E0.dispatchEvent("message",t,e)}),t.port&&t.port.addEventListener("message",e=>{E0.dispatchEvent("message",t,e)})};E0.addEventListener=(t,e)=>{df[t]||(df[t]=[]),df[t].push(e)};E0.removeEventListener=(t,e)=>{!df[t]||(df[t]=df[t].filter(r=>r===e))};E0.dispatchEvent=function(){let t=Array.prototype.slice.call(arguments),e=t.shift();!df[e]||df[e].forEach(r=>r.apply(null,t))};aH.exports=E0});var mH=p((NAt,bH)=>{l();var KBe=gr().EventEmitter,{nanoid:VBe}=(ay(),oy),{WORKER_REQUEST_READ_LOCK:cH,WORKER_RELEASE_READ_LOCK:uH,MASTER_GRANT_READ_LOCK:fH,WORKER_REQUEST_WRITE_LOCK:lH,WORKER_RELEASE_WRITE_LOCK:dH,MASTER_GRANT_WRITE_LOCK:hH}=KE(),pH=VE(),yH=(t,e,r,i,n)=>(s,o)=>{if(!o||!o.data||o.data.type!==r)return;let a={type:o.data.type,name:o.data.name,identifier:o.data.identifier};t.emit(e,a.name,()=>(s.postMessage({type:n,name:a.name,identifier:a.identifier}),new Promise(c=>{let u=f=>{if(!f||!f.data)return;let d={type:f.data.type,name:f.data.name,identifier:f.data.identifier};d&&d.type===i&&d.identifier===a.identifier&&(s.removeEventListener("message",u),c())};s.addEventListener("message",u)})))},gH=(t,e,r,i)=>()=>{let n=VBe();return globalThis.postMessage({type:e,identifier:n,name:t}),new Promise(s=>{let o=a=>{if(!a||!a.data)return;let c={type:a.data.type,identifier:a.data.identifier};c&&c.type===r&&c.identifier===n&&(globalThis.removeEventListener("message",o),s(()=>{globalThis.postMessage({type:i,identifier:n,name:t})}))};globalThis.addEventListener("message",o)})},zBe={singleProcess:!1};bH.exports=t=>{if(t=Object.assign({},zBe,t),!!globalThis.document||t.singleProcess){let r=new KBe;return pH.addEventListener("message",yH(r,"requestReadLock",cH,uH,fH)),pH.addEventListener("message",yH(r,"requestWriteLock",lH,dH,hH)),r}return{isWorker:!0,readLock:r=>gH(r,cH,fH,uH),writeLock:r=>gH(r,lH,hH,dH)}}});var vH=p((MAt,zE)=>{l();"use strict";var kb,BAt=zE.exports.timeout=function(t,e){var r=new kb,i;return Promise.race([t,new Promise(function(n,s){i=setTimeout(function(){s(r)},e)})]).then(function(n){return clearTimeout(i),n},function(n){throw clearTimeout(i),n})};kb=zE.exports.TimeoutError=function(){Error.call(this),this.stack=Error().stack,this.message="Timeout"};kb.prototype=Object.create(Error.prototype);kb.prototype.name="TimeoutError"});var GE=p((LAt,$E)=>{l();var HBe=oH(),$Be=mH(),{default:wH}=Yc(),{timeout:GBe}=vH(),WBe=VE(),Ul={},hf;function HE(t,e){let r,i=new Promise(n=>{r=n});return t.add(()=>GBe((()=>new Promise(n=>{r(()=>{n()})}))(),e.timeout)),i}var YBe=(t,e)=>{if(hf.isWorker)return{readLock:hf.readLock(t,e),writeLock:hf.writeLock(t,e)};let r=new wH({concurrency:1}),i=null;return{readLock:()=>{if(i)return HE(i,e);i=new wH({concurrency:e.concurrency,autoStart:!1});let n=i,s=HE(i,e);return r.add(()=>(n.start(),n.onIdle().then(()=>{i===n&&(i=null)}))),s},writeLock:()=>(i=null,HE(r,e))}},XBe={concurrency:1/0,timeout:846e5,global:globalThis,singleProcess:!1};$E.exports=(t,e)=>(e||(e={}),typeof t=="object"&&(e=t,t="lock"),t||(t="lock"),e=Object.assign({},XBe,e),hf||(hf=HBe(e)||$Be(e),hf.isWorker||(hf.on("requestReadLock",(r,i)=>{!Ul[r]||Ul[r].readLock().then(n=>i().finally(()=>n()))}),hf.on("requestWriteLock",async(r,i)=>{!Ul[r]||Ul[r].writeLock().then(n=>i().finally(()=>n()))}))),Ul[t]||(Ul[t]=YBe(t,e)),Ul[t]);$E.exports.Worker=function(t,e){e=e||globalThis.Worker;let r;try{r=new e(t)}catch(i){i.message.includes("not a constructor")&&(r=e(t))}if(!r)throw new Error("Could not create Worker from",e);return WBe(r),r}});var qb=p((UAt,_H)=>{l();"use strict";async function*QBe(t,e=1){let r=[];e<1&&(e=1);for await(let i of t)for(r.push(i);r.length>=e;)yield r.slice(0,e),r=r.slice(e);for(;r.length;)yield r.slice(0,e),r=r.slice(e)}_H.exports=QBe});var Db=p((FAt,EH)=>{l();"use strict";var ZBe=qb();async function*JBe(t,e=1){for await(let r of ZBe(t,e)){let i=r.map(n=>n().then(s=>({ok:!0,value:s}),s=>({ok:!1,err:s})));for(let n=0;n<i.length;n++){let s=await i[n];if(s.ok)yield s.value;else throw s.err}}}EH.exports=JBe});var Ir=p((jAt,S0)=>{l();var SH=(...t)=>{let e;for(;t.length;)e=t.shift()(e);return e},WE=t=>t&&(typeof t[Symbol.asyncIterator]=="function"||typeof t[Symbol.iterator]=="function"||typeof t.next=="function"),Nb=t=>t&&typeof t.sink=="function"&&WE(t.source),eMe=t=>e=>(t.sink(e),t.source),xH=(...t)=>{if(Nb(t[0])){let e=t[0];t[0]=()=>e.source}else if(WE(t[0])){let e=t[0];t[0]=()=>e}if(t.length>1&&Nb(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let e=1;e<t.length-1;e++)Nb(t[e])&&(t[e]=eMe(t[e]));return SH(...t)};S0.exports=xH;S0.exports.pipe=xH;S0.exports.rawPipe=SH;S0.exports.isIterable=WE;S0.exports.isDuplex=Nb});var x0=p((KAt,AH)=>{l();"use strict";var tMe=Ha(),rMe=async function*(...t){let e=tMe();setTimeout(async()=>{try{await Promise.all(t.map(async r=>{for await(let i of r)e.push(i)})),e.end()}catch(r){e.end(r)}},0),yield*e};AH.exports=rMe});var PH=p((VAt,RH)=>{l();"use strict";var{CID:iMe}=(Ae(),De),Ay=be()("ipfs:repo:gc"),{Errors:nMe}=Ut(),sMe=nMe.notFoundError().code,oMe=Db(),{pipe:aMe}=Ir(),IH=x0(),YE=Mo(),cMe=Va(),{Key:uMe}=Ut(),{base32:TH}=(an(),on),fMe=UE(),lMe=256,dMe=new uMe("/local/filesroot");RH.exports=({gcLock:t,pins:e,blockstore:r,root:i,loadCodec:n})=>{async function*s(){let o=Date.now();Ay("Creating set of marked blocks");let a=await t.writeLock();try{let c=await hMe({pins:e,blockstore:r,root:i,loadCodec:n}),u=r.queryKeys({});yield*pMe({blockstore:r},c,u),Ay(`Complete (${Date.now()-o}ms)`)}finally{a()}}return s};async function hMe({pins:t,blockstore:e,loadCodec:r,root:i}){let n=async function*(){let a;try{a=await i.get(dMe)}catch(u){if(u.code===sMe){Ay("No blocks in MFS");return}throw u}let c=iMe.decode(a);yield c,yield*fMe(c,e,r)}(),s=IH(YE(t.recursiveKeys(),({cid:a})=>a),t.indirectKeys(),YE(t.directKeys(),({cid:a})=>a),n),o=new Set;for await(let a of IH(s,n))o.add(TH.encode(a.multihash.bytes));return o}async function*pMe({blockstore:t},e,r){let i=0,n=0;yield*aMe(oMe(YE(r,async o=>async function(){i++;try{let c=TH.encode(o.multihash.bytes);if(e.has(c))return null;try{await t.delete(o),n++}catch(u){return{err:new Error(`Could not delete block with CID ${o}: ${u.message}`)}}return{cid:o}}catch(c){let u=`Could delete block with CID ${o}`;return Ay(u,c),{err:new Error(u+`: ${c.message}`)}}}),lMe),o=>cMe(o,Boolean)),Ay(`Marked set has ${e.size} unique blocks. Blockstore has ${i} blocks. Deleted ${n} blocks.`)}});var Fl=p((zAt,NH)=>{l();"use strict";var CH=cE(),yMe=be(),A0=ql(),OH=jV(),gMe=zV(),bMe=br(),Bb=$V(),mMe=WV(),vMe=JV(),wMe=sz(),_Me=az(),EMe=pz(),SMe=mz(),kH=wz(),Xc=Sb(),{PinManager:xMe,PinTypes:AMe}=FE(),IMe=Lz(),TMe=GE(),RMe=PH(),PMe=xb(),CMe=xb(),Wn=yMe("ipfs:repo"),OMe=Number.MAX_SAFE_INTEGER,kMe="repoAutoMigrate",qH=class{constructor(e,r,i,n){if(typeof e!="string")throw new Error("missing repo path");if(typeof r!="function")throw new Error("missing codec loader");this.options=bMe(SMe,n),this.closed=!0,this.path=e,this.root=i.root,this.datastore=i.datastore,this.keys=i.keys;let s=i.blocks,o=i.pins;this.pins=new xMe({pinstore:o,blockstore:s,loadCodec:r});let a=IMe(this.pins,s);this.blocks=EMe(a),this.version=mMe(this.root),this.config=vMe(this.root),this.spec=wMe(this.root),this.apiAddr=_Me(this.root),this.gcLock=TMe(e,{singleProcess:this.options.repoOwner!==!1}),this.gc=RMe({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:r})}async init(e){Wn("initializing at: %s",this.path),await this._openRoot(),await this.config.replace(DMe(e)),await this.spec.set(NMe(e)),await this.version.set(Bb.repoVersion)}async isInitialized(){if(!this.closed)return!0;try{return await this._openRoot(),await this._checkInitialized(),await this.root.close(),!0}catch(e){return!1}}async open(){if(!this.closed)throw A0(new Error("repo is already open"),Xc.ERR_REPO_ALREADY_OPEN);Wn("opening at: %s",this.path);try{if(await this._openRoot(),await this._checkInitialized(),this._lockfile=await this._openLock(),Wn("acquired repo.lock"),!await this.version.check(Bb.repoVersion))if(await this._isAutoMigrationEnabled())await this._migrate(Bb.repoVersion,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys});else throw new Xc.InvalidRepoVersionError("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");Wn("creating datastore"),await this.datastore.open(),Wn("creating blocks"),this.blocks.open(),Wn("creating keystore"),await this.keys.open(),Wn("creating pins"),await this.pins.pinstore.open(),this.closed=!1,Wn("all opened")}catch(e){if(this._lockfile)try{await this._closeLock(),this._lockfile=null}catch(r){Wn("error removing lock",r)}throw e}}async _openRoot(){try{await this.root.open()}catch(e){if(e.message!=="Already open")throw e}}async _openLock(){let e=await this.options.repoLock.lock(this.path);if(typeof e.close!="function")throw A0(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return e}_closeLock(){return this._lockfile&&this._lockfile.close()}async _checkInitialized(){Wn("init check");let e;try{[e]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()])}catch(r){throw r.code==="ERR_NOT_FOUND"?A0(new Error("repo is not initialized yet"),Xc.ERR_REPO_NOT_INITIALIZED,{path:this.path}):r}if(!e)throw A0(new Error("repo is not initialized yet"),Xc.ERR_REPO_NOT_INITIALIZED,{path:this.path})}async close(){if(this.closed)throw A0(new Error("repo is already closed"),Xc.ERR_REPO_ALREADY_CLOSED);Wn("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(e){if(e.code!==Xc.ERR_REPO_NOT_INITIALIZED&&!e.message.startsWith("ENOENT"))throw e}await Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map(e=>e&&e.close())),Wn("unlocking"),this.closed=!0,await this._closeLock()}exists(){return this.version.exists()}async stat(){if(this.datastore&&this.keys){let[e,r,i,n,s]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),DH(this.datastore),DH(this.keys)]),o=r.size+n+s;return{repoPath:this.path,storageMax:e,version:i,numObjects:r.count,repoSize:o}}throw A0(new Error("repo is not initialized yet"),Xc.ERR_REPO_NOT_INITIALIZED,{path:this.path})}async _isAutoMigrationEnabled(){if(this.options.autoMigrate!==void 0)return this.options.autoMigrate;let e;try{e=await this.config.get(kMe)}catch(r){if(r.code===Xc.NotFoundError.code)e=!0;else throw r}return e}async _migrate(e,r){return await this.version.get()>e?(Wn(`reverting to version ${e}`),OH.revert(this.path,r,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress})):(Wn(`migrating to version ${e}`),OH.migrate(this.path,r,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}))}async _storageMaxStat(){try{let e=await this.config.get("Datastore.StorageMax");return BigInt(gMe(e))}catch(e){return BigInt(OMe)}}async _blockStat(){let e=BigInt(0),r=BigInt(0);if(this.blocks)for await(let{key:i,value:n}of this.blocks.query({}))e+=BigInt(1),r+=BigInt(n.byteLength),r+=BigInt(i.bytes.byteLength);return{count:e,size:r}}};async function DH(t){let e=BigInt(0);for await(let r of t.query({}))e+=BigInt(r.value.byteLength),e+=BigInt(r.key.uint8Array().byteLength);return e}function qMe(t,e,r,i){return new qH(t,e,r,i)}NH.exports={createRepo:qMe,repoVersion:Bb.repoVersion,errors:Xc,utils:{blockstore:LE()},locks:{memory:PMe,fs:CMe},PinTypes:AMe};function DMe(t){return t.Datastore=Object.assign({},kH,CH(t,"datastore")),t}function NMe(t){let e={...kH.Spec,...CH(t,"Datastore.Spec")};return{type:e.type,mounts:e.mounts.map(r=>({mountpoint:r.mountpoint,type:r.child.type,path:r.child.path,shardFunc:r.child.shardFunc}))}}});var LH=p((HAt,MH)=>{l();"use strict";var{resolvePath:BMe}=Ki(),MMe=ke(),{normaliseInput:LMe}=b0(),{PinTypes:BH}=Fl();MH.exports=({repo:t,codecs:e})=>{async function*r(i,n={}){let s=async function*(){for await(let{path:c,recursive:u,metadata:f}of LMe(i)){let{cid:d}=await BMe(t,e,c),{reason:h}=await t.pins.isPinnedWithType(d,[BH.recursive,BH.direct]);if(h==="recursive"&&!u)throw new Error(`${d} already pinned recursively`);u?await t.pins.pinRecursively(d,{metadata:f}):await t.pins.pinDirectly(d,{metadata:f}),yield d}};if(!Boolean(n.lock)){yield*s();return}let a=await t.gcLock.readLock();try{yield*s()}finally{a()}}return MMe(r)}});var jH=p(($At,FH)=>{l();"use strict";var{PinTypes:Yn}=Fl(),{normaliseInput:UMe}=b0(),{resolvePath:FMe}=Ki(),jMe=ke(),UH=xt();function Iy(t,e,r){let i={type:t,cid:e};return r&&(i.metadata=r),i}FH.exports=({repo:t,codecs:e})=>{async function*r(i={}){let n=Yn.all;if(i.type&&(n=i.type,!Object.keys(Yn).includes(n)))throw UH(new Error("Invalid pin type"),"ERR_INVALID_PIN_TYPE");if(i.paths){let s=!1;for await(let{path:o}of UMe(i.paths)){let{cid:a}=await FMe(t,e,o),{reason:c,pinned:u,parent:f,metadata:d}=await t.pins.isPinnedWithType(a,n);if(!u)throw UH(new Error(`path '${o}' is not pinned`),"ERR_NOT_PINNED");switch(c){case Yn.direct:case Yn.recursive:s=!0,yield Iy(c,a,d);break;default:s=!0,yield Iy(`${Yn.indirect} through ${f}`,a,d)}}if(!s)throw new Error("No match found");return}if(n===Yn.recursive||n===Yn.all)for await(let{cid:s,metadata:o}of t.pins.recursiveKeys())yield Iy(Yn.recursive,s,o);if(n===Yn.indirect||n===Yn.all)for await(let s of t.pins.indirectKeys(i))yield Iy(Yn.indirect,s);if(n===Yn.direct||n===Yn.all)for await(let{cid:s,metadata:o}of t.pins.directKeys())yield Iy(Yn.direct,s,o)}return jMe(r)}});var VH=p((GAt,KH)=>{l();"use strict";var KMe=Gn();KH.exports=({rmAll:t})=>(e,r={})=>KMe(t([{path:e,...r}],r))});var HH=p((WAt,zH)=>{l();"use strict";var{normaliseInput:VMe}=b0(),{resolvePath:zMe}=Ki(),HMe=ke(),{PinTypes:XE}=Fl();zH.exports=({repo:t,codecs:e})=>{async function*r(i,n={}){let s=await t.gcLock.readLock();try{for await(let{path:o,recursive:a}of VMe(i)){let{cid:c}=await zMe(t,e,o),{pinned:u,reason:f}=await t.pins.isPinnedWithType(c,XE.all);if(!u)throw new Error(`${c} is not pinned`);switch(f){case XE.recursive:if(!a)throw new Error(`${c} is pinned recursively`);await t.pins.unpin(c),yield c;break;case XE.direct:await t.pins.unpin(c),yield c;break;default:throw new Error(`${c} is pinned indirectly under ${f}`)}}}finally{s()}}return HMe(r)}});var WH=p((YAt,GH)=>{l();"use strict";var $Me=jK(),GMe=LH(),WMe=jH(),YMe=VH(),XMe=HH(),$H=class{constructor({codecs:e,repo:r}){let i=GMe({codecs:e,repo:r});this.addAll=i,this.add=$Me({addAll:i});let n=XMe({codecs:e,repo:r});this.rmAll=n,this.rm=YMe({rmAll:n}),this.ls=WMe({codecs:e,repo:r}),this.remote={add:(s,o={})=>Promise.reject(new Error("Not implemented")),ls:async function*(s,o={}){return Promise.reject(new Error("Not implemented"))},rm:(s,o={})=>Promise.reject(new Error("Not implemented")),rmAll:(s,o={})=>Promise.reject(new Error("Not implemented")),service:{add:(s,o)=>Promise.reject(new Error("Not implemented")),rm:(s,o={})=>Promise.reject(new Error("Not implemented")),ls:(s={})=>Promise.reject(new Error("Not implemented"))}}}};GH.exports=$H});var YH=p((QAt,QE)=>{l();var XAt=function(){typeof QE!="undefined"&&(QE.exports=v);var t=24*3600,e=3200,r=(365*400+97)*e/400,i=t*r,n=i*1e3,s=1e3*1e4*1e4*t,o=16777216,a=65536*65536,c=1e3*1e3,u=1e3*1e3*1e3,f="000000000",d=Math.trunc||M,h=v.prototype;v.fromDate=Y,v.fromInt64BE=W(0,1,2,3,0,4),v.fromInt64LE=W(3,2,1,0,4,0),v.fromString=G,v.fromTimeT=P,h.year=0,h.time=0,h.nano=0,h.addNano=D,h.getNano=z,h.getTimeT=w,h.getYear=A,h.toDate=F,h.toJSON=S,h.toString=C,h.writeInt64BE=B(0,1,2,3,0,4),h.writeInt64LE=B(3,2,1,0,4,0);var y="%Y-%m-%dT%H:%M:%S.%NZ",g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],m=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],E={"%":"%",F:"%Y-%m-%d",n:`
`,R:"%H:%M",T:"%H:%M:%S",t:"	",X:"%T",Z:"GMT",z:"+0000"};return v;function v(X,ne,oe){var de=this;if(!(de instanceof v))return new v(X,ne,oe);de.time=+X||0,de.nano=+ne||0,de.year=+oe||0,R(de)}function A(){var X=this.toDate().getUTCFullYear();return X+this.year}function R(X){var ne=X.year,oe=X.time,de=X.nano,he,we;if(de<0||c<=de){var k=Math.floor(de/c);de-=k*c,oe+=k,he=1}var j=ne%e;if(oe<-s||s<oe||j){we=d(oe/n),we&&(ne+=we*e,oe-=we*n);var $=q(oe);$.setUTCFullYear(j+$.getUTCFullYear()),ne-=j,oe=+$,we=d(ne/e);var Z=oe+we*n;we&&-s<=Z&&Z<=s&&(ne-=we*e,oe=Z),he=1}return he&&(X.year=ne,X.time=oe,X.nano=de),X}function F(){var X=R(this);return q(X.time)}function q(X){var ne=new Date(0);return ne.setTime(X),ne}function D(X){return this.nano+=+X||0,this}function z(){var X=R(this);return(X.time%1e3*c+ +X.nano+u)%u}function G(X){var ne,oe=new v;X+="";var de=X.replace(/^\s*[+\-]?\d+/,function(he){var we=+he,k=1970+(we-1970)%400;return oe.year=we-k,k}).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,function(he,we,k){return we<0&&(k*=-1),ne=(+we*60+ +k)*6e4,""}).replace(/\.\d+$/,function(he){return oe.nano=+(he+f).substr(1,9),""}).split(/\D+/);if(de.length>1?de[1]--:de[1]=0,oe.time=ne=Date.UTC.apply(Date,de)-(ne||0),isNaN(ne))throw new TypeError("Invalid Date");return R(oe)}function Y(X){return new v(+X)}function P(X){return b(X,0)}function b(X,ne){ne|=0,ne*=a,X=+X||0;var oe=d(ne/i)+d(X/i),de=ne%i+X%i,he=d(de/i);return he&&(oe+=he,de-=he*i),new v(de*1e3,0,oe*e)}function w(){var X=R(this),ne=Math.floor(X.time/1e3),oe=X.year;return oe&&(ne+=oe*r*t/e),ne}function S(){return this.toString().replace(/0{1,6}Z$/,"Z")}function C(X){var ne=this,oe=ne.toDate(),de={H:Z,L:V,M:I,N,S:U,Y:we,a:Q,b:ee,d:j,e:$,m:k};return he(X||y);function he(J){return J.replace(/%./g,function(ce){var ye=ce[1],ge=E[ye],je=de[ye];return ge?he(ge):je?je():ce})}function we(){var J=ne.getYear();return J>999999?"+"+J:J>9999?"+"+ae(J,6):J>=0?ae(J,4):J>=-999999?"-"+ae(-J,6):J}function k(){return L(oe.getUTCMonth()+1)}function j(){return L(oe.getUTCDate())}function $(){return _(oe.getUTCDate())}function Z(){return L(oe.getUTCHours())}function I(){return L(oe.getUTCMinutes())}function U(){return L(oe.getUTCSeconds())}function V(){return ae(oe.getUTCMilliseconds(),3)}function N(){return ae(ne.getNano(),9)}function Q(){return m[oe.getUTCDay()]}function ee(){return g[oe.getUTCMonth()]}}function B(X,ne,oe,de,he,we){return k;function k($,Z){var I=R(this);$||($=new Array(8)),K($,Z|=0);var U=Math.floor(I.time/1e3),V=I.year*(r*t/e),N=d(V/a)+d(U/a),Q=V%a+U%a,ee=Math.floor(Q/a);return ee&&(N+=ee,Q-=ee*a),j($,Z+he,N),j($,Z+we,Q),$}function j($,Z,I){$[Z+X]=I>>24&255,$[Z+ne]=I>>16&255,$[Z+oe]=I>>8&255,$[Z+de]=I&255}}function W(X,ne,oe,de,he,we){return k;function k($,Z){K($,Z|=0);var I=j($,Z+he),U=j($,Z+we);return b(U,I)}function j($,Z){return $[Z+X]*o+($[Z+ne]<<16|$[Z+oe]<<8|$[Z+de])}}function K(X,ne){var oe=X&&X.length;if(oe==null)throw new TypeError("Invalid Buffer");if(oe<ne+8)throw new RangeError("Out of range")}function M(X){var ne=X-X%1;return ne===0&&(X<0||X===0&&1/X!=1/0)?-0:ne}function _(X){return(X>9?"":" ")+(X|0)}function L(X){return(X>9?"":"0")+(X|0)}function ae(X,ne){return(f+(X|0)).substr(-ne)}}()});var ZH=p((ZAt,QH)=>{l();"use strict";function XH(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function QMe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return XH(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),XH(new n,r)}}QH.exports=QMe});var u$=p((JAt,c$)=>{l();c$.exports=ar;var Vs=null;try{Vs=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function ar(t,e,r){this.low=t|0,this.high=e|0,this.unsigned=!!r}ar.prototype.__isLong__;Object.defineProperty(ar.prototype,"__isLong__",{value:!0});function Xn(t){return(t&&t.__isLong__)===!0}ar.isLong=Xn;var JH={},e$={};function jl(t,e){var r,i,n;return e?(t>>>=0,(n=0<=t&&t<256)&&(i=e$[t],i)?i:(r=cr(t,(t|0)<0?-1:0,!0),n&&(e$[t]=r),r)):(t|=0,(n=-128<=t&&t<128)&&(i=JH[t],i)?i:(r=cr(t,t<0?-1:0,!1),n&&(JH[t]=r),r))}ar.fromInt=jl;function zs(t,e){if(isNaN(t))return e?Kl:Hs;if(e){if(t<0)return Kl;if(t>=r$)return a$}else{if(t<=-i$)return Qn;if(t+1>=i$)return o$}return t<0?zs(-t,e).neg():cr(t%I0|0,t/I0|0,e)}ar.fromNumber=zs;function cr(t,e,r){return new ar(t,e,r)}ar.fromBits=cr;var Mb=Math.pow;function ZE(t,e,r){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Hs;if(typeof e=="number"?(r=e,e=!1):e=!!e,r=r||10,r<2||36<r)throw RangeError("radix");var i;if((i=t.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return ZE(t.substring(1),e,r).neg();for(var n=zs(Mb(r,8)),s=Hs,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+a),r);if(a<8){var u=zs(Mb(r,a));s=s.mul(u).add(zs(c))}else s=s.mul(n),s=s.add(zs(c))}return s.unsigned=e,s}ar.fromString=ZE;function Lo(t,e){return typeof t=="number"?zs(t,e):typeof t=="string"?ZE(t,e):cr(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}ar.fromValue=Lo;var t$=1<<16,ZMe=1<<24,I0=t$*t$,r$=I0*I0,i$=r$/2,n$=jl(ZMe),Hs=jl(0);ar.ZERO=Hs;var Kl=jl(0,!0);ar.UZERO=Kl;var T0=jl(1);ar.ONE=T0;var s$=jl(1,!0);ar.UONE=s$;var JE=jl(-1);ar.NEG_ONE=JE;var o$=cr(4294967295|0,2147483647|0,!1);ar.MAX_VALUE=o$;var a$=cr(4294967295|0,4294967295|0,!0);ar.MAX_UNSIGNED_VALUE=a$;var Qn=cr(0,2147483648|0,!1);ar.MIN_VALUE=Qn;var Re=ar.prototype;Re.toInt=function(){return this.unsigned?this.low>>>0:this.low};Re.toNumber=function(){return this.unsigned?(this.high>>>0)*I0+(this.low>>>0):this.high*I0+(this.low>>>0)};Re.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Qn)){var r=zs(e),i=this.div(r),n=i.mul(r).sub(this);return i.toString(e)+n.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=zs(Mb(e,6),this.unsigned),o=this,a="";;){var c=o.div(s),u=o.sub(c.mul(s)).toInt()>>>0,f=u.toString(e);if(o=c,o.isZero())return f+a;for(;f.length<6;)f="0"+f;a=""+f+a}};Re.getHighBits=function(){return this.high};Re.getHighBitsUnsigned=function(){return this.high>>>0};Re.getLowBits=function(){return this.low};Re.getLowBitsUnsigned=function(){return this.low>>>0};Re.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Qn)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,r=31;r>0&&(e&1<<r)==0;r--);return this.high!=0?r+33:r+1};Re.isZero=function(){return this.high===0&&this.low===0};Re.eqz=Re.isZero;Re.isNegative=function(){return!this.unsigned&&this.high<0};Re.isPositive=function(){return this.unsigned||this.high>=0};Re.isOdd=function(){return(this.low&1)==1};Re.isEven=function(){return(this.low&1)==0};Re.equals=function(e){return Xn(e)||(e=Lo(e)),this.unsigned!==e.unsigned&&this.high>>>31==1&&e.high>>>31==1?!1:this.high===e.high&&this.low===e.low};Re.eq=Re.equals;Re.notEquals=function(e){return!this.eq(e)};Re.neq=Re.notEquals;Re.ne=Re.notEquals;Re.lessThan=function(e){return this.comp(e)<0};Re.lt=Re.lessThan;Re.lessThanOrEqual=function(e){return this.comp(e)<=0};Re.lte=Re.lessThanOrEqual;Re.le=Re.lessThanOrEqual;Re.greaterThan=function(e){return this.comp(e)>0};Re.gt=Re.greaterThan;Re.greaterThanOrEqual=function(e){return this.comp(e)>=0};Re.gte=Re.greaterThanOrEqual;Re.ge=Re.greaterThanOrEqual;Re.compare=function(e){if(Xn(e)||(e=Lo(e)),this.eq(e))return 0;var r=this.isNegative(),i=e.isNegative();return r&&!i?-1:!r&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Re.comp=Re.compare;Re.negate=function(){return!this.unsigned&&this.eq(Qn)?Qn:this.not().add(T0)};Re.neg=Re.negate;Re.add=function(e){Xn(e)||(e=Lo(e));var r=this.high>>>16,i=this.high&65535,n=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,c=e.low>>>16,u=e.low&65535,f=0,d=0,h=0,y=0;return y+=s+u,h+=y>>>16,y&=65535,h+=n+c,d+=h>>>16,h&=65535,d+=i+a,f+=d>>>16,d&=65535,f+=r+o,f&=65535,cr(h<<16|y,f<<16|d,this.unsigned)};Re.subtract=function(e){return Xn(e)||(e=Lo(e)),this.add(e.neg())};Re.sub=Re.subtract;Re.multiply=function(e){if(this.isZero())return Hs;if(Xn(e)||(e=Lo(e)),Vs){var r=Vs.mul(this.low,this.high,e.low,e.high);return cr(r,Vs.get_high(),this.unsigned)}if(e.isZero())return Hs;if(this.eq(Qn))return e.isOdd()?Qn:Hs;if(e.eq(Qn))return this.isOdd()?Qn:Hs;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(n$)&&e.lt(n$))return zs(this.toNumber()*e.toNumber(),this.unsigned);var i=this.high>>>16,n=this.high&65535,s=this.low>>>16,o=this.low&65535,a=e.high>>>16,c=e.high&65535,u=e.low>>>16,f=e.low&65535,d=0,h=0,y=0,g=0;return g+=o*f,y+=g>>>16,g&=65535,y+=s*f,h+=y>>>16,y&=65535,y+=o*u,h+=y>>>16,y&=65535,h+=n*f,d+=h>>>16,h&=65535,h+=s*u,d+=h>>>16,h&=65535,h+=o*c,d+=h>>>16,h&=65535,d+=i*f+n*u+s*c+o*a,d&=65535,cr(y<<16|g,d<<16|h,this.unsigned)};Re.mul=Re.multiply;Re.divide=function(e){if(Xn(e)||(e=Lo(e)),e.isZero())throw Error("division by zero");if(Vs){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var r=(this.unsigned?Vs.div_u:Vs.div_s)(this.low,this.high,e.low,e.high);return cr(r,Vs.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Kl:Hs;var i,n,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Kl;if(e.gt(this.shru(1)))return s$;s=Kl}else{if(this.eq(Qn)){if(e.eq(T0)||e.eq(JE))return Qn;if(e.eq(Qn))return T0;var o=this.shr(1);return i=o.div(e).shl(1),i.eq(Hs)?e.isNegative()?T0:JE:(n=this.sub(e.mul(i)),s=i.add(n.div(e)),s)}else if(e.eq(Qn))return this.unsigned?Kl:Hs;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=Hs}for(n=this;n.gte(e);){i=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(i)/Math.LN2),c=a<=48?1:Mb(2,a-48),u=zs(i),f=u.mul(e);f.isNegative()||f.gt(n);)i-=c,u=zs(i,this.unsigned),f=u.mul(e);u.isZero()&&(u=T0),s=s.add(u),n=n.sub(f)}return s};Re.div=Re.divide;Re.modulo=function(e){if(Xn(e)||(e=Lo(e)),Vs){var r=(this.unsigned?Vs.rem_u:Vs.rem_s)(this.low,this.high,e.low,e.high);return cr(r,Vs.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Re.mod=Re.modulo;Re.rem=Re.modulo;Re.not=function(){return cr(~this.low,~this.high,this.unsigned)};Re.and=function(e){return Xn(e)||(e=Lo(e)),cr(this.low&e.low,this.high&e.high,this.unsigned)};Re.or=function(e){return Xn(e)||(e=Lo(e)),cr(this.low|e.low,this.high|e.high,this.unsigned)};Re.xor=function(e){return Xn(e)||(e=Lo(e)),cr(this.low^e.low,this.high^e.high,this.unsigned)};Re.shiftLeft=function(e){return Xn(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?cr(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):cr(0,this.low<<e-32,this.unsigned)};Re.shl=Re.shiftLeft;Re.shiftRight=function(e){return Xn(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?cr(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):cr(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Re.shr=Re.shiftRight;Re.shiftRightUnsigned=function(e){if(Xn(e)&&(e=e.toInt()),e&=63,e===0)return this;var r=this.high;if(e<32){var i=this.low;return cr(i>>>e|r<<32-e,r>>>e,this.unsigned)}else return e===32?cr(r,0,this.unsigned):cr(r>>>e-32,0,this.unsigned)};Re.shru=Re.shiftRightUnsigned;Re.shr_u=Re.shiftRightUnsigned;Re.toSigned=function(){return this.unsigned?cr(this.low,this.high,!1):this};Re.toUnsigned=function(){return this.unsigned?this:cr(this.low,this.high,!0)};Re.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Re.toBytesLE=function(){var e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Re.toBytesBE=function(){var e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]};ar.fromBytes=function(e,r,i){return i?ar.fromBytesLE(e,r):ar.fromBytesBE(e,r)};ar.fromBytesLE=function(e,r){return new ar(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)};ar.fromBytesBE=function(e,r){return new ar(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)}});var d$=p((eIt,l$)=>{l();"use strict";var R0=qi(),f$=R0.Reader,JMe=R0.Writer,We=R0.util,P0=R0.roots["ipfs-ipns"]||(R0.roots["ipfs-ipns"]={});P0.IpnsEntry=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.value=We.newBuffer([]),t.prototype.signature=We.newBuffer([]),t.prototype.validityType=0,t.prototype.validity=We.newBuffer([]),t.prototype.sequence=We.Long?We.Long.fromBits(0,0,!0):0,t.prototype.ttl=We.Long?We.Long.fromBits(0,0,!0):0,t.prototype.pubKey=We.newBuffer([]),t.prototype.signatureV2=We.newBuffer([]),t.prototype.data=We.newBuffer([]),t.encode=function(r,i){return i||(i=JMe.create()),r.value!=null&&Object.hasOwnProperty.call(r,"value")&&i.uint32(10).bytes(r.value),r.signature!=null&&Object.hasOwnProperty.call(r,"signature")&&i.uint32(18).bytes(r.signature),r.validityType!=null&&Object.hasOwnProperty.call(r,"validityType")&&i.uint32(24).int32(r.validityType),r.validity!=null&&Object.hasOwnProperty.call(r,"validity")&&i.uint32(34).bytes(r.validity),r.sequence!=null&&Object.hasOwnProperty.call(r,"sequence")&&i.uint32(40).uint64(r.sequence),r.ttl!=null&&Object.hasOwnProperty.call(r,"ttl")&&i.uint32(48).uint64(r.ttl),r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&i.uint32(58).bytes(r.pubKey),r.signatureV2!=null&&Object.hasOwnProperty.call(r,"signatureV2")&&i.uint32(66).bytes(r.signatureV2),r.data!=null&&Object.hasOwnProperty.call(r,"data")&&i.uint32(74).bytes(r.data),i},t.decode=function(r,i){r instanceof f$||(r=f$.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new P0.IpnsEntry;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.value=r.bytes();break;case 2:s.signature=r.bytes();break;case 3:s.validityType=r.int32();break;case 4:s.validity=r.bytes();break;case 5:s.sequence=r.uint64();break;case 6:s.ttl=r.uint64();break;case 7:s.pubKey=r.bytes();break;case 8:s.signatureV2=r.bytes();break;case 9:s.data=r.bytes();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof P0.IpnsEntry)return r;var i=new P0.IpnsEntry;switch(r.value!=null&&(typeof r.value=="string"?We.base64.decode(r.value,i.value=We.newBuffer(We.base64.length(r.value)),0):r.value.length&&(i.value=r.value)),r.signature!=null&&(typeof r.signature=="string"?We.base64.decode(r.signature,i.signature=We.newBuffer(We.base64.length(r.signature)),0):r.signature.length&&(i.signature=r.signature)),r.validityType){case"EOL":case 0:i.validityType=0;break}return r.validity!=null&&(typeof r.validity=="string"?We.base64.decode(r.validity,i.validity=We.newBuffer(We.base64.length(r.validity)),0):r.validity.length&&(i.validity=r.validity)),r.sequence!=null&&(We.Long?(i.sequence=We.Long.fromValue(r.sequence)).unsigned=!0:typeof r.sequence=="string"?i.sequence=parseInt(r.sequence,10):typeof r.sequence=="number"?i.sequence=r.sequence:typeof r.sequence=="object"&&(i.sequence=new We.LongBits(r.sequence.low>>>0,r.sequence.high>>>0).toNumber(!0))),r.ttl!=null&&(We.Long?(i.ttl=We.Long.fromValue(r.ttl)).unsigned=!0:typeof r.ttl=="string"?i.ttl=parseInt(r.ttl,10):typeof r.ttl=="number"?i.ttl=r.ttl:typeof r.ttl=="object"&&(i.ttl=new We.LongBits(r.ttl.low>>>0,r.ttl.high>>>0).toNumber(!0))),r.pubKey!=null&&(typeof r.pubKey=="string"?We.base64.decode(r.pubKey,i.pubKey=We.newBuffer(We.base64.length(r.pubKey)),0):r.pubKey.length&&(i.pubKey=r.pubKey)),r.signatureV2!=null&&(typeof r.signatureV2=="string"?We.base64.decode(r.signatureV2,i.signatureV2=We.newBuffer(We.base64.length(r.signatureV2)),0):r.signatureV2.length&&(i.signatureV2=r.signatureV2)),r.data!=null&&(typeof r.data=="string"?We.base64.decode(r.data,i.data=We.newBuffer(We.base64.length(r.data)),0):r.data.length&&(i.data=r.data)),i},t.toObject=function(r,i){i||(i={});var n={};if(i.defaults){if(i.bytes===String?n.value="":(n.value=[],i.bytes!==Array&&(n.value=We.newBuffer(n.value))),i.bytes===String?n.signature="":(n.signature=[],i.bytes!==Array&&(n.signature=We.newBuffer(n.signature))),n.validityType=i.enums===String?"EOL":0,i.bytes===String?n.validity="":(n.validity=[],i.bytes!==Array&&(n.validity=We.newBuffer(n.validity))),We.Long){var s=new We.Long(0,0,!0);n.sequence=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.sequence=i.longs===String?"0":0;if(We.Long){var s=new We.Long(0,0,!0);n.ttl=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.ttl=i.longs===String?"0":0;i.bytes===String?n.pubKey="":(n.pubKey=[],i.bytes!==Array&&(n.pubKey=We.newBuffer(n.pubKey))),i.bytes===String?n.signatureV2="":(n.signatureV2=[],i.bytes!==Array&&(n.signatureV2=We.newBuffer(n.signatureV2))),i.bytes===String?n.data="":(n.data=[],i.bytes!==Array&&(n.data=We.newBuffer(n.data)))}return r.value!=null&&r.hasOwnProperty("value")&&(n.value=i.bytes===String?We.base64.encode(r.value,0,r.value.length):i.bytes===Array?Array.prototype.slice.call(r.value):r.value),r.signature!=null&&r.hasOwnProperty("signature")&&(n.signature=i.bytes===String?We.base64.encode(r.signature,0,r.signature.length):i.bytes===Array?Array.prototype.slice.call(r.signature):r.signature),r.validityType!=null&&r.hasOwnProperty("validityType")&&(n.validityType=i.enums===String?P0.IpnsEntry.ValidityType[r.validityType]:r.validityType),r.validity!=null&&r.hasOwnProperty("validity")&&(n.validity=i.bytes===String?We.base64.encode(r.validity,0,r.validity.length):i.bytes===Array?Array.prototype.slice.call(r.validity):r.validity),r.sequence!=null&&r.hasOwnProperty("sequence")&&(typeof r.sequence=="number"?n.sequence=i.longs===String?String(r.sequence):r.sequence:n.sequence=i.longs===String?We.Long.prototype.toString.call(r.sequence):i.longs===Number?new We.LongBits(r.sequence.low>>>0,r.sequence.high>>>0).toNumber(!0):r.sequence),r.ttl!=null&&r.hasOwnProperty("ttl")&&(typeof r.ttl=="number"?n.ttl=i.longs===String?String(r.ttl):r.ttl:n.ttl=i.longs===String?We.Long.prototype.toString.call(r.ttl):i.longs===Number?new We.LongBits(r.ttl.low>>>0,r.ttl.high>>>0).toNumber(!0):r.ttl),r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(n.pubKey=i.bytes===String?We.base64.encode(r.pubKey,0,r.pubKey.length):i.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey),r.signatureV2!=null&&r.hasOwnProperty("signatureV2")&&(n.signatureV2=i.bytes===String?We.base64.encode(r.signatureV2,0,r.signatureV2.length):i.bytes===Array?Array.prototype.slice.call(r.signatureV2):r.signatureV2),r.data!=null&&r.hasOwnProperty("data")&&(n.data=i.bytes===String?We.base64.encode(r.data,0,r.data.length):i.bytes===Array?Array.prototype.slice.call(r.data):r.data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,R0.util.toJSONOptions)},t.ValidityType=function(){var e={},r=Object.create(e);return r[e[0]="EOL"]=0,r}(),t}();l$.exports=P0});var h$=p((tIt,eS)=>{l();"use strict";eS.exports.toRFC3339=t=>{let e=t.getUTCFullYear(),r=String(t.getUTCMonth()+1).padStart(2,"0"),i=String(t.getUTCDate()).padStart(2,"0"),n=String(t.getUTCHours()).padStart(2,"0"),s=String(t.getUTCMinutes()).padStart(2,"0"),o=String(t.getUTCSeconds()).padStart(2,"0"),c=t.getUTCMilliseconds()*1e3*1e3;return`${e}-${r}-${i}T${n}:${s}:${o}.${c}Z`};eS.exports.parseRFC3339=t=>{let e=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(t).trim().match(e);if(!r)throw new Error("Invalid format");let i=parseInt(r[1],10),n=parseInt(r[2],10)-1,s=parseInt(r[3],10),o=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),u=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(i,n,s,o,a,c,u))}});var p$=p(Uo=>{l();"use strict";Uo.ERR_IPNS_EXPIRED_RECORD="ERR_IPNS_EXPIRED_RECORD";Uo.ERR_UNRECOGNIZED_VALIDITY="ERR_UNRECOGNIZED_VALIDITY";Uo.ERR_SIGNATURE_CREATION="ERR_SIGNATURE_CREATION";Uo.ERR_SIGNATURE_VERIFICATION="ERR_SIGNATURE_VERIFICATION";Uo.ERR_UNRECOGNIZED_FORMAT="ERR_UNRECOGNIZED_FORMAT";Uo.ERR_PEER_ID_FROM_PUBLIC_KEY="ERR_PEER_ID_FROM_PUBLIC_KEY";Uo.ERR_PUBLIC_KEY_FROM_ID="ERR_PUBLIC_KEY_FROM_ID";Uo.ERR_UNDEFINED_PARAMETER="ERR_UNDEFINED_PARAMETER";Uo.ERR_INVALID_RECORD_DATA="ERR_INVALID_RECORD_DATA";Uo.ERR_INVALID_EMBEDDED_KEY="ERR_INVALID_EMBEDDED_KEY"});var q0=p((iIt,I$)=>{l();"use strict";var y$=YH(),{Key:Ty}=Ut(),tS=La(),rS=tt(),eLe=(An(),Ln),{identity:tLe}=(qc(),kc),Vi=ZH(),{base32upper:rLe}=(an(),on),{fromString:C0}=(ut(),lt),{toString:iS}=(et(),Je),{concat:O0}=(fn(),un),{equals:g$}=(di(),li),b$=(J2(),ob),m$=u$(),v$=be(),gs=Object.assign(v$("jsipns"),{error:v$("jsipns:error")}),{IpnsEntry:k0}=d$(),{parseRFC3339:nS}=h$(),zi=p$(),iLe=tLe.code,w$="/ipns/",nLe=C0("/ipns/"),sLe=(t,e,r,i)=>{let n=new y$(Date.now()+Number(i)),s=k0.ValidityType.EOL,[o,a]=i.toString().split("."),c=BigInt(o)*100000n+BigInt(a||0);return _$(t,e,r,s,n,c)},oLe=(t,e,r,i)=>{let n=y$.fromString(i),s=k0.ValidityType.EOL,o=n.toDate().getTime()-Date.now(),a=BigInt(o)*100000n+BigInt(n.getNano());return _$(t,e,r,s,n,a)},_$=async(t,e,r,i,n,s)=>{r=BigInt(r);let o=C0(n.toString()),a=await dLe(t,e,i,o),c=aLe(e,o,i,r,s),u=A$(c),f=await t.sign(u),d={value:e,signature:a,validityType:i,validity:o,sequence:r,ttl:s,signatureV2:f,data:c};return gs(`ipns entry for ${e} created`),d},aLe=(t,e,r,i,n)=>{let s={Value:t,Validity:e,ValidityType:r,Sequence:i,TTL:n};return b$.encode(s)},E$=async(t,e)=>{let{value:r,validityType:i,validity:n}=e,s,o;e.signatureV2&&e.data?(o=e.signatureV2,s=A$(e.data),cLe(e)):(o=e.signature,s=x$(r,i,n));let a;try{a=await t.verify(s,o)}catch(c){a=!1}if(!a)throw gs.error("record signature verification failed"),Vi(new Error("record signature verification failed"),zi.ERR_SIGNATURE_VERIFICATION);if(i===k0.ValidityType.EOL){let c;try{c=nS(iS(n))}catch(u){throw gs.error("unrecognized validity format (not an rfc3339 format)"),Vi(new Error("unrecognized validity format (not an rfc3339 format)"),zi.ERR_UNRECOGNIZED_FORMAT)}if(c.getTime()<Date.now())throw gs.error("record has expired"),Vi(new Error("record has expired"),zi.ERR_IPNS_EXPIRED_RECORD)}else if(i)throw gs.error("unrecognized validity type"),Vi(new Error("unrecognized validity type"),zi.ERR_UNRECOGNIZED_VALIDITY);gs(`ipns entry for ${r} is valid`)},cLe=t=>{if(!t.data)throw Vi(new Error("Record data is missing"),zi.ERR_INVALID_RECORD_DATA);let e=b$.decode(t.data);if(Number.isInteger(e.Sequence)&&(e.Sequence=BigInt(e.Sequence)),Number.isInteger(e.TTL)&&(e.TTL=BigInt(e.TTL)),!g$(e.Value,t.value))throw Vi(new Error('Field "value" did not match between protobuf and CBOR'),zi.ERR_SIGNATURE_VERIFICATION);if(!g$(e.Validity,t.validity))throw Vi(new Error('Field "validity" did not match between protobuf and CBOR'),zi.ERR_SIGNATURE_VERIFICATION);if(e.ValidityType!==t.validityType)throw Vi(new Error('Field "validityType" did not match between protobuf and CBOR'),zi.ERR_SIGNATURE_VERIFICATION);if(e.Sequence!==t.sequence)throw Vi(new Error('Field "sequence" did not match between protobuf and CBOR'),zi.ERR_SIGNATURE_VERIFICATION);if(e.TTL!==t.ttl)throw Vi(new Error('Field "ttl" did not match between protobuf and CBOR'),zi.ERR_SIGNATURE_VERIFICATION)},uLe=async(t,e)=>{if(!t||!t.bytes||!e){let n=new Error("one or more of the provided parameters are not defined");throw gs.error(n),Vi(n,zi.ERR_UNDEFINED_PARAMETER)}let r;try{r=await rS.createFromPubKey(t.bytes)}catch(n){throw Vi(n,zi.ERR_PEER_ID_FROM_PUBLIC_KEY)}let i;try{i=pLe(r)}catch(n){throw gs.error(n),Vi(n,zi.ERR_PUBLIC_KEY_FROM_ID)}if(i)return null;try{e.pubKey=tS.keys.marshalPublicKey(t)}catch(n){throw gs.error(n),n}return e},S$=async(t,e)=>{if(!e||!t){let i=new Error("one or more of the provided parameters are not defined");throw gs.error(i),Vi(i,zi.ERR_UNDEFINED_PARAMETER)}let r;if(e.pubKey){try{r=tS.keys.unmarshalPublicKey(e.pubKey)}catch(n){throw gs.error(n),n}if(!(await rS.createFromPubKey(e.pubKey)).equals(t))throw Vi(new Error("Embedded public key did not match PeerID"),zi.ERR_INVALID_EMBEDDED_KEY)}else t.pubKey&&(r=t.pubKey);if(r)return r;throw Vi(new Error("no public key is available"),zi.ERR_UNDEFINED_PARAMETER)},sS=t=>rLe.encode(t).slice(1),fLe=t=>new Ty(`/ipns/${sS(t)}`),lLe=t=>{let e=C0("/pk/"),r=C0("/ipns/");return{routingPubKey:new Ty(O0([e,t]),!1),pkKey:new Ty(sS(O0([e,t]))),routingKey:new Ty(O0([r,t]),!1),ipnsKey:new Ty(sS(O0([r,t])))}},dLe=(t,e,r,i)=>{try{let n=x$(e,r,i);return t.sign(n)}catch(n){throw gs.error("record signature creation failed"),Vi(new Error("record signature creation failed: "+n.message),zi.ERR_SIGNATURE_CREATION)}},hLe=t=>{if(t.toString()==="0")return"EOL";let e=new Error(`unrecognized validity type ${t.toString()}`);throw gs.error(e),Vi(e,zi.ERR_UNRECOGNIZED_VALIDITY)},x$=(t,e,r)=>{let i=C0(hLe(e));return O0([t,r,i])},A$=t=>{let e=C0("ipns-signature:");return O0([e,t])},pLe=t=>{let e=eLe.decode(t.id);return e.code!==iLe?null:tS.keys.unmarshalPublicKey(e.digest)},yLe=t=>k0.encode({...t,sequence:m$.fromString(t.sequence.toString()),ttl:t.ttl==null?void 0:m$.fromString(t.ttl.toString())}).finish(),Lb=t=>{let e=k0.decode(t),r=k0.toObject(e,{defaults:!1,arrays:!0,objects:!1});return{value:r.value,signature:r.signature,validityType:r.validityType,validity:r.validity,sequence:Object.hasOwnProperty.call(r,"sequence")?BigInt(`${r.sequence}`):0n,pubKey:r.pubKey,ttl:Object.hasOwnProperty.call(r,"ttl")?BigInt(`${r.ttl}`):void 0,signatureV2:r.signatureV2,data:r.data}},gLe={validate:async(t,e)=>{let r=Lb(t),i=e.slice(nLe.length),n=rS.createFromBytes(i),s=await S$(n,r);await E$(s,r)},select:(t,e)=>{let r=Lb(t),i=Lb(e);if(r.signatureV2&&!i.signatureV2)return 0;if(i.signatureV2&&!r.signatureV2)return 1;if(r.sequence>i.sequence)return 0;if(r.sequence<i.sequence)return 1;let n=nS(iS(r.validity));return nS(iS(i.validity)).getTime()>n.getTime()?1:0}};I$.exports={create:sLe,createWithExpiration:oLe,validate:E$,embedPublicKey:uLe,extractPublicKey:S$,getLocalKey:fLe,getIdKeys:lLe,marshal:yLe,unmarshal:Lb,validator:gLe,namespace:w$,namespaceLength:w$.length}});var q$=p((O$,k$)=>{l();"use strict";var Ub=tt(),{Key:T$,Errors:bLe}=Ut(),Cn=xt(),R$=be(),Ei=Object.assign(R$("ipfs:ipns:publisher"),{error:R$("ipfs:ipns:publisher:error")}),{toString:Ry}=(et(),Je),{equals:mLe}=(di(),li),Qc=q0(),P$=bLe.notFoundError().code,C$=60*60*1e3,oS=class{constructor(e,r){this._routing=e,this._datastore=r}async publishWithEOL(e,r,i){if(!e||!e.bytes)throw Cn(new Error("invalid private key"),"ERR_INVALID_PRIVATE_KEY");let n=await Ub.createFromPrivKey(e.bytes),s=await this._updateOrCreateRecord(e,r,i,n);return this._putRecordToRouting(s,n)}publish(e,r){return this.publishWithEOL(e,r,C$)}async _putRecordToRouting(e,r){if(!Ub.isPeerId(r)){let o="peerId received is not valid";throw Ei.error(o),Cn(new Error(o),"ERR_INVALID_PEER_ID")}let i=r._pubKey,n=await Qc.embedPublicKey(i,e),s=Qc.getIdKeys(r.toBytes());return await this._publishEntry(s.routingKey,n||e),await this._publishPublicKey(s.routingPubKey,i),n||e}async _publishEntry(e,r){let i=T$.asKey(e);if(!i){let s="datastore key does not have a valid format";throw Ei.error(s),Cn(new Error(s),"ERR_INVALID_DATASTORE_KEY")}let n;try{n=Qc.marshal(r)}catch(s){throw Ei.error(s),s}try{let s=await this._routing.put(i.uint8Array(),n);return Ei(`ipns record for ${Ry(i.uint8Array(),"base64")} was stored in the routing`),s}catch(s){let o=`ipns record for ${Ry(i.uint8Array(),"base64")} could not be stored in the routing`;throw Ei.error(o),Ei.error(s),Cn(new Error(o),"ERR_PUTTING_TO_ROUTING")}}async _publishPublicKey(e,r){let i=T$.asKey(e);if(!i){let n="datastore key does not have a valid format";throw Ei.error(n),Cn(new Error(n),"ERR_INVALID_DATASTORE_KEY")}if(!r||!r.bytes){let n="one or more of the provided parameters are not defined";throw Ei.error(n),Cn(new Error(n),"ERR_UNDEFINED_PARAMETER")}try{let n=await this._routing.put(i.uint8Array(),r.bytes);return Ei(`public key for ${Ry(i.uint8Array(),"base64")} was stored in the routing`),n}catch(n){let s=`public key for ${Ry(i.uint8Array(),"base64")} could not be stored in the routing`;throw Ei.error(s),Ei.error(n),Cn(new Error(s),"ERR_PUTTING_TO_ROUTING")}}async _getPublished(e,r={}){if(!Ub.isPeerId(e)){let n="peerId received is not valid";throw Ei.error(n),Cn(new Error(n),"ERR_INVALID_PEER_ID")}let i=r.checkRouting!==!1;try{let n=await this._datastore.get(Qc.getLocalKey(e.id));return this._unmarshalData(n)}catch(n){if(n.code!==P$){let s=`unexpected error getting the ipns record ${e.id} from datastore`;throw Ei.error(s),Cn(new Error(s),"ERR_UNEXPECTED_DATASTORE_RESPONSE")}if(!i)throw Cn(n,"ERR_NOT_FOUND_AND_CHECK_ROUTING_NOT_ENABLED");try{let s=Qc.getIdKeys(e.toBytes()),o=await this._routing.get(s.routingKey.uint8Array());return this._unmarshalData(o)}catch(s){throw Ei.error(s),s}}}_unmarshalData(e){try{return Qc.unmarshal(e)}catch(r){throw Cn(r,"ERR_INVALID_RECORD_DATA")}}async _updateOrCreateRecord(e,r,i,n){if(!Ub.isPeerId(n)){let u="peerId received is not valid";throw Ei.error(u),Cn(new Error(u),"ERR_INVALID_PEER_ID")}let s={checkRouting:!0},o;try{o=await this._getPublished(n,s)}catch(u){if(u.code!==P$){let f=`unexpected error when determining the last published IPNS record for ${n.id} ${u.stack}`;throw Ei.error(f),Cn(new Error(f),"ERR_DETERMINING_PUBLISHED_RECORD")}}let a=0n;o&&o.sequence!==void 0&&(a=mLe(o.value,r)?BigInt(o.sequence):BigInt(o.sequence)+1n);let c;try{c=await Qc.create(e,r,a,i)}catch(u){let f=`ipns record for ${r} could not be created`;throw Ei.error(u),Cn(new Error(f),"ERR_CREATING_IPNS_RECORD")}try{let u=Qc.marshal(c);return await this._datastore.put(Qc.getLocalKey(n.id),u),Ei(`ipns record for ${Ry(r,"base32")} was stored in the datastore`),c}catch(u){let f=`ipns record for ${r} could not be stored in the datastore`;throw Ei.error(f),Cn(new Error(f),"ERR_STORING_IN_DATASTORE")}}};oS.defaultRecordLifetime=C$;O$=k$.exports=oS});var K$=p((F$,j$)=>{l();"use strict";var D$=q0(),vLe=La(),N$=tt(),Vl=xt(),B$=be(),Fb=Object.assign(B$("ipfs:ipns:republisher"),{error:B$("ipfs:ipns:republisher:error")}),M$=60*1e3,L$=60*M$,wLe=4*L$,_Le=24*L$,U$=class{constructor(e,r,i,n,s={pass:""}){this._publisher=e,this._datastore=r,this._peerId=i,this._keychain=n,this._options=s,this._republishHandle=null}async start(){if(this._republishHandle)throw Vl(new Error("republisher is already running"),"ERR_REPUBLISH_ALREADY_RUNNING");let e={_task:null,_inflightTask:null,_timeoutId:null,runPeriodically:s=>{e._timeoutId=setTimeout(async()=>{e._timeoutId=null;try{e._inflightTask=e._task(),await e._inflightTask,e._task&&e.runPeriodically(s)}catch(o){Fb.error(o)}},s())},cancel:async()=>{e._timeoutId!=null&&clearTimeout(e._timeoutId),e._task=null,await e._inflightTask}},{privKey:r}=this._peerId,{pass:i}=this._options,n=!0;e._task=()=>this._republishEntries(r,i),e.runPeriodically(()=>n?(n=!1,this._options.initialBroadcastInterval||M$):this._options.broadcastInterval||wLe),this._republishHandle=e}async stop(){let e=this._republishHandle;if(!e)throw Vl(new Error("republisher is not running"),"ERR_REPUBLISH_NOT_RUNNING");this._republishHandle=null,await e.cancel()}async _republishEntries(e,r){try{await this._republishEntry(e)}catch(i){let n="cannot republish entry for the node's private key";Fb.error(n);return}if(r)try{let i=await this._keychain.listKeys();for(let n of i){if(n.name==="self")continue;let s=await this._keychain.exportKey(n.name,r),o=await vLe.keys.import(s,r);await this._republishEntry(o)}}catch(i){Fb.error(i)}}async _republishEntry(e){if(!e||!e.bytes)throw Vl(new Error("invalid private key"),"ERR_INVALID_PRIVATE_KEY");try{let r=await N$.createFromPrivKey(e.bytes),i=await this._getPreviousValue(r);await this._publisher.publishWithEOL(e,i,_Le)}catch(r){if(r.code==="ERR_NO_ENTRY_FOUND")return;throw r}}async _getPreviousValue(e){if(!N$.isPeerId(e))throw Vl(new Error("invalid peer ID"),"ERR_INVALID_PEER_ID");try{let r=await this._datastore.get(D$.getLocalKey(e.id));if(!(r instanceof Uint8Array))throw Vl(new Error("found ipns record that we couldn't process"),"ERR_INVALID_IPNS_RECORD");try{return D$.unmarshal(r).value}catch(i){throw Fb.error(i),Vl(new Error("found ipns record that we couldn't convert to a value"),"ERR_INVALID_IPNS_RECORD")}}catch(r){throw r&&r.notFound?Vl(new Error(`no previous entry for record with id: ${e.id}`),"ERR_NO_ENTRY_FOUND"):r}}};F$=j$.exports=U$});var W$=p(($$,G$)=>{l();"use strict";var jb=q0(),ELe=tt(),D0=xt(),V$=be(),Kb=Object.assign(V$("ipfs:ipns:resolver"),{error:V$("ipfs:ipns:resolver:error")}),{toString:SLe}=(et(),Je),{Errors:xLe}=Ut(),ALe=xLe.notFoundError().code,z$=32,H$=class{constructor(e){this._routing=e}async resolve(e,r={}){if(typeof e!="string")throw D0(new Error("invalid name"),"ERR_INVALID_NAME");let i=r.recursive&&r.recursive.toString()==="true",n=e.split("/");if(n.length!==3||n[0]!=="")throw D0(new Error("invalid name"),"ERR_INVALID_NAME");let s=n[2],o=1/0;i&&(o=z$);let a=await this.resolver(s,o);return Kb(`${e} was locally resolved correctly`),a}async resolver(e,r){if(r===0){let s=`could not resolve name (recursion limit of ${z$} exceeded)`;throw Kb.error(s),D0(new Error(s),"ERR_RESOLVE_RECURSION_LIMIT")}let i=await this._resolveName(e),n=i.split("/");return n[1]==="ipfs"||!r?i:this.resolver(n[2],r-1)}async _resolveName(e){let r=ELe.parse(e),{routingKey:i}=jb.getIdKeys(r.toBytes()),n;try{n=await this._routing.get(i.uint8Array())}catch(o){throw Kb.error("could not get record from routing",o),o.code===ALe?D0(new Error(`record requested for ${e} was not found in the network`),"ERR_NO_RECORD_FOUND"):D0(new Error(`unexpected error getting the ipns record ${r.toString()}`),"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}let s;try{s=jb.unmarshal(n)}catch(o){throw Kb.error("could not unmarshal record",o),D0(new Error("found ipns record that we couldn't convert to a value"),"ERR_INVALID_RECORD_RECEIVED")}return this._validateRecord(r,s)}async _validateRecord(e,r){let i=await jb.extractPublicKey(e,r);return await jb.validate(i,r),SLe(r.value)}};$$=G$.exports=H$});var eG=p((nIt,J$)=>{l();"use strict";var{createFromPrivKey:ILe}=tt(),TLe=xt(),Y$=be(),Py=Object.assign(Y$("ipfs:ipns"),{error:Y$("ipfs:ipns:error")}),aS=q$(),RLe=K$(),PLe=W$(),CLe=J_(),X$=60*1e3,{toString:Q$}=(et(),Je),Z$=class{constructor(e,r,i,n,s){this.publisher=new aS(e,r),this.republisher=new RLe(this.publisher,r,i,n,s),this.resolver=new PLe(e),this.cache=new CLe(1e3),this.routing=e}async publish(e,r,i=aS.defaultRecordLifetime){try{let n=await ILe(e.bytes);await this.publisher.publishWithEOL(e,r,i),Py(`IPNS value ${Q$(r,"base32")} was published correctly`);let s=n.toB58String(),o=parseFloat(i),a=o<X$?o:X$;return this.cache.set(s,r,a),Py(`IPNS value ${Q$(r,"base32")} was cached correctly`),{name:s,value:r}}catch(n){throw Py.error(n),n}}async resolve(e,r={}){if(typeof e!="string")throw TLe(new Error("name received is not valid"),"ERR_INVALID_NAME");if(!r.nocache&&!r.recursive){let i=e.split("/")[2],n=this.cache.get(i);if(n)return n}try{let i=await this.resolver.resolve(e,r);return Py(`IPNS record from ${e} was resolved correctly`),i}catch(i){throw Py.error(i),i}}async initializeKeyspace(e,r){return this.publish(e,r,aS.defaultRecordLifetime)}};J$.exports=Z$});var Cy=p((sIt,rG)=>{l();"use strict";var{Adapter:OLe}=Ut(),zl=Mo(),{pipe:cS}=Ir(),tG=class extends OLe{constructor(e,r){super();this.child=e,this.transform=r}open(){return this.child.open()}put(e,r,i){return this.child.put(this.transform.convert(e),r,i)}get(e,r){return this.child.get(this.transform.convert(e),r)}has(e,r){return this.child.has(this.transform.convert(e),r)}delete(e,r){return this.child.delete(this.transform.convert(e),r)}async*putMany(e,r={}){let i=this.transform,n=this.child;yield*cS(e,async function*(s){yield*zl(s,({key:o,value:a})=>({key:i.convert(o),value:a}))},async function*(s){yield*n.putMany(s,r)},async function*(s){yield*zl(s,({key:o,value:a})=>({key:i.invert(o),value:a}))})}async*getMany(e,r={}){let i=this.transform,n=this.child;yield*cS(e,async function*(s){yield*zl(s,o=>i.convert(o))},async function*(s){yield*n.getMany(s,r)})}async*deleteMany(e,r={}){let i=this.transform,n=this.child;yield*cS(e,async function*(s){yield*zl(s,o=>i.convert(o))},async function*(s){yield*n.deleteMany(s,r)},async function*(s){yield*zl(s,o=>i.invert(o))})}batch(){let e=this.child.batch();return{put:(r,i)=>{e.put(this.transform.convert(r),i)},delete:r=>{e.delete(this.transform.convert(r))},commit:r=>e.commit(r)}}query(e,r){return zl(this.child.query(e,r),({key:i,value:n})=>({key:this.transform.invert(i),value:n}))}queryKeys(e,r){return zl(this.child.queryKeys(e,r),i=>this.transform.invert(i))}close(){return this.child.close()}};rG.exports=tG});var nG=p((oIt,iG)=>{l();"use strict";iG.exports=`This is a repository of IPLD objects. Each IPLD object is in a single file,
named <base32 encoding of cid>.data. Where <base32 encoding of cid> is the
"base32" encoding of the CID (as specified in
https://github.com/multiformats/multibase) without the 'B' prefix.
All the object files are placed in a tree of directories, based on a
function of the CID. This is a form of sharding similar to
the objects directory in git repositories. Previously, we used
prefixes, we now use the next-to-last two charters.
    func NextToLast(base32cid string) {
      nextToLastLen := 2
      offset := len(base32cid) - nextToLastLen - 1
      return str[offset : offset+nextToLastLen]
    }
For example, an object with a base58 CIDv1 of
    zb2rhYSxw4ZjuzgCnWSt19Q94ERaeFhu9uSqRgjSdx9bsgM6f
has a base32 CIDv1 of
    BAFKREIA22FLID5AJ2KU7URG47MDLROZIH6YF2KALU2PWEFPVI37YLKRSCA
and will be placed at
    SC/AFKREIA22FLID5AJ2KU7URG47MDLROZIH6YF2KALU2PWEFPVI37YLKRSCA.data
with 'SC' being the last-to-next two characters and the 'B' at the
beginning of the CIDv1 string is the multibase prefix that is not
stored in the filename.
`});var dS=p((aIt,cG)=>{l();"use strict";var{Key:sG}=Ut(),kLe=nG(),Vb="/repo/flatfs/shard/",oG="SHARDING",qLe="_README",zb=class{constructor(e){this.param=e,this.name="base",this._padding=""}fun(e){return"implement me"}toString(){return`${Vb}v1/${this.name}/${this.param}`}},uS=class extends zb{constructor(e){super(e);this._padding="".padStart(e,"_"),this.name="prefix"}fun(e){return(e+this._padding).slice(0,this.param)}},fS=class extends zb{constructor(e){super(e);this._padding="".padStart(e,"_"),this.name="suffix"}fun(e){let r=this._padding+e;return r.slice(r.length-this.param)}},lS=class extends zb{constructor(e){super(e);this._padding="".padStart(e+1,"_"),this.name="next-to-last"}fun(e){let r=this._padding+e,i=r.length-this.param-1;return r.slice(i,i+this.param)}};function aG(t){if(t=t.trim(),t.length===0)throw new Error("empty shard string");if(!t.startsWith(Vb))throw new Error(`invalid or no path prefix: ${t}`);let e=t.slice(Vb.length).split("/"),r=e[0];if(r!=="v1")throw new Error(`expect 'v1' version, got '${r}'`);let i=e[1];if(!e[2])throw new Error("missing param");let n=parseInt(e[2],10);switch(i){case"prefix":return new uS(n);case"suffix":return new fS(n);case"next-to-last":return new lS(n);default:throw new Error(`unkown sharding function: ${i}`)}}var DLe=async(t,e)=>{let r=new sG(t).child(new sG(oG)),n=await(typeof e.getRaw=="function"?e.getRaw.bind(e):e.get.bind(e))(r);return aG(new TextDecoder().decode(n||"").trim())};cG.exports={readme:kLe,parseShardFun:aG,readShardFun:DLe,Prefix:uS,Suffix:fS,NextToLast:lS,README_FN:qLe,SHARDING_FN:oG,PREFIX:Vb}});var fG=p((cIt,uG)=>{l();"use strict";var{Adapter:NLe,Key:Hb,Errors:BLe}=Ut(),Oy=dS(),MLe=Cy(),N0=new Hb(Oy.SHARDING_FN),ky=new Hb(Oy.README_FN),Hl=class extends NLe{constructor(e,r){super();this.child=new MLe(e,{convert:this._convertKey.bind(this),invert:this._invertKey.bind(this)}),this.shard=r}async open(){await this.child.open(),this.shard=await Hl.create(this.child,this.shard)}_convertKey(e){let r=e.toString();return r===N0.toString()||r===ky.toString()?e:new Hb(this.shard.fun(r)).child(e)}_invertKey(e){let r=e.toString();return r===N0.toString()||r===ky.toString()?e:Hb.withNamespaces(e.list().slice(1))}static async createOrOpen(e,r){try{await Hl.create(e,r)}catch(i){if(i&&i.message!=="datastore exists")throw i}return Hl.open(e)}static async open(e){let r=await Oy.readShardFun("/",e);return new Hl(e,r)}static async create(e,r){let i=await e.has(N0);if(!i&&!r)throw BLe.dbOpenFailedError(Error("Shard is required when datastore doesn't have a shard key already."));if(!i){let a=typeof e.putRaw=="function"?e.putRaw.bind(e):e.put.bind(e);return await Promise.all([a(N0,new TextEncoder().encode(r.toString()+`
`)),a(ky,new TextEncoder().encode(Oy.readme))]),r}let n=await Oy.readShardFun("/",e),s=(n||"").toString(),o=r.toString();if(s!==o)throw new Error(`specified fun ${o} does not match repo shard fun ${s}`);return n}put(e,r,i){return this.child.put(e,r,i)}get(e,r){return this.child.get(e,r)}has(e,r){return this.child.has(e,r)}delete(e,r){return this.child.delete(e,r)}async*putMany(e,r={}){yield*this.child.putMany(e,r)}async*getMany(e,r={}){yield*this.child.getMany(e,r)}async*deleteMany(e,r={}){yield*this.child.deleteMany(e,r)}batch(){return this.child.batch()}query(e,r){let i={offset:e.offset,limit:e.limit,orders:[],filters:[s=>s.key.toString()!==N0.toString(),s=>s.key.toString()!==ky.toString()]},{prefix:n}=e;if(n!=null&&i.filters.push(s=>this._invertKey(s.key).toString().startsWith(n)),e.filters!=null){let s=e.filters.map(o=>({key:c,value:u})=>o({key:this._invertKey(c),value:u}));i.filters=i.filters.concat(s)}return e.orders!=null&&(i.orders=e.orders.map(s=>(a,c)=>s({key:this._invertKey(a.key),value:a.value},{key:this._invertKey(c.key),value:c.value}))),this.child.query(i,r)}queryKeys(e,r){let i={offset:e.offset,limit:e.limit,orders:[],filters:[s=>s.toString()!==N0.toString(),s=>s.toString()!==ky.toString()]},{prefix:n}=e;if(n!=null&&i.filters.push(s=>this._invertKey(s).toString().startsWith(n)),e.filters!=null){let s=e.filters.map(o=>c=>o(this._invertKey(c)));i.filters=i.filters.concat(s)}return e.orders!=null&&(i.orders=e.orders.map(s=>(a,c)=>s(this._invertKey(a),this._invertKey(c)))),this.child.queryKeys(i,r)}close(){return this.child.close()}};uG.exports=Hl});var bG=p((uIt,gG)=>{l();"use strict";var{Adapter:LLe,Key:ULe,Errors:hS,utils:{sortAll:lG,replaceStartWith:pS}}=Ut(),$b=Va(),dG=p0(),hG=x0(),pG=Cy(),yG=class extends LLe{constructor(e){super();this.mounts=e.slice()}async open(){await Promise.all(this.mounts.map(e=>e.datastore.open()))}_lookup(e){for(let r of this.mounts)if(r.prefix.toString()===e.toString()||r.prefix.isAncestorOf(e)){let i=pS(e.toString(),r.prefix.toString());return{datastore:r.datastore,mountpoint:r.prefix,rest:new ULe(i)}}}put(e,r,i){let n=this._lookup(e);if(n==null)throw hS.dbWriteFailedError(new Error("No datastore mounted for this key"));return n.datastore.put(n.rest,r,i)}get(e,r){let i=this._lookup(e);if(i==null)throw hS.notFoundError(new Error("No datastore mounted for this key"));return i.datastore.get(i.rest,r)}has(e,r){let i=this._lookup(e);return i==null?Promise.resolve(!1):i.datastore.has(i.rest,r)}delete(e,r){let i=this._lookup(e);if(i==null)throw hS.dbDeleteFailedError(new Error("No datastore mounted for this key"));return i.datastore.delete(i.rest,r)}async close(){await Promise.all(this.mounts.map(e=>e.datastore.close()))}batch(){let e={},r=i=>{let n=this._lookup(i);if(n==null)throw new Error("No datastore mounted for this key");let s=n.mountpoint.toString();return e[s]==null&&(e[s]=n.datastore.batch()),{batch:e[s],rest:n.rest}};return{put:(i,n)=>{let s=r(i);s.batch.put(s.rest,n)},delete:i=>{let n=r(i);n.batch.delete(n.rest)},commit:async i=>{await Promise.all(Object.keys(e).map(n=>e[n].commit(i)))}}}query(e,r){let i=this.mounts.map(s=>{let o=new pG(s.datastore,{convert:c=>{throw new Error("should never be called")},invert:c=>s.prefix.child(c)}),a;return e.prefix!=null&&(a=pS(e.prefix,s.prefix.toString())),o.query({prefix:a,filters:e.filters},r)}),n=hG(...i);if(e.filters&&e.filters.forEach(s=>{n=$b(n,s)}),e.orders&&e.orders.forEach(s=>{n=lG(n,s)}),e.offset!=null){let s=0;n=$b(n,()=>s++>=e.offset)}return e.limit!=null&&(n=dG(n,e.limit)),n}queryKeys(e,r){let i=this.mounts.map(s=>{let o=new pG(s.datastore,{convert:c=>{throw new Error("should never be called")},invert:c=>s.prefix.child(c)}),a;return e.prefix!=null&&(a=pS(e.prefix,s.prefix.toString())),o.queryKeys({prefix:a,filters:e.filters},r)}),n=hG(...i);if(e.filters&&e.filters.forEach(s=>{n=$b(n,s)}),e.orders&&e.orders.forEach(s=>{n=lG(n,s)}),e.offset!=null){let s=0;n=$b(n,()=>s++>=e.offset)}return e.limit!=null&&(n=dG(n,e.limit)),n}};gG.exports=yG});var EG=p((fIt,_G)=>{l();"use strict";var{Adapter:FLe,Errors:Gb}=Ut(),jLe=be()("datastore:core:tiered"),mG=Ha(),vG=Ka(),wG=class extends FLe{constructor(e){super();this.stores=e.slice()}async open(){try{await Promise.all(this.stores.map(e=>e.open()))}catch(e){throw Gb.dbOpenFailedError()}}async put(e,r){try{await Promise.all(this.stores.map(i=>i.put(e,r)))}catch(i){throw Gb.dbWriteFailedError()}}async get(e,r){for(let i of this.stores)try{let n=await i.get(e,r);if(n)return n}catch(n){jLe(n)}throw Gb.notFoundError()}async has(e,r){for(let i of this.stores)if(await i.has(e,r))return!0;return!1}async delete(e,r){try{await Promise.all(this.stores.map(i=>i.delete(e,r)))}catch(i){throw Gb.dbDeleteFailedError()}}async*putMany(e,r={}){let i,n=this.stores.map(s=>{let o=mG();return vG(s.putMany(o,r)).catch(a=>{i=a}),o});try{for await(let s of e){if(i)throw i;n.forEach(o=>o.push(s)),yield s}}finally{n.forEach(s=>s.end())}}async*deleteMany(e,r={}){let i,n=this.stores.map(s=>{let o=mG();return vG(s.deleteMany(o,r)).catch(a=>{i=a}),o});try{for await(let s of e){if(i)throw i;n.forEach(o=>o.push(s)),yield s}}finally{n.forEach(s=>s.end())}}async close(){await Promise.all(this.stores.map(e=>e.close()))}batch(){let e=this.stores.map(r=>r.batch());return{put:(r,i)=>{e.forEach(n=>n.put(r,i))},delete:r=>{e.forEach(i=>i.delete(r))},commit:async r=>{for(let i of e)await i.commit(r)}}}query(e,r){return this.stores[this.stores.length-1].query(e,r)}queryKeys(e,r){return this.stores[this.stores.length-1].queryKeys(e,r)}};_G.exports=wG});var AG=p((lIt,xG)=>{l();"use strict";var yS=Ut().Key,KLe=Cy(),SG=class extends KLe{constructor(e,r){super(e,{convert(i){return r.child(i)},invert(i){if(r.toString()==="/")return i;if(!r.isAncestorOf(i))throw new Error(`Expected prefix: (${r.toString()}) in key: ${i.toString()}`);return new yS(i.toString().slice(r.toString().length),!1)}});this.prefix=r}query(e,r){return e.prefix&&this.prefix.toString()!=="/"?super.query(Object.assign({},e,{prefix:this.prefix.child(new yS(e.prefix)).toString()})):super.query(e,r)}queryKeys(e,r){return e.prefix&&this.prefix.toString()!=="/"?super.queryKeys(Object.assign({},e,{prefix:this.prefix.child(new yS(e.prefix)).toString()})):super.queryKeys(e,r)}};xG.exports=SG});var TG=p((dIt,IG)=>{l();"use strict";var VLe=Cy(),zLe=fG(),HLe=bG(),$Le=EG(),GLe=AG(),WLe=dS();IG.exports={KeytransformDatastore:VLe,ShardingDatastore:zLe,MountDatastore:HLe,TieredDatastore:$Le,NamespaceDatastore:GLe,shard:WLe}});var qy=p((gS,bS)=>{l();(function(t,e){typeof gS=="object"&&typeof bS!="undefined"?bS.exports=function(r,i,n,s,o){for(i=i.split?i.split("."):i,s=0;s<i.length;s++)r=r?r[i[s]]:o;return r===o?n:r}:typeof define=="function"&&define.amd?define(function(){return function(r,i,n,s,o){for(i=i.split?i.split("."):i,s=0;s<i.length;s++)r=r?r[i[s]]:o;return r===o?n:r}}):t.dlv=function(r,i,n,s,o){for(i=i.split?i.split("."):i,s=0;s<i.length;s++)r=r?r[i[s]]:o;return r===o?n:r}})(gS)});var mS=p((hIt,PG)=>{l();"use strict";function RG(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function YLe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return RG(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),RG(new n,r)}}PG.exports=YLe});var qG=p((pIt,kG)=>{l();"use strict";var XLe=mS(),{toString:CG}=(et(),Je),{fromString:OG}=(ut(),lt),Wb="/record/";function QLe(t){return CG(t,"base32")}function ZLe(t){(typeof t=="string"||t instanceof String)&&(t=OG(t.toString()));let e=CG(t,"base64url");return`${Wb}${e}`}function JLe(t){if(t.substring(0,Wb.length)!==Wb)throw XLe(new Error("topic received is not from a record"),"ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE");let e=t.substring(Wb.length);return OG(e,"base64url")}kG.exports={encodeBase32:QLe,keyToTopic:ZLe,topicToKey:JLe}});var UG=p((MG,LG)=>{l();"use strict";var{Key:vS,Adapter:eUe}=Ut(),{encodeBase32:DG,keyToTopic:Yb,topicToKey:tUe}=qG(),{equals:rUe}=(di(),li),$s=mS(),NG=be(),gn=Object.assign(NG("datastore-pubsub:publisher"),{error:NG("datastore-pubsub:publisher:error")}),BG=class extends eUe{constructor(e,r,i,n,s){super();if(!n)throw $s(new TypeError("missing validator"),"ERR_INVALID_PARAMETERS");if(typeof n.validate!="function")throw $s(new TypeError("missing validate function"),"ERR_INVALID_PARAMETERS");if(typeof n.select!="function")throw $s(new TypeError("missing select function"),"ERR_INVALID_PARAMETERS");if(s&&typeof s!="function")throw $s(new TypeError("invalid subscriptionKeyFn received"),"ERR_INVALID_PARAMETERS");this._pubsub=e,this._datastore=r,this._peerId=i,this._validator=n,this._handleSubscriptionKeyFn=s,this._onMessage=this._onMessage.bind(this)}async put(e,r){if(!(e instanceof Uint8Array)){let n="datastore key does not have a valid format";throw gn.error(n),$s(new Error(n),"ERR_INVALID_DATASTORE_KEY")}if(!(r instanceof Uint8Array)){let n="received value is not a Uint8Array";throw gn.error(n),$s(new Error(n),"ERR_INVALID_VALUE_RECEIVED")}let i=Yb(e);gn(`publish value for topic ${i}`),await this._pubsub.publish(i,r)}async get(e){if(!(e instanceof Uint8Array)){let n="datastore key does not have a valid format";throw gn.error(n),$s(new Error(n),"ERR_INVALID_DATASTORE_KEY")}let r=Yb(e),i=await this._pubsub.getTopics();if(i&&Array.isArray(i)&&i.indexOf(r)>-1)return this._getLocal(e);try{this._pubsub.on(r,this._onMessage),await this._pubsub.subscribe(r)}catch(n){let s=`cannot subscribe topic ${r}`;throw gn.error(s),$s(new Error(s),"ERR_SUBSCRIBING_TOPIC")}return gn(`subscribed values for key ${r}`),this._getLocal(e)}unsubscribe(e){let r=Yb(e);return this._pubsub.removeListener(r,this._onMessage),this._pubsub.unsubscribe(r)}async _getLocal(e){let r=new vS("/"+DG(e),!1),i;try{i=await this._datastore.get(r)}catch(n){if(n.code!=="ERR_NOT_FOUND"){let o=`unexpected error getting the ipns record for ${r.toString()}`;throw gn.error(o),$s(new Error(o),"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}let s=`local record requested was not found for ${r.toString()}`;throw gn.error(s),$s(new Error(s),"ERR_NOT_FOUND")}if(!(i instanceof Uint8Array)){let n="found record that we couldn't convert to a value";throw gn.error(n),$s(new Error(n),"ERR_INVALID_RECORD_RECEIVED")}return i}async _onMessage(e){let{data:r,from:i,topicIDs:n}=e,s;try{s=tUe(n[0])}catch(o){gn.error(o);return}if(gn(`message received for topic ${n[0]}`),i===this._peerId.toB58String()){gn("message discarded as it is from the same peer");return}if(this._handleSubscriptionKeyFn){let o;try{o=await this._handleSubscriptionKeyFn(s)}catch(a){gn.error("message discarded by the subscriptionKeyFn");return}s=o}try{await this._storeIfSubscriptionIsBetter(s,r)}catch(o){gn.error(o)}}async _storeIfSubscriptionIsBetter(e,r){let i=!1;try{i=await this._isBetter(e,r)}catch(n){if(n.code!=="ERR_NOT_VALID_RECORD")throw n}i&&await this._storeRecord(e,r)}async _validateRecord(e,r){return this._validator.validate(e,r)}async _selectRecord(e,r){return await this._validator.select(e,r)===0}async _isBetter(e,r){try{await this._validateRecord(r,e)}catch(s){let o="record received through pubsub is not valid";throw gn.error(o),$s(new Error(o),"ERR_NOT_VALID_RECORD")}let i=new vS(e),n;try{n=await this._getLocal(i.uint8Array())}catch(s){return!0}return rUe(n,r)?!1:this._selectRecord(e,[n,r])}async _storeRecord(e,r){let i=new vS("/"+DG(e),!1);await this._datastore.put(i,r),gn(`record for ${Yb(e)} was stored in the datastore`)}};MG=LG.exports=BG});var _S=p((yIt,$G)=>{l();"use strict";var pf=q0(),{base58btc:FG}=(ti(),ei),iUe=UG(),{fromString:jG}=(ut(),lt),{toString:KG}=(et(),Je),VG=xt(),zG=be(),wS=Object.assign(zG("ipfs:ipns:pubsub"),{error:zG("ipfs:ipns:pubsub:error")}),HG=class{constructor(e,r,i){this._subscriptions={},this._handleSubscriptionKey=this._handleSubscriptionKey.bind(this),this._pubsubDs=new iUe(e,r,i,pf.validator,this._handleSubscriptionKey)}put(e,r){return this._pubsubDs.put(e,r)}async get(e){let r,i;try{r=await this._pubsubDs.get(e)}catch(s){i=s}let n=e.slice(0,pf.namespaceLength);if(KG(n)===pf.namespace){let s=FG.encode(e).substring(1),o=FG.encode(e.slice(pf.namespaceLength)).substring(1);this._subscriptions[s]=o,wS(`subscribed to pubsub topic ${s}, id ${o}`)}if(i)throw i;return r}_handleSubscriptionKey(e){e instanceof Uint8Array&&(e=KG(e,"base58btc"));let r=this._subscriptions[e];if(!r)throw VG(new Error(`key ${e} does not correspond to a subscription`),"ERR_INVALID_KEY");let i;try{i=pf.getIdKeys(jG(r,"base58btc"))}catch(n){throw wS.error(n),n}return i.routingKey.uint8Array()}getSubscriptions(){return Object.values(this._subscriptions).filter(Boolean).map(r=>`${pf.namespace}${r}`)}async cancel(e){if(typeof e!="string")throw VG(new Error("invalid subscription name"),"ERR_INVALID_SUBSCRIPTION_NAME");e.startsWith(pf.namespace)&&(e=e.substring(pf.namespaceLength));let r=Object.keys(this._subscriptions).find(n=>this._subscriptions[n]===e);if(!r)return{canceled:!1};let i=jG(r);return this._pubsubDs.unsubscribe(i),delete this._subscriptions[r],wS(`unsubscribed pubsub ${r}: ${e}`),{canceled:!0}}};$G.exports=HG});var YG=p((gIt,WG)=>{l();"use strict";var B0=qi(),GG=B0.Reader,nUe=B0.Writer,Gs=B0.util,Dy=B0.roots["libp2p-record"]||(B0.roots["libp2p-record"]={});Dy.Record=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.key=Gs.newBuffer([]),t.prototype.value=Gs.newBuffer([]),t.prototype.timeReceived="",t.encode=function(r,i){return i||(i=nUe.create()),r.key!=null&&Object.hasOwnProperty.call(r,"key")&&i.uint32(10).bytes(r.key),r.value!=null&&Object.hasOwnProperty.call(r,"value")&&i.uint32(18).bytes(r.value),r.timeReceived!=null&&Object.hasOwnProperty.call(r,"timeReceived")&&i.uint32(42).string(r.timeReceived),i},t.decode=function(r,i){r instanceof GG||(r=GG.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Dy.Record;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.key=r.bytes();break;case 2:s.value=r.bytes();break;case 5:s.timeReceived=r.string();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof Dy.Record)return r;var i=new Dy.Record;return r.key!=null&&(typeof r.key=="string"?Gs.base64.decode(r.key,i.key=Gs.newBuffer(Gs.base64.length(r.key)),0):r.key.length&&(i.key=r.key)),r.value!=null&&(typeof r.value=="string"?Gs.base64.decode(r.value,i.value=Gs.newBuffer(Gs.base64.length(r.value)),0):r.value.length&&(i.value=r.value)),r.timeReceived!=null&&(i.timeReceived=String(r.timeReceived)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(i.bytes===String?n.key="":(n.key=[],i.bytes!==Array&&(n.key=Gs.newBuffer(n.key))),i.bytes===String?n.value="":(n.value=[],i.bytes!==Array&&(n.value=Gs.newBuffer(n.value))),n.timeReceived=""),r.key!=null&&r.hasOwnProperty("key")&&(n.key=i.bytes===String?Gs.base64.encode(r.key,0,r.key.length):i.bytes===Array?Array.prototype.slice.call(r.key):r.key),r.value!=null&&r.hasOwnProperty("value")&&(n.value=i.bytes===String?Gs.base64.encode(r.value,0,r.value.length):i.bytes===Array?Array.prototype.slice.call(r.value):r.value),r.timeReceived!=null&&r.hasOwnProperty("timeReceived")&&(n.timeReceived=r.timeReceived),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,B0.util.toJSONOptions)},t}();WG.exports=Dy});var XG=p((bIt,ES)=>{l();"use strict";ES.exports.toRFC3339=t=>{let e=t.getUTCFullYear(),r=String(t.getUTCMonth()+1).padStart(2,"0"),i=String(t.getUTCDate()).padStart(2,"0"),n=String(t.getUTCHours()).padStart(2,"0"),s=String(t.getUTCMinutes()).padStart(2,"0"),o=String(t.getUTCSeconds()).padStart(2,"0"),c=t.getUTCMilliseconds()*1e3*1e3;return`${e}-${r}-${i}T${n}:${s}:${o}.${c}Z`};ES.exports.parseRFC3339=t=>{let e=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(t).trim().match(e);if(!r)throw new Error("Invalid format");let i=parseInt(r[1],10),n=parseInt(r[2],10)-1,s=parseInt(r[3],10),o=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),u=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(i,n,s,o,a,c,u))}});var JG=p((mIt,ZG)=>{l();"use strict";var{Record:SS}=YG(),QG=XG(),Ny=class{constructor(e,r,i){if(!(e instanceof Uint8Array))throw new Error("key must be a Uint8Array");if(!(r instanceof Uint8Array))throw new Error("value must be a Uint8Array");this.key=e,this.value=r,this.timeReceived=i}serialize(){return SS.encode(this.prepareSerialize()).finish()}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:this.timeReceived&&QG.toRFC3339(this.timeReceived)}}static deserialize(e){let r=SS.decode(e);return Ny.fromDeserialized(SS.toObject(r,{defaults:!1,arrays:!0,longs:Number,objects:!1}))}static fromDeserialized(e){let r;return e.timeReceived&&(r=QG.parseRFC3339(e.timeReceived)),new Ny(e.key,e.value,r)}};ZG.exports=Ny});var Xb=p((vIt,tW)=>{l();"use strict";function eW(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function sUe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return eW(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),eW(new n,r)}}tW.exports=sUe});var iW=p((wIt,rW)=>{l();"use strict";var{sha256:oUe}=(ii(),fi),Qb=Xb(),{toString:aUe}=(et(),Je),{equals:cUe}=(di(),li),uUe=async(t,e)=>{if(!(t instanceof Uint8Array))throw Qb(new Error('"key" must be a Uint8Array'),"ERR_INVALID_RECORD_KEY_NOT_BUFFER");if(t.byteLength<5)throw Qb(new Error("invalid public key record"),"ERR_INVALID_RECORD_KEY_TOO_SHORT");if(aUe(t.subarray(0,4))!=="/pk/")throw Qb(new Error("key was not prefixed with /pk/"),"ERR_INVALID_RECORD_KEY_BAD_PREFIX");let i=t.slice(4),n=await oUe.digest(e);if(!cUe(i,n.bytes))throw Qb(new Error("public key does not match passed in key"),"ERR_INVALID_RECORD_HASH_MISMATCH")};rW.exports={func:uUe,sign:!1}});var sW=p((_It,nW)=>{l();"use strict";nW.exports={pk:iW()}});var aW=p((EIt,oW)=>{l();"use strict";var fUe=Xb(),{toString:lUe}=(et(),Je),dUe=(t,e)=>{let r=e.key,n=lUe(r).split("/");if(n.length<3)return;let s=t[n[1].toString()];if(!s){let o="Invalid record keytype";throw fUe(new Error(o),"ERR_INVALID_RECORD_KEY_TYPE")}return s.func(r,e.value)};oW.exports={verifyRecord:dUe,validators:sW()}});var uW=p((SIt,cW)=>{l();"use strict";var hUe=(t,e)=>0;cW.exports=hUe});var lW=p((xIt,fW)=>{l();"use strict";fW.exports={pk:uW()}});var hW=p((AIt,dW)=>{l();"use strict";var xS=Xb(),{toString:pUe}=(et(),Je),yUe=(t,e,r)=>{if(r.length===0){let o="No records given";throw xS(new Error(o),"ERR_NO_RECORDS_RECEIVED")}let n=pUe(e).split("/");if(n.length<3){let o="Record key does not have a selector function";throw xS(new Error(o),"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")}let s=t[n[1].toString()];if(!s){let o=`Unrecognized key prefix: ${n[1]}`;throw xS(new Error(o),"ERR_UNRECOGNIZED_KEY_PREFIX")}return s(e,r)};dW.exports={bestRecord:yUe,selectors:lW()}});var $l=p((IIt,pW)=>{l();"use strict";pW.exports={Record:JG(),validator:aW(),selection:hW()}});var AS=p((TIt,gW)=>{l();"use strict";var yW=q0(),{toString:gUe}=(et(),Je);gW.exports={encodeBase32:t=>gUe(t,"base32upper"),validator:{func:(t,e)=>yW.validator.validate(e,t)},selector:(t,e)=>yW.validator.select(e[0],e[1])}});var TS=p((wW,_W)=>{l();"use strict";var{Key:bUe}=Ut(),{Record:bW}=$l(),{encodeBase32:mUe}=AS(),By=xt(),mW=be(),IS=Object.assign(mW("ipfs:ipns:offline-datastore"),{error:mW("ipfs:ipns:offline-datastore:error")}),vW=class{constructor(e){this._repo=e,this.stores=[]}async put(e,r){if(!(e instanceof Uint8Array))throw By(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");if(!(r instanceof Uint8Array))throw By(new Error("Offline datastore value must be a Uint8Array"),"ERR_INVALID_VALUE");let i;try{i=this._routingKey(e)}catch(s){throw IS.error(s),By(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}let n=new bW(e,r);return this._repo.datastore.put(i,n.serialize())}async get(e){if(!(e instanceof Uint8Array))throw By(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");let r;try{r=this._routingKey(e)}catch(s){throw IS.error(s),By(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}let i=await this._repo.datastore.get(r),n;try{n=bW.deserialize(i)}catch(s){throw IS.error(s),s}return n.value}_routingKey(e){return new bUe("/"+mUe(e),!1)}};wW=_W.exports=vW});var SW=p((RIt,EW)=>{l();"use strict";var{TieredDatastore:vUe}=TG(),RS=qy(),wUe=_S(),_Ue=TS();EW.exports=({libp2p:t,repo:e,peerId:r,options:i})=>{let n=[],s;if(RS(i,"EXPERIMENTAL.ipnsPubsub",!1)){let o=t.pubsub,a=e.datastore;s=new wUe(o,a,r),n.push(s)}if(RS(i,"offline")||!RS(i,"libp2p.config.dht.enabled",!1)){let o=new _Ue(e);n.push(o)}else n.push(t._dht);return new vUe(n)}});var RW=p((PIt,TW)=>{l();"use strict";var xW=eG(),EUe=SW(),SUe=TS(),{NotInitializedError:xUe,AlreadyInitializedError:AW}=af(),AUe=be()("ipfs:components:ipns"),IW=class{constructor(e={pass:""}){this.options=e,this.offline=null,this.online=null}getIPNS(){let e=this.online||this.offline;if(e)return e;throw new xUe}get routing(){return this.getIPNS().routing}startOffline({repo:e,peerId:r,keychain:i}){if(this.offline!=null)throw new AW;AUe("initializing IPNS keyspace");let n=new SUe(e),s=new xW(n,e.datastore,r,i,this.options);this.offline=s}async startOnline({libp2p:e,repo:r,peerId:i,keychain:n}){if(this.online!=null)throw new AW;let s=EUe({libp2p:e,repo:r,peerId:i,options:this.options}),o=new xW(s,r.datastore,i,n,this.options);await o.republisher.start(),this.online=o}async stop(){let e=this.online;e&&(await e.republisher.stop(),this.online=null)}publish(e,r,i){return this.getIPNS().publish(e,r,i)}resolve(e,r){return this.getIPNS().resolve(e,r)}initializeKeyspace(e,r){return this.getIPNS().initializeKeyspace(e,r)}};TW.exports=IW});var CW=p(PW=>{l();"use strict";var IUe=t0(),TUe=dy(),RUe=Ka(),{resolve:PUe}=Ki();PW.resolvePath=async({ipns:t,repo:e,codecs:r},i,n)=>{if(IUe.ipnsPath(i))return t.resolve(i);let{cid:s,path:o}=TUe(i);await RUe(PUe(s,o||"",r,e,n))}});var DW=p((OIt,qW)=>{l();"use strict";var OW=be(),{default:CUe}=fy(),OUe=La(),kW=xt(),{fromString:kUe}=(ut(),lt),{toString:qUe}=(et(),Je),PS=Object.assign(OW("ipfs:name:publish"),{error:OW("ipfs:name:publish:error")}),{OFFLINE_ERROR:DUe,normalizePath:NUe}=Ki(),BUe=ke(),{resolvePath:MUe}=CW();qW.exports=({ipns:t,repo:e,codecs:r,peerId:i,isOnline:n,keychain:s})=>{let o=async c=>{if(c==="self")return i.privKey;try{let u=await s.exportKey(c,"temp");return await OUe.keys.import(u,"temp")}catch(u){throw PS.error(u),kW(u,"ERR_CANNOT_GET_KEY")}};async function a(c,u={}){let f=u.resolve!==!1,d=u.lifetime||"24h",h=u.key||"self";if(!n())throw kW(new Error(DUe),"OFFLINE_ERROR");try{c=NUe(c)}catch(v){throw PS.error(v),v}let y=0;try{y=CUe(d)||0,y=parseFloat(y.toFixed(6))}catch(v){throw PS.error(v),v}let g=await Promise.all([o(h),f?MUe({ipns:t,repo:e,codecs:r},c):Promise.resolve()]),m=kUe(c),E=await t.publish(g[0],m,y);return{name:E.name,value:qUe(E.value)}}return BUe(a)}});var BW=p((kIt,NW)=>{l();"use strict";var LUe=/^(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9])?\.){0,126}(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9]))\.?$/i;NW.exports=function(e,r){if(r==null&&(r=!1),e.length<2||e.length>255)return!1;var i=e[e.length-1];if(r){if(i!==".")return!1}else if(i===".")return!1;return LUe.test(e)}});var FW=p((qIt,UW)=>{l();"use strict";var MW=be(),CS=xt(),UUe=br().bind({ignoreUndefined:!0}),{CID:FUe}=(Ae(),De),jUe=tt(),KUe=BW(),{toString:VUe}=(et(),Je),zUe=Object.assign(MW("ipfs:name:resolve"),{error:MW("ipfs:name:resolve:error")}),{OFFLINE_ERROR:HUe}=Ki(),$Ue=ke(),LW=(t,e)=>e.length>0?t+"/"+e.join("/"):t;UW.exports=({dns:t,ipns:e,peerId:r,isOnline:i,options:{offline:n}})=>{async function*s(o,a={}){if(a=UUe({nocache:!1,recursive:!0},a),n&&a&&a.nocache)throw CS(new Error("cannot specify both offline and nocache"),"ERR_NOCACHE_AND_OFFLINE");o||(o=r.toB58String()),o.startsWith("/ipns/")||(o=`/ipns/${o}`);let[c,u,...f]=o.slice(1).split("/");try{u.substring(0,1)==="1"?jUe.parse(u):FUe.parse(u)}catch(h){if(KUe(u)){yield LW(await t(u,a),f);return}throw zUe.error(h),CS(new Error("Invalid IPNS name"),"ERR_IPNS_INVALID_NAME")}if(!i()&&!n)throw CS(new Error(HUe),"OFFLINE_ERROR");let d=await e.resolve(`/${c}/${u}`,a);yield LW(d instanceof Uint8Array?VUe(d):d,f)}return $Ue(s)}});var Zb=p(VW=>{l();"use strict";var jW=_S(),KW=xt();VW.getPubsubRouting=(t,e)=>{if(!t||!(e&&e.ipnsPubsub))throw KW(new Error("IPNS pubsub subsystem is not enabled"),"ERR_IPNS_PUBSUB_NOT_ENABLED");if(t.routing instanceof jW)return t.routing;let r=(t.routing.stores||[]).find(i=>i instanceof jW);if(!r)throw KW(new Error("IPNS pubsub datastore not found"),"ERR_PUBSUB_DATASTORE_NOT_FOUND");return r}});var HW=p((NIt,zW)=>{l();"use strict";var{getPubsubRouting:GUe}=Zb(),WUe=ke();zW.exports=({ipns:t,options:e})=>{let r=e.EXPERIMENTAL;async function i(n,s={}){return GUe(t,r).cancel(n,s)}return WUe(i)}});var GW=p((BIt,$W)=>{l();"use strict";var{getPubsubRouting:YUe}=Zb(),XUe=ke();$W.exports=({ipns:t,options:e})=>{let r=e.EXPERIMENTAL;async function i(n={}){try{return{enabled:Boolean(YUe(t,r))}}catch(s){return{enabled:!1}}}return XUe(i)}});var YW=p((MIt,WW)=>{l();"use strict";var{getPubsubRouting:QUe}=Zb(),ZUe=ke();WW.exports=({ipns:t,options:e})=>{let r=e.EXPERIMENTAL;async function i(n={}){return QUe(t,r).getSubscriptions(n)}return ZUe(i)}});var ZW=p((LIt,QW)=>{l();"use strict";var JUe=HW(),eFe=GW(),tFe=YW(),XW=class{constructor({ipns:e,options:r}){this.cancel=JUe({ipns:e,options:r}),this.state=eFe({ipns:e,options:r}),this.subs=tFe({ipns:e,options:r})}};QW.exports=XW});var tY=p((UIt,eY)=>{l();"use strict";var rFe=DW(),iFe=FW(),nFe=ZW(),JW=class{constructor({dns:e,ipns:r,repo:i,codecs:n,peerId:s,isOnline:o,keychain:a,options:c}){this.publish=rFe({ipns:r,repo:i,codecs:n,peerId:s,isOnline:o,keychain:a}),this.resolve=iFe({dns:e,ipns:r,peerId:s,isOnline:o,options:c}),this.pubsub=new nFe({ipns:r,options:c})}};eY.exports=JW});var nY=p((FIt,kS)=>{l();"use strict";var sFe=(wt(),Mt),{Errors:oFe}=Ut(),aFe=oFe.notFoundError().code,rY=dy(),{CID:iY}=(Ae(),De),cFe=ub(),{anySignal:uFe}=ku(),Jb={default:"<dst>",edges:"<src> -> <dst>"};kS.exports=function({repo:t,codecs:e,resolve:r,preload:i}){async function*n(s,o={}){if(o.maxDepth===0)return;if(o.edges&&o.format&&o.format!==Jb.default)throw new Error("Cannot set edges to true and also specify format");if(o.format=o.edges?Jb.edges:o.format,typeof o.maxDepth!="number"&&(o.maxDepth=o.recursive?1/0:1),o.timeout){let u=new cFe(o.timeout);o.signal=uFe([o.signal,u.signal])}let c=(Array.isArray(s)?s:[s]).map(u=>fFe(i,u,o));for(let u of c)try{yield*lFe(r,t,e,u,o)}catch(f){yield{ref:"",err:f.message}}}return n};kS.exports.Format=Jb;function fFe(t,e,r){let{cid:i,path:n}=rY(e);return r.preload!==!1&&t(i),`/ipfs/${i}${n||""}`}async function*lFe(t,e,r,i,n){let s=await t(i,n),{cid:o}=rY(s),a=n.maxDepth!=null?n.maxDepth:1/0,c=n.unique||!1;for await(let u of hFe(e,r,o,a,c,n))!u.parent||u.isDuplicate||(yield{ref:dFe(u.parent.cid,u.node.cid,u.node.name,n.format)})}function dFe(t,e,r="",i=Jb.default){let n=i.replace(/<src>/g,t.toString());return n=n.replace(/<dst>/g,e.toString()),n=n.replace(/<linkname>/g,r),n}async function*hFe(t,e,r,i,n,s){let o=new Set;async function*a(c,u){let f=u+1;if(!(f>i))try{for await(let d of pFe(t,e,c.cid,s))yield{parent:c,node:d,isDuplicate:n&&o.has(d.cid.toString())},n&&o.add(d.cid.toString()),yield*a(d,f)}catch(d){throw d.code===aFe&&(d.message=`Could not find object with CID: ${c.cid}`),d}}yield*a({cid:r},0)}async function*pFe(t,e,r,i){let n=await t.blocks.get(r,i),o=(await e.getCodec(r.code)).decode(n),a=r.code===sFe.code,c=[];for(let[u,f]of OS(o,c)){if(a){let d=u.match(/^Links\/(\d+)\/Hash$/);if(d){let h=Number(d[1]);if(h<o.Links.length){yield{name:o.Links[h].Name,cid:f};continue}}}yield{name:u,cid:f}}}var OS=function*(t,e){if(t!=null&&!(t instanceof Uint8Array)){for(let[r,i]of Object.entries(t)){let n=[...e,r];if(i!=null&&typeof i=="object")if(Array.isArray(i))for(let[s,o]of i.entries()){let a=[...n,s],c=iY.asCID(o);c?yield[a.join("/"),c]:typeof o=="object"&&(yield*OS(o,a))}else{let s=iY.asCID(i);s?yield[n.join("/"),s]:yield*OS(i,n)}}return[]}}});var oY=p((jIt,sY)=>{l();"use strict";var yFe=ke();sY.exports=function({repo:t}){async function*e(r={}){for await(let i of t.blocks.queryKeys({},{signal:r.signal}))yield{ref:i.toString()}}return yFe(e)}});var cY=p((KIt,aY)=>{l();"use strict";var gFe=ke();aY.exports=({network:t})=>{async function e(r={}){let{bitswap:i}=await t.use(r),n=i.getWantlist();return Array.from(n).map(s=>s[1].cid)}return gFe(e)}});var fY=p((VIt,uY)=>{l();"use strict";var bFe=tt(),mFe=ke();uY.exports=({network:t})=>{async function e(r,i={}){let{bitswap:n}=await t.use(i),s=n.wantlistForPeer(bFe.createFromB58String(r));return Array.from(s).map(o=>o[1].cid)}return mFe(e)}});var dY=p((zIt,lY)=>{l();"use strict";var vFe=ke();lY.exports=({network:t})=>{async function e(r,i={}){let{bitswap:n}=await t.use(i);return Array.isArray(r)||(r=[r]),n.unwant(r)}return vFe(e)}});var qS=p((HIt,hY)=>{l();"use strict";var wFe=ke();hY.exports=({network:t})=>{async function e(r={}){let i=(await t.use(r)).bitswap,n=i.stat().snapshot;return{provideBufLen:parseInt(n.providesBufferLength.toString()),blocksReceived:BigInt(n.blocksReceived.toString()),wantlist:Array.from(i.getWantlist()).map(s=>s[1].cid),peers:i.peers().map(s=>s.toB58String()),dupBlksReceived:BigInt(n.dupBlksReceived.toString()),dupDataReceived:BigInt(n.dupDataReceived.toString()),dataReceived:BigInt(n.dataReceived.toString()),blocksSent:BigInt(n.blocksSent.toString()),dataSent:BigInt(n.dataSent.toString())}}return wFe(e)}});var gY=p(($It,yY)=>{l();"use strict";var _Fe=cY(),EFe=fY(),SFe=dY(),xFe=qS(),pY=class{constructor({network:e}){this.wantlist=_Fe({network:e}),this.wantlistForPeer=EFe({network:e}),this.unwant=SFe({network:e}),this.stat=xFe({network:e})}};yY.exports=pY});var DS=p(bY=>{l();"use strict";var AFe=Cl().IPFS.matches;bY.isValidMultiaddr=t=>{try{return AFe(t)}catch(e){return!1}}});var vY=p((WIt,mY)=>{l();"use strict";var{isValidMultiaddr:IFe}=DS(),TFe=ke();mY.exports=({repo:t})=>{async function e(r,i={}){if(!IFe(r))throw new Error(`${r} is not a valid Multiaddr`);let n=await t.config.getAll(i),s=n.Bootstrap||[];return s.push(r.toString()),n.Bootstrap=Array.from(new Set(s)).sort((o,a)=>o.localeCompare(a)),await t.config.replace(n),{Peers:[r]}}return TFe(e)}});var _Y=p((YIt,wY)=>{l();"use strict";var RFe=ke(),{Multiaddr:PFe}=rt();wY.exports=({repo:t})=>{async function e(r={}){let i=await t.config.getAll(r),n=i.Bootstrap||[];return i.Bootstrap=[],await t.config.replace(i),{Peers:n.map(s=>new PFe(s))}}return RFe(e)}});var SY=p((XIt,EY)=>{l();"use strict";var CFe=ke(),{Multiaddr:OFe}=rt();EY.exports=({repo:t})=>{async function e(r={}){return{Peers:(await t.config.get("Bootstrap",r)||[]).map(n=>new OFe(n))}}return CFe(e)}});var e5=p((QIt,xY)=>{l();"use strict";xY.exports=()=>({Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:200,HighWater:500},DisableNatPortMap:!0},Routing:{Type:"none"}})});var TY=p((ZIt,IY)=>{l();"use strict";var AY=e5(),kFe=ke(),{Multiaddr:qFe}=rt();IY.exports=({repo:t})=>{async function e(r={}){let i=await t.config.getAll(r);return i.Bootstrap=AY().Bootstrap,await t.config.replace(i),{Peers:AY().Bootstrap.map(n=>new qFe(n))}}return kFe(e)}});var PY=p((JIt,RY)=>{l();"use strict";var{isValidMultiaddr:DFe}=DS(),NFe=ke();RY.exports=({repo:t})=>{async function e(r,i={}){if(!DFe(r))throw new Error(`${r} is not a valid Multiaddr`);let n=await t.config.getAll(i);return n.Bootstrap=(n.Bootstrap||[]).filter(s=>s.toString()!==r.toString()),await t.config.replace(n),{Peers:[r]}}return NFe(e)}});var kY=p((eTt,OY)=>{l();"use strict";var BFe=vY(),MFe=_Y(),LFe=SY(),UFe=TY(),FFe=PY(),CY=class{constructor({repo:e}){this.add=BFe({repo:e}),this.list=LFe({repo:e}),this.rm=FFe({repo:e}),this.clear=MFe({repo:e}),this.reset=UFe({repo:e})}};OY.exports=CY});var DY=p((tTt,qY)=>{l();"use strict";var jFe=ke();qY.exports=({preload:t,repo:e})=>{async function r(i,n={}){return n.preload!==!1&&t(i),e.blocks.get(i,n)}return jFe(r)}});var BY=p((rTt,NY)=>{l();"use strict";var{CID:KFe}=(Ae(),De),VFe=ke();NY.exports=({codecs:t,hashers:e,repo:r,preload:i})=>{async function n(s,o={}){let a=o.pin?await r.gcLock.readLock():null;try{let c=o.version!=null?o.version:0,u=o.format||(c===0?"dag-pb":"raw"),d=await(await e.getHasher(o.mhtype||"sha2-256")).digest(s),h=await t.getCodec(u),y=KFe.create(c,h.code,d);return await r.blocks.put(y,s,{signal:o.signal}),o.preload!==!1&&i(y),o.pin===!0&&await r.pins.pinRecursively(y,{signal:o.signal}),y}finally{a&&a()}}return VFe(n)}});var M0=p((t5,MY)=>{l();(function(t,e){typeof t5=="object"&&typeof MY!="undefined"?e(t5):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.streamingIterables={}))})(t5,function(t){"use strict";async function*e(I,U){let V=[];for await(let N of U)V.push(N),V.length===I&&(yield V,V=[]);V.length>0&&(yield V)}function*r(I,U){let V=[];for(let N of U)V.push(N),V.length===I&&(yield V,V=[]);V.length>0&&(yield V)}function i(I,U){return U===void 0?V=>i(I,V):U[Symbol.asyncIterator]?e(I,U):r(I,U)}function n(I){if(typeof I.next=="function")return I;if(typeof I[Symbol.iterator]=="function")return I[Symbol.iterator]();if(typeof I[Symbol.asyncIterator]=="function")return I[Symbol.asyncIterator]();throw new TypeError('"values" does not to conform to any of the iterator or iterable protocols')}function s(){let I,U;return{promise:new Promise((N,Q)=>{U=N,I=Q}),reject:I,resolve:U}}function o(I,U){let V=n(U),N=[],Q=[],ee=!1,J=!1;function ce(){for(;Q.length>0&&N.length>0;){let Te=Q.shift(),{error:Ke,value:Ze}=N.shift();Ke?Te.reject(Ke):Te.resolve({done:!1,value:Ze})}for(;Q.length>0&&J;){let{resolve:Te}=Q.shift();Te({done:!0,value:void 0})}}async function ye(){if(!J&&!ee&&!(N.length>=I)){ee=!0;try{let{done:Te,value:Ke}=await V.next();Te?J=!0:N.push({value:Ke})}catch(Te){J=!0,N.push({error:Te})}ce(),ee=!1,ye()}}async function ge(){if(N.length>0){let{error:Ke,value:Ze}=N.shift();if(Ke)throw Ke;return ye(),{done:!1,value:Ze}}if(J)return{done:!0,value:void 0};let Te=s();return Q.push(Te),ye(),Te.promise}let je={next:ge,[Symbol.asyncIterator]:()=>je};return je}function*a(I,U){let V=[],N;try{for(let Q of U)V.push(Q),!(V.length<=I)&&(yield V.shift())}catch(Q){N=Q}for(let Q of V)yield Q;if(N)throw N}function c(I,U){return U===void 0?V=>c(I,V):I===0?U:U[Symbol.asyncIterator]?o(I,U):a(I,U)}async function u(I){let U=[];for await(let V of I)U.push(V);return U}function f(I){return I[Symbol.asyncIterator]?u(I):Array.from(I)}async function*d(I){for await(let U of I)yield*U}function*h(I){for(let U of I)yield*U}function y(...I){return I.find(V=>V[Symbol.asyncIterator]!==void 0)?d(I):h(I)}async function g(I){for await(let U of I);}function m(I){if(I[Symbol.asyncIterator])return g(I);for(let U of I);}async function*E(I,U){for await(let V of U)await I(V)&&(yield V)}function v(I,U){return U===void 0?V=>E(I,V):E(I,U)}async function*A(I){for await(let U of I)U&&typeof U!="string"&&(U[Symbol.iterator]||U[Symbol.asyncIterator])?yield*A(U):yield U}async function*R(I,U){for await(let V of U)yield await I(V)}function F(I,U){return U===void 0?V=>R(I,V):R(I,U)}function q(I,U){return U===void 0?V=>q(I,V):v(V=>V!=null,A(F(I,U)))}function D(I,U,V){let N=n(V),Q=[],ee=[],J=!1,ce=!1,ye=0,ge=null;function je(){for(;ee.length>0&&Q.length>0;){let{resolve:Ve}=ee.shift(),pt=Q.shift();Ve({done:!1,value:pt})}for(;ee.length>0&&ye===0&&J;){let{resolve:Ve,reject:pt}=ee.shift();ge?(pt(ge),ge=null):Ve({done:!0,value:void 0})}}async function Te(){if(J){je();return}if(!ce&&!(ye+Q.length>=I)){ce=!0,ye++;try{let{done:Ve,value:pt}=await N.next();Ve?(J=!0,ye--,je()):Ke(pt)}catch(Ve){J=!0,ye--,ge=Ve,je()}ce=!1,Te()}}async function Ke(Ve){try{let pt=await U(Ve);if(pt&&pt[Symbol.asyncIterator])for await(let Yt of pt)Q.push(Yt);else Q.push(pt)}catch(pt){J=!0,ge=pt}ye--,je(),Te()}async function Ze(){if(Q.length===0){let pt=s();return ee.push(pt),Te(),pt.promise}let Ve=Q.shift();return Te(),{done:!1,value:Ve}}let ze={next:Ze,[Symbol.asyncIterator]:()=>ze};return ze}function z(I,U,V){return U===void 0?(N,Q)=>Q?z(I,N,Q):z(I,N):V===void 0?N=>z(I,U,N):v(N=>N!=null,A(D(I,U,V)))}async function G(I){return new Promise(U=>{I.once("readable",()=>{U()})})}async function*Y(I){for(;;){let U=I.read();if(U!==null){yield U;continue}if(I._readableState.ended)break;await G(I)}}function P(I){return typeof I[Symbol.asyncIterator]=="function"?I:Y(I)}async function*b(...I){let U=new Set(I.map(n));for(;U.size>0;)for(let V of U){let N=await V.next();N.done?U.delete(V):yield N.value}}function w(I,...U){let V=I();for(let N of U)V=N(V);return V}async function*S(I,U,V){let N=null,Q=ye=>({value:U(ye)}),ee=async function*(ye){for await(let ge of ye){if(N)return;yield ge}},J=w(()=>V,c(1),ee,F(Q),c(I-1)),ce=n(J);for(;;){let{value:ye,done:ge}=await ce.next();if(ge)break;try{let je=await ye.value;N||(yield je)}catch(je){N=je}}if(N)throw N}function C(I,U,V){return U===void 0?(N,Q)=>C(I,N,Q):V===void 0?N=>C(I,U,N):I===1?F(U,V):S(I,U,V)}function B(I,U,V){return U===void 0?(N,Q)=>Q?B(I,N,Q):B(I,N):V===void 0?N=>B(I,U,N):v(N=>N!=null,A(C(I,U,V)))}async function*W(...I){let U=I.map(n),V=new Set,N=new Map,Q=null,ee=null,J=null,ce=Te=>{Q=Te,ee&&ee(Te)},ye=Te=>{J&&J(Te)},ge=()=>new Promise((Te,Ke)=>{if(Q&&Ke(Q),N.size>0)return Te();J=Te,ee=Ke}),je=Te=>{let Ke=Promise.resolve(Te.next()).then(async({done:Ze,value:ze})=>{Ze||N.set(Te,ze),V.delete(Ke)});V.add(Ke),Ke.then(ye,ce)};for(let Te of U)je(Te);for(;;){if(V.size===0&&N.size===0)return;await ge();for(let[Te,Ke]of N)N.delete(Te),yield Ke,je(Te)}}async function K(I,U,V){let N=U;for await(let Q of V)N=await I(N,Q);return N}function M(I,U,V){return U===void 0?(N,Q)=>Q?K(I,N,Q):M(I,N):V===void 0?N=>M(I,U,N):K(I,U,V)}async function*_(I,U){let V=0;for await(let N of U)if(yield await N,V++,V>=I)break}function*L(I,U){let V=0;for(let N of U)if(yield N,V++,V>=I)break}function ae(I,U){return U===void 0?V=>ae(I,V):U[Symbol.asyncIterator]?_(I,U):L(I,U)}async function*X(I,U){for await(let V of U)await I(V),yield V}function ne(I,U){return U===void 0?V=>X(I,V):X(I,U)}function oe(I,U){let V=I[0]+U[0],N=I[1]+U[1];if(N>=1e9){let Q=N%1e9;V+=(N-Q)/1e9,N=Q}return[V,N]}async function*de(I,U){let V=U[Symbol.asyncIterator](),N=[0,0];for(;;){let Q=process.hrtime(),{value:ee,done:J}=await V.next(),ce=process.hrtime(Q);if(N=oe(N,ce),I.progress&&I.progress(ce,N),J)return I.total&&I.total(N),ee;yield ee}}function*he(I,U){let V=U[Symbol.iterator](),N=[0,0];for(;;){let Q=process.hrtime(),{value:ee,done:J}=V.next(),ce=process.hrtime(Q);if(N=oe(N,ce),I.progress&&I.progress(ce,N),J)return I.total&&I.total(N),ee;yield ee}}function we(I={},U){return U===void 0?V=>we(I,V):U[Symbol.asyncIterator]!==void 0?de(I,U):he(I,U)}function k(I,U,V){let N=n(V),Q=[],ee=[],J=!1,ce=!1,ye=0,ge=null;function je(){for(;ee.length>0&&Q.length>0;){let{resolve:Ve}=ee.shift(),pt=Q.shift();Ve({done:!1,value:pt})}for(;ee.length>0&&ye===0&&J;){let{resolve:Ve,reject:pt}=ee.shift();ge?(pt(ge),ge=null):Ve({done:!0,value:void 0})}}async function Te(){if(J){je();return}if(!ce&&!(ye+Q.length>=I)){ce=!0,ye++;try{let{done:Ve,value:pt}=await N.next();Ve?(J=!0,ye--,je()):Ke(pt)}catch(Ve){J=!0,ye--,ge=Ve,je()}ce=!1,Te()}}async function Ke(Ve){try{let pt=await U(Ve);Q.push(pt)}catch(pt){J=!0,ge=pt}ye--,je(),Te()}async function Ze(){if(Q.length===0){let pt=s();return ee.push(pt),Te(),pt.promise}let Ve=Q.shift();return Te(),{done:!1,value:Ve}}let ze={next:Ze,[Symbol.asyncIterator]:()=>ze};return ze}function j(I,U,V){return U===void 0?(N,Q)=>Q?j(I,N,Q):j(I,N):V===void 0?N=>j(I,U,N):k(I,U,V)}async function $(I,U){let V=null,N=null,Q=null,ee=ge=>{V=ge,N&&N(ge)},J=()=>{Q&&Q()},ce=()=>{I.removeListener("error",ee),I.removeListener("drain",J)};I.once("error",ee);let ye=()=>new Promise((ge,je)=>{if(V)return je(V);I.once("drain",J),Q=ge,N=je});for await(let ge of U)if(I.write(ge)===!1&&await ye(),V)break;if(ce(),V)throw V}function Z(I,U){return U===void 0?V=>$(I,V):$(I,U)}t.batch=i,t.buffer=c,t.collect=f,t.concat=y,t.consume=m,t.filter=v,t.flatMap=q,t.flatTransform=z,t.flatten=A,t.fromStream=P,t.getIterator=n,t.map=F,t.merge=b,t.parallelFlatMap=B,t.parallelMap=C,t.parallelMerge=W,t.pipeline=w,t.reduce=M,t.take=ae,t.tap=ne,t.time=we,t.transform=j,t.writeToStream=Z,Object.defineProperty(t,"__esModule",{value:!0})})});var NS=p(UY=>{l();"use strict";var{CID:LY}=(Ae(),De);UY.cleanCid=t=>t instanceof Uint8Array?LY.decode(t):LY.parse(t.toString())});var jY=p((nTt,FY)=>{l();"use strict";var zFe=xt(),{parallelMap:HFe,filter:$Fe}=M0(),{pipe:GFe}=Ir(),{cleanCid:WFe}=NS(),YFe=ke(),XFe=8;FY.exports=({repo:t})=>{async function*e(r,i={}){Array.isArray(r)||(r=[r]);let n=await t.gcLock.writeLock();try{yield*GFe(r,HFe(XFe,async s=>{s=WFe(s);let o={cid:s};try{if(!await t.blocks.has(s))throw zFe(new Error("block not found"),"ERR_BLOCK_NOT_FOUND");await t.blocks.delete(s)}catch(a){i.force||(a.message=`cannot remove ${s}: ${a.message}`,o.error=a)}return o}),$Fe(()=>!i.quiet))}finally{n()}}return YFe(e)}});var VY=p((sTt,KY)=>{l();"use strict";var{cleanCid:QFe}=NS(),ZFe=ke();KY.exports=({repo:t,preload:e})=>{async function r(i,n={}){i=QFe(i),n.preload!==!1&&e(i);let s=await t.blocks.get(i);return{cid:i,size:s.length}}return ZFe(r)}});var $Y=p((oTt,HY)=>{l();"use strict";var JFe=DY(),eje=BY(),tje=jY(),rje=VY(),zY=class{constructor({codecs:e,hashers:r,preload:i,repo:n}){this.get=JFe({preload:i,repo:n}),this.put=eje({codecs:e,hashers:r,preload:i,repo:n}),this.rm=tje({repo:n}),this.stat=rje({preload:i,repo:n})}};HY.exports=zY});var WY=p((aTt,GY)=>{l();"use strict";var ije=Gn();GY.exports=({addAll:t})=>{async function e(r,i={}){let n=await ije(t(r,i));if(n==null)throw Error("Failed to add a file, if you see this please report a bug");return n}return e}});var YY,XY,QY=Se(()=>{l();YY=Wt(br()),XY=YY.default});var ZY=p((My,r5)=>{l();(function(t,e){"use strict";var r={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function i(y){if(!Array.isArray(y)&&!ArrayBuffer.isView(y))return!1;for(var g=0;g<y.length;g++)if(!Number.isInteger(y[g])||y[g]<0||y[g]>255)return!1;return!0}function n(y,g){return(y&65535)*g+(((y>>>16)*g&65535)<<16)}function s(y,g){return y<<g|y>>>32-g}function o(y){return y^=y>>>16,y=n(y,2246822507),y^=y>>>13,y=n(y,3266489909),y^=y>>>16,y}function a(y,g){y=[y[0]>>>16,y[0]&65535,y[1]>>>16,y[1]&65535],g=[g[0]>>>16,g[0]&65535,g[1]>>>16,g[1]&65535];var m=[0,0,0,0];return m[3]+=y[3]+g[3],m[2]+=m[3]>>>16,m[3]&=65535,m[2]+=y[2]+g[2],m[1]+=m[2]>>>16,m[2]&=65535,m[1]+=y[1]+g[1],m[0]+=m[1]>>>16,m[1]&=65535,m[0]+=y[0]+g[0],m[0]&=65535,[m[0]<<16|m[1],m[2]<<16|m[3]]}function c(y,g){y=[y[0]>>>16,y[0]&65535,y[1]>>>16,y[1]&65535],g=[g[0]>>>16,g[0]&65535,g[1]>>>16,g[1]&65535];var m=[0,0,0,0];return m[3]+=y[3]*g[3],m[2]+=m[3]>>>16,m[3]&=65535,m[2]+=y[2]*g[3],m[1]+=m[2]>>>16,m[2]&=65535,m[2]+=y[3]*g[2],m[1]+=m[2]>>>16,m[2]&=65535,m[1]+=y[1]*g[3],m[0]+=m[1]>>>16,m[1]&=65535,m[1]+=y[2]*g[2],m[0]+=m[1]>>>16,m[1]&=65535,m[1]+=y[3]*g[1],m[0]+=m[1]>>>16,m[1]&=65535,m[0]+=y[0]*g[3]+y[1]*g[2]+y[2]*g[1]+y[3]*g[0],m[0]&=65535,[m[0]<<16|m[1],m[2]<<16|m[3]]}function u(y,g){return g%=64,g===32?[y[1],y[0]]:g<32?[y[0]<<g|y[1]>>>32-g,y[1]<<g|y[0]>>>32-g]:(g-=32,[y[1]<<g|y[0]>>>32-g,y[0]<<g|y[1]>>>32-g])}function f(y,g){return g%=64,g===0?y:g<32?[y[0]<<g|y[1]>>>32-g,y[1]<<g]:[y[1]<<g-32,0]}function d(y,g){return[y[0]^g[0],y[1]^g[1]]}function h(y){return y=d(y,[0,y[0]>>>1]),y=c(y,[4283543511,3981806797]),y=d(y,[0,y[0]>>>1]),y=c(y,[3301882366,444984403]),y=d(y,[0,y[0]>>>1]),y}r.x86.hash32=function(y,g){if(r.inputValidation&&!i(y))return e;g=g||0;for(var m=y.length%4,E=y.length-m,v=g,A=0,R=3432918353,F=461845907,q=0;q<E;q=q+4)A=y[q]|y[q+1]<<8|y[q+2]<<16|y[q+3]<<24,A=n(A,R),A=s(A,15),A=n(A,F),v^=A,v=s(v,13),v=n(v,5)+3864292196;switch(A=0,m){case 3:A^=y[q+2]<<16;case 2:A^=y[q+1]<<8;case 1:A^=y[q],A=n(A,R),A=s(A,15),A=n(A,F),v^=A}return v^=y.length,v=o(v),v>>>0},r.x86.hash128=function(y,g){if(r.inputValidation&&!i(y))return e;g=g||0;for(var m=y.length%16,E=y.length-m,v=g,A=g,R=g,F=g,q=0,D=0,z=0,G=0,Y=597399067,P=2869860233,b=951274213,w=2716044179,S=0;S<E;S=S+16)q=y[S]|y[S+1]<<8|y[S+2]<<16|y[S+3]<<24,D=y[S+4]|y[S+5]<<8|y[S+6]<<16|y[S+7]<<24,z=y[S+8]|y[S+9]<<8|y[S+10]<<16|y[S+11]<<24,G=y[S+12]|y[S+13]<<8|y[S+14]<<16|y[S+15]<<24,q=n(q,Y),q=s(q,15),q=n(q,P),v^=q,v=s(v,19),v+=A,v=n(v,5)+1444728091,D=n(D,P),D=s(D,16),D=n(D,b),A^=D,A=s(A,17),A+=R,A=n(A,5)+197830471,z=n(z,b),z=s(z,17),z=n(z,w),R^=z,R=s(R,15),R+=F,R=n(R,5)+2530024501,G=n(G,w),G=s(G,18),G=n(G,Y),F^=G,F=s(F,13),F+=v,F=n(F,5)+850148119;switch(q=0,D=0,z=0,G=0,m){case 15:G^=y[S+14]<<16;case 14:G^=y[S+13]<<8;case 13:G^=y[S+12],G=n(G,w),G=s(G,18),G=n(G,Y),F^=G;case 12:z^=y[S+11]<<24;case 11:z^=y[S+10]<<16;case 10:z^=y[S+9]<<8;case 9:z^=y[S+8],z=n(z,b),z=s(z,17),z=n(z,w),R^=z;case 8:D^=y[S+7]<<24;case 7:D^=y[S+6]<<16;case 6:D^=y[S+5]<<8;case 5:D^=y[S+4],D=n(D,P),D=s(D,16),D=n(D,b),A^=D;case 4:q^=y[S+3]<<24;case 3:q^=y[S+2]<<16;case 2:q^=y[S+1]<<8;case 1:q^=y[S],q=n(q,Y),q=s(q,15),q=n(q,P),v^=q}return v^=y.length,A^=y.length,R^=y.length,F^=y.length,v+=A,v+=R,v+=F,A+=v,R+=v,F+=v,v=o(v),A=o(A),R=o(R),F=o(F),v+=A,v+=R,v+=F,A+=v,R+=v,F+=v,("00000000"+(v>>>0).toString(16)).slice(-8)+("00000000"+(A>>>0).toString(16)).slice(-8)+("00000000"+(R>>>0).toString(16)).slice(-8)+("00000000"+(F>>>0).toString(16)).slice(-8)},r.x64.hash128=function(y,g){if(r.inputValidation&&!i(y))return e;g=g||0;for(var m=y.length%16,E=y.length-m,v=[0,g],A=[0,g],R=[0,0],F=[0,0],q=[2277735313,289559509],D=[1291169091,658871167],z=0;z<E;z=z+16)R=[y[z+4]|y[z+5]<<8|y[z+6]<<16|y[z+7]<<24,y[z]|y[z+1]<<8|y[z+2]<<16|y[z+3]<<24],F=[y[z+12]|y[z+13]<<8|y[z+14]<<16|y[z+15]<<24,y[z+8]|y[z+9]<<8|y[z+10]<<16|y[z+11]<<24],R=c(R,q),R=u(R,31),R=c(R,D),v=d(v,R),v=u(v,27),v=a(v,A),v=a(c(v,[0,5]),[0,1390208809]),F=c(F,D),F=u(F,33),F=c(F,q),A=d(A,F),A=u(A,31),A=a(A,v),A=a(c(A,[0,5]),[0,944331445]);switch(R=[0,0],F=[0,0],m){case 15:F=d(F,f([0,y[z+14]],48));case 14:F=d(F,f([0,y[z+13]],40));case 13:F=d(F,f([0,y[z+12]],32));case 12:F=d(F,f([0,y[z+11]],24));case 11:F=d(F,f([0,y[z+10]],16));case 10:F=d(F,f([0,y[z+9]],8));case 9:F=d(F,[0,y[z+8]]),F=c(F,D),F=u(F,33),F=c(F,q),A=d(A,F);case 8:R=d(R,f([0,y[z+7]],56));case 7:R=d(R,f([0,y[z+6]],48));case 6:R=d(R,f([0,y[z+5]],40));case 5:R=d(R,f([0,y[z+4]],32));case 4:R=d(R,f([0,y[z+3]],24));case 3:R=d(R,f([0,y[z+2]],16));case 2:R=d(R,f([0,y[z+1]],8));case 1:R=d(R,[0,y[z]]),R=c(R,q),R=u(R,31),R=c(R,D),v=d(v,R)}return v=d(v,[0,y.length]),A=d(A,[0,y.length]),v=a(v,A),A=a(A,v),v=h(v),A=h(A),v=a(v,A),A=a(A,v),("00000000"+(v[0]>>>0).toString(16)).slice(-8)+("00000000"+(v[1]>>>0).toString(16)).slice(-8)+("00000000"+(A[0]>>>0).toString(16)).slice(-8)+("00000000"+(A[1]>>>0).toString(16)).slice(-8)},typeof My!="undefined"?(typeof r5!="undefined"&&r5.exports&&(My=r5.exports=r),My.murmurHash3=r):typeof define=="function"&&define.amd?define([],function(){return r}):(r._murmurHash3=t.murmurHash3,r.noConflict=function(){return t.murmurHash3=r._murmurHash3,r._murmurHash3=e,r.noConflict=e,r},t.murmurHash3=r)})(My)});var eX=p((uTt,JY)=>{l();JY.exports=ZY()});var tX={};bt(tX,{murmur3128:()=>Ly,murmur332:()=>sje});function nje(t){let e=new Array(4);for(let r=0;r<4;r++)e[r]=t&255,t=t>>8;return new Uint8Array(e)}var BS,sje,Ly,i5=Se(()=>{l();m2();Nc();BS=Wt(eX());sje=Oc({name:"murmur3-32",code:35,encode:t=>nje(BS.default.x86.hash32(t))}),Ly=Oc({name:"murmur3-128",code:34,encode:t=>Ic.fromHex(BS.default.x64.hash128(t))})});async function oje(t){return(await Ly.encode(t)).slice(0,8).reverse()}var aje,rX,iX=Se(()=>{l();QY();ii();i5();aje={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hasher:Sh,leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:17437180132763652,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,recursive:!1,hidden:!1,timeout:void 0,hamtHashFn:oje,hamtHashCode:34,hamtBucketBits:8},rX=(t={})=>XY.bind({ignoreUndefined:!0})(aje,t)});var cje,Fo,L0=Se(()=>{l();Ae();wt();ii();cje=async(t,e,r)=>{r.codec||(r.codec=Mt),r.hasher||(r.hasher=Sh),r.cidVersion===void 0&&(r.cidVersion=1),r.codec===Mt&&r.hasher!==Sh&&(r.cidVersion=1);let i=await r.hasher.digest(t),n=Ge.create(r.cidVersion,r.codec.code,i);return r.onlyHash||await e.put(n,t,{signal:r.signal}),n},Fo=cje});var uje,nX,sX=Se(()=>{l();pi();L0();wt();uje=async(t,e,r)=>{let i=new _i({type:"directory",mtime:t.mtime,mode:t.mode}),n=Oo(Us({Data:i.marshal()})),s=await Fo(n,e,r),o=t.path;return{cid:s,path:o,unixfs:i,size:n.length}},nX=uje});var Uy=p((STt,aX)=>{l();"use strict";function oX(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function fje(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return oX(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),oX(new n,r)}}aX.exports=fje});async function lje(t,e){return e(await(0,cX.default)(t))}var cX,uX,fX=Se(()=>{l();cX=Wt(h0());uX=lje});function dje(t,e,r){return dX(t,e,r)}async function dX(t,e,r){let i=[];for await(let n of(0,lX.default)(t,r.maxChildrenPerNode))i.push(await e(n));return i.length>1?dX(i,e,r):i[0]}var lX,hX,pX=Se(()=>{l();lX=Wt(qb());hX=dje});async function hje(t,e,r){let i=new bX(r.layerRepeat),n=0,s=1,o=i;for await(let a of(0,yX.default)(t,r.maxChildrenPerNode))o.isFull()&&(o!==i&&i.addChild(await o.reduce(e)),n&&n%r.layerRepeat==0&&s++,o=new MS(s,r.layerRepeat,n),n++),o.append(a);return o&&o!==i&&i.addChild(await o.reduce(e)),i.reduce(e)}var yX,gX,MS,bX,mX=Se(()=>{l();yX=Wt(qb());gX=hje,MS=class{constructor(e,r,i=0){this.maxDepth=e,this.layerRepeat=r,this.currentDepth=1,this.iteration=i,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:e,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;let e=this._findParent(this.node,this.currentDepth);return e?(this._addNextNodeToParent(e),!1):!0}_addNextNodeToParent(e){this.parent=e;let r={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(r),this.currentDepth=r.depth,this.node=r}append(e){this.node.data=e}reduce(e){return this._reduce(this.root,e)}async _reduce(e,r){let i=[];return e.children.length&&(i=await Promise.all(e.children.filter(n=>n.data).map(n=>this._reduce(n,r)))),r((e.data||[]).concat(i))}_findParent(e,r){let i=e.parent;if(!(!i||i.depth===0))return i.children.length===i.maxChildren||!i.maxChildren?this._findParent(i,r):i}},bX=class extends MS{constructor(e){super(0,e);this.root.depth=0,this.currentDepth=1}addChild(e){this.root.children.push(e)}reduce(e){return e((this.root.data||[]).concat(this.root.children))}}});async function*pje(t,e,r){for await(let i of t.content)yield async()=>{r.progress(i.length,t.path);let n,s={codec:Mt,cidVersion:r.cidVersion,hasher:r.hasher,onlyHash:r.onlyHash};return r.rawLeaves?(s.codec=Eo,s.cidVersion=1):(n=new _i({type:r.leafType,data:i,mtime:t.mtime,mode:t.mode}),i=Oo({Data:n.marshal(),Links:[]})),{cid:await Fo(i,e,s),unixfs:n,size:i.length}}}var vX,wX=Se(()=>{l();pi();L0();wt();Os();vX=pje});async function*gje(t,e,r){let i=-1,n,s;typeof r.bufferImporter=="function"?s=r.bufferImporter:s=vX;for await(let o of(0,EX.default)(s(t,e,r),r.blockWriteConcurrency)){if(i++,i===0){n=o;continue}else i===1&&n&&(yield n,n=null);yield o}n&&(n.single=!0,yield n)}function mje(t,e,r){let i=yje[r.strategy];if(!i)throw(0,_X.default)(new Error(`Unknown importer build strategy name: ${r.strategy}`),"ERR_BAD_STRATEGY");return i(gje(t,e,r),bje(t,e,r),r)}var _X,EX,yje,bje,SX,xX=Se(()=>{l();_X=Wt(Uy());pi();L0();wt();EX=Wt(Db());Os();wt();fX();pX();mX();wX();yje={flat:uX,balanced:hX,trickle:gX};bje=(t,e,r)=>{async function i(n){if(n.length===1&&n[0].single&&r.reduceSingleLeafToSelf){let f=n[0];if(f.cid.code===Dc&&(t.mtime!==void 0||t.mode!==void 0)){let d=await e.get(f.cid);f.unixfs=new _i({type:"file",mtime:t.mtime,mode:t.mode,data:d}),d=Oo(Us({Data:f.unixfs.marshal()})),f.cid=await Fo(d,e,{...r,codec:Mt,hasher:r.hasher,cidVersion:r.cidVersion}),f.size=d.length}return{cid:f.cid,path:t.path,unixfs:f.unixfs,size:f.size}}let s=new _i({type:"file",mtime:t.mtime,mode:t.mode}),o=n.filter(f=>f.cid.code===Dc&&f.size||f.unixfs&&!f.unixfs.data&&f.unixfs.fileSize()?!0:Boolean(f.unixfs&&f.unixfs.data&&f.unixfs.data.length)).map(f=>f.cid.code===Dc?(s.addBlockSize(f.size),{Name:"",Tsize:f.size,Hash:f.cid}):(!f.unixfs||!f.unixfs.data?s.addBlockSize(f.unixfs&&f.unixfs.fileSize()||0):s.addBlockSize(f.unixfs.data.length),{Name:"",Tsize:f.size,Hash:f.cid})),a={Data:s.marshal(),Links:o},c=Oo(Us(a));return{cid:await Fo(c,e,r),path:t.path,unixfs:s,size:c.length+a.Links.reduce((f,d)=>f+d.Tsize,0)}}return i};SX=mje});var bn=p((UTt,IX)=>{l();"use strict";var{Buffer:jo}=Vt(),AX=Symbol.for("BufferList");function ur(t){if(!(this instanceof ur))return new ur(t);ur._init.call(this,t)}ur._init=function(e){Object.defineProperty(this,AX,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};ur.prototype._new=function(e){return new ur(e)};ur.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let i=0;i<this._bufs.length;i++){let n=r+this._bufs[i].length;if(e<n||i===this._bufs.length-1)return[i,e-r];r=n}};ur.prototype._reverseOffset=function(t){let e=t[0],r=t[1];for(let i=0;i<e;i++)r+=this._bufs[i].length;return r};ur.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]};ur.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};ur.prototype.copy=function(e,r,i,n){if((typeof i!="number"||i<0)&&(i=0),(typeof n!="number"||n>this.length)&&(n=this.length),i>=this.length||n<=0)return e||jo.alloc(0);let s=!!e,o=this._offset(i),a=n-i,c=a,u=s&&r||0,f=o[1];if(i===0&&n===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:jo.concat(this._bufs,this.length);for(let d=0;d<this._bufs.length;d++)this._bufs[d].copy(e,u),u+=this._bufs[d].length;return e}if(c<=this._bufs[o[0]].length-f)return s?this._bufs[o[0]].copy(e,r,f,f+c):this._bufs[o[0]].slice(f,f+c);s||(e=jo.allocUnsafe(a));for(let d=o[0];d<this._bufs.length;d++){let h=this._bufs[d].length-f;if(c>h)this._bufs[d].copy(e,u,f),u+=h;else{this._bufs[d].copy(e,u,f,f+c),u+=h;break}c-=h,f&&(f=0)}return e.length>u?e.slice(0,u):e};ur.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let i=this._offset(e),n=this._offset(r),s=this._bufs.slice(i[0],n[0]+1);return n[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,n[1]),i[1]!==0&&(s[0]=s[0].slice(i[1])),this._new(s)};ur.prototype.toString=function(e,r,i){return this.slice(r,i).toString(e)};ur.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};ur.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};ur.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(jo.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(jo.from(e));return this};ur.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};ur.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=jo.from([t]):typeof t=="string"?t=jo.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=jo.from(t.buffer,t.byteOffset,t.byteLength):jo.isBuffer(t)||(t=jo.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let i=this._offset(e),n=i[0],s=i[1];for(;n<this._bufs.length;n++){let o=this._bufs[n];for(;s<o.length;)if(o.length-s>=t.length){let c=o.indexOf(t,s);if(c!==-1)return this._reverseOffset([n,c]);s=o.length-t.length+1}else{let c=this._reverseOffset([n,s]);if(this._match(c,t))return c;s++}s=0}return-1};ur.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(r){t[r]===null?ur.prototype[r]=function(i,n){return this.slice(i,i+n)[r](0,n)}:ur.prototype[r]=function(i=0){return this.slice(i,i+t[r])[r](0)}})(e)})();ur.prototype._isBufferList=function(e){return e instanceof ur||ur.isBufferList(e)};ur.isBufferList=function(e){return e!=null&&e[AX]};IX.exports=ur});var PX=p((FTt,RX)=>{l();var TX=class{constructor(e,r=12,i=8*1024,n=32*1024,s=64,o){this.bits=r,this.min=i,this.max=n,this.asModule=e,this.rabin=new e.Rabin(r,i,n,s,o),this.polynomial=o}fingerprint(e){let{__retain:r,__release:i,__allocArray:n,__getInt32Array:s,Int32Array_ID:o,Uint8Array_ID:a}=this.asModule,c=new Int32Array(Math.ceil(e.length/this.min)),u=r(n(o,c)),f=r(n(a,e)),d=this.rabin.fingerprint(f,u),h=s(d);i(f),i(u);let y=h.indexOf(0);return y>=0?h.subarray(0,y):h}};RX.exports=TX});var KX=p(Ky=>{l();"use strict";var LS=-8,n5=-4,vje=0,CX=1,OX=1<<0,s5=1<<1,jTt=1<<2,KTt=1<<3,kX=5,VTt=1<<kX,qX=1<<10,DX=1<<11,zTt=1<<12,wje=1<<13,NX=14,HTt=1<<NX,$Tt=1<<19,GTt=1<<20,WTt=1<<21,YTt=1<<22,_je=0,US=4,Eje=8,Sje=12,BX=12,xje=16,Aje=typeof BigUint64Array!="undefined",Fy=Symbol(),jy=1024;function MX(t,e){let r=new Uint32Array(t),i=new Uint16Array(t);var n=r[e+n5>>>2]>>>1,s=e>>>1;if(n<=jy)return String.fromCharCode.apply(String,i.subarray(s,s+n));let o=[];do{let a=i[s+jy-1],c=a>=55296&&a<56320?jy-1:jy;o.push(String.fromCharCode.apply(String,i.subarray(s,s+=c))),n-=c}while(n>jy);return o.join("")+String.fromCharCode.apply(String,i.subarray(s,s+n))}function FS(t){let e={};function r(n,s){return n?MX(n.buffer,s):"<yet unknown>"}let i=t.env=t.env||{};return i.abort=i.abort||function(s,o,a,c){let u=e.memory||i.memory;throw Error("abort: "+r(u,s)+" at "+r(u,o)+":"+a+":"+c)},i.trace=i.trace||function(s,o){let a=e.memory||i.memory;console.log("trace: "+r(a,s)+(o?" ":"")+Array.prototype.slice.call(arguments,2,2+o).join(", "))},t.Math=t.Math||Math,t.Date=t.Date||Date,e}function jS(t,e){let r=e.exports,i=r.memory,n=r.table,s=r.__alloc,o=r.__retain,a=r.__rtti_base||~0;function c(D){let z=new Uint32Array(i.buffer),G=z[a>>>2];if((D>>>=0)>=G)throw Error("invalid id: "+D);return z[(a+4>>>2)+D*2]}function u(D){let z=new Uint32Array(i.buffer),G=z[a>>>2];if((D>>>=0)>=G)throw Error("invalid id: "+D);return z[(a+4>>>2)+D*2+1]}function f(D){return 31-Math.clz32(D>>>kX&31)}function d(D){return 31-Math.clz32(D>>>NX&31)}function h(D){let z=D.length,G=s(z<<1,CX),Y=new Uint16Array(i.buffer);for(var P=0,b=G>>>1;P<z;++P)Y[b+P]=D.charCodeAt(P);return G}t.__allocString=h;function y(D){let z=i.buffer;if(new Uint32Array(z)[D+LS>>>2]!==CX)throw Error("not a string: "+D);return MX(z,D)}t.__getString=y;function g(D,z,G){let Y=i.buffer;if(G)switch(D){case 2:return new Float32Array(Y);case 3:return new Float64Array(Y)}else switch(D){case 0:return new(z?Int8Array:Uint8Array)(Y);case 1:return new(z?Int16Array:Uint16Array)(Y);case 2:return new(z?Int32Array:Uint32Array)(Y);case 3:return new(z?BigInt64Array:BigUint64Array)(Y)}throw Error("unsupported align: "+D)}function m(D,z){let G=c(D);if(!(G&(OX|s5)))throw Error("not an array: "+D+" @ "+G);let Y=f(G),P=z.length,b=s(P<<Y,vje),w=s(G&s5?xje:Sje,D),S=new Uint32Array(i.buffer);S[w+_je>>>2]=o(b),S[w+US>>>2]=b,S[w+Eje>>>2]=P<<Y,G&s5&&(S[w+BX>>>2]=P);let C=g(Y,G&qX,G&DX);if(G&wje)for(let B=0;B<P;++B)C[(b>>>Y)+B]=o(z[B]);else C.set(z,b>>>Y);return w}t.__allocArray=m;function E(D){let z=new Uint32Array(i.buffer),G=z[D+LS>>>2],Y=c(G);if(!(Y&OX))throw Error("not an array: "+G);let P=f(Y);var b=z[D+US>>>2];let w=Y&s5?z[D+BX>>>2]:z[b+n5>>>2]>>>P;return g(P,Y&qX,Y&DX).subarray(b>>>=P,b+w)}t.__getArrayView=E;function v(D){let z=E(D),G=z.length,Y=new Array(G);for(let P=0;P<G;P++)Y[P]=z[P];return Y}t.__getArray=v;function A(D){let z=i.buffer,G=new Uint32Array(z)[D+n5>>>2];return z.slice(D,D+G)}t.__getArrayBuffer=A;function R(D,z,G){return new D(F(D,z,G))}function F(D,z,G){let Y=i.buffer,P=new Uint32Array(Y),b=P[G+US>>>2];return new D(Y,b,P[b+n5>>>2]>>>z)}t.__getInt8Array=R.bind(null,Int8Array,0),t.__getInt8ArrayView=F.bind(null,Int8Array,0),t.__getUint8Array=R.bind(null,Uint8Array,0),t.__getUint8ArrayView=F.bind(null,Uint8Array,0),t.__getUint8ClampedArray=R.bind(null,Uint8ClampedArray,0),t.__getUint8ClampedArrayView=F.bind(null,Uint8ClampedArray,0),t.__getInt16Array=R.bind(null,Int16Array,1),t.__getInt16ArrayView=F.bind(null,Int16Array,1),t.__getUint16Array=R.bind(null,Uint16Array,1),t.__getUint16ArrayView=F.bind(null,Uint16Array,1),t.__getInt32Array=R.bind(null,Int32Array,2),t.__getInt32ArrayView=F.bind(null,Int32Array,2),t.__getUint32Array=R.bind(null,Uint32Array,2),t.__getUint32ArrayView=F.bind(null,Uint32Array,2),Aje&&(t.__getInt64Array=R.bind(null,BigInt64Array,3),t.__getInt64ArrayView=F.bind(null,BigInt64Array,3),t.__getUint64Array=R.bind(null,BigUint64Array,3),t.__getUint64ArrayView=F.bind(null,BigUint64Array,3)),t.__getFloat32Array=R.bind(null,Float32Array,2),t.__getFloat32ArrayView=F.bind(null,Float32Array,2),t.__getFloat64Array=R.bind(null,Float64Array,3),t.__getFloat64ArrayView=F.bind(null,Float64Array,3);function q(D,z){let G=new Uint32Array(i.buffer);var Y=G[D+LS>>>2];if(Y<=G[a>>>2])do if(Y==z)return!0;while(Y=u(Y));return!1}return t.__instanceof=q,t.memory=t.memory||i,t.table=t.table||n,jX(r,t)}function LX(t){return typeof Response!="undefined"&&t instanceof Response}async function UX(t,e){return LX(t=await t)?FX(t,e):jS(FS(e||(e={})),await WebAssembly.instantiate(t instanceof WebAssembly.Module?t:await WebAssembly.compile(t),e))}Ky.instantiate=UX;function Ije(t,e){return jS(FS(e||(e={})),new WebAssembly.Instance(t instanceof WebAssembly.Module?t:new WebAssembly.Module(t),e))}Ky.instantiateSync=Ije;async function FX(t,e){return WebAssembly.instantiateStreaming?jS(FS(e||(e={})),(await WebAssembly.instantiateStreaming(t,e)).instance):UX(LX(t=await t)?t.arrayBuffer():t,e)}Ky.instantiateStreaming=FX;function jX(t,e){var r=e?Object.create(e):{},i=t.__argumentsLength?function(n){t.__argumentsLength.value=n}:t.__setArgumentsLength||t.__setargc||function(){};for(let n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;let s=t[n],o=n.split("."),a=r;for(;o.length>1;){let f=o.shift();Object.prototype.hasOwnProperty.call(a,f)||(a[f]={}),a=a[f]}let c=o[0],u=c.indexOf("#");if(u>=0){let f=c.substring(0,u),d=a[f];if(typeof d=="undefined"||!d.prototype){let h=function(...y){return h.wrap(h.prototype.constructor(0,...y))};h.prototype={valueOf:function(){return this[Fy]}},h.wrap=function(y){return Object.create(h.prototype,{[Fy]:{value:y,writable:!1}})},d&&Object.getOwnPropertyNames(d).forEach(y=>Object.defineProperty(h,y,Object.getOwnPropertyDescriptor(d,y))),a[f]=h}if(c=c.substring(u+1),a=a[f].prototype,/^(get|set):/.test(c)){if(!Object.prototype.hasOwnProperty.call(a,c=c.substring(4))){let h=t[n.replace("set:","get:")],y=t[n.replace("get:","set:")];Object.defineProperty(a,c,{get:function(){return h(this[Fy])},set:function(g){y(this[Fy],g)},enumerable:!0})}}else c==="constructor"?(a[c]=(...h)=>(i(h.length),s(...h))).original=s:(a[c]=function(...h){return i(h.length),s(this[Fy],...h)}).original=s}else/^(get|set):/.test(c)?Object.prototype.hasOwnProperty.call(a,c=c.substring(4))||Object.defineProperty(a,c,{get:t[n.replace("set:","get:")],set:t[n.replace("get:","set:")],enumerable:!0}):typeof s=="function"&&s!==i?(a[c]=(...f)=>(i(f.length),s(...f))).original=s:a[c]=s}return r}Ky.demangle=jX});var zX=p((QTt,VX)=>{l();var{instantiate:Tje}=KX();KS.supported=typeof WebAssembly!="undefined";function KS(t={}){if(!KS.supported)return null;var e=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return Tje(new Response(new Blob([e],{type:"application/wasm"})),t)}VX.exports=KS});var GX=p((ZTt,$X)=>{l();var HX=PX(),Rje=zX(),Pje=async(t,e,r,i,n)=>{let s=await Rje();return new HX(s,t,e,r,i,n)};$X.exports={Rabin:HX,create:Pje}});async function*Cje(t,e){let r,i,n;if(e.minChunkSize&&e.maxChunkSize&&e.avgChunkSize)n=e.avgChunkSize,r=e.minChunkSize,i=e.maxChunkSize;else if(e.avgChunkSize)n=e.avgChunkSize,r=n/3,i=n+n/2;else throw(0,VS.default)(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");if(r<16)throw(0,VS.default)(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");i<r&&(i=r),n<r&&(n=r);let s=Math.floor(Math.log2(n));for await(let o of Oje(t,{min:r,max:i,bits:s,window:e.window,polynomial:e.polynomial}))yield o}async function*Oje(t,e){let r=await(0,YX.create)(e.bits,e.min,e.max,e.window),i=new WX.default;for await(let n of t){i.append(n);let s=r.fingerprint(n);for(let o=0;o<s.length;o++){let a=s[o],c=i.slice(0,a);i.consume(a),yield c}}i.length&&(yield i.slice(0))}var WX,YX,VS,XX,QX=Se(()=>{l();WX=Wt(bn()),YX=Wt(GX()),VS=Wt(Uy());XX=Cje});async function*kje(t,e){let r=new o5.default,i=0,n=!1,s=e.maxChunkSize;for await(let o of t)for(r.append(o),i+=o.length;i>=s;)if(yield r.slice(0,s),n=!0,s===r.length)r=new o5.default,i=0;else{let a=new o5.default;a.append(r.shallowSlice(s)),r=a,i-=s}(!n||i)&&(yield r.slice(0,i))}var o5,ZX,JX=Se(()=>{l();o5=Wt(bn());ZX=kje});async function*qje(t){for await(let e of t){if(e.length===void 0)throw(0,zS.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if(typeof e=="string"||e instanceof String)yield i9(e.toString());else if(Array.isArray(e))yield Uint8Array.from(e);else if(e instanceof Uint8Array)yield e;else throw(0,zS.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}}var zS,eQ,tQ=Se(()=>{l();zS=Wt(Uy());ut();eQ=qje});function Dje(t){return Symbol.iterator in t}function Nje(t){return Symbol.asyncIterator in t}function Bje(t){try{if(t instanceof Uint8Array)return async function*(){yield t}();if(Dje(t))return async function*(){yield*t}();if(Nje(t))return t}catch{throw(0,HS.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw(0,HS.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}async function*Mje(t,e,r){for await(let i of t)if(i.path&&(i.path.substring(0,2)==="./"&&(r.wrapWithDirectory=!0),i.path=i.path.split("/").filter(n=>n&&n!==".").join("/")),i.content){let n;typeof r.chunker=="function"?n=r.chunker:r.chunker==="rabin"?n=XX:n=ZX;let s;typeof r.chunkValidator=="function"?s=r.chunkValidator:s=eQ;let o={path:i.path,mtime:i.mtime,mode:i.mode,content:n(s(Bje(i.content),r),r)};yield()=>SX(o,e,r)}else if(i.path){let n={path:i.path,mtime:i.mtime,mode:i.mode};yield()=>nX(n,e,r)}else throw new Error("Import candidate must have content or path or both")}var HS,rQ,iQ=Se(()=>{l();sX();xX();HS=Wt(Uy());QX();JX();tQ();rQ=Mje});var nQ,yf,a5=Se(()=>{l();nQ=class{constructor(e,r){this.options=r||{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime,this.cid=void 0,this.size=void 0}async put(e,r){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}},yf=nQ});var sQ,Vy,$S=Se(()=>{l();wt();pi();a5();L0();sQ=class extends yf{constructor(e,r){super(e,r);this._children={}}async put(e,r){this.cid=void 0,this.size=void 0,this._children[e]=r}get(e){return Promise.resolve(this._children[e])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async*eachChildSeries(){let e=Object.keys(this._children);for(let r=0;r<e.length;r++){let i=e[r];yield{key:i,child:this._children[i]}}}async*flush(e){let r=Object.keys(this._children),i=[];for(let u=0;u<r.length;u++){let f=this._children[r[u]];if(f instanceof yf)for await(let d of f.flush(e))f=d,yield f;f.size!=null&&f.cid&&i.push({Name:r[u],Tsize:f.size,Hash:f.cid})}let n=new _i({type:"directory",mtime:this.mtime,mode:this.mode}),s={Data:n.marshal(),Links:i},o=Oo(Us(s)),a=await Fo(o,e,this.options),c=o.length+s.Links.reduce((u,f)=>u+(f.Tsize==null?0:f.Tsize),0);this.cid=a,this.size=c,yield{cid:a,unixfs:n,path:this.path,size:c}}},Vy=sQ});var cQ=p((gRt,aQ)=>{l();"use strict";var c5=7;aQ.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,r){let i=this._internalPositionFor(e,!1);if(r===void 0)i!==-1&&(this._unsetInternalPos(i),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let n=!1;i===-1?(i=this._data.length,this._setBit(e),this._changedData=!0):n=!0,this._setInternalPos(i,e,r,n),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();let r=this._internalPositionFor(e,!0);if(r!==-1)return this._data[r][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){let e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let r=0;for(;r<this.length;)e(this.get(r),r,this),r++}map(e){let r=0,i=new Array(this.length);for(;r<this.length;)i[r]=e(this.get(r),r,this),r++;return i}reduce(e,r){let i=0,n=r;for(;i<this.length;){let s=this.get(i);n=e(n,s,i),i++}return n}find(e){let r=0,i,n;for(;r<this.length&&!i;)n=this.get(r),i=e(n),r++;return i?n:void 0}_internalPositionFor(e,r){let i=this._bytePosFor(e,r);if(i>=this._bitArrays.length)return-1;let n=this._bitArrays[i],s=e-i*c5;if(!((n&1<<s)>0))return-1;let a=this._bitArrays.slice(0,i).reduce(Lje,0),c=~(4294967295<<s+1),u=oQ(n&c);return a+u-1}_bytePosFor(e,r){let i=Math.floor(e/c5),n=i+1;for(;!r&&this._bitArrays.length<n;)this._bitArrays.push(0);return i}_setBit(e){let r=this._bytePosFor(e,!1);this._bitArrays[r]|=1<<e-r*c5}_unsetBit(e){let r=this._bytePosFor(e,!1);this._bitArrays[r]&=~(1<<e-r*c5)}_setInternalPos(e,r,i,n){let s=this._data,o=[r,i];if(n)this._sortData(),s[e]=o;else{if(s.length)if(s[s.length-1][0]>=r)s.push(o);else if(s[0][0]<=r)s.unshift(o);else{let a=Math.round(s.length/2);this._data=s.slice(0,a).concat(o).concat(s.slice(a))}else this._data.push(o);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(Uje),this._changedData=!1}bitField(){let e=[],r=8,i=0,n=0,s,o=this._bitArrays.slice();for(;o.length||i;){i===0&&(s=o.shift(),i=7);let c=Math.min(i,r),u=~(255<<c);n|=(s&u)<<8-r,s=s>>>c,i-=c,r-=c,(!r||!i&&!o.length)&&(e.push(n),n=0,r=8)}for(var a=e.length-1;a>0&&e[a]===0;a--)e.pop();return e}compactArray(){return this._sortData(),this._data.map(Fje)}};function Lje(t,e){return t+oQ(e)}function oQ(t){let e=t;return e=e-(e>>1&1431655765),e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}function Uje(t,e){return t[0]-e[0]}function Fje(t){return t[1]}});var lQ=p((bRt,fQ)=>{l();"use strict";var jje=cQ(),{fromString:Kje}=(ut(),lt),Ko=class{constructor(e,r,i=0){this._options=e,this._popCount=0,this._parent=r,this._posAtParent=i,this._children=new jje,this.key=null}async put(e,r){let i=await this._findNewBucketAndPos(e);await i.bucket._putAt(i,e,r)}async get(e){let r=await this._findChild(e);if(r)return r.value}async del(e){let r=await this._findPlace(e),i=r.bucket._at(r.pos);i&&i.key===e&&r.bucket._delAt(r.pos)}leafCount(){return this._children.compactArray().reduce((r,i)=>i instanceof Ko?r+i.leafCount():r+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){let e=this._children.compactArray();for(let r of e)r instanceof Ko?yield*r.eachLeafSeries():yield r;return[]}serialize(e,r){let i=[];return r(this._children.reduce((n,s,o)=>(s&&(s instanceof Ko?n.push(s.serialize(e,r)):n.push(e(s,o))),n),i))}asyncTransform(e,r){return uQ(this,e,r)}toJSON(){return this.serialize(zje,Hje)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){let r=await this._findPlace(e),i=r.bucket._at(r.pos);if(!(i instanceof Ko)&&i&&i.key===e)return i}async _findPlace(e){let r=this._options.hash(typeof e=="string"?Kje(e):e),i=await r.take(this._options.bits),n=this._children.get(i);return n instanceof Ko?n._findPlace(r):{bucket:this,pos:i,hash:r,existingChild:n}}async _findNewBucketAndPos(e){let r=await this._findPlace(e);if(r.existingChild&&r.existingChild.key!==e){let i=new Ko(this._options,r.bucket,r.pos);r.bucket._putObjectAt(r.pos,i);let n=await i._findPlace(r.existingChild.hash);return n.bucket._putAt(n,r.existingChild.key,r.existingChild.value),i._findNewBucketAndPos(r.hash)}return r}_putAt(e,r,i){this._putObjectAt(e.pos,{key:r,value:i,hash:e.hash})}_putObjectAt(e,r){this._children.get(e)||this._popCount++,this._children.set(e,r)}_delAt(e){if(e===-1)throw new Error("Invalid position");this._children.get(e)&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent&&this._popCount<=1)if(this._popCount===1){let e=this._children.find(Vje);if(e&&!(e instanceof Ko)){let r=e.hash;r.untake(this._options.bits);let i={pos:this._posAtParent,hash:r,bucket:this._parent};this._parent._putAt(i,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}};function Vje(t){return Boolean(t)}function zje(t,e){return t.key}function Hje(t){return t}async function uQ(t,e,r){let i=[];for(let n of t._children.compactArray())if(n instanceof Ko)await uQ(n,e,r);else{let s=await e(n);i.push({bitField:t._children.bitField(),children:s})}return r(i)}fQ.exports=Ko});var hQ=p((vRt,dQ)=>{l();"use strict";var $je=[255,254,252,248,240,224,192,128],Gje=[1,3,7,15,31,63,127,255];dQ.exports=class{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let r=e,i=0;for(;r&&this._haveBits();){let n=this._value[this._currentBytePos],s=this._currentBitPos+1,o=Math.min(s,r),a=Wje(n,s-o,o);i=(i<<o)+a,r-=o,this._currentBitPos-=o,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return i}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function Wje(t,e,r){let i=Yje(e,r);return(t&i)>>>e}function Yje(t,e){return $je[t]&Gje[Math.min(e+t-1,7)]}});var pQ=p((wRt,GS)=>{l();"use strict";var Xje=hQ(),{concat:Qje}=(fn(),un);function Zje(t){function e(r){return r instanceof u5?r:new u5(r,t)}return e}var u5=class{constructor(e,r){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=r,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let r=e;for(;this._availableBits<r;)await this._produceMoreBits();let i=0;for(;r>0;){let n=this._buffers[this._currentBufferIndex],s=Math.min(n.availableBits(),r),o=n.take(s);i=(i<<s)+o,r-=s,this._availableBits-=s,n.availableBits()===0&&this._currentBufferIndex++}return i}untake(e){let r=e;for(;r>0;){let i=this._buffers[this._currentBufferIndex],n=Math.min(i.totalBits()-i.availableBits(),r);i.untake(n),r-=n,this._availableBits+=n,this._currentBufferIndex>0&&i.totalBits()===i.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;let e=this._depth?Qje([this._value,Uint8Array.from([this._depth])]):this._value,r=await this._hashFn(e),i=new Xje(r);this._buffers.push(i),this._availableBits+=i.availableBits()}};GS.exports=Zje;GS.exports.InfiniteHash=u5});var zy=p((_Rt,gQ)=>{l();"use strict";var yQ=lQ(),Jje=pQ();function eKe(t){if(!t||!t.hashFn)throw new Error("please define an options.hashFn");let e={bits:t.bits||8,hash:Jje(t.hashFn)};return new yQ(e)}gQ.exports={createHAMT:eKe,Bucket:yQ}});async function*vQ(t,e,r,i){let n=t._children,s=[],o=0;for(let y=0;y<n.length;y++){let g=n.get(y);if(!g)continue;let m=y.toString(16).toUpperCase().padStart(2,"0");if(g instanceof f5.Bucket){let E;for await(let v of await vQ(g,e,null,i))E=v;if(!E)throw new Error("Could not flush sharded directory, no subshard found");s.push({Name:m,Tsize:E.size,Hash:E.cid}),o+=E.size}else if(typeof g.value.flush=="function"){let E=g.value,v;for await(let R of E.flush(e))v=R,yield v;let A=m+g.key;s.push({Name:A,Tsize:v.size,Hash:v.cid}),o+=v.size}else{let E=g.value;if(!E.cid)continue;let v=m+g.key,A=E.size;s.push({Name:v,Tsize:A,Hash:E.cid}),o+=A}}let a=Uint8Array.from(n.bitField().reverse()),c=new _i({type:"hamt-sharded-directory",data:a,fanout:t.tableSize(),hashType:i.hamtHashCode,mtime:r&&r.mtime,mode:r&&r.mode}),u={Data:c.marshal(),Links:s},f=Oo(Us(u)),d=await Fo(f,e,i),h=f.length+o;yield{cid:d,unixfs:c,size:h}}var f5,bQ,mQ,wQ=Se(()=>{l();wt();pi();a5();L0();f5=Wt(zy()),bQ=class extends yf{constructor(e,r){super(e,r);this._bucket=(0,f5.createHAMT)({hashFn:r.hamtHashFn,bits:r.hamtBucketBits})}async put(e,r){await this._bucket.put(e,r)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(let{key:e,value:r}of this._bucket.eachLeafSeries())yield{key:e,child:r}}async*flush(e){for await(let r of vQ(this._bucket,e,this,this.options))yield{...r,path:this.path}}},mQ=bQ});async function _Q(t,e,r,i){let n=e;e instanceof Vy&&e.directChildrenCount()>=r&&(n=await tKe(e,i));let s=n.parent;if(s){if(n!==e){if(t&&(t.parent=n),!n.parentKey)throw new Error("No parent key found");await s.put(n.parentKey,n)}return _Q(n,s,r,i)}return n}async function tKe(t,e){let r=new mQ({root:t.root,dir:!0,parent:t.parent,parentKey:t.parentKey,path:t.path,dirty:t.dirty,flat:!1,mtime:t.mtime,mode:t.mode},e);for await(let{key:i,child:n}of t.eachChildSeries())await r.put(i,n);return r}var EQ,SQ=Se(()=>{l();wQ();$S();EQ=_Q});var rKe,xQ,AQ=Se(()=>{l();rKe=(t="")=>(t.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean),xQ=rKe});async function iKe(t,e,r){let i=xQ(t.path||""),n=i.length-1,s=e,o="";for(let a=0;a<i.length;a++){let c=i[a];o+=`${o?"/":""}${c}`;let u=a===n;if(s.dirty=!0,s.cid=void 0,s.size=void 0,u)await s.put(c,t),e=await EQ(null,s,r.shardSplitThreshold,r);else{let f=await s.get(c);(!f||!(f instanceof yf))&&(f=new Vy({root:!1,dir:!0,parent:s,parentKey:c,path:o,dirty:!0,flat:!0,mtime:f&&f.unixfs&&f.unixfs.mtime,mode:f&&f.unixfs&&f.unixfs.mode},r)),await s.put(c,f),s=f}}return e}async function*IQ(t,e){if(!(t instanceof yf)){t&&t.unixfs&&t.unixfs.isDirectory()&&(yield t);return}yield*t.flush(e)}async function*nKe(t,e,r){let i=new Vy({root:!0,dir:!0,path:"",dirty:!0,flat:!0},r);for await(let n of t)!n||(i=await iKe(n,i,r),(!n.unixfs||!n.unixfs.isDirectory())&&(yield n));if(r.wrapWithDirectory)yield*IQ(i,e);else for await(let n of i.eachChildSeries())!n||(yield*IQ(n.child,e))}var TQ,RQ=Se(()=>{l();$S();SQ();a5();AQ();TQ=nKe});var l5={};bt(l5,{importer:()=>sKe});async function*sKe(t,e,r={}){let i=rX(r),n;typeof r.dagBuilder=="function"?n=r.dagBuilder:n=rQ;let s;typeof r.treeBuilder=="function"?s=r.treeBuilder:s=TQ;let o;Symbol.asyncIterator in t||Symbol.iterator in t?o=t:o=[t];for await(let a of s((0,PQ.default)(n(o,e,i),i.fileImportConcurrency),e,i))yield{cid:a.cid,path:a.path,unixfs:a.unixfs,size:a.size}}var PQ,d5=Se(()=>{l();PQ=Wt(Db());iX();iQ();RQ()});var Hy=p((URt,CQ)=>{l();"use strict";async function*oKe(t,e={}){let r=t.getReader();try{for(;;){let i=await r.read();if(i.done)return;yield i.value}}finally{e.preventCancel!==!0&&r.cancel(),r.releaseLock()}}CQ.exports=oKe});var qQ=p((FRt,kQ)=>{l();"use strict";var OQ=Hy();function aKe(t){return typeof t.stream=="function"?OQ(t.stream()):OQ(new Response(t).body)}kQ.exports=aKe});var $y=p((jRt,DQ)=>{l();"use strict";function cKe(t){let[e,r]=t[Symbol.asyncIterator]?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],i=[];return{peek:()=>e.next(),push:n=>{i.push(n)},next:()=>i.length?{done:!1,value:i.shift()}:e.next(),[r](){return this}}}DQ.exports=cKe});var h5=p((KRt,NQ)=>{l();"use strict";function uKe(t){return ArrayBuffer.isView(t)||t instanceof ArrayBuffer}function fKe(t){return t.constructor&&(t.constructor.name==="Blob"||t.constructor.name==="File")&&typeof t.stream=="function"}function lKe(t){return typeof t=="object"&&(t.path||t.content)}var dKe=t=>t&&typeof t.getReader=="function";NQ.exports={isBytes:uKe,isBlob:fKe,isFileObject:lKe,isReadableStream:dKe}});var LQ=p((VRt,MQ)=>{l();"use strict";var hKe=g0(),{fromString:pKe}=(ut(),lt),yKe=Hy(),gKe=qQ(),bKe=$y(),mKe=h0(),vKe=Mo(),{isBytes:BQ,isReadableStream:wKe,isBlob:_Ke}=h5();async function*EKe(t){if(BQ(t)){yield WS(t);return}if(typeof t=="string"||t instanceof String){yield WS(t.toString());return}if(_Ke(t)){yield*gKe(t);return}if(wKe(t)&&(t=yKe(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let e=bKe(t),{value:r,done:i}=await e.peek();if(i){yield*[];return}if(e.push(r),Number.isInteger(r)){yield Uint8Array.from(await mKe(e));return}if(BQ(r)||typeof r=="string"||r instanceof String){yield*vKe(e,WS);return}}throw hKe(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT")}function WS(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Array.isArray(t)?Uint8Array.from(t):pKe(t.toString())}MQ.exports=EKe});var YS=p((zRt,HQ)=>{l();"use strict";var UQ=g0(),SKe=Hy(),xKe=$y(),FQ=Mo(),{isBytes:jQ,isBlob:KQ,isReadableStream:VQ,isFileObject:zQ}=h5(),{parseMtime:AKe,parseMode:IKe}=(pi(),us);HQ.exports=async function*(e,r){if(e==null)throw UQ(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if(typeof e=="string"||e instanceof String){yield U0(e.toString(),r);return}if(jQ(e)||KQ(e)){yield U0(e,r);return}if(VQ(e)&&(e=SKe(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let i=xKe(e),{value:n,done:s}=await i.peek();if(s){yield*[];return}if(i.push(n),Number.isInteger(n)||jQ(n)){yield U0(i,r);return}if(zQ(n)||KQ(n)||typeof n=="string"||n instanceof String){yield*FQ(i,o=>U0(o,r));return}if(n[Symbol.iterator]||n[Symbol.asyncIterator]||VQ(n)){yield*FQ(i,o=>U0(o,r));return}}if(zQ(e)){yield U0(e,r);return}throw UQ(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")};async function U0(t,e){let{path:r,mode:i,mtime:n,content:s}=t,o={path:r||"",mode:IKe(i),mtime:AKe(n)};return s?o.content=await e(s):r||(o.content=await e(t)),o}});var GQ=p((HRt,$Q)=>{l();"use strict";var TKe=LQ(),RKe=YS();function PKe(t){return RKe(t,TKe)}$Q.exports={normaliseInput:PKe}});var XQ=p(($Rt,YQ)=>{l();"use strict";var CKe=t=>{if(t)if(t.startsWith("size-")){let e=t.split("-")[1],r=parseInt(e);if(isNaN(r))throw new Error("Chunker parameter size must be an integer");return{chunker:"fixed",maxChunkSize:r}}else{if(t.startsWith("rabin"))return{chunker:"rabin",...WQ(t)};throw new Error(`Unrecognized chunker option: ${t}`)}else return{chunker:"fixed"}},WQ=t=>{let e={},r=t.split("-");switch(r.length){case 1:e.avgChunkSize=262144;break;case 2:e.avgChunkSize=Gy(r[1],"avg");break;case 4:e.minChunkSize=Gy(r[1],"min"),e.avgChunkSize=Gy(r[2],"avg"),e.maxChunkSize=Gy(r[3],"max");break;default:throw new Error('Incorrect chunker format (expected "rabin" "rabin-[avg]" or "rabin-[min]-[avg]-[max]"')}return e},Gy=(t,e)=>{let r=parseInt(t);if(isNaN(r))throw new Error(`Chunker parameter ${e} must be an integer`);return r};YQ.exports={parseChunkSize:Gy,parseRabinString:WQ,parseChunkerString:CKe}});var ZQ=p((GRt,QQ)=>{l();"use strict";var{importer:OKe}=(d5(),l5),{normaliseInput:kKe}=GQ(),{parseChunkerString:qKe}=XQ(),{pipe:DKe}=Ir(),NKe=ke(),BKe=br().bind({ignoreUndefined:!0});QQ.exports=({repo:t,preload:e,options:r})=>{let i=r&&r.sharding;async function*n(s,o={}){let a=BKe({shardSplitThreshold:i?1e3:1/0,strategy:"balanced"},o,{...qKe(o.chunker)});a.hashAlg&&a.hashAlg!=="sha2-256"&&a.cidVersion!==1&&(a.cidVersion=1),a.trickle&&(a.strategy="trickle"),a.strategy==="trickle"&&(a.leafType="raw",a.reduceSingleLeafToSelf=!1),a.cidVersion>0&&a.rawLeaves===void 0&&(a.rawLeaves=!0),a.hashAlg!==void 0&&a.rawLeaves===void 0&&(a.rawLeaves=!0),delete a.trickle;let c={};if(a.progress){let d=a.progress;a.progress=(h,y)=>{c[y]||(c[y]=0),c[y]+=h,d(c[y],y)}}let u=DKe(kKe(s),d=>OKe(d,t.blocks,{...a,pin:!1}),MKe(a),LKe(e,a),UKe(t,a)),f=await t.gcLock.readLock();try{for await(let d of u)delete c[d.path],yield d}finally{f()}}return NKe(n)};function MKe(t){async function*e(r){for await(let i of r){let n=i.cid;t.cidVersion===1&&(n=n.toV1());let s=i.path?i.path:n.toString();t.wrapWithDirectory&&!i.path&&(s=""),yield{path:s,cid:n,size:i.size,mode:i.unixfs&&i.unixfs.mode,mtime:i.unixfs&&i.unixfs.mtime}}}return e}function LKe(t,e){async function*r(i){for await(let n of i)(!n.path||e.wrapWithDirectory?n.path==="":!n.path.includes("/"))&&!e.onlyHash&&e.preload!==!1&&t(n.cid),yield n}return r}function UKe(t,e){async function*r(i){for await(let n of i){let s=!(n.path&&n.path.includes("/"));(e.pin==null?!0:e.pin)&&s&&!e.onlyHash&&await t.pins.pinRecursively(n.cid),yield n}}return r}});var Zc=p((WRt,eZ)=>{l();"use strict";function JQ(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function FKe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return JQ(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),JQ(new n,r)}}eZ.exports=FKe});var p5,jKe,KKe,tZ,VKe,rZ,iZ,nZ=Se(()=>{l();p5=Wt(zy());wt();i5();jKe=async function(t){return(await Ly.encode(t)).slice(0,8).reverse()},KKe=(t,e,r)=>Promise.all(t.map(i=>{if(i.Name==null)throw new Error("Unexpected Link without a Name");if(i.Name.length===2){let n=parseInt(i.Name,16);return e._putObjectAt(n,new p5.Bucket({hash:r._options.hash,bits:r._options.bits},e,n))}return r.put(i.Name.substring(2),!0)})),tZ=t=>t.toString(16).toUpperCase().padStart(2,"0").substring(0,2),VKe=t=>{let e=t.bucket,r=[];for(;e._parent;)r.push(e),e=e._parent;return r.push(e),r.reverse()},rZ=async(t,e,r,i,n)=>{if(!i){let f=(0,p5.createHAMT)({hashFn:jKe});i={rootBucket:f,hamtDepth:1,lastBucket:f}}await KKe(t.Links,i.lastBucket,i.rootBucket);let s=await i.rootBucket._findNewBucketAndPos(e),o=tZ(s.pos),a=VKe(s);a.length>i.hamtDepth&&(i.lastBucket=a[i.hamtDepth],o=tZ(i.lastBucket._posAtParent));let c=t.Links.find(f=>{if(f.Name==null)return!1;let d=f.Name.substring(0,2),h=f.Name.substring(2);return!(d!==o||h&&h!==e)});if(!c)return null;if(c.Name!=null&&c.Name.substring(2)===e)return c.Hash;i.hamtDepth++;let u=await r.get(c.Hash,n);return t=Hc(u),rZ(t,e,r,i,n)},iZ=rZ});function zKe(t,e,r,i){let n=t.length,s=e+n;return r>=s||i<e?new Uint8Array(0):(i>=e&&i<s&&(t=t.slice(0,i-e)),r>=e&&r<s&&(t=t.slice(r-e)),t)}var Gl,y5=Se(()=>{l();Gl=zKe});var g5,HKe,F0,b5=Se(()=>{l();g5=Wt(Zc()),HKe=(t,e,r)=>{if(e||(e=0),e<0)throw(0,g5.default)(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(e>t)throw(0,g5.default)(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(!r&&r!==0&&(r=t-e),r<0)throw(0,g5.default)(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return e+r>t&&(r=t-e),{offset:e,length:r}},F0=HKe});async function*sZ(t,e,r,i,n=0,s){if(e instanceof Uint8Array){let c=Gl(e,n,r,i);return c.length&&(yield c),n+=c.length,n}if(e.Data==null)throw(0,XS.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let o;try{o=_i.unmarshal(e.Data)}catch(c){throw(0,XS.default)(c,"ERR_NOT_UNIXFS")}if(o.data&&o.data.length){let c=Gl(o.data,n,r,i);c.length&&(yield c),n+=o.data.length}let a=n;for(let c=0;c<e.Links.length;c++){let u=e.Links[c],f=n+o.blockSizes[c];if(r>=a&&r<f||i>a&&i<=f||r<a&&i>f){let d=await t.get(u.Hash,{signal:s.signal}),h;switch(u.Hash.code){case $2:h=await Hc(d);break;case Dc:h=d;break;case ey:h=await kl(d);break;default:throw Error(`Unsupported codec: ${u.Hash.code}`)}for await(let y of sZ(t,h,r,i,n,s))n+=y.length,yield y}n=f,a=f+1}}var XS,$Ke,QS,oZ=Se(()=>{l();y5();b5();pi();XS=Wt(Zc());wt();Gc();Os();$Ke=(t,e,r,i,n,s,o)=>{function a(c={}){let u=r.fileSize();if(u===void 0)throw new Error("File was a directory");let{offset:f,length:d}=F0(u,c.offset,c.length),h=f,y=f+d;return sZ(o,e,h,y,0,c)}return a},QS=$Ke});var GKe,aZ,cZ=Se(()=>{l();GKe=(t,e,r,i,n,s,o)=>{async function*a(c={}){let u=c.offset||0,f=c.length||e.Links.length,d=e.Links.slice(u,f);for(let h of d){let y=await n(h.Hash,h.Name||"",`${i}/${h.Name||""}`,[],s+1,o,c);y.entry&&(yield y.entry)}}return a},aZ=GKe});async function*uZ(t,e,r,i,n,s){let o=t.Links;for(let a of o){let c=a.Name!=null?a.Name.substring(2):null;if(c)yield(await r(a.Hash,c,`${e}/${c}`,[],i+1,n,s)).entry;else{let u=await n.get(a.Hash);t=Hc(u);for await(let f of uZ(t,e,r,i,n,s))yield f}}}var WKe,fZ,lZ=Se(()=>{l();wt();WKe=(t,e,r,i,n,s,o)=>{function a(c={}){return uZ(e,i,n,s,o,c)}return a};fZ=WKe});var m5,YKe,XKe,QKe,dZ,hZ=Se(()=>{l();m5=Wt(Zc());pi();nZ();wt();oZ();cZ();lZ();YKe=(t,e)=>{let r=t.Links.find(i=>i.Name===e);return r&&r.Hash},XKe={raw:QS,file:QS,directory:aZ,"hamt-sharded-directory":fZ,metadata:(t,e,r,i,n,s,o)=>()=>[],symlink:(t,e,r,i,n,s,o)=>()=>[]},QKe=async(t,e,r,i,n,s,o,a)=>{let c=await o.get(t,a),u=Hc(c),f,d;if(e||(e=t.toString()),u.Data==null)throw(0,m5.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{f=_i.unmarshal(u.Data)}catch(h){throw(0,m5.default)(h,"ERR_NOT_UNIXFS")}if(r||(r=e),i.length){let h;if(f&&f.type==="hamt-sharded-directory"?h=await iZ(u,i[0],o):h=YKe(u,i[0]),!h)throw(0,m5.default)(new Error("file does not exist"),"ERR_NOT_FOUND");let y=i.shift(),g=`${r}/${y}`;d={cid:h,toResolve:i,name:y||"",path:g}}return{entry:{type:f.isDirectory()?"directory":"file",name:e,path:r,cid:t,content:XKe[f.type](t,u,f,r,n,s,o),unixfs:f,depth:s,node:u,size:f.fileSize()},next:d}},dZ=QKe});var pZ,ZKe,JKe,yZ,gZ=Se(()=>{l();pZ=Wt(Zc());y5();b5();ZKe=t=>{async function*e(r={}){let{offset:i,length:n}=F0(t.length,r.offset,r.length);yield Gl(t,0,i,i+n)}return e},JKe=async(t,e,r,i,n,s,o,a)=>{if(i.length)throw(0,pZ.default)(new Error(`No link named ${r} found in raw node ${t}`),"ERR_NOT_FOUND");let c=await o.get(t,a);return{entry:{type:"raw",name:e,path:r,cid:t,content:ZKe(c),depth:s,size:c.length,node:c}}},yZ=JKe});var bZ,eVe,mZ,vZ=Se(()=>{l();Ae();bZ=Wt(Zc());Gc();eVe=async(t,e,r,i,n,s,o,a)=>{let c=await o.get(t),u=kl(c),f=u,d=r;for(;i.length;){let h=i[0];if(h in f){i.shift(),d=`${d}/${h}`;let y=Ge.asCID(f[h]);if(y)return{entry:{type:"object",name:e,path:r,cid:t,node:c,depth:s,size:c.length,content:async function*(){yield u}},next:{cid:y,name:h,path:d,toResolve:i}};f=f[h]}else throw(0,bZ.default)(new Error(`No property named ${h} found in cbor node ${t}`),"ERR_NO_PROP")}return{entry:{type:"object",name:e,path:r,cid:t,node:c,depth:s,size:c.length,content:async function*(){yield u}}}},mZ=eVe});var wZ,tVe,rVe,_Z,EZ=Se(()=>{l();wZ=Wt(Zc());y5();b5();An();tVe=t=>{async function*e(r={}){let{offset:i,length:n}=F0(t.length,r.offset,r.length);yield Gl(t,0,i,i+n)}return e},rVe=async(t,e,r,i,n,s,o,a)=>{if(i.length)throw(0,wZ.default)(new Error(`No link named ${r} found in raw node ${t}`),"ERR_NOT_FOUND");let c=await Du(t.multihash.bytes);return{entry:{type:"identity",name:e,path:r,cid:t,content:tVe(c.digest),depth:s,size:c.digest.length,node:c.digest}}},_Z=rVe});function xZ(t,e,r,i,n,s,o){let a=iVe[t.code];if(!a)throw(0,SZ.default)(new Error(`No resolver for code ${t.code}`),"ERR_NO_RESOLVER");return a(t,e,r,i,xZ,n,s,o)}var SZ,iVe,AZ,IZ=Se(()=>{l();SZ=Wt(Zc());wt();Gc();Os();qc();hZ();gZ();vZ();EZ();iVe={[$2]:dZ,[Dc]:yZ,[ey]:mZ,[Zw.code]:_Z};AZ=xZ});var Vo={};bt(Vo,{exporter:()=>PZ,recursive:()=>oVe,walkPath:()=>RZ});async function*RZ(t,e,r={}){let{cid:i,toResolve:n}=sVe(t),s=i.toString(),o=s,a=n.length;for(;;){let c=await AZ(i,s,o,n,a,e,r);if(!c.entry&&!c.next)throw(0,v5.default)(new Error(`Could not resolve ${t}`),"ERR_NOT_FOUND");if(c.entry&&(yield c.entry),!c.next)return;n=c.next.toResolve,i=c.next.cid,s=c.next.name,o=c.next.path}}async function PZ(t,e,r={}){let i=await(0,TZ.default)(RZ(t,e,r));if(!i)throw(0,v5.default)(new Error(`Could not resolve ${t}`),"ERR_NOT_FOUND");return i}async function*oVe(t,e,r={}){let i=await PZ(t,e,r);if(!i)return;if(yield i,i.type==="directory")for await(let s of n(i,r))yield s;async function*n(s,o){for await(let a of s.content(o))yield a,!(a instanceof Uint8Array)&&a.type==="directory"&&(yield*n(a,o))}}var v5,TZ,nVe,sVe,zo=Se(()=>{l();v5=Wt(Zc());Ae();IZ();TZ=Wt(Gn()),nVe=(t="")=>(t.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean),sVe=t=>{if(t instanceof Uint8Array)return{cid:Ge.decode(t),toResolve:[]};let e=Ge.asCID(t);if(e)return{cid:e,toResolve:[]};if(typeof t=="string"){t.indexOf("/ipfs/")===0&&(t=t.substring(6));let r=nVe(t);return{cid:Ge.parse(r[0]),toResolve:r.slice(1)}}throw(0,v5.default)(new Error(`Unknown path type ${t}`),"ERR_BAD_PATH")}});var OZ=p((LPt,CZ)=>{l();"use strict";var{exporter:aVe}=(zo(),Vo),{normalizeCidPath:cVe}=Ki(),uVe=ke(),{CID:fVe}=(Ae(),De);CZ.exports=function({repo:t,preload:e}){async function*r(i,n={}){if(i=cVe(i),n.preload!==!1){let o=i.split("/");e(fVe.parse(o[0]))}let s=await aVe(i,t.blocks,n);if(s.type==="directory")throw new Error("this dag node is a directory");if(!s.content)throw new Error("this dag node has no content");yield*s.content(n)}return uVe(r)}});var gf=p((UPt,kZ)=>{l();"use strict";var lVe=()=>{let t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t};kZ.exports=lVe});var NZ=p(_5=>{l();var{Buffer:ZS}=Vt(),j0=bn(),dVe="0".charCodeAt(0),hVe=ZS.from("ustar\0","binary"),pVe=ZS.from("ustar ","binary"),yVe=ZS.from(" \0","binary"),w5=257,qZ=263,gVe=function(t,e,r){return typeof t!="number"?r:(t=~~t,t>=e?e:t>=0||(t+=e,t>=0)?t:0)},bVe=function(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null},DZ=function(t,e,r,i){for(;r<i;r++)if(t.get(r)===e)return r;return i},mVe=function(t){let e=8*32;for(let r=0;r<148;r++)e+=t.get(r);for(let r=156;r<512;r++)e+=t.get(r);return e};function vVe(t){let e;if(t.get(0)===128)e=!0;else if(t.get(0)===255)e=!1;else return null;let r=!1,i=[];for(let o=t.length-1;o>0;o--){let a=t.get(o);e?i.push(a):r&&a===0?i.push(0):r?(r=!1,i.push(256-a)):i.push(255-a)}let n=0,s=i.length;for(let o=0;o<s;o++)n+=i[o]*Math.pow(256,o);return e?n:-1*n}var bf=function(t,e,r){if(t=t.shallowSlice(e,e+r),e=0,t.get(e)&128)return vVe(t);{for(;e<t.length&&t.get(e)===32;)e++;let i=gVe(DZ(t,32,e,t.length),t.length,t.length);for(;e<i&&t.get(e)===0;)e++;return i===e?0:parseInt(t.shallowSlice(e,i).toString(),8)}},K0=function(t,e,r,i){return t.shallowSlice(e,DZ(t,0,e,e+r)).toString(i)};_5.decodeLongPath=function(t,e){return t=j0.isBufferList(t)?t:new j0(t),K0(t,0,t.length,e)};_5.decodePax=function(t){t=j0.isBufferList(t)?t:new j0(t);let e={};for(;t.length;){let r=0;for(;r<t.length&&t.get(r)!==32;)r++;let i=parseInt(t.shallowSlice(0,r).toString(),10);if(!i)return e;let n=t.shallowSlice(r+1,i-1).toString(),s=n.indexOf("=");if(s===-1)return e;e[n.slice(0,s)]=n.slice(s+1),t=t.shallowSlice(i)}return e};_5.decode=function(t,e){t=j0.isBufferList(t)?t:new j0(t);let r=t.get(156)===0?0:t.get(156)-dVe,i=K0(t,0,100,e),n=bf(t,100,8),s=bf(t,108,8),o=bf(t,116,8),a=bf(t,124,12),c=bf(t,136,12),u=bVe(r),f=t.get(157)===0?null:K0(t,157,100,e),d=K0(t,265,32),h=K0(t,297,32),y=bf(t,329,8),g=bf(t,337,8),m=mVe(t);if(m===8*32)return null;if(m!==bf(t,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(hVe.compare(t.slice(w5,w5+6))===0)t.get(345)&&(i=K0(t,345,155,e)+"/"+i);else if(!(pVe.compare(t.slice(w5,w5+6))===0&&yVe.compare(t.slice(qZ,qZ+2))===0))throw new Error("Invalid tar header: unknown format.");return r===0&&i&&i[i.length-1]==="/"&&(r=5),{name:i,mode:n,uid:s,gid:o,size:a,mtime:new Date(1e3*c),type:u,linkname:f,uname:d,gname:h,devmajor:y,devminor:g}}});var E5=p((jPt,BZ)=>{l();var JS=bn();BZ.exports=t=>{let e=async function*(){let r=yield,i=new JS;for await(let n of t){if(!r){r=yield i.append(n),i=new JS;continue}for(i.append(n);i.length>=r;){let s=i.shallowSlice(0,r);if(i.consume(r),r=yield s,!r){i.length&&(r=yield i,i=new JS);break}}}if(r)throw Object.assign(new Error(`stream ended before ${r} bytes became available`),{code:"ERR_UNDER_READ",buffer:i})}();return e.next(),e}});var LZ=p((KPt,MZ)=>{l();var ex=bn(),wVe=E5();MZ.exports=function(e){let r=wVe(e),i,n={[Symbol.asyncIterator]:()=>n,async next(s){if(i){let o;if(s==null||i.length===s)o=i,i=null;else if(i.length>s)o=i.shallowSlice(0,s),i=i.shallowSlice(s);else if(i.length<s){let{value:a,done:c}=await r.next(s-i.length);if(c)throw Object.assign(new Error(`stream ended before ${s-i.length} bytes became available`),{code:"ERR_UNDER_READ"});o=new ex([i,a]),i=null}return{value:o}}return r.next(s)},async nextLte(s){let{done:o,value:a}=await n.next();return o?{done:o}:a.length<=s?{value:a}:(a=ex.isBufferList(a)?a:new ex(a),i?i.append(a.shallowSlice(s)):i=a.shallowSlice(s),{value:a.shallowSlice(0,s)})},return(){return r.return()}};return n}});var FZ=p((VPt,UZ)=>{l();var _Ve=gf(),Wy=NZ(),EVe=LZ();function SVe(t){return t&=511,t&&512-t}async function Yy(t,e){let r=SVe(e);r&&await t.next(r)}UZ.exports=t=>(t=t||{},t.highWaterMark=t.highWaterMark||1024*16,e=>async function*(){let r=EVe(e),i,n,s,o;try{for(;;){let a;try{let{done:y,value:g}=await r.next(512);if(y)return;a=g}catch(y){if(y.code==="ERR_UNDER_READ")return;throw y}let c=Wy.decode(a,t.filenameEncoding);if(!c)continue;if(c.type==="gnu-long-path"){let{done:y,value:g}=await r.next(c.size);if(y)return;i=Wy.decodeLongPath(g,t.filenameEncoding),await Yy(r,c.size);continue}if(c.type==="gnu-long-link-path"){let{done:y,value:g}=await r.next(c.size);if(y)return;n=Wy.decodeLongPath(g,t.filenameEncoding),await Yy(r,c.size);continue}if(c.type==="pax-global-header"){let{done:y,value:g}=await r.next(c.size);if(y)return;s=Wy.decodePax(g,t.filenameEncoding),await Yy(r,c.size);continue}if(c.type==="pax-header"){let{done:y,value:g}=await r.next(c.size);if(y)return;o=Wy.decodePax(g,t.filenameEncoding),s&&(o={...s,...o}),await Yy(r,c.size);continue}if(i&&(c.name=i,i=null),n&&(c.linkname=n,n=null),o&&(o.path&&(c.name=o.path),o.linkpath&&(c.linkname=o.linkpath),o.size&&(c.size=parseInt(o.size,10)),c.pax=o,o=null),!c.size||c.type==="directory"){yield{header:c,body:async function*(){}()};continue}let u=c.size,f=_Ve(),d=await r.nextLte(Math.min(u,t.highWaterMark));u-=d.value.length,u||f.resolve();let h=async function*(){try{for(yield d.value;u;){let{done:y,value:g}=await r.nextLte(u);if(y){u=0;return}u-=g.length,yield g}}finally{f.resolve()}}();if(yield{header:c,body:h},await f.promise,u)for await(let y of h);await Yy(r,c.size)}}finally{await r.return()}}())});var KZ=p((zPt,jZ)=>{l();"use strict";jZ.exports={RTLD_LAZY:1,RTLD_NOW:2,RTLD_GLOBAL:8,RTLD_LOCAL:4,E2BIG:7,EACCES:13,EADDRINUSE:48,EADDRNOTAVAIL:49,EAFNOSUPPORT:47,EAGAIN:35,EALREADY:37,EBADF:9,EBADMSG:94,EBUSY:16,ECANCELED:89,ECHILD:10,ECONNABORTED:53,ECONNREFUSED:61,ECONNRESET:54,EDEADLK:11,EDESTADDRREQ:39,EDOM:33,EDQUOT:69,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:65,EIDRM:90,EILSEQ:92,EINPROGRESS:36,EINTR:4,EINVAL:22,EIO:5,EISCONN:56,EISDIR:21,ELOOP:62,EMFILE:24,EMLINK:31,EMSGSIZE:40,EMULTIHOP:95,ENAMETOOLONG:63,ENETDOWN:50,ENETRESET:52,ENETUNREACH:51,ENFILE:23,ENOBUFS:55,ENODATA:96,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:77,ENOLINK:97,ENOMEM:12,ENOMSG:91,ENOPROTOOPT:42,ENOSPC:28,ENOSR:98,ENOSTR:99,ENOSYS:78,ENOTCONN:57,ENOTDIR:20,ENOTEMPTY:66,ENOTSOCK:38,ENOTSUP:45,ENOTTY:25,ENXIO:6,EOPNOTSUPP:102,EOVERFLOW:84,EPERM:1,EPIPE:32,EPROTO:100,EPROTONOSUPPORT:43,EPROTOTYPE:41,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:70,ETIME:101,ETIMEDOUT:60,ETXTBSY:26,EWOULDBLOCK:35,EXDEV:18,PRIORITY_LOW:19,PRIORITY_BELOW_NORMAL:10,PRIORITY_NORMAL:0,PRIORITY_ABOVE_NORMAL:-7,PRIORITY_HIGH:-14,PRIORITY_HIGHEST:-20,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:10,SIGFPE:8,SIGKILL:9,SIGUSR1:30,SIGSEGV:11,SIGUSR2:31,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:20,SIGCONT:19,SIGSTOP:17,SIGTSTP:18,SIGTTIN:21,SIGTTOU:22,SIGURG:16,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:23,SIGINFO:29,SIGSYS:12,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,O_RDONLY:0,O_WRONLY:1,O_RDWR:2,UV_DIRENT_UNKNOWN:0,UV_DIRENT_FILE:1,UV_DIRENT_DIR:2,UV_DIRENT_LINK:3,UV_DIRENT_FIFO:4,UV_DIRENT_SOCKET:5,UV_DIRENT_CHAR:6,UV_DIRENT_BLOCK:7,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:512,O_EXCL:2048,UV_FS_O_FILEMAP:0,O_NOCTTY:131072,O_TRUNC:1024,O_APPEND:8,O_DIRECTORY:1048576,O_NOFOLLOW:256,O_SYNC:128,O_DSYNC:4194304,O_SYMLINK:2097152,O_NONBLOCK:4,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_COPYFILE_EXCL:1,COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_FICLONE_FORCE:4,OPENSSL_VERSION_NUMBER:269488319,SSL_OP_ALL:2147485780,SSL_OP_ALLOW_NO_DHE_KEX:1024,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:0,SSL_OP_MICROSOFT_SESS_ID_BUG:0,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:0,SSL_OP_NETSCAPE_CHALLENGE_BUG:0,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:0,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:0,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_ENCRYPT_THEN_MAC:524288,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_RENEGOTIATION:1073741824,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:0,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_NO_TLSv1_3:536870912,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_PRIORITIZE_CHACHA:2097152,SSL_OP_SINGLE_DH_USE:0,SSL_OP_SINGLE_ECDH_USE:0,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:0,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:0,SSL_OP_TLS_D5_BUG:0,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_RSA:1,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_EC:2048,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,RSA_PSS_SALTLEN_DIGEST:-1,RSA_PSS_SALTLEN_MAX_SIGN:-2,RSA_PSS_SALTLEN_AUTO:-2,defaultCoreCipherList:"TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:DHE-RSA-AES256-SHA384:ECDHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA256:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!SRP:!CAMELLIA",TLS1_VERSION:769,TLS1_1_VERSION:770,TLS1_2_VERSION:771,TLS1_3_VERSION:772,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}});var zZ=p((HPt,VZ)=>{l();var xVe=bn(),tx={string:()=>"",buffer:()=>xVe()};VZ.exports=async(t,e)=>{if(e=e||{},e.type&&!tx[e.type])throw new Error(`invalid type "${e.type}"`);let r,i;for await(let n of t)r||(i=e.type||(typeof n=="string"?"string":"buffer"),r=tx[i]()),i==="string"?r+=n:r.append(n);return r||tx[e.type||"buffer"]()}});var HZ=p(ix=>{l();var{Buffer:$a}=Vt(),AVe=$a.alloc,IVe="0000000000000000000",TVe="7777777777777777777",RVe="0".charCodeAt(0),PVe=$a.from("ustar\0","binary"),CVe=$a.from("00","binary"),OVe=parseInt("7777",8),kVe=257,qVe=263,DVe=function(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0},NVe=function(t){let e=8*32;for(let r=0;r<148;r++)e+=t[r];for(let r=156;r<512;r++)e+=t[r];return e},mf=function(t,e){return t=t.toString(8),t.length>e?TVe.slice(0,e)+" ":IVe.slice(0,e-t.length)+t+" "},rx=function(t){let e=$a.byteLength(t),r=Math.floor(Math.log(e)/Math.log(10))+1;return e+r>=Math.pow(10,r)&&r++,e+r+t};ix.encodePax=function(t){let e="";t.name&&(e+=rx(" path="+t.name+`
`)),t.linkname&&(e+=rx(" linkpath="+t.linkname+`
`));let r=t.pax;if(r)for(let i in r)e+=rx(" "+i+"="+r[i]+`
`);return $a.from(e)};ix.encode=function(t){let e=AVe(512),r=t.name,i="";if(t.typeflag===5&&r[r.length-1]!=="/"&&(r+="/"),$a.byteLength(r)!==r.length)return null;for(;$a.byteLength(r)>100;){let n=r.indexOf("/");if(n===-1)return null;i+=i?"/"+r.slice(0,n):r.slice(0,n),r=r.slice(n+1)}return $a.byteLength(r)>100||$a.byteLength(i)>155||t.linkname&&$a.byteLength(t.linkname)>100?null:(e.write(r),e.write(mf(t.mode&OVe,6),100),e.write(mf(t.uid,6),108),e.write(mf(t.gid,6),116),e.write(mf(t.size,11),124),e.write(mf(t.mtime.getTime()/1e3|0,11),136),e[156]=RVe+DVe(t.type),t.linkname&&e.write(t.linkname,157),PVe.copy(e,kVe),CVe.copy(e,qVe),t.uname&&e.write(t.uname,265),t.gname&&e.write(t.gname,297),e.write(mf(t.devmajor||0,6),329),e.write(mf(t.devminor||0,6),337),i&&e.write(i,345),e.write(mf(NVe(e),6),148),e)}});var WZ=p((GPt,GZ)=>{l();var{Buffer:nx}=Vt(),Wl=bn(),{S_IFMT:BVe,S_IFBLK:MVe,S_IFCHR:LVe,S_IFDIR:UVe,S_IFIFO:FVe,S_IFLNK:jVe}=KZ(),KVe=zZ(),S5=HZ(),VVe=parseInt("755",8),zVe=parseInt("644",8),$Z=nx.alloc(1024);function HVe(t){switch(t&BVe){case MVe:return"block-device";case LVe:return"character-device";case UVe:return"directory";case FVe:return"fifo";case jVe:return"symlink"}return"file"}function sx(t){if(t&=511,t)return new Wl($Z.slice(0,512-t))}function ox(t){if(!t.pax){let e=S5.encode(t);if(e)return e}return $Ve(t)}function $Ve(t){let e=S5.encodePax({name:t.name,linkname:t.linkname,pax:t.pax}),r={name:"PaxHeader",mode:t.mode,uid:t.uid,gid:t.gid,size:e.length,mtime:t.mtime,type:"pax-header",linkname:t.linkname&&"PaxHeader",uname:t.uname,gname:t.gname,devmajor:t.devmajor,devminor:t.devminor};return new Wl([S5.encode(r),e,sx(e.length),S5.encode({...r,size:t.size,type:t.type})])}GZ.exports=()=>async function*(t){for await(let{header:e,body:r}of t){if((!e.size||e.type==="symlink")&&(e.size=0),e.type||(e.type=HVe(e.mode)),e.mode||(e.mode=e.type==="directory"?VVe:zVe),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),typeof r=="string"&&(r=nx.from(r)),nx.isBuffer(r)||Wl.isBufferList(r)){e.size=r.length,yield new Wl([ox(e),r,sx(e.size)]);continue}if(e.type==="symlink"&&!e.linkname){e.linkname=(await KVe(r)).toString(),yield ox(e);continue}if(yield ox(e),e.type!=="file"&&e.type!=="contiguous-file")continue;let i=0;for await(let s of r)i+=s.length,yield Wl.isBufferList(s)?s:new Wl(s);if(i!==e.size)throw new Error("size mismatch");let n=sx(e.size);n&&(yield n)}yield new Wl($Z)}});var YZ=p(ax=>{l();ax.extract=FZ();ax.pack=WZ()});var Jc=p(On=>{l();"use strict";var GVe=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";function WVe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}On.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(!!r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(var i in r)WVe(r,i)&&(t[i]=r[i])}}return t};On.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var YVe={arraySet:function(t,e,r,i,n){if(e.subarray&&t.subarray){t.set(e.subarray(r,r+i),n);return}for(var s=0;s<i;s++)t[n+s]=e[r+s]},flattenChunks:function(t){var e,r,i,n,s,o;for(i=0,e=0,r=t.length;e<r;e++)i+=t[e].length;for(o=new Uint8Array(i),n=0,e=0,r=t.length;e<r;e++)s=t[e],o.set(s,n),n+=s.length;return o}},XVe={arraySet:function(t,e,r,i,n){for(var s=0;s<i;s++)t[n+s]=e[r+s]},flattenChunks:function(t){return[].concat.apply([],t)}};On.setTyped=function(t){t?(On.Buf8=Uint8Array,On.Buf16=Uint16Array,On.Buf32=Int32Array,On.assign(On,YVe)):(On.Buf8=Array,On.Buf16=Array,On.Buf32=Array,On.assign(On,XVe))};On.setTyped(GVe)});var mJ=p(H0=>{l();"use strict";var QVe=Jc(),ZVe=4,XZ=0,QZ=1,JVe=2;function V0(t){for(var e=t.length;--e>=0;)t[e]=0}var eze=0,ZZ=1,tze=2,rze=3,ize=258,cx=29,Xy=256,Qy=Xy+1+cx,z0=30,ux=19,JZ=2*Qy+1,Yl=15,fx=16,nze=7,lx=256,eJ=16,tJ=17,rJ=18,dx=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x5=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],sze=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],iJ=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],oze=512,eu=new Array((Qy+2)*2);V0(eu);var Zy=new Array(z0*2);V0(Zy);var Jy=new Array(oze);V0(Jy);var eg=new Array(ize-rze+1);V0(eg);var hx=new Array(cx);V0(hx);var A5=new Array(z0);V0(A5);function px(t,e,r,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}var nJ,sJ,oJ;function yx(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function aJ(t){return t<256?Jy[t]:Jy[256+(t>>>7)]}function tg(t,e){t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255}function Zn(t,e,r){t.bi_valid>fx-r?(t.bi_buf|=e<<t.bi_valid&65535,tg(t,t.bi_buf),t.bi_buf=e>>fx-t.bi_valid,t.bi_valid+=r-fx):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function Ga(t,e,r){Zn(t,r[e*2],r[e*2+1])}function cJ(t,e){var r=0;do r|=t&1,t>>>=1,r<<=1;while(--e>0);return r>>>1}function aze(t){t.bi_valid===16?(tg(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)}function cze(t,e){var r=e.dyn_tree,i=e.max_code,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,c=e.stat_desc.max_length,u,f,d,h,y,g,m=0;for(h=0;h<=Yl;h++)t.bl_count[h]=0;for(r[t.heap[t.heap_max]*2+1]=0,u=t.heap_max+1;u<JZ;u++)f=t.heap[u],h=r[r[f*2+1]*2+1]+1,h>c&&(h=c,m++),r[f*2+1]=h,!(f>i)&&(t.bl_count[h]++,y=0,f>=a&&(y=o[f-a]),g=r[f*2],t.opt_len+=g*(h+y),s&&(t.static_len+=g*(n[f*2+1]+y)));if(m!==0){do{for(h=c-1;t.bl_count[h]===0;)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[c]--,m-=2}while(m>0);for(h=c;h!==0;h--)for(f=t.bl_count[h];f!==0;)d=t.heap[--u],!(d>i)&&(r[d*2+1]!==h&&(t.opt_len+=(h-r[d*2+1])*r[d*2],r[d*2+1]=h),f--)}}function uJ(t,e,r){var i=new Array(Yl+1),n=0,s,o;for(s=1;s<=Yl;s++)i[s]=n=n+r[s-1]<<1;for(o=0;o<=e;o++){var a=t[o*2+1];a!==0&&(t[o*2]=cJ(i[a]++,a))}}function uze(){var t,e,r,i,n,s=new Array(Yl+1);for(r=0,i=0;i<cx-1;i++)for(hx[i]=r,t=0;t<1<<dx[i];t++)eg[r++]=i;for(eg[r-1]=i,n=0,i=0;i<16;i++)for(A5[i]=n,t=0;t<1<<x5[i];t++)Jy[n++]=i;for(n>>=7;i<z0;i++)for(A5[i]=n<<7,t=0;t<1<<x5[i]-7;t++)Jy[256+n++]=i;for(e=0;e<=Yl;e++)s[e]=0;for(t=0;t<=143;)eu[t*2+1]=8,t++,s[8]++;for(;t<=255;)eu[t*2+1]=9,t++,s[9]++;for(;t<=279;)eu[t*2+1]=7,t++,s[7]++;for(;t<=287;)eu[t*2+1]=8,t++,s[8]++;for(uJ(eu,Qy+1,s),t=0;t<z0;t++)Zy[t*2+1]=5,Zy[t*2]=cJ(t,5);nJ=new px(eu,dx,Xy+1,Qy,Yl),sJ=new px(Zy,x5,0,z0,Yl),oJ=new px(new Array(0),sze,0,ux,nze)}function fJ(t){var e;for(e=0;e<Qy;e++)t.dyn_ltree[e*2]=0;for(e=0;e<z0;e++)t.dyn_dtree[e*2]=0;for(e=0;e<ux;e++)t.bl_tree[e*2]=0;t.dyn_ltree[lx*2]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function lJ(t){t.bi_valid>8?tg(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function fze(t,e,r,i){lJ(t),i&&(tg(t,r),tg(t,~r)),QVe.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function dJ(t,e,r,i){var n=e*2,s=r*2;return t[n]<t[s]||t[n]===t[s]&&i[e]<=i[r]}function gx(t,e,r){for(var i=t.heap[r],n=r<<1;n<=t.heap_len&&(n<t.heap_len&&dJ(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!dJ(e,i,t.heap[n],t.depth));)t.heap[r]=t.heap[n],r=n,n<<=1;t.heap[r]=i}function hJ(t,e,r){var i,n,s=0,o,a;if(t.last_lit!==0)do i=t.pending_buf[t.d_buf+s*2]<<8|t.pending_buf[t.d_buf+s*2+1],n=t.pending_buf[t.l_buf+s],s++,i===0?Ga(t,n,e):(o=eg[n],Ga(t,o+Xy+1,e),a=dx[o],a!==0&&(n-=hx[o],Zn(t,n,a)),i--,o=aJ(i),Ga(t,o,r),a=x5[o],a!==0&&(i-=A5[o],Zn(t,i,a)));while(s<t.last_lit);Ga(t,lx,e)}function bx(t,e){var r=e.dyn_tree,i=e.stat_desc.static_tree,n=e.stat_desc.has_stree,s=e.stat_desc.elems,o,a,c=-1,u;for(t.heap_len=0,t.heap_max=JZ,o=0;o<s;o++)r[o*2]!==0?(t.heap[++t.heap_len]=c=o,t.depth[o]=0):r[o*2+1]=0;for(;t.heap_len<2;)u=t.heap[++t.heap_len]=c<2?++c:0,r[u*2]=1,t.depth[u]=0,t.opt_len--,n&&(t.static_len-=i[u*2+1]);for(e.max_code=c,o=t.heap_len>>1;o>=1;o--)gx(t,r,o);u=s;do o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],gx(t,r,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,r[u*2]=r[o*2]+r[a*2],t.depth[u]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,r[o*2+1]=r[a*2+1]=u,t.heap[1]=u++,gx(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],cze(t,e),uJ(r,c,t.bl_count)}function pJ(t,e,r){var i,n=-1,s,o=e[0*2+1],a=0,c=7,u=4;for(o===0&&(c=138,u=3),e[(r+1)*2+1]=65535,i=0;i<=r;i++)s=o,o=e[(i+1)*2+1],!(++a<c&&s===o)&&(a<u?t.bl_tree[s*2]+=a:s!==0?(s!==n&&t.bl_tree[s*2]++,t.bl_tree[eJ*2]++):a<=10?t.bl_tree[tJ*2]++:t.bl_tree[rJ*2]++,a=0,n=s,o===0?(c=138,u=3):s===o?(c=6,u=3):(c=7,u=4))}function yJ(t,e,r){var i,n=-1,s,o=e[0*2+1],a=0,c=7,u=4;for(o===0&&(c=138,u=3),i=0;i<=r;i++)if(s=o,o=e[(i+1)*2+1],!(++a<c&&s===o)){if(a<u)do Ga(t,s,t.bl_tree);while(--a!=0);else s!==0?(s!==n&&(Ga(t,s,t.bl_tree),a--),Ga(t,eJ,t.bl_tree),Zn(t,a-3,2)):a<=10?(Ga(t,tJ,t.bl_tree),Zn(t,a-3,3)):(Ga(t,rJ,t.bl_tree),Zn(t,a-11,7));a=0,n=s,o===0?(c=138,u=3):s===o?(c=6,u=3):(c=7,u=4)}}function lze(t){var e;for(pJ(t,t.dyn_ltree,t.l_desc.max_code),pJ(t,t.dyn_dtree,t.d_desc.max_code),bx(t,t.bl_desc),e=ux-1;e>=3&&t.bl_tree[iJ[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e}function dze(t,e,r,i){var n;for(Zn(t,e-257,5),Zn(t,r-1,5),Zn(t,i-4,4),n=0;n<i;n++)Zn(t,t.bl_tree[iJ[n]*2+1],3);yJ(t,t.dyn_ltree,e-1),yJ(t,t.dyn_dtree,r-1)}function hze(t){var e=4093624447,r;for(r=0;r<=31;r++,e>>>=1)if(e&1&&t.dyn_ltree[r*2]!==0)return XZ;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return QZ;for(r=32;r<Xy;r++)if(t.dyn_ltree[r*2]!==0)return QZ;return XZ}var gJ=!1;function pze(t){gJ||(uze(),gJ=!0),t.l_desc=new yx(t.dyn_ltree,nJ),t.d_desc=new yx(t.dyn_dtree,sJ),t.bl_desc=new yx(t.bl_tree,oJ),t.bi_buf=0,t.bi_valid=0,fJ(t)}function bJ(t,e,r,i){Zn(t,(eze<<1)+(i?1:0),3),fze(t,e,r,!0)}function yze(t){Zn(t,ZZ<<1,3),Ga(t,lx,eu),aze(t)}function gze(t,e,r,i){var n,s,o=0;t.level>0?(t.strm.data_type===JVe&&(t.strm.data_type=hze(t)),bx(t,t.l_desc),bx(t,t.d_desc),o=lze(t),n=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=n&&(n=s)):n=s=r+5,r+4<=n&&e!==-1?bJ(t,e,r,i):t.strategy===ZVe||s===n?(Zn(t,(ZZ<<1)+(i?1:0),3),hJ(t,eu,Zy)):(Zn(t,(tze<<1)+(i?1:0),3),dze(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),hJ(t,t.dyn_ltree,t.dyn_dtree)),fJ(t),i&&lJ(t)}function bze(t,e,r){return t.pending_buf[t.d_buf+t.last_lit*2]=e>>>8&255,t.pending_buf[t.d_buf+t.last_lit*2+1]=e&255,t.pending_buf[t.l_buf+t.last_lit]=r&255,t.last_lit++,e===0?t.dyn_ltree[r*2]++:(t.matches++,e--,t.dyn_ltree[(eg[r]+Xy+1)*2]++,t.dyn_dtree[aJ(e)*2]++),t.last_lit===t.lit_bufsize-1}H0._tr_init=pze;H0._tr_stored_block=bJ;H0._tr_flush_block=gze;H0._tr_tally=bze;H0._tr_align=yze});var mx=p((QPt,vJ)=>{l();"use strict";function mze(t,e,r,i){for(var n=t&65535|0,s=t>>>16&65535|0,o=0;r!==0;){o=r>2e3?2e3:r,r-=o;do n=n+e[i++]|0,s=s+n|0;while(--o);n%=65521,s%=65521}return n|s<<16|0}vJ.exports=mze});var vx=p((ZPt,wJ)=>{l();"use strict";function vze(){for(var t,e=[],r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e}var wze=vze();function _ze(t,e,r,i){var n=wze,s=i+r;t^=-1;for(var o=i;o<s;o++)t=t>>>8^n[(t^e[o])&255];return t^-1}wJ.exports=_ze});var I5=p((JPt,_J)=>{l();"use strict";_J.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var CJ=p(Xa=>{l();"use strict";var kn=Jc(),Ws=mJ(),EJ=mx(),vf=vx(),Eze=I5(),Xl=0,Sze=1,xze=3,wf=4,SJ=5,Wa=0,xJ=1,Ys=-2,Aze=-3,wx=-5,Ize=-1,Tze=1,T5=2,Rze=3,Pze=4,Cze=0,Oze=2,R5=8,kze=9,qze=15,Dze=8,Nze=29,Bze=256,_x=Bze+1+Nze,Mze=30,Lze=19,Uze=2*_x+1,Fze=15,Tt=3,_f=258,Ho=_f+Tt+1,jze=32,P5=42,Ex=69,C5=73,O5=91,k5=103,Ql=113,rg=666,Si=1,ig=2,Zl=3,$0=4,Kze=3;function Ef(t,e){return t.msg=Eze[e],e}function AJ(t){return(t<<1)-(t>4?9:0)}function Sf(t){for(var e=t.length;--e>=0;)t[e]=0}function xf(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),r!==0&&(kn.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,e.pending===0&&(e.pending_out=0))}function en(t,e){Ws._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,xf(t.strm)}function Ft(t,e){t.pending_buf[t.pending++]=e}function ng(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255}function Vze(t,e,r,i){var n=t.avail_in;return n>i&&(n=i),n===0?0:(t.avail_in-=n,kn.arraySet(e,t.input,t.next_in,n,r),t.state.wrap===1?t.adler=EJ(t.adler,e,n,r):t.state.wrap===2&&(t.adler=vf(t.adler,e,n,r)),t.next_in+=n,t.total_in+=n,n)}function IJ(t,e){var r=t.max_chain_length,i=t.strstart,n,s,o=t.prev_length,a=t.nice_match,c=t.strstart>t.w_size-Ho?t.strstart-(t.w_size-Ho):0,u=t.window,f=t.w_mask,d=t.prev,h=t.strstart+_f,y=u[i+o-1],g=u[i+o];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do if(n=e,!(u[n+o]!==g||u[n+o-1]!==y||u[n]!==u[i]||u[++n]!==u[i+1])){i+=2,n++;do;while(u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&i<h);if(s=_f-(h-i),i=h-_f,s>o){if(t.match_start=e,o=s,s>=a)break;y=u[i+o-1],g=u[i+o]}}while((e=d[e&f])>c&&--r!=0);return o<=t.lookahead?o:t.lookahead}function Jl(t){var e=t.w_size,r,i,n,s,o;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-Ho)){kn.arraySet(t.window,t.window,e,e,0),t.match_start-=e,t.strstart-=e,t.block_start-=e,i=t.hash_size,r=i;do n=t.head[--r],t.head[r]=n>=e?n-e:0;while(--i);i=e,r=i;do n=t.prev[--r],t.prev[r]=n>=e?n-e:0;while(--i);s+=e}if(t.strm.avail_in===0)break;if(i=Vze(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=i,t.lookahead+t.insert>=Tt)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+Tt-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<Tt)););}while(t.lookahead<Ho&&t.strm.avail_in!==0)}function zze(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Jl(t),t.lookahead===0&&e===Xl)return Si;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+r;if((t.strstart===0||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,en(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-Ho&&(en(t,!1),t.strm.avail_out===0))return Si}return t.insert=0,e===wf?(en(t,!0),t.strm.avail_out===0?Zl:$0):(t.strstart>t.block_start&&(en(t,!1),t.strm.avail_out===0),Si)}function Sx(t,e){for(var r,i;;){if(t.lookahead<Ho){if(Jl(t),t.lookahead<Ho&&e===Xl)return Si;if(t.lookahead===0)break}if(r=0,t.lookahead>=Tt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Tt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),r!==0&&t.strstart-r<=t.w_size-Ho&&(t.match_length=IJ(t,r)),t.match_length>=Tt)if(i=Ws._tr_tally(t,t.strstart-t.match_start,t.match_length-Tt),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=Tt){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Tt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!=0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=Ws._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(en(t,!1),t.strm.avail_out===0))return Si}return t.insert=t.strstart<Tt-1?t.strstart:Tt-1,e===wf?(en(t,!0),t.strm.avail_out===0?Zl:$0):t.last_lit&&(en(t,!1),t.strm.avail_out===0)?Si:ig}function G0(t,e){for(var r,i,n;;){if(t.lookahead<Ho){if(Jl(t),t.lookahead<Ho&&e===Xl)return Si;if(t.lookahead===0)break}if(r=0,t.lookahead>=Tt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Tt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=Tt-1,r!==0&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-Ho&&(t.match_length=IJ(t,r),t.match_length<=5&&(t.strategy===Tze||t.match_length===Tt&&t.strstart-t.match_start>4096)&&(t.match_length=Tt-1)),t.prev_length>=Tt&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-Tt,i=Ws._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-Tt),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Tt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!=0);if(t.match_available=0,t.match_length=Tt-1,t.strstart++,i&&(en(t,!1),t.strm.avail_out===0))return Si}else if(t.match_available){if(i=Ws._tr_tally(t,0,t.window[t.strstart-1]),i&&en(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return Si}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=Ws._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<Tt-1?t.strstart:Tt-1,e===wf?(en(t,!0),t.strm.avail_out===0?Zl:$0):t.last_lit&&(en(t,!1),t.strm.avail_out===0)?Si:ig}function Hze(t,e){for(var r,i,n,s,o=t.window;;){if(t.lookahead<=_f){if(Jl(t),t.lookahead<=_f&&e===Xl)return Si;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=Tt&&t.strstart>0&&(n=t.strstart-1,i=o[n],i===o[++n]&&i===o[++n]&&i===o[++n])){s=t.strstart+_f;do;while(i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&n<s);t.match_length=_f-(s-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=Tt?(r=Ws._tr_tally(t,1,t.match_length-Tt),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=Ws._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(en(t,!1),t.strm.avail_out===0))return Si}return t.insert=0,e===wf?(en(t,!0),t.strm.avail_out===0?Zl:$0):t.last_lit&&(en(t,!1),t.strm.avail_out===0)?Si:ig}function $ze(t,e){for(var r;;){if(t.lookahead===0&&(Jl(t),t.lookahead===0)){if(e===Xl)return Si;break}if(t.match_length=0,r=Ws._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(en(t,!1),t.strm.avail_out===0))return Si}return t.insert=0,e===wf?(en(t,!0),t.strm.avail_out===0?Zl:$0):t.last_lit&&(en(t,!1),t.strm.avail_out===0)?Si:ig}function Ya(t,e,r,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=i,this.func=n}var W0;W0=[new Ya(0,0,0,0,zze),new Ya(4,4,8,4,Sx),new Ya(4,5,16,8,Sx),new Ya(4,6,32,32,Sx),new Ya(4,4,16,16,G0),new Ya(8,16,32,32,G0),new Ya(8,16,128,128,G0),new Ya(8,32,128,256,G0),new Ya(32,128,258,1024,G0),new Ya(32,258,258,4096,G0)];function Gze(t){t.window_size=2*t.w_size,Sf(t.head),t.max_lazy_match=W0[t.level].max_lazy,t.good_match=W0[t.level].good_length,t.nice_match=W0[t.level].nice_length,t.max_chain_length=W0[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=Tt-1,t.match_available=0,t.ins_h=0}function Wze(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=R5,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new kn.Buf16(Uze*2),this.dyn_dtree=new kn.Buf16((2*Mze+1)*2),this.bl_tree=new kn.Buf16((2*Lze+1)*2),Sf(this.dyn_ltree),Sf(this.dyn_dtree),Sf(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new kn.Buf16(Fze+1),this.heap=new kn.Buf16(2*_x+1),Sf(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new kn.Buf16(2*_x+1),Sf(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function TJ(t){var e;return!t||!t.state?Ef(t,Ys):(t.total_in=t.total_out=0,t.data_type=Oze,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?P5:Ql,t.adler=e.wrap===2?0:1,e.last_flush=Xl,Ws._tr_init(e),Wa)}function RJ(t){var e=TJ(t);return e===Wa&&Gze(t.state),e}function Yze(t,e){return!t||!t.state||t.state.wrap!==2?Ys:(t.state.gzhead=e,Wa)}function PJ(t,e,r,i,n,s){if(!t)return Ys;var o=1;if(e===Ize&&(e=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),n<1||n>kze||r!==R5||i<8||i>15||e<0||e>9||s<0||s>Pze)return Ef(t,Ys);i===8&&(i=9);var a=new Wze;return t.state=a,a.strm=t,a.wrap=o,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=n+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Tt-1)/Tt),a.window=new kn.Buf8(a.w_size*2),a.head=new kn.Buf16(a.hash_size),a.prev=new kn.Buf16(a.w_size),a.lit_bufsize=1<<n+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new kn.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=(1+2)*a.lit_bufsize,a.level=e,a.strategy=s,a.method=r,RJ(t)}function Xze(t,e){return PJ(t,e,R5,qze,Dze,Cze)}function Qze(t,e){var r,i,n,s;if(!t||!t.state||e>SJ||e<0)return t?Ef(t,Ys):Ys;if(i=t.state,!t.output||!t.input&&t.avail_in!==0||i.status===rg&&e!==wf)return Ef(t,t.avail_out===0?wx:Ys);if(i.strm=t,r=i.last_flush,i.last_flush=e,i.status===P5)if(i.wrap===2)t.adler=0,Ft(i,31),Ft(i,139),Ft(i,8),i.gzhead?(Ft(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Ft(i,i.gzhead.time&255),Ft(i,i.gzhead.time>>8&255),Ft(i,i.gzhead.time>>16&255),Ft(i,i.gzhead.time>>24&255),Ft(i,i.level===9?2:i.strategy>=T5||i.level<2?4:0),Ft(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(Ft(i,i.gzhead.extra.length&255),Ft(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=vf(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=Ex):(Ft(i,0),Ft(i,0),Ft(i,0),Ft(i,0),Ft(i,0),Ft(i,i.level===9?2:i.strategy>=T5||i.level<2?4:0),Ft(i,Kze),i.status=Ql);else{var o=R5+(i.w_bits-8<<4)<<8,a=-1;i.strategy>=T5||i.level<2?a=0:i.level<6?a=1:i.level===6?a=2:a=3,o|=a<<6,i.strstart!==0&&(o|=jze),o+=31-o%31,i.status=Ql,ng(i,o),i.strstart!==0&&(ng(i,t.adler>>>16),ng(i,t.adler&65535)),t.adler=1}if(i.status===Ex)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=vf(t.adler,i.pending_buf,i.pending-n,n)),xf(t),n=i.pending,i.pending===i.pending_buf_size));)Ft(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(t.adler=vf(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=C5)}else i.status=C5;if(i.status===C5)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=vf(t.adler,i.pending_buf,i.pending-n,n)),xf(t),n=i.pending,i.pending===i.pending_buf_size)){s=1;break}i.gzindex<i.gzhead.name.length?s=i.gzhead.name.charCodeAt(i.gzindex++)&255:s=0,Ft(i,s)}while(s!==0);i.gzhead.hcrc&&i.pending>n&&(t.adler=vf(t.adler,i.pending_buf,i.pending-n,n)),s===0&&(i.gzindex=0,i.status=O5)}else i.status=O5;if(i.status===O5)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=vf(t.adler,i.pending_buf,i.pending-n,n)),xf(t),n=i.pending,i.pending===i.pending_buf_size)){s=1;break}i.gzindex<i.gzhead.comment.length?s=i.gzhead.comment.charCodeAt(i.gzindex++)&255:s=0,Ft(i,s)}while(s!==0);i.gzhead.hcrc&&i.pending>n&&(t.adler=vf(t.adler,i.pending_buf,i.pending-n,n)),s===0&&(i.status=k5)}else i.status=k5;if(i.status===k5&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&xf(t),i.pending+2<=i.pending_buf_size&&(Ft(i,t.adler&255),Ft(i,t.adler>>8&255),t.adler=0,i.status=Ql)):i.status=Ql),i.pending!==0){if(xf(t),t.avail_out===0)return i.last_flush=-1,Wa}else if(t.avail_in===0&&AJ(e)<=AJ(r)&&e!==wf)return Ef(t,wx);if(i.status===rg&&t.avail_in!==0)return Ef(t,wx);if(t.avail_in!==0||i.lookahead!==0||e!==Xl&&i.status!==rg){var c=i.strategy===T5?$ze(i,e):i.strategy===Rze?Hze(i,e):W0[i.level].func(i,e);if((c===Zl||c===$0)&&(i.status=rg),c===Si||c===Zl)return t.avail_out===0&&(i.last_flush=-1),Wa;if(c===ig&&(e===Sze?Ws._tr_align(i):e!==SJ&&(Ws._tr_stored_block(i,0,0,!1),e===xze&&(Sf(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),xf(t),t.avail_out===0))return i.last_flush=-1,Wa}return e!==wf?Wa:i.wrap<=0?xJ:(i.wrap===2?(Ft(i,t.adler&255),Ft(i,t.adler>>8&255),Ft(i,t.adler>>16&255),Ft(i,t.adler>>24&255),Ft(i,t.total_in&255),Ft(i,t.total_in>>8&255),Ft(i,t.total_in>>16&255),Ft(i,t.total_in>>24&255)):(ng(i,t.adler>>>16),ng(i,t.adler&65535)),xf(t),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?Wa:xJ)}function Zze(t){var e;return!t||!t.state?Ys:(e=t.state.status,e!==P5&&e!==Ex&&e!==C5&&e!==O5&&e!==k5&&e!==Ql&&e!==rg?Ef(t,Ys):(t.state=null,e===Ql?Ef(t,Aze):Wa))}function Jze(t,e){var r=e.length,i,n,s,o,a,c,u,f;if(!t||!t.state||(i=t.state,o=i.wrap,o===2||o===1&&i.status!==P5||i.lookahead))return Ys;for(o===1&&(t.adler=EJ(t.adler,e,r,0)),i.wrap=0,r>=i.w_size&&(o===0&&(Sf(i.head),i.strstart=0,i.block_start=0,i.insert=0),f=new kn.Buf8(i.w_size),kn.arraySet(f,e,r-i.w_size,i.w_size,0),e=f,r=i.w_size),a=t.avail_in,c=t.next_in,u=t.input,t.avail_in=r,t.next_in=0,t.input=e,Jl(i);i.lookahead>=Tt;){n=i.strstart,s=i.lookahead-(Tt-1);do i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+Tt-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++;while(--s);i.strstart=n,i.lookahead=Tt-1,Jl(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=Tt-1,i.match_available=0,t.next_in=c,t.input=u,t.avail_in=a,i.wrap=o,Wa}Xa.deflateInit=Xze;Xa.deflateInit2=PJ;Xa.deflateReset=RJ;Xa.deflateResetKeep=TJ;Xa.deflateSetHeader=Yze;Xa.deflate=Qze;Xa.deflateEnd=Zze;Xa.deflateSetDictionary=Jze;Xa.deflateInfo="pako deflate (from Nodeca project)"});var xx=p(Y0=>{l();"use strict";var q5=Jc(),OJ=!0,kJ=!0;try{String.fromCharCode.apply(null,[0])}catch(t){OJ=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){kJ=!1}var sg=new q5.Buf8(256);for(tu=0;tu<256;tu++)sg[tu]=tu>=252?6:tu>=248?5:tu>=240?4:tu>=224?3:tu>=192?2:1;var tu;sg[254]=sg[254]=1;Y0.string2buf=function(t){var e,r,i,n,s,o=t.length,a=0;for(n=0;n<o;n++)r=t.charCodeAt(n),(r&64512)==55296&&n+1<o&&(i=t.charCodeAt(n+1),(i&64512)==56320&&(r=65536+(r-55296<<10)+(i-56320),n++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(e=new q5.Buf8(a),s=0,n=0;s<a;n++)r=t.charCodeAt(n),(r&64512)==55296&&n+1<o&&(i=t.charCodeAt(n+1),(i&64512)==56320&&(r=65536+(r-55296<<10)+(i-56320),n++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};function qJ(t,e){if(e<65534&&(t.subarray&&kJ||!t.subarray&&OJ))return String.fromCharCode.apply(null,q5.shrinkBuf(t,e));for(var r="",i=0;i<e;i++)r+=String.fromCharCode(t[i]);return r}Y0.buf2binstring=function(t){return qJ(t,t.length)};Y0.binstring2buf=function(t){for(var e=new q5.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e};Y0.buf2string=function(t,e){var r,i,n,s,o=e||t.length,a=new Array(o*2);for(i=0,r=0;r<o;){if(n=t[r++],n<128){a[i++]=n;continue}if(s=sg[n],s>4){a[i++]=65533,r+=s-1;continue}for(n&=s===2?31:s===3?15:7;s>1&&r<o;)n=n<<6|t[r++]&63,s--;if(s>1){a[i++]=65533;continue}n<65536?a[i++]=n:(n-=65536,a[i++]=55296|n>>10&1023,a[i++]=56320|n&1023)}return qJ(a,i)};Y0.utf8border=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&(t[r]&192)==128;)r--;return r<0||r===0?e:r+sg[t[r]]>e?r:e}});var Ax=p((rCt,DJ)=>{l();"use strict";function eHe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}DJ.exports=eHe});var LJ=p(cg=>{l();"use strict";var og=CJ(),ag=Jc(),Ix=xx(),Tx=I5(),tHe=Ax(),NJ=Object.prototype.toString,rHe=0,Rx=4,X0=0,BJ=1,MJ=2,iHe=-1,nHe=0,sHe=8;function ed(t){if(!(this instanceof ed))return new ed(t);this.options=ag.assign({level:iHe,method:sHe,chunkSize:16384,windowBits:15,memLevel:8,strategy:nHe,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tHe,this.strm.avail_out=0;var r=og.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==X0)throw new Error(Tx[r]);if(e.header&&og.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(typeof e.dictionary=="string"?i=Ix.string2buf(e.dictionary):NJ.call(e.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(e.dictionary):i=e.dictionary,r=og.deflateSetDictionary(this.strm,i),r!==X0)throw new Error(Tx[r]);this._dict_set=!0}}ed.prototype.push=function(t,e){var r=this.strm,i=this.options.chunkSize,n,s;if(this.ended)return!1;s=e===~~e?e:e===!0?Rx:rHe,typeof t=="string"?r.input=Ix.string2buf(t):NJ.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new ag.Buf8(i),r.next_out=0,r.avail_out=i),n=og.deflate(r,s),n!==BJ&&n!==X0)return this.onEnd(n),this.ended=!0,!1;(r.avail_out===0||r.avail_in===0&&(s===Rx||s===MJ))&&(this.options.to==="string"?this.onData(Ix.buf2binstring(ag.shrinkBuf(r.output,r.next_out))):this.onData(ag.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||r.avail_out===0)&&n!==BJ);return s===Rx?(n=og.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===X0):(s===MJ&&(this.onEnd(X0),r.avail_out=0),!0)};ed.prototype.onData=function(t){this.chunks.push(t)};ed.prototype.onEnd=function(t){t===X0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ag.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Px(t,e){var r=new ed(e);if(r.push(t,!0),r.err)throw r.msg||Tx[r.err];return r.result}function oHe(t,e){return e=e||{},e.raw=!0,Px(t,e)}function aHe(t,e){return e=e||{},e.gzip=!0,Px(t,e)}cg.Deflate=ed;cg.deflate=Px;cg.deflateRaw=oHe;cg.gzip=aHe});var FJ=p((nCt,UJ)=>{l();"use strict";var D5=30,cHe=12;UJ.exports=function(e,r){var i,n,s,o,a,c,u,f,d,h,y,g,m,E,v,A,R,F,q,D,z,G,Y,P,b;i=e.state,n=e.next_in,P=e.input,s=n+(e.avail_in-5),o=e.next_out,b=e.output,a=o-(r-e.avail_out),c=o+(e.avail_out-257),u=i.dmax,f=i.wsize,d=i.whave,h=i.wnext,y=i.window,g=i.hold,m=i.bits,E=i.lencode,v=i.distcode,A=(1<<i.lenbits)-1,R=(1<<i.distbits)-1;e:do{m<15&&(g+=P[n++]<<m,m+=8,g+=P[n++]<<m,m+=8),F=E[g&A];t:for(;;){if(q=F>>>24,g>>>=q,m-=q,q=F>>>16&255,q===0)b[o++]=F&65535;else if(q&16){D=F&65535,q&=15,q&&(m<q&&(g+=P[n++]<<m,m+=8),D+=g&(1<<q)-1,g>>>=q,m-=q),m<15&&(g+=P[n++]<<m,m+=8,g+=P[n++]<<m,m+=8),F=v[g&R];r:for(;;){if(q=F>>>24,g>>>=q,m-=q,q=F>>>16&255,q&16){if(z=F&65535,q&=15,m<q&&(g+=P[n++]<<m,m+=8,m<q&&(g+=P[n++]<<m,m+=8)),z+=g&(1<<q)-1,z>u){e.msg="invalid distance too far back",i.mode=D5;break e}if(g>>>=q,m-=q,q=o-a,z>q){if(q=z-q,q>d&&i.sane){e.msg="invalid distance too far back",i.mode=D5;break e}if(G=0,Y=y,h===0){if(G+=f-q,q<D){D-=q;do b[o++]=y[G++];while(--q);G=o-z,Y=b}}else if(h<q){if(G+=f+h-q,q-=h,q<D){D-=q;do b[o++]=y[G++];while(--q);if(G=0,h<D){q=h,D-=q;do b[o++]=y[G++];while(--q);G=o-z,Y=b}}}else if(G+=h-q,q<D){D-=q;do b[o++]=y[G++];while(--q);G=o-z,Y=b}for(;D>2;)b[o++]=Y[G++],b[o++]=Y[G++],b[o++]=Y[G++],D-=3;D&&(b[o++]=Y[G++],D>1&&(b[o++]=Y[G++]))}else{G=o-z;do b[o++]=b[G++],b[o++]=b[G++],b[o++]=b[G++],D-=3;while(D>2);D&&(b[o++]=b[G++],D>1&&(b[o++]=b[G++]))}}else if((q&64)==0){F=v[(F&65535)+(g&(1<<q)-1)];continue r}else{e.msg="invalid distance code",i.mode=D5;break e}break}}else if((q&64)==0){F=E[(F&65535)+(g&(1<<q)-1)];continue t}else if(q&32){i.mode=cHe;break e}else{e.msg="invalid literal/length code",i.mode=D5;break e}break}}while(n<s&&o<c);D=m>>3,n-=D,m-=D<<3,g&=(1<<m)-1,e.next_in=n,e.next_out=o,e.avail_in=n<s?5+(s-n):5-(n-s),e.avail_out=o<c?257+(c-o):257-(o-c),i.hold=g,i.bits=m}});var GJ=p((sCt,$J)=>{l();"use strict";var jJ=Jc(),Q0=15,KJ=852,VJ=592,zJ=0,Cx=1,HJ=2,uHe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],fHe=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],lHe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dHe=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];$J.exports=function(e,r,i,n,s,o,a,c){var u=c.bits,f=0,d=0,h=0,y=0,g=0,m=0,E=0,v=0,A=0,R=0,F,q,D,z,G,Y=null,P=0,b,w=new jJ.Buf16(Q0+1),S=new jJ.Buf16(Q0+1),C=null,B=0,W,K,M;for(f=0;f<=Q0;f++)w[f]=0;for(d=0;d<n;d++)w[r[i+d]]++;for(g=u,y=Q0;y>=1&&w[y]===0;y--);if(g>y&&(g=y),y===0)return s[o++]=1<<24|64<<16|0,s[o++]=1<<24|64<<16|0,c.bits=1,0;for(h=1;h<y&&w[h]===0;h++);for(g<h&&(g=h),v=1,f=1;f<=Q0;f++)if(v<<=1,v-=w[f],v<0)return-1;if(v>0&&(e===zJ||y!==1))return-1;for(S[1]=0,f=1;f<Q0;f++)S[f+1]=S[f]+w[f];for(d=0;d<n;d++)r[i+d]!==0&&(a[S[r[i+d]]++]=d);if(e===zJ?(Y=C=a,b=19):e===Cx?(Y=uHe,P-=257,C=fHe,B-=257,b=256):(Y=lHe,C=dHe,b=-1),R=0,d=0,f=h,G=o,m=g,E=0,D=-1,A=1<<g,z=A-1,e===Cx&&A>KJ||e===HJ&&A>VJ)return 1;for(;;){W=f-E,a[d]<b?(K=0,M=a[d]):a[d]>b?(K=C[B+a[d]],M=Y[P+a[d]]):(K=32+64,M=0),F=1<<f-E,q=1<<m,h=q;do q-=F,s[G+(R>>E)+q]=W<<24|K<<16|M|0;while(q!==0);for(F=1<<f-1;R&F;)F>>=1;if(F!==0?(R&=F-1,R+=F):R=0,d++,--w[f]==0){if(f===y)break;f=r[i+a[d]]}if(f>g&&(R&z)!==D){for(E===0&&(E=g),G+=h,m=f-E,v=1<<m;m+E<y&&(v-=w[m+E],!(v<=0));)m++,v<<=1;if(A+=1<<m,e===Cx&&A>KJ||e===HJ&&A>VJ)return 1;D=R&z,s[D]=g<<24|m<<16|G-o|0}}return R!==0&&(s[G+R]=f-E<<24|64<<16|0),c.bits=g,0}});var Ree=p($o=>{l();"use strict";var bs=Jc(),Ox=mx(),Qa=vx(),hHe=FJ(),ug=GJ(),pHe=0,WJ=1,YJ=2,XJ=4,yHe=5,N5=6,td=0,gHe=1,bHe=2,Xs=-2,QJ=-3,kx=-4,mHe=-5,ZJ=8,JJ=1,eee=2,tee=3,ree=4,iee=5,nee=6,see=7,oee=8,aee=9,cee=10,B5=11,ru=12,qx=13,uee=14,Dx=15,fee=16,lee=17,dee=18,hee=19,M5=20,L5=21,pee=22,yee=23,gee=24,bee=25,mee=26,Nx=27,vee=28,wee=29,wr=30,Bx=31,vHe=32,wHe=852,_He=592,EHe=15,SHe=EHe;function _ee(t){return(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24)}function xHe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new bs.Buf16(320),this.work=new bs.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Eee(t){var e;return!t||!t.state?Xs:(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=JJ,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new bs.Buf32(wHe),e.distcode=e.distdyn=new bs.Buf32(_He),e.sane=1,e.back=-1,td)}function See(t){var e;return!t||!t.state?Xs:(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,Eee(t))}function xee(t,e){var r,i;return!t||!t.state||(i=t.state,e<0?(r=0,e=-e):(r=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?Xs:(i.window!==null&&i.wbits!==e&&(i.window=null),i.wrap=r,i.wbits=e,See(t))}function Aee(t,e){var r,i;return t?(i=new xHe,t.state=i,i.window=null,r=xee(t,e),r!==td&&(t.state=null),r):Xs}function AHe(t){return Aee(t,SHe)}var Iee=!0,Mx,Lx;function IHe(t){if(Iee){var e;for(Mx=new bs.Buf32(512),Lx=new bs.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ug(WJ,t.lens,0,288,Mx,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ug(YJ,t.lens,0,32,Lx,0,t.work,{bits:5}),Iee=!1}t.lencode=Mx,t.lenbits=9,t.distcode=Lx,t.distbits=5}function Tee(t,e,r,i){var n,s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new bs.Buf8(s.wsize)),i>=s.wsize?(bs.arraySet(s.window,e,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),bs.arraySet(s.window,e,r-i,n,s.wnext),i-=n,i?(bs.arraySet(s.window,e,r-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0}function THe(t,e){var r,i,n,s,o,a,c,u,f,d,h,y,g,m,E=0,v,A,R,F,q,D,z,G,Y=new bs.Buf8(4),P,b,w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return Xs;r=t.state,r.mode===ru&&(r.mode=qx),o=t.next_out,n=t.output,c=t.avail_out,s=t.next_in,i=t.input,a=t.avail_in,u=r.hold,f=r.bits,d=a,h=c,G=td;e:for(;;)switch(r.mode){case JJ:if(r.wrap===0){r.mode=qx;break}for(;f<16;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}if(r.wrap&2&&u===35615){r.check=0,Y[0]=u&255,Y[1]=u>>>8&255,r.check=Qa(r.check,Y,2,0),u=0,f=0,r.mode=eee;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=wr;break}if((u&15)!==ZJ){t.msg="unknown compression method",r.mode=wr;break}if(u>>>=4,f-=4,z=(u&15)+8,r.wbits===0)r.wbits=z;else if(z>r.wbits){t.msg="invalid window size",r.mode=wr;break}r.dmax=1<<z,t.adler=r.check=1,r.mode=u&512?cee:ru,u=0,f=0;break;case eee:for(;f<16;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}if(r.flags=u,(r.flags&255)!==ZJ){t.msg="unknown compression method",r.mode=wr;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=wr;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&(Y[0]=u&255,Y[1]=u>>>8&255,r.check=Qa(r.check,Y,2,0)),u=0,f=0,r.mode=tee;case tee:for(;f<32;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}r.head&&(r.head.time=u),r.flags&512&&(Y[0]=u&255,Y[1]=u>>>8&255,Y[2]=u>>>16&255,Y[3]=u>>>24&255,r.check=Qa(r.check,Y,4,0)),u=0,f=0,r.mode=ree;case ree:for(;f<16;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&(Y[0]=u&255,Y[1]=u>>>8&255,r.check=Qa(r.check,Y,2,0)),u=0,f=0,r.mode=iee;case iee:if(r.flags&1024){for(;f<16;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&(Y[0]=u&255,Y[1]=u>>>8&255,r.check=Qa(r.check,Y,2,0)),u=0,f=0}else r.head&&(r.head.extra=null);r.mode=nee;case nee:if(r.flags&1024&&(y=r.length,y>a&&(y=a),y&&(r.head&&(z=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),bs.arraySet(r.head.extra,i,s,y,z)),r.flags&512&&(r.check=Qa(r.check,i,y,s)),a-=y,s+=y,r.length-=y),r.length))break e;r.length=0,r.mode=see;case see:if(r.flags&2048){if(a===0)break e;y=0;do z=i[s+y++],r.head&&z&&r.length<65536&&(r.head.name+=String.fromCharCode(z));while(z&&y<a);if(r.flags&512&&(r.check=Qa(r.check,i,y,s)),a-=y,s+=y,z)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=oee;case oee:if(r.flags&4096){if(a===0)break e;y=0;do z=i[s+y++],r.head&&z&&r.length<65536&&(r.head.comment+=String.fromCharCode(z));while(z&&y<a);if(r.flags&512&&(r.check=Qa(r.check,i,y,s)),a-=y,s+=y,z)break e}else r.head&&(r.head.comment=null);r.mode=aee;case aee:if(r.flags&512){for(;f<16;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}if(u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=wr;break}u=0,f=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=ru;break;case cee:for(;f<32;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}t.adler=r.check=_ee(u),u=0,f=0,r.mode=B5;case B5:if(r.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,r.hold=u,r.bits=f,bHe;t.adler=r.check=1,r.mode=ru;case ru:if(e===yHe||e===N5)break e;case qx:if(r.last){u>>>=f&7,f-=f&7,r.mode=Nx;break}for(;f<3;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}switch(r.last=u&1,u>>>=1,f-=1,u&3){case 0:r.mode=uee;break;case 1:if(IHe(r),r.mode=M5,e===N5){u>>>=2,f-=2;break e}break;case 2:r.mode=lee;break;case 3:t.msg="invalid block type",r.mode=wr}u>>>=2,f-=2;break;case uee:for(u>>>=f&7,f-=f&7;f<32;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}if((u&65535)!=(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=wr;break}if(r.length=u&65535,u=0,f=0,r.mode=Dx,e===N5)break e;case Dx:r.mode=fee;case fee:if(y=r.length,y){if(y>a&&(y=a),y>c&&(y=c),y===0)break e;bs.arraySet(n,i,s,y,o),a-=y,s+=y,c-=y,o+=y,r.length-=y;break}r.mode=ru;break;case lee:for(;f<14;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}if(r.nlen=(u&31)+257,u>>>=5,f-=5,r.ndist=(u&31)+1,u>>>=5,f-=5,r.ncode=(u&15)+4,u>>>=4,f-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=wr;break}r.have=0,r.mode=dee;case dee:for(;r.have<r.ncode;){for(;f<3;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}r.lens[w[r.have++]]=u&7,u>>>=3,f-=3}for(;r.have<19;)r.lens[w[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,P={bits:r.lenbits},G=ug(pHe,r.lens,0,19,r.lencode,0,r.work,P),r.lenbits=P.bits,G){t.msg="invalid code lengths set",r.mode=wr;break}r.have=0,r.mode=hee;case hee:for(;r.have<r.nlen+r.ndist;){for(;E=r.lencode[u&(1<<r.lenbits)-1],v=E>>>24,A=E>>>16&255,R=E&65535,!(v<=f);){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}if(R<16)u>>>=v,f-=v,r.lens[r.have++]=R;else{if(R===16){for(b=v+2;f<b;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}if(u>>>=v,f-=v,r.have===0){t.msg="invalid bit length repeat",r.mode=wr;break}z=r.lens[r.have-1],y=3+(u&3),u>>>=2,f-=2}else if(R===17){for(b=v+3;f<b;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}u>>>=v,f-=v,z=0,y=3+(u&7),u>>>=3,f-=3}else{for(b=v+7;f<b;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}u>>>=v,f-=v,z=0,y=11+(u&127),u>>>=7,f-=7}if(r.have+y>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=wr;break}for(;y--;)r.lens[r.have++]=z}}if(r.mode===wr)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=wr;break}if(r.lenbits=9,P={bits:r.lenbits},G=ug(WJ,r.lens,0,r.nlen,r.lencode,0,r.work,P),r.lenbits=P.bits,G){t.msg="invalid literal/lengths set",r.mode=wr;break}if(r.distbits=6,r.distcode=r.distdyn,P={bits:r.distbits},G=ug(YJ,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,P),r.distbits=P.bits,G){t.msg="invalid distances set",r.mode=wr;break}if(r.mode=M5,e===N5)break e;case M5:r.mode=L5;case L5:if(a>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,r.hold=u,r.bits=f,hHe(t,h),o=t.next_out,n=t.output,c=t.avail_out,s=t.next_in,i=t.input,a=t.avail_in,u=r.hold,f=r.bits,r.mode===ru&&(r.back=-1);break}for(r.back=0;E=r.lencode[u&(1<<r.lenbits)-1],v=E>>>24,A=E>>>16&255,R=E&65535,!(v<=f);){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}if(A&&(A&240)==0){for(F=v,q=A,D=R;E=r.lencode[D+((u&(1<<F+q)-1)>>F)],v=E>>>24,A=E>>>16&255,R=E&65535,!(F+v<=f);){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}u>>>=F,f-=F,r.back+=F}if(u>>>=v,f-=v,r.back+=v,r.length=R,A===0){r.mode=mee;break}if(A&32){r.back=-1,r.mode=ru;break}if(A&64){t.msg="invalid literal/length code",r.mode=wr;break}r.extra=A&15,r.mode=pee;case pee:if(r.extra){for(b=r.extra;f<b;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,f-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=yee;case yee:for(;E=r.distcode[u&(1<<r.distbits)-1],v=E>>>24,A=E>>>16&255,R=E&65535,!(v<=f);){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}if((A&240)==0){for(F=v,q=A,D=R;E=r.distcode[D+((u&(1<<F+q)-1)>>F)],v=E>>>24,A=E>>>16&255,R=E&65535,!(F+v<=f);){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}u>>>=F,f-=F,r.back+=F}if(u>>>=v,f-=v,r.back+=v,A&64){t.msg="invalid distance code",r.mode=wr;break}r.offset=R,r.extra=A&15,r.mode=gee;case gee:if(r.extra){for(b=r.extra;f<b;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,f-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=wr;break}r.mode=bee;case bee:if(c===0)break e;if(y=h-c,r.offset>y){if(y=r.offset-y,y>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=wr;break}y>r.wnext?(y-=r.wnext,g=r.wsize-y):g=r.wnext-y,y>r.length&&(y=r.length),m=r.window}else m=n,g=o-r.offset,y=r.length;y>c&&(y=c),c-=y,r.length-=y;do n[o++]=m[g++];while(--y);r.length===0&&(r.mode=L5);break;case mee:if(c===0)break e;n[o++]=r.length,c--,r.mode=L5;break;case Nx:if(r.wrap){for(;f<32;){if(a===0)break e;a--,u|=i[s++]<<f,f+=8}if(h-=c,t.total_out+=h,r.total+=h,h&&(t.adler=r.check=r.flags?Qa(r.check,n,h,o-h):Ox(r.check,n,h,o-h)),h=c,(r.flags?u:_ee(u))!==r.check){t.msg="incorrect data check",r.mode=wr;break}u=0,f=0}r.mode=vee;case vee:if(r.wrap&&r.flags){for(;f<32;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}if(u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=wr;break}u=0,f=0}r.mode=wee;case wee:G=gHe;break e;case wr:G=QJ;break e;case Bx:return kx;case vHe:default:return Xs}return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,r.hold=u,r.bits=f,(r.wsize||h!==t.avail_out&&r.mode<wr&&(r.mode<Nx||e!==XJ))&&Tee(t,t.output,t.next_out,h-t.avail_out)?(r.mode=Bx,kx):(d-=t.avail_in,h-=t.avail_out,t.total_in+=d,t.total_out+=h,r.total+=h,r.wrap&&h&&(t.adler=r.check=r.flags?Qa(r.check,n,h,t.next_out-h):Ox(r.check,n,h,t.next_out-h)),t.data_type=r.bits+(r.last?64:0)+(r.mode===ru?128:0)+(r.mode===M5||r.mode===Dx?256:0),(d===0&&h===0||e===XJ)&&G===td&&(G=mHe),G)}function RHe(t){if(!t||!t.state)return Xs;var e=t.state;return e.window&&(e.window=null),t.state=null,td}function PHe(t,e){var r;return!t||!t.state||(r=t.state,(r.wrap&2)==0)?Xs:(r.head=e,e.done=!1,td)}function CHe(t,e){var r=e.length,i,n,s;return!t||!t.state||(i=t.state,i.wrap!==0&&i.mode!==B5)?Xs:i.mode===B5&&(n=1,n=Ox(n,e,r,0),n!==i.check)?QJ:(s=Tee(t,e,r,r),s?(i.mode=Bx,kx):(i.havedict=1,td))}$o.inflateReset=See;$o.inflateReset2=xee;$o.inflateResetKeep=Eee;$o.inflateInit=AHe;$o.inflateInit2=Aee;$o.inflate=THe;$o.inflateEnd=RHe;$o.inflateGetHeader=PHe;$o.inflateSetDictionary=CHe;$o.inflateInfo="pako inflate (from Nodeca project)"});var Ux=p((aCt,Pee)=>{l();"use strict";Pee.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var Oee=p((cCt,Cee)=>{l();"use strict";function OHe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}Cee.exports=OHe});var qee=p(lg=>{l();"use strict";var Z0=Ree(),fg=Jc(),U5=xx(),ni=Ux(),Fx=I5(),kHe=Ax(),qHe=Oee(),kee=Object.prototype.toString;function rd(t){if(!(this instanceof rd))return new rd(t);this.options=fg.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)==0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new kHe,this.strm.avail_out=0;var r=Z0.inflateInit2(this.strm,e.windowBits);if(r!==ni.Z_OK)throw new Error(Fx[r]);if(this.header=new qHe,Z0.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=U5.string2buf(e.dictionary):kee.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Z0.inflateSetDictionary(this.strm,e.dictionary),r!==ni.Z_OK)))throw new Error(Fx[r])}rd.prototype.push=function(t,e){var r=this.strm,i=this.options.chunkSize,n=this.options.dictionary,s,o,a,c,u,f=!1;if(this.ended)return!1;o=e===~~e?e:e===!0?ni.Z_FINISH:ni.Z_NO_FLUSH,typeof t=="string"?r.input=U5.binstring2buf(t):kee.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new fg.Buf8(i),r.next_out=0,r.avail_out=i),s=Z0.inflate(r,ni.Z_NO_FLUSH),s===ni.Z_NEED_DICT&&n&&(s=Z0.inflateSetDictionary(this.strm,n)),s===ni.Z_BUF_ERROR&&f===!0&&(s=ni.Z_OK,f=!1),s!==ni.Z_STREAM_END&&s!==ni.Z_OK)return this.onEnd(s),this.ended=!0,!1;r.next_out&&(r.avail_out===0||s===ni.Z_STREAM_END||r.avail_in===0&&(o===ni.Z_FINISH||o===ni.Z_SYNC_FLUSH))&&(this.options.to==="string"?(a=U5.utf8border(r.output,r.next_out),c=r.next_out-a,u=U5.buf2string(r.output,a),r.next_out=c,r.avail_out=i-c,c&&fg.arraySet(r.output,r.output,a,c,0),this.onData(u)):this.onData(fg.shrinkBuf(r.output,r.next_out))),r.avail_in===0&&r.avail_out===0&&(f=!0)}while((r.avail_in>0||r.avail_out===0)&&s!==ni.Z_STREAM_END);return s===ni.Z_STREAM_END&&(o=ni.Z_FINISH),o===ni.Z_FINISH?(s=Z0.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===ni.Z_OK):(o===ni.Z_SYNC_FLUSH&&(this.onEnd(ni.Z_OK),r.avail_out=0),!0)};rd.prototype.onData=function(t){this.chunks.push(t)};rd.prototype.onEnd=function(t){t===ni.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=fg.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function jx(t,e){var r=new rd(e);if(r.push(t,!0),r.err)throw r.msg||Fx[r.err];return r.result}function DHe(t,e){return e=e||{},e.raw=!0,jx(t,e)}lg.Inflate=rd;lg.inflate=jx;lg.inflateRaw=DHe;lg.ungzip=jx});var Bee=p((fCt,Nee)=>{l();"use strict";var NHe=Jc().assign,BHe=LJ(),MHe=qee(),LHe=Ux(),Dee={};NHe(Dee,BHe,MHe,LHe);Nee.exports=Dee});var Lee=p((lCt,Mee)=>{l();"use strict";var{concat:UHe}=(fn(),un);async function FHe(t){let e=new Uint8Array(0);for await(let r of t)e=UHe([e,r],e.length+r.length);return e}Mee.exports=FHe});var Gee=p((dCt,$ee)=>{l();"use strict";var{exporter:jHe,recursive:KHe}=(zo(),Vo),dg=xt(),{normalizeCidPath:VHe}=Ki(),zHe=ke(),{CID:Uee}=(Ae(),De),{pack:Fee}=YZ(),{pipe:jee}=Ir(),{gzip:Kee}=Bee(),Vee=Mo(),zee=Lee(),Hee=6;$ee.exports=function({repo:t,preload:e}){async function*r(i,n={}){if(n.compressionLevel<0||n.compressionLevel>9)throw dg(new Error("Compression level must be between 1 and 9"),"ERR_INVALID_PARAMS");if(n.preload!==!1){let a;try{a=VHe(i).split("/")}catch(c){throw dg(c,"ERR_INVALID_PATH")}e(Uee.parse(a[0]))}let s=Uee.asCID(i)||i,o=await jHe(s,t.blocks,n);if(o.type==="file"||o.type==="raw"){let a=[];!n.compress||n.archive===!0?a.push([{header:{name:o.path,mode:o.type==="file"&&o.unixfs.mode,mtime:o.type==="file"&&o.unixfs.mtime?new Date(o.unixfs.mtime.secs*1e3):void 0,size:o.size,type:"file"},body:o.content()}],Fee(),c=>Vee(c,u=>u.slice())):a.push(o.content),n.compress&&a.push(async function*(c){let u=await zee(c);yield Kee(u,{level:n.compressionLevel||Hee})}),yield*jee(...a);return}if(o.type==="directory"){let a=[KHe(s,t.blocks,n),async function*(c){for await(let u of c){let f={header:{name:u.path,size:u.size}};if(u.type==="file")f.header.type="file",f.header.mode=u.unixfs.mode!=null?u.unixfs.mode:void 0,f.header.mtime=u.unixfs.mtime?new Date(u.unixfs.mtime.secs*1e3):void 0,f.body=u.content();else if(u.type==="raw")f.header.type="file",f.body=u.content();else if(u.type==="directory")f.header.type="directory",f.header.mode=u.unixfs.mode!=null?u.unixfs.mode:void 0,f.header.mtime=u.unixfs.mtime?new Date(u.unixfs.mtime.secs*1e3):void 0;else throw dg(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");yield f}},Fee(),c=>Vee(c,u=>u.slice())];if(n.compress){if(!n.archive)throw dg(new Error("file is not regular"),"ERR_INVALID_PATH");n.compress&&a.push(async function*(c){let u=await zee(c);yield Kee(u,{level:n.compressionLevel||Hee})})}yield*jee(...a);return}throw dg(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS")}return zHe(r)}});var Qee=p((hCt,Xee)=>{l();"use strict";var{exporter:HHe}=(zo(),Vo),$He=xt(),{normalizeCidPath:GHe,mapFile:Wee}=Ki(),WHe=ke(),{CID:Yee}=(Ae(),De);Xee.exports=function({repo:t,preload:e}){async function*r(i,n={}){let s=GHe(i),o=s.split("/");n.preload!==!1&&e(Yee.parse(o[0]));let a=Yee.asCID(s)||s,c=await HHe(a,t.blocks,n);if(c.type==="file"){yield Wee(c);return}if(c.type==="directory"){for await(let u of c.content())yield Wee(u);return}throw $He(new Error(`Unknown UnixFS type ${c.type}`),"ERR_UNKNOWN_UNIXFS_TYPE")}return WHe(r)}});var ete=p((pCt,Jee)=>{l();"use strict";var YHe=WY(),XHe=ZQ(),QHe=OZ(),ZHe=Gee(),JHe=Qee(),Zee=class{constructor({preload:e,repo:r,options:i}){let n=XHe({preload:e,repo:r,options:i});this.addAll=n,this.add=YHe({addAll:n}),this.cat=QHe({repo:r,preload:e}),this.get=ZHe({repo:r,preload:e}),this.ls=JHe({repo:r,preload:e})}};Jee.exports=Zee});var F5=p((yCt,e$e)=>{e$e.exports={name:"ipfs-core",version:"0.10.7",description:"JavaScript implementation of the IPFS specification",keywords:["IPFS"],homepage:"https://github.com/ipfs/js-ipfs/tree/master/packages/ipfs-core#readme",bugs:"https://github.com/ipfs/js-ipfs/issues",license:"(Apache-2.0 OR MIT)",leadMaintainer:"Alex Potsides <alex@achingbrain.net>",main:"src/index.js",types:"dist/src/index.d.ts",files:["src","dist","!dist/*.tsbuildinfo"],browser:{"./src/runtime/init-assets-nodejs.js":"./src/runtime/init-assets-browser.js","./src/runtime/config-nodejs.js":"./src/runtime/config-browser.js","./src/runtime/dns-nodejs.js":"./src/runtime/dns-browser.js","./src/runtime/libp2p-nodejs.js":"./src/runtime/libp2p-browser.js","./src/runtime/libp2p-pubsub-routers-nodejs.js":"./src/runtime/libp2p-pubsub-routers-browser.js","./src/runtime/preload-nodejs.js":"./src/runtime/preload-browser.js","./src/runtime/repo-nodejs.js":"./src/runtime/repo-browser.js","ipfs-utils/src/files/glob-source":!1},typesVersions:{"*":{"src/*":["dist/src/*","dist/src/*/index"],"src/":["dist/src/index"]}},repository:{type:"git",url:"git+https://github.com/ipfs/js-ipfs.git"},scripts:{build:"aegir build",lint:"aegir ts -p check && aegir lint",test:"aegir test","test:node":"aegir test -t node","test:browser":"aegir test -t browser","test:webworker":"aegir test -t webworker","test:electron-main":"aegir test -t electron-main","test:electron-renderer":"aegir test -t electron-renderer","test:bootstrapers":"IPFS_TEST=bootstrapers aegir test -t browser -f test/bootstrapers.js",clean:"rimraf ./dist","dep-check":"aegir dep-check -i interface-ipfs-core -i ipfs-core-types -i abort-controller"},dependencies:{"@chainsafe/libp2p-noise":"^4.0.0","@ipld/car":"^3.1.0","@ipld/dag-cbor":"^6.0.5","@ipld/dag-pb":"^2.1.3","@multiformats/murmur3":"^1.0.1","abort-controller":"^3.0.0","any-signal":"^2.1.2","array-shuffle":"^2.0.0","blockstore-datastore-adapter":"^1.0.2","datastore-core":"^5.0.1","datastore-fs":"^5.0.2","datastore-level":"^6.0.2","datastore-pubsub":"^0.7.0",debug:"^4.1.1",dlv:"^1.1.3","err-code":"^3.0.1","hamt-sharding":"^2.0.0",hashlru:"^2.3.0","interface-blockstore":"^1.0.0","interface-datastore":"^5.2.0","ipfs-bitswap":"^6.0.0","ipfs-core-types":"^0.7.2","ipfs-core-utils":"^0.10.4","ipfs-http-client":"^52.0.4","ipfs-repo":"^12.0.0","ipfs-unixfs":"^6.0.3","ipfs-unixfs-exporter":"^7.0.3","ipfs-unixfs-importer":"^9.0.3","ipfs-utils":"^8.1.4",ipns:"^0.14.0","is-domain-name":"^1.0.1","is-ipfs":"^6.0.1","it-all":"^1.0.4","it-drain":"^1.0.3","it-filter":"^1.0.2","it-first":"^1.0.4","it-last":"^1.0.4","it-map":"^1.0.4","it-merge":"^1.0.2","it-peekable":"^1.0.2","it-pipe":"^1.1.0","it-pushable":"^1.4.2","it-tar":"^4.0.0","it-to-buffer":"^2.0.0","just-safe-set":"^2.2.1",libp2p:"^0.32.0","libp2p-bootstrap":"^0.13.0","libp2p-crypto":"^0.19.7","libp2p-delegated-content-routing":"^0.11.0","libp2p-delegated-peer-routing":"^0.10.0","libp2p-floodsub":"^0.27.0","libp2p-gossipsub":"^0.11.1","libp2p-kad-dht":"^0.24.2","libp2p-mdns":"^0.17.0","libp2p-mplex":"^0.10.2","libp2p-record":"^0.10.3","libp2p-tcp":"^0.17.1","libp2p-webrtc-star":"^0.23.0","libp2p-websockets":"^0.16.1",mafmt:"^10.0.0","merge-options":"^3.0.4",mortice:"^2.0.0",multiaddr:"^10.0.0","multiaddr-to-uri":"^8.0.0",multiformats:"^9.4.1","native-abort-controller":"^1.0.3","p-queue":"^6.6.1",pako:"^1.0.2","parse-duration":"^1.0.0","peer-id":"^0.15.1","streaming-iterables":"^6.0.0","timeout-abort-controller":"^1.1.1",uint8arrays:"^3.0.0"},devDependencies:{"@types/dlv":"^1.1.2","@types/pako":"^1.0.2","@types/rimraf":"^3.0.1",aegir:"^35.0.3",delay:"^5.0.0","go-ipfs":"0.9.1","interface-blockstore-tests":"^1.0.0","interface-ipfs-core":"^0.150.3","ipfsd-ctl":"^10.0.3","iso-url":"^1.0.0",nanoid:"^3.1.12","p-defer":"^3.0.0",rimraf:"^3.0.2",sinon:"^11.1.1"}}});var rte=p((gCt,tte)=>{l();"use strict";var Kx=F5(),t$e=ke();tte.exports=({repo:t})=>{async function e(r={}){let i=await t.version.get();return{version:Kx.version,repo:`${i}`,commit:Kx.gitHead||"","interface-ipfs-core":Kx.devDependencies["interface-ipfs-core"]}}return t$e(e)}});var nte=p((bCt,ite)=>{l();"use strict";var r$e=F5().version,{Multiaddr:i$e}=rt(),n$e=ke(),{toString:j5}=(et(),Je),s$e=tt(),{NotStartedError:o$e}=af();ite.exports=({peerId:t,network:e})=>{async function r(i={}){i.peerId===t.toB58String()&&delete i.peerId;let n=e.try();if(!n){if(i.peerId)throw new o$e;return{id:t.toB58String(),publicKey:j5(t.pubKey.bytes,"base64pad"),addresses:[],agentVersion:`js-ipfs/${r$e}`,protocolVersion:"9000",protocols:[]}}let s=i.peerId?s$e.createFromB58String(i.peerId.toString()):t,{libp2p:o}=n,a=i.peerId?o.peerStore.keyBook.get(s):s.pubKey,c=i.peerId?o.peerStore.addressBook.getMultiaddrsForPeer(s):o.multiaddrs,u=i.peerId?o.peerStore.protoBook.get(s):Array.from(o.upgrader.protocols.keys()),f=j5(o.peerStore.metadataBook.getValue(s,"AgentVersion")||new Uint8Array),d=j5(o.peerStore.metadataBook.getValue(s,"ProtocolVersion")||new Uint8Array),h=s.toB58String();return{id:h,publicKey:j5(a.bytes,"base64pad"),addresses:(c||[]).map(y=>{let g=y.toString();return g.endsWith(`/p2p/${h}`)?g:`${g}/p2p/${h}`}).sort().map(y=>new i$e(y)),agentVersion:f,protocolVersion:d,protocols:(u||[]).sort()}}return n$e(r)}});var Hx=p((mCt,zx)=>{l();"use strict";var si=TE(),Vx=e5(),J0=ke(),a$e=be()("ipfs:core:config");zx.exports=({repo:t})=>{return{getAll:J0(e),get:J0(r),set:J0(i),replace:J0(n),profiles:{apply:J0(s),list:J0(c$e)}};async function e(o={}){return t.config.getAll(o)}async function r(o,a){return o?t.config.get(o,a):Promise.reject(new Error("key argument is required"))}async function i(o,a,c){return t.config.set(o,a,c)}async function n(o,a){return t.config.replace(o,a)}async function s(o,a={dryRun:!1}){let{dryRun:c}=a,u=K5[o];if(!u)throw new Error(`No profile with name '${o}' exists`);try{let f=await t.config.getAll(a),d=JSON.parse(JSON.stringify(f));return d=u.transform(d),c||await t.config.replace(d,a),delete f.Identity.PrivKey,delete d.Identity.PrivKey,{original:f,updated:d}}catch(f){throw a$e(f),new Error(`Could not apply profile '${o}' to config: ${f.message}`)}}};async function c$e(t){return Object.keys(K5).map(e=>({name:e,description:K5[e].description}))}var K5={server:{description:"Recommended for nodes with public IPv4 address (servers, VPSes, etc.), disables host and content discovery and UPnP in local networks.",transform:t=>(si(t,"Discovery.MDNS.Enabled",!1),si(t,"Discovery.webRTCStar.Enabled",!1),t.Swarm={...t.Swarm||{},DisableNatPortMap:!0},t)},"local-discovery":{description:"Sets default values to fields affected by `server` profile, enables discovery and UPnP in local networks.",transform:t=>(si(t,"Discovery.MDNS.Enabled",!0),si(t,"Discovery.webRTCStar.Enabled",!0),si(t,"Swarm",{...t.Swarm||{},DisableNatPortMap:!1}),t)},test:{description:"Reduces external interference, useful for running ipfs in test environments. Note that with these settings node won't be able to talk to the rest of the network without manual bootstrap.",transform:t=>{let e=Vx();return si(t,"Addresses.API",e.Addresses.API?"/ip4/127.0.0.1/tcp/0":""),si(t,"Addresses.Gateway",e.Addresses.Gateway?"/ip4/127.0.0.1/tcp/0":""),si(t,"Addresses.Swarm",e.Addresses.Swarm.length?["/ip4/127.0.0.1/tcp/0"]:[]),si(t,"Addresses.Delegates",[]),si(t,"Bootstrap",[]),si(t,"Discovery.MDNS.Enabled",!1),si(t,"Discovery.webRTCStar.Enabled",!1),si(t,"Swarm",{...t.Swarm||{},DisableNatPortMap:!0}),t}},"default-networking":{description:"Restores default network settings. Inverse profile of the `test` profile.",transform:t=>{let e=Vx();return si(t,"Addresses.API",e.Addresses.API),si(t,"Addresses.Gateway",e.Addresses.Gateway),si(t,"Addresses.Swarm",e.Addresses.Swarm),si(t,"Addresses.Delegates",e.Addresses.Delegates),si(t,"Bootstrap",e.Bootstrap),si(t,"Discovery.MDNS.Enabled",e.Discovery.MDNS.Enabled),si(t,"Discovery.webRTCStar.Enabled",e.Discovery.webRTCStar.Enabled),si(t,"Swarm",{...t.Swarm||{},DisableNatPortMap:!1}),t}},lowpower:{description:"Reduces daemon overhead on the system. May affect node functionality,performance of content discovery and data fetching may be degraded. Recommended for low power systems.",transform:t=>{let e=t.Swarm||{},r=e.ConnMgr||{};return r.LowWater=20,r.HighWater=40,e.ConnMgr=r,t.Swarm=e,t}},"default-power":{description:'Inverse of "lowpower" profile.',transform:t=>{let e=Vx();return t.Swarm=e.Swarm,t}}};zx.exports.profiles=K5});function Gx(t){let e=F_({version:1,roots:t}),r=$x.default.encode(e.length),i=new Uint8Array(r.length+e.length);return i.set(r,0),i.set(e,r.length),i}function ste(t){return{async setRoots(e){let r=Gx(e);await t.write(r)},async writeBlock(e){let{cid:r,bytes:i}=e;await t.write(new Uint8Array($x.default.encode(r.bytes.length+i.length))),await t.write(r.bytes),i.length&&await t.write(i)},async close(){return t.end()}}}var $x,ote=Se(()=>{l();$x=Wt(as());Gc()});function V5(){}function ate(){let t=[],e=null,r=V5,i=!1,n=null,s=V5,o=()=>(e||(e=new Promise(u=>{r=()=>{e=null,r=V5,u()}})),e),a={write(u){t.push(u);let f=o();return s(),f},async end(){i=!0;let u=o();return s(),u}},c={async next(){let u=t.shift();return u?(t.length===0&&r(),{done:!1,value:u}):i?(r(),{done:!0,value:void 0}):(n||(n=new Promise(f=>{s=()=>(n=null,s=V5,f(c.next()))})),n)}};return{writer:a,iterator:c}}var cte=Se(()=>{l()});async function z5(t){let e=await t.upTo(8),r=Af.default.decode(e);return t.seek(Af.default.decode.bytes),r}async function Yx(t){let e=await z5(t);if(e===0)throw new Error("Invalid CAR header (zero length)");let r=await t.exactly(e);t.seek(e);let i=kl(r);if(i==null||Array.isArray(i)||typeof i!="object")throw new Error("Invalid CAR header format");if(i.version!==1)throw typeof i.version=="string"?new Error(`Invalid CAR version: "${i.version}"`):new Error(`Invalid CAR version: ${i.version}`);if(!Array.isArray(i.roots))throw new Error("Invalid CAR header format");if(Object.keys(i).filter(n=>n!=="roots"&&n!=="version").length)throw new Error("Invalid CAR header format");return i}async function u$e(t){let e=await t.upTo(8);Af.default.decode(e);let r=Af.default.decode.bytes,i=Af.default.decode(e.subarray(Af.default.decode.bytes)),n=Af.default.decode.bytes,s=r+n+i,o=await t.exactly(s);return t.seek(s),o}async function f$e(t){let e=await t.exactly(2);if(e[0]===Wx.SHA2_256&&e[1]===Wx.LENGTH){let o=await t.exactly(34);t.seek(34);let a=Du(o);return Ge.create(0,Wx.DAG_PB,a)}let r=await z5(t);if(r!==1)throw new Error(`Unexpected CID version (${r})`);let i=await z5(t),n=await u$e(t),s=Du(n);return Ge.create(r,i,s)}async function ute(t){let e=t.pos,r=await z5(t);if(r===0)throw new Error("Invalid CAR section (zero length)");r+=t.pos-e;let i=await f$e(t),n=r-(t.pos-e);return{cid:i,length:r,blockLength:n}}async function l$e(t){let{cid:e,blockLength:r}=await ute(t),i=await t.exactly(r);return t.seek(r),{bytes:i,cid:e}}async function d$e(t){let e=t.pos,{cid:r,length:i,blockLength:n}=await ute(t),s={cid:r,length:i,blockLength:n,offset:e,blockOffset:t.pos};return t.seek(s.blockLength),s}function fte(t){let e=Yx(t);return{header:()=>e,async*blocks(){for(await e;(await t.upTo(8)).length>0;)yield await l$e(t)},async*blocksIndex(){for(await e;(await t.upTo(8)).length>0;)yield await d$e(t)}}}function H5(t){let e=0;return{async upTo(r){return t.subarray(e,e+Math.min(r,t.length-e))},async exactly(r){if(r>t.length-e)throw new Error("Unexpected end of data");return t.subarray(e,e+r)},seek(r){e+=r},get pos(){return e}}}function h$e(t){let e=0,r=0,i=0,n=new Uint8Array(0),s=async o=>{r=n.length-i;let a=[n.subarray(i)];for(;r<o;){let u=await t();if(u==null)break;r<0?u.length>r&&a.push(u.subarray(-r)):a.push(u),r+=u.length}n=new Uint8Array(a.reduce((u,f)=>u+f.length,0));let c=0;for(let u of a)n.set(u,c),c+=u.length;i=0};return{async upTo(o){return n.length-i<o&&await s(o),n.subarray(i,i+Math.min(n.length-i,o))},async exactly(o){if(n.length-i<o&&await s(o),n.length-i<o)throw new Error("Unexpected end of data");return n.subarray(i,i+o)},seek(o){e+=o,i+=o},get pos(){return e}}}function lte(t){let e=t[Symbol.asyncIterator]();async function r(){let i=await e.next();return i.done?null:i.value}return h$e(r)}var Af,Wx,Xx=Se(()=>{l();Af=Wt(as());Ae();An();Gc();Wx={SHA2_256:18,LENGTH:32,DAG_PB:112}});var hte={};bt(hte,{CarWriter:()=>hg,CarWriterOut:()=>$5,__browser:()=>y$e});function dte(){let t=ate(),{writer:e,iterator:r}=t;return{encoder:ste(e),iterator:r}}function p$e(t){if(t===void 0)return[];if(!Array.isArray(t)){let r=Ge.asCID(t);if(!r)throw new TypeError("roots must be a single CID or an array of CIDs");return[r]}let e=[];for(let r of t){let i=Ge.asCID(r);if(!i)throw new TypeError("roots must be a single CID or an array of CIDs");e.push(i)}return e}var hg,$5,y$e,pte=Se(()=>{l();Ae();ote();cte();Xx();hg=class{constructor(e,r){this._encoder=r,this._mutex=r.setRoots(e),this._ended=!1}async put(e){if(!(e.bytes instanceof Uint8Array)||!e.cid)throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");let r=Ge.asCID(e.cid);if(!r)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then(()=>this._encoder.writeBlock({cid:r,bytes:e.bytes})),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(e){e=p$e(e);let{encoder:r,iterator:i}=dte(),n=new hg(e,r),s=new $5(i);return{writer:n,out:s}}static createAppender(){let{encoder:e,iterator:r}=dte();e.setRoots=()=>Promise.resolve();let i=new hg([],e),n=new $5(r);return{writer:i,out:n}}static async updateRootsInBytes(e,r){let i=H5(e);await Yx(i);let n=Gx(r);if(i.pos!==n.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${i.pos} bytes, new header is ${n.length} bytes)`);return e.set(n,0),e}},$5=class{constructor(e){this._iterator=e}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}};y$e=!0});var mte=p((CCt,bte)=>{l();"use strict";var{CID:g$e}=(Ae(),De),b$e=(Tb(),Ib),{base58btc:m$e}=(ti(),ei),{CarWriter:v$e}=(pte(),hte),w$e=ke(),yte=be()("ipfs:components:dag:import"),_$e=(Os(),Eo),E$e=(Jw(),Z6),S$e=[_$e.code,E$e.code];bte.exports=({repo:t,preload:e,codecs:r})=>{async function*i(n,s={}){s.preload!==!1&&e(n);let o=g$e.asCID(n);if(!o)throw new Error(`Unexpected error converting CID type: ${n}`);yte(`Exporting ${o} as car`);let{writer:a,out:c}=await v$e.create([o]),u=null;(async()=>{try{await gte(t,{signal:s.signal,timeout:s.timeout},o,a,r),a.close()}catch(f){u=f}})();for await(let f of c){if(u)break;yield f}if(u)throw u}return w$e(i)};async function gte(t,e,r,i,n,s=new Set){let o=r.toString(m$e);if(s.has(o))return;let a=await x$e(t,e,r,n);yte(`Adding block ${r} to car`),await i.put(a),s.add(o);for(let c of a.links)await gte(t,e,c,i,n,s)}async function x$e(t,e,r,i){let n=await t.blocks.get(r,e),s=[],o=await i.getCodec(r.code);if(o)s=[...b$e.createUnsafe({bytes:n,cid:r,codec:o}).links()].map(c=>c[1]);else if(!S$e.includes(r.code))throw new Error(`Can't decode links in block with codec 0x${r.code.toString(16)} to form complete DAG`);return{cid:r,bytes:n,links:s}}});var _te=p((OCt,wte)=>{l();"use strict";var A$e=ke(),I$e=Ll(),T$e=Gn(),{resolve:vte}=Ki(),R$e=xt();wte.exports=({codecs:t,repo:e,preload:r})=>A$e(async function(s,o={}){if(o.preload!==!1&&r(s),o.path){let d=o.localResolve?await I$e(vte(s,o.path,t,e,o)):await T$e(vte(s,o.path,t,e,o));if(!d)throw R$e(new Error("Not found"),"ERR_NOT_FOUND");return d}let a=await t.getCodec(s.code),c=await e.blocks.get(s,o);return{value:a.decode(c),remainderPath:""}})});var Ate={};bt(Ate,{CarBlockIterator:()=>pg,CarCIDIterator:()=>yg,CarIteratorBase:()=>G5});async function Ete(t){if(!(t instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return xte(H5(t))}async function Ste(t){if(!t||typeof t[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return xte(lte(t))}async function xte(t){let e=fte(t),{version:r,roots:i}=await e.header();return{version:r,roots:i,iterator:e.blocks()}}var G5,pg,yg,Ite=Se(()=>{l();Xx();G5=class{constructor(e,r,i){this._version=e,this._roots=r,this._iterable=i,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}},pg=class extends G5{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(e){let{version:r,roots:i,iterator:n}=await Ete(e);return new pg(r,i,n)}static async fromIterable(e){let{version:r,roots:i,iterator:n}=await Ste(e);return new pg(r,i,n)}},yg=class extends G5{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");this._decoded=!0;let e=this._iterable[Symbol.asyncIterator]();return{async next(){let r=await e.next();return r.done?r:{done:!1,value:r.value.cid}}}}static async fromBytes(e){let{version:r,roots:i,iterator:n}=await Ete(e);return new yg(r,i,n)}static async fromIterable(e){let{version:r,roots:i,iterator:n}=await Ste(e);return new yg(r,i,n)}}});var Pte=p((qCt,Rte)=>{l();"use strict";var{CarBlockIterator:P$e}=(Ite(),Ate),C$e=ke(),O$e=$y(),k$e=Ka(),q$e=Mo(),Tte=be()("ipfs:components:dag:import");Rte.exports=({repo:t})=>{async function*e(r,i={}){let n=await t.gcLock.readLock();try{let s={signal:i.signal,timeout:i.timeout},o=O$e(r),{value:a,done:c}=await o.peek();if(c)return;a&&o.push(a);let u;a instanceof Uint8Array?u=[o]:u=o;for await(let f of u){let d=await D$e(t,s,f);if(i.pinRoots!==!1)for(let h of d){let y="";try{await t.blocks.has(h)?(Tte(`Pinning root ${h}`),await t.pins.pinRecursively(h)):y="blockstore: block not found"}catch(g){y=g.message}yield{root:{cid:h,pinErrorMsg:y}}}}}finally{n()}}return C$e(e)};async function D$e(t,e,r){let i=await P$e.fromIterable(r),n=await i.getRoots();return await k$e(t.blocks.putMany(q$e(i,({cid:s,bytes:o})=>(Tte(`Import block ${s}`),{key:s,value:o})),{signal:e.signal})),n}});var Ote=p((DCt,Cte)=>{l();"use strict";var{CID:N$e}=(Ae(),De),B$e=ke();Cte.exports=({repo:t,codecs:e,hashers:r,preload:i})=>{async function n(s,o={}){let a=o.pin?await t.gcLock.readLock():null;try{let c=o.format||"dag-cbor",u=o.version!=null?o.version:c==="dag-pb"?0:1,f=await e.getCodec(c);if(!f)throw new Error(`Unknown codec ${o.format}, please configure additional BlockCodecs for this IPFS instance`);let d=await r.getHasher(o.hashAlg||"sha2-256");if(!d)throw new Error(`Unknown hash algorithm ${o.hashAlg}, please configure additional MultihashHashers for this IPFS instance`);let h=f.encode(s),y=await d.digest(h),g=N$e.create(u,f.code,y);return await t.blocks.put(g,h,{signal:o.signal}),o.pin&&await t.pins.pinRecursively(g),o.preload!==!1&&i(g),g}finally{a&&a()}}return B$e(n)}});var qte=p((NCt,kte)=>{l();"use strict";var M$e=ke(),L$e=dy(),{resolvePath:U$e}=Ki();kte.exports=({repo:t,codecs:e,preload:r})=>{async function i(n,s={}){let{cid:o}=L$e(n);return s.preload!==!1&&r(o),U$e(t,e,n,s)}return M$e(i)}});var Bte=p((BCt,Nte)=>{l();"use strict";var F$e=mte(),j$e=_te(),K$e=Pte(),V$e=Ote(),z$e=qte(),Dte=class{constructor({repo:e,codecs:r,hashers:i,preload:n}){this.export=F$e({repo:e,preload:n,codecs:r}),this.get=j$e({codecs:r,repo:e,preload:n}),this.import=K$e({repo:e}),this.resolve=z$e({repo:e,codecs:r,preload:n}),this.put=V$e({repo:e,codecs:r,hashers:i,preload:n})}};Nte.exports=Dte});var Y5=p((MCt,Mte)=>{l();var{Multiaddr:H$e}=rt(),W5=(t,e)=>e,$$e=(t,e,r,i)=>{if(i&&i.assumeHttp===!1)return`tcp://${t}:${e}`;let n="tcp",s=`:${e}`;return r[r.length-1].protocol==="tcp"&&(n=e==="443"?"https":"http",s=e==="443"||e==="80"?"":s),`${n}://${t}${s}`},G$e={ip4:W5,ip6:(t,e,r,i)=>i.length===1&&i[0].protocol==="ip6"?e:`[${e}]`,tcp:(t,e,r,i,n)=>i.some(s=>["http","https","ws","wss"].includes(s.protocol))?`${t}:${e}`:$$e(t,e,i,n),udp:(t,e)=>`udp://${t}:${e}`,dnsaddr:W5,dns4:W5,dns6:W5,ipfs:(t,e)=>`${t}/ipfs/${e}`,p2p:(t,e)=>`${t}/p2p/${e}`,http:t=>`http://${t}`,https:t=>`https://${t}`,ws:t=>`ws://${t}`,wss:t=>`wss://${t}`,"p2p-websocket-star":t=>`${t}/p2p-websocket-star`,"p2p-webrtc-star":t=>`${t}/p2p-webrtc-star`,"p2p-webrtc-direct":t=>`${t}/p2p-webrtc-direct`};Mte.exports=(t,e)=>{let r=new H$e(t),i=t.toString().split("/").slice(1);return r.tuples().map(n=>({protocol:i.shift(),content:n[1]?i.shift():null})).reduce((n,s,o,a)=>{let c=G$e[s.protocol];if(!c)throw new Error(`Unsupported protocol ${s.protocol}`);return c(n,s.content,o,a,e)},"")}});var Ute=p((LCt,Lte)=>{l();"use strict";Lte.exports=t=>{if(!Array.isArray(t))throw new TypeError(`Expected an array, got ${typeof t}`);t=[...t];for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}});var Kte=p((UCt,jte)=>{l();"use strict";var{default:W$e}=Yc(),Y$e=r2(),Fte=be(),X$e=Object.assign(Fte("ipfs:preload"),{error:Fte("ipfs:preload:error")}),Q$e=new W$e({concurrency:4});jte.exports=function(e,r={}){return X$e(e),Q$e.add(async()=>{let n=(await Y$e.post(e,{signal:r.signal})).body.getReader();try{for(;;){let{done:s}=await n.read();if(s)return}}finally{n.releaseLock()}})}});var Hte=p((FCt,zte)=>{l();"use strict";var Z$e=Y5(),Vte=be(),J$e=Ute(),{AbortController:eGe}=sn(),tGe=Kte(),rGe=py(),gg=Object.assign(Vte("ipfs:preload"),{error:Vte("ipfs:preload:error")}),iGe=(t={})=>{if(t.enabled=Boolean(t.enabled),t.addresses=t.addresses||[],t.cache=t.cache||1e3,!t.enabled||!t.addresses.length)return gg("preload disabled"),Object.assign(()=>{},{start:()=>{},stop:()=>{}});let e=!0,r=[],i=t.addresses.map(Z$e),n=rGe(t.cache),s=async o=>{try{if(e)throw new Error(`preload ${o} but preloader is not started`);let a=o.toString();if(n.has(a))return;n.set(a,!0);let c=J$e(i),u=!1,f=Date.now();for(let d of c){if(e)throw new Error(`preload aborted for ${a}`);let h;try{h=new eGe,r=r.concat(h),await tGe(`${d}/api/v0/refs?r=true&arg=${encodeURIComponent(a)}`,{signal:h.signal}),u=!0}catch(y){y.type!=="aborted"&&gg.error(y)}finally{r=r.filter(y=>y!==h)}if(u)break}gg(`${u?"":"un"}successfully preloaded ${a} in ${Date.now()-f}ms`)}catch(a){gg.error(a)}};return s.start=()=>{e=!1},s.stop=()=>{e=!0,gg(`aborting ${r.length} pending preload request(s)`),r.forEach(o=>o.abort()),r=[]},s};zte.exports=iGe});var Wte=p((jCt,Gte)=>{l();"use strict";var $te=be(),X5=Object.assign($te("ipfs:mfs-preload"),{error:$te("ipfs:mfs-preload:error")});Gte.exports=({preload:t,files:e,options:r={}})=>{if(r.interval=r.interval||30*1e3,!r.enabled){X5("MFS preload disabled");let o=async()=>{};return{start:o,stop:o}}let i="",n,s=async()=>{try{let o=await e.stat("/"),a=o.cid.toString();i!==a&&(X5(`preloading updated MFS root ${i} -> ${o.cid}`),await t(o.cid),i=a)}catch(o){X5.error("failed to preload MFS root",o)}finally{n=setTimeout(s,r.interval)}};return{async start(){let o=await e.stat("/");i=o.cid.toString(),X5(`monitoring MFS root ${o.cid}`),n=setTimeout(s,r.interval)},stop(){clearTimeout(n)}}}});var Qx=p((KCt,Yte)=>{l();"use strict";var nGe=GE(),Q5;Yte.exports=(t=!1)=>{if(Q5)return Q5;let e=nGe({singleProcess:t});return Q5={readLock:r=>async(...i)=>{let n=await e.readLock();try{return await r.apply(null,i)}finally{n()}},writeLock:r=>async(...i)=>{let n=await e.writeLock();try{return await r.apply(null,i)}finally{n()}}},Q5}});var Z5=p((VCt,ere)=>{l();"use strict";var{CID:Xte}=(Ae(),De),{UnixFS:sGe}=(pi(),us),oGe=(wt(),Mt),{sha256:aGe}=(ii(),fi),Qte=be()("ipfs:mfs:utils:with-mfs-root"),Zte=xt(),{MFS_ROOT_KEY:Jte}=Ki(),cGe=async(t,e)=>{if(e&&e.signal&&e.signal.aborted)throw Zte(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});await t.repo.datastore.open();let r;try{let i=await t.repo.datastore.get(Jte);r=Xte.decode(i)}catch(i){if(i.code!=="ERR_NOT_FOUND")throw i;Qte("Creating new MFS root");let n=oGe.encode({Data:new sGe({type:"directory"}).marshal(),Links:[]}),s=await aGe.digest(n);if(r=Xte.createV0(s),await t.repo.blocks.put(r,n),e&&e.signal&&e.signal.aborted)throw Zte(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});await t.repo.datastore.put(Jte,r.bytes)}return Qte(`Loaded MFS root /ipfs/${r}`),r};ere.exports=cGe});var J5=p((zCt,tre)=>{l();"use strict";var uGe=(t="")=>(t.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean);tre.exports=uGe});var iu=p((HCt,ire)=>{l();"use strict";var fGe=Z5(),lGe=J5(),{exporter:dGe}=(zo(),Vo),rre=xt(),{CID:hGe}=(Ae(),De),Zx="ipfs",pGe=async(t,e,r)=>{let i=await fGe(t,r),n={entryType:"file"},s="";if(hGe.asCID(e)?s=`/ipfs/${e}`:s=e.toString(),s=s.trim(),s=s.replace(/(\/\/+)/g,"/"),s.endsWith("/")&&s.length>1&&(s=s.substring(0,s.length-1)),!s)throw rre(new Error("paths must not be empty"),"ERR_NO_PATH");if(s.substring(0,1)!=="/")throw rre(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");s.substring(s.length-1)==="/"&&(s=s.substring(0,s.length-1));let o=lGe(s);if(o[0]===Zx){let c;o.length===2?c=`/${o.join("/")}`:c=`/${o.slice(0,o.length-1).join("/")}`,n={type:"ipfs",depth:o.length-2,entryType:"file",mfsPath:`/${o.join("/")}`,mfsDirectory:c,parts:o,path:`/${o.join("/")}`,name:o[o.length-1]}}else{let c=`/${Zx}/${i}${o.length?"/"+o.join("/"):""}`,u=`/${Zx}/${i}/${o.slice(0,o.length-1).join("/")}`;n={type:"mfs",depth:o.length,entryType:"file",mfsDirectory:u,mfsPath:c,parts:o,path:`/${o.join("/")}`,name:o[o.length-1]}}let a=n.type==="mfs"?n.mfsPath:n.path;try{let c=await dGe(a,t.repo.blocks,r);n.cid=c.cid,n.mfsPath=`/ipfs/${c.path}`,n.entryType=c.type,n.content=c.content,(n.entryType==="file"||n.entryType==="directory")&&(c.type==="file"||c.type==="directory")&&(n.unixfs=c.unixfs)}catch(c){if(c.code!=="ERR_NOT_FOUND")throw c}return n.exists=Boolean(n.cid),n};ire.exports=pGe});var bg=p(($Ct,ore)=>{l();"use strict";var yGe=br().bind({ignoreUndefined:!0}),gGe=iu(),{exporter:bGe}=(zo(),Vo),mGe=be()("ipfs:mfs:stat"),vGe=xt(),wGe=ke(),nre=(wt(),Mt),_Ge={withLocal:!1};ore.exports=t=>{async function e(r,i={}){i=yGe(_Ge,i),mGe(`Fetching stats for ${r}`);let{type:n,cid:s,mfsPath:o}=await gGe(t,r,i),a=n==="ipfs"&&s?s:o,c;try{c=await bGe(a,t.repo.blocks)}catch(u){throw u.code==="ERR_NOT_FOUND"?vGe(new Error(`${r} does not exist`),"ERR_NOT_FOUND"):u}if(!sre[c.type])throw new Error(`Cannot stat codec ${c.cid.code}`);return sre[c.type](c)}return wGe(e)};var sre={raw:t=>({cid:t.cid,size:t.node.length,cumulativeSize:t.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1}),file:t=>{let e={cid:t.cid,type:"file",size:t.unixfs.fileSize(),cumulativeSize:nre.encode(t.node).length+(t.node.Links||[]).reduce((r,i)=>r+(i.Tsize||0),0),blocks:t.unixfs.blockSizes.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:t.unixfs.mode};return t.unixfs.mtime&&(e.mtime=t.unixfs.mtime),e},directory:t=>{let e={cid:t.cid,type:"directory",size:0,cumulativeSize:nre.encode(t.node).length+(t.node.Links||[]).reduce((r,i)=>r+(i.Tsize||0),0),blocks:t.node.Links.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:t.unixfs.mode};return t.unixfs.mtime&&(e.mtime=t.unixfs.mtime),e},object:t=>({cid:t.cid,size:t.node.length,cumulativeSize:t.node.length,type:"file",blocks:0,local:void 0,sizeLocal:void 0,withLocality:!1}),identity:t=>({cid:t.cid,size:t.node.length,cumulativeSize:t.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1})}});var e1=p((GCt,are)=>{l();"use strict";var{walkPath:EGe}=(zo(),Vo),SGe=be()("ipfs:mfs:utils:to-trail"),xGe=async(t,e)=>{SGe(`Creating trail for path ${e}`);let r=[];for await(let i of EGe(e,t.repo.blocks))r.push({name:i.name,cid:i.cid,size:i.size,type:i.type});return r};are.exports=xGe});var Jx=p((WCt,fre)=>{l();"use strict";var{CID:AGe}=(Ae(),De),cre=(wt(),Mt),{sha256:ure}=(ii(),fi),IGe=async(t,e,r)=>{r.codec||(r.codec=cre),r.hasher||(r.hasher=ure),r.cidVersion===void 0&&(r.cidVersion=1),r.codec===cre&&r.hasher!==ure&&(r.cidVersion=1);let i=await r.hasher.digest(t),n=AGe.create(r.cidVersion,r.codec.code,i);return r.onlyHash||await e.put(n,t,{signal:r.signal}),n};fre.exports=IGe});var eA=p((YCt,dre)=>{l();"use strict";var{murmur3128:lre}=(i5(),tX);dre.exports={hamtHashCode:lre.code,hamtBucketBits:8,async hamtHashFn(t){return(await lre.encode(t)).slice(0,8).reverse()}}});var tA=p((XCt,gre)=>{l();"use strict";var{encode:TGe,prepare:RGe}=(wt(),Mt),{UnixFS:PGe}=(pi(),us),CGe=Jx(),{createHAMT:OGe,Bucket:kGe}=zy(),{hamtHashCode:qGe,hamtHashFn:DGe,hamtBucketBits:NGe}=eA(),hre=class{constructor(e,r){this.options=r||{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime,this.cid=void 0,this.size=void 0}async put(e,r){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}},pre=class extends hre{constructor(e,r){super(e,r);this._bucket=OGe({hashFn:DGe,bits:NGe})}async put(e,r){await this._bucket.put(e,r)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(let{key:e,value:r}of this._bucket.eachLeafSeries())yield{key:e,child:r}}async*flush(e){yield*yre(this._bucket,e,this,this.options)}};gre.exports=pre;async function*yre(t,e,r,i){let n=t._children,s=[],o=0;for(let y=0;y<n.length;y++){let g=n.get(y);if(!g)continue;let m=y.toString(16).toUpperCase().padStart(2,"0");if(g instanceof kGe){let E;for await(let v of await yre(g,e,null,i))E=v;if(!E)throw new Error("Could not flush sharded directory, no subshard found");s.push({Name:m,Tsize:E.size,Hash:E.cid}),o+=E.size}else if(typeof g.value.flush=="function"){let E=g.value,v;for await(let R of E.flush(e))v=R,yield v;let A=m+g.key;s.push({Name:A,Tsize:v.size,Hash:v.cid}),o+=v.size}else{let E=g.value;if(!E.cid)continue;let v=m+g.key,A=E.size;s.push({Name:v,Tsize:A,Hash:E.cid}),o+=A}}let a=Uint8Array.from(n.bitField().reverse()),u={Data:new PGe({type:"hamt-sharded-directory",data:a,fanout:t.tableSize(),hashType:qGe,mtime:r&&r.mtime,mode:r&&r.mode}).marshal(),Links:s},f=TGe(RGe(u)),d=await CGe(f,e,i),h=f.length+o;yield{cid:d,node:u,size:h}}});var iA=p((QCt,_re)=>{l();"use strict";var rA=(wt(),Mt),{Bucket:bre,createHAMT:BGe}=zy(),MGe=tA(),em=be()("ipfs:mfs:core:utils:hamt-utils"),{UnixFS:mre}=(pi(),us),LGe=Gn(),{CID:UGe}=(Ae(),De),{hamtHashCode:FGe,hamtHashFn:jGe,hamtBucketBits:KGe}=eA(),VGe=async(t,e,r,i)=>{if(!i.parent.Data)throw new Error("Could not update HAMT directory because parent had no data");let n=Uint8Array.from(r._children.bitField().reverse()),s=mre.unmarshal(i.parent.Data),o=new mre({type:"hamt-sharded-directory",data:n,fanout:r.tableSize(),hashType:FGe,mode:s.mode,mtime:s.mtime}),a=await t.hashers.getHasher(i.hashAlg),c={Data:o.marshal(),Links:e.sort((h,y)=>(h.Name||"").localeCompare(y.Name||""))},u=rA.encode(c),f=await a.digest(u),d=UGe.create(i.cidVersion,rA.code,f);return i.flush&&await t.repo.blocks.put(d,u),{node:c,cid:d,size:e.reduce((h,y)=>h+(y.Tsize||0),u.length)}},vre=async(t,e,r,i)=>{let n=new bre({hash:e._options.hash,bits:e._options.bits},r,i);return r._putObjectAt(i,n),await tm(t,n,e),n},wre=async t=>{let e=BGe({hashFn:jGe,bits:KGe});return await tm(t,e,e),e},tm=async(t,e,r)=>{await Promise.all(t.map(i=>{let n=i.Name||"";if(n.length===2){let s=parseInt(n,16);return e._putObjectAt(s,new bre({hash:r._options.hash,bits:r._options.bits},e,s)),Promise.resolve()}return r.put(n.substring(2),{size:i.Tsize,cid:i.Hash})}))},rm=t=>t.toString(16).toUpperCase().padStart(2,"0").substring(0,2),zGe=async(t,e,r)=>{let i=await wre(r.Links),n=await i._findNewBucketAndPos(e),s=[{bucket:n.bucket,prefix:rm(n.pos)}],o=n.bucket;for(;o!==i;)s.push({bucket:o,prefix:rm(o._posAtParent)}),o=o._parent;s.reverse(),s[0].node=r;for(let a=0;a<s.length;a++){let c=s[a];if(!c.node)throw new Error("Could not generate HAMT path");let u=c.node.Links.filter(y=>(y.Name||"").substring(0,2)===c.prefix).pop();if(!u){em(`Link ${c.prefix}${e} will be added`);continue}if(u.Name===`${c.prefix}${e}`){em(`Link ${c.prefix}${e} will be replaced`);continue}em(`Found subshard ${c.prefix}`);let f=await t.repo.blocks.get(u.Hash),d=rA.decode(f);if(!s[a+1]){em(`Loaded new subshard ${c.prefix}`),await vre(d.Links,i,c.bucket,parseInt(c.prefix,16));let y=await i._findNewBucketAndPos(e);s.push({bucket:y.bucket,prefix:rm(y.pos),node:d});continue}let h=s[a+1];await tm(d.Links,h.bucket,i),h.node=d}return await i.put(e,!0),s.reverse(),{rootBucket:i,path:s}},HGe=async(t,e,r={})=>{let i=new MGe({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mtime:r.mtime,mode:r.mode},r);for(let s=0;s<e.length;s++)await i._bucket.put(e[s].name,{size:e[s].size,cid:e[s].cid});let n=await LGe(i.flush(t.repo.blocks));if(!n)throw new Error("Flushing shard yielded no result");return n};_re.exports={generatePath:zGe,updateHamtDirectory:VGe,recreateHamtLevel:vre,recreateInitialHamtLevel:wre,addLinksToHamtBucket:tm,toPrefix:rm,createShard:HGe}});var nd=p((ZCt,Sre)=>{l();"use strict";var id=(wt(),Mt),{CID:Ere}=(Ae(),De),Za=be()("ipfs:mfs:core:utils:add-link"),{UnixFS:nA}=(pi(),us),$Ge=tA(),{updateHamtDirectory:GGe,recreateHamtLevel:WGe,recreateInitialHamtLevel:YGe,createShard:XGe,toPrefix:sA,addLinksToHamtBucket:QGe}=iA(),nu=xt(),ZGe=Gn(),JGe=async(t,e)=>{let r=e.parent;if(e.parentCid){let n=Ere.asCID(e.parentCid);if(n===null)throw nu(new Error("Invalid CID passed to addLink"),"EINVALIDPARENTCID");if(n.code!==id.code)throw nu(new Error("Unsupported codec. Only DAG-PB is supported"),"EINVALIDPARENTCID");Za(`Loading parent node ${n}`);let s=await t.repo.blocks.get(n);r=id.decode(s)}if(!r)throw nu(new Error("No parent node or CID passed to addLink"),"EINVALIDPARENT");if(!e.cid)throw nu(new Error("No child cid passed to addLink"),"EINVALIDCHILDCID");if(!e.name)throw nu(new Error("No child name passed to addLink"),"EINVALIDCHILDNAME");if(!e.size&&e.size!==0)throw nu(new Error("No child size passed to addLink"),"EINVALIDCHILDSIZE");if(!r.Data)throw nu(new Error("Parent node with no data passed to addLink"),"ERR_INVALID_PARENT");let i=nA.unmarshal(r.Data);return i.type==="hamt-sharded-directory"?(Za("Adding link to sharded directory"),rWe(t,{...e,parent:r})):r.Links.length>=e.shardSplitThreshold?(Za("Converting directory to sharded directory"),eWe(t,{...e,parent:r,mtime:i.mtime,mode:i.mode})):(Za(`Adding ${e.name} (${e.cid}) to regular directory`),tWe(t,{...e,parent:r}))},eWe=async(t,e)=>{let r=await XGe(t,e.parent.Links.map(i=>({name:i.Name||"",size:i.Tsize||0,cid:i.Hash})).concat({name:e.name,size:e.size,cid:e.cid}),e);return Za(`Converted directory to sharded directory ${r.cid}`),r},tWe=async(t,e)=>{let r=e.parent.Links.filter(u=>u.Name!==e.name);if(r.push({Name:e.name,Tsize:e.size,Hash:e.cid}),!e.parent.Data)throw nu(new Error("Parent node with no data passed to addToDirectory"),"ERR_INVALID_PARENT");let i=nA.unmarshal(e.parent.Data),n;if(i.mtime){let u=Date.now(),f=Math.floor(u/1e3);i.mtime={secs:f,nsecs:(u-f*1e3)*1e3},n=i.marshal()}else n=e.parent.Data;e.parent=id.prepare({Data:n,Links:r});let s=await t.hashers.getHasher(e.hashAlg),o=id.encode(e.parent),a=await s.digest(o),c=Ere.create(e.cidVersion,id.code,a);return e.flush&&await t.repo.blocks.put(c,o),{node:e.parent,cid:c,size:o.length}},rWe=async(t,e)=>{let{shard:r,path:i}=await iWe(t,e),n=await ZGe(r.flush(t.repo.blocks));if(!n)throw new Error("No result from flushing shard");let s=await t.repo.blocks.get(n.cid),o=id.decode(s),a=e.parent.Links.filter(u=>(u.Name||"").substring(0,2)!==i[0].prefix),c=o.Links.find(u=>(u.Name||"").substring(0,2)===i[0].prefix);if(!c)throw new Error(`No link found with prefix ${i[0].prefix}`);return a.push(c),GGe(t,a,i[0].bucket,e)},iWe=async(t,e)=>{let r={name:e.name,cid:e.cid,size:e.size};if(!e.parent.Data)throw nu(new Error("Parent node with no data passed to addFileToShardedDirectory"),"ERR_INVALID_PARENT");let i=await YGe(e.parent.Links),n=nA.unmarshal(e.parent.Data),s=new $Ge({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mode:n.mode},e);s._bucket=i,n.mtime&&(s.mtime={secs:Math.round(Date.now()/1e3)});let o=await i._findNewBucketAndPos(r.name),a=nWe(o);a[0].node=e.parent;let c=0;for(;c<a.length;){let u=a[c];c++;let f=u.node;if(!f)throw new Error("Segment had no node");let d=f.Links.find(m=>(m.Name||"").substring(0,2)===u.prefix);if(!d){Za(`Link ${u.prefix}${r.name} will be added`),c=a.length;break}if(d.Name===`${u.prefix}${r.name}`){Za(`Link ${u.prefix}${r.name} will be replaced`),c=a.length;break}if((d.Name||"").length>2){Za(`Link ${d.Name} ${d.Hash} will be replaced with a subshard`),c=a.length;break}Za(`Found subshard ${u.prefix}`);let h=await t.repo.blocks.get(d.Hash),y=id.decode(h);if(!a[c]){Za(`Loaded new subshard ${u.prefix}`),await WGe(y.Links,i,u.bucket,parseInt(u.prefix,16));let m=await i._findNewBucketAndPos(r.name);a.push({bucket:m.bucket,prefix:sA(m.pos),node:y});break}let g=a[c];await QGe(y.Links,g.bucket,i),g.node=y}return await s._bucket.put(r.name,{size:r.size,cid:r.cid}),{shard:s,path:a}},nWe=t=>{let e=[{bucket:t.bucket,prefix:sA(t.pos)}],r=t.bucket._parent,i=t.bucket._posAtParent;for(;r;)e.push({bucket:r,prefix:sA(i)}),i=r._posAtParent,r=r._parent;return e.reverse(),e};Sre.exports=JGe});var sd=p((JCt,Are)=>{l();"use strict";var xre=be()("ipfs:mfs:utils:update-tree"),sWe=nd(),{decode:oWe}=(wt(),Mt),aWe={shardSplitThreshold:1e3},cWe=async(t,e,r)=>{r=Object.assign({},aWe,r),xre("Trail",e),e=e.slice().reverse();let i=0,n;for await(let o of t.repo.blocks.getMany(e.map(a=>a.cid))){let a=oWe(o),c=e[i].cid,u=e[i].name;if(i++,!n){n={cid:c,name:u,size:o.length};continue}let f=await sWe(t,{parent:a,name:n.name,cid:n.cid,size:n.size,flush:r.flush,shardSplitThreshold:r.shardSplitThreshold,hashAlg:r.hashAlg,cidVersion:r.cidVersion});n={cid:f.cid,name:u,size:f.size}}let{cid:s}=n;return xre(`Final CID ${s}`),s};Are.exports=cWe});var od=p((eOt,Ire)=>{l();"use strict";var uWe=be()("ipfs:mfs:utils:update-mfs-root"),{MFS_ROOT_KEY:fWe}=Ki(),lWe=xt(),dWe=async(t,e,r)=>{if(r&&r.signal&&r.signal.aborted)throw lWe(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});return uWe(`New MFS root will be ${e}`),await t.repo.datastore.put(fWe,e.bytes),e};Ire.exports=dWe});var Pre=p((tOt,Rre)=>{l();"use strict";var{UnixFS:hWe}=(pi(),us),Tre=(wt(),Mt),{CID:pWe}=(Ae(),De),yWe=async(t,e,r)=>{let i=new hWe({type:e,mode:r.mode,mtime:r.mtime}),n=await t.hashers.getHasher(r.hashAlg),s={Data:i.marshal(),Links:[]},o=Tre.encode(s),a=await n.digest(o),c=pWe.create(r.cidVersion,Tre.code,a);return r.flush&&await t.repo.blocks.put(c,o),{cid:c,node:s}};Rre.exports=yWe});var im=p((rOt,Ore)=>{l();"use strict";var t1=xt(),Cre=be()("ipfs:mfs:mkdir"),{exporter:gWe}=(zo(),Vo),bWe=Pre(),mWe=J5(),vWe=od(),wWe=sd(),_We=nd(),EWe=Z5(),SWe=br().bind({ignoreUndefined:!0}),xWe=ke(),AWe={parents:!1,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3,flush:!0};Ore.exports=t=>{async function e(r,i={}){let n=SWe(AWe,i);if(!r)throw new Error("no path given to Mkdir");if(r=r.trim(),r==="/"){if(n.parents)return;throw t1(new Error("cannot create directory '/': Already exists"),"ERR_INVALID_PATH")}if(r.substring(0,1)!=="/")throw t1(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");Cre(`Creating ${r}`);let s=mWe(r);if(s[0]==="ipfs")throw t1(new Error("path cannot have the prefix 'ipfs'"),"ERR_INVALID_PATH");let o=await EWe(t,n),a,c=[],u=await bWe(t,"directory",n);for(let d=0;d<=s.length;d++){let h=s.slice(0,d),y=`/ipfs/${o}/${h.join("/")}`;try{if(a=await gWe(y,t.repo.blocks),a.type!=="file"&&a.type!=="directory")throw t1(new Error(`${r} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(d===s.length){if(n.parents)return;throw t1(new Error("file already exists"),"ERR_ALREADY_EXISTS")}c.push({name:a.name,cid:a.cid})}catch(g){if(g.code==="ERR_NOT_FOUND"){if(d<s.length&&!n.parents)throw t1(new Error(`Intermediate directory path ${y} does not exist, use the -p flag to create it`),"ERR_NOT_FOUND");await IWe(t,h[h.length-1],u,c[c.length-1],c,n)}else throw g}}let f=await wWe(t,c,n);await vWe(t,f,n)}return xWe(e)};var IWe=async(t,e,r,i,n,s)=>{Cre(`Adding empty dir called ${e} to ${i.cid}`);let o=await _We(t,{parent:i.node,parentCid:i.cid,size:0,cid:r.cid,name:e,hashAlg:s.hashAlg,cidVersion:s.cidVersion,flush:s.flush,shardSplitThreshold:s.shardSplitThreshold});n[n.length-1].cid=o.cid,n.push({name:e,cid:r.cid})}});var om=p((iOt,Mre)=>{l();"use strict";var kre=im(),TWe=bg(),nm=be()("ipfs:mfs:cp"),ad=xt(),qre=sd(),Dre=od(),RWe=nd(),sm=iu(),PWe=br().bind({ignoreUndefined:!0}),CWe=e1(),OWe=ke(),kWe={parents:!1,flush:!0,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3};Mre.exports=t=>{async function e(r,i,n={}){let s=PWe(kWe,n);Array.isArray(r)||(r=[r]);let o=await Promise.all(r.map(h=>sm(t,h,s))),a=await sm(t,i,s);if(!o.length||!a)throw ad(new Error("Please supply at least one source"),"ERR_INVALID_PARAMS");let c=o.find(h=>!h.exists);if(c)throw ad(new Error(`${c.path} does not exist`),"ERR_INVALID_PARAMS");let u=Nre(a);if(a.exists){if(nm("Destination exists"),o.length===1&&!u)throw ad(new Error("directory already has entry by that name"),"ERR_ALREADY_EXISTS")}else if(nm("Destination does not exist"),o.length>1){if(!s.parents)throw ad(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await kre(t)(a.path,s),a=await sm(t,a.path,s)}else if(a.parts.length>1){let h=`/${a.parts.slice(0,-1).join("/")}`;try{await TWe(t)(h,s)}catch(y){if(y.code!=="ERR_NOT_FOUND")throw y;if(!s.parents)throw ad(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await kre(t)(h,s),a=await sm(t,a.path,s)}}let f=Nre(a)?a.mfsPath:a.mfsDirectory,d=await CWe(t,f);if(o.length===1){let h=o.pop();if(!h)throw ad(new Error("could not find source"),"ERR_INVALID_PARAMS");let y=u?h.name:a.name;return nm(`Only one source, copying to destination ${u?"directory":"file"} ${y}`),qWe(t,h,y,d,s)}return nm("Multiple sources, wrapping in a directory"),DWe(t,o,a,d,s)}return OWe(e)};var Nre=t=>t.unixfs&&t.unixfs.type&&t.unixfs.type.includes("directory"),qWe=async(t,e,r,i,n)=>{let s=i.pop();if(!s)throw ad(new Error("destination had no parent"),"ERR_INVALID_PARAMS");s=await Bre(t,e,r,s,n),i.push(s);let o=await qre(t,i,n);await Dre(t,o,n)},DWe=async(t,e,r,i,n)=>{for(let o=0;o<e.length;o++){let a=e[o];r=await Bre(t,a,a.name,r,n)}i[i.length-1]=r;let s=await qre(t,i,n);await Dre(t,s,n)},Bre=async(t,e,r,i,n)=>{let s=await t.repo.blocks.get(e.cid),{node:o,cid:a,size:c}=await RWe(t,{parentCid:i.cid,size:s.length,cid:e.cid,name:r,hashAlg:n.hashAlg,cidVersion:n.cidVersion,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold});return i.node=o,i.cid=a,i.size=c,i}});var jre=p((nOt,Fre)=>{l();"use strict";var oA=(wt(),Mt),{CID:Lre}=(Ae(),De),If=be()("ipfs:mfs:core:utils:remove-link"),{UnixFS:NWe}=(pi(),us),{generatePath:BWe,updateHamtDirectory:aA}=iA(),cd=xt(),MWe=async(t,e)=>{let r=e.parent;if(e.parentCid){let n=Lre.asCID(e.parentCid);if(n===null)throw cd(new Error("Invalid CID passed to removeLink"),"EINVALIDPARENTCID");If(`Loading parent node ${n}`);let s=await t.repo.blocks.get(n);r=oA.decode(s)}if(!r)throw cd(new Error("No parent node or CID passed to removeLink"),"EINVALIDPARENT");if(!e.name)throw cd(new Error("No child name passed to removeLink"),"EINVALIDCHILDNAME");if(!r.Data)throw cd(new Error("Parent node had no data"),"ERR_INVALID_NODE");return NWe.unmarshal(r.Data).type==="hamt-sharded-directory"?(If(`Removing ${e.name} from sharded directory`),UWe(t,{...e,parent:r})):(If(`Removing link ${e.name} regular directory`),LWe(t,{...e,parent:r}))},LWe=async(t,e)=>{e.parent.Links=e.parent.Links.filter(o=>o.Name!==e.name);let r=await oA.encode(e.parent),n=await(await t.hashers.getHasher(e.hashAlg)).digest(r),s=Lre.create(e.cidVersion,oA.code,n);return await t.repo.blocks.put(s,r),If(`Updated regular directory ${s}`),{node:e.parent,cid:s}},UWe=async(t,e)=>{let{rootBucket:r,path:i}=await BWe(t,e.name,e.parent);await r.del(e.name);let{node:n}=await Ure(t,i,e.name,e);return aA(t,n.Links,r,e)},Ure=async(t,e,r,i)=>{let n=e.pop();if(!n)throw cd(new Error("Could not find parent"),"EINVALIDPARENT");let{bucket:s,prefix:o,node:a}=n;if(!a)throw cd(new Error("Could not find parent"),"EINVALIDPARENT");let c=a.Links.find(y=>(y.Name||"").substring(0,2)===o);if(!c)throw cd(new Error(`No link found with prefix ${o} for file ${r}`),"ERR_NOT_FOUND");if(c.Name===`${o}${r}`){If(`Removing existing link ${c.Name}`);let y=a.Links.filter(g=>g.Name!==c.Name);return await s.del(r),aA(t,y,s,i)}If(`Descending into sub-shard ${c.Name} for ${o}${r}`);let u=await Ure(t,e,r,i),f=u.cid,d=u.size,h=o;if(u.node.Links.length===1){If(`Removing subshard for ${o}`);let y=u.node.Links[0];h=`${o}${(y.Name||"").substring(2)}`,f=y.Hash,d=y.Tsize||0}return If(`Updating shard ${o} with name ${h}`),FWe(t,s,a,o,h,d,f,i)},FWe=(t,e,r,i,n,s,o,a)=>{let c=r.Links.filter(u=>u.Name!==i);return c.push({Name:n,Tsize:s,Hash:o}),aA(t,c,e,a)};Fre.exports=MWe});var cm=p((sOt,Vre)=>{l();"use strict";var am=xt(),jWe=sd(),KWe=od(),VWe=jre(),Kre=iu(),zWe=e1(),HWe=ke(),$We=br().bind({ignoreUndefined:!0}),GWe={recursive:!1,cidVersion:0,hashAlg:"sha2-256",flush:!0,shardSplitThreshold:1e3};Vre.exports=t=>{async function e(r,i={}){let n=$We(GWe,i);Array.isArray(r)||(r=[r]);let s=await Promise.all(r.map(o=>Kre(t,o,n)));if(!s.length)throw am(new Error("Please supply at least one path to remove"),"ERR_INVALID_PARAMS");s.forEach(o=>{if(o.path==="/")throw am(new Error("Cannot delete root"),"ERR_INVALID_PARAMS")});for(let o of s)await WWe(t,o.path,n)}return HWe(e)};var WWe=async(t,e,r)=>{let i=await Kre(t,e,r),n=await zWe(t,i.mfsPath),s=n[n.length-1];n.pop();let o=n[n.length-1];if(!o)throw am(new Error(`${e} does not exist`),"ERR_NOT_FOUND");if(s.type==="directory"&&!r.recursive)throw am(new Error(`${e} is a directory, use -r to remove directories`),"ERR_WAS_DIR");let{cid:a}=await VWe(t,{parentCid:o.cid,name:s.name,hashAlg:r.hashAlg,cidVersion:r.cidVersion,flush:r.flush,shardSplitThreshold:r.shardSplitThreshold});o.cid=a;let c=await jWe(t,n,r);await KWe(t,c,r)}});var Yre=p((oOt,Wre)=>{l();"use strict";var YWe=br().bind({ignoreUndefined:!0}),XWe=iu(),QWe=be()("ipfs:mfs:touch"),mg=xt(),{UnixFS:zre}=(pi(),us),ZWe=e1(),JWe=nd(),eYe=sd(),tYe=od(),ud=(wt(),Mt),{CID:Hre}=(Ae(),De),{pipe:rYe}=Ir(),{importer:iYe}=(d5(),l5),{recursive:nYe}=(zo(),Vo),sYe=Gn(),oYe=om(),aYe=cm(),cYe=Jx(),uYe=ke(),$re={flush:!0,shardSplitThreshold:1e3,hashAlg:"sha2-256",cidVersion:0,recursive:!1};function fYe(t,e,r){let i=0;return(t.includes("x")||t.includes("X")&&(r||e&1||e&8||e&64))&&(i+=1),t.includes("w")&&(i+=2),t.includes("r")&&(i+=4),i}function lYe(t,e){let r=0;return t.includes("u")&&(r+=e<<6),t.includes("g")&&(r+=e<<3),t.includes("o")&&(r+=e),r}function dYe(t,e,r){return e.includes("t")&&(r+=parseInt("1000",8)),e.includes("s")&&(t.includes("u")&&(r+=parseInt("4000",8)),t.includes("g")&&(r+=parseInt("2000",8))),r}function hYe(t,e,r){e||(e=0);let i=t.match(/^(u?g?o?a?)(-?\+?=?)?(r?w?x?X?s?t?)$/);if(!i)throw new Error(`Invalid file mode: ${t}`);let[,n,s,o]=i;(n==="a"||!n)&&(n="ugo");let a=fYe(o,e,r);return a=lYe(n,a),a=dYe(n,o,a),s==="="?(n.includes("u")&&(e=e&parseInt("7077",8),e=e|a),n.includes("g")&&(e=e&parseInt("7707",8),e=e|a),n.includes("o")&&(e=e&parseInt("7770",8),e=e|a),e):s==="+"?a|e:s==="-"?a^e:e}function Gre(t,e){if(t instanceof String||typeof t=="string"){let r=`${t}`;r.match(/^\d+$/g)?t=parseInt(r,8):t=0+r.split(",").reduce((i,n)=>hYe(n,i,e.isDirectory()),e.mode||0)}return t}Wre.exports=t=>{async function e(r,i,n={}){let s=YWe($re,n);QWe(`Fetching stats for ${r}`);let{cid:o,mfsDirectory:a,name:c}=await XWe(t,r,s);if(o.code!==ud.code)throw mg(new Error(`${r} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(s.recursive){let G=await rYe(async function*(){for await(let Y of nYe(o,t.repo.blocks)){if(Y.type!=="file"&&Y.type!=="directory")throw mg(new Error(`${r} was not a UnixFS node`),"ERR_NOT_UNIXFS");Y.unixfs.mode=Gre(i,Y.unixfs);let P=ud.prepare({Data:Y.unixfs.marshal(),Links:Y.node.Links});yield{path:Y.path,content:P}}},Y=>iYe(Y,t.repo.blocks,{...s,pin:!1,dagBuilder:async function*(P,b,w){for await(let S of P)yield async function(){let C=S.content,B=ud.encode(C),W=await cYe(B,b,w);if(!C.Data)throw mg(new Error(`${W} had no data`),"ERR_INVALID_NODE");let K=zre.unmarshal(C.Data);return{cid:W,size:B.length,path:S.path,unixfs:K}}}}),Y=>sYe(Y));if(!G)throw mg(new Error(`Could not chmod ${r}`),"ERR_COULD_NOT_CHMOD");await aYe(t)(r,s),await oYe(t)(`/ipfs/${G.cid}`,r,s);return}let u=await t.repo.blocks.get(o),f=ud.decode(u);if(!f.Data)throw mg(new Error(`${o} had no data`),"ERR_INVALID_NODE");let d=zre.unmarshal(f.Data);d.mode=Gre(i,d);let h=ud.encode({Data:d.marshal(),Links:f.Links}),y=s.hashAlg||$re.hashAlg,m=await(await t.hashers.getHasher(y)).digest(h),E=Hre.create(s.cidVersion,ud.code,m);s.flush&&await t.repo.blocks.put(E,h);let v=await ZWe(t,a),A=v[v.length-1],R=Hre.decode(A.cid.bytes),F=await t.repo.blocks.get(R),q=ud.decode(F),D=await JWe(t,{parent:q,name:c,cid:E,size:h.length,flush:s.flush,hashAlg:y,cidVersion:o.version,shardSplitThreshold:1/0});A.cid=D.cid;let z=await eYe(t,v,s);await tYe(t,z,s)}return uYe(e)}});var Qre=p((aOt,Xre)=>{l();"use strict";var pYe=bg(),yYe=ke(),gYe=br().bind({ignoreUndefined:!0}),bYe={};Xre.exports=t=>{async function e(r,i={}){i=gYe(bYe,i);let{cid:n}=await pYe(t)(r,i);return n}return yYe(e)}});var Jre=p((cOt,Zre)=>{l();"use strict";var mYe=om(),vYe=cm(),wYe=br().bind({ignoreUndefined:!0}),_Ye=ke(),EYe={parents:!1,flush:!0,cidVersion:0,hashAlg:"sha2-256",shardSplitThreshold:1e3};Zre.exports=t=>{async function e(r,i,n={}){let s=wYe(EYe,n);await mYe(t)(r,i,s),await vYe(t)(r,{...s,recursive:!0})}return _Ye(e)}});var sie=p((uOt,nie)=>{l();"use strict";var SYe=br().bind({ignoreUndefined:!0}),xYe=iu(),AYe=be()("ipfs:mfs:touch"),eie=xt(),{UnixFS:tie}=(pi(),us),IYe=e1(),TYe=nd(),RYe=sd(),PYe=od(),fd=(wt(),Mt),{CID:rie}=(Ae(),De),CYe=ke(),iie={flush:!0,shardSplitThreshold:1e3,cidVersion:0,hashAlg:"sha2-256"};nie.exports=t=>{async function e(r,i={}){let n=SYe(iie,i);n.mtime=n.mtime||new Date,AYe(`Touching ${r} mtime: ${n.mtime}`);let{cid:s,mfsDirectory:o,name:a,exists:c}=await xYe(t,r,n),u=i.hashAlg||iie.hashAlg,f=await t.hashers.getHasher(u),d,h,y=n.cidVersion;if(c){if(s.code!==fd.code)throw eie(new Error(`${r} was not a UnixFS node`),"ERR_NOT_UNIXFS");y=s.version;let q=await t.repo.blocks.get(s),D=fd.decode(q);if(!D.Data)throw eie(new Error(`${r} had no data`),"ERR_INVALID_NODE");let z=tie.unmarshal(D.Data);z.mtime=n.mtime,d=fd.encode({Data:z.marshal(),Links:D.Links});let G=await f.digest(d);h=rie.create(n.cidVersion,fd.code,G),n.flush&&await t.repo.blocks.put(h,d)}else{let q=new tie({type:"file",mtime:n.mtime});d=fd.encode({Data:q.marshal(),Links:[]});let D=await f.digest(d);h=rie.create(n.cidVersion,fd.code,D),n.flush&&await t.repo.blocks.put(h,d)}let g=await IYe(t,o),m=g[g.length-1],E=m.cid,v=await t.repo.blocks.get(E),A=fd.decode(v),R=await TYe(t,{parent:A,name:a,cid:h,size:d.length,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold,hashAlg:n.hashAlg,cidVersion:y});m.cid=R.cid;let F=await RYe(t,g,n);await PYe(t,F,n)}return CYe(e)}});var uie=p((fOt,cie)=>{l();"use strict";var oie=xt(),vg=be()("ipfs:mfs:utils:to-async-iterator"),{MFS_MAX_CHUNK_SIZE:aie}=Ki(),{fromString:OYe}=(ut(),lt),kYe=t=>{if(!t)throw oie(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");if((typeof t=="string"||t instanceof String)&&(vg("Content was a string"),t=OYe(t.toString())),t.length)return vg("Content was array-like"),{[Symbol.asyncIterator]:function*(){yield t}};if(t[Symbol.asyncIterator])return vg("Content was an async iterator"),t;if(t[Symbol.iterator])return vg("Content was an iterator"),t;if(globalThis.Blob&&t instanceof globalThis.Blob){vg("Content was an HTML5 Blob");let e=0,r={next:()=>e>t.size?{done:!0}:new Promise((i,n)=>{let s=t.slice(e,aie);e+=aie;let o=new globalThis.FileReader,a=c=>{if(o.removeEventListener("loadend",a,!1),c.error)return n(c.error);i({done:!1,value:new Uint8Array(o.result)})};o.addEventListener("loadend",a),o.readAsArrayBuffer(s)})};return{[Symbol.asyncIterator]:()=>r}}throw oie(new Error(`Don't know how to convert ${t} into an async iterator`),"ERR_INVALID_PARAMS")};cie.exports=kYe});var pie=p((lOt,hie)=>{l();"use strict";var Ja=be()("ipfs:mfs:write"),{importer:qYe}=(d5(),l5),{decode:DYe}=(wt(),Mt),{sha256:NYe,sha512:BYe}=(ii(),fi),MYe=bg(),LYe=im(),UYe=nd(),FYe=br().bind({ignoreUndefined:!0}),fie=Qx(),jYe=uie(),cA=iu(),KYe=J5(),VYe=e1(),zYe=sd(),HYe=od(),su=xt(),{MFS_MAX_CHUNK_SIZE:$Ye}=Ki(),GYe=Gn(),WYe=ke(),{parseMode:YYe,parseMtime:XYe}=(pi(),us),QYe={offset:0,length:1/0,create:!1,truncate:!1,rawLeaves:!1,reduceSingleLeafToSelf:!1,cidVersion:0,hashAlg:"sha2-256",parents:!1,progress:(t,e)=>{},strategy:"trickle",flush:!0,leafType:"raw",shardSplitThreshold:1e3};hie.exports=t=>{async function e(r,i,n={}){let s=FYe(QYe,n),o,a,c;if(Ja("Reading source, destination and parent"),await fie().readLock(async()=>{o=await jYe(i),a=await cA(t,r,s),c=await cA(t,a.mfsDirectory,s)})(),Ja("Read source, destination and parent"),!s.parents&&!c.exists)throw su(new Error("directory does not exist"),"ERR_NO_EXIST");if(o==null)throw su(new Error("could not create source"),"ERR_NO_SOURCE");if(a==null)throw su(new Error("could not create destination"),"ERR_NO_DESTINATION");if(!s.create&&!a.exists)throw su(new Error("file does not exist"),"ERR_NO_EXIST");if(a.entryType!=="file")throw su(new Error("not a file"),"ERR_NOT_A_FILE");return ZYe(t,r,o,a,s)}return WYe(e)};var ZYe=async(t,e,r,i,n)=>{let s=await JYe(t,r,i,n);await fie().writeLock(async()=>{let o=KYe(e),a=o.pop();if(a==null)throw su(new Error("source does not exist"),"ERR_NO_EXIST");let c=!1;try{await MYe(t)(`/${o.join("/")}`,n),c=!0}catch(E){if(E.code!=="ERR_NOT_FOUND")throw E}c||await LYe(t)(`/${o.join("/")}`,n);let u=await cA(t,e,n),f=await VYe(t,u.mfsDirectory),d=f[f.length-1];if(!d)throw su(new Error("directory does not exist"),"ERR_NO_EXIST");if(!d.type||!d.type.includes("directory"))throw su(new Error(`cannot write to ${d.name}: Not a directory`),"ERR_NOT_A_DIRECTORY");let h=await t.repo.blocks.get(d.cid),y=DYe(h),g=await UYe(t,{parent:y,name:a,cid:s.cid,size:s.size,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold,hashAlg:n.hashAlg,cidVersion:n.cidVersion});d.cid=g.cid;let m=await zYe(t,f,n);await HYe(t,m,n)})()},JYe=async(t,e,r,i)=>{r.exists?Ja(`Overwriting file ${r.cid} offset ${i.offset} length ${i.length}`):Ja(`Writing file offset ${i.offset} length ${i.length}`);let n=[];if(i.offset>0)if(r.unixfs){if(Ja(`Writing first ${i.offset} bytes of original file`),n.push(()=>r.content({offset:0,length:i.offset})),r.unixfs.fileSize()<i.offset){let f=i.offset-r.unixfs.fileSize();Ja(`Writing zeros for extra ${f} bytes`),n.push(die(f))}}else Ja(`Writing zeros for first ${i.offset} bytes`),n.push(die(i.offset));n.push(lie(e,i.length));let s=tXe(eXe(n),f=>{if(r.unixfs&&!i.truncate){let d=r.unixfs.fileSize();if(d>f)return Ja(`Writing last ${d-f} of ${d} bytes from original file starting at offset ${f}`),r.content({offset:f});Ja("Not writing last bytes from original file")}return{[Symbol.asyncIterator]:async function*(){}}}),o;i.mode!==void 0&&i.mode!==null?o=YYe(i.mode):r&&r.unixfs&&(o=r.unixfs.mode);let a;i.mtime!=null?a=XYe(i.mtime):r&&r.unixfs&&(a=r.unixfs.mtime);let c;switch(i.hashAlg){case"sha2-256":c=NYe;break;case"sha2-512":c=BYe;break;default:throw new Error(`TODO vmx 2021-03-31: Proper error message for unsupported hash algorithms like ${i.hashAlg}`)}let u=await GYe(qYe([{content:s,mode:o,mtime:a}],t.repo.blocks,{progress:i.progress,hasher:c,cidVersion:i.cidVersion,strategy:i.strategy,rawLeaves:i.rawLeaves,reduceSingleLeafToSelf:i.reduceSingleLeafToSelf,leafType:i.leafType}));if(!u)throw su(new Error(`cannot write to ${parent.name}`),"ERR_COULD_NOT_WRITE");return Ja(`Wrote ${u.cid}`),{cid:u.cid,size:u.size}},lie=(t,e)=>async function*(){let i=0;for await(let n of t){if(i+=n.length,i>e){yield n.slice(0,e-i);return}yield n}},die=(t,e=$Ye)=>{let r=new Uint8Array(e);async function*i(){for(;;)yield r.slice()}return lie(i(),t)},eXe=async function*(t){for(let e=0;e<t.length;e++)yield*t[e]()},tXe=async function*(t,e){let r=0;for await(let i of t)r+=i.length,yield i;for await(let i of e(r))r+=i.length,yield i}});var bie=p((dOt,gie)=>{l();"use strict";var{exporter:rXe}=(zo(),Vo),iXe=br().bind({ignoreUndefined:!0}),nXe=iu(),yie=xt(),sXe=ke(),oXe={offset:0,length:1/0};gie.exports=t=>{function e(r,i={}){return i=iXe(oXe,i),{[Symbol.asyncIterator]:async function*(){let s=await nXe(t,r,i),o=await rXe(s.mfsPath,t.repo.blocks);if(o.type!=="file")throw yie(new Error(`${r} was not a file`),"ERR_NOT_FILE");if(!o.content)throw yie(new Error(`Could not load content stream from ${r}`),"ERR_NO_CONTENT");for await(let a of o.content({offset:i.offset,length:i.length}))yield a}}}return sXe(e)}});var wie=p((hOt,vie)=>{l();"use strict";var{exporter:aXe}=(zo(),Vo),cXe=iu(),uXe=ke(),fXe=Mo(),mie=t=>{let e={cid:t.cid,name:t.name,type:t.type==="directory"?"directory":"file",size:t.size};return(t.type==="file"||t.type==="directory")&&(e.mode=t.unixfs.mode,e.mtime=t.unixfs.mtime),e};vie.exports=t=>{async function*e(r,i={}){let n=await cXe(t,r,i),s=await aXe(n.mfsPath,t.repo.blocks);if(s.type==="directory"){yield*fXe(s.content(i),mie);return}yield mie(s)}return uXe(e)}});var Aie=p((pOt,xie)=>{l();"use strict";var lXe=Qx(),_ie=t0(),dXe={stat:bg()},hXe={chmod:Yre(),cp:om(),flush:Qre(),mkdir:im(),mv:Jre(),rm:cm(),touch:sie()},Eie={write:pie(),read:bie(),ls:wie()},Sie=({options:t,mfs:e,operations:r,lock:i})=>{Object.keys(r).forEach(n=>{e[n]=i(r[n](t))})},pXe={repoOwner:!0,repo:null};function yXe(t){let{repoOwner:e}=Object.assign({},pXe||{},t),r=lXe(e),i=o=>r.readLock(o),n=o=>r.writeLock(o),s={};return Sie({options:t,mfs:s,operations:dXe,lock:i}),Sie({options:t,mfs:s,operations:hXe,lock:n}),Object.keys(Eie).forEach(o=>{s[o]=Eie[o](t)}),s}xie.exports=({repo:t,preload:e,hashers:r,options:i})=>{let n=yXe({repo:t,repoOwner:Boolean(i.repoOwner),hashers:r}),s=o=>(...c)=>{let u=c.filter(f=>_ie.ipfsPath(f)||_ie.cid(f));if(u.length){let f=c[c.length-1];f&&f.preload!==!1&&u.forEach(d=>e(d))}return o(...c)};return{...n,chmod:n.chmod,cp:s(n.cp),mkdir:n.mkdir,stat:s(n.stat),rm:n.rm,read:s(n.read),touch:n.touch,write:n.write,mv:s(n.mv),flush:n.flush,ls:s(async function*(...o){for await(let a of n.ls(...o))yield{...a,size:a.size||0}})}}});var Tie=p((yOt,Iie)=>{l();"use strict";var gXe=ke();Iie.exports=({keychain:t})=>gXe((r,i)=>t.exportKey(r,i))});var Oie=p((gOt,Cie)=>{l();"use strict";var bXe=ke(),Rie="ed25519",Pie=2048;Cie.exports=({keychain:t})=>bXe((r,i={type:Rie,size:Pie})=>t.createKey(r,i.type||Rie,i.size||Pie))});var qie=p((bOt,kie)=>{l();"use strict";var mXe=ke();kie.exports=({keychain:t})=>mXe((r,i,n)=>t.importKey(r,i,n))});var Nie=p((mOt,Die)=>{l();"use strict";var vXe=ke();Die.exports=({keychain:t})=>vXe(r=>t.findKeyByName(r))});var Mie=p((vOt,Bie)=>{l();"use strict";var wXe=ke();Bie.exports=({keychain:t})=>wXe(()=>t.listKeys())});var Uie=p((wOt,Lie)=>{l();"use strict";var _Xe=ke();Lie.exports=({keychain:t})=>_Xe(async(r,i)=>{let n=await t.renameKey(r,i);return{was:r,now:n.name,id:n.id,overwrite:!1}})});var jie=p((_Ot,Fie)=>{l();"use strict";var EXe=ke();Fie.exports=({keychain:t})=>EXe(r=>t.removeKey(r))});var zie=p((EOt,Vie)=>{l();"use strict";var SXe=Tie(),xXe=Oie(),AXe=qie(),IXe=Nie(),TXe=Mie(),RXe=Uie(),PXe=jie(),Kie=class{constructor({keychain:e}){this.gen=xXe({keychain:e}),this.list=TXe({keychain:e}),this.rm=PXe({keychain:e}),this.rename=RXe({keychain:e}),this.export=SXe({keychain:e}),this.import=AXe({keychain:e}),this.info=IXe({keychain:e})}};Vie.exports=Kie});var Tf=p((SOt,Hie)=>{l();"use strict";var CXe=(wt(),Mt),OXe=ke();Hie.exports=({repo:t,preload:e})=>{async function r(i,n={}){n.preload!==!1&&e(i);let s=await t.blocks.get(i,n);return CXe.decode(s)}return OXe(r)}});var Gie=p((xOt,$ie)=>{l();"use strict";var kXe=ke();$ie.exports=({repo:t,preload:e})=>{let r=Tf()({repo:t,preload:e});async function i(n,s={}){return(await r(n,s)).Data||new Uint8Array(0)}return kXe(i)}});var Xie=p((AOt,Yie)=>{l();"use strict";var qXe=(wt(),Mt),DXe=(Gc(),ab),NXe=(Os(),Eo),{CID:Wie}=(Ae(),De),BXe=ke();function uA(t,e=[]){for(let r in t){let i=t[r];if(r==="/"&&Object.keys(t).length===1)try{e.push({Name:"",Tsize:0,Hash:Wie.parse(i)});continue}catch(s){}let n=Wie.asCID(i);if(n){e.push({Name:"",Tsize:0,Hash:n});continue}Array.isArray(i)&&uA(i,e),i&&typeof i=="object"&&uA(i,e)}return e}Yie.exports=({repo:t,codecs:e})=>{async function r(i,n={}){let s=await e.getCodec(i.code),o=await t.blocks.get(i,n),a=s.decode(o);if(i.code===NXe.code)return[];if(i.code===qXe.code)return a.Links;if(i.code===DXe.code)return uA(a);throw new Error(`Cannot resolve links from codec ${i.code}`)}return BXe(r)}});var Zie=p((IOt,Qie)=>{l();"use strict";var MXe=(wt(),Mt),{sha256:LXe}=(ii(),fi),{UnixFS:UXe}=(pi(),us),FXe=ke(),{CID:jXe}=(Ae(),De);Qie.exports=({repo:t,preload:e})=>{async function r(i={}){let n;if(i.template)if(i.template==="unixfs-dir")n=new UXe({type:"directory"}).marshal();else throw new Error("unknown template");let s=MXe.encode({Data:n,Links:[]}),o=await LXe.digest(s),a=jXe.createV0(o);return await t.blocks.put(a,s,{signal:i.signal}),i.preload!==!1&&e(a),a}return FXe(r)}});var r1=p((TOt,Jie)=>{l();"use strict";var KXe=(wt(),Mt),{CID:VXe}=(Ae(),De),{sha256:zXe}=(ii(),fi),HXe=ke();Jie.exports=({repo:t,preload:e})=>{async function r(i,n={}){let s=await t.gcLock.readLock();try{let o=KXe.encode(i),a=await zXe.digest(o),c=VXe.createV0(a);return await t.blocks.put(c,o,{signal:n.signal}),n.preload!==!1&&e(c),n.pin&&await t.pins.pinRecursively(c,{signal:n.signal}),c}finally{s()}}return HXe(r)}});var tne=p((ROt,ene)=>{l();"use strict";var $Xe=(wt(),Mt),GXe=ke();ene.exports=({repo:t,preload:e})=>{let r=Tf()({repo:t,preload:e});async function i(n,s={}){let o=await r(n,s),c=$Xe.encode(o).length,u=o.Links.reduce((f,d)=>f+(d.Tsize||0),0);return{Hash:n,NumLinks:o.Links.length,BlockSize:c,LinksSize:c-(o.Data||[]).length,DataSize:(o.Data||[]).length,CumulativeSize:c+u}}return GXe(i)}});var ine=p((POt,rne)=>{l();"use strict";var WXe=ke();rne.exports=({repo:t,preload:e})=>{let r=Tf()({repo:t,preload:e}),i=r1()({repo:t,preload:e});async function n(s,o,a={}){let c=await r(s,a);return i({...c,Links:c.Links.concat([o])},a)}return WXe(n)}});var sne=p((COt,nne)=>{l();"use strict";var YXe=ke(),{concat:XXe}=(fn(),un);nne.exports=({repo:t,preload:e})=>{let r=Tf()({repo:t,preload:e}),i=r1()({repo:t,preload:e});async function n(s,o,a={}){let c=await r(s,a),u=XXe([c.Data||[],o]);return i({...c,Data:u},a)}return YXe(n)}});var ane=p((OOt,one)=>{l();"use strict";var QXe=ke();one.exports=({repo:t,preload:e})=>{let r=Tf()({repo:t,preload:e}),i=r1()({repo:t,preload:e});async function n(s,o,a={}){let c=await r(s,a),u=(typeof o=="string"?o:o.Name)||"";return c.Links=c.Links.filter(f=>f.Name!==u),i(c,a)}return QXe(n)}});var une=p((kOt,cne)=>{l();"use strict";var ZXe=ke();cne.exports=({repo:t,preload:e})=>{let r=Tf()({repo:t,preload:e}),i=r1()({repo:t,preload:e});async function n(s,o,a={}){let c=await r(s,a);return i({...c,Data:o},a)}return ZXe(n)}});var dne=p((qOt,lne)=>{l();"use strict";var JXe=ine(),eQe=sne(),tQe=ane(),rQe=une(),fne=class{constructor({repo:e,preload:r}){this.addLink=JXe({repo:e,preload:r}),this.appendData=eQe({repo:e,preload:r}),this.rmLink=tQe({repo:e,preload:r}),this.setData=rQe({repo:e,preload:r})}};lne.exports=fne});var yne=p((DOt,pne)=>{l();"use strict";var iQe=Gie(),nQe=Tf(),sQe=Xie(),oQe=Zie(),aQe=r1(),cQe=tne(),uQe=dne(),hne=class{constructor({repo:e,codecs:r,preload:i}){this.data=iQe({repo:e,preload:i}),this.get=nQe({repo:e,preload:i}),this.links=sQe({repo:e,codecs:r}),this.new=oQe({repo:e,preload:i}),this.put=aQe({repo:e,preload:i}),this.stat=cQe({repo:e,preload:i}),this.patch=new uQe({repo:e,preload:i})}};pne.exports=hne});var bne=p((NOt,gne)=>{l();"use strict";var fQe=be()("ipfs:repo:gc"),lQe=ke(),dQe=Z5();gne.exports=({repo:t,hashers:e})=>{async function*r(i={}){let n=Date.now(),s;try{s=await dQe({repo:t,hashers:e},i),await t.pins.pinRecursively(s),yield*t.gc()}finally{s&&await t.pins.unpin(s)}fQe(`Complete (${Date.now()-n}ms)`)}return lQe(r)}});var fA=p((BOt,mne)=>{l();"use strict";var hQe=ke();mne.exports=({repo:t})=>{async function e(r={}){let i=await t.stat();return{numObjects:BigInt(i.numObjects.toString()),repoSize:BigInt(i.repoSize.toString()),repoPath:i.repoPath,version:`${i.version}`,storageMax:BigInt(i.storageMax.toString())}}return hQe(e)}});var wne=p((MOt,vne)=>{l();"use strict";var{repoVersion:pQe}=Fl(),yQe=ke();vne.exports=({repo:t})=>{async function e(r={}){try{await t._checkInitialized(r)}catch(i){if([/Key not found in database \[\/version\]/,/ENOENT/,/repo is not initialized yet/].some(s=>s.test(i.message)))return pQe;throw i}return t.version.get()}return yQe(e)}});var Sne=p((LOt,Ene)=>{l();"use strict";var gQe=bne(),bQe=fA(),mQe=wne(),_ne=class{constructor({repo:e,hashers:r}){this.gc=gQe({repo:e,hashers:r}),this.stat=bQe({repo:e}),this.version=mQe({repo:e}),this.setApiAddr=i=>e.apiAddr.set(i)}};Ene.exports=_ne});var Ine=p((UOt,Ane)=>{l();"use strict";var{default:vQe}=fy(),wQe=xt(),_Qe=ke();function xne(t,e){let r;if(t.metrics?e.peer?r=t.metrics.forPeer(e.peer):e.proto?r=t.metrics.forProtocol(e.proto):r=t.metrics.global:r=void 0,!r)return{totalIn:BigInt(0),totalOut:BigInt(0),rateIn:0,rateOut:0};let{movingAverages:i,snapshot:n}=r;return{totalIn:BigInt(n.dataReceived.integerValue().toString()),totalOut:BigInt(n.dataSent.integerValue().toString()),rateIn:i.dataReceived[6e4].movingAverage()/60,rateOut:i.dataSent[6e4].movingAverage()/60}}Ane.exports=({network:t})=>_Qe(async function*(r={}){let{libp2p:i}=await t.use(r);if(!r.poll){yield xne(i,r);return}let n=r.interval||1e3,s=-1;try{if(s=typeof n=="string"?vQe(n)||-1:n,!s||s<0)throw new Error("invalid duration")}catch(a){throw wQe(a,"ERR_INVALID_POLL_INTERVAL")}let o;try{for(;;)yield xne(i,r),await new Promise(a=>{o=setTimeout(a,s)})}finally{clearTimeout(o)}})});var Pne=p((FOt,Rne)=>{l();"use strict";var EQe=Ine(),SQe=fA(),xQe=qS(),Tne=class{constructor({repo:e,network:r}){this.repo=SQe({repo:e}),this.bw=EQe({network:r}),this.bitswap=xQe({network:r})}};Rne.exports=Tne});var lA=p((jOt,Cne)=>{l();"use strict";Cne.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),i=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;e[r]=n;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==n||o.enumerable!==!0)return!1}return!0}});var wg=p((KOt,One)=>{l();"use strict";var AQe=lA();One.exports=function(){return AQe()&&!!Symbol.toStringTag}});var Dne=p((VOt,qne)=>{l();"use strict";var kne=typeof Symbol!="undefined"&&Symbol,IQe=lA();qne.exports=function(){return typeof kne!="function"||typeof Symbol!="function"||typeof kne("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:IQe()}});var Bne=p((zOt,Nne)=>{l();"use strict";var TQe="Function.prototype.bind called on incompatible ",dA=Array.prototype.slice,RQe=Object.prototype.toString,PQe="[object Function]";Nne.exports=function(e){var r=this;if(typeof r!="function"||RQe.call(r)!==PQe)throw new TypeError(TQe+r);for(var i=dA.call(arguments,1),n,s=function(){if(this instanceof n){var f=r.apply(this,i.concat(dA.call(arguments)));return Object(f)===f?f:this}else return r.apply(e,i.concat(dA.call(arguments)))},o=Math.max(0,r.length-i.length),a=[],c=0;c<o;c++)a.push("$"+c);if(n=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var u=function(){};u.prototype=r.prototype,n.prototype=new u,u.prototype=null}return n}});var um=p((HOt,Mne)=>{l();"use strict";var CQe=Bne();Mne.exports=Function.prototype.bind||CQe});var Une=p(($Ot,Lne)=>{l();"use strict";var OQe=um();Lne.exports=OQe.call(Function.call,Object.prototype.hasOwnProperty)});var hm=p((GOt,Vne)=>{l();"use strict";var Ot,_g=SyntaxError,Fne=Function,i1=TypeError,hA=function(t){try{return Fne('"use strict"; return ('+t+").constructor;")()}catch(e){}},ld=Object.getOwnPropertyDescriptor;if(ld)try{ld({},"")}catch(t){ld=null}var pA=function(){throw new i1},kQe=ld?function(){try{return arguments.callee,pA}catch(t){try{return ld(arguments,"callee").get}catch(e){return pA}}}():pA,n1=Dne()(),Rf=Object.getPrototypeOf||function(t){return t.__proto__},s1={},qQe=typeof Uint8Array=="undefined"?Ot:Rf(Uint8Array),o1={"%AggregateError%":typeof AggregateError=="undefined"?Ot:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?Ot:ArrayBuffer,"%ArrayIteratorPrototype%":n1?Rf([][Symbol.iterator]()):Ot,"%AsyncFromSyncIteratorPrototype%":Ot,"%AsyncFunction%":s1,"%AsyncGenerator%":s1,"%AsyncGeneratorFunction%":s1,"%AsyncIteratorPrototype%":s1,"%Atomics%":typeof Atomics=="undefined"?Ot:Atomics,"%BigInt%":typeof BigInt=="undefined"?Ot:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?Ot:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?Ot:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?Ot:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?Ot:FinalizationRegistry,"%Function%":Fne,"%GeneratorFunction%":s1,"%Int8Array%":typeof Int8Array=="undefined"?Ot:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?Ot:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?Ot:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":n1?Rf(Rf([][Symbol.iterator]())):Ot,"%JSON%":typeof JSON=="object"?JSON:Ot,"%Map%":typeof Map=="undefined"?Ot:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!n1?Ot:Rf(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?Ot:Promise,"%Proxy%":typeof Proxy=="undefined"?Ot:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?Ot:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?Ot:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!n1?Ot:Rf(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?Ot:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":n1?Rf(""[Symbol.iterator]()):Ot,"%Symbol%":n1?Symbol:Ot,"%SyntaxError%":_g,"%ThrowTypeError%":kQe,"%TypedArray%":qQe,"%TypeError%":i1,"%Uint8Array%":typeof Uint8Array=="undefined"?Ot:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?Ot:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?Ot:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?Ot:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?Ot:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?Ot:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?Ot:WeakSet},DQe=function t(e){var r;if(e==="%AsyncFunction%")r=hA("async function () {}");else if(e==="%GeneratorFunction%")r=hA("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=hA("async function* () {}");else if(e==="%AsyncGenerator%"){var i=t("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var n=t("%AsyncGenerator%");n&&(r=Rf(n.prototype))}return o1[e]=r,r},jne={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},fm=um(),lm=Une(),NQe=fm.call(Function.call,Array.prototype.concat),BQe=fm.call(Function.apply,Array.prototype.splice),Kne=fm.call(Function.call,String.prototype.replace),dm=fm.call(Function.call,String.prototype.slice),MQe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,LQe=/\\(\\)?/g,UQe=function(e){var r=dm(e,0,1),i=dm(e,-1);if(r==="%"&&i!=="%")throw new _g("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&r!=="%")throw new _g("invalid intrinsic syntax, expected opening `%`");var n=[];return Kne(e,MQe,function(s,o,a,c){n[n.length]=a?Kne(c,LQe,"$1"):o||s}),n},FQe=function(e,r){var i=e,n;if(lm(jne,i)&&(n=jne[i],i="%"+n[0]+"%"),lm(o1,i)){var s=o1[i];if(s===s1&&(s=DQe(i)),typeof s=="undefined"&&!r)throw new i1("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:s}}throw new _g("intrinsic "+e+" does not exist!")};Vne.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new i1("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new i1('"allowMissing" argument must be a boolean');var i=UQe(e),n=i.length>0?i[0]:"",s=FQe("%"+n+"%",r),o=s.name,a=s.value,c=!1,u=s.alias;u&&(n=u[0],BQe(i,NQe([0,1],u)));for(var f=1,d=!0;f<i.length;f+=1){var h=i[f],y=dm(h,0,1),g=dm(h,-1);if((y==='"'||y==="'"||y==="`"||g==='"'||g==="'"||g==="`")&&y!==g)throw new _g("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(c=!0),n+="."+h,o="%"+n+"%",lm(o1,o))a=o1[o];else if(a!=null){if(!(h in a)){if(!r)throw new i1("base intrinsic for "+e+" exists, but the property is not available.");return}if(ld&&f+1>=i.length){var m=ld(a,h);d=!!m,d&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[h]}else d=lm(a,h),a=a[h];d&&!c&&(o1[o]=a)}}return a}});var Yne=p((WOt,pm)=>{l();"use strict";var yA=um(),a1=hm(),zne=a1("%Function.prototype.apply%"),Hne=a1("%Function.prototype.call%"),$ne=a1("%Reflect.apply%",!0)||yA.call(Hne,zne),Gne=a1("%Object.getOwnPropertyDescriptor%",!0),dd=a1("%Object.defineProperty%",!0),jQe=a1("%Math.max%");if(dd)try{dd({},"a",{value:1})}catch(t){dd=null}pm.exports=function(e){var r=$ne(yA,Hne,arguments);if(Gne&&dd){var i=Gne(r,"length");i.configurable&&dd(r,"length",{value:1+jQe(0,e.length-(arguments.length-1))})}return r};var Wne=function(){return $ne(yA,zne,arguments)};dd?dd(pm.exports,"apply",{value:Wne}):pm.exports.apply=Wne});var ym=p((YOt,Zne)=>{l();"use strict";var Xne=hm(),Qne=Yne(),KQe=Qne(Xne("String.prototype.indexOf"));Zne.exports=function(e,r){var i=Xne(e,!!r);return typeof i=="function"&&KQe(e,".prototype.")>-1?Qne(i):i}});var tse=p((XOt,ese)=>{l();"use strict";var VQe=wg()(),zQe=ym(),gA=zQe("Object.prototype.toString"),gm=function(e){return VQe&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:gA(e)==="[object Arguments]"},Jne=function(e){return gm(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&gA(e)!=="[object Array]"&&gA(e.callee)==="[object Function]"},HQe=function(){return gm(arguments)}();gm.isLegacyArguments=Jne;ese.exports=HQe?gm:Jne});var nse=p((QOt,ise)=>{l();"use strict";var $Qe=Object.prototype.toString,GQe=Function.prototype.toString,WQe=/^\s*(?:function)?\*/,rse=wg()(),bA=Object.getPrototypeOf,YQe=function(){if(!rse)return!1;try{return Function("return function*() {}")()}catch(t){}},mA;ise.exports=function(e){if(typeof e!="function")return!1;if(WQe.test(GQe.call(e)))return!0;if(!rse){var r=$Qe.call(e);return r==="[object GeneratorFunction]"}if(!bA)return!1;if(typeof mA=="undefined"){var i=YQe();mA=i?bA(i):!1}return bA(e)===mA}});var vA=p((ZOt,sse)=>{l();var XQe=Object.prototype.hasOwnProperty,QQe=Object.prototype.toString;sse.exports=function(e,r,i){if(QQe.call(r)!=="[object Function]")throw new TypeError("iterator must be a function");var n=e.length;if(n===+n)for(var s=0;s<n;s++)r.call(i,e[s],s,e);else for(var o in e)XQe.call(e,o)&&r.call(i,e[o],o,e)}});var _A=p((JOt,ose)=>{l();"use strict";var wA=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],ZQe=(typeof globalThis=="undefined",globalThis);ose.exports=function(){for(var e=[],r=0;r<wA.length;r++)typeof ZQe[wA[r]]=="function"&&(e[e.length]=wA[r]);return e}});var EA=p((ekt,ase)=>{l();"use strict";var JQe=hm(),bm=JQe("%Object.getOwnPropertyDescriptor%");if(bm)try{bm([],"length")}catch(t){bm=null}ase.exports=bm});var AA=p((tkt,dse)=>{l();"use strict";var cse=vA(),eZe=_A(),SA=ym(),tZe=SA("Object.prototype.toString"),use=wg()(),rZe=(typeof globalThis=="undefined",globalThis),fse=eZe(),iZe=SA("Array.prototype.indexOf",!0)||function(e,r){for(var i=0;i<e.length;i+=1)if(e[i]===r)return i;return-1},nZe=SA("String.prototype.slice"),lse={},mm=EA(),xA=Object.getPrototypeOf;use&&mm&&xA&&cse(fse,function(t){var e=new rZe[t];if(Symbol.toStringTag in e){var r=xA(e),i=mm(r,Symbol.toStringTag);if(!i){var n=xA(r);i=mm(n,Symbol.toStringTag)}lse[t]=i.get}});var sZe=function(e){var r=!1;return cse(lse,function(i,n){if(!r)try{r=i.call(e)===n}catch(s){}}),r};dse.exports=function(e){if(!e||typeof e!="object")return!1;if(!use||!(Symbol.toStringTag in e)){var r=nZe(tZe(e),8,-1);return iZe(fse,r)>-1}return mm?sZe(e):!1}});var vse=p((rkt,mse)=>{l();"use strict";var hse=vA(),oZe=_A(),pse=ym(),aZe=pse("Object.prototype.toString"),yse=wg()(),gse=(typeof globalThis=="undefined",globalThis),cZe=oZe(),uZe=pse("String.prototype.slice"),bse={},IA=EA(),TA=Object.getPrototypeOf;yse&&IA&&TA&&hse(cZe,function(t){if(typeof gse[t]=="function"){var e=new gse[t];if(Symbol.toStringTag in e){var r=TA(e),i=IA(r,Symbol.toStringTag);if(!i){var n=TA(r);i=IA(n,Symbol.toStringTag)}bse[t]=i.get}}});var fZe=function(e){var r=!1;return hse(bse,function(i,n){if(!r)try{var s=i.call(e);s===n&&(r=s)}catch(o){}}),r},lZe=AA();mse.exports=function(e){return lZe(e)?!yse||!(Symbol.toStringTag in e)?uZe(aZe(e),8,-1):fZe(e):!1}});var qse=p(_t=>{l();"use strict";var dZe=tse(),hZe=nse(),Go=vse(),wse=AA();function c1(t){return t.call.bind(t)}var _se=typeof BigInt!="undefined",Ese=typeof Symbol!="undefined",Qs=c1(Object.prototype.toString),pZe=c1(Number.prototype.valueOf),yZe=c1(String.prototype.valueOf),gZe=c1(Boolean.prototype.valueOf);_se&&(Sse=c1(BigInt.prototype.valueOf));var Sse;Ese&&(xse=c1(Symbol.prototype.valueOf));var xse;function Eg(t,e){if(typeof t!="object")return!1;try{return e(t),!0}catch(r){return!1}}_t.isArgumentsObject=dZe;_t.isGeneratorFunction=hZe;_t.isTypedArray=wse;function bZe(t){return typeof Promise!="undefined"&&t instanceof Promise||t!==null&&typeof t=="object"&&typeof t.then=="function"&&typeof t.catch=="function"}_t.isPromise=bZe;function mZe(t){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ArrayBuffer.isView(t):wse(t)||Ise(t)}_t.isArrayBufferView=mZe;function vZe(t){return Go(t)==="Uint8Array"}_t.isUint8Array=vZe;function wZe(t){return Go(t)==="Uint8ClampedArray"}_t.isUint8ClampedArray=wZe;function _Ze(t){return Go(t)==="Uint16Array"}_t.isUint16Array=_Ze;function EZe(t){return Go(t)==="Uint32Array"}_t.isUint32Array=EZe;function SZe(t){return Go(t)==="Int8Array"}_t.isInt8Array=SZe;function xZe(t){return Go(t)==="Int16Array"}_t.isInt16Array=xZe;function AZe(t){return Go(t)==="Int32Array"}_t.isInt32Array=AZe;function IZe(t){return Go(t)==="Float32Array"}_t.isFloat32Array=IZe;function TZe(t){return Go(t)==="Float64Array"}_t.isFloat64Array=TZe;function RZe(t){return Go(t)==="BigInt64Array"}_t.isBigInt64Array=RZe;function PZe(t){return Go(t)==="BigUint64Array"}_t.isBigUint64Array=PZe;function vm(t){return Qs(t)==="[object Map]"}vm.working=typeof Map!="undefined"&&vm(new Map);function CZe(t){return typeof Map=="undefined"?!1:vm.working?vm(t):t instanceof Map}_t.isMap=CZe;function wm(t){return Qs(t)==="[object Set]"}wm.working=typeof Set!="undefined"&&wm(new Set);function OZe(t){return typeof Set=="undefined"?!1:wm.working?wm(t):t instanceof Set}_t.isSet=OZe;function _m(t){return Qs(t)==="[object WeakMap]"}_m.working=typeof WeakMap!="undefined"&&_m(new WeakMap);function kZe(t){return typeof WeakMap=="undefined"?!1:_m.working?_m(t):t instanceof WeakMap}_t.isWeakMap=kZe;function RA(t){return Qs(t)==="[object WeakSet]"}RA.working=typeof WeakSet!="undefined"&&RA(new WeakSet);function qZe(t){return RA(t)}_t.isWeakSet=qZe;function Em(t){return Qs(t)==="[object ArrayBuffer]"}Em.working=typeof ArrayBuffer!="undefined"&&Em(new ArrayBuffer);function Ase(t){return typeof ArrayBuffer=="undefined"?!1:Em.working?Em(t):t instanceof ArrayBuffer}_t.isArrayBuffer=Ase;function Sm(t){return Qs(t)==="[object DataView]"}Sm.working=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"&&Sm(new DataView(new ArrayBuffer(1),0,1));function Ise(t){return typeof DataView=="undefined"?!1:Sm.working?Sm(t):t instanceof DataView}_t.isDataView=Ise;var PA=typeof SharedArrayBuffer!="undefined"?SharedArrayBuffer:void 0;function Sg(t){return Qs(t)==="[object SharedArrayBuffer]"}function Tse(t){return typeof PA=="undefined"?!1:(typeof Sg.working=="undefined"&&(Sg.working=Sg(new PA)),Sg.working?Sg(t):t instanceof PA)}_t.isSharedArrayBuffer=Tse;function DZe(t){return Qs(t)==="[object AsyncFunction]"}_t.isAsyncFunction=DZe;function NZe(t){return Qs(t)==="[object Map Iterator]"}_t.isMapIterator=NZe;function BZe(t){return Qs(t)==="[object Set Iterator]"}_t.isSetIterator=BZe;function MZe(t){return Qs(t)==="[object Generator]"}_t.isGeneratorObject=MZe;function LZe(t){return Qs(t)==="[object WebAssembly.Module]"}_t.isWebAssemblyCompiledModule=LZe;function Rse(t){return Eg(t,pZe)}_t.isNumberObject=Rse;function Pse(t){return Eg(t,yZe)}_t.isStringObject=Pse;function Cse(t){return Eg(t,gZe)}_t.isBooleanObject=Cse;function Ose(t){return _se&&Eg(t,Sse)}_t.isBigIntObject=Ose;function kse(t){return Ese&&Eg(t,xse)}_t.isSymbolObject=kse;function UZe(t){return Rse(t)||Pse(t)||Cse(t)||Ose(t)||kse(t)}_t.isBoxedPrimitive=UZe;function FZe(t){return typeof Uint8Array!="undefined"&&(Ase(t)||Tse(t))}_t.isAnyArrayBuffer=FZe;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(t){Object.defineProperty(_t,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})})});var Nse=p((nkt,Dse)=>{l();Dse.exports=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}});var jse=p(Et=>{l();var Bse=Object.getOwnPropertyDescriptors||function(e){for(var r=Object.keys(e),i={},n=0;n<r.length;n++)i[r[n]]=Object.getOwnPropertyDescriptor(e,r[n]);return i},jZe=/%[sdj%]/g;Et.format=function(t){if(!Rm(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(Pf(arguments[r]));return e.join(" ")}for(var r=1,i=arguments,n=i.length,s=String(t).replace(jZe,function(a){if(a==="%%")return"%";if(r>=n)return a;switch(a){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(c){return"[Circular]"}default:return a}}),o=i[r];r<n;o=i[++r])Tm(o)||!u1(o)?s+=" "+o:s+=" "+Pf(o);return s};Et.deprecate=function(t,e){if(typeof process!="undefined"&&process.noDeprecation===!0)return t;if(typeof process=="undefined")return function(){return Et.deprecate(t,e).apply(this,arguments)};var r=!1;function i(){if(!r){if(process.throwDeprecation)throw new Error(e);process.traceDeprecation?console.trace(e):console.error(e),r=!0}return t.apply(this,arguments)}return i};var xm={},Mse=/^$/;process.env.NODE_DEBUG&&(Am=process.env.NODE_DEBUG,Am=Am.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),Mse=new RegExp("^"+Am+"$","i"));var Am;Et.debuglog=function(t){if(t=t.toUpperCase(),!xm[t])if(Mse.test(t)){var e=process.pid;xm[t]=function(){var r=Et.format.apply(Et,arguments);console.error("%s %d: %s",t,e,r)}}else xm[t]=function(){};return xm[t]};function Pf(t,e){var r={seen:[],stylize:VZe};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),kA(e)?r.showHidden=e:e&&Et._extend(r,e),hd(r.showHidden)&&(r.showHidden=!1),hd(r.depth)&&(r.depth=2),hd(r.colors)&&(r.colors=!1),hd(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=KZe),Im(r,t,r.depth)}Et.inspect=Pf;Pf.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Pf.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function KZe(t,e){var r=Pf.styles[e];return r?"["+Pf.colors[r][0]+"m"+t+"["+Pf.colors[r][1]+"m":t}function VZe(t,e){return t}function zZe(t){var e={};return t.forEach(function(r,i){e[r]=!0}),e}function Im(t,e,r){if(t.customInspect&&e&&Cm(e.inspect)&&e.inspect!==Et.inspect&&!(e.constructor&&e.constructor.prototype===e)){var i=e.inspect(r,t);return Rm(i)||(i=Im(t,i,r)),i}var n=HZe(t,e);if(n)return n;var s=Object.keys(e),o=zZe(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),Ag(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return CA(e);if(s.length===0){if(Cm(e)){var a=e.name?": "+e.name:"";return t.stylize("[Function"+a+"]","special")}if(xg(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(Pm(e))return t.stylize(Date.prototype.toString.call(e),"date");if(Ag(e))return CA(e)}var c="",u=!1,f=["{","}"];if(Lse(e)&&(u=!0,f=["[","]"]),Cm(e)){var d=e.name?": "+e.name:"";c=" [Function"+d+"]"}if(xg(e)&&(c=" "+RegExp.prototype.toString.call(e)),Pm(e)&&(c=" "+Date.prototype.toUTCString.call(e)),Ag(e)&&(c=" "+CA(e)),s.length===0&&(!u||e.length==0))return f[0]+c+f[1];if(r<0)return xg(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var h;return u?h=$Ze(t,e,r,o,s):h=s.map(function(y){return OA(t,e,r,o,y,u)}),t.seen.pop(),GZe(h,c,f)}function HZe(t,e){if(hd(e))return t.stylize("undefined","undefined");if(Rm(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(Use(e))return t.stylize(""+e,"number");if(kA(e))return t.stylize(""+e,"boolean");if(Tm(e))return t.stylize("null","null")}function CA(t){return"["+Error.prototype.toString.call(t)+"]"}function $Ze(t,e,r,i,n){for(var s=[],o=0,a=e.length;o<a;++o)Fse(e,String(o))?s.push(OA(t,e,r,i,String(o),!0)):s.push("");return n.forEach(function(c){c.match(/^\d+$/)||s.push(OA(t,e,r,i,c,!0))}),s}function OA(t,e,r,i,n,s){var o,a,c;if(c=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]},c.get?c.set?a=t.stylize("[Getter/Setter]","special"):a=t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),Fse(i,n)||(o="["+n+"]"),a||(t.seen.indexOf(c.value)<0?(Tm(r)?a=Im(t,c.value,null):a=Im(t,c.value,r-1),a.indexOf(`
`)>-1&&(s?a=a.split(`
`).map(function(u){return"  "+u}).join(`
`).substr(2):a=`
`+a.split(`
`).map(function(u){return"   "+u}).join(`
`))):a=t.stylize("[Circular]","special")),hd(o)){if(s&&n.match(/^\d+$/))return a;o=JSON.stringify(""+n),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function GZe(t,e,r){var i=0,n=t.reduce(function(s,o){return i++,o.indexOf(`
`)>=0&&i++,s+o.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(e===""?"":e+`
 `)+" "+t.join(`,
  `)+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}Et.types=qse();function Lse(t){return Array.isArray(t)}Et.isArray=Lse;function kA(t){return typeof t=="boolean"}Et.isBoolean=kA;function Tm(t){return t===null}Et.isNull=Tm;function WZe(t){return t==null}Et.isNullOrUndefined=WZe;function Use(t){return typeof t=="number"}Et.isNumber=Use;function Rm(t){return typeof t=="string"}Et.isString=Rm;function YZe(t){return typeof t=="symbol"}Et.isSymbol=YZe;function hd(t){return t===void 0}Et.isUndefined=hd;function xg(t){return u1(t)&&qA(t)==="[object RegExp]"}Et.isRegExp=xg;Et.types.isRegExp=xg;function u1(t){return typeof t=="object"&&t!==null}Et.isObject=u1;function Pm(t){return u1(t)&&qA(t)==="[object Date]"}Et.isDate=Pm;Et.types.isDate=Pm;function Ag(t){return u1(t)&&(qA(t)==="[object Error]"||t instanceof Error)}Et.isError=Ag;Et.types.isNativeError=Ag;function Cm(t){return typeof t=="function"}Et.isFunction=Cm;function XZe(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t=="undefined"}Et.isPrimitive=XZe;Et.isBuffer=Nse();function qA(t){return Object.prototype.toString.call(t)}function DA(t){return t<10?"0"+t.toString(10):t.toString(10)}var QZe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ZZe(){var t=new Date,e=[DA(t.getHours()),DA(t.getMinutes()),DA(t.getSeconds())].join(":");return[t.getDate(),QZe[t.getMonth()],e].join(" ")}Et.log=function(){console.log("%s - %s",ZZe(),Et.format.apply(Et,arguments))};Et.inherits=Xi();Et._extend=function(t,e){if(!e||!u1(e))return t;for(var r=Object.keys(e),i=r.length;i--;)t[r[i]]=e[r[i]];return t};function Fse(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var pd=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;Et.promisify=function(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');if(pd&&e[pd]){var r=e[pd];if(typeof r!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,pd,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var i,n,s=new Promise(function(c,u){i=c,n=u}),o=[],a=0;a<arguments.length;a++)o.push(arguments[a]);o.push(function(c,u){c?n(c):i(u)});try{e.apply(this,o)}catch(c){n(c)}return s}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),pd&&Object.defineProperty(r,pd,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,Bse(e))};Et.promisify.custom=pd;function JZe(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}function eJe(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);var n=r.pop();if(typeof n!="function")throw new TypeError("The last argument must be of type Function");var s=this,o=function(){return n.apply(s,arguments)};t.apply(this,r).then(function(a){process.nextTick(o.bind(null,null,a))},function(a){process.nextTick(JZe.bind(null,a,o))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,Bse(t)),e}Et.callbackify=eJe});var NA=p((okt,Kse)=>{l();"use strict";Kse.exports=function(...e){let r=e.reduce((i,n)=>Object.assign(i,n),{});return Object.assign(r,{bufferKeys:r.bufferKeys||!1,snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,openCallback:r.openCallback||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:r.encodings||!1,additionalMethods:Object.assign({},r.additionalMethods)})}});var BA=p((akt,Vse)=>{l();Vse.exports=function(e){return e!=null&&e.constructor!=null&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}});var Om=p((ckt,Hse)=>{l();var zse;Hse.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window!="undefined"?window:globalThis):t=>(zse||(zse=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0))});var km=p((ukt,Gse)=>{l();"use strict";var $se=Om();Gse.exports=function(t,...e){e.length===0?$se(t):$se(()=>t(...e))}});var MA=p((fkt,Wse)=>{l();"use strict";function Cf(t){if(typeof t!="object"||t===null)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=t,this._ended=!1,this._nexting=!1}Cf.prototype.next=function(t){if(typeof t!="function")throw new Error("next() requires a callback argument");return this._ended?(this._nextTick(t,new Error("cannot call next() after end()")),this):this._nexting?(this._nextTick(t,new Error("cannot call next() before previous next() has completed")),this):(this._nexting=!0,this._next((e,...r)=>{this._nexting=!1,t(e,...r)}),this)};Cf.prototype._next=function(t){this._nextTick(t)};Cf.prototype.seek=function(t){if(this._ended)throw new Error("cannot call seek() after end()");if(this._nexting)throw new Error("cannot call seek() before next() has completed");t=this.db._serializeKey(t),this._seek(t)};Cf.prototype._seek=function(t){};Cf.prototype.end=function(t){if(typeof t!="function")throw new Error("end() requires a callback argument");if(this._ended)return this._nextTick(t,new Error("end() already called on iterator"));this._ended=!0,this._end(t)};Cf.prototype._end=function(t){this._nextTick(t)};Cf.prototype._nextTick=km();Wse.exports=Cf});var LA=p((lkt,Xse)=>{l();"use strict";var Yse=Object.freeze({});function Wo(t){if(typeof t!="object"||t===null)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=t,this._operations=[],this._written=!1}Wo.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")};Wo.prototype.put=function(t,e,r){this._checkWritten();let i=this.db._checkKey(t)||this.db._checkValue(e);if(i)throw i;return t=this.db._serializeKey(t),e=this.db._serializeValue(e),this._put(t,e,r??Yse),this};Wo.prototype._put=function(t,e,r){this._operations.push({...r,type:"put",key:t,value:e})};Wo.prototype.del=function(t,e){this._checkWritten();let r=this.db._checkKey(t);if(r)throw r;return t=this.db._serializeKey(t),this._del(t,e??Yse),this};Wo.prototype._del=function(t,e){this._operations.push({...e,type:"del",key:t})};Wo.prototype.clear=function(){return this._checkWritten(),this._clear(),this};Wo.prototype._clear=function(){this._operations=[]};Wo.prototype.write=function(t,e){if(this._checkWritten(),typeof t=="function"&&(e=t),typeof e!="function")throw new Error("write() requires a callback argument");(typeof t!="object"||t===null)&&(t={}),this._written=!0,this._write(t,e)};Wo.prototype._write=function(t,e){this.db._batch(this._operations,t,e)};Wo.prototype._nextTick=km();Xse.exports=Wo});var Jse=p((dkt,Zse)=>{l();"use strict";var tJe=NA(),rJe=BA(),iJe=MA(),nJe=LA(),sJe=Object.prototype.hasOwnProperty,oJe=["lt","lte","gt","gte"];function _r(t){this.status="new",this.supports=tJe(t,{status:!0})}_r.prototype.open=function(t,e){let r=this.status;if(typeof t=="function"&&(e=t),typeof e!="function")throw new Error("open() requires a callback argument");(typeof t!="object"||t===null)&&(t={}),t.createIfMissing=t.createIfMissing!==!1,t.errorIfExists=!!t.errorIfExists,this.status="opening",this._open(t,i=>{if(i)return this.status=r,e(i);this.status="open",e()})};_r.prototype._open=function(t,e){this._nextTick(e)};_r.prototype.close=function(t){let e=this.status;if(typeof t!="function")throw new Error("close() requires a callback argument");this.status="closing",this._close(r=>{if(r)return this.status=e,t(r);this.status="closed",t()})};_r.prototype._close=function(t){this._nextTick(t)};_r.prototype.get=function(t,e,r){if(typeof e=="function"&&(r=e),typeof r!="function")throw new Error("get() requires a callback argument");let i=this._checkKey(t);if(i)return this._nextTick(r,i);t=this._serializeKey(t),(typeof e!="object"||e===null)&&(e={}),e.asBuffer=e.asBuffer!==!1,this._get(t,e,r)};_r.prototype._get=function(t,e,r){this._nextTick(function(){r(new Error("NotFound"))})};_r.prototype.put=function(t,e,r,i){if(typeof r=="function"&&(i=r),typeof i!="function")throw new Error("put() requires a callback argument");let n=this._checkKey(t)||this._checkValue(e);if(n)return this._nextTick(i,n);t=this._serializeKey(t),e=this._serializeValue(e),(typeof r!="object"||r===null)&&(r={}),this._put(t,e,r,i)};_r.prototype._put=function(t,e,r,i){this._nextTick(i)};_r.prototype.del=function(t,e,r){if(typeof e=="function"&&(r=e),typeof r!="function")throw new Error("del() requires a callback argument");let i=this._checkKey(t);if(i)return this._nextTick(r,i);t=this._serializeKey(t),(typeof e!="object"||e===null)&&(e={}),this._del(t,e,r)};_r.prototype._del=function(t,e,r){this._nextTick(r)};_r.prototype.batch=function(t,e,r){if(!arguments.length)return this._chainedBatch();if(typeof e=="function"&&(r=e),typeof t=="function"&&(r=t),typeof r!="function")throw new Error("batch(array) requires a callback argument");if(!Array.isArray(t))return this._nextTick(r,new Error("batch(array) requires an array argument"));if(t.length===0)return this._nextTick(r);(typeof e!="object"||e===null)&&(e={});let i=new Array(t.length);for(let n=0;n<t.length;n++){if(typeof t[n]!="object"||t[n]===null)return this._nextTick(r,new Error("batch(array) element must be an object and not `null`"));let s=Object.assign({},t[n]);if(s.type!=="put"&&s.type!=="del")return this._nextTick(r,new Error("`type` must be 'put' or 'del'"));let o=this._checkKey(s.key);if(o)return this._nextTick(r,o);if(s.key=this._serializeKey(s.key),s.type==="put"){let a=this._checkValue(s.value);if(a)return this._nextTick(r,a);s.value=this._serializeValue(s.value)}i[n]=s}this._batch(i,e,r)};_r.prototype._batch=function(t,e,r){this._nextTick(r)};_r.prototype.clear=function(t,e){if(typeof t=="function")e=t;else if(typeof e!="function")throw new Error("clear() requires a callback argument");t=Qse(this,t),t.reverse=!!t.reverse,t.limit="limit"in t?t.limit:-1,this._clear(t,e)};_r.prototype._clear=function(t,e){t.keys=!0,t.values=!1,t.keyAsBuffer=!0,t.valueAsBuffer=!0;let r=this._iterator(t),i={},n=s=>{if(s)return r.end(function(){e(s)});r.next((o,a)=>{if(o)return n(o);if(a===void 0)return r.end(e);this._del(a,i,n)})};n()};_r.prototype._setupIteratorOptions=function(t){return t=Qse(this,t),t.reverse=!!t.reverse,t.keys=t.keys!==!1,t.values=t.values!==!1,t.limit="limit"in t?t.limit:-1,t.keyAsBuffer=t.keyAsBuffer!==!1,t.valueAsBuffer=t.valueAsBuffer!==!1,t};function Qse(t,e){let r={};for(let i in e){if(!sJe.call(e,i))continue;if(i==="start"||i==="end")throw new Error('Legacy range options ("start" and "end") have been removed');let n=e[i];aJe(i)&&(n=t._serializeKey(n)),r[i]=n}return r}function aJe(t){return oJe.indexOf(t)!==-1}_r.prototype.iterator=function(t){return(typeof t!="object"||t===null)&&(t={}),t=this._setupIteratorOptions(t),this._iterator(t)};_r.prototype._iterator=function(t){return new iJe(this)};_r.prototype._chainedBatch=function(){return new nJe(this)};_r.prototype._serializeKey=function(t){return t};_r.prototype._serializeValue=function(t){return t};_r.prototype._checkKey=function(t){if(t==null)return new Error("key cannot be `null` or `undefined`");if(rJe(t)&&t.length===0)return new Error("key cannot be an empty Buffer");if(t==="")return new Error("key cannot be an empty String");if(Array.isArray(t)&&t.length===0)return new Error("key cannot be an empty Array")};_r.prototype._checkValue=function(t){if(t==null)return new Error("value cannot be `null` or `undefined`")};_r.prototype._nextTick=km();Zse.exports=_r});var Of=p(qm=>{l();"use strict";qm.AbstractLevelDOWN=Jse();qm.AbstractIterator=MA();qm.AbstractChainedBatch=LA()});var roe=p((pkt,toe)=>{l();"use strict";var eoe=Of().AbstractIterator,cJe=Xi();function f1(t,e){eoe.call(this,t),this._options=e,this._iterator=null,this._operations=[]}cJe(f1,eoe);f1.prototype.setDb=function(t){let e=this._iterator=t.iterator(this._options);for(let r of this._operations)e[r.method](...r.args)};f1.prototype._operation=function(t,e){if(this._iterator)return this._iterator[t](...e);this._operations.push({method:t,args:e})};for(let t of["next","end"])f1.prototype["_"+t]=function(...e){this._operation(t,e)};f1.prototype.seek=function(...t){this._operation("seek",t)};toe.exports=f1});var aoe=p((ykt,UA)=>{l();"use strict";var ioe=Of().AbstractLevelDOWN,uJe=Xi(),noe=roe(),soe="put get del batch clear".split(" "),fJe="approximateSize compactRange".split(" ");function yd(t){ioe.call(this,t.supports||{});for(let e of fJe)typeof t[e]=="function"&&!this.supports.additionalMethods[e]&&(this.supports.additionalMethods[e]=!0);this._db=t,this._operations=[],ooe(this)}uJe(yd,ioe);yd.prototype.type="deferred-leveldown";yd.prototype._open=function(t,e){this._db.open(t,r=>{if(r)return e(r);for(let i of this._operations)i.iterator?i.iterator.setDb(this._db):this._db[i.method](...i.args);this._operations=[],lJe(this),e()})};yd.prototype._close=function(t){this._db.close(e=>{if(e)return t(e);ooe(this),t()})};function lJe(t){for(let e of soe.concat("iterator"))t["_"+e]=function(...r){return this._db[e](...r)};for(let e of Object.keys(t.supports.additionalMethods))t[e]=function(...r){return this._db[e](...r)}}function ooe(t){for(let e of soe)t["_"+e]=function(...r){this._operations.push({method:e,args:r})};for(let e of Object.keys(t.supports.additionalMethods))t[e]=function(...r){this._operations.push({method:e,args:r})};t._iterator=function(e){let r=new noe(t,e);return this._operations.push({iterator:r}),r}}yd.prototype._serializeKey=function(t){return t};yd.prototype._serializeValue=function(t){return t};UA.exports=yd;UA.exports.DeferredIterator=noe});var FA=p((gkt,coe)=>{l();coe.exports=gr().EventEmitter});var jA=p(()=>{l()});var doe=p((vkt,loe)=>{l();"use strict";function uoe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function dJe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uoe(Object(r),!0).forEach(function(i){hJe(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uoe(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function hJe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pJe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function foe(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function yJe(t,e,r){return e&&foe(t.prototype,e),r&&foe(t,r),t}var gJe=Vt(),Dm=gJe.Buffer,bJe=jA(),KA=bJe.inspect,mJe=KA&&KA.custom||"inspect";function vJe(t,e,r){Dm.prototype.copy.call(t,e,r)}loe.exports=function(){function t(){pJe(this,t),this.head=null,this.tail=null,this.length=0}return yJe(t,[{key:"push",value:function(r){var i={data:r,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(r){var i={data:r,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var i=this.head,n=""+i.data;i=i.next;)n+=r+i.data;return n}},{key:"concat",value:function(r){if(this.length===0)return Dm.alloc(0);for(var i=Dm.allocUnsafe(r>>>0),n=this.head,s=0;n;)vJe(n.data,i,s),s+=n.data.length,n=n.next;return i}},{key:"consume",value:function(r,i){var n;return r<this.head.data.length?(n=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?n=this.shift():n=i?this._getString(r):this._getBuffer(r),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var i=this.head,n=1,s=i.data;for(r-=s.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++n,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++n}return this.length-=n,s}},{key:"_getBuffer",value:function(r){var i=Dm.allocUnsafe(r),n=this.head,s=1;for(n.data.copy(i),r-=n.data.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(o.copy(i,i.length-r,0,a),r-=a,r===0){a===o.length?(++s,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++s}return this.length-=s,i}},{key:mJe,value:function(r,i){return KA(this,dJe({},i,{depth:0,customInspect:!1}))}}]),t}()});var zA=p((wkt,poe)=>{l();"use strict";function wJe(t,e){var r=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(VA,this,t)):process.nextTick(VA,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(Nm,r):(r._writableState.errorEmitted=!0,process.nextTick(hoe,r,s)):process.nextTick(hoe,r,s):e?(process.nextTick(Nm,r),e(s)):process.nextTick(Nm,r)}),this)}function hoe(t,e){VA(t,e),Nm(t)}function Nm(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function _Je(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function VA(t,e){t.emit("error",e)}function EJe(t,e){var r=t._readableState,i=t._writableState;r&&r.autoDestroy||i&&i.autoDestroy?t.destroy(e):t.emit("error",e)}poe.exports={destroy:wJe,undestroy:_Je,errorOrDestroy:EJe}});var gd=p((_kt,boe)=>{l();"use strict";function SJe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var yoe={};function Zs(t,e,r){r||(r=Error);function i(s,o,a){return typeof e=="string"?e:e(s,o,a)}var n=function(s){SJe(o,s);function o(a,c,u){return s.call(this,i(a,c,u))||this}return o}(r);n.prototype.name=r.name,n.prototype.code=t,yoe[t]=n}function goe(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(i){return String(i)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function xJe(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function AJe(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function IJe(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Zs("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Zs("ERR_INVALID_ARG_TYPE",function(t,e,r){var i;typeof e=="string"&&xJe(e,"not ")?(i="must not be",e=e.replace(/^not /,"")):i="must be";var n;if(AJe(t," argument"))n="The ".concat(t," ").concat(i," ").concat(goe(e,"type"));else{var s=IJe(t,".")?"property":"argument";n='The "'.concat(t,'" ').concat(s," ").concat(i," ").concat(goe(e,"type"))}return n+=". Received type ".concat(typeof r),n},TypeError);Zs("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Zs("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Zs("ERR_STREAM_PREMATURE_CLOSE","Premature close");Zs("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Zs("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Zs("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Zs("ERR_STREAM_WRITE_AFTER_END","write after end");Zs("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Zs("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Zs("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");boe.exports.codes=yoe});var HA=p((Ekt,moe)=>{l();"use strict";var TJe=gd().codes.ERR_INVALID_OPT_VALUE;function RJe(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function PJe(t,e,r,i){var n=RJe(e,i,r);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var s=i?r:"highWaterMark";throw new TJe(s,n)}return Math.floor(n)}return t.objectMode?16:16*1024}moe.exports={getHighWaterMark:PJe}});var woe=p((Skt,voe)=>{l();voe.exports=CJe;function CJe(t,e){if($A("noDeprecation"))return t;var r=!1;function i(){if(!r){if($A("throwDeprecation"))throw new Error(e);$A("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return i}function $A(t){try{if(!globalThis.localStorage)return!1}catch(r){return!1}var e=globalThis.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}});var YA=p((xkt,Ioe)=>{l();"use strict";Ioe.exports=zr;function _oe(t){var e=this;this.next=null,this.entry=null,this.finish=function(){iet(e,t)}}var l1;zr.WritableState=Ig;var OJe={deprecate:woe()},Eoe=FA(),Bm=Vt().Buffer,kJe=globalThis.Uint8Array||function(){};function qJe(t){return Bm.from(t)}function DJe(t){return Bm.isBuffer(t)||t instanceof kJe}var GA=zA(),NJe=HA(),BJe=NJe.getHighWaterMark,kf=gd().codes,MJe=kf.ERR_INVALID_ARG_TYPE,LJe=kf.ERR_METHOD_NOT_IMPLEMENTED,UJe=kf.ERR_MULTIPLE_CALLBACK,FJe=kf.ERR_STREAM_CANNOT_PIPE,jJe=kf.ERR_STREAM_DESTROYED,KJe=kf.ERR_STREAM_NULL_VALUES,VJe=kf.ERR_STREAM_WRITE_AFTER_END,zJe=kf.ERR_UNKNOWN_ENCODING,d1=GA.errorOrDestroy;Xi()(zr,Eoe);function HJe(){}function Ig(t,e,r){l1=l1||bd(),t=t||{},typeof r!="boolean"&&(r=e instanceof l1),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=BJe(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=t.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(n){ZJe(e,n)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new _oe(this)}Ig.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(Ig.prototype,"buffer",{get:OJe.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}})();var Mm;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Mm=Function.prototype[Symbol.hasInstance],Object.defineProperty(zr,Symbol.hasInstance,{value:function(e){return Mm.call(this,e)?!0:this!==zr?!1:e&&e._writableState instanceof Ig}})):Mm=function(e){return e instanceof this};function zr(t){l1=l1||bd();var e=this instanceof l1;if(!e&&!Mm.call(zr,this))return new zr(t);this._writableState=new Ig(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),Eoe.call(this)}zr.prototype.pipe=function(){d1(this,new FJe)};function $Je(t,e){var r=new VJe;d1(t,r),process.nextTick(e,r)}function GJe(t,e,r,i){var n;return r===null?n=new KJe:typeof r!="string"&&!e.objectMode&&(n=new MJe("chunk",["string","Buffer"],r)),n?(d1(t,n),process.nextTick(i,n),!1):!0}zr.prototype.write=function(t,e,r){var i=this._writableState,n=!1,s=!i.objectMode&&DJe(t);return s&&!Bm.isBuffer(t)&&(t=qJe(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),typeof r!="function"&&(r=HJe),i.ending?$Je(this,r):(s||GJe(this,i,t,r))&&(i.pendingcb++,n=YJe(this,i,s,t,e,r)),n};zr.prototype.cork=function(){this._writableState.corked++};zr.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&xoe(this,t))};zr.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new zJe(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(zr.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function WJe(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Bm.from(e,r)),e}Object.defineProperty(zr.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function YJe(t,e,r,i,n,s){if(!r){var o=WJe(e,i,n);i!==o&&(r=!0,n="buffer",i=o)}var a=e.objectMode?1:i.length;e.length+=a;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:s,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else WA(t,e,!1,a,i,n,s);return c}function WA(t,e,r,i,n,s,o){e.writelen=i,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new jJe("write")):r?t._writev(n,e.onwrite):t._write(n,s,e.onwrite),e.sync=!1}function XJe(t,e,r,i,n){--e.pendingcb,r?(process.nextTick(n,i),process.nextTick(Tg,t,e),t._writableState.errorEmitted=!0,d1(t,i)):(n(i),t._writableState.errorEmitted=!0,d1(t,i),Tg(t,e))}function QJe(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function ZJe(t,e){var r=t._writableState,i=r.sync,n=r.writecb;if(typeof n!="function")throw new UJe;if(QJe(r),e)XJe(t,r,i,e,n);else{var s=Aoe(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&xoe(t,r),i?process.nextTick(Soe,t,r,s,n):Soe(t,r,s,n)}}function Soe(t,e,r,i){r||JJe(t,e),e.pendingcb--,i(),Tg(t,e)}function JJe(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function xoe(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var i=e.bufferedRequestCount,n=new Array(i),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)n[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;n.allBuffers=a,WA(t,e,!0,e.length,n,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new _oe(e),e.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,f=r.callback,d=e.objectMode?1:c.length;if(WA(t,e,!1,d,c,u,f),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}zr.prototype._write=function(t,e,r){r(new LJe("_write()"))};zr.prototype._writev=null;zr.prototype.end=function(t,e,r){var i=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||ret(this,i,r),this};Object.defineProperty(zr.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Aoe(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function eet(t,e){t._final(function(r){e.pendingcb--,r&&d1(t,r),e.prefinished=!0,t.emit("prefinish"),Tg(t,e)})}function tet(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(eet,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Tg(t,e){var r=Aoe(e);if(r&&(tet(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return r}function ret(t,e,r){e.ending=!0,Tg(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function iet(t,e,r){var i=t.entry;for(t.entry=null;i;){var n=i.callback;e.pendingcb--,n(r),i=i.next}e.corkedRequestsFree.next=t}Object.defineProperty(zr.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});zr.prototype.destroy=GA.destroy;zr.prototype._undestroy=GA.undestroy;zr.prototype._destroy=function(t,e){e(t)}});var bd=p((Akt,Roe)=>{l();"use strict";var net=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};Roe.exports=ec;var Toe=ZA(),XA=YA();Xi()(ec,Toe);for(QA=net(XA.prototype),Lm=0;Lm<QA.length;Lm++)Um=QA[Lm],ec.prototype[Um]||(ec.prototype[Um]=XA.prototype[Um]);var QA,Um,Lm;function ec(t){if(!(this instanceof ec))return new ec(t);Toe.call(this,t),XA.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",set)))}Object.defineProperty(ec.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(ec.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(ec.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function set(){this._writableState.ended||process.nextTick(oet,this)}function oet(t){t.end()}Object.defineProperty(ec.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var eI=p((JA,Coe)=>{l();var Fm=Vt(),tc=Fm.Buffer;function Poe(t,e){for(var r in t)e[r]=t[r]}tc.from&&tc.alloc&&tc.allocUnsafe&&tc.allocUnsafeSlow?Coe.exports=Fm:(Poe(Fm,JA),JA.Buffer=md);function md(t,e,r){return tc(t,e,r)}md.prototype=Object.create(tc.prototype);Poe(tc,md);md.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return tc(t,e,r)};md.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var i=tc(t);return e!==void 0?typeof r=="string"?i.fill(e,r):i.fill(e):i.fill(0),i};md.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return tc(t)};md.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Fm.SlowBuffer(t)}});var iI=p(koe=>{l();"use strict";var tI=eI().Buffer,Ooe=tI.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function aet(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function cet(t){var e=aet(t);if(typeof e!="string"&&(tI.isEncoding===Ooe||!Ooe(t)))throw new Error("Unknown encoding: "+t);return e||t}koe.StringDecoder=Rg;function Rg(t){this.encoding=cet(t);var e;switch(this.encoding){case"utf16le":this.text=yet,this.end=get,e=4;break;case"utf8":this.fillLast=det,e=4;break;case"base64":this.text=bet,this.end=met,e=3;break;default:this.write=vet,this.end=wet;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=tI.allocUnsafe(e)}Rg.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Rg.prototype.end=pet;Rg.prototype.text=het;Rg.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function rI(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function uet(t,e,r){var i=e.length-1;if(i<r)return 0;var n=rI(e[i]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--i<r||n===-2?0:(n=rI(e[i]),n>=0?(n>0&&(t.lastNeed=n-2),n):--i<r||n===-2?0:(n=rI(e[i]),n>=0?(n>0&&(n===2?n=0:t.lastNeed=n-3),n):0))}function fet(t,e,r){if((e[0]&192)!=128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!=128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!=128)return t.lastNeed=2,"\uFFFD"}}function det(t){var e=this.lastTotal-this.lastNeed,r=fet(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function het(t,e){var r=uet(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var i=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function pet(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function yet(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function get(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function bet(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function met(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function vet(t){return t.toString(this.encoding)}function wet(t){return t&&t.length?this.write(t):""}});var jm=p((Tkt,Noe)=>{l();"use strict";var qoe=gd().codes.ERR_STREAM_PREMATURE_CLOSE;function _et(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];t.apply(this,i)}}}function Eet(){}function xet(t){return t.setHeader&&typeof t.abort=="function"}function Doe(t,e,r){if(typeof e=="function")return Doe(t,null,e);e||(e={}),r=_et(r||Eet);var i=e.readable||e.readable!==!1&&t.readable,n=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){n=!1,o=!0,i||r.call(t)},c=t._readableState&&t._readableState.endEmitted,u=function(){i=!1,c=!0,n||r.call(t)},f=function(g){r.call(t,g)},d=function(){var g;if(i&&!c)return(!t._readableState||!t._readableState.ended)&&(g=new qoe),r.call(t,g);if(n&&!o)return(!t._writableState||!t._writableState.ended)&&(g=new qoe),r.call(t,g)},h=function(){t.req.on("finish",a)};return xet(t)?(t.on("complete",a),t.on("abort",d),t.req?h():t.on("request",h)):n&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",u),t.on("finish",a),e.error!==!1&&t.on("error",f),t.on("close",d),function(){t.removeListener("complete",a),t.removeListener("abort",d),t.removeListener("request",h),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",u),t.removeListener("error",f),t.removeListener("close",d)}}Noe.exports=Doe});var Moe=p((Rkt,Boe)=>{l();"use strict";var Km;function qf(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Aet=jm(),Df=Symbol("lastResolve"),vd=Symbol("lastReject"),Pg=Symbol("error"),Vm=Symbol("ended"),wd=Symbol("lastPromise"),nI=Symbol("handlePromise"),_d=Symbol("stream");function Nf(t,e){return{value:t,done:e}}function Iet(t){var e=t[Df];if(e!==null){var r=t[_d].read();r!==null&&(t[wd]=null,t[Df]=null,t[vd]=null,e(Nf(r,!1)))}}function Tet(t){process.nextTick(Iet,t)}function Ret(t,e){return function(r,i){t.then(function(){if(e[Vm]){r(Nf(void 0,!0));return}e[nI](r,i)},i)}}var Pet=Object.getPrototypeOf(function(){}),Cet=Object.setPrototypeOf((Km={get stream(){return this[_d]},next:function(){var e=this,r=this[Pg];if(r!==null)return Promise.reject(r);if(this[Vm])return Promise.resolve(Nf(void 0,!0));if(this[_d].destroyed)return new Promise(function(o,a){process.nextTick(function(){e[Pg]?a(e[Pg]):o(Nf(void 0,!0))})});var i=this[wd],n;if(i)n=new Promise(Ret(i,this));else{var s=this[_d].read();if(s!==null)return Promise.resolve(Nf(s,!1));n=new Promise(this[nI])}return this[wd]=n,n}},qf(Km,Symbol.asyncIterator,function(){return this}),qf(Km,"return",function(){var e=this;return new Promise(function(r,i){e[_d].destroy(null,function(n){if(n){i(n);return}r(Nf(void 0,!0))})})}),Km),Pet),Oet=function(e){var r,i=Object.create(Cet,(r={},qf(r,_d,{value:e,writable:!0}),qf(r,Df,{value:null,writable:!0}),qf(r,vd,{value:null,writable:!0}),qf(r,Pg,{value:null,writable:!0}),qf(r,Vm,{value:e._readableState.endEmitted,writable:!0}),qf(r,nI,{value:function(s,o){var a=i[_d].read();a?(i[wd]=null,i[Df]=null,i[vd]=null,s(Nf(a,!1))):(i[Df]=s,i[vd]=o)},writable:!0}),r));return i[wd]=null,Aet(e,function(n){if(n&&n.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=i[vd];s!==null&&(i[wd]=null,i[Df]=null,i[vd]=null,s(n)),i[Pg]=n;return}var o=i[Df];o!==null&&(i[wd]=null,i[Df]=null,i[vd]=null,o(Nf(void 0,!0))),i[Vm]=!0}),e.on("readable",Tet.bind(null,i)),i};Boe.exports=Oet});var Uoe=p((Pkt,Loe)=>{l();Loe.exports=function(){throw new Error("Readable.from is not available in the browser")}});var ZA=p((Okt,Yoe)=>{l();"use strict";Yoe.exports=Dt;var h1;Dt.ReadableState=joe;var Ckt=gr().EventEmitter,Foe=function(e,r){return e.listeners(r).length},Cg=FA(),zm=Vt().Buffer,ket=globalThis.Uint8Array||function(){};function qet(t){return zm.from(t)}function Det(t){return zm.isBuffer(t)||t instanceof ket}var sI=jA(),yt;sI&&sI.debuglog?yt=sI.debuglog("stream"):yt=function(){};var Net=doe(),oI=zA(),Bet=HA(),Met=Bet.getHighWaterMark,Hm=gd().codes,Let=Hm.ERR_INVALID_ARG_TYPE,Uet=Hm.ERR_STREAM_PUSH_AFTER_EOF,Fet=Hm.ERR_METHOD_NOT_IMPLEMENTED,jet=Hm.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,p1,aI,cI;Xi()(Dt,Cg);var Og=oI.errorOrDestroy,uI=["error","close","destroy","pause","resume"];function Ket(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function joe(t,e,r){h1=h1||bd(),t=t||{},typeof r!="boolean"&&(r=e instanceof h1),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=Met(this,t,"readableHighWaterMark",r),this.buffer=new Net,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p1||(p1=iI().StringDecoder),this.decoder=new p1(t.encoding),this.encoding=t.encoding)}function Dt(t){if(h1=h1||bd(),!(this instanceof Dt))return new Dt(t);var e=this instanceof h1;this._readableState=new joe(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Cg.call(this)}Object.defineProperty(Dt.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});Dt.prototype.destroy=oI.destroy;Dt.prototype._undestroy=oI.undestroy;Dt.prototype._destroy=function(t,e){e(t)};Dt.prototype.push=function(t,e){var r=this._readableState,i;return r.objectMode?i=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=zm.from(t,e),e=""),i=!0),Koe(this,t,e,!1,i)};Dt.prototype.unshift=function(t){return Koe(this,t,null,!0,!1)};function Koe(t,e,r,i,n){yt("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,Het(t,s);else{var o;if(n||(o=Vet(s,e)),o)Og(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==zm.prototype&&(e=qet(e)),i)s.endEmitted?Og(t,new jet):fI(t,s,e,!0);else if(s.ended)Og(t,new Uet);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?fI(t,s,e,!1):lI(t,s)):fI(t,s,e,!1)}else i||(s.reading=!1,lI(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function fI(t,e,r,i){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&$m(t)),lI(t,e)}function Vet(t,e){var r;return!Det(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new Let("chunk",["string","Buffer","Uint8Array"],e)),r}Dt.prototype.isPaused=function(){return this._readableState.flowing===!1};Dt.prototype.setEncoding=function(t){p1||(p1=iI().StringDecoder);var e=new p1(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";r!==null;)i+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),i!==""&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var Voe=1073741824;function zet(t){return t>=Voe?t=Voe:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function zoe(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=zet(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Dt.prototype.read=function(t){yt("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return yt("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?hI(this):$m(this),null;if(t=zoe(t,e),t===0&&e.ended)return e.length===0&&hI(this),null;var i=e.needReadable;yt("need readable",i),(e.length===0||e.length-t<e.highWaterMark)&&(i=!0,yt("length less than watermark",i)),e.ended||e.reading?(i=!1,yt("reading or ended",i)):i&&(yt("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=zoe(r,e)));var n;return t>0?n=Goe(t,e):n=null,n===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&hI(this)),n!==null&&this.emit("data",n),n};function Het(t,e){if(yt("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?$m(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,Hoe(t)))}}function $m(t){var e=t._readableState;yt("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(yt("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(Hoe,t))}function Hoe(t){var e=t._readableState;yt("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,dI(t)}function lI(t,e){e.readingMore||(e.readingMore=!0,process.nextTick($et,t,e))}function $et(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(yt("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Dt.prototype._read=function(t){Og(this,new Fet("_read()"))};Dt.prototype.pipe=function(t,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t);break}i.pipesCount+=1,yt("pipe count=%d opts=%j",i.pipesCount,e);var n=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=n?a:m;i.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(E,v){yt("onunpipe"),E===r&&v&&v.hasUnpiped===!1&&(v.hasUnpiped=!0,f())}function a(){yt("onend"),t.end()}var c=Get(r);t.on("drain",c);var u=!1;function f(){yt("cleanup"),t.removeListener("close",y),t.removeListener("finish",g),t.removeListener("drain",c),t.removeListener("error",h),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",d),u=!0,i.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&c()}r.on("data",d);function d(E){yt("ondata");var v=t.write(E);yt("dest.write",v),v===!1&&((i.pipesCount===1&&i.pipes===t||i.pipesCount>1&&Woe(i.pipes,t)!==-1)&&!u&&(yt("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function h(E){yt("onerror",E),m(),t.removeListener("error",h),Foe(t,"error")===0&&Og(t,E)}Ket(t,"error",h);function y(){t.removeListener("finish",g),m()}t.once("close",y);function g(){yt("onfinish"),t.removeListener("close",y),m()}t.once("finish",g);function m(){yt("unpipe"),r.unpipe(t)}return t.emit("pipe",r),i.flowing||(yt("pipe resume"),r.resume()),t};function Get(t){return function(){var r=t._readableState;yt("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&Foe(t,"data")&&(r.flowing=!0,dI(t))}}Dt.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var i=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<n;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=Woe(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Dt.prototype.on=function(t,e){var r=Cg.prototype.on.call(this,t,e),i=this._readableState;return t==="data"?(i.readableListening=this.listenerCount("readable")>0,i.flowing!==!1&&this.resume()):t==="readable"&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,yt("on readable",i.length,i.reading),i.length?$m(this):i.reading||process.nextTick(Wet,this)),r};Dt.prototype.addListener=Dt.prototype.on;Dt.prototype.removeListener=function(t,e){var r=Cg.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick($oe,this),r};Dt.prototype.removeAllListeners=function(t){var e=Cg.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick($oe,this),e};function $oe(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function Wet(t){yt("readable nexttick read 0"),t.read(0)}Dt.prototype.resume=function(){var t=this._readableState;return t.flowing||(yt("resume"),t.flowing=!t.readableListening,Yet(this,t)),t.paused=!1,this};function Yet(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(Xet,t,e))}function Xet(t,e){yt("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),dI(t),e.flowing&&!e.reading&&t.read(0)}Dt.prototype.pause=function(){return yt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(yt("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function dI(t){var e=t._readableState;for(yt("flow",e.flowing);e.flowing&&t.read()!==null;);}Dt.prototype.wrap=function(t){var e=this,r=this._readableState,i=!1;t.on("end",function(){if(yt("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(yt("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(i=!0,t.pause())}});for(var n in t)this[n]===void 0&&typeof t[n]=="function"&&(this[n]=function(a){return function(){return t[a].apply(t,arguments)}}(n));for(var s=0;s<uI.length;s++)t.on(uI[s],this.emit.bind(this,uI[s]));return this._read=function(o){yt("wrapped _read",o),i&&(i=!1,t.resume())},this};typeof Symbol=="function"&&(Dt.prototype[Symbol.asyncIterator]=function(){return aI===void 0&&(aI=Moe()),aI(this)});Object.defineProperty(Dt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Dt.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Dt.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Dt._fromList=Goe;Object.defineProperty(Dt.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Goe(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function hI(t){var e=t._readableState;yt("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(Qet,e,t))}function Qet(t,e){if(yt("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(Dt.from=function(t,e){return cI===void 0&&(cI=Uoe()),cI(Dt,t,e)});function Woe(t,e){for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}});var pI=p((kkt,Qoe)=>{l();"use strict";Qoe.exports=ou;var Gm=gd().codes,Zet=Gm.ERR_METHOD_NOT_IMPLEMENTED,Jet=Gm.ERR_MULTIPLE_CALLBACK,ett=Gm.ERR_TRANSFORM_ALREADY_TRANSFORMING,ttt=Gm.ERR_TRANSFORM_WITH_LENGTH_0,Wm=bd();Xi()(ou,Wm);function rtt(t,e){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(i===null)return this.emit("error",new Jet);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),i(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function ou(t){if(!(this instanceof ou))return new ou(t);Wm.call(this,t),this._transformState={afterTransform:rtt.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",itt)}function itt(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){Xoe(t,e,r)}):Xoe(this,null,null)}ou.prototype.push=function(t,e){return this._transformState.needTransform=!1,Wm.prototype.push.call(this,t,e)};ou.prototype._transform=function(t,e,r){r(new Zet("_transform()"))};ou.prototype._write=function(t,e,r){var i=this._transformState;if(i.writecb=r,i.writechunk=t,i.writeencoding=e,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};ou.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};ou.prototype._destroy=function(t,e){Wm.prototype._destroy.call(this,t,function(r){e(r)})};function Xoe(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new ttt;if(t._transformState.transforming)throw new ett;return t.push(null)}});var eae=p((qkt,Joe)=>{l();"use strict";Joe.exports=kg;var Zoe=pI();Xi()(kg,Zoe);function kg(t){if(!(this instanceof kg))return new kg(t);Zoe.call(this,t)}kg.prototype._transform=function(t,e,r){r(null,t)}});var sae=p((Dkt,nae)=>{l();"use strict";var yI;function ntt(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var tae=gd().codes,stt=tae.ERR_MISSING_ARGS,ott=tae.ERR_STREAM_DESTROYED;function rae(t){if(t)throw t}function att(t){return t.setHeader&&typeof t.abort=="function"}function ctt(t,e,r,i){i=ntt(i);var n=!1;t.on("close",function(){n=!0}),yI===void 0&&(yI=jm()),yI(t,{readable:e,writable:r},function(o){if(o)return i(o);n=!0,i()});var s=!1;return function(o){if(!n&&!s){if(s=!0,att(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();i(o||new ott("pipe"))}}}function iae(t){t()}function utt(t,e){return t.pipe(e)}function ftt(t){return!t.length||typeof t[t.length-1]!="function"?rae:t.pop()}function ltt(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=ftt(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new stt("streams");var n,s=e.map(function(o,a){var c=a<e.length-1,u=a>0;return ctt(o,c,u,function(f){n||(n=f),f&&s.forEach(iae),!c&&(s.forEach(iae),i(n))})});return e.reduce(utt)}nae.exports=ltt});var gI=p((Js,oae)=>{l();Js=oae.exports=ZA();Js.Stream=Js;Js.Readable=Js;Js.Writable=YA();Js.Duplex=bd();Js.Transform=pI();Js.PassThrough=eae();Js.finished=jm();Js.pipeline=sae()});var uae=p((Nkt,cae)=>{l();"use strict";var dtt=Xi(),{Readable:aae}=gI();cae.exports=y1;dtt(y1,aae);function y1(t,e){if(!(this instanceof y1))return new y1(t,e);e=e||{},aae.call(this,Object.assign({},e,{objectMode:!0})),this._iterator=t,this._options=e,this.on("end",this.destroy.bind(this,null,null))}y1.prototype._read=function(){this.destroyed||this._iterator.next((t,e,r)=>{if(!this.destroyed){if(t)return this.destroy(t);e===void 0&&r===void 0?this.push(null):this._options.keys!==!1&&this._options.values===!1?this.push(e):this._options.keys===!1&&this._options.values!==!1?this.push(r):this.push({key:e,value:r})}})};y1.prototype._destroy=function(t,e){this._iterator.end(function(r){e(t||r)})}});var lae=p((fae,Ym)=>{l();(function(t,e,r){typeof Ym!="undefined"&&Ym.exports?Ym.exports=r():e[t]=r()})("prr",fae,function(){var t=typeof Object.defineProperty=="function"?function(i,n,s){return Object.defineProperty(i,n,s),i}:function(i,n,s){return i[n]=s.value,i},e=function(i,n){var s=typeof n=="object",o=!s&&typeof n=="string",a=function(c){return s?!!n[c]:o?n.indexOf(c[0])>-1:!1};return{enumerable:a("enumerable"),configurable:a("configurable"),writable:a("writable"),value:i}},r=function(i,n,s,o){var a;if(o=e(s,o),typeof n=="object"){for(a in n)Object.hasOwnProperty.call(n,a)&&(o.value=n[a],t(i,a,o));return i}return t(i,n,o)};return r})});var pae=p((Bkt,hae)=>{l();var htt=lae();function dae(t,e,r){!!e&&typeof e!="string"&&(e=e.message||e.name),htt(this,{type:t,name:t,cause:typeof e!="string"?e:r,message:e},"ewr")}function bI(t,e){Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),dae.call(this,"CustomError",t,e)}bI.prototype=new Error;function ptt(t,e,r){var i=function(n,s){dae.call(this,e,n,s),e=="FilesystemError"&&(this.code=this.cause.code,this.path=this.cause.path,this.errno=this.cause.errno,this.message=(t.errno[this.cause.errno]?t.errno[this.cause.errno].description:this.cause.message)+(this.cause.path?" ["+this.cause.path+"]":"")),Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,i)};return i.prototype=r?new r:new bI,i}hae.exports=function(t){var e=function(r,i){return ptt(t,r,i)};return{CustomError:bI,FilesystemError:e("FilesystemError"),createError:e}}});var yae=p((Mkt,rc)=>{l();var ytt=rc.exports.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];rc.exports.errno={};rc.exports.code={};ytt.forEach(function(t){rc.exports.errno[t.errno]=t,rc.exports.code[t.code]=t});rc.exports.custom=pae()(rc.exports);rc.exports.create=rc.exports.custom.createError});var Xm=p((Lkt,gae)=>{l();"use strict";var Ed=yae().create,Sd=Ed("LevelUPError"),mI=Ed("NotFoundError",Sd);mI.prototype.notFound=!0;mI.prototype.status=404;gae.exports={LevelUPError:Sd,InitializationError:Ed("InitializationError",Sd),OpenError:Ed("OpenError",Sd),ReadError:Ed("ReadError",Sd),WriteError:Ed("WriteError",Sd),NotFoundError:mI,EncodingError:Ed("EncodingError",Sd)}});var wI=p(vI=>{l();"use strict";vI.fromCallback=function(t){if(t===void 0){var e=new Promise(function(r,i){t=function(n,s){n?i(n):r(s)}});t.promise=e}return t};vI.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(r){process.nextTick(e,null,r)}).catch(function(r){process.nextTick(e,r)})}});var qg=p(_I=>{l();"use strict";_I.getCallback=function(t,e){return typeof t=="function"?t:e};_I.getOptions=function(t){return typeof t=="object"&&t!==null?t:{}}});var mae=p((jkt,bae)=>{l();"use strict";var Dg=Xm().WriteError,gtt=wI(),btt=qg().getCallback,mtt=qg().getOptions;function Ng(t){this.db=t,this.batch=t.db.batch(),this.ops=[],this.length=0}Ng.prototype.put=function(t,e,r){try{this.batch.put(t,e,r)}catch(i){throw new Dg(i)}return this.ops.push({...r,type:"put",key:t,value:e}),this.length++,this};Ng.prototype.del=function(t,e){try{this.batch.del(t,e)}catch(r){throw new Dg(r)}return this.ops.push({...e,type:"del",key:t}),this.length++,this};Ng.prototype.clear=function(){try{this.batch.clear()}catch(t){throw new Dg(t)}return this.ops=[],this.length=0,this};Ng.prototype.write=function(t,e){let r=this.db,i=this.ops;e=btt(t,e),e=gtt.fromCallback(e),t=mtt(t);try{this.batch.write(t,function(n){if(n)return e(new Dg(n));r.emit("batch",i),e()})}catch(n){throw new Dg(n)}return e.promise};bae.exports=Ng});var _ae=p((Kkt,wae)=>{l();"use strict";var vae=Om();wae.exports=function(t,...e){e.length===0?vae(t):vae(()=>t(...e))}});var Aae=p((Vkt,xae)=>{l();"use strict";var Qm=gr().EventEmitter,vtt=jse().inherits,Eae=aoe(),wtt=uae(),_tt=mae(),g1=Xm(),Ett=NA(),xd=wI(),Bg=qg().getCallback,b1=qg().getOptions,Zm=_ae(),Jm=g1.WriteError,Sae=g1.ReadError,Stt=g1.NotFoundError,xtt=g1.OpenError,Att=g1.InitializationError;function fr(t,e,r){if(!(this instanceof fr))return new fr(t,e,r);let i;if(Qm.call(this),this.setMaxListeners(1/0),typeof e=="function"&&(r=e,e={}),e=e||{},!t||typeof t!="object"){if(i=new Att("First argument must be an abstract-leveldown compliant store"),typeof r=="function")return Zm(r,i);throw i}if(typeof t.status!="string")throw new Error(".status required, old abstract-leveldown");this.options=b1(e),this._db=t,this.db=new Eae(t),this.open(r||(n=>{n&&this.emit("error",n)})),this.supports=Ett(this.db.supports,{status:!1,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0});for(let n of Object.keys(this.supports.additionalMethods))this[n]==null&&(this[n]=function(...s){return this.db[n](...s)})}fr.prototype.emit=Qm.prototype.emit;fr.prototype.once=Qm.prototype.once;vtt(fr,Qm);fr.prototype.open=function(t,e){return typeof t=="function"&&(e=t,t=null),e=xd.fromCallback(e),t||(t=this.options),this.isOpen()?(Zm(e,null,this),e.promise):this._isOpening()?(this.once("open",()=>{e(null,this)}),e.promise):(this.emit("opening"),this.db.open(t,r=>{if(r)return e(new xtt(r));this.db=this._db,e(null,this),this.emit("open"),this.emit("ready")}),e.promise)};fr.prototype.close=function(t){return t=xd.fromCallback(t),this.isOpen()?(this.db.close((e,...r)=>{this.emit("closed"),t(e,...r)}),this.emit("closing"),this.db=new Eae(this._db)):this.isClosed()?Zm(t):this.db.status==="closing"?this.once("closed",t):this._isOpening()&&this.once("open",()=>{this.close(t)}),t.promise};fr.prototype.isOpen=function(){return this.db.status==="open"};fr.prototype._isOpening=function(){return this.db.status==="opening"};fr.prototype.isClosed=function(){return/^clos|new/.test(this.db.status)};fr.prototype.get=function(t,e,r){return r=Bg(e,r),r=xd.fromCallback(r),Mg(this,r)||(e=b1(e),this.db.get(t,e,function(i,n){if(i)return/notfound/i.test(i)||i.notFound?i=new Stt("Key not found in database ["+t+"]",i):i=new Sae(i),r(i);r(null,n)})),r.promise};fr.prototype.put=function(t,e,r,i){return i=Bg(r,i),i=xd.fromCallback(i),Mg(this,i)||(r=b1(r),this.db.put(t,e,r,n=>{if(n)return i(new Jm(n));this.emit("put",t,e),i()})),i.promise};fr.prototype.del=function(t,e,r){return r=Bg(e,r),r=xd.fromCallback(r),Mg(this,r)||(e=b1(e),this.db.del(t,e,i=>{if(i)return r(new Jm(i));this.emit("del",t),r()})),r.promise};fr.prototype.batch=function(t,e,r){return arguments.length?(typeof t=="function"?r=t:r=Bg(e,r),r=xd.fromCallback(r),Mg(this,r)||(e=b1(e),this.db.batch(t,e,i=>{if(i)return r(new Jm(i));this.emit("batch",t),r()})),r.promise):new _tt(this)};fr.prototype.iterator=function(t){return this.db.iterator(t)};fr.prototype.clear=function(t,e){return e=Bg(t,e),t=b1(t),e=xd.fromCallback(e),Mg(this,e)||this.db.clear(t,r=>{if(r)return e(new Jm(r));this.emit("clear",t),e()}),e.promise};fr.prototype.readStream=fr.prototype.createReadStream=function(t){return t=Object.assign({keys:!0,values:!0},t),typeof t.limit!="number"&&(t.limit=-1),new wtt(this.db.iterator(t),t)};fr.prototype.keyStream=fr.prototype.createKeyStream=function(t){return this.createReadStream(Object.assign({},t,{keys:!0,values:!1}))};fr.prototype.valueStream=fr.prototype.createValueStream=function(t){return this.createReadStream(Object.assign({},t,{keys:!1,values:!0}))};fr.prototype.toString=function(){return"LevelUP"};fr.prototype.type="levelup";function Mg(t,e){if(!t._isOpening()&&!t.isOpen())return Zm(e,new Sae("Database is not open")),!0}fr.errors=g1;xae.exports=fr});var Iae=p(au=>{l();"use strict";var{Buffer:EI}=Vt();au.utf8=au["utf-8"]={encode:function(t){return SI(t)?t:String(t)},decode:e8,buffer:!1,type:"utf8"};au.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"};au.binary={encode:function(t){return SI(t)?t:EI.from(t)},decode:e8,buffer:!0,type:"binary"};au.none={encode:e8,decode:e8,buffer:!1,type:"id"};au.id=au.none;var Itt=["hex","ascii","base64","ucs2","ucs-2","utf16le","utf-16le"];for(let t of Itt)au[t]={encode:function(e){return SI(e)?e:EI.from(e,t)},decode:function(e){return e.toString(t)},buffer:!0,type:t};function e8(t){return t}function SI(t){return t==null||EI.isBuffer(t)}});var Rae=p((Hkt,Tae)=>{l();"use strict";var xI=Iae(),Ttt=new Set(["lt","gt","lte","gte"]);Tae.exports=qn;function qn(t){if(!(this instanceof qn))return new qn(t);this.opts=t||{},this.encodings=xI}qn.prototype._encoding=function(t){return typeof t=="string"&&(t=xI[t]),t||(t=xI.id),t};qn.prototype._keyEncoding=function(t,e){return this._encoding(e&&e.keyEncoding||t&&t.keyEncoding||this.opts.keyEncoding)};qn.prototype._valueEncoding=function(t,e){return this._encoding(e&&(e.valueEncoding||e.encoding)||t&&(t.valueEncoding||t.encoding)||this.opts.valueEncoding||this.opts.encoding)};qn.prototype.encodeKey=function(t,e,r){return this._keyEncoding(e,r).encode(t)};qn.prototype.encodeValue=function(t,e,r){return this._valueEncoding(e,r).encode(t)};qn.prototype.decodeKey=function(t,e){return this._keyEncoding(e).decode(t)};qn.prototype.decodeValue=function(t,e){return this._valueEncoding(e).decode(t)};qn.prototype.encodeBatch=function(t,e){return t.map(r=>{let i={type:r.type,key:this.encodeKey(r.key,e,r)};return this.keyAsBuffer(e,r)&&(i.keyEncoding="binary"),r.prefix&&(i.prefix=r.prefix),"value"in r&&(i.value=this.encodeValue(r.value,e,r),this.valueAsBuffer(e,r)&&(i.valueEncoding="binary")),i})};qn.prototype.encodeLtgt=function(t){let e={};for(let r of Object.keys(t)){if(r==="start"||r==="end")throw new Error('Legacy range options ("start" and "end") have been removed');e[r]=Ttt.has(r)?this.encodeKey(t[r],t):t[r]}return e};qn.prototype.createStreamDecoder=function(t){return t.keys&&t.values?(e,r)=>({key:this.decodeKey(e,t),value:this.decodeValue(r,t)}):t.keys?e=>this.decodeKey(e,t):t.values?(e,r)=>this.decodeValue(r,t):function(){}};qn.prototype.keyAsBuffer=function(t){return this._keyEncoding(t).buffer};qn.prototype.valueAsBuffer=function(t){return this._valueEncoding(t).buffer}});var Dae=p(($kt,qae)=>{l();"use strict";var Pae=Of().AbstractLevelDOWN,Cae=Of().AbstractChainedBatch,Oae=Of().AbstractIterator,AI=Xi(),Rtt=Rae(),kae=Xm().EncodingError,Ptt=["approximateSize","compactRange"];qae.exports=mn;function mn(t,e){if(!(this instanceof mn))return new mn(t,e);let r=t.supports||{},i=r.additionalMethods||{};Pae.call(this,r),this.supports.encodings=!0,this.supports.additionalMethods={},Ptt.forEach(function(n){let s=typeof t[n]=="function";(i[n]||s)&&(this.supports.additionalMethods[n]=!0,this[n]=function(o,a,c,u){return o=this.codec.encodeKey(o,c),a=this.codec.encodeKey(a,c),this.db[n](o,a,c,u)})},this),e=e||{},typeof e.keyEncoding=="undefined"&&(e.keyEncoding="utf8"),typeof e.valueEncoding=="undefined"&&(e.valueEncoding="utf8"),this.db=t,this.codec=new Rtt(e)}AI(mn,Pae);mn.prototype.type="encoding-down";mn.prototype._serializeKey=mn.prototype._serializeValue=function(t){return t};mn.prototype._open=function(t,e){this.db.open(t,e)};mn.prototype._close=function(t){this.db.close(t)};mn.prototype._put=function(t,e,r,i){t=this.codec.encodeKey(t,r),e=this.codec.encodeValue(e,r),this.db.put(t,e,r,i)};mn.prototype._get=function(t,e,r){t=this.codec.encodeKey(t,e),e.asBuffer=this.codec.valueAsBuffer(e),this.db.get(t,e,(i,n)=>{if(i)return r(i);try{n=this.codec.decodeValue(n,e)}catch(s){return r(new kae(s))}r(null,n)})};mn.prototype._del=function(t,e,r){t=this.codec.encodeKey(t,e),this.db.del(t,e,r)};mn.prototype._chainedBatch=function(){return new m1(this)};mn.prototype._batch=function(t,e,r){t=this.codec.encodeBatch(t,e),this.db.batch(t,e,r)};mn.prototype._iterator=function(t){return t.keyAsBuffer=this.codec.keyAsBuffer(t),t.valueAsBuffer=this.codec.valueAsBuffer(t),new Lg(this,t)};mn.prototype._clear=function(t,e){t=this.codec.encodeLtgt(t),this.db.clear(t,e)};function Lg(t,e){Oae.call(this,t),this.codec=t.codec,this.keys=e.keys,this.values=e.values,this.opts=this.codec.encodeLtgt(e),this.it=t.db.iterator(this.opts)}AI(Lg,Oae);Lg.prototype._next=function(t){this.it.next((e,r,i)=>{if(e)return t(e);try{this.keys&&typeof r!="undefined"?r=this.codec.decodeKey(r,this.opts):r=void 0,this.values&&typeof i!="undefined"?i=this.codec.decodeValue(i,this.opts):i=void 0}catch(n){return t(new kae(n))}t(null,r,i)})};Lg.prototype._seek=function(t){t=this.codec.encodeKey(t,this.opts),this.it.seek(t)};Lg.prototype._end=function(t){this.it.end(t)};function m1(t,e){Cae.call(this,t),this.codec=t.codec,this.batch=t.db.batch()}AI(m1,Cae);m1.prototype._put=function(t,e,r){t=this.codec.encodeKey(t,r),e=this.codec.encodeValue(e,r),this.batch.put(t,e)};m1.prototype._del=function(t,e){t=this.codec.encodeKey(t,e),this.batch.del(t)};m1.prototype._clear=function(){this.batch.clear()};m1.prototype._write=function(t,e){this.batch.write(t,e)}});var Mae=p((Gkt,Bae)=>{l();"use strict";var Nae=Aae(),Ctt=Dae();function Ott(t){function e(i,n,s){return typeof i=="function"?s=i:typeof n=="function"&&(s=n),r(n)||(n=r(i)?i:{}),Nae(Ctt(t(i,n),n),n,s)}function r(i){return typeof i=="object"&&i!==null}for(let i of["destroy","repair"])typeof t[i]=="function"&&(e[i]=function(...n){t[i](...n)});return e.errors=Nae.errors,e}Bae.exports=Ott});var Uae=p(oi=>{l();oi.compare=function(t,e){if(Buffer.isBuffer(t)){for(var r=Math.min(t.length,e.length),i=0;i<r;i++){var n=t[i]-e[i];if(n)return n}return t.length-e.length}return t<e?-1:t>e?1:0};function Lae(t){return t!==void 0&&t!==""}function v1(t,e){return Object.hasOwnProperty.call(t,e)}function ic(t,e){return Object.hasOwnProperty.call(t,e)&&e}var ktt=oi.lowerBoundKey=function(t){return ic(t,"gt")||ic(t,"gte")||ic(t,"min")||(t.reverse?ic(t,"end"):ic(t,"start"))||void 0},II=oi.lowerBound=function(t,e){var r=ktt(t);return r?t[r]:e},TI=oi.lowerBoundInclusive=function(t){return!v1(t,"gt")},RI=oi.upperBoundInclusive=function(t){return!v1(t,"lt")},qtt=oi.lowerBoundExclusive=function(t){return!TI(t)},Dtt=oi.upperBoundExclusive=function(t){return!RI(t)},Ntt=oi.upperBoundKey=function(t){return ic(t,"lt")||ic(t,"lte")||ic(t,"max")||(t.reverse?ic(t,"start"):ic(t,"end"))||void 0},PI=oi.upperBound=function(t,e){var r=Ntt(t);return r?t[r]:e};oi.start=function(t,e){return t.reverse?PI(t,e):II(t,e)};oi.end=function(t,e){return t.reverse?II(t,e):PI(t,e)};oi.startInclusive=function(t){return t.reverse?RI(t):TI(t)};oi.endInclusive=function(t){return t.reverse?TI(t):RI(t)};function Btt(t){return t}oi.toLtgt=function(t,e,r,i,n){e=e||{},r=r||Btt;var s=arguments.length>3,o=oi.lowerBoundKey(t),a=oi.upperBoundKey(t);return o?o==="gt"?e.gt=r(t.gt,!1):e.gte=r(t[o],!1):s&&(e.gte=r(i,!1)),a?a==="lt"?e.lt=r(t.lt,!0):e.lte=r(t[a],!0):s&&(e.lte=r(n,!0)),t.reverse!=null&&(e.reverse=!!t.reverse),v1(e,"max")&&delete e.max,v1(e,"min")&&delete e.min,v1(e,"start")&&delete e.start,v1(e,"end")&&delete e.end,e};oi.contains=function(t,e,r){r=r||oi.compare;var i=II(t);if(Lae(i)){var n=r(e,i);if(n<0||n===0&&qtt(t))return!1}var s=PI(t);if(Lae(s)){var n=r(e,s);if(n>0||n===0&&Dtt(t))return!1}return!0};oi.filter=function(t,e){return function(r){return oi.contains(t,r,e)}}});var CI=p((Ykt,Fae)=>{l();"use strict";var t8=Uae(),Bf=Symbol("none");Fae.exports=function(e){let r=t8.lowerBound(e,Bf),i=t8.upperBound(e,Bf),n=t8.lowerBoundExclusive(e,Bf),s=t8.upperBoundExclusive(e,Bf);return r!==Bf&&i!==Bf?IDBKeyRange.bound(r,i,n,s):r!==Bf?IDBKeyRange.lowerBound(r,n):i!==Bf?IDBKeyRange.upperBound(i,s):null}});var OI=p((Xkt,Kae)=>{l();"use strict";var r8=Vt().Buffer,Mtt=function(){if(globalThis.TextDecoder){let t=new TextDecoder("utf-8");return t.decode.bind(t)}else return function(e){return jae(e).toString()}}(),Ltt=function(){if(globalThis.TextDecoder){let t=new TextDecoder("utf-8");return t.decode.bind(t)}else return function(e){return r8.from(e).toString()}}();function jae(t){let e=r8.from(t.buffer);return t.byteLength===t.buffer.byteLength?e:e.slice(t.byteOffset,t.byteOffset+t.byteLength)}Kae.exports=function(t,e){return t instanceof Uint8Array?e?jae(t):Mtt(t):t instanceof ArrayBuffer?e?r8.from(t):Ltt(t):e?r8.from(String(t)):String(t)}});var $ae=p((Qkt,Hae)=>{l();"use strict";var Utt=Xi(),Vae=Of().AbstractIterator,Ftt=CI(),zae=OI(),jtt=function(){};Hae.exports=Yo;function Yo(t,e,r){if(Vae.call(this,t),this._limit=r.limit,this._count=0,this._callback=null,this._cache=[],this._completed=!1,this._aborted=!1,this._error=null,this._transaction=null,this._keys=r.keys,this._values=r.values,this._keyAsBuffer=r.keyAsBuffer,this._valueAsBuffer=r.valueAsBuffer,this._limit===0){this._completed=!0;return}let i;try{i=Ftt(r)}catch(n){this._completed=!0;return}this.createIterator(e,i,r.reverse)}Utt(Yo,Vae);Yo.prototype.createIterator=function(t,e,r){let i=this.db.db.transaction([t],"readonly"),s=i.objectStore(t).openCursor(e,r?"prev":"next");s.onsuccess=o=>{let a=o.target.result;a&&this.onItem(a)},this._transaction=i,i.onabort=()=>{this.onAbort(this._transaction.error||new Error("aborted by user"))},i.oncomplete=()=>{this.onComplete()}};Yo.prototype.onItem=function(t){this._cache.push(t.key,t.value),(this._limit<=0||++this._count<this._limit)&&t.continue(),this.maybeNext()};Yo.prototype.onAbort=function(t){this._aborted=!0,this._error=t,this.maybeNext()};Yo.prototype.onComplete=function(){this._completed=!0,this.maybeNext()};Yo.prototype.maybeNext=function(){this._callback&&(this._next(this._callback),this._callback=null)};Yo.prototype._next=function(t){if(this._aborted){let e=this._error;this._error=null,this._nextTick(t,e)}else if(this._cache.length>0){let e=this._cache.shift(),r=this._cache.shift();this._keys&&e!==void 0?e=this._deserializeKey(e,this._keyAsBuffer):e=void 0,this._values&&r!==void 0?r=this._deserializeValue(r,this._valueAsBuffer):r=void 0,this._nextTick(t,null,e,r)}else this._completed?this._nextTick(t):this._callback=t};Yo.prototype._deserializeKey=zae;Yo.prototype._deserializeValue=zae;Yo.prototype._end=function(t){if(this._aborted||this._completed)return this._nextTick(t,this._error);this.onItem=jtt,this.onAbort=t,this.onComplete=t}});var Yae=p((Zkt,Wae)=>{l();"use strict";var Gae=Vt().Buffer,Ktt=function(){if(globalThis.TextEncoder){let t=new TextEncoder("utf-8");return t.encode.bind(t)}else return Gae.from}();Wae.exports=function(t,e){return e?Gae.isBuffer(t)?t:Ktt(String(t)):String(t)}});var Xae=p(i8=>{l();"use strict";var Vtt=Vt().Buffer;i8.test=function(t){return function(r){try{return r.cmp(t,0),!0}catch(i){return!1}}};i8.bufferKeys=i8.test(Vtt.alloc(0))});var Zae=p((eqt,Qae)=>{l();"use strict";Qae.exports=function(e,r,i,n,s){if(n.limit===0)return e._nextTick(s);let o=e.db.transaction([r],"readwrite"),a=o.objectStore(r),c=0;o.oncomplete=function(){s()},o.onabort=function(){s(o.error||new Error("aborted by user"))};let u=a.openKeyCursor?"openKeyCursor":"openCursor",f=n.reverse?"prev":"next";a[u](i,f).onsuccess=function(d){let h=d.target.result;h&&(a.delete(h.key).onsuccess=function(){(n.limit<=0||++c<n.limit)&&h.continue()})}}});var ice=p((tqt,rce)=>{l();"use strict";rce.exports=xi;var Jae=Of().AbstractLevelDOWN,ztt=Xi(),Htt=$ae(),ece=Yae(),kI=OI(),$tt=Xae(),Gtt=Zae(),Wtt=CI(),tce="level-js-";function xi(t,e){if(!(this instanceof xi))return new xi(t,e);if(Jae.call(this,{bufferKeys:$tt.bufferKeys(indexedDB),snapshots:!0,permanence:!0,clear:!0}),e=e||{},typeof t!="string")throw new Error("constructor requires a location string argument");this.location=t,this.prefix=e.prefix==null?tce:e.prefix,this.version=parseInt(e.version||1,10)}ztt(xi,Jae);xi.prototype.type="level-js";xi.prototype._open=function(t,e){let r=indexedDB.open(this.prefix+this.location,this.version);r.onerror=function(){e(r.error||new Error("unknown error"))},r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=i=>{let n=i.target.result;n.objectStoreNames.contains(this.location)||n.createObjectStore(this.location)}};xi.prototype.store=function(t){return this.db.transaction([this.location],t).objectStore(this.location)};xi.prototype.await=function(t,e){let r=t.transaction;r.onabort=function(){e(r.error||new Error("aborted by user"))},r.oncomplete=function(){e(null,t.result)}};xi.prototype._get=function(t,e,r){let i=this.store("readonly"),n;try{n=i.get(t)}catch(s){return this._nextTick(r,s)}this.await(n,function(s,o){if(s)return r(s);if(o===void 0)return r(new Error("NotFound"));r(null,kI(o,e.asBuffer))})};xi.prototype._del=function(t,e,r){let i=this.store("readwrite"),n;try{n=i.delete(t)}catch(s){return this._nextTick(r,s)}this.await(n,r)};xi.prototype._put=function(t,e,r,i){let n=this.store("readwrite"),s;try{s=n.put(e,t)}catch(o){return this._nextTick(i,o)}this.await(s,i)};xi.prototype._serializeKey=function(t){return ece(t,this.supports.bufferKeys)};xi.prototype._serializeValue=function(t){return ece(t,!0)};xi.prototype._iterator=function(t){return new Htt(this,this.location,t)};xi.prototype._batch=function(t,e,r){if(t.length===0)return this._nextTick(r);let i=this.store("readwrite"),n=i.transaction,s=0,o;n.onabort=function(){r(o||n.error||new Error("aborted by user"))},n.oncomplete=function(){r()};function a(){let c=t[s++],u=c.key,f;try{f=c.type==="del"?i.delete(u):i.put(c.value,u)}catch(d){o=d,n.abort();return}s<t.length&&(f.onsuccess=a)}a()};xi.prototype._clear=function(t,e){let r,i;try{r=Wtt(t)}catch(n){return this._nextTick(e)}if(t.limit>=0)return Gtt(this,this.location,r,t,e);try{let n=this.store("readwrite");i=r?n.delete(r):n.clear()}catch(n){return this._nextTick(e,n)}this.await(i,e)};xi.prototype._close=function(t){this.db.close(),this._nextTick(t)};xi.prototype.upgrade=function(t){if(this.status!=="open")return this._nextTick(t,new Error("cannot upgrade() before open()"));let e=this.iterator(),r={},i=this;e._deserializeKey=e._deserializeValue=a,n();function n(c){if(c)return o(c);e.next(s)}function s(c,u,f){if(c||u===void 0)return o(c);let d=i._serializeKey(kI(u,!0)),h=i._serializeValue(kI(f,!0));i._batch([{type:"del",key:u},{type:"put",key:d,value:h}],r,n)}function o(c){e.end(function(u){t(c||u)})}function a(c){return c}};xi.destroy=function(t,e,r){typeof e=="function"&&(r=e,e=tce);let i=indexedDB.deleteDatabase(e+t);i.onsuccess=function(){r()},i.onerror=function(n){r(n)}}});var sce=p((rqt,nce)=>{l();nce.exports=Mae()(ice())});var fce=p((iqt,uce)=>{l();"use strict";var{Key:Ytt,Errors:Ug,Adapter:Xtt,utils:{sortAll:oce}}=Ut(),n8=Va(),Qtt=Mo(),ace=p0(),cce=class extends Xtt{constructor(e,r){super();this.path=e,this.opts=r,r&&r.db?(this.database=r.db,delete r.db):this.database=sce()}_initDb(){return new Promise((e,r)=>{this.db=this.database(this.path,{...this.opts,valueEncoding:"binary",compression:!1},i=>{if(i)return r(i);e(this.db)})})}async open(){try{this.db?await this.db.open():this.db=await this._initDb()}catch(e){throw Ug.dbOpenFailedError(e)}}async put(e,r){try{await this.db.put(e.toString(),r)}catch(i){throw Ug.dbWriteFailedError(i)}}async get(e){let r;try{r=await this.db.get(e.toString())}catch(i){throw i.notFound?Ug.notFoundError(i):Ug.dbWriteFailedError(i)}return r}async has(e){try{await this.db.get(e.toString())}catch(r){if(r.notFound)return!1;throw r}return!0}async delete(e){try{await this.db.del(e.toString())}catch(r){throw Ug.dbDeleteFailedError(r)}}close(){return this.db&&this.db.close()}batch(){let e=[];return{put:(r,i)=>{e.push({type:"put",key:r.toString(),value:i})},delete:r=>{e.push({type:"del",key:r.toString()})},commit:()=>this.db.batch(e)}}query(e){let r=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(r=e.filters.reduce((s,o)=>n8(s,o),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((s,o)=>oce(s,o),r));let{offset:i,limit:n}=e;if(i){let s=0;r=n8(r,()=>s++>=i)}return n&&(r=ace(r,n)),r}queryKeys(e){let r=Qtt(this._query({values:!1,prefix:e.prefix}),({key:s})=>s);Array.isArray(e.filters)&&(r=e.filters.reduce((s,o)=>n8(s,o),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((s,o)=>oce(s,o),r));let{offset:i,limit:n}=e;if(i){let s=0;r=n8(r,()=>s++>=i)}return n&&(r=ace(r,n)),r}_query(e){let r={keys:!0,keyAsBuffer:!0,values:e.values};if(e.prefix!=null){let i=e.prefix.toString();r.gte=i,r.lt=i+"\xFF"}return Ztt(this.db.iterator(r))}};function Ztt(t){return{[Symbol.asyncIterator](){return{next:()=>new Promise((e,r)=>{t.next((i,n,s)=>{if(i)return r(i);if(n==null)return t.end(o=>{if(o)return r(o);e({done:!0,value:void 0})});e({done:!1,value:{key:new Ytt(n,!1),value:s}})})}),return:()=>new Promise((e,r)=>{t.end(i=>{if(i)return r(i);e({done:!0,value:void 0})})})}}}}uce.exports=cce});var hce=p((nqt,dce)=>{l();"use strict";function lce(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Jtt(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return lce(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),lce(new n,r)}}dce.exports=Jtt});var qI=p((sqt,mce)=>{l();"use strict";var pce=Ka(),w1=Va(),yce=p0(),ert=h0(),gce=(t,e)=>async function*(){yield*(await ert(t)).sort(e)}(),bce=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,r,i){return Promise.reject(new Error(".put is not implemented"))}get(e,r){return Promise.reject(new Error(".get is not implemented"))}has(e,r){return Promise.reject(new Error(".has is not implemented"))}delete(e,r){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,r={}){for await(let{key:i,value:n}of e)await this.put(i,n,r),yield{key:i,value:n}}async*getMany(e,r={}){for await(let i of e)yield this.get(i,r)}async*deleteMany(e,r={}){for await(let i of e)await this.delete(i,r),yield i}batch(){let e=[],r=[];return{put(i,n){e.push({key:i,value:n})},delete(i){r.push(i)},commit:async i=>{await pce(this.putMany(e,i)),e=[],await pce(this.deleteMany(r,i)),r=[]}}}async*_all(e,r){throw new Error("._all is not implemented")}async*_allKeys(e,r){throw new Error("._allKeys is not implemented")}query(e,r){let i=this._all(e,r);if(e.prefix!=null&&(i=w1(i,n=>n.key.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(i=e.filters.reduce((n,s)=>w1(n,s),i)),Array.isArray(e.orders)&&(i=e.orders.reduce((n,s)=>gce(n,s),i)),e.offset!=null){let n=0;i=w1(i,()=>n++>=(e.offset||0))}return e.limit!=null&&(i=yce(i,e.limit)),i}queryKeys(e,r){let i=this._allKeys(e,r);if(e.prefix!=null&&(i=w1(i,n=>n.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(i=e.filters.reduce((n,s)=>w1(n,s),i)),Array.isArray(e.orders)&&(i=e.orders.reduce((n,s)=>gce(n,s),i)),e.offset!=null){let n=0;i=w1(i,()=>n++>=e.offset)}return e.limit!=null&&(i=yce(i,e.limit)),i}};mce.exports=bce});var _ce=p((oqt,wce)=>{l();"use strict";function vce(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function trt(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return vce(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),vce(new n,r)}}wce.exports=trt});var Sce=p((aqt,Ece)=>{l();"use strict";var rrt=_ce();function irt(t){return t=t||new Error("Not Found"),rrt(t,"ERR_NOT_FOUND")}Ece.exports={notFoundError:irt}});var Pce=p((cqt,Rce)=>{l();"use strict";var nrt=qI(),{base32:_1}=(an(),on),xce=(Os(),Eo),{CID:Ace}=(Ae(),De),Ice=(An(),Ln),srt=Sce(),Tce=class extends nrt{constructor(){super();this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,r){this.data[_1.encode(e.multihash.bytes)]=r}async get(e){if(!await this.has(e))throw srt.notFoundError();return this.data[_1.encode(e.multihash.bytes)]}async has(e){return this.data[_1.encode(e.multihash.bytes)]!==void 0}async delete(e){delete this.data[_1.encode(e.multihash.bytes)]}async*_all(){yield*Object.entries(this.data).map(([e,r])=>({key:Ace.createV1(xce.code,Ice.decode(_1.decode(e))),value:r}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>Ace.createV1(xce.code,Ice.decode(_1.decode(e))))}};Rce.exports=Tce});var s8=p((uqt,Cce)=>{l();"use strict";var ort=qI(),art=Pce();Cce.exports={BlockstoreAdapter:ort,MemoryBlockstore:art}});var Mce=p((fqt,Bce)=>{l();"use strict";var Oce=Ka(),kce=Ha(),{Key:crt}=Ut(),{CID:qce}=(Ae(),De),urt=(Os(),Eo),frt=(An(),Ln),{base32:Fg,base32pad:lrt}=(an(),on),{base58btc:Dce}=(ti(),ei),drt=hce(),{BlockstoreAdapter:hrt}=s8();function E1(t){let e=qce.asCID(t);if(!e)throw drt(new Error("Not a valid cid"),"ERR_INVALID_CID");return new crt("/"+Fg.encode(e.multihash.bytes).slice(1).toUpperCase(),!1)}function Mf(t){return qce.createV1(urt.code,frt.decode(Fg.decode("b"+t.toString().slice(1).toLowerCase())))}function DI(t){let e=t.substring(0,1);if(e==="/")return DI(t.substring(1));let r;e.toLowerCase()==="b"?r=s=>Fg.decode(s.toLowerCase()).subarray(2):e.toLowerCase()==="c"?r=s=>lrt.decode(s.toLowerCase()).subarray(2):e==="z"?r=s=>Dce.decode(s).subarray(2):e==="Q"?r=s=>Dce.decode("z"+s):r=s=>Fg.decode("b"+s.toLowerCase()).subarray(2);let i;for(let s=1;s<t.length;s++)try{i=r(t.substring(0,s))}catch(o){if(o.message!=="Unexpected end of data")throw o}let n="/C";return i&&(n=`/${Fg.encode(i).slice(1,-1).toUpperCase()||"C"}`),n}function prt(t){return{...t,prefix:t.prefix?DI(t.prefix):void 0,filters:t.filters?t.filters.map(e=>r=>e({key:Mf(r.key),value:r.value})):void 0,orders:t.orders?t.orders.map(e=>(r,i)=>e({key:Mf(r.key),value:r.value},{key:Mf(i.key),value:i.value})):void 0}}function yrt(t){return{...t,prefix:t.prefix?DI(t.prefix):void 0,filters:t.filters?t.filters.map(e=>r=>e(Mf(r))):void 0,orders:t.orders?t.orders.map(e=>(r,i)=>e(Mf(r),Mf(i))):void 0}}var Nce=class extends hrt{constructor(e){super();this.child=e}open(){return this.child.open()}close(){return this.child.close()}async*query(e,r){for await(let{key:i,value:n}of this.child.query(prt(e),r))yield{key:Mf(i),value:n}}async*queryKeys(e,r){for await(let i of this.child.queryKeys(yrt(e),r))yield Mf(i)}async get(e,r){return this.child.get(E1(e),r)}async*getMany(e,r){for await(let i of e)yield this.get(i,r)}async put(e,r,i){await this.child.put(E1(e),r,i)}async*putMany(e,r){let i=kce();(process&&process.nextTick?process.nextTick:setImmediate)(async()=>{try{let s=this.child;await Oce(this.child.putMany(async function*(){for await(let o of e){let a=E1(o.key);await s.has(a,r)||(yield{key:a,value:o.value}),i.push(o)}}())),i.end()}catch(s){i.end(s)}}),yield*i}has(e,r){return this.child.has(E1(e),r)}delete(e,r){return this.child.delete(E1(e),r)}deleteMany(e,r){let i=kce();return Oce(this.child.deleteMany(async function*(){for await(let n of e)yield E1(n),i.push(n);i.end()}(),r)).catch(n=>{i.end(n)}),i}};Bce.exports=Nce});var Uce=p((lqt,Lce)=>{l();"use strict";var{createRepo:grt}=Fl(),jg=fce(),brt=Mce();Lce.exports=(t,e,r)=>{let i=r.path||"ipfs";return grt(i,n=>e.getCodec(n),{root:new jg(i,{prefix:"",version:2}),blocks:new brt(new jg(`${i}/blocks`,{prefix:"",version:2})),datastore:new jg(`${i}/datastore`,{prefix:"",version:2}),keys:new jg(`${i}/keys`,{prefix:"",version:2}),pins:new jg(`${i}/pins`,{prefix:"",version:2})},{autoMigrate:r.autoMigrate,onMigrationProgress:r.onMigrationProgress||t})}});var NI=p((dqt,jce)=>{l();"use strict";function Fce(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function mrt(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Fce(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),Fce(new n,r)}}jce.exports=mrt});var BI=p((hqt,Hce)=>{l();"use strict";var Kce=()=>{},Vce=Symbol.for("@libp2p/js-interfaces/topology"),zce=class{constructor({min:e=0,max:r=1/0,handlers:i={}}){this.min=e,this.max=r,this._onConnect=i.onConnect||Kce,this._onDisconnect=i.onDisconnect||Kce,this.peers=new Set}get[Symbol.toStringTag](){return"Topology"}get[Vce](){return!0}static isTopology(e){return Boolean(e&&e[Vce])}set registrar(e){this._registrar=e}disconnect(e){this._onDisconnect(e)}};Hce.exports=zce});var o8=p((pqt,Wce)=>{l();"use strict";var vrt=BI(),$ce=Symbol.for("@libp2p/js-interfaces/topology/multicodec-topology"),Gce=class extends vrt{constructor({min:e,max:r,multicodecs:i,handlers:n}){super({min:e,max:r,handlers:n});if(!i)throw new Error("one or more multicodec should be provided");if(!n)throw new Error("the handlers should be provided");if(typeof n.onConnect!="function")throw new Error("the 'onConnect' handler must be provided");if(typeof n.onDisconnect!="function")throw new Error("the 'onDisconnect' handler must be provided");this.multicodecs=Array.isArray(i)?i:[i],this._registrar=void 0,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerConnect=this._onPeerConnect.bind(this)}get[Symbol.toStringTag](){return"Topology"}get[$ce](){return!0}static isMulticodecTopology(e){return Boolean(e&&e[$ce])}set registrar(e){this._registrar=e,this._registrar.peerStore.on("change:protocols",this._onProtocolChange),this._registrar.connectionManager.on("peer:connect",this._onPeerConnect),this._updatePeers(this._registrar.peerStore.peers.values())}_updatePeers(e){for(let{id:r,protocols:i}of e)if(this.multicodecs.filter(n=>i.includes(n)).length){this.peers.add(r.toB58String());let n=this._registrar.getConnection(r);n&&this._onConnect(r,n)}else this.peers.delete(r.toB58String())}_onProtocolChange({peerId:e,protocols:r}){let i=this.peers.has(e.toB58String()),n=r.filter(s=>this.multicodecs.includes(s));i&&n.length===0&&this._onDisconnect(e);for(let s of r)if(this.multicodecs.includes(s)){let o=this._registrar.peerStore.get(e);this._updatePeers([o]);return}}_onPeerConnect(e){let r=e.remotePeer,i=this._registrar.peerStore.protoBook.get(r);!i||this.multicodecs.find(n=>i.includes(n))&&(this.peers.add(r.toB58String()),this._onConnect(r,e))}};Wce.exports=Gce});var a8=p(Yce=>{l();"use strict";Yce.codes={ERR_INVALID_SIGNATURE_POLICY:"ERR_INVALID_SIGNATURE_POLICY",ERR_UNHANDLED_SIGNATURE_POLICY:"ERR_UNHANDLED_SIGNATURE_POLICY",ERR_MISSING_SIGNATURE:"ERR_MISSING_SIGNATURE",ERR_MISSING_SEQNO:"ERR_MISSING_SEQNO",ERR_INVALID_SIGNATURE:"ERR_INVALID_SIGNATURE",ERR_UNEXPECTED_FROM:"ERR_UNEXPECTED_FROM",ERR_UNEXPECTED_SIGNATURE:"ERR_UNEXPECTED_SIGNATURE",ERR_UNEXPECTED_KEY:"ERR_UNEXPECTED_KEY",ERR_UNEXPECTED_SEQNO:"ERR_UNEXPECTED_SEQNO"}});var LI=p((gqt,Xce)=>{l();"use strict";var Lf=qi(),S1=Lf.Reader,MI=Lf.Writer,St=Lf.util,Ai=Lf.roots["libp2p-pubsub-rpc"]||(Lf.roots["libp2p-pubsub-rpc"]={});Ai.RPC=function(){function t(e){if(this.subscriptions=[],this.msgs=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.subscriptions=St.emptyArray,t.prototype.msgs=St.emptyArray,t.encode=function(r,i){if(i||(i=MI.create()),r.subscriptions!=null&&r.subscriptions.length)for(var n=0;n<r.subscriptions.length;++n)Ai.RPC.SubOpts.encode(r.subscriptions[n],i.uint32(10).fork()).ldelim();if(r.msgs!=null&&r.msgs.length)for(var n=0;n<r.msgs.length;++n)Ai.RPC.Message.encode(r.msgs[n],i.uint32(18).fork()).ldelim();return i},t.decode=function(r,i){r instanceof S1||(r=S1.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Ai.RPC;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.subscriptions&&s.subscriptions.length||(s.subscriptions=[]),s.subscriptions.push(Ai.RPC.SubOpts.decode(r,r.uint32()));break;case 2:s.msgs&&s.msgs.length||(s.msgs=[]),s.msgs.push(Ai.RPC.Message.decode(r,r.uint32()));break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof Ai.RPC)return r;var i=new Ai.RPC;if(r.subscriptions){if(!Array.isArray(r.subscriptions))throw TypeError(".RPC.subscriptions: array expected");i.subscriptions=[];for(var n=0;n<r.subscriptions.length;++n){if(typeof r.subscriptions[n]!="object")throw TypeError(".RPC.subscriptions: object expected");i.subscriptions[n]=Ai.RPC.SubOpts.fromObject(r.subscriptions[n])}}if(r.msgs){if(!Array.isArray(r.msgs))throw TypeError(".RPC.msgs: array expected");i.msgs=[];for(var n=0;n<r.msgs.length;++n){if(typeof r.msgs[n]!="object")throw TypeError(".RPC.msgs: object expected");i.msgs[n]=Ai.RPC.Message.fromObject(r.msgs[n])}}return i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.subscriptions=[],n.msgs=[]),r.subscriptions&&r.subscriptions.length){n.subscriptions=[];for(var s=0;s<r.subscriptions.length;++s)n.subscriptions[s]=Ai.RPC.SubOpts.toObject(r.subscriptions[s],i)}if(r.msgs&&r.msgs.length){n.msgs=[];for(var s=0;s<r.msgs.length;++s)n.msgs[s]=Ai.RPC.Message.toObject(r.msgs[s],i)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Lf.util.toJSONOptions)},t.SubOpts=function(){function e(i){if(i)for(var n=Object.keys(i),s=0;s<n.length;++s)i[n[s]]!=null&&(this[n[s]]=i[n[s]])}e.prototype.subscribe=null,e.prototype.topicID=null;var r;return Object.defineProperty(e.prototype,"_subscribe",{get:St.oneOfGetter(r=["subscribe"]),set:St.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_topicID",{get:St.oneOfGetter(r=["topicID"]),set:St.oneOfSetter(r)}),e.encode=function(n,s){return s||(s=MI.create()),n.subscribe!=null&&Object.hasOwnProperty.call(n,"subscribe")&&s.uint32(8).bool(n.subscribe),n.topicID!=null&&Object.hasOwnProperty.call(n,"topicID")&&s.uint32(18).string(n.topicID),s},e.decode=function(n,s){n instanceof S1||(n=S1.create(n));for(var o=s===void 0?n.len:n.pos+s,a=new Ai.RPC.SubOpts;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.subscribe=n.bool();break;case 2:a.topicID=n.string();break;default:n.skipType(c&7);break}}return a},e.fromObject=function(n){if(n instanceof Ai.RPC.SubOpts)return n;var s=new Ai.RPC.SubOpts;return n.subscribe!=null&&(s.subscribe=Boolean(n.subscribe)),n.topicID!=null&&(s.topicID=String(n.topicID)),s},e.toObject=function(n,s){s||(s={});var o={};return n.subscribe!=null&&n.hasOwnProperty("subscribe")&&(o.subscribe=n.subscribe,s.oneofs&&(o._subscribe="subscribe")),n.topicID!=null&&n.hasOwnProperty("topicID")&&(o.topicID=n.topicID,s.oneofs&&(o._topicID="topicID")),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Lf.util.toJSONOptions)},e}(),t.Message=function(){function e(i){if(this.topicIDs=[],i)for(var n=Object.keys(i),s=0;s<n.length;++s)i[n[s]]!=null&&(this[n[s]]=i[n[s]])}e.prototype.from=null,e.prototype.data=null,e.prototype.seqno=null,e.prototype.topicIDs=St.emptyArray,e.prototype.signature=null,e.prototype.key=null;var r;return Object.defineProperty(e.prototype,"_from",{get:St.oneOfGetter(r=["from"]),set:St.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_data",{get:St.oneOfGetter(r=["data"]),set:St.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_seqno",{get:St.oneOfGetter(r=["seqno"]),set:St.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_signature",{get:St.oneOfGetter(r=["signature"]),set:St.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_key",{get:St.oneOfGetter(r=["key"]),set:St.oneOfSetter(r)}),e.encode=function(n,s){if(s||(s=MI.create()),n.from!=null&&Object.hasOwnProperty.call(n,"from")&&s.uint32(10).bytes(n.from),n.data!=null&&Object.hasOwnProperty.call(n,"data")&&s.uint32(18).bytes(n.data),n.seqno!=null&&Object.hasOwnProperty.call(n,"seqno")&&s.uint32(26).bytes(n.seqno),n.topicIDs!=null&&n.topicIDs.length)for(var o=0;o<n.topicIDs.length;++o)s.uint32(34).string(n.topicIDs[o]);return n.signature!=null&&Object.hasOwnProperty.call(n,"signature")&&s.uint32(42).bytes(n.signature),n.key!=null&&Object.hasOwnProperty.call(n,"key")&&s.uint32(50).bytes(n.key),s},e.decode=function(n,s){n instanceof S1||(n=S1.create(n));for(var o=s===void 0?n.len:n.pos+s,a=new Ai.RPC.Message;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.from=n.bytes();break;case 2:a.data=n.bytes();break;case 3:a.seqno=n.bytes();break;case 4:a.topicIDs&&a.topicIDs.length||(a.topicIDs=[]),a.topicIDs.push(n.string());break;case 5:a.signature=n.bytes();break;case 6:a.key=n.bytes();break;default:n.skipType(c&7);break}}return a},e.fromObject=function(n){if(n instanceof Ai.RPC.Message)return n;var s=new Ai.RPC.Message;if(n.from!=null&&(typeof n.from=="string"?St.base64.decode(n.from,s.from=St.newBuffer(St.base64.length(n.from)),0):n.from.length&&(s.from=n.from)),n.data!=null&&(typeof n.data=="string"?St.base64.decode(n.data,s.data=St.newBuffer(St.base64.length(n.data)),0):n.data.length&&(s.data=n.data)),n.seqno!=null&&(typeof n.seqno=="string"?St.base64.decode(n.seqno,s.seqno=St.newBuffer(St.base64.length(n.seqno)),0):n.seqno.length&&(s.seqno=n.seqno)),n.topicIDs){if(!Array.isArray(n.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");s.topicIDs=[];for(var o=0;o<n.topicIDs.length;++o)s.topicIDs[o]=String(n.topicIDs[o])}return n.signature!=null&&(typeof n.signature=="string"?St.base64.decode(n.signature,s.signature=St.newBuffer(St.base64.length(n.signature)),0):n.signature.length&&(s.signature=n.signature)),n.key!=null&&(typeof n.key=="string"?St.base64.decode(n.key,s.key=St.newBuffer(St.base64.length(n.key)),0):n.key.length&&(s.key=n.key)),s},e.toObject=function(n,s){s||(s={});var o={};if((s.arrays||s.defaults)&&(o.topicIDs=[]),n.from!=null&&n.hasOwnProperty("from")&&(o.from=s.bytes===String?St.base64.encode(n.from,0,n.from.length):s.bytes===Array?Array.prototype.slice.call(n.from):n.from,s.oneofs&&(o._from="from")),n.data!=null&&n.hasOwnProperty("data")&&(o.data=s.bytes===String?St.base64.encode(n.data,0,n.data.length):s.bytes===Array?Array.prototype.slice.call(n.data):n.data,s.oneofs&&(o._data="data")),n.seqno!=null&&n.hasOwnProperty("seqno")&&(o.seqno=s.bytes===String?St.base64.encode(n.seqno,0,n.seqno.length):s.bytes===Array?Array.prototype.slice.call(n.seqno):n.seqno,s.oneofs&&(o._seqno="seqno")),n.topicIDs&&n.topicIDs.length){o.topicIDs=[];for(var a=0;a<n.topicIDs.length;++a)o.topicIDs[a]=n.topicIDs[a]}return n.signature!=null&&n.hasOwnProperty("signature")&&(o.signature=s.bytes===String?St.base64.encode(n.signature,0,n.signature.length):s.bytes===Array?Array.prototype.slice.call(n.signature):n.signature,s.oneofs&&(o._signature="signature")),n.key!=null&&n.hasOwnProperty("key")&&(o.key=s.bytes===String?St.base64.encode(n.key,0,n.key.length):s.bytes===Array?Array.prototype.slice.call(n.key):n.key,s.oneofs&&(o._key="key")),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Lf.util.toJSONOptions)},e}(),t}();Xce.exports=Ai});var UI=p((bqt,Jce)=>{l();"use strict";var Qce=as(),{Buffer:wrt}=Vt(),Zce=(t,e,r)=>{let i=Qce.encode(t,e,r);return Zce.bytes=Qce.encode.bytes,e||wrt.from(i)};Jce.exports=Zce});var sue=p((mqt,c8)=>{l();"use strict";var{Buffer:eue}=Vt(),tue=bn(),rue=UI(),FI=8,iue=10*1024;function nue(t){t=t||{};let e=Math.max(t.poolSize||iue,t.minPoolSize||FI),r=t.lengthEncoder||rue;return async function*(n){let s=eue.alloc(e),o=0;for await(let a of n){r(a.length,s,o);let c=s.slice(o,o+r.bytes);o+=r.bytes,s.length-o<FI&&(s=eue.alloc(e),o=0),yield new tue().append(c).append(a)}}}nue.single=(t,e)=>{e=e||{};let r=e.lengthEncoder||rue;return new tue([r(t.length),t.slice()])};c8.exports=nue;c8.exports.MIN_POOL_SIZE=FI;c8.exports.DEFAULT_POOL_SIZE=iue});var jI=p((vqt,cue)=>{l();"use strict";var oue=as(),{Buffer:_rt}=Vt(),Ert=t=>new Proxy({},{get:(e,r)=>r[0]==="l"?t[r]:t.get(parseInt(r))}),aue=t=>{let e=oue.decode(_rt.isBuffer(t)?t:Ert(t));return aue.bytes=oue.decode.bytes,e};cue.exports=aue});var due=p((wqt,u8)=>{l();"use strict";var{Buffer:Srt}=Vt(),KI=bn(),xrt=jI(),uue=8,fue=1024*1024*4,lue=Srt.alloc(0),Uf={LENGTH:"readLength",DATA:"readData"},Art={[Uf.LENGTH]:(t,e,r,i)=>{e=e.append(t);let n;try{n=i.lengthDecoder(e)}catch(s){if(e.length>i.maxLengthLength)throw Object.assign(s,{message:"message length too long",code:"ERR_MSG_LENGTH_TOO_LONG"});if(s instanceof RangeError)return{mode:Uf.LENGTH,buffer:e,chunk:void 0,state:void 0,data:void 0};throw s}if(n>i.maxDataLength)throw Object.assign(new Error("message data too long"),{code:"ERR_MSG_DATA_TOO_LONG"});return t=e.shallowSlice(i.lengthDecoder.bytes),e=new KI,i.onLength&&i.onLength(n),n<=0?(i.onData&&i.onData(lue),{mode:Uf.LENGTH,chunk:t,buffer:e,data:lue}):{mode:Uf.DATA,chunk:t,buffer:e,state:{dataLength:n},data:void 0}},[Uf.DATA]:(t,e,r,i)=>{if(e=e.append(t),!r)throw new Error("state is required");if(e.length<r.dataLength)return{mode:Uf.DATA,buffer:e,state:r,chunk:void 0,data:void 0};let{dataLength:n}=r,s=e.shallowSlice(0,n),o=e.length>n?e.shallowSlice(n):void 0;return e=new KI,i.onData&&i.onData(s),{mode:Uf.LENGTH,chunk:o,buffer:e,state:void 0,data:s}}};function VI(t){t=t||{};let e={lengthDecoder:t.lengthDecoder||xrt,maxLengthLength:t.maxLengthLength||uue,maxDataLength:t.maxDataLength||fue,onLength:t.onLength,onData:t.onData};return async function*(i){let n=new KI,s=Uf.LENGTH,o;for await(let a of i){let c=a;for(;c;){let u=Art[s](c,n,o,e);s=u.mode,c=u.chunk,n=u.buffer,o=u.state,u.data&&(yield u.data)}}if(n.length)throw Object.assign(new Error("unexpected end of input"),{code:"ERR_UNEXPECTED_EOF"})}}VI.fromReader=(t,e)=>{let r=1,i={[Symbol.asyncIterator](){return this},next:async()=>{try{return await t.next(r)}catch(s){if(s.code==="ERR_UNDER_READ")return{done:!0,value:null};throw s}finally{r=1}}};return VI({...e||{},onLength:s=>{r=s}})(i)};u8.exports=VI;u8.exports.MAX_LENGTH_LENGTH=uue;u8.exports.MAX_DATA_LENGTH=fue});var yue=p((_qt,pue)=>{l();"use strict";var{Buffer:Irt}=Vt(),hue=(t,e,r)=>(e=e||Irt.allocUnsafe(4),e.writeInt32BE(t,r),e);hue.bytes=4;pue.exports=hue});var mue=p((Eqt,bue)=>{l();"use strict";var gue=t=>{if(t.length<4)throw RangeError("Could not decode int32BE");return t.readInt32BE(0)};gue.bytes=4;bue.exports=gue});var Xo=p(Ad=>{l();"use strict";Ad.encode=sue();Ad.decode=due();Ad.varintEncode=UI();Ad.varintDecode=jI();Ad.int32BEEncode=yue();Ad.int32BEDecode=mue()});var f8=p((xqt,vue)=>{l();vue.exports=function(e){if(e){if(typeof e[Symbol.iterator]=="function")return e[Symbol.iterator]();if(typeof e[Symbol.asyncIterator]=="function")return e[Symbol.asyncIterator]();if(typeof e.next=="function")return e}throw new Error("argument is not an iterator or iterable")}});var _ue=p((Iqt,wue)=>{l();wue.exports=class extends Error{constructor(e,r){super(e||"The operation was aborted");this.type="aborted",this.code=r||"ABORT_ERR"}}});var nc=p((Tqt,Id)=>{l();var Trt=f8(),zI=_ue(),Eue=(t,e,r)=>HI(t,Array.isArray(e)?e:[{signal:e,options:r}]),HI=(t,e)=>{t=Trt(t),e=e.map(({signal:i,options:n})=>({signal:i,options:n||{}}));async function*r(){let i,n=()=>{i&&i()};for(let{signal:s}of e)s.addEventListener("abort",n);for(;;){let s;try{for(let{signal:a,options:c}of e)if(a.aborted){let{abortMessage:u,abortCode:f}=c;throw new zI(u,f)}let o=new Promise((a,c)=>{i=()=>{let{options:u}=e.find(({signal:h})=>h.aborted),{abortMessage:f,abortCode:d}=u;c(new zI(f,d))}});s=await Promise.race([o,t.next()]),i=null}catch(o){for(let{signal:u}of e)u.removeEventListener("abort",n);let a=e.find(({signal:u})=>u.aborted),c=o.type==="aborted"&&a;if(c&&a.options.onAbort&&await a.options.onAbort(t),typeof t.return=="function"&&await t.return(),c&&a.options.returnOnAbort)return;throw o}if(s.done)break;yield s.value}for(let{signal:s}of e)s.removeEventListener("abort",n)}return r()},Sue=(t,e,r)=>xue(t,Array.isArray(e)?e:[{signal:e,options:r}]),xue=(t,e)=>r=>t(HI(r,e)),Rrt=(t,e,r)=>Prt(t,Array.isArray(e)?e:[{signal:e,options:r}]),Prt=(t,e)=>({sink:xue(t.sink,e),source:HI(t.source,e)});Id.exports=Eue;Id.exports.AbortError=zI;Id.exports.source=Eue;Id.exports.sink=Sue;Id.exports.transform=Sue;Id.exports.duplex=Rrt});var Cue=p((Rqt,Pue)=>{l();"use strict";var Aue=be(),Crt=Object.assign(Aue("libp2p-pubsub:peer-streams"),{error:Aue("libp2p-pubsub:peer-streams:err")}),{EventEmitter:Ort}=gr(),Iue=Xo(),krt=Ha(),{pipe:Tue}=Ir(),{source:qrt}=nc(),Drt=fh().default,Rue=class extends Ort{constructor({id:e,protocol:r}){super();this.id=e,this.protocol=r,this._rawOutboundStream=null,this._rawInboundStream=null,this._inboundAbortController=new Drt,this.outboundStream=null,this.inboundStream=null}get isReadable(){return Boolean(this.inboundStream)}get isWritable(){return Boolean(this.outboundStream)}write(e){if(!this.outboundStream){let r=this.id.toB58String();throw new Error("No writable connection to "+r)}this.outboundStream.push(e)}attachInboundStream(e){return this._rawInboundStream=e,this.inboundStream=qrt(Tue(this._rawInboundStream,Iue.decode()),this._inboundAbortController.signal,{returnOnAbort:!0}),this.emit("stream:inbound"),this.inboundStream}async attachOutboundStream(e){let r=this.outboundStream;this.outboundStream&&await this.outboundStream.end(),this._rawOutboundStream=e,this.outboundStream=krt({onEnd:i=>{this._rawOutboundStream&&this._rawOutboundStream.reset&&this._rawOutboundStream.reset(),this._rawOutboundStream=null,this.outboundStream=null,i&&this.emit("close")}}),Tue(this.outboundStream,Iue.encode(),this._rawOutboundStream).catch(i=>{Crt.error(i)}),r||this.emit("stream:outbound")}close(){this.outboundStream&&this.outboundStream.end(),this.inboundStream&&this._inboundAbortController.abort(),this._rawOutboundStream=null,this.outboundStream=null,this._rawInboundStream=null,this.inboundStream=null,this.emit("close")}};Pue.exports=Rue});var kue=p(Oue=>{l();"use strict";var Nrt={StrictSign:"StrictSign",StrictNoSign:"StrictNoSign"};Oue.SignaturePolicy=Nrt});var $I=p((Cqt,Nue)=>{l();"use strict";var Brt=E2(),{toString:Mrt}=(et(),Je),{fromString:que}=(ut(),lt),Due=tt(),{sha256:Lrt}=(ii(),fi),Urt=()=>Brt(8),Frt=(t,e)=>{let r;t instanceof Uint8Array?r=Due.createFromBytes(t).id:r=Due.parse(t).id;let i=new Uint8Array(r.length+e.length);return i.set(r,0),i.set(e,r.length),i},jrt=t=>Lrt.encode(t),Krt=(t,e)=>{let r;Array.isArray(e)?r=i=>e.indexOf(i)>-1:r=i=>e.has(i);for(let i of t)if(r(i))return!0;return!1},Vrt=t=>Array.isArray(t)?t:[t],zrt=(t,e)=>{let r=Object.assign({},t);return t.from instanceof Uint8Array&&(r.from=Mrt(t.from,"base58btc")),e&&(r.receivedFrom=e),r},Hrt=t=>{let e=Object.assign({},t);return typeof t.from=="string"&&(e.from=que(t.from,"base58btc")),typeof t.data=="string"&&(e.data=que(t.data)),e};Nue.exports={randomSeqno:Urt,msgId:Frt,noSignMsgId:jrt,anyMatch:Krt,ensureArray:Vrt,normalizeInRpcMessage:zrt,normalizeOutRpcMessage:Hrt}});var Fue=p((Oqt,Uue)=>{l();"use strict";var GI=tt(),{RPC:Bue}=LI(),{concat:Mue}=(fn(),un),{fromString:$rt}=(ut(),lt),WI=$rt("libp2p-pubsub:"),{normalizeOutRpcMessage:Grt}=$I();async function Wrt(t,e){let r=Mue([WI,Bue.Message.encode(Grt(e)).finish()]),i=await t.privKey.sign(r);return{...e,signature:i,key:t.pubKey.bytes}}async function Yrt(t){if(!t.signature)throw new Error("Message must contain a signature to be verified");if(!t.from)throw new Error("Message must contain a from property to be verified");let e=Mue([WI,Bue.Message.encode({...t,from:GI.createFromB58String(t.from).toBytes(),signature:void 0,key:void 0}).finish()]);return(await Lue(t)).verify(e,t.signature)}async function Lue(t){if(!t.from)throw new Error("Could not get the public key from the originator id");let e=GI.createFromB58String(t.from);if(t.key){let r=await GI.createFromPubKey(t.key);if(r.equals(e))return r.pubKey;throw new Error("Public Key does not match the originator")}else{if(e.pubKey)return e.pubKey;throw new Error("Could not get the public key from the originator id")}}Uue.exports={messagePublicKey:Lue,signMessage:Wrt,SignPrefix:WI,verifySignature:Yrt}});var zue=p((kqt,Vue)=>{l();"use strict";var jue=be(),{EventEmitter:Xrt}=gr(),Jn=NI(),{pipe:Qrt}=Ir(),Zrt=o8(),{codes:Qo}=a8(),{RPC:Kue}=LI(),Jrt=Cue(),{SignaturePolicy:cu}=kue(),Ff=$I(),{signMessage:eit,verifySignature:tit}=Fue(),l8=class extends Xrt{constructor({debugName:e,multicodecs:r,libp2p:i,globalSignaturePolicy:n=cu.StrictSign,canRelayMessage:s=!1,emitSelf:o=!1}){if(typeof e!="string")throw new Error("a debugname `string` is required");if(!r)throw new Error("multicodecs are required");if(!i)throw new Error("libp2p is required");super();if(this.log=Object.assign(jue(e),{err:jue(`${e}:error`)}),this.multicodecs=Ff.ensureArray(r),this._libp2p=i,this.registrar=i.registrar,this.peerId=i.peerId,this.started=!1,this.topics=new Map,this.subscriptions=new Set,this.peers=new Map,!cu[n])throw Jn(new Error("Invalid global signature policy"),Qo.ERR_INVALID_SIGNATURE_POLICY);this.globalSignaturePolicy=n,this.canRelayMessage=s,this.emitSelf=o,this.topicValidators=new Map,this._registrarId=void 0,this._onIncomingStream=this._onIncomingStream.bind(this),this._onPeerConnected=this._onPeerConnected.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this)}start(){if(this.started)return;this.log("starting"),this.registrar.handle(this.multicodecs,this._onIncomingStream);let e=new Zrt({multicodecs:this.multicodecs,handlers:{onConnect:this._onPeerConnected,onDisconnect:this._onPeerDisconnected}});this._registrarId=this.registrar.register(e),this.log("started"),this.started=!0}stop(){!this.started||(this.registrar.unregister(this._registrarId),this.log("stopping"),this.peers.forEach(e=>e.close()),this.peers=new Map,this.subscriptions=new Set,this.started=!1,this.log("stopped"))}_onIncomingStream({protocol:e,stream:r,connection:i}){let n=i.remotePeer,s=n.toB58String(),o=this._addPeer(n,e),a=o.attachInboundStream(r);this._processMessages(s,a,o)}async _onPeerConnected(e,r){let i=e.toB58String();this.log("connected",i);try{let{stream:n,protocol:s}=await r.newStream(this.multicodecs);await this._addPeer(e,s).attachOutboundStream(n)}catch(n){this.log.err(n)}this._sendSubscriptions(i,Array.from(this.subscriptions),!0)}_onPeerDisconnected(e,r){let i=e.toB58String();this.log("connection ended",i,r?r.message:""),this._removePeer(e)}_addPeer(e,r){let i=e.toB58String(),n=this.peers.get(i);if(n)return n;this.log("new peer",i);let s=new Jrt({id:e,protocol:r});return this.peers.set(i,s),s.once("close",()=>this._removePeer(e)),s}_removePeer(e){if(!e)return;let r=e.toB58String(),i=this.peers.get(r);if(!!i){i.removeAllListeners(),i.close(),this.log("delete peer",r),this.peers.delete(r);for(let n of this.topics.values())n.delete(r);return i}}async _processMessages(e,r,i){try{await Qrt(r,async n=>{for await(let s of n){let o=s instanceof Uint8Array?s:s.slice(),a=this._decodeRpc(o);await this._processRpc(e,i,a)}})}catch(n){this._onPeerDisconnected(i.id,n)}}async _processRpc(e,r,i){this.log("rpc from",e);let n=i.subscriptions,s=i.msgs;if(n.length&&(n.forEach(o=>{this._processRpcSubOpt(e,o)}),this.emit("pubsub:subscription-change",r.id,n)),!this._acceptFrom(e))return this.log("received message from unacceptable peer %s",e),!1;if(s.length)for(let o of s){if(!(this.canRelayMessage||o.topicIDs&&o.topicIDs.some(c=>this.subscriptions.has(c)))){this.log("received message we didn't subscribe to. Dropping.");continue}let a=Ff.normalizeInRpcMessage(o,e);await this._processRpcMessage(a)}return!0}_processRpcSubOpt(e,r){let i=r.topicID;if(!i)return;let n=this.topics.get(i);n||(n=new Set,this.topics.set(i,n)),r.subscribe?n.add(e):n.delete(e)}async _processRpcMessage(e){if(!(this.peerId.toB58String()===e.from&&!this.emitSelf)){try{await this.validate(e)}catch(r){this.log("Message is invalid, dropping it. %O",r);return}return this._emitMessage(e),this._publish(Ff.normalizeOutRpcMessage(e))}}_emitMessage(e){e.topicIDs.forEach(r=>{this.subscriptions.has(r)&&this.emit(r,e)})}getMsgId(e){let r=this.globalSignaturePolicy;switch(r){case cu.StrictSign:return Ff.msgId(e.from,e.seqno);case cu.StrictNoSign:return Ff.noSignMsgId(e.data);default:throw Jn(new Error("Cannot get message id: unhandled signature policy: "+r),Qo.ERR_UNHANDLED_SIGNATURE_POLICY)}}_acceptFrom(e){return!0}_decodeRpc(e){return Kue.decode(e)}_encodeRpc(e){return Kue.encode(e).finish()}_sendRpc(e,r){let i=this.peers.get(e);if(!i||!i.isWritable){let n=`Cannot send RPC to ${e} as there is no open stream to it available`;this.log.err(n);return}i.write(this._encodeRpc(r))}_sendSubscriptions(e,r,i){return this._sendRpc(e,{subscriptions:r.map(n=>({topicID:n,subscribe:i}))})}async validate(e){let r=this.globalSignaturePolicy;switch(r){case cu.StrictNoSign:if(e.from)throw Jn(new Error("StrictNoSigning: from should not be present"),Qo.ERR_UNEXPECTED_FROM);if(e.signature)throw Jn(new Error("StrictNoSigning: signature should not be present"),Qo.ERR_UNEXPECTED_SIGNATURE);if(e.key)throw Jn(new Error("StrictNoSigning: key should not be present"),Qo.ERR_UNEXPECTED_KEY);if(e.seqno)throw Jn(new Error("StrictNoSigning: seqno should not be present"),Qo.ERR_UNEXPECTED_SEQNO);break;case cu.StrictSign:if(!e.signature)throw Jn(new Error("StrictSigning: Signing required and no signature was present"),Qo.ERR_MISSING_SIGNATURE);if(!e.seqno)throw Jn(new Error("StrictSigning: Signing required and no seqno was present"),Qo.ERR_MISSING_SEQNO);if(!await tit(e))throw Jn(new Error("StrictSigning: Invalid message signature"),Qo.ERR_INVALID_SIGNATURE);break;default:throw Jn(new Error("Cannot validate message: unhandled signature policy: "+r),Qo.ERR_UNHANDLED_SIGNATURE_POLICY)}for(let i of e.topicIDs){let n=this.topicValidators.get(i);n&&await n(i,e)}}_buildMessage(e){let r=this.globalSignaturePolicy;switch(r){case cu.StrictSign:return e.from=this.peerId.toB58String(),e.seqno=Ff.randomSeqno(),eit(this.peerId,e);case cu.StrictNoSign:return Promise.resolve(e);default:throw Jn(new Error("Cannot build message: unhandled signature policy: "+r),Qo.ERR_UNHANDLED_SIGNATURE_POLICY)}}getSubscribers(e){if(!this.started)throw Jn(new Error("not started yet"),"ERR_NOT_STARTED_YET");if(!e||typeof e!="string")throw Jn(new Error("a string topic must be provided"),"ERR_NOT_VALID_TOPIC");let r=this.topics.get(e);return r?Array.from(r):[]}async publish(e,r){if(!this.started)throw new Error("Pubsub has not started");this.log("publish",e,r);let n={receivedFrom:this.peerId.toB58String(),data:r,topicIDs:[e]},s=await this._buildMessage(n),o=Ff.normalizeInRpcMessage(s);this.emitSelf&&this._emitMessage(o),await this._publish(o)}_publish(e){throw Jn(new Error("publish must be implemented by the subclass"),"ERR_NOT_IMPLEMENTED")}subscribe(e){if(!this.started)throw new Error("Pubsub has not started");this.subscriptions.has(e)||(this.subscriptions.add(e),this.peers.forEach((r,i)=>this._sendSubscriptions(i,[e],!0)))}unsubscribe(e){if(!this.started)throw new Error("Pubsub is not started");this.subscriptions.has(e)&&this.listenerCount(e)===0&&(this.subscriptions.delete(e),this.peers.forEach((r,i)=>this._sendSubscriptions(i,[e],!1)))}getTopics(){if(!this.started)throw new Error("Pubsub is not started");return Array.from(this.subscriptions)}};l8.utils=Ff;l8.SignaturePolicy=cu;Vue.exports=l8});var Hue=p(d8=>{l();"use strict";Object.defineProperty(d8,"__esModule",{value:!0});d8.createGossipRpc=void 0;function rit(t=[],e={}){return{subscriptions:[],msgs:t,control:Object.assign({ihave:[],iwant:[],graft:[],prune:[]},e)}}d8.createGossipRpc=rit});var $ue=p(h8=>{l();"use strict";Object.defineProperty(h8,"__esModule",{value:!0});h8.shuffle=void 0;function iit(t){if(t.length<=1)return t;let e=()=>Math.floor(Math.random()*Math.floor(t.length));for(let r=0;r<t.length;r++){let i=e(),n=t[r];t[r]=t[i],t[i]=n}return t}h8.shuffle=iit});var Td=p(Pe=>{l();"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.ERR_TOPIC_VALIDATOR_IGNORE=Pe.ERR_TOPIC_VALIDATOR_REJECT=Pe.TimeCacheDuration=Pe.GossipsubIWantFollowupTime=Pe.GossipsubMaxIHaveMessages=Pe.GossipsubMaxIHaveLength=Pe.GossipsubGraftFloodThreshold=Pe.GossipsubOpportunisticGraftPeers=Pe.GossipsubOpportunisticGraftTicks=Pe.GossipsubDirectConnectInitialDelay=Pe.GossipsubDirectConnectTicks=Pe.GossipsubConnectionTimeout=Pe.GossipsubMaxPendingConnections=Pe.GossipsubConnectors=Pe.GossipsubPruneBackoffTicks=Pe.GossipsubPruneBackoff=Pe.GossipsubPrunePeers=Pe.GossipsubFanoutTTL=Pe.GossipsubHeartbeatInterval=Pe.GossipsubHeartbeatInitialDelay=Pe.GossipsubGossipRetransmission=Pe.GossipsubGossipFactor=Pe.GossipsubDlazy=Pe.GossipsubHistoryGossip=Pe.GossipsubHistoryLength=Pe.GossipsubDout=Pe.GossipsubDscore=Pe.GossipsubDhi=Pe.GossipsubDlo=Pe.GossipsubD=Pe.GossipsubIDv11=Pe.GossipsubIDv10=Pe.FloodsubID=Pe.minute=Pe.second=void 0;Pe.second=1e3;Pe.minute=60*Pe.second;Pe.FloodsubID="/floodsub/1.0.0";Pe.GossipsubIDv10="/meshsub/1.0.0";Pe.GossipsubIDv11="/meshsub/1.1.0";Pe.GossipsubD=6;Pe.GossipsubDlo=4;Pe.GossipsubDhi=12;Pe.GossipsubDscore=4;Pe.GossipsubDout=2;Pe.GossipsubHistoryLength=5;Pe.GossipsubHistoryGossip=3;Pe.GossipsubDlazy=6;Pe.GossipsubGossipFactor=.25;Pe.GossipsubGossipRetransmission=3;Pe.GossipsubHeartbeatInitialDelay=100;Pe.GossipsubHeartbeatInterval=Pe.second;Pe.GossipsubFanoutTTL=Pe.minute;Pe.GossipsubPrunePeers=16;Pe.GossipsubPruneBackoff=Pe.minute;Pe.GossipsubPruneBackoffTicks=15;Pe.GossipsubConnectors=8;Pe.GossipsubMaxPendingConnections=128;Pe.GossipsubConnectionTimeout=30*Pe.second;Pe.GossipsubDirectConnectTicks=300;Pe.GossipsubDirectConnectInitialDelay=Pe.second;Pe.GossipsubOpportunisticGraftTicks=60;Pe.GossipsubOpportunisticGraftPeers=2;Pe.GossipsubGraftFloodThreshold=10*Pe.second;Pe.GossipsubMaxIHaveLength=5e3;Pe.GossipsubMaxIHaveMessages=10;Pe.GossipsubIWantFollowupTime=3*Pe.second;Pe.TimeCacheDuration=120*1e3;Pe.ERR_TOPIC_VALIDATOR_REJECT="ERR_TOPIC_VALIDATOR_REJECT";Pe.ERR_TOPIC_VALIDATOR_IGNORE="ERR_TOPIC_VALIDATOR_IGNORE"});var Wue=p(p8=>{l();"use strict";Object.defineProperty(p8,"__esModule",{value:!0});p8.hasGossipProtocol=void 0;var Gue=Td();function nit(t){return t===Gue.GossipsubIDv10||t===Gue.GossipsubIDv11}p8.hasGossipProtocol=nit});var Yue=p(y8=>{l();"use strict";Object.defineProperty(y8,"__esModule",{value:!0});y8.messageIdToString=void 0;var sit=(et(),Je);function oit(t){return sit.toString(t,"base64")}y8.messageIdToString=oit});var Rd=p(sc=>{l();"use strict";var ait=sc&&sc.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),g8=sc&&sc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ait(e,t,r)};Object.defineProperty(sc,"__esModule",{value:!0});g8(Hue(),sc);g8($ue(),sc);g8(Wue(),sc);g8(Yue(),sc)});var Que=p(x1=>{l();"use strict";var cit=x1&&x1.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{u(i.next(f))}catch(d){o(d)}}function c(f){try{u(i.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):n(f.value).then(a,c)}u((i=i.apply(t,e||[])).next())})};Object.defineProperty(x1,"__esModule",{value:!0});x1.MessageCache=void 0;var b8=Rd(),Xue=class{constructor(e,r,i){this.msgs=new Map,this.peertx=new Map,this.history=[];for(let n=0;n<r;n++)this.history[n]=[];this.gossip=e,this.msgIdFn=i}put(e){return cit(this,void 0,void 0,function*(){let r=yield this.getMsgId(e),i=b8.messageIdToString(r);this.msgs.set(i,e),this.history[0].push({msgID:r,topics:e.topicIDs})})}getMsgId(e){return this.msgIdFn(e)}get(e){return this.msgs.get(b8.messageIdToString(e))}getForPeer(e,r){let i=b8.messageIdToString(e),n=this.msgs.get(i);if(!n)return[void 0,0];let s=this.peertx.get(i);s||(s=new Map,this.peertx.set(i,s));let o=(s.get(r)||0)+1;return s.set(r,o),[n,o]}getGossipIDs(e){let r=[];for(let i=0;i<this.gossip;i++)this.history[i].forEach(n=>{for(let s of n.topics)if(s===e){r.push(n.msgID);break}});return r}shift(){this.history[this.history.length-1].forEach(r=>{let i=b8.messageIdToString(r.msgID);this.msgs.delete(i),this.peertx.delete(i)}),this.history.pop(),this.history.unshift([])}};x1.MessageCache=Xue});var Jue=p((Zue,Kg)=>{l();(function(t,e){typeof define=="function"&&define.amd?define(["protobufjs/minimal"],e):typeof ua=="function"&&typeof Kg=="object"&&Kg&&Kg.exports&&(Kg.exports=e(qi()))})(Zue,function(t){"use strict";var e=t.Reader,r=t.Writer,i=t.util,n=t.roots.default||(t.roots.default={});return n.RPC=function(){function s(a){if(this.subscriptions=[],this.msgs=[],a)for(var c=Object.keys(a),u=0;u<c.length;++u)a[c[u]]!=null&&(this[c[u]]=a[c[u]])}s.prototype.subscriptions=i.emptyArray,s.prototype.msgs=i.emptyArray,s.prototype.control=null;var o;return Object.defineProperty(s.prototype,"_control",{get:i.oneOfGetter(o=["control"]),set:i.oneOfSetter(o)}),s.encode=function(c,u){if(u||(u=r.create()),c.subscriptions!=null&&c.subscriptions.length)for(var f=0;f<c.subscriptions.length;++f)n.RPC.SubOpts.encode(c.subscriptions[f],u.uint32(10).fork()).ldelim();if(c.msgs!=null&&c.msgs.length)for(var f=0;f<c.msgs.length;++f)n.RPC.Message.encode(c.msgs[f],u.uint32(18).fork()).ldelim();return c.control!=null&&Object.hasOwnProperty.call(c,"control")&&n.RPC.ControlMessage.encode(c.control,u.uint32(26).fork()).ldelim(),u},s.decode=function(c,u){c instanceof e||(c=e.create(c));for(var f=u===void 0?c.len:c.pos+u,d=new n.RPC;c.pos<f;){var h=c.uint32();switch(h>>>3){case 1:d.subscriptions&&d.subscriptions.length||(d.subscriptions=[]),d.subscriptions.push(n.RPC.SubOpts.decode(c,c.uint32()));break;case 2:d.msgs&&d.msgs.length||(d.msgs=[]),d.msgs.push(n.RPC.Message.decode(c,c.uint32()));break;case 3:d.control=n.RPC.ControlMessage.decode(c,c.uint32());break;default:c.skipType(h&7);break}}return d},s.fromObject=function(c){if(c instanceof n.RPC)return c;var u=new n.RPC;if(c.subscriptions){if(!Array.isArray(c.subscriptions))throw TypeError(".RPC.subscriptions: array expected");u.subscriptions=[];for(var f=0;f<c.subscriptions.length;++f){if(typeof c.subscriptions[f]!="object")throw TypeError(".RPC.subscriptions: object expected");u.subscriptions[f]=n.RPC.SubOpts.fromObject(c.subscriptions[f])}}if(c.msgs){if(!Array.isArray(c.msgs))throw TypeError(".RPC.msgs: array expected");u.msgs=[];for(var f=0;f<c.msgs.length;++f){if(typeof c.msgs[f]!="object")throw TypeError(".RPC.msgs: object expected");u.msgs[f]=n.RPC.Message.fromObject(c.msgs[f])}}if(c.control!=null){if(typeof c.control!="object")throw TypeError(".RPC.control: object expected");u.control=n.RPC.ControlMessage.fromObject(c.control)}return u},s.toObject=function(c,u){u||(u={});var f={};if((u.arrays||u.defaults)&&(f.subscriptions=[],f.msgs=[]),c.subscriptions&&c.subscriptions.length){f.subscriptions=[];for(var d=0;d<c.subscriptions.length;++d)f.subscriptions[d]=n.RPC.SubOpts.toObject(c.subscriptions[d],u)}if(c.msgs&&c.msgs.length){f.msgs=[];for(var d=0;d<c.msgs.length;++d)f.msgs[d]=n.RPC.Message.toObject(c.msgs[d],u)}return c.control!=null&&c.hasOwnProperty("control")&&(f.control=n.RPC.ControlMessage.toObject(c.control,u),u.oneofs&&(f._control="control")),f},s.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},s.SubOpts=function(){function a(u){if(u)for(var f=Object.keys(u),d=0;d<f.length;++d)u[f[d]]!=null&&(this[f[d]]=u[f[d]])}a.prototype.subscribe=null,a.prototype.topicID=null;var c;return Object.defineProperty(a.prototype,"_subscribe",{get:i.oneOfGetter(c=["subscribe"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_topicID",{get:i.oneOfGetter(c=["topicID"]),set:i.oneOfSetter(c)}),a.encode=function(f,d){return d||(d=r.create()),f.subscribe!=null&&Object.hasOwnProperty.call(f,"subscribe")&&d.uint32(8).bool(f.subscribe),f.topicID!=null&&Object.hasOwnProperty.call(f,"topicID")&&d.uint32(18).string(f.topicID),d},a.decode=function(f,d){f instanceof e||(f=e.create(f));for(var h=d===void 0?f.len:f.pos+d,y=new n.RPC.SubOpts;f.pos<h;){var g=f.uint32();switch(g>>>3){case 1:y.subscribe=f.bool();break;case 2:y.topicID=f.string();break;default:f.skipType(g&7);break}}return y},a.fromObject=function(f){if(f instanceof n.RPC.SubOpts)return f;var d=new n.RPC.SubOpts;return f.subscribe!=null&&(d.subscribe=Boolean(f.subscribe)),f.topicID!=null&&(d.topicID=String(f.topicID)),d},a.toObject=function(f,d){d||(d={});var h={};return f.subscribe!=null&&f.hasOwnProperty("subscribe")&&(h.subscribe=f.subscribe,d.oneofs&&(h._subscribe="subscribe")),f.topicID!=null&&f.hasOwnProperty("topicID")&&(h.topicID=f.topicID,d.oneofs&&(h._topicID="topicID")),h},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.Message=function(){function a(u){if(this.topicIDs=[],u)for(var f=Object.keys(u),d=0;d<f.length;++d)u[f[d]]!=null&&(this[f[d]]=u[f[d]])}a.prototype.from=null,a.prototype.data=null,a.prototype.seqno=null,a.prototype.topicIDs=i.emptyArray,a.prototype.signature=null,a.prototype.key=null;var c;return Object.defineProperty(a.prototype,"_from",{get:i.oneOfGetter(c=["from"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_data",{get:i.oneOfGetter(c=["data"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_seqno",{get:i.oneOfGetter(c=["seqno"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_signature",{get:i.oneOfGetter(c=["signature"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_key",{get:i.oneOfGetter(c=["key"]),set:i.oneOfSetter(c)}),a.encode=function(f,d){if(d||(d=r.create()),f.from!=null&&Object.hasOwnProperty.call(f,"from")&&d.uint32(10).bytes(f.from),f.data!=null&&Object.hasOwnProperty.call(f,"data")&&d.uint32(18).bytes(f.data),f.seqno!=null&&Object.hasOwnProperty.call(f,"seqno")&&d.uint32(26).bytes(f.seqno),f.topicIDs!=null&&f.topicIDs.length)for(var h=0;h<f.topicIDs.length;++h)d.uint32(34).string(f.topicIDs[h]);return f.signature!=null&&Object.hasOwnProperty.call(f,"signature")&&d.uint32(42).bytes(f.signature),f.key!=null&&Object.hasOwnProperty.call(f,"key")&&d.uint32(50).bytes(f.key),d},a.decode=function(f,d){f instanceof e||(f=e.create(f));for(var h=d===void 0?f.len:f.pos+d,y=new n.RPC.Message;f.pos<h;){var g=f.uint32();switch(g>>>3){case 1:y.from=f.bytes();break;case 2:y.data=f.bytes();break;case 3:y.seqno=f.bytes();break;case 4:y.topicIDs&&y.topicIDs.length||(y.topicIDs=[]),y.topicIDs.push(f.string());break;case 5:y.signature=f.bytes();break;case 6:y.key=f.bytes();break;default:f.skipType(g&7);break}}return y},a.fromObject=function(f){if(f instanceof n.RPC.Message)return f;var d=new n.RPC.Message;if(f.from!=null&&(typeof f.from=="string"?i.base64.decode(f.from,d.from=i.newBuffer(i.base64.length(f.from)),0):f.from.length&&(d.from=f.from)),f.data!=null&&(typeof f.data=="string"?i.base64.decode(f.data,d.data=i.newBuffer(i.base64.length(f.data)),0):f.data.length&&(d.data=f.data)),f.seqno!=null&&(typeof f.seqno=="string"?i.base64.decode(f.seqno,d.seqno=i.newBuffer(i.base64.length(f.seqno)),0):f.seqno.length&&(d.seqno=f.seqno)),f.topicIDs){if(!Array.isArray(f.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");d.topicIDs=[];for(var h=0;h<f.topicIDs.length;++h)d.topicIDs[h]=String(f.topicIDs[h])}return f.signature!=null&&(typeof f.signature=="string"?i.base64.decode(f.signature,d.signature=i.newBuffer(i.base64.length(f.signature)),0):f.signature.length&&(d.signature=f.signature)),f.key!=null&&(typeof f.key=="string"?i.base64.decode(f.key,d.key=i.newBuffer(i.base64.length(f.key)),0):f.key.length&&(d.key=f.key)),d},a.toObject=function(f,d){d||(d={});var h={};if((d.arrays||d.defaults)&&(h.topicIDs=[]),f.from!=null&&f.hasOwnProperty("from")&&(h.from=d.bytes===String?i.base64.encode(f.from,0,f.from.length):d.bytes===Array?Array.prototype.slice.call(f.from):f.from,d.oneofs&&(h._from="from")),f.data!=null&&f.hasOwnProperty("data")&&(h.data=d.bytes===String?i.base64.encode(f.data,0,f.data.length):d.bytes===Array?Array.prototype.slice.call(f.data):f.data,d.oneofs&&(h._data="data")),f.seqno!=null&&f.hasOwnProperty("seqno")&&(h.seqno=d.bytes===String?i.base64.encode(f.seqno,0,f.seqno.length):d.bytes===Array?Array.prototype.slice.call(f.seqno):f.seqno,d.oneofs&&(h._seqno="seqno")),f.topicIDs&&f.topicIDs.length){h.topicIDs=[];for(var y=0;y<f.topicIDs.length;++y)h.topicIDs[y]=f.topicIDs[y]}return f.signature!=null&&f.hasOwnProperty("signature")&&(h.signature=d.bytes===String?i.base64.encode(f.signature,0,f.signature.length):d.bytes===Array?Array.prototype.slice.call(f.signature):f.signature,d.oneofs&&(h._signature="signature")),f.key!=null&&f.hasOwnProperty("key")&&(h.key=d.bytes===String?i.base64.encode(f.key,0,f.key.length):d.bytes===Array?Array.prototype.slice.call(f.key):f.key,d.oneofs&&(h._key="key")),h},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.ControlMessage=function(){function a(c){if(this.ihave=[],this.iwant=[],this.graft=[],this.prune=[],c)for(var u=Object.keys(c),f=0;f<u.length;++f)c[u[f]]!=null&&(this[u[f]]=c[u[f]])}return a.prototype.ihave=i.emptyArray,a.prototype.iwant=i.emptyArray,a.prototype.graft=i.emptyArray,a.prototype.prune=i.emptyArray,a.encode=function(u,f){if(f||(f=r.create()),u.ihave!=null&&u.ihave.length)for(var d=0;d<u.ihave.length;++d)n.RPC.ControlIHave.encode(u.ihave[d],f.uint32(10).fork()).ldelim();if(u.iwant!=null&&u.iwant.length)for(var d=0;d<u.iwant.length;++d)n.RPC.ControlIWant.encode(u.iwant[d],f.uint32(18).fork()).ldelim();if(u.graft!=null&&u.graft.length)for(var d=0;d<u.graft.length;++d)n.RPC.ControlGraft.encode(u.graft[d],f.uint32(26).fork()).ldelim();if(u.prune!=null&&u.prune.length)for(var d=0;d<u.prune.length;++d)n.RPC.ControlPrune.encode(u.prune[d],f.uint32(34).fork()).ldelim();return f},a.decode=function(u,f){u instanceof e||(u=e.create(u));for(var d=f===void 0?u.len:u.pos+f,h=new n.RPC.ControlMessage;u.pos<d;){var y=u.uint32();switch(y>>>3){case 1:h.ihave&&h.ihave.length||(h.ihave=[]),h.ihave.push(n.RPC.ControlIHave.decode(u,u.uint32()));break;case 2:h.iwant&&h.iwant.length||(h.iwant=[]),h.iwant.push(n.RPC.ControlIWant.decode(u,u.uint32()));break;case 3:h.graft&&h.graft.length||(h.graft=[]),h.graft.push(n.RPC.ControlGraft.decode(u,u.uint32()));break;case 4:h.prune&&h.prune.length||(h.prune=[]),h.prune.push(n.RPC.ControlPrune.decode(u,u.uint32()));break;default:u.skipType(y&7);break}}return h},a.fromObject=function(u){if(u instanceof n.RPC.ControlMessage)return u;var f=new n.RPC.ControlMessage;if(u.ihave){if(!Array.isArray(u.ihave))throw TypeError(".RPC.ControlMessage.ihave: array expected");f.ihave=[];for(var d=0;d<u.ihave.length;++d){if(typeof u.ihave[d]!="object")throw TypeError(".RPC.ControlMessage.ihave: object expected");f.ihave[d]=n.RPC.ControlIHave.fromObject(u.ihave[d])}}if(u.iwant){if(!Array.isArray(u.iwant))throw TypeError(".RPC.ControlMessage.iwant: array expected");f.iwant=[];for(var d=0;d<u.iwant.length;++d){if(typeof u.iwant[d]!="object")throw TypeError(".RPC.ControlMessage.iwant: object expected");f.iwant[d]=n.RPC.ControlIWant.fromObject(u.iwant[d])}}if(u.graft){if(!Array.isArray(u.graft))throw TypeError(".RPC.ControlMessage.graft: array expected");f.graft=[];for(var d=0;d<u.graft.length;++d){if(typeof u.graft[d]!="object")throw TypeError(".RPC.ControlMessage.graft: object expected");f.graft[d]=n.RPC.ControlGraft.fromObject(u.graft[d])}}if(u.prune){if(!Array.isArray(u.prune))throw TypeError(".RPC.ControlMessage.prune: array expected");f.prune=[];for(var d=0;d<u.prune.length;++d){if(typeof u.prune[d]!="object")throw TypeError(".RPC.ControlMessage.prune: object expected");f.prune[d]=n.RPC.ControlPrune.fromObject(u.prune[d])}}return f},a.toObject=function(u,f){f||(f={});var d={};if((f.arrays||f.defaults)&&(d.ihave=[],d.iwant=[],d.graft=[],d.prune=[]),u.ihave&&u.ihave.length){d.ihave=[];for(var h=0;h<u.ihave.length;++h)d.ihave[h]=n.RPC.ControlIHave.toObject(u.ihave[h],f)}if(u.iwant&&u.iwant.length){d.iwant=[];for(var h=0;h<u.iwant.length;++h)d.iwant[h]=n.RPC.ControlIWant.toObject(u.iwant[h],f)}if(u.graft&&u.graft.length){d.graft=[];for(var h=0;h<u.graft.length;++h)d.graft[h]=n.RPC.ControlGraft.toObject(u.graft[h],f)}if(u.prune&&u.prune.length){d.prune=[];for(var h=0;h<u.prune.length;++h)d.prune[h]=n.RPC.ControlPrune.toObject(u.prune[h],f)}return d},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.ControlIHave=function(){function a(u){if(this.messageIDs=[],u)for(var f=Object.keys(u),d=0;d<f.length;++d)u[f[d]]!=null&&(this[f[d]]=u[f[d]])}a.prototype.topicID=null,a.prototype.messageIDs=i.emptyArray;var c;return Object.defineProperty(a.prototype,"_topicID",{get:i.oneOfGetter(c=["topicID"]),set:i.oneOfSetter(c)}),a.encode=function(f,d){if(d||(d=r.create()),f.topicID!=null&&Object.hasOwnProperty.call(f,"topicID")&&d.uint32(10).string(f.topicID),f.messageIDs!=null&&f.messageIDs.length)for(var h=0;h<f.messageIDs.length;++h)d.uint32(18).bytes(f.messageIDs[h]);return d},a.decode=function(f,d){f instanceof e||(f=e.create(f));for(var h=d===void 0?f.len:f.pos+d,y=new n.RPC.ControlIHave;f.pos<h;){var g=f.uint32();switch(g>>>3){case 1:y.topicID=f.string();break;case 2:y.messageIDs&&y.messageIDs.length||(y.messageIDs=[]),y.messageIDs.push(f.bytes());break;default:f.skipType(g&7);break}}return y},a.fromObject=function(f){if(f instanceof n.RPC.ControlIHave)return f;var d=new n.RPC.ControlIHave;if(f.topicID!=null&&(d.topicID=String(f.topicID)),f.messageIDs){if(!Array.isArray(f.messageIDs))throw TypeError(".RPC.ControlIHave.messageIDs: array expected");d.messageIDs=[];for(var h=0;h<f.messageIDs.length;++h)typeof f.messageIDs[h]=="string"?i.base64.decode(f.messageIDs[h],d.messageIDs[h]=i.newBuffer(i.base64.length(f.messageIDs[h])),0):f.messageIDs[h].length&&(d.messageIDs[h]=f.messageIDs[h])}return d},a.toObject=function(f,d){d||(d={});var h={};if((d.arrays||d.defaults)&&(h.messageIDs=[]),f.topicID!=null&&f.hasOwnProperty("topicID")&&(h.topicID=f.topicID,d.oneofs&&(h._topicID="topicID")),f.messageIDs&&f.messageIDs.length){h.messageIDs=[];for(var y=0;y<f.messageIDs.length;++y)h.messageIDs[y]=d.bytes===String?i.base64.encode(f.messageIDs[y],0,f.messageIDs[y].length):d.bytes===Array?Array.prototype.slice.call(f.messageIDs[y]):f.messageIDs[y]}return h},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.ControlIWant=function(){function a(c){if(this.messageIDs=[],c)for(var u=Object.keys(c),f=0;f<u.length;++f)c[u[f]]!=null&&(this[u[f]]=c[u[f]])}return a.prototype.messageIDs=i.emptyArray,a.encode=function(u,f){if(f||(f=r.create()),u.messageIDs!=null&&u.messageIDs.length)for(var d=0;d<u.messageIDs.length;++d)f.uint32(10).bytes(u.messageIDs[d]);return f},a.decode=function(u,f){u instanceof e||(u=e.create(u));for(var d=f===void 0?u.len:u.pos+f,h=new n.RPC.ControlIWant;u.pos<d;){var y=u.uint32();switch(y>>>3){case 1:h.messageIDs&&h.messageIDs.length||(h.messageIDs=[]),h.messageIDs.push(u.bytes());break;default:u.skipType(y&7);break}}return h},a.fromObject=function(u){if(u instanceof n.RPC.ControlIWant)return u;var f=new n.RPC.ControlIWant;if(u.messageIDs){if(!Array.isArray(u.messageIDs))throw TypeError(".RPC.ControlIWant.messageIDs: array expected");f.messageIDs=[];for(var d=0;d<u.messageIDs.length;++d)typeof u.messageIDs[d]=="string"?i.base64.decode(u.messageIDs[d],f.messageIDs[d]=i.newBuffer(i.base64.length(u.messageIDs[d])),0):u.messageIDs[d].length&&(f.messageIDs[d]=u.messageIDs[d])}return f},a.toObject=function(u,f){f||(f={});var d={};if((f.arrays||f.defaults)&&(d.messageIDs=[]),u.messageIDs&&u.messageIDs.length){d.messageIDs=[];for(var h=0;h<u.messageIDs.length;++h)d.messageIDs[h]=f.bytes===String?i.base64.encode(u.messageIDs[h],0,u.messageIDs[h].length):f.bytes===Array?Array.prototype.slice.call(u.messageIDs[h]):u.messageIDs[h]}return d},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.ControlGraft=function(){function a(u){if(u)for(var f=Object.keys(u),d=0;d<f.length;++d)u[f[d]]!=null&&(this[f[d]]=u[f[d]])}a.prototype.topicID=null;var c;return Object.defineProperty(a.prototype,"_topicID",{get:i.oneOfGetter(c=["topicID"]),set:i.oneOfSetter(c)}),a.encode=function(f,d){return d||(d=r.create()),f.topicID!=null&&Object.hasOwnProperty.call(f,"topicID")&&d.uint32(10).string(f.topicID),d},a.decode=function(f,d){f instanceof e||(f=e.create(f));for(var h=d===void 0?f.len:f.pos+d,y=new n.RPC.ControlGraft;f.pos<h;){var g=f.uint32();switch(g>>>3){case 1:y.topicID=f.string();break;default:f.skipType(g&7);break}}return y},a.fromObject=function(f){if(f instanceof n.RPC.ControlGraft)return f;var d=new n.RPC.ControlGraft;return f.topicID!=null&&(d.topicID=String(f.topicID)),d},a.toObject=function(f,d){d||(d={});var h={};return f.topicID!=null&&f.hasOwnProperty("topicID")&&(h.topicID=f.topicID,d.oneofs&&(h._topicID="topicID")),h},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.ControlPrune=function(){function a(u){if(this.peers=[],u)for(var f=Object.keys(u),d=0;d<f.length;++d)u[f[d]]!=null&&(this[f[d]]=u[f[d]])}a.prototype.topicID=null,a.prototype.peers=i.emptyArray,a.prototype.backoff=null;var c;return Object.defineProperty(a.prototype,"_topicID",{get:i.oneOfGetter(c=["topicID"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_backoff",{get:i.oneOfGetter(c=["backoff"]),set:i.oneOfSetter(c)}),a.encode=function(f,d){if(d||(d=r.create()),f.topicID!=null&&Object.hasOwnProperty.call(f,"topicID")&&d.uint32(10).string(f.topicID),f.peers!=null&&f.peers.length)for(var h=0;h<f.peers.length;++h)n.RPC.PeerInfo.encode(f.peers[h],d.uint32(18).fork()).ldelim();return f.backoff!=null&&Object.hasOwnProperty.call(f,"backoff")&&d.uint32(24).uint64(f.backoff),d},a.decode=function(f,d){f instanceof e||(f=e.create(f));for(var h=d===void 0?f.len:f.pos+d,y=new n.RPC.ControlPrune;f.pos<h;){var g=f.uint32();switch(g>>>3){case 1:y.topicID=f.string();break;case 2:y.peers&&y.peers.length||(y.peers=[]),y.peers.push(n.RPC.PeerInfo.decode(f,f.uint32()));break;case 3:y.backoff=f.uint64();break;default:f.skipType(g&7);break}}return y},a.fromObject=function(f){if(f instanceof n.RPC.ControlPrune)return f;var d=new n.RPC.ControlPrune;if(f.topicID!=null&&(d.topicID=String(f.topicID)),f.peers){if(!Array.isArray(f.peers))throw TypeError(".RPC.ControlPrune.peers: array expected");d.peers=[];for(var h=0;h<f.peers.length;++h){if(typeof f.peers[h]!="object")throw TypeError(".RPC.ControlPrune.peers: object expected");d.peers[h]=n.RPC.PeerInfo.fromObject(f.peers[h])}}return f.backoff!=null&&(i.Long?(d.backoff=i.Long.fromValue(f.backoff)).unsigned=!0:typeof f.backoff=="string"?d.backoff=parseInt(f.backoff,10):typeof f.backoff=="number"?d.backoff=f.backoff:typeof f.backoff=="object"&&(d.backoff=new i.LongBits(f.backoff.low>>>0,f.backoff.high>>>0).toNumber(!0))),d},a.toObject=function(f,d){d||(d={});var h={};if((d.arrays||d.defaults)&&(h.peers=[]),f.topicID!=null&&f.hasOwnProperty("topicID")&&(h.topicID=f.topicID,d.oneofs&&(h._topicID="topicID")),f.peers&&f.peers.length){h.peers=[];for(var y=0;y<f.peers.length;++y)h.peers[y]=n.RPC.PeerInfo.toObject(f.peers[y],d)}return f.backoff!=null&&f.hasOwnProperty("backoff")&&(typeof f.backoff=="number"?h.backoff=d.longs===String?String(f.backoff):f.backoff:h.backoff=d.longs===String?i.Long.prototype.toString.call(f.backoff):d.longs===Number?new i.LongBits(f.backoff.low>>>0,f.backoff.high>>>0).toNumber(!0):f.backoff,d.oneofs&&(h._backoff="backoff")),h},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.PeerInfo=function(){function a(u){if(u)for(var f=Object.keys(u),d=0;d<f.length;++d)u[f[d]]!=null&&(this[f[d]]=u[f[d]])}a.prototype.peerID=null,a.prototype.signedPeerRecord=null;var c;return Object.defineProperty(a.prototype,"_peerID",{get:i.oneOfGetter(c=["peerID"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_signedPeerRecord",{get:i.oneOfGetter(c=["signedPeerRecord"]),set:i.oneOfSetter(c)}),a.encode=function(f,d){return d||(d=r.create()),f.peerID!=null&&Object.hasOwnProperty.call(f,"peerID")&&d.uint32(10).bytes(f.peerID),f.signedPeerRecord!=null&&Object.hasOwnProperty.call(f,"signedPeerRecord")&&d.uint32(18).bytes(f.signedPeerRecord),d},a.decode=function(f,d){f instanceof e||(f=e.create(f));for(var h=d===void 0?f.len:f.pos+d,y=new n.RPC.PeerInfo;f.pos<h;){var g=f.uint32();switch(g>>>3){case 1:y.peerID=f.bytes();break;case 2:y.signedPeerRecord=f.bytes();break;default:f.skipType(g&7);break}}return y},a.fromObject=function(f){if(f instanceof n.RPC.PeerInfo)return f;var d=new n.RPC.PeerInfo;return f.peerID!=null&&(typeof f.peerID=="string"?i.base64.decode(f.peerID,d.peerID=i.newBuffer(i.base64.length(f.peerID)),0):f.peerID.length&&(d.peerID=f.peerID)),f.signedPeerRecord!=null&&(typeof f.signedPeerRecord=="string"?i.base64.decode(f.signedPeerRecord,d.signedPeerRecord=i.newBuffer(i.base64.length(f.signedPeerRecord)),0):f.signedPeerRecord.length&&(d.signedPeerRecord=f.signedPeerRecord)),d},a.toObject=function(f,d){d||(d={});var h={};return f.peerID!=null&&f.hasOwnProperty("peerID")&&(h.peerID=d.bytes===String?i.base64.encode(f.peerID,0,f.peerID.length):d.bytes===Array?Array.prototype.slice.call(f.peerID):f.peerID,d.oneofs&&(h._peerID="peerID")),f.signedPeerRecord!=null&&f.hasOwnProperty("signedPeerRecord")&&(h.signedPeerRecord=d.bytes===String?i.base64.encode(f.signedPeerRecord,0,f.signedPeerRecord.length):d.bytes===Array?Array.prototype.slice.call(f.signedPeerRecord):f.signedPeerRecord,d.oneofs&&(h._signedPeerRecord="signedPeerRecord")),h},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s}(),n})});var YI=p(m8=>{l();"use strict";Object.defineProperty(m8,"__esModule",{value:!0});m8.getGossipPeers=void 0;var efe=Rd();function uit(t,e,r,i=()=>!0){let n=t.topics.get(e);if(!n)return new Set;let s=[];return n.forEach(o=>{let a=t.peers.get(o);!a||efe.hasGossipProtocol(a.protocol)&&i(o)&&s.push(o)}),s=efe.shuffle(s),r>0&&s.length>r&&(s=s.slice(0,r)),new Set(s)}m8.getGossipPeers=uit});var rfe=p(oc=>{l();"use strict";var fit=oc&&oc.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),lit=oc&&oc.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dit=oc&&oc.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&fit(e,t,r);return lit(e,t),e};Object.defineProperty(oc,"__esModule",{value:!0});oc.Heartbeat=void 0;var Vg=dit(Td()),v8=YI(),hit=Rd(),tfe=class{constructor(e){this.gossipsub=e}start(){if(this._heartbeatTimer)return;let e=this._heartbeat.bind(this),r=setTimeout(()=>{e(),this._heartbeatTimer.runPeriodically(e,Vg.GossipsubHeartbeatInterval)},Vg.GossipsubHeartbeatInitialDelay);this._heartbeatTimer={_intervalId:void 0,runPeriodically:(i,n)=>{this._heartbeatTimer._intervalId=setInterval(i,n)},cancel:()=>{clearTimeout(r),clearInterval(this._heartbeatTimer._intervalId)}}}stop(){!this._heartbeatTimer||(this._heartbeatTimer.cancel(),this._heartbeatTimer=null)}_heartbeat(){let{D:e,Dlo:r,Dhi:i,Dscore:n,Dout:s}=this.gossipsub._options;this.gossipsub.heartbeatTicks++;let o=new Map,a=h=>{let y=o.get(h);return y===void 0&&(y=this.gossipsub.score.score(h),o.set(h,y)),y},c=new Map,u=new Map,f=new Map;this.gossipsub._clearBackoff(),this.gossipsub.peerhave.clear(),this.gossipsub.iasked.clear(),this.gossipsub._applyIwantPenalties(),this.gossipsub._directConnect(),this.gossipsub.mesh.forEach((h,y)=>{let g=E=>{this.gossipsub.log("HEARTBEAT: Remove mesh link to %s in %s",E,y),this.gossipsub.score.prune(E,y),this.gossipsub._addBackoff(E,y),h.delete(E);let v=u.get(E);v?v.push(y):u.set(E,[y])},m=E=>{this.gossipsub.log("HEARTBEAT: Add mesh link to %s in %s",E,y),this.gossipsub.score.graft(E,y),h.add(E);let v=c.get(E);v?v.push(y):c.set(E,[y])};if(h.forEach(E=>{let v=a(E);v<0&&(this.gossipsub.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",E,v,y),g(E),f.set(E,!0))}),h.size<r){let E=this.gossipsub.backoff.get(y),v=e-h.size;v8.getGossipPeers(this.gossipsub,y,v,R=>!h.has(R)&&!this.gossipsub.direct.has(R)&&(!E||!E.has(R))&&a(R)>=0).forEach(m)}if(h.size>i){let E=Array.from(h);E.sort((A,R)=>a(R)-a(A)),E=E.slice(0,n).concat(hit.shuffle(E.slice(n)));let v=0;if(E.slice(0,e).forEach(A=>{this.gossipsub.outbound.get(A)&&v++}),v<s){let A=F=>{let q=E[F];for(let D=F;D>0;D--)E[D]=E[D-1];E[0]=q};if(v>0){let F=v;for(let q=1;q<e&&F>0;q++)this.gossipsub.outbound.get(E[q])&&(A(q),F--)}let R=e-v;for(let F=e;F<E.length&&R>0;F++)this.gossipsub.outbound.get(E[F])&&(A(F),R--)}E.slice(e).forEach(g)}if(h.size>=r){let E=0;if(h.forEach(v=>{this.gossipsub.outbound.get(v)&&E++}),E<s){let v=s-E,A=this.gossipsub.backoff.get(y);v8.getGossipPeers(this.gossipsub,y,v,R=>!h.has(R)&&!this.gossipsub.direct.has(R)&&(!A||!A.has(R))&&a(R)>=0).forEach(m)}}if(this.gossipsub.heartbeatTicks%Vg.GossipsubOpportunisticGraftTicks==0&&h.size>1){let E=Array.from(h).sort((R,F)=>a(R)-a(F)),v=h.size/2,A=a(E[v]);if(A<this.gossipsub._options.scoreThresholds.opportunisticGraftThreshold){let R=this.gossipsub.backoff.get(y);v8.getGossipPeers(this.gossipsub,y,Vg.GossipsubOpportunisticGraftPeers,q=>h.has(q)&&!this.gossipsub.direct.has(q)&&(!R||!R.has(q))&&a(q)>A).forEach(q=>{this.gossipsub.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",q,y),m(q)})}}this.gossipsub._emitGossip(y,h)});let d=this.gossipsub._now();this.gossipsub.lastpub.forEach((h,y)=>{h+Vg.GossipsubFanoutTTL<d&&(this.gossipsub.fanout.delete(y),this.gossipsub.lastpub.delete(y))}),this.gossipsub.fanout.forEach((h,y)=>{let g=this.gossipsub.topics.get(y);if(h.forEach(m=>{(!g.has(m)||a(m)<this.gossipsub._options.scoreThresholds.publishThreshold)&&h.delete(m)}),h.size<e){let m=e-h.size;v8.getGossipPeers(this.gossipsub,y,m,v=>!h.has(v)&&!this.gossipsub.direct.has(v)&&a(v)>=this.gossipsub._options.scoreThresholds.publishThreshold).forEach(v=>{h.add(v)})}this.gossipsub._emitGossip(y,h)}),this.gossipsub._sendGraftPrune(c,u,f),this.gossipsub._flush(),this.gossipsub.messageCache.shift(),this.gossipsub.emit("gossipsub:heartbeat")}};oc.Heartbeat=tfe});var XI=p(A1=>{l();"use strict";Object.defineProperty(A1,"__esModule",{value:!0});A1.ERR_INVALID_PEER_SCORE_THRESHOLDS=A1.ERR_INVALID_PEER_SCORE_PARAMS=void 0;A1.ERR_INVALID_PEER_SCORE_PARAMS="ERR_INVALID_PEER_SCORE_PARAMS";A1.ERR_INVALID_PEER_SCORE_THRESHOLDS="ERR_INVALID_PEER_SCORE_THRESHOLDS"});var QI=p((Vqt,nfe)=>{l();"use strict";function ife(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function pit(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return ife(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),ife(new n,r)}}nfe.exports=pit});var ZI=p(vn=>{l();"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.validateTopicScoreParams=vn.validatePeerScoreParams=vn.createTopicScoreParams=vn.createPeerScoreParams=vn.defaultTopicScoreParams=vn.defaultPeerScoreParams=void 0;var tr=XI(),rr=QI();vn.defaultPeerScoreParams={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:3600*1e3};vn.defaultTopicScoreParams={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function yit(t={}){return Object.assign(Object.assign(Object.assign({},vn.defaultPeerScoreParams),t),{topics:t.topics?Object.entries(t.topics).reduce((e,[r,i])=>(e[r]=sfe(i),e),{}):{}})}vn.createPeerScoreParams=yit;function sfe(t={}){return Object.assign(Object.assign({},vn.defaultTopicScoreParams),t)}vn.createTopicScoreParams=sfe;function git(t){for(let[e,r]of Object.entries(t.topics))try{ofe(r)}catch(i){throw rr(new Error(`invalid score parameters for topic ${e}: ${i.message}`),tr.ERR_INVALID_PEER_SCORE_PARAMS)}if(t.topicScoreCap<0)throw rr(new Error("invalid topic score cap; must be positive (or 0 for no cap)"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.appSpecificScore===null||t.appSpecificScore===void 0)throw rr(new Error("missing application specific score function"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.IPColocationFactorWeight>0)throw rr(new Error("invalid IPColocationFactorWeight; must be negative (or 0 to disable)"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.IPColocationFactorWeight!==0&&t.IPColocationFactorThreshold<1)throw rr(new Error("invalid IPColocationFactorThreshold; must be at least 1"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.behaviourPenaltyWeight>0)throw rr(new Error("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.behaviourPenaltyWeight!==0&&(t.behaviourPenaltyDecay<=0||t.behaviourPenaltyDecay>=1))throw rr(new Error("invalid BehaviourPenaltyDecay; must be between 0 and 1"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.decayInterval<1e3)throw rr(new Error("invalid DecayInterval; must be at least 1s"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.decayToZero<=0||t.decayToZero>=1)throw rr(new Error("invalid DecayToZero; must be between 0 and 1"),tr.ERR_INVALID_PEER_SCORE_PARAMS)}vn.validatePeerScoreParams=git;function ofe(t){if(t.topicWeight<0)throw rr(new Error("invalid topic weight; must be >= 0"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshQuantum===0)throw rr(new Error("invalid TimeInMeshQuantum; must be non zero"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight<0)throw rr(new Error("invalid TimeInMeshWeight; must be positive (or 0 to disable)"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight!==0&&t.timeInMeshQuantum<=0)throw rr(new Error("invalid TimeInMeshQuantum; must be positive"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight!==0&&t.timeInMeshCap<=0)throw rr(new Error("invalid TimeInMeshCap; must be positive"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight<0)throw rr(new Error("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight!==0&&(t.firstMessageDeliveriesDecay<=0||t.firstMessageDeliveriesDecay>=1))throw rr(new Error("invalid FirstMessageDeliveriesDecay; must be between 0 and 1"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight!==0&&t.firstMessageDeliveriesCap<=0)throw rr(new Error("invalid FirstMessageDeliveriesCap; must be positive"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight>0)throw rr(new Error("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&(t.meshMessageDeliveriesDecay<=0||t.meshMessageDeliveriesDecay>=1))throw rr(new Error("invalid MeshMessageDeliveriesDecay; must be between 0 and 1"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesCap<=0)throw rr(new Error("invalid MeshMessageDeliveriesCap; must be positive"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesThreshold<=0)throw rr(new Error("invalid MeshMessageDeliveriesThreshold; must be positive"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWindow<0)throw rr(new Error("invalid MeshMessageDeliveriesWindow; must be non-negative"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesActivation<1e3)throw rr(new Error("invalid MeshMessageDeliveriesActivation; must be at least 1s"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshFailurePenaltyWeight>0)throw rr(new Error("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshFailurePenaltyWeight!==0&&(t.meshFailurePenaltyDecay<=0||t.meshFailurePenaltyDecay>=1))throw rr(new Error("invalid MeshFailurePenaltyDecay; must be between 0 and 1"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.invalidMessageDeliveriesWeight>0)throw rr(new Error("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)"),tr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.invalidMessageDeliveriesDecay<=0||t.invalidMessageDeliveriesDecay>=1)throw rr(new Error("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1"),tr.ERR_INVALID_PEER_SCORE_PARAMS)}vn.validateTopicScoreParams=ofe});var afe=p(uu=>{l();"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.validatePeerScoreThresholds=uu.createPeerScoreThresholds=uu.defaultPeerScoreThresholds=void 0;var zg=XI(),Hg=QI();uu.defaultPeerScoreThresholds={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function bit(t={}){return Object.assign(Object.assign({},uu.defaultPeerScoreThresholds),t)}uu.createPeerScoreThresholds=bit;function mit(t){if(t.gossipThreshold>0)throw Hg(new Error("invalid gossip threshold; it must be <= 0"),zg.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.publishThreshold>0||t.publishThreshold>t.gossipThreshold)throw Hg(new Error("invalid publish threshold; it must be <= 0 and <= gossip threshold"),zg.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.graylistThreshold>0||t.graylistThreshold>t.publishThreshold)throw Hg(new Error("invalid graylist threshold; it must be <= 0 and <= publish threshold"),zg.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.acceptPXThreshold<0)throw Hg(new Error("invalid accept PX threshold; it must be >= 0"),zg.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.opportunisticGraftThreshold<0)throw Hg(new Error("invalid opportunistic grafting threshold; it must be >= 0"),zg.ERR_INVALID_PEER_SCORE_THRESHOLDS)}uu.validatePeerScoreThresholds=mit});var cfe=p(jf=>{l();"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.ensureTopicStats=jf.createTopicStats=jf.createPeerStats=void 0;function vit(t={}){return Object.assign(Object.assign({connected:!1,expire:0,ips:[],behaviourPenalty:0},t),{topics:t.topics?Object.entries(t.topics).reduce((e,[r,i])=>(e[r]=JI(i),e),{}):{}})}jf.createPeerStats=vit;function JI(t={}){return Object.assign({inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},t)}jf.createTopicStats=JI;function wit(t,e,r){let i=e.topics[t];if(i)return i;if(!!r.topics[t])return e.topics[t]=i=JI(),i}jf.ensureTopicStats=wit});var ufe=p(w8=>{l();"use strict";Object.defineProperty(w8,"__esModule",{value:!0});w8.computeScore=void 0;function _it(t,e,r,i){let n=0;return Object.entries(e.topics).forEach(([a,c])=>{let u=r.topics[a];if(!u)return;let f=0;if(c.inMesh){let g=c.meshTime/u.timeInMeshQuantum;g>u.timeInMeshCap&&(g=u.timeInMeshCap),f+=g*u.timeInMeshWeight}if(f+=c.firstMessageDeliveries*u.firstMessageDeliveriesWeight,c.meshMessageDeliveriesActive&&c.meshMessageDeliveries<u.meshMessageDeliveriesThreshold){let g=u.meshMessageDeliveriesThreshold-c.meshMessageDeliveries;f+=g*g*u.meshMessageDeliveriesWeight}f+=c.meshFailurePenalty*u.meshFailurePenaltyWeight,f+=c.invalidMessageDeliveries*c.invalidMessageDeliveries*u.invalidMessageDeliveriesWeight,n+=f*u.topicWeight}),r.topicScoreCap>0&&n>r.topicScoreCap&&(n=r.topicScoreCap),n+=r.appSpecificScore(t)*r.appSpecificWeight,e.ips.forEach(a=>{if(r.IPColocationFactorWhitelist.has(a))return;let c=i.get(a),u=c?c.size:0;if(u>r.IPColocationFactorThreshold){let f=u-r.IPColocationFactorThreshold;n+=f*f*r.IPColocationFactorWeight}}),n+=e.behaviourPenalty*e.behaviourPenalty*r.behaviourPenaltyWeight,n}w8.computeScore=_it});var lfe=p((Wqt,ffe)=>{l();"use strict";function Hr(t,e){var e=e||{};this._head=0,this._tail=0,this._capacity=e.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(t)&&this._fromArray(t)}Hr.prototype.peekAt=function(e){var r=e;if(r===(r|0)){var i=this.size();if(!(r>=i||r<-i))return r<0&&(r+=i),r=this._head+r&this._capacityMask,this._list[r]}};Hr.prototype.get=function(e){return this.peekAt(e)};Hr.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};Hr.prototype.peekFront=function(){return this.peek()};Hr.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(Hr.prototype,"length",{get:function(){return this.size()}});Hr.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Hr.prototype.unshift=function(e){if(e===void 0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Hr.prototype.shift=function(){var e=this._head;if(e!==this._tail){var r=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}};Hr.prototype.push=function(e){if(e===void 0)return this.size();var r=this._tail;return this._list[r]=e,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Hr.prototype.pop=function(){var e=this._tail;if(e!==this._head){var r=this._list.length;this._tail=e-1+r&this._capacityMask;var i=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=r>>>2&&this._shrinkArray(),i}};Hr.prototype.removeOne=function(e){var r=e;if(r===(r|0)&&this._head!==this._tail){var i=this.size(),n=this._list.length;if(!(r>=i||r<-i)){r<0&&(r+=i),r=this._head+r&this._capacityMask;var s=this._list[r],o;if(e<i/2){for(o=e;o>0;o--)this._list[r]=this._list[r=r-1+n&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(o=i-1-e;o>0;o--)this._list[r]=this._list[r=r+1+n&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+n&this._capacityMask}return s}}};Hr.prototype.remove=function(e,r){var i=e,n,s=r;if(i===(i|0)&&this._head!==this._tail){var o=this.size(),a=this._list.length;if(!(i>=o||i<-o||r<1)){if(i<0&&(i+=o),r===1||!r)return n=new Array(1),n[0]=this.removeOne(i),n;if(i===0&&i+r>=o)return n=this.toArray(),this.clear(),n;i+r>o&&(r=o-i);var c;for(n=new Array(r),c=0;c<r;c++)n[c]=this._list[this._head+i+c&this._capacityMask];if(i=this._head+i&this._capacityMask,e+r===o){for(this._tail=this._tail-r+a&this._capacityMask,c=r;c>0;c--)this._list[i=i+1+a&this._capacityMask]=void 0;return n}if(e===0){for(this._head=this._head+r+a&this._capacityMask,c=r-1;c>0;c--)this._list[i=i+1+a&this._capacityMask]=void 0;return n}if(i<o/2){for(this._head=this._head+e+r+a&this._capacityMask,c=e;c>0;c--)this.unshift(this._list[i=i-1+a&this._capacityMask]);for(i=this._head-1+a&this._capacityMask;s>0;)this._list[i=i-1+a&this._capacityMask]=void 0,s--;e<0&&(this._tail=i)}else{for(this._tail=i,i=i+r+a&this._capacityMask,c=o-(r+e);c>0;c--)this.push(this._list[i++]);for(i=this._tail;s>0;)this._list[i=i+1+a&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),n}}};Hr.prototype.splice=function(e,r){var i=e;if(i===(i|0)){var n=this.size();if(i<0&&(i+=n),!(i>n))if(arguments.length>2){var s,o,a,c=arguments.length,u=this._list.length,f=2;if(!n||i<n/2){for(o=new Array(i),s=0;s<i;s++)o[s]=this._list[this._head+s&this._capacityMask];for(r===0?(a=[],i>0&&(this._head=this._head+i+u&this._capacityMask)):(a=this.remove(i,r),this._head=this._head+i+u&this._capacityMask);c>f;)this.unshift(arguments[--c]);for(s=i;s>0;s--)this.unshift(o[s-1])}else{o=new Array(n-(i+r));var d=o.length;for(s=0;s<d;s++)o[s]=this._list[this._head+i+r+s&this._capacityMask];for(r===0?(a=[],i!=n&&(this._tail=this._head+i+u&this._capacityMask)):(a=this.remove(i,r),this._tail=this._tail-d+u&this._capacityMask);f<c;)this.push(arguments[f++]);for(s=0;s<d;s++)this.push(o[s])}return a}else return this.remove(i,r)}};Hr.prototype.clear=function(){this._head=0,this._tail=0};Hr.prototype.isEmpty=function(){return this._head===this._tail};Hr.prototype.toArray=function(){return this._copyArray(!1)};Hr.prototype._fromArray=function(e){for(var r=0;r<e.length;r++)this.push(e[r])};Hr.prototype._copyArray=function(e){var r=[],i=this._list,n=i.length,s;if(e||this._head>this._tail){for(s=this._head;s<n;s++)r.push(i[s]);for(s=0;s<this._tail;s++)r.push(i[s])}else for(s=this._head;s<this._tail;s++)r.push(i[s]);return r};Hr.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1};Hr.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};ffe.exports=Hr});var pfe=p(fu=>{l();"use strict";var Eit=fu&&fu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fu,"__esModule",{value:!0});fu.MessageDeliveries=fu.DeliveryRecordStatus=void 0;var Sit=Td(),xit=Eit(lfe()),Ait=Rd(),dfe;(function(t){t[t.unknown=0]="unknown",t[t.valid=1]="valid",t[t.invalid=2]="invalid",t[t.ignored=3]="ignored"})(dfe=fu.DeliveryRecordStatus||(fu.DeliveryRecordStatus={}));var hfe=class{constructor(){this.records=new Map,this.queue=new xit.default}ensureRecord(e){let r=Ait.messageIdToString(e),i=this.records.get(r);if(i)return i;i={status:dfe.unknown,firstSeen:Date.now(),validated:0,peers:new Set},this.records.set(r,i);let n={msgId:r,expire:Date.now()+Sit.TimeCacheDuration};return this.queue.push(n),i}gc(){let e=Date.now(),r=this.queue.peekFront();for(;r&&r.expire<e;)this.records.delete(r.msgId),this.queue.shift(),r=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}};fu.MessageDeliveries=hfe});var gfe=p(Kf=>{l();"use strict";var _8=Kf&&Kf.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{u(i.next(f))}catch(d){o(d)}}function c(f){try{u(i.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):n(f.value).then(a,c)}u((i=i.apply(t,e||[])).next())})},Iit=Kf&&Kf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Kf,"__esModule",{value:!0});Kf.PeerScore=void 0;var Tit=ZI(),I1=cfe(),Rit=ufe(),Zo=pfe(),Pit=Td(),Cit=Iit(tt()),Oit=be(),kit=a8(),{ERR_INVALID_SIGNATURE:qit,ERR_MISSING_SIGNATURE:Dit}=kit.codes,T1=Oit("libp2p:gossipsub:score"),yfe=class{constructor(e,r,i){Tit.validatePeerScoreParams(e),this.params=e,this._connectionManager=r,this.peerStats=new Map,this.peerIPs=new Map,this.deliveryRecords=new Zo.MessageDeliveries,this.msgId=i}start(){if(this._backgroundInterval){T1("Peer score already running");return}this._backgroundInterval=setInterval(()=>this.background(),this.params.decayInterval),T1("started")}stop(){if(!this._backgroundInterval){T1("Peer score already stopped");return}clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),T1("stopped")}background(){this._refreshScores(),this._updateIPs(),this.deliveryRecords.gc()}_refreshScores(){let e=Date.now(),r=this.params.decayToZero;this.peerStats.forEach((i,n)=>{if(!i.connected){e>i.expire&&(this._removeIPs(n,i.ips),this.peerStats.delete(n));return}Object.entries(i.topics).forEach(([s,o])=>{let a=this.params.topics[s];!a||(o.firstMessageDeliveries*=a.firstMessageDeliveriesDecay,o.firstMessageDeliveries<r&&(o.firstMessageDeliveries=0),o.meshMessageDeliveries*=a.meshMessageDeliveriesDecay,o.meshMessageDeliveries<r&&(o.meshMessageDeliveries=0),o.meshFailurePenalty*=a.meshFailurePenaltyDecay,o.meshFailurePenalty<r&&(o.meshFailurePenalty=0),o.invalidMessageDeliveries*=a.invalidMessageDeliveriesDecay,o.invalidMessageDeliveries<r&&(o.invalidMessageDeliveries=0),o.inMesh&&(o.meshTime=e-o.graftTime,o.meshTime>a.meshMessageDeliveriesActivation&&(o.meshMessageDeliveriesActive=!0)))}),i.behaviourPenalty*=this.params.behaviourPenaltyDecay,i.behaviourPenalty<r&&(i.behaviourPenalty=0)})}score(e){let r=this.peerStats.get(e);return r?Rit.computeScore(e,r,this.params,this.peerIPs):0}addPenalty(e,r){let i=this.peerStats.get(e);!i||(i.behaviourPenalty+=r)}addPeer(e){let r=I1.createPeerStats({connected:!0});this.peerStats.set(e,r);let i=this._getIPs(e);this._setIPs(e,i,r.ips),r.ips=i}removePeer(e){let r=this.peerStats.get(e);if(!!r){if(this.score(e)>0){this._removeIPs(e,r.ips),this.peerStats.delete(e);return}Object.entries(r.topics).forEach(([i,n])=>{n.firstMessageDeliveries=0;let s=this.params.topics[i].meshMessageDeliveriesThreshold;if(n.inMesh&&n.meshMessageDeliveriesActive&&n.meshMessageDeliveries<s){let o=s-n.meshMessageDeliveries;n.meshFailurePenalty+=o*o}n.inMesh=!1}),r.connected=!1,r.expire=Date.now()+this.params.retainScore}}graft(e,r){let i=this.peerStats.get(e);if(!i)return;let n=I1.ensureTopicStats(r,i,this.params);!n||(n.inMesh=!0,n.graftTime=Date.now(),n.meshTime=0,n.meshMessageDeliveriesActive=!1)}prune(e,r){let i=this.peerStats.get(e);if(!i)return;let n=I1.ensureTopicStats(r,i,this.params);if(!n)return;let s=this.params.topics[r].meshMessageDeliveriesThreshold;if(n.meshMessageDeliveriesActive&&n.meshMessageDeliveries<s){let o=s-n.meshMessageDeliveries;n.meshFailurePenalty+=o*o}n.inMesh=!1}validateMessage(e){return _8(this,void 0,void 0,function*(){this.deliveryRecords.ensureRecord(yield this.msgId(e))})}deliverMessage(e){return _8(this,void 0,void 0,function*(){let r=e.receivedFrom;this._markFirstMessageDelivery(r,e);let i=this.deliveryRecords.ensureRecord(yield this.msgId(e)),n=Date.now();if(i.status!==Zo.DeliveryRecordStatus.unknown){T1("unexpected delivery: message from %s was first seen %s ago and has delivery status %d",r,n-i.firstSeen,Zo.DeliveryRecordStatus[i.status]);return}i.status=Zo.DeliveryRecordStatus.valid,i.validated=n,i.peers.forEach(s=>{s!==r&&this._markDuplicateMessageDelivery(s,e)})})}rejectMessage(e,r){return _8(this,void 0,void 0,function*(){let i=e.receivedFrom;switch(r){case Dit:case qit:this._markInvalidMessageDelivery(i,e);return}let n=this.deliveryRecords.ensureRecord(yield this.msgId(e));if(n.status!==Zo.DeliveryRecordStatus.unknown){T1("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",i,Date.now()-n.firstSeen,Zo.DeliveryRecordStatus[n.status]);return}switch(r){case Pit.ERR_TOPIC_VALIDATOR_IGNORE:n.status=Zo.DeliveryRecordStatus.ignored;return}n.status=Zo.DeliveryRecordStatus.invalid,this._markInvalidMessageDelivery(i,e),n.peers.forEach(s=>{this._markInvalidMessageDelivery(s,e)})})}duplicateMessage(e){return _8(this,void 0,void 0,function*(){let r=e.receivedFrom,i=this.deliveryRecords.ensureRecord(yield this.msgId(e));if(!i.peers.has(r))switch(i.status){case Zo.DeliveryRecordStatus.unknown:i.peers.add(r);break;case Zo.DeliveryRecordStatus.valid:i.peers.add(r),this._markDuplicateMessageDelivery(r,e,i.validated);break;case Zo.DeliveryRecordStatus.invalid:this._markInvalidMessageDelivery(r,e);break}})}_markInvalidMessageDelivery(e,r){let i=this.peerStats.get(e);!i||r.topicIDs.forEach(n=>{let s=I1.ensureTopicStats(n,i,this.params);!s||(s.invalidMessageDeliveries+=1)})}_markFirstMessageDelivery(e,r){let i=this.peerStats.get(e);!i||r.topicIDs.forEach(n=>{let s=I1.ensureTopicStats(n,i,this.params);if(!s)return;let o=this.params.topics[n].firstMessageDeliveriesCap;s.firstMessageDeliveries+=1,s.firstMessageDeliveries>o&&(s.firstMessageDeliveries=o),!!s.inMesh&&(o=this.params.topics[n].meshMessageDeliveriesCap,s.meshMessageDeliveries+=1,s.meshMessageDeliveries>o&&(s.meshMessageDeliveries=o))})}_markDuplicateMessageDelivery(e,r,i=0){let n=this.peerStats.get(e);if(!n)return;let s=i?Date.now():0;r.topicIDs.forEach(o=>{let a=I1.ensureTopicStats(o,n,this.params);if(!a||!a.inMesh)return;let c=this.params.topics[o];if(i&&s>i+c.meshMessageDeliveriesWindow)return;let u=c.meshMessageDeliveriesCap;a.meshMessageDeliveries+=1,a.meshMessageDeliveries>u&&(a.meshMessageDeliveries=u)})}_getIPs(e){return this._connectionManager.getAll(Cit.default.createFromB58String(e)).map(r=>r.remoteAddr.toOptions().host)}_setIPs(e,r,i){e:for(let n of r){for(let o of i)if(n===o)continue e;let s=this.peerIPs.get(n);s||(s=new Set,this.peerIPs.set(n,s)),s.add(e)}e:for(let n of i){for(let o of r)if(n===o)continue e;let s=this.peerIPs.get(n);!s||(s.delete(e),s.size||this.peerIPs.delete(n))}}_removeIPs(e,r){r.forEach(i=>{let n=this.peerIPs.get(i);!n||(n.delete(e),n.size||this.peerIPs.delete(i))})}_updateIPs(){this.peerStats.forEach((e,r)=>{let i=this._getIPs(r);this._setIPs(r,i,e.ips),e.ips=i})}};Kf.PeerScore=yfe});var bfe=p(lu=>{l();"use strict";var Nit=lu&&lu.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),eT=lu&&lu.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Nit(e,t,r)};Object.defineProperty(lu,"__esModule",{value:!0});eT(ZI(),lu);eT(afe(),lu);eT(gfe(),lu)});var wfe=p(R1=>{l();"use strict";var mfe=R1&&R1.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{u(i.next(f))}catch(d){o(d)}}function c(f){try{u(i.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):n(f.value).then(a,c)}u((i=i.apply(t,e||[])).next())})};Object.defineProperty(R1,"__esModule",{value:!0});R1.IWantTracer=void 0;var Bit=Td(),tT=Rd(),Mit=a8(),{ERR_INVALID_SIGNATURE:Lit,ERR_MISSING_SIGNATURE:Uit}=Mit.codes,vfe=class{constructor(e){this.getMsgId=e,this.promises=new Map}addPromise(e,r){let i=Math.floor(Math.random()*r.length),n=r[i],s=tT.messageIdToString(n),o=this.promises.get(s);o||(o=new Map,this.promises.set(s,o)),o.has(e)||o.set(e,Date.now()+Bit.GossipsubIWantFollowupTime)}getBrokenPromises(){let e=Date.now(),r=new Map;return this.promises.forEach((i,n)=>{i.forEach((s,o)=>{s<e&&(r.set(o,(r.get(o)||0)+1),i.delete(o))}),i.size||this.promises.delete(n)}),r}deliverMessage(e){return mfe(this,void 0,void 0,function*(){let r=yield this.getMsgId(e),i=tT.messageIdToString(r);this.promises.delete(i)})}rejectMessage(e,r){return mfe(this,void 0,void 0,function*(){switch(r){case Lit:case Uit:return}let i=yield this.getMsgId(e),n=tT.messageIdToString(i);this.promises.delete(n)})}clear(){this.promises.clear()}};R1.IWantTracer=vfe});var Afe=p((Jqt,xfe)=>{l();var _fe="Expected a function",Efe=0/0,Fit="[object Symbol]",jit=/^\s+|\s+$/g,Kit=/^[-+]0x[0-9a-f]+$/i,Vit=/^0b[01]+$/i,zit=/^0o[0-7]+$/i,Hit=parseInt,$it=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,Git=typeof self=="object"&&self&&self.Object===Object&&self,Wit=$it||Git||Function("return this")(),Yit=Object.prototype,Xit=Yit.toString,Qit=Math.max,Zit=Math.min,rT=function(){return Wit.Date.now()};function Jit(t,e,r){var i,n,s,o,a,c,u=0,f=!1,d=!1,h=!0;if(typeof t!="function")throw new TypeError(_fe);e=Sfe(e)||0,E8(r)&&(f=!!r.leading,d="maxWait"in r,s=d?Qit(Sfe(r.maxWait)||0,e):s,h="trailing"in r?!!r.trailing:h);function y(D){var z=i,G=n;return i=n=void 0,u=D,o=t.apply(G,z),o}function g(D){return u=D,a=setTimeout(v,e),f?y(D):o}function m(D){var z=D-c,G=D-u,Y=e-z;return d?Zit(Y,s-G):Y}function E(D){var z=D-c,G=D-u;return c===void 0||z>=e||z<0||d&&G>=s}function v(){var D=rT();if(E(D))return A(D);a=setTimeout(v,m(D))}function A(D){return a=void 0,h&&i?y(D):(i=n=void 0,o)}function R(){a!==void 0&&clearTimeout(a),u=0,i=c=n=a=void 0}function F(){return a===void 0?o:A(rT())}function q(){var D=rT(),z=E(D);if(i=arguments,n=this,c=D,z){if(a===void 0)return g(c);if(d)return a=setTimeout(v,e),y(c)}return a===void 0&&(a=setTimeout(v,e)),o}return q.cancel=R,q.flush=F,q}function ent(t,e,r){var i=!0,n=!0;if(typeof t!="function")throw new TypeError(_fe);return E8(r)&&(i="leading"in r?!!r.leading:i,n="trailing"in r?!!r.trailing:n),Jit(t,e,{leading:i,maxWait:e,trailing:n})}function E8(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function tnt(t){return!!t&&typeof t=="object"}function rnt(t){return typeof t=="symbol"||tnt(t)&&Xit.call(t)==Fit}function Sfe(t){if(typeof t=="number")return t;if(rnt(t))return Efe;if(E8(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=E8(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(jit,"");var r=Vit.test(t);return r||zit.test(t)?Hit(t.slice(2),r?2:8):Kit.test(t)?Efe:+t}xfe.exports=ent});var Rfe=p((Ife,Tfe)=>{l();"use strict";var int=Afe();Ife=Tfe.exports=iT;function iT(t){if(!(this instanceof iT))return new iT(t);t=t||{};let e=t.validity||30,r=new Map,i=int(()=>{r.forEach((n,s)=>{let o=n.validity||e;nnt(n.timestamp)>o&&r.delete(s)})},200);this.put=(n,s,o)=>{this.has(n)||r.set(n,{value:s,timestamp:new Date,validity:o}),i()},this.get=n=>{if(r.has(n))return r.get(n).value;throw new Error("key does not exist")},this.has=n=>r.has(n)}function nnt(t){let r=new Date().getTime()-t.getTime();return Math.floor(r/1e3)}});var lr=p((eDt,Cfe)=>{l();"use strict";function Pfe(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function snt(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Pfe(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),Pfe(new n,r)}}Cfe.exports=snt});var yi=p(nT=>{l();"use strict";nT.messages={NOT_STARTED_YET:"The libp2p node is not started yet",DHT_DISABLED:"DHT is not available",CONN_ENCRYPTION_REQUIRED:"At least one connection encryption module is required"};nT.codes={DHT_DISABLED:"ERR_DHT_DISABLED",PUBSUB_NOT_STARTED:"ERR_PUBSUB_NOT_STARTED",DHT_NOT_STARTED:"ERR_DHT_NOT_STARTED",CONN_ENCRYPTION_REQUIRED:"ERR_CONN_ENCRYPTION_REQUIRED",ERR_INVALID_PROTOCOLS_FOR_STREAM:"ERR_INVALID_PROTOCOLS_FOR_STREAM",ERR_CONNECTION_ENDED:"ERR_CONNECTION_ENDED",ERR_CONNECTION_FAILED:"ERR_CONNECTION_FAILED",ERR_NODE_NOT_STARTED:"ERR_NODE_NOT_STARTED",ERR_ALREADY_ABORTED:"ERR_ALREADY_ABORTED",ERR_TOO_MANY_ADDRESSES:"ERR_TOO_MANY_ADDRESSES",ERR_NO_VALID_ADDRESSES:"ERR_NO_VALID_ADDRESSES",ERR_RELAYED_DIAL:"ERR_RELAYED_DIAL",ERR_DIALED_SELF:"ERR_DIALED_SELF",ERR_DISCOVERED_SELF:"ERR_DISCOVERED_SELF",ERR_DUPLICATE_TRANSPORT:"ERR_DUPLICATE_TRANSPORT",ERR_ENCRYPTION_FAILED:"ERR_ENCRYPTION_FAILED",ERR_HOP_REQUEST_FAILED:"ERR_HOP_REQUEST_FAILED",ERR_INVALID_KEY:"ERR_INVALID_KEY",ERR_INVALID_MESSAGE:"ERR_INVALID_MESSAGE",ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS",ERR_INVALID_PEER:"ERR_INVALID_PEER",ERR_MUXER_UNAVAILABLE:"ERR_MUXER_UNAVAILABLE",ERR_TIMEOUT:"ERR_TIMEOUT",ERR_TRANSPORT_UNAVAILABLE:"ERR_TRANSPORT_UNAVAILABLE",ERR_TRANSPORT_DIAL_FAILED:"ERR_TRANSPORT_DIAL_FAILED",ERR_UNSUPPORTED_PROTOCOL:"ERR_UNSUPPORTED_PROTOCOL",ERR_INVALID_MULTIADDR:"ERR_INVALID_MULTIADDR",ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID"}});var qfe=p((rDt,kfe)=>{l();"use strict";var P1=qi(),Ofe=P1.Reader,ont=P1.Writer,Er=P1.util,$g=P1.roots["libp2p-envelope"]||(P1.roots["libp2p-envelope"]={});$g.Envelope=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.publicKey=Er.newBuffer([]),t.prototype.payloadType=Er.newBuffer([]),t.prototype.payload=Er.newBuffer([]),t.prototype.signature=Er.newBuffer([]),t.encode=function(r,i){return i||(i=ont.create()),r.publicKey!=null&&Object.hasOwnProperty.call(r,"publicKey")&&i.uint32(10).bytes(r.publicKey),r.payloadType!=null&&Object.hasOwnProperty.call(r,"payloadType")&&i.uint32(18).bytes(r.payloadType),r.payload!=null&&Object.hasOwnProperty.call(r,"payload")&&i.uint32(26).bytes(r.payload),r.signature!=null&&Object.hasOwnProperty.call(r,"signature")&&i.uint32(42).bytes(r.signature),i},t.decode=function(r,i){r instanceof Ofe||(r=Ofe.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new $g.Envelope;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.publicKey=r.bytes();break;case 2:s.payloadType=r.bytes();break;case 3:s.payload=r.bytes();break;case 5:s.signature=r.bytes();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof $g.Envelope)return r;var i=new $g.Envelope;return r.publicKey!=null&&(typeof r.publicKey=="string"?Er.base64.decode(r.publicKey,i.publicKey=Er.newBuffer(Er.base64.length(r.publicKey)),0):r.publicKey.length&&(i.publicKey=r.publicKey)),r.payloadType!=null&&(typeof r.payloadType=="string"?Er.base64.decode(r.payloadType,i.payloadType=Er.newBuffer(Er.base64.length(r.payloadType)),0):r.payloadType.length&&(i.payloadType=r.payloadType)),r.payload!=null&&(typeof r.payload=="string"?Er.base64.decode(r.payload,i.payload=Er.newBuffer(Er.base64.length(r.payload)),0):r.payload.length&&(i.payload=r.payload)),r.signature!=null&&(typeof r.signature=="string"?Er.base64.decode(r.signature,i.signature=Er.newBuffer(Er.base64.length(r.signature)),0):r.signature.length&&(i.signature=r.signature)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(i.bytes===String?n.publicKey="":(n.publicKey=[],i.bytes!==Array&&(n.publicKey=Er.newBuffer(n.publicKey))),i.bytes===String?n.payloadType="":(n.payloadType=[],i.bytes!==Array&&(n.payloadType=Er.newBuffer(n.payloadType))),i.bytes===String?n.payload="":(n.payload=[],i.bytes!==Array&&(n.payload=Er.newBuffer(n.payload))),i.bytes===String?n.signature="":(n.signature=[],i.bytes!==Array&&(n.signature=Er.newBuffer(n.signature)))),r.publicKey!=null&&r.hasOwnProperty("publicKey")&&(n.publicKey=i.bytes===String?Er.base64.encode(r.publicKey,0,r.publicKey.length):i.bytes===Array?Array.prototype.slice.call(r.publicKey):r.publicKey),r.payloadType!=null&&r.hasOwnProperty("payloadType")&&(n.payloadType=i.bytes===String?Er.base64.encode(r.payloadType,0,r.payloadType.length):i.bytes===Array?Array.prototype.slice.call(r.payloadType):r.payloadType),r.payload!=null&&r.hasOwnProperty("payload")&&(n.payload=i.bytes===String?Er.base64.encode(r.payload,0,r.payload.length):i.bytes===Array?Array.prototype.slice.call(r.payload):r.payload),r.signature!=null&&r.hasOwnProperty("signature")&&(n.signature=i.bytes===String?Er.base64.encode(r.signature,0,r.signature.length):i.bytes===Array?Array.prototype.slice.call(r.signature):r.signature),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,P1.util.toJSONOptions)},t}();kfe.exports=$g});var Gg=p((iDt,Bfe)=>{l();"use strict";var ant=lr(),{concat:cnt}=(fn(),un),{fromString:unt}=(ut(),lt),fnt=C4(),lnt=tt(),sT=as(),{equals:S8}=(di(),li),{codes:dnt}=yi(),{Envelope:Dfe}=qfe(),Vf=class{constructor({peerId:e,payloadType:r,payload:i,signature:n}){this.peerId=e,this.payloadType=r,this.payload=i,this.signature=n,this._marshal=void 0}marshal(){if(this._marshal)return this._marshal;let e=fnt.marshalPublicKey(this.peerId.pubKey);return this._marshal=Dfe.encode({publicKey:e,payloadType:this.payloadType,payload:this.payload,signature:this.signature}).finish(),this._marshal}equals(e){return S8(this.peerId.pubKey.bytes,e.peerId.pubKey.bytes)&&S8(this.payloadType,e.payloadType)&&S8(this.payload,e.payload)&&S8(this.signature,e.signature)}validate(e){let r=Nfe(e,this.payloadType,this.payload);return this.peerId.pubKey.verify(r,this.signature)}},Nfe=(t,e,r)=>{let i=unt(t),n=sT.encode(i.byteLength),s=sT.encode(e.length),o=sT.encode(r.length);return cnt([new Uint8Array(n),i,new Uint8Array(s),e,new Uint8Array(o),r])};Vf.createFromProtobuf=async t=>{let e=Dfe.decode(t),r=await lnt.createFromPubKey(e.publicKey);return new Vf({peerId:r,payloadType:e.payloadType,payload:e.payload,signature:e.signature})};Vf.seal=async(t,e)=>{let r=t.domain,i=t.codec,n=t.marshal(),s=Nfe(r,i,n),o=await e.privKey.sign(s);return new Vf({peerId:e,payloadType:i,payload:n,signature:o})};Vf.openAndCertify=async(t,e)=>{let r=await Vf.createFromProtobuf(t);if(!await r.validate(e))throw ant(new Error("envelope signature is not valid for the given domain"),dnt.ERR_SIGNATURE_NOT_VALID);return r};Bfe.exports=Vf});var lT=p((du,Lfe)=>{l();"use strict";var hnt=du&&du.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),pnt=du&&du.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Mfe=du&&du.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&hnt(e,t,r);return pnt(e,t),e},C1=du&&du.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{u(i.next(f))}catch(d){o(d)}}function c(f){try{u(i.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):n(f.value).then(a,c)}u((i=i.apply(t,e||[])).next())})},oT=Mfe(zue()),ynt=Que(),aT=Jue(),Nt=Mfe(Td()),gnt=rfe(),x8=YI(),Hi=Rd(),cT=bfe(),bnt=wfe(),mnt=Rfe(),uT=tt(),vnt=Gg(),fT=class extends oT.default{constructor(e,r={}){let i=[Nt.GossipsubIDv11,Nt.GossipsubIDv10],n=Object.assign(Object.assign({gossipIncoming:!0,fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:Nt.GossipsubD,Dlo:Nt.GossipsubDlo,Dhi:Nt.GossipsubDhi,Dscore:Nt.GossipsubDscore,Dout:Nt.GossipsubDout,Dlazy:Nt.GossipsubDlazy},r),{scoreParams:cT.createPeerScoreParams(r.scoreParams),scoreThresholds:cT.createPeerScoreThresholds(r.scoreThresholds)});n.fallbackToFloodsub&&i.push(Nt.FloodsubID);super(Object.assign({debugName:"libp2p:gossipsub",multicodecs:i,libp2p:e},n));this._options=n,this.direct=new Set(n.directPeers.map(s=>s.id.toB58String())),n.directPeers.forEach(s=>{e.peerStore.addressBook.add(s.id,s.addrs)}),this.seenCache=new mnt,this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.messageCache=r.messageCache||new ynt.MessageCache(Nt.GossipsubHistoryGossip,Nt.GossipsubHistoryLength,this.getMsgId.bind(this)),this.heartbeat=new gnt.Heartbeat(this),this.heartbeatTicks=0,this.gossipTracer=new bnt.IWantTracer(this.getMsgId.bind(this)),this._libp2p=e,this.score=new cT.PeerScore(this._options.scoreParams,e.connectionManager,this.getMsgId.bind(this))}_decodeRpc(e){return aT.RPC.decode(e)}_encodeRpc(e){return aT.RPC.encode(e).finish()}_addPeer(e,r){let i=super._addPeer(e,r);this.score.addPeer(e.toB58String());let n=!1;for(let s of this._libp2p.connectionManager.getAll(e))if(s.stat.direction==="outbound"&&Array.from(s.registry.values()).some(o=>r===o.protocol)){n=!0;break}return this.outbound.set(i.id.toB58String(),n),i}_removePeer(e){let r=super._removePeer(e),i=e.toB58String();for(let n of this.mesh.values())n.delete(i);for(let n of this.fanout.values())n.delete(i);return this.gossip.delete(i),this.control.delete(i),this.outbound.delete(i),this.score.removePeer(i),r}_processRpc(e,r,i){let n=Object.create(null,{_processRpc:{get:()=>super._processRpc}});return C1(this,void 0,void 0,function*(){return(yield n._processRpc.call(this,e,r,i))?(i.control&&this._processRpcControlMessage(e,i.control),!0):!1})}_processRpcControlMessage(e,r){if(!r)return;let i=r.ihave?this._handleIHave(e,r.ihave):[],n=r.iwant?this._handleIWant(e,r.iwant):[],s=r.graft?this._handleGraft(e,r.graft):[];if(r.prune&&this._handlePrune(e,r.prune),!i.length&&!n.length&&!s.length)return;let o=Hi.createGossipRpc(n,{iwant:i,prune:s});this._sendRpc(e,o)}_processRpcMessage(e){let r=Object.create(null,{_processRpcMessage:{get:()=>super._processRpcMessage}});return C1(this,void 0,void 0,function*(){let i=yield this.getMsgId(e),n=Hi.messageIdToString(i);if(this.seenCache.has(n)){this.score.duplicateMessage(e);return}this.seenCache.put(n),yield this.score.validateMessage(e),yield r._processRpcMessage.call(this,e)})}_acceptFrom(e){return this.direct.has(e)||this.score.score(e)>=this._options.scoreThresholds.graylistThreshold}validate(e){let r=Object.create(null,{validate:{get:()=>super.validate}});return C1(this,void 0,void 0,function*(){try{yield r.validate.call(this,e)}catch(i){throw this.score.rejectMessage(e,i.code),this.gossipTracer.rejectMessage(e,i.code),i}})}_handleIHave(e,r){if(!r.length)return[];let i=this.score.score(e);if(i<this._options.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",e,i),[];let n=(this.peerhave.get(e)||0)+1;if(this.peerhave.set(e,n),n>Nt.GossipsubMaxIHaveMessages)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",e,n),[];let s=this.iasked.get(e)||0;if(s>=Nt.GossipsubMaxIHaveLength)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",e,s),[];let o=new Map;if(r.forEach(({topicID:u,messageIDs:f})=>{!u||!f||!this.mesh.has(u)||f.forEach(d=>{let h=Hi.messageIdToString(d);this.seenCache.has(h)||o.set(h,d)})}),!o.size)return[];let a=o.size;a+s>Nt.GossipsubMaxIHaveLength&&(a=Nt.GossipsubMaxIHaveLength-s),this.log("IHAVE: Asking for %d out of %d messages from %s",a,o.size,e);let c=Array.from(o.values());return Hi.shuffle(c),c=c.slice(0,a),this.iasked.set(e,s+a),this.gossipTracer.addPromise(e,c),[{messageIDs:c}]}_handleIWant(e,r){if(!r.length)return[];let i=this.score.score(e);if(i<this._options.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",e,i),[];let n=new Map;return r.forEach(({messageIDs:s})=>{s&&s.forEach(o=>{let[a,c]=this.messageCache.getForPeer(o,e);if(!!a){if(c>Nt.GossipsubGossipRetransmission){this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",e,o);return}n.set(Hi.messageIdToString(o),a)}})}),n.size?(this.log("IWANT: Sending %d messages to %s",n.size,e),Array.from(n.values()).map(oT.utils.normalizeOutRpcMessage)):[]}_handleGraft(e,r){let i=[],n=this.score.score(e),s=this._now(),o=this._options.doPX;return r.forEach(({topicID:a})=>{var c;if(!a)return;let u=this.mesh.get(a);if(!u){o=!1;return}if(u.has(e))return;if(this.direct.has(e)){this.log("GRAFT: ignoring request from direct peer %s",e),i.push(a),o=!1;return}let f=(c=this.backoff.get(a))===null||c===void 0?void 0:c.get(e);if(typeof f=="number"&&s<f){this.log("GRAFT: ignoring backed off peer %s",e),this.score.addPenalty(e,1),o=!1;let d=f+Nt.GossipsubGraftFloodThreshold-Nt.GossipsubPruneBackoff;s<d&&this.score.addPenalty(e,1),this._addBackoff(e,a),i.push(a);return}if(n<0){this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",e,n,a),i.push(a),o=!1,this._addBackoff(e,a);return}if(u.size>=this._options.Dhi&&!this.outbound.get(e)){i.push(a),this._addBackoff(e,a);return}this.log("GRAFT: Add mesh link from %s in %s",e,a),this.score.graft(e,a),u.add(e)}),i.length?i.map(a=>this._makePrune(e,a,o)):[]}_handlePrune(e,r){let i=this.score.score(e);r.forEach(({topicID:n,backoff:s,peers:o})=>{if(!n)return;let a=this.mesh.get(n);if(!!a&&(this.log("PRUNE: Remove mesh link to %s in %s",e,n),this.score.prune(e,n),a.delete(e),typeof s=="number"&&s>0?this._doAddBackoff(e,n,s*1e3):this._addBackoff(e,n),o&&o.length)){if(i<this._options.scoreThresholds.acceptPXThreshold){this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",e,i,n);return}this._pxConnect(o)}})}_addBackoff(e,r){this._doAddBackoff(e,r,Nt.GossipsubPruneBackoff)}_doAddBackoff(e,r,i){let n=this.backoff.get(r);n||(n=new Map,this.backoff.set(r,n));let s=this._now()+i;(n.get(e)||0)<s&&n.set(e,s)}_applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach((e,r)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",r,e),this.score.addPenalty(r,e)})}_clearBackoff(){if(this.heartbeatTicks%Nt.GossipsubPruneBackoffTicks!=0)return;let e=this._now();this.backoff.forEach((r,i)=>{r.forEach((n,s)=>{n<e&&r.delete(s)}),r.size===0&&this.backoff.delete(i)})}_directConnect(){if(this.heartbeatTicks%Nt.GossipsubDirectConnectTicks!=0)return;let e=[];this.direct.forEach(r=>{let i=this.peers.get(r);(!i||!i.isWritable)&&e.push(r)}),e.length&&e.forEach(r=>{this._connect(r)})}_pxConnect(e){return C1(this,void 0,void 0,function*(){e.length>Nt.GossipsubPrunePeers&&(Hi.shuffle(e),e=e.slice(0,Nt.GossipsubPrunePeers));let r=[];yield Promise.all(e.map(i=>C1(this,void 0,void 0,function*(){if(!i.peerID)return;let s=uT.createFromBytes(i.peerID).toB58String();if(!this.peers.has(s)){if(!i.signedPeerRecord){r.push(s);return}try{let o=yield vnt.openAndCertify(i.signedPeerRecord,"libp2p-peer-record"),a=o.peerId.toB58String();if(s!==a){this.log("bogus peer record obtained through px: peer ID %s doesn't match expected peer %s",a,s);return}if(!this._libp2p.peerStore.addressBook.consumePeerRecord(o)){this.log("bogus peer record obtained through px: could not add peer record to address book");return}r.push(s)}catch(o){this.log("bogus peer record obtained through px: invalid signature or not a peer record")}}}))),!!r.length&&r.forEach(i=>this._connect(i))})}start(){super.start(),this.heartbeat.start(),this.score.start(),this._directPeerInitial=setTimeout(()=>{this.direct.forEach(e=>{this._connect(e)})},Nt.GossipsubDirectConnectInitialDelay)}stop(){super.stop(),this.heartbeat.stop(),this.score.stop(),this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.gossipTracer.clear(),clearTimeout(this._directPeerInitial)}_connect(e){this.log("Initiating connection with %s",e),this._libp2p.dialProtocol(uT.createFromB58String(e),this.multicodecs)}subscribe(e){super.subscribe(e),this.join(e)}unsubscribe(e){super.unsubscribe(e),this.leave(e)}join(e){if(!this.started)throw new Error("Gossipsub has not started");this.log("JOIN %s",e);let r=this.fanout.get(e);if(r)r.forEach(i=>{this.score.score(i)<0&&r.delete(i)}),r.size<this._options.D&&x8.getGossipPeers(this,e,this._options.D-r.size,i=>!r.has(i)&&!this.direct.has(i)&&this.score.score(i)>=0).forEach(i=>r.add(i)),this.mesh.set(e,r),this.fanout.delete(e),this.lastpub.delete(e);else{let i=x8.getGossipPeers(this,e,this._options.D,n=>!this.direct.has(n)&&this.score.score(n)>=0);this.mesh.set(e,i)}this.mesh.get(e).forEach(i=>{this.log("JOIN: Add mesh link to %s in %s",i,e),this._sendGraft(i,e)})}leave(e){if(!this.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",e);let r=this.mesh.get(e);r&&(r.forEach(i=>{this.log("LEAVE: Remove mesh link to %s in %s",i,e),this._sendPrune(i,e)}),this.mesh.delete(e))}_publish(e){return C1(this,void 0,void 0,function*(){e.receivedFrom!==this.peerId.toB58String()&&(this.score.deliverMessage(e),this.gossipTracer.deliverMessage(e));let r=yield this.getMsgId(e),i=Hi.messageIdToString(r);this.seenCache.put(i),this.messageCache.put(e);let n=new Set;e.topicIDs.forEach(o=>{let a=this.topics.get(o);if(!!a)if(this._options.floodPublish&&e.from===this.peerId.toB58String())a.forEach(c=>{(this.direct.has(c)||this.score.score(c)>=this._options.scoreThresholds.publishThreshold)&&n.add(c)});else{this.direct.forEach(u=>{n.add(u)}),a.forEach(u=>{let f=this.score.score(u),d=this.peers.get(u);!d||d.protocol===Nt.FloodsubID&&f>=this._options.scoreThresholds.publishThreshold&&n.add(u)});let c=this.mesh.get(o);if(!c||!c.size){if(c=this.fanout.get(o),!c){let u=x8.getGossipPeers(this,o,this._options.D,f=>this.score.score(f)>=this._options.scoreThresholds.publishThreshold);u.size>0?(c=u,this.fanout.set(o,u)):c=new Set}this.lastpub.set(o,this._now())}c.forEach(u=>{n.add(u)})}});let s=Hi.createGossipRpc([oT.utils.normalizeOutRpcMessage(e)]);n.forEach(o=>{o!==e.from&&this._sendRpc(o,s)})})}_sendGraft(e,r){let i=[{topicID:r}],n=Hi.createGossipRpc([],{graft:i});this._sendRpc(e,n)}_sendPrune(e,r){let i=[this._makePrune(e,r,this._options.doPX)],n=Hi.createGossipRpc([],{prune:i});this._sendRpc(e,n)}_sendRpc(e,r){let i=this.peers.get(e);if(!i||!i.isWritable)return;let n=this.control.get(e);n&&(this._piggybackControl(e,r,n),this.control.delete(e));let s=this.gossip.get(e);s&&(this._piggybackGossip(e,r,s),this.gossip.delete(e)),i.write(aT.RPC.encode(r).finish())}_piggybackControl(e,r,i){let n=(i.graft||[]).filter(({topicID:o})=>(o&&this.mesh.get(o)||new Set).has(e)),s=(i.prune||[]).filter(({topicID:o})=>!(o&&this.mesh.get(o)||new Set).has(e));!n.length&&!s.length||(r.control?(r.control.graft=r.control.graft&&r.control.graft.concat(n),r.control.prune=r.control.prune&&r.control.prune.concat(s)):r.control={ihave:[],iwant:[],graft:n,prune:s})}_piggybackGossip(e,r,i){r.control||(r.control={ihave:[],iwant:[],graft:[],prune:[]}),r.control.ihave=i}_sendGraftPrune(e,r,i){let n=this._options.doPX;for(let[s,o]of e){let a=o.map(d=>({topicID:d})),c=[],u=r.get(s);u&&(c=u.map(d=>this._makePrune(s,d,n&&!i.get(s))),r.delete(s));let f=Hi.createGossipRpc([],{graft:a,prune:c});this._sendRpc(s,f)}for(let[s,o]of r){let a=o.map(u=>this._makePrune(s,u,n&&!i.get(s))),c=Hi.createGossipRpc([],{prune:a});this._sendRpc(s,c)}}_emitGossip(e,r){let i=this.messageCache.getGossipIDs(e);if(!i.length)return;Hi.shuffle(i),i.length>Nt.GossipsubMaxIHaveLength&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",i.length);let n=[],s=this.topics.get(e);if(!s)return;s.forEach(c=>{let u=this.peers.get(c);!u||!r.has(c)&&!this.direct.has(c)&&Hi.hasGossipProtocol(u.protocol)&&this.score.score(c)>=this._options.scoreThresholds.gossipThreshold&&n.push(c)});let o=this._options.Dlazy,a=Nt.GossipsubGossipFactor*n.length;a>o&&(o=a),o>n.length?o=n.length:Hi.shuffle(n),n.slice(0,o).forEach(c=>{let u=i;i.length>Nt.GossipsubMaxIHaveLength&&(u=Hi.shuffle(u.slice()).slice(0,Nt.GossipsubMaxIHaveLength)),this._pushGossip(c,{topicID:e,messageIDs:u})})}_flush(){for(let[e,r]of this.gossip.entries()){this.gossip.delete(e);let i=Hi.createGossipRpc([],{ihave:r});this._sendRpc(e,i)}for(let[e,r]of this.control.entries()){this.control.delete(e);let i=Hi.createGossipRpc([],{graft:r.graft,prune:r.prune});this._sendRpc(e,i)}}_pushGossip(e,r){this.log("Add gossip to %s",e);let i=this.gossip.get(e)||[];this.gossip.set(e,i.concat(r))}_now(){return Date.now()}_makePrune(e,r,i){if(this.peers.get(e).protocol===Nt.GossipsubIDv10)return{topicID:r,peers:[]};let n=Nt.GossipsubPruneBackoff/1e3,s=[];return i&&x8.getGossipPeers(this,r,Nt.GossipsubPrunePeers,a=>a!==e&&this.score.score(a)>=0).forEach(a=>{let c=uT.createFromB58String(a);s.push({peerID:c.toBytes(),signedPeerRecord:this._libp2p.peerStore.addressBook.getRawEnvelope(c)})}),{topicID:r,peers:s,backoff:n}}};fT.multicodec=Nt.GossipsubIDv11;Lfe.exports=fT});var Ffe=p((nDt,Ufe)=>{l();"use strict";Ufe.exports={gossipsub:lT()}});var $fe=p((sDt,Hfe)=>{l();"use strict";var dT=tt(),{base58btc:wnt}=(ti(),ei),{default:_nt}=Yc(),jfe=gf(),Kfe=be(),zf=Kfe("libp2p-delegated-peer-routing");zf.error=Kfe("libp2p-delegated-peer-routing:error");var Vfe=3e4,Ent=4,zfe=class{constructor(e){if(e==null)throw new Error("missing ipfs http client");this._client=e,this._httpQueue=new _nt({concurrency:Ent});let{protocol:r,host:i,port:n}=e.getEndpointConfig();zf(`enabled DelegatedPeerRouting via ${r}://${i}:${n}`)}async findPeer(e,r={}){let i=e;dT.isPeerId(i)&&(i=e.toB58String()),zf("findPeer starts: "+e),r.timeout=r.timeout||Vfe;try{return await this._httpQueue.add(async()=>{let{addrs:n}=await this._client.dht.findPeer(i,{timeout:r.timeout});return{id:e,multiaddrs:n}})}catch(n){if(n.message.includes("not found"))return;throw n}finally{zf("findPeer finished: "+e)}}async*getClosestPeers(e,r={}){let i=wnt.encode(e).substring(1);zf("getClosestPeers starts:",i),r.timeout=r.timeout||Vfe;let n=jfe(),s=jfe();this._httpQueue.add(()=>(n.resolve(),s.promise));try{await n.promise;let o=new Map;for await(let a of this._client.dht.query(i,{timeout:r.timeout}))switch(a.type){case 1:a.responses.forEach(c=>{o.set(c.id,{id:dT.parse(c.id),multiaddrs:c.addrs})});break;case 2:yield o.get(a.id.string)||{id:dT.createFromCID(a.id),multiaddrs:[]};break;default:zf("getClosestPeers unhandled response",a)}}catch(o){throw zf.error("getClosestPeers errored:",o),o}finally{s.resolve(),zf("getClosestPeers finished:",i)}}};Hfe.exports=zfe});var Zfe=p((oDt,Qfe)=>{l();"use strict";var Gfe=be(),Snt=tt(),xnt=Ka(),{default:Wfe}=Yc(),Yfe=gf(),Pd=Gfe("libp2p-delegated-content-routing");Pd.error=Gfe("libp2p-delegated-content-routing:error");var Ant=3e4,Int=4,Xfe=class{constructor(e,r){if(e==null)throw new Error("missing self peerId");if(r==null)throw new Error("missing ipfs http client");this._client=r,this.peerId=e;let i={concurrency:Int};this._httpQueue=new Wfe(i),this._httpQueueRefs=new Wfe(Object.assign({},i,{concurrency:2}));let{protocol:n,host:s,port:o}=r.getEndpointConfig();Pd(`enabled DelegatedContentRouting via ${n}://${s}:${o}`)}async*findProviders(e,r={}){Pd(`findProviders starts: ${e}`),r.timeout=r.timeout||Ant;let i=0,n=Yfe(),s=Yfe();this._httpQueue.add(()=>(n.resolve(),s.promise));try{await n.promise;for await(let{id:o,addrs:a}of this._client.dht.findProvs(e,{numProviders:r.numProviders,timeout:r.timeout}))yield{id:Snt.parse(o),multiaddrs:a},i++}catch(o){throw Pd.error("findProviders errored:",o),o}finally{s.resolve(),Pd(`findProviders finished: ${e} found ${i} providers`)}}async provide(e){Pd(`provide starts: ${e}`),await this._httpQueueRefs.add(async()=>{await this._client.block.stat(e),await xnt(this._client.dht.provide(e))}),Pd(`provide finished: ${e}`)}};Qfe.exports=Xfe});var hT=p((aDt,ele)=>{l();"use strict";var Tnt=t=>Promise.reject(new Error(`No codec found for "${t}"`)),Jfe=class{constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec||Tnt;for(let r of e.codecs)this.addCodec(r)}addCodec(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){let r=typeof e=="string"?this._codecsByName:this._codecsByCode;if(r[e])return r[e];let i=await this._loadCodec(e);return r[e]==null&&this.addCodec(i),i}listCodecs(){return Object.values(this._codecsByName)}};ele.exports=Jfe});var pT=p((cDt,rle)=>{l();"use strict";var Rnt=t=>Promise.reject(new Error(`No hasher found for "${t}"`)),tle=class{constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher||Rnt;for(let r of e.hashers)this.addHasher(r)}addHasher(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){let r=typeof e=="string"?this._hashersByName:this._hashersByCode;if(r[e])return r[e];let i=await this._loadHasher(e);return r[e]==null&&this.addHasher(i),i}listHashers(){return Object.values(this._hashersByName)}};rle.exports=tle});var yT=p((uDt,nle)=>{l();"use strict";var Pnt=t=>Promise.reject(new Error(`No base found for "${t}"`)),ile=class{constructor(e){this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase||Pnt;for(let r of e.bases)this.addBase(r)}addBase(e){if(this._basesByName[e.name]||this._basesByPrefix[e.prefix])throw new Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(this._basesByName[e])return this._basesByName[e];if(this._basesByPrefix[e])return this._basesByPrefix[e];let r=await this._loadBase(e);return this._basesByName[r.name]==null&&this._basesByPrefix[r.prefix]==null&&this.addBase(r),r}listBases(){return Object.values(this._basesByName)}};nle.exports=ile});var $r=p((fDt,sle)=>{l();"use strict";sle.exports=t=>{if(t==null)return t;let e=/^[A-Z]+$/,r={};return Object.keys(t).reduce((i,n)=>(e.test(n)?i[n.toLowerCase()]=t[n]:e.test(n[0])?i[n[0].toLowerCase()+n.slice(1)]=t[n]:i[n]=t[n],i),r)}});var ale=p((lDt,ole)=>{l();"use strict";var{Multiaddr:Cnt}=rt(),Ont=Y5();ole.exports=t=>{try{t=Ont(new Cnt(t))}catch(e){}return t=t.toString(),t}});var cle=p(()=>{l()});var ule=p(()=>{l()});var A8=p((gDt,yle)=>{l();"use strict";var{Multiaddr:fle}=rt(),{isBrowser:gT,isWebWorker:bT,isNode:knt}=Jp(),{default:qnt}=fy(),lle=be()("ipfs-http-client:lib:error-handler"),Wg=r2(),Dnt=br().bind({ignoreUndefined:!0}),dle=ale(),Nnt=cle(),Bnt=ule(),Mnt=gT||bT?location.protocol:"http",Lnt=gT||bT?location.hostname:"localhost",Unt=gT||bT?location.port:"5001",Fnt=(t={})=>{let e,r={},i;if(typeof t=="string"||fle.isMultiaddr(t))e=new URL(dle(t));else if(t instanceof URL)e=t;else if(typeof t.url=="string"||fle.isMultiaddr(t.url))e=new URL(dle(t.url)),r=t;else if(t.url instanceof URL)e=t.url,r=t;else{r=t||{};let n=(r.protocol||Mnt).replace(":",""),s=(r.host||Lnt).split(":")[0],o=r.port||Unt;e=new URL(`${n}://${s}:${o}`)}if(r.apiPath?e.pathname=r.apiPath:(e.pathname==="/"||e.pathname===void 0)&&(e.pathname="api/v0"),knt){let n=e.protocol.startsWith("https")?Bnt.Agent:Nnt.Agent;i=r.agent||new n({keepAlive:!0,maxSockets:6})}return{...r,host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:i}},hle=async t=>{let e;try{if((t.headers.get("Content-Type")||"").startsWith("application/json")){let i=await t.json();lle(i),e=i.Message||i.message}else e=await t.text()}catch(i){lle("Failed to parse error response",i),e=i.message}let r=new Wg.HTTPError(t);throw e&&(e.includes("deadline has elapsed")&&(r=new Wg.TimeoutError),e&&e.includes("context deadline exceeded")&&(r=new Wg.TimeoutError)),e&&e.includes("request timed out")&&(r=new Wg.TimeoutError),e&&(r.message=e),r},jnt=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,ple=t=>t.replace(jnt,function(e){return"-"+e.toLowerCase()}),Knt=t=>typeof t=="string"?qnt(t):t,mT=class extends Wg{constructor(e={}){let r=Fnt(e);super({timeout:Knt(r.timeout||0)||void 0,headers:r.headers,base:`${r.url}`,handleError:hle,transformSearchParams:n=>{let s=new URLSearchParams;for(let[o,a]of n)a!=="undefined"&&a!=="null"&&o!=="signal"&&s.append(ple(o),a),o==="timeout"&&!isNaN(a)&&s.append(ple(o),a);return s},agent:r.agent});delete this.get,delete this.put,delete this.delete,delete this.options;let i=this.fetch;this.fetch=(n,s={})=>(typeof n=="string"&&!n.startsWith("/")&&(n=`${r.url}/${n}`),i.call(this,n,Dnt(s,{method:"POST"})))}};mT.errorHandler=hle;yle.exports=mT});var me=p((bDt,gle)=>{l();"use strict";var Vnt=A8(),znt=t=>e=>t(new Vnt(e),e);gle.exports=znt});var wle=p((mDt,vle)=>{l();"use strict";var Hnt=g0(),$nt=$y(),Gnt=Hy(),Wnt=h0(),{isBytes:ble,isBlob:Ynt,isReadableStream:Xnt}=h5();async function Qnt(t){if(ble(t))return new Blob([t]);if(typeof t=="string"||t instanceof String)return new Blob([t.toString()]);if(Ynt(t))return t;if(Xnt(t)&&(t=Gnt(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let e=$nt(t),{value:r,done:i}=await e.peek();if(i)return mle(e);if(e.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await Wnt(e))]);if(ble(r)||typeof r=="string"||r instanceof String)return mle(e)}throw Hnt(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT")}async function mle(t){let e=[];for await(let r of t)e.push(r);return new Blob(e)}vle.exports=Qnt});var Ele=p((vDt,_le)=>{l();"use strict";var Znt=wle(),Jnt=YS();function est(t){return Jnt(t,Znt)}_le.exports={normaliseInput:est}});var I8=p((wDt,Sle)=>{l();"use strict";Sle.exports=t=>{if(t!=null)return typeof t=="string"?t:t.toString(8).padStart(4,"0")}});var Jo=p((_Dt,xle)=>{l();"use strict";var{normaliseInput:tst}=Ele(),rst=I8();async function ist(t,e,r={}){let i=[],n=new FormData,s=0,o=0;for await(let{content:a,path:c,mode:u,mtime:f}of tst(t)){let d="",h=a?"file":"dir";s>0&&(d=`-${s}`);let y=h+d,g=[];if(u!=null&&g.push(`mode=${rst(u)}`),f!=null){let{secs:m,nsecs:E}=f;g.push(`mtime=${m}`),E!=null&&g.push(`mtime-nsecs=${E}`)}if(g.length&&(y=`${y}?${g.join("&")}`),a){n.set(y,a,c!=null?encodeURIComponent(c):void 0);let m=o+a.size;i.push({name:c,start:o,end:m}),o=m}else if(c!=null)n.set(y,new File([""],encodeURIComponent(c),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");s++}return{total:o,parts:i,headers:r,body:n}}xle.exports=ist});var Cd=p((EDt,Ile)=>{l();"use strict";function Ale(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function nst(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Ale(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),Ale(new n,r)}}Ile.exports=nst});var vT=p((SDt,Tle)=>{l();"use strict";var sst=Cd();function ost(t){if(t==null)return;let e;if(t.secs!=null&&(e={secs:t.secs,nsecs:t.nsecs}),t.Seconds!=null&&(e={secs:t.Seconds,nsecs:t.FractionalNanoseconds}),Array.isArray(t)&&(e={secs:t[0],nsecs:t[1]}),t instanceof Date){let r=t.getTime(),i=Math.floor(r/1e3);e={secs:i,nsecs:(r-i*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw sst(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}Tle.exports=ost});var Ee=p((xDt,Rle)=>{l();"use strict";var ast=I8(),cst=vT();Rle.exports=({arg:t,searchParams:e,hashAlg:r,mtime:i,mode:n,...s}={})=>{e&&(s={...s,...e}),r&&(s.hash=r),i!=null&&(i=cst(i),s.mtime=i.secs,s.mtimeNsecs=i.nsecs),n!=null&&(s.mode=ast(n)),s.timeout&&!isNaN(s.timeout)&&(s.timeout=`${s.timeout}ms`),t==null?t=[]:Array.isArray(t)||(t=[t]);let o=new URLSearchParams(s);return t.forEach(a=>o.append("arg",a)),o}});var ea=p((ADt,Ple)=>{l();"use strict";var{anySignal:ust}=ku();function fst(t){return t.filter(Boolean)}Ple.exports=(...t)=>ust(fst(t))});var wT=p((IDt,Cle)=>{l();"use strict";var{CID:lst}=(Ae(),De),dst=$r(),hst=me(),pst=Jo(),yst=Ee(),gst=ea(),{AbortController:bst}=sn();Cle.exports=hst(t=>{async function*e(r,i={}){let n=new bst,s=gst(n.signal,i.signal),{headers:o,body:a,total:c,parts:u}=await pst(r,n,i.headers),[f,d]=typeof i.progress=="function"?mst(c,u,i.progress):[void 0,void 0],h=await t.post("add",{searchParams:yst({"stream-channels":!0,...i,progress:Boolean(f)}),onUploadProgress:d,signal:s,headers:o,body:a});for await(let y of h.ndjson())y=dst(y),y.hash!==void 0?yield wst(y):f&&f(y.bytes||0,y.name)}return e});var mst=(t,e,r)=>e?[void 0,vst(t,e,r)]:[r,void 0],vst=(t,e,r)=>{let i=0,n=e.length;return({loaded:s,total:o})=>{let a=Math.floor(s/o*t);for(;i<n;){let{start:c,end:u,name:f}=e[i];if(a<u){r(a-c,f);break}else r(u-c,f),i+=1}}};function wst({name:t,hash:e,size:r,mode:i,mtime:n,mtimeNsecs:s}){let o={path:t,cid:lst.parse(e),size:parseInt(r)};return i!=null&&(o.mode=parseInt(i,8)),n!=null&&(o.mtime={secs:n,nsecs:s||0}),o}});var kle=p((TDt,Ole)=>{l();"use strict";var _st=wT(),Est=Gn(),Sst=me();Ole.exports=t=>{let e=_st(t);return Sst(()=>{async function r(i,n={}){return await Est(e(i,n))}return r})(t)}});var Dle=p((RDt,qle)=>{l();"use strict";var{CID:xst}=(Ae(),De),Ast=me(),Ist=Ee();qle.exports=Ast(t=>{async function e(r={}){return((await(await t.post("bitswap/wantlist",{signal:r.signal,searchParams:Ist(r),headers:r.headers})).json()).Keys||[]).map(n=>xst.parse(n["/"]))}return e})});var Ble=p((PDt,Nle)=>{l();"use strict";var{CID:Tst}=(Ae(),De),Rst=me(),Pst=Ee();Nle.exports=Rst(t=>{async function e(r,i={}){return((await(await t.post("bitswap/wantlist",{signal:i.signal,searchParams:Pst({...i,peer:r.toString()}),headers:i.headers})).json()).Keys||[]).map(s=>Tst.parse(s["/"]))}return e})});var _T=p((CDt,Mle)=>{l();"use strict";var{CID:Cst}=(Ae(),De),Ost=me(),kst=Ee();Mle.exports=Ost(t=>{async function e(r={}){let i=await t.post("bitswap/stat",{searchParams:kst(r),signal:r.signal,headers:r.headers});return qst(await i.json())}return e});function qst(t){return{provideBufLen:t.ProvideBufLen,wantlist:(t.Wantlist||[]).map(e=>Cst.parse(e["/"])),peers:t.Peers||[],blocksReceived:BigInt(t.BlocksReceived),dataReceived:BigInt(t.DataReceived),blocksSent:BigInt(t.BlocksSent),dataSent:BigInt(t.DataSent),dupBlksReceived:BigInt(t.DupBlksReceived),dupDataReceived:BigInt(t.DupDataReceived)}}});var Ule=p((ODt,Lle)=>{l();"use strict";var Dst=me(),Nst=Ee();Lle.exports=Dst(t=>{async function e(r,i={}){return(await t.post("bitswap/unwant",{signal:i.signal,searchParams:Nst({arg:r.toString(),...i}),headers:i.headers})).json()}return e})});var jle=p((kDt,Fle)=>{l();"use strict";Fle.exports=t=>({wantlist:Dle()(t),wantlistForPeer:Ble()(t),stat:_T()(t),unwant:Ule()(t)})});var ET=p((qDt,Kle)=>{l();"use strict";var Bst=me(),Mst=Ee();Kle.exports=Bst(t=>{async function e(r,i={}){let n=await t.post("block/get",{signal:i.signal,searchParams:Mst({arg:r.toString(),...i}),headers:i.headers});return new Uint8Array(await n.arrayBuffer())}return e})});var zle=p((DDt,Vle)=>{l();"use strict";var{CID:Lst}=(Ae(),De),Ust=me(),Fst=Ee();Vle.exports=Ust(t=>{async function e(r,i={}){let s=await(await t.post("block/stat",{signal:i.signal,searchParams:Fst({arg:r.toString(),...i}),headers:i.headers})).json();return{cid:Lst.parse(s.Key),size:s.Size}}return e})});var $le=p((NDt,Hle)=>{l();"use strict";var{CID:jst}=(Ae(),De),Kst=Jo(),Vst=me(),zst=Ee(),Hst=ea(),{AbortController:$st}=sn();Hle.exports=Vst(t=>{async function e(r,i={}){let n=new $st,s=Hst(n.signal,i.signal),o;try{o=await(await t.post("block/put",{signal:s,searchParams:zst(i),...await Kst(r,n,i.headers)})).json()}catch(a){if(i.format==="dag-pb")return e(r,{...i,format:"protobuf"});if(i.format==="dag-cbor")return e(r,{...i,format:"cbor"});throw a}return jst.parse(o.Key)}return e})});var Wle=p((BDt,Gle)=>{l();"use strict";var{CID:Gst}=(Ae(),De),Wst=me(),Yst=Ee();Gle.exports=Wst(t=>{async function*e(r,i={}){Array.isArray(r)||(r=[r]);let n=await t.post("block/rm",{signal:i.signal,searchParams:Yst({arg:r.map(s=>s.toString()),"stream-channels":!0,...i}),headers:i.headers});for await(let s of n.ndjson())yield Xst(s)}return e});function Xst(t){let e={cid:Gst.parse(t.Hash)};return t.Error&&(e.error=new Error(t.Error)),e}});var Xle=p((MDt,Yle)=>{l();"use strict";Yle.exports=t=>({get:ET()(t),stat:zle()(t),put:$le()(t),rm:Wle()(t)})});var Zle=p((LDt,Qle)=>{l();"use strict";var Qst=me(),Zst=Ee(),{Multiaddr:Jst}=rt();Qle.exports=Qst(t=>{async function e(r,i={}){let n=await t.post("bootstrap/add",{signal:i.signal,searchParams:Zst({arg:r,...i}),headers:i.headers}),{Peers:s}=await n.json();return{Peers:s.map(o=>new Jst(o))}}return e})});var ede=p((UDt,Jle)=>{l();"use strict";var eot=me(),tot=Ee(),{Multiaddr:rot}=rt();Jle.exports=eot(t=>{async function e(r={}){let i=await t.post("bootstrap/rm",{signal:r.signal,searchParams:tot({...r,all:!0}),headers:r.headers}),{Peers:n}=await i.json();return{Peers:n.map(s=>new rot(s))}}return e})});var rde=p((FDt,tde)=>{l();"use strict";var iot=me(),not=Ee(),{Multiaddr:sot}=rt();tde.exports=iot(t=>{async function e(r,i={}){let n=await t.post("bootstrap/rm",{signal:i.signal,searchParams:not({arg:r,...i}),headers:i.headers}),{Peers:s}=await n.json();return{Peers:s.map(o=>new sot(o))}}return e})});var nde=p((jDt,ide)=>{l();"use strict";var oot=me(),aot=Ee(),{Multiaddr:cot}=rt();ide.exports=oot(t=>{async function e(r={}){let i=await t.post("bootstrap/add",{signal:r.signal,searchParams:aot({...r,default:!0}),headers:r.headers}),{Peers:n}=await i.json();return{Peers:n.map(s=>new cot(s))}}return e})});var ode=p((KDt,sde)=>{l();"use strict";var uot=me(),fot=Ee(),{Multiaddr:lot}=rt();sde.exports=uot(t=>{async function e(r={}){let i=await t.post("bootstrap/list",{signal:r.signal,searchParams:fot(r),headers:r.headers}),{Peers:n}=await i.json();return{Peers:n.map(s=>new lot(s))}}return e})});var cde=p((VDt,ade)=>{l();"use strict";ade.exports=t=>({add:Zle()(t),clear:ede()(t),rm:rde()(t),reset:nde()(t),list:ode()(t)})});var fde=p((zDt,ude)=>{l();"use strict";var dot=me(),hot=Ee();ude.exports=dot(t=>{async function*e(r,i={}){yield*(await t.post("cat",{signal:i.signal,searchParams:hot({arg:r.toString(),...i}),headers:i.headers})).iterator()}return e})});var dde=p((HDt,lde)=>{l();"use strict";var pot=me(),yot=Ee();lde.exports=pot(t=>async(r={})=>(await t.post("commands",{signal:r.signal,searchParams:yot(r),headers:r.headers})).json())});var pde=p(($Dt,hde)=>{l();"use strict";var got=me(),bot=Ee();hde.exports=got(t=>async(r={})=>await(await t.post("config/show",{signal:r.signal,searchParams:bot({...r}),headers:r.headers})).json())});var gde=p((GDt,yde)=>{l();"use strict";var mot=me(),vot=Ee();yde.exports=mot(t=>async(r,i={})=>{if(!r)throw new Error("key argument is required");return(await(await t.post("config",{signal:i.signal,searchParams:vot({arg:r,...i}),headers:i.headers})).json()).Value})});var mde=p((WDt,bde)=>{l();"use strict";var wot=me(),_ot=Ee();bde.exports=wot(t=>async(r,i,n={})=>{if(typeof r!="string")throw new Error("Invalid key type");let s={...n,...Eot(r,i)};await(await t.post("config",{signal:n.signal,searchParams:_ot(s),headers:n.headers})).text()});var Eot=(t,e)=>{switch(typeof e){case"boolean":return{arg:[t,e.toString()],bool:!0};case"string":return{arg:[t,e]};default:return{arg:[t,JSON.stringify(e)],json:!0}}}});var wde=p((YDt,vde)=>{l();"use strict";var{fromString:Sot}=(ut(),lt),xot=Jo(),Aot=me(),Iot=Ee(),Tot=ea(),{AbortController:Rot}=sn();vde.exports=Aot(t=>async(r,i={})=>{let n=new Rot,s=Tot(n.signal,i.signal);await(await t.post("config/replace",{signal:s,searchParams:Iot(i),...await xot(Sot(JSON.stringify(r)),n,i.headers)})).text()})});var Ede=p((XDt,_de)=>{l();"use strict";var Pot=me(),Cot=Ee();_de.exports=Pot(t=>{async function e(r,i={}){let s=await(await t.post("config/profile/apply",{signal:i.signal,searchParams:Cot({arg:r,...i}),headers:i.headers})).json();return{original:s.OldCfg,updated:s.NewCfg}}return e})});var xde=p((QDt,Sde)=>{l();"use strict";var Oot=$r(),kot=me(),qot=Ee();Sde.exports=kot(t=>{async function e(r={}){return(await(await t.post("config/profile/list",{signal:r.signal,searchParams:qot(r),headers:r.headers})).json()).map(s=>Oot(s))}return e})});var Ide=p((ZDt,Ade)=>{l();"use strict";Ade.exports=t=>({apply:Ede()(t),list:xde()(t)})});var Rde=p((JDt,Tde)=>{l();"use strict";Tde.exports=t=>({getAll:pde()(t),get:gde()(t),set:mde()(t),replace:wde()(t),profiles:Ide()(t)})});var Cde=p((eNt,Pde)=>{l();"use strict";var Dot=me(),Not=Ee();Pde.exports=Dot(t=>{async function*e(r,i={}){yield*(await t.post("dag/export",{signal:i.signal,searchParams:Not({arg:r.toString()}),headers:i.headers})).iterator()}return e})});var qde=p((tNt,kde)=>{l();"use strict";var{CID:Bot}=(Ae(),De),Ode=Cd(),Mot=async function*(t,e,r,i,n){let s=async u=>{let f=await r.getCodec(u.code),d=await i(u,n);return f.decode(d)},o=e.split("/").filter(Boolean),a=await s(t),c=t;for(o.length||(yield{value:a,remainderPath:""});o.length;){let u=o.shift();if(!u)throw Ode(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(a,u))a=a[u],yield{value:a,remainderPath:o.join("/")};else throw Ode(new Error(`no link named "${u}" under ${c}`),"ERR_NO_LINK");let f=Bot.asCID(a);f&&(c=f,a=await s(a))}};kde.exports=Mot});var Bde=p((rNt,Nde)=>{l();"use strict";var Lot=me(),Dde=qde(),Uot=Ll(),Fot=Gn(),jot=Cd();Nde.exports=(t,e)=>Lot((i,n)=>{let s=ET()(n);return async(a,c={})=>{if(c.path){let y=c.localResolve?await Uot(Dde(a,c.path,t,s,c)):await Fot(Dde(a,c.path,t,s,c));if(!y)throw jot(new Error("Not found"),"ERR_NOT_FOUND");return y}let u=await t.getCodec(a.code),f=await s(a,c);return{value:u.decode(f),remainderPath:""}}})(e)});var Lde=p((iNt,Mde)=>{l();"use strict";var Kot=me(),Vot=Ee(),zot=ea(),Hot=Jo(),{AbortController:$ot}=sn(),{CID:Got}=(Ae(),De);Mde.exports=Kot(t=>{async function*e(r,i={}){let n=new $ot,s=zot(n.signal,i.signal),{headers:o,body:a}=await Hot(r,n,i.headers),c=await t.post("dag/import",{signal:s,headers:o,body:a,searchParams:Vot({"pin-roots":i.pinRoots})});for await(let{Root:u}of c.ndjson())if(u!==void 0){let{Cid:{"/":f},PinErrorMsg:d}=u;yield{root:{cid:Got.parse(f),pinErrorMsg:d}}}}return e})});var ST=p((nNt,Ude)=>{l();"use strict";var{CID:Wot}=(Ae(),De),Yot=me(),Xot=Jo(),Qot=Ee(),Zot=ea(),{AbortController:Jot}=sn();Ude.exports=(t,e)=>Yot(i=>async(s,o={})=>{let a={format:"dag-cbor",hashAlg:"sha2-256",inputEnc:"raw",...o},u=(await t.getCodec(a.format)).encode(s),f=new Jot,d=Zot(f.signal,a.signal),y=await(await i.post("dag/put",{timeout:a.timeout,signal:d,searchParams:Qot(a),...await Xot(u,f,a.headers)})).json();return Wot.parse(y.Cid["/"])})(e)});var jde=p((sNt,Fde)=>{l();"use strict";var{CID:eat}=(Ae(),De),tat=me(),rat=Ee();Fde.exports=tat(t=>async(r,i={})=>{let s=await(await t.post("dag/resolve",{signal:i.signal,searchParams:rat({arg:`${r}${i.path?`/${i.path}`.replace(/\/[/]+/g,"/"):""}`,...i}),headers:i.headers})).json();return{cid:eat.parse(s.Cid["/"]),remainderPath:s.RemPath}})});var Vde=p((oNt,Kde)=>{l();"use strict";Kde.exports=(t,e)=>({export:Cde()(e),get:Bde()(t,e),import:Lde()(e),put:ST()(t,e),resolve:jde()(e)})});var T8=p((aNt,zde)=>{l();"use strict";zde.exports={SendingQuery:0,PeerResponse:1,FinalPeer:2,QueryError:3,Provider:4,Value:5,AddingPeer:6,DialingPeer:7}});var $de=p((cNt,Hde)=>{l();"use strict";var iat=me(),nat=Ee(),{Value:sat}=T8(),{fromString:oat}=(ut(),lt),{toString:aat}=(et(),Je);Hde.exports=iat(t=>{async function e(r,i={}){let n=await t.post("dht/get",{signal:i.signal,searchParams:nat({arg:r instanceof Uint8Array?aat(r):r,...i}),headers:i.headers});for await(let s of n.ndjson())if(s.Type===sat)return oat(s.Extra,"base64pad");throw new Error("not found")}return e})});var Wde=p((uNt,Gde)=>{l();"use strict";var{Multiaddr:cat}=rt(),uat=$r(),fat=me(),lat=Ee(),dat=Jo(),hat=ea(),{AbortController:pat}=sn(),{toString:yat}=(et(),Je);Gde.exports=fat(t=>{async function*e(r,i,n={}){let s=new pat,o=hat(s.signal,n.signal),a=await t.post("dht/put",{signal:o,searchParams:lat({arg:yat(r),...n}),...await dat(i,s,n.headers)});for await(let c of a.ndjson())c=uat(c),c.responses&&(c.responses=c.responses.map(({ID:u,Addrs:f})=>({id:u,addrs:(f||[]).map(d=>new cat(d))}))),yield c}return e})});var Xde=p((fNt,Yde)=>{l();"use strict";var{Multiaddr:gat}=rt(),bat=me(),mat=Ee(),{Provider:vat}=T8();Yde.exports=bat(t=>{async function*e(r,i={}){let n=await t.post("dht/findprovs",{signal:i.signal,searchParams:mat({arg:r.toString(),...i}),headers:i.headers});for await(let s of n.ndjson())if(s.Type===vat&&s.Responses)for(let{ID:o,Addrs:a}of s.Responses)yield{id:o,addrs:(a||[]).map(c=>new gat(c))}}return e})});var Zde=p((lNt,Qde)=>{l();"use strict";var{Multiaddr:wat}=rt(),_at=me(),Eat=Ee(),{FinalPeer:Sat}=T8();Qde.exports=_at(t=>{async function e(r,i={}){let n=await t.post("dht/findpeer",{signal:i.signal,searchParams:Eat({arg:r,...i}),headers:i.headers});for await(let s of n.ndjson())if(s.Type===Sat&&s.Responses){let{ID:o,Addrs:a}=s.Responses[0];return{id:o,addrs:(a||[]).map(c=>new wat(c))}}throw new Error("not found")}return e})});var ehe=p((dNt,Jde)=>{l();"use strict";var{Multiaddr:xat}=rt(),Aat=$r(),Iat=me(),Tat=Ee();Jde.exports=Iat(t=>{async function*e(r,i={recursive:!1}){let n=Array.isArray(r)?r:[r],s=await t.post("dht/provide",{signal:i.signal,searchParams:Tat({arg:n.map(o=>o.toString()),...i}),headers:i.headers});for await(let o of s.ndjson())o=Aat(o),o.responses?o.responses=o.responses.map(({ID:a,Addrs:c})=>({id:a,addrs:(c||[]).map(u=>new xat(u))})):o.responses=[],yield o}return e})});var rhe=p((hNt,the)=>{l();"use strict";var{Multiaddr:Rat}=rt(),Pat=$r(),Cat=me(),Oat=Ee();the.exports=Cat(t=>{async function*e(r,i={}){let n=await t.post("dht/query",{signal:i.signal,searchParams:Oat({arg:r.toString(),...i}),headers:i.headers});for await(let s of n.ndjson())s=Pat(s),s.responses=(s.responses||[]).map(({ID:o,Addrs:a})=>({id:o,addrs:(a||[]).map(c=>new Rat(c))})),yield s}return e})});var nhe=p((pNt,ihe)=>{l();"use strict";ihe.exports=t=>({get:$de()(t),put:Wde()(t),findProvs:Xde()(t),findPeer:Zde()(t),provide:ehe()(t),query:rhe()(t)})});var ohe=p((yNt,she)=>{l();"use strict";var kat=me(),qat=Ee();she.exports=kat(t=>{async function e(r={}){return(await t.post("diag/net",{signal:r.signal,searchParams:qat(r),headers:r.headers})).json()}return e})});var che=p((gNt,ahe)=>{l();"use strict";var Dat=me(),Nat=Ee();ahe.exports=Dat(t=>{async function e(r={}){return(await t.post("diag/sys",{signal:r.signal,searchParams:Nat(r),headers:r.headers})).json()}return e})});var fhe=p((bNt,uhe)=>{l();"use strict";var Bat=me(),Mat=Ee();uhe.exports=Bat(t=>{async function e(r={}){return(await t.post("diag/cmds",{signal:r.signal,searchParams:Mat(r),headers:r.headers})).json()}return e})});var dhe=p((mNt,lhe)=>{l();"use strict";lhe.exports=t=>({net:ohe()(t),sys:che()(t),cmds:fhe()(t)})});var phe=p((vNt,hhe)=>{l();"use strict";var Lat=me(),Uat=Ee();hhe.exports=Lat(t=>async(r,i={})=>(await(await t.post("dns",{signal:i.signal,searchParams:Uat({arg:r,...i}),headers:i.headers})).json()).Path)});var ghe=p((wNt,yhe)=>{l();"use strict";var Fat=me(),jat=Ee();yhe.exports=Fat(t=>{async function e(r,i,n={}){await(await t.post("files/chmod",{signal:n.signal,searchParams:jat({arg:r,mode:i,...n}),headers:n.headers})).text()}return e})});var mhe=p((_Nt,bhe)=>{l();"use strict";var{CID:Kat}=(Ae(),De),Vat=me(),zat=Ee();bhe.exports=Vat(t=>{async function e(r,i,n={}){let s=Array.isArray(r)?r:[r];await(await t.post("files/cp",{signal:n.signal,searchParams:zat({arg:s.concat(i).map(a=>Kat.asCID(a)?`/ipfs/${a}`:a),...n}),headers:n.headers})).text()}return e})});var whe=p((ENt,vhe)=>{l();"use strict";var{CID:Hat}=(Ae(),De),$at=me(),Gat=Ee();vhe.exports=$at(t=>{async function e(r,i={}){if(!r||typeof r!="string")throw new Error("ipfs.files.flush requires a path");let s=await(await t.post("files/flush",{signal:i.signal,searchParams:Gat({arg:r,...i}),headers:i.headers})).json();return Hat.parse(s.Cid)}return e})});var xT=p((SNt,_he)=>{l();"use strict";var Wat=$r();function Yat(t){let e=Wat(t);return Object.prototype.hasOwnProperty.call(e,"mode")&&(e.mode=parseInt(e.mode,8)),Object.prototype.hasOwnProperty.call(e,"mtime")&&(e.mtime={secs:e.mtime,nsecs:e.mtimeNsecs||0},delete e.mtimeNsecs),e}_he.exports=Yat});var Ihe=p((xNt,Ahe)=>{l();"use strict";var{CID:Ehe}=(Ae(),De),She=xT(),Xat=me(),Qat=Ee();Ahe.exports=Xat(t=>{async function*e(r,i={}){if(!r)throw new Error("ipfs.files.ls requires a path");let n=await t.post("files/ls",{signal:i.signal,searchParams:Qat({arg:Ehe.asCID(r)?`/ipfs/${r}`:r,long:!0,...i,stream:!0}),headers:i.headers});for await(let s of n.ndjson())if("Entries"in s)for(let o of s.Entries||[])yield xhe(She(o));else yield xhe(She(s))}return e});function xhe(t){return t.hash&&(t.cid=Ehe.parse(t.hash)),delete t.hash,t.type=t.type===1?"directory":"file",t}});var Rhe=p((ANt,The)=>{l();"use strict";var Zat=me(),Jat=Ee();The.exports=Zat(t=>{async function e(r,i={}){await(await t.post("files/mkdir",{signal:i.signal,searchParams:Jat({arg:r,...i}),headers:i.headers})).text()}return e})});var Che=p((INt,Phe)=>{l();"use strict";var ect=me(),tct=Ee();Phe.exports=ect(t=>{async function e(r,i,n={}){Array.isArray(r)||(r=[r]),await(await t.post("files/mv",{signal:n.signal,searchParams:tct({arg:r.concat(i),...n}),headers:n.headers})).text()}return e})});var Yg=p((TNt,Ohe)=>{l();Ohe.exports=t=>{if(t[Symbol.asyncIterator])return t;if(t.getReader)return async function*(){let e=t.getReader();try{for(;;){let{done:r,value:i}=await e.read();if(r)return;yield i}}finally{e.releaseLock()}}();throw new Error("unknown stream")}});var qhe=p((RNt,khe)=>{l();"use strict";var rct=Yg(),ict=me(),nct=Ee();khe.exports=ict(t=>{async function*e(r,i={}){let n=await t.post("files/read",{signal:i.signal,searchParams:nct({arg:r,count:i.length,...i}),headers:i.headers});yield*rct(n.body)}return e})});var Nhe=p((PNt,Dhe)=>{l();"use strict";var sct=me(),oct=Ee();Dhe.exports=sct(t=>{async function e(r,i={}){await(await t.post("files/rm",{signal:i.signal,searchParams:oct({arg:r,...i}),headers:i.headers})).text()}return e})});var AT=p((CNt,Bhe)=>{l();"use strict";var{CID:act}=(Ae(),De),cct=xT(),uct=me(),fct=Ee();Bhe.exports=uct(t=>{async function e(r,i={}){let s=await(await t.post("files/stat",{signal:i.signal,searchParams:fct({arg:r,...i}),headers:i.headers})).json();return s.WithLocality=s.WithLocality||!1,lct(cct(s))}return e});function lct(t){return t.cid=act.parse(t.hash),delete t.hash,t}});var Lhe=p((ONt,Mhe)=>{l();"use strict";var dct=me(),hct=Ee();Mhe.exports=dct(t=>{async function e(r,i={}){await(await t.post("files/touch",{signal:i.signal,searchParams:hct({arg:r,...i}),headers:i.headers})).text()}return e})});var Fhe=p((kNt,Uhe)=>{l();"use strict";var pct=I8(),yct=vT(),gct=me(),bct=Jo(),mct=Ee(),vct=ea(),{AbortController:wct}=sn();Uhe.exports=gct(t=>{async function e(r,i,n={}){let s=new wct,o=vct(s.signal,n.signal);await(await t.post("files/write",{signal:o,searchParams:mct({arg:r,streamChannels:!0,count:n.length,...n}),...await bct({content:i,path:"arg",mode:pct(n.mode),mtime:yct(n.mtime)},s,n.headers)})).text()}return e})});var Khe=p((qNt,jhe)=>{l();"use strict";jhe.exports=t=>({chmod:ghe()(t),cp:mhe()(t),flush:whe()(t),ls:Ihe()(t),mkdir:Rhe()(t),mv:Che()(t),read:qhe()(t),rm:Nhe()(t),stat:AT()(t),touch:Lhe()(t),write:Fhe()(t)})});var zhe=p((DNt,Vhe)=>{l();"use strict";var{CID:_ct}=(Ae(),De),Ect=me(),Sct=Ee();Vhe.exports=Ect(t=>{async function*e(r,i={}){let n={arg:`${r instanceof Uint8Array?_ct.decode(r):r}`,...i};n.compressionLevel&&(n["compression-level"]=n.compressionLevel,delete n.compressionLevel),yield*(await t.post("get",{signal:i.signal,searchParams:Sct(n),headers:i.headers})).iterator()}return e})});var $he=p((NNt,Hhe)=>{l();"use strict";var xct=me();Hhe.exports=xct(t=>()=>{let e=new URL(t.opts.base||"");return{host:e.hostname,port:e.port,protocol:e.protocol,pathname:e.pathname,"api-path":e.pathname}})});var IT=p((BNt,Ghe)=>{l();"use strict";var Act=$r(),{Multiaddr:Ict}=rt(),Tct=me(),Rct=Ee();Ghe.exports=Tct(t=>{async function e(r={}){let n=await(await t.post("id",{signal:r.signal,searchParams:Rct({arg:r.peerId?r.peerId.toString():void 0,...r}),headers:r.headers})).json(),s={...Act(n)};return s.addresses&&(s.addresses=s.addresses.map(o=>new Ict(o))),s}return e})});var Yhe=p((MNt,Whe)=>{l();"use strict";var Pct=IT();Whe.exports=t=>{let e=Pct(t);async function r(i={}){let n=await e(i);return Boolean(n&&n.addresses&&n.addresses.length)}return r}});var Qhe=p((LNt,Xhe)=>{l();"use strict";var Cct=$r(),Oct=me(),kct=Ee();Xhe.exports=Oct(t=>{async function e(r,i={type:"rsa",size:2048}){let s=await(await t.post("key/gen",{signal:i.signal,searchParams:kct({arg:r,...i}),headers:i.headers})).json();return Cct(s)}return e})});var Jhe=p((UNt,Zhe)=>{l();"use strict";var qct=$r(),Dct=me(),Nct=Ee();Zhe.exports=Dct(t=>{async function e(r={}){return((await(await t.post("key/list",{signal:r.signal,searchParams:Nct(r),headers:r.headers})).json()).Keys||[]).map(s=>qct(s))}return e})});var t0e=p((FNt,e0e)=>{l();"use strict";var Bct=$r(),Mct=me(),Lct=Ee();e0e.exports=Mct(t=>{async function e(r,i,n={}){let s=await t.post("key/rename",{signal:n.signal,searchParams:Lct({arg:[r,i],...n}),headers:n.headers});return Bct(await s.json())}return e})});var i0e=p((jNt,r0e)=>{l();"use strict";var Uct=$r(),Fct=me(),jct=Ee();r0e.exports=Fct(t=>{async function e(r,i={}){let s=await(await t.post("key/rm",{signal:i.signal,searchParams:jct({arg:r,...i}),headers:i.headers})).json();return Uct(s.Keys[0])}return e})});var s0e=p((KNt,n0e)=>{l();"use strict";var Kct=$r(),Vct=me(),zct=Ee();n0e.exports=Vct(t=>{async function e(r,i,n,s={}){let a=await(await t.post("key/import",{signal:s.signal,searchParams:zct({arg:r,pem:i,password:n,...s}),headers:s.headers})).json();return Kct(a)}return e})});var a0e=p((VNt,o0e)=>{l();"use strict";var Hct=me(),$ct=Cd();o0e.exports=Hct(t=>async(r,i,n={})=>{throw $ct(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")})});var u0e=p((zNt,c0e)=>{l();"use strict";var Gct=me(),Wct=Cd();c0e.exports=Gct(t=>async(r,i={})=>{throw Wct(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")})});var l0e=p((HNt,f0e)=>{l();"use strict";f0e.exports=t=>({gen:Qhe()(t),list:Jhe()(t),rename:t0e()(t),rm:i0e()(t),import:s0e()(t),export:a0e()(t),info:u0e()(t)})});var h0e=p(($Nt,d0e)=>{l();"use strict";var Yct=me(),Xct=Ee();d0e.exports=Yct(t=>{async function*e(r={}){yield*(await t.post("log/tail",{signal:r.signal,searchParams:Xct(r),headers:r.headers})).ndjson()}return e})});var y0e=p((GNt,p0e)=>{l();"use strict";var Qct=me(),Zct=Ee();p0e.exports=Qct(t=>{async function e(r={}){return(await(await t.post("log/ls",{signal:r.signal,searchParams:Zct(r),headers:r.headers})).json()).Strings}return e})});var b0e=p((WNt,g0e)=>{l();"use strict";var Jct=$r(),eut=me(),tut=Ee();g0e.exports=eut(t=>{async function e(r,i,n={}){let s=await t.post("log/level",{signal:n.signal,searchParams:tut({arg:[r,i],...n}),headers:n.headers});return Jct(await s.json())}return e})});var v0e=p((YNt,m0e)=>{l();"use strict";m0e.exports=t=>({tail:h0e()(t),ls:y0e()(t),level:b0e()(t)})});var E0e=p((XNt,_0e)=>{l();"use strict";var{CID:w0e}=(Ae(),De),rut=me(),iut=Ee(),nut=AT();_0e.exports=rut((t,e)=>{async function*r(i,n={}){let s=`${i instanceof Uint8Array?w0e.decode(i):i}`;async function o(c){let u=c.Hash;if(u.includes("/")){let d=u.startsWith("/ipfs/")?u:`/ipfs/${u}`;u=(await nut(e)(d)).cid}else u=w0e.parse(u);let f={name:c.Name,path:s+(c.Name?`/${c.Name}`:""),size:c.Size,cid:u,type:sut(c)};return c.Mode&&(f.mode=parseInt(c.Mode,8)),c.Mtime!==void 0&&c.Mtime!==null&&(f.mtime={secs:c.Mtime},c.MtimeNsecs!==void 0&&c.MtimeNsecs!==null&&(f.mtime.nsecs=c.MtimeNsecs)),f}let a=await t.post("ls",{signal:n.signal,searchParams:iut({arg:s,...n}),headers:n.headers});for await(let c of a.ndjson()){if(c=c.Objects,!c)throw new Error("expected .Objects in results");if(c=c[0],!c)throw new Error("expected one array in results.Objects");let u=c.Links;if(!Array.isArray(u))throw new Error("expected one array in results.Objects[0].Links");if(!u.length){yield o(c);return}yield*u.map(o)}}return r});function sut(t){switch(t.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}});var x0e=p((QNt,S0e)=>{l();"use strict";var out=$r(),aut=me(),cut=Ee();S0e.exports=aut(t=>{async function e(r={}){let i=await t.post("dns",{signal:r.signal,searchParams:cut(r),headers:r.headers});return out(await i.json())}return e})});var I0e=p((ZNt,A0e)=>{l();"use strict";var uut=$r(),fut=me(),lut=Ee();A0e.exports=fut(t=>{async function e(r,i={}){let n=await t.post("name/publish",{signal:i.signal,searchParams:lut({arg:`${r}`,...i}),headers:i.headers});return uut(await n.json())}return e})});var R0e=p((JNt,T0e)=>{l();"use strict";var dut=me(),hut=Ee();T0e.exports=dut(t=>{async function*e(r,i={}){let n=await t.post("name/resolve",{signal:i.signal,searchParams:hut({arg:r,stream:!0,...i}),headers:i.headers});for await(let s of n.ndjson())yield s.Path}return e})});var C0e=p((eBt,P0e)=>{l();"use strict";var put=$r(),yut=me(),gut=Ee();P0e.exports=yut(t=>{async function e(r,i={}){let n=await t.post("name/pubsub/cancel",{signal:i.signal,searchParams:gut({arg:r,...i}),headers:i.headers});return put(await n.json())}return e})});var k0e=p((tBt,O0e)=>{l();"use strict";var but=$r(),mut=me(),vut=Ee();O0e.exports=mut(t=>{async function e(r={}){let i=await t.post("name/pubsub/state",{signal:r.signal,searchParams:vut(r),headers:r.headers});return but(await i.json())}return e})});var D0e=p((rBt,q0e)=>{l();"use strict";var wut=me(),_ut=Ee();q0e.exports=wut(t=>{async function e(r={}){return(await(await t.post("name/pubsub/subs",{signal:r.signal,searchParams:_ut(r),headers:r.headers})).json()).Strings||[]}return e})});var B0e=p((iBt,N0e)=>{l();"use strict";N0e.exports=t=>({cancel:C0e()(t),state:k0e()(t),subs:D0e()(t)})});var L0e=p((nBt,M0e)=>{l();"use strict";M0e.exports=t=>({publish:I0e()(t),resolve:R0e()(t),pubsub:B0e()(t)})});var F0e=p((sBt,U0e)=>{l();"use strict";var{CID:Eut}=(Ae(),De),Sut=me(),xut=Ee();U0e.exports=Sut(t=>{async function e(r,i={}){let s=await(await t.post("object/data",{signal:i.signal,searchParams:xut({arg:`${r instanceof Uint8Array?Eut.decode(r):r}`,...i}),headers:i.headers})).arrayBuffer();return new Uint8Array(s,0,s.byteLength)}return e})});var V0e=p((oBt,K0e)=>{l();"use strict";var{CID:j0e}=(Ae(),De),Aut=me(),Iut=Ee(),{fromString:Tut}=(ut(),lt);K0e.exports=Aut(t=>{async function e(r,i={}){let s=await(await t.post("object/get",{signal:i.signal,searchParams:Iut({arg:`${r instanceof Uint8Array?j0e.decode(r):r}`,dataEncoding:"base64",...i}),headers:i.headers})).json();return{Data:Tut(s.Data,"base64pad"),Links:(s.Links||[]).map(o=>({Name:o.Name,Hash:j0e.parse(o.Hash),Tsize:o.Size}))}}return e})});var $0e=p((aBt,H0e)=>{l();"use strict";var{CID:z0e}=(Ae(),De),Rut=me(),Put=Ee();H0e.exports=Rut(t=>{async function e(r,i={}){return((await(await t.post("object/links",{signal:i.signal,searchParams:Put({arg:`${r instanceof Uint8Array?z0e.decode(r):r}`,...i}),headers:i.headers})).json()).Links||[]).map(o=>({Name:o.Name,Tsize:o.Size,Hash:z0e.parse(o.Hash)}))}return e})});var W0e=p((cBt,G0e)=>{l();"use strict";var{CID:Cut}=(Ae(),De),Out=me(),kut=Ee();G0e.exports=Out(t=>{async function e(r={}){let i=await t.post("object/new",{signal:r.signal,searchParams:kut({arg:r.template,...r}),headers:r.headers}),{Hash:n}=await i.json();return Cut.parse(n)}return e})});var X0e=p((uBt,Y0e)=>{l();"use strict";var{CID:qut}=(Ae(),De),Dut=me(),Nut=Ee();Y0e.exports=Dut(t=>{async function e(r,i,n={}){let s=await t.post("object/patch/add-link",{signal:n.signal,searchParams:Nut({arg:[`${r}`,i.Name||i.name||"",(i.Hash||i.cid||"").toString()||null],...n}),headers:n.headers}),{Hash:o}=await s.json();return qut.parse(o)}return e})});var Z0e=p((fBt,Q0e)=>{l();"use strict";var{CID:But}=(Ae(),De),Mut=Jo(),Lut=me(),Uut=Ee(),Fut=ea(),{AbortController:jut}=sn();Q0e.exports=Lut(t=>{async function e(r,i,n={}){let s=new jut,o=Fut(s.signal,n.signal),a=await t.post("object/patch/append-data",{signal:o,searchParams:Uut({arg:`${r}`,...n}),...await Mut(i,s,n.headers)}),{Hash:c}=await a.json();return But.parse(c)}return e})});var e1e=p((lBt,J0e)=>{l();"use strict";var{CID:Kut}=(Ae(),De),Vut=me(),zut=Ee();J0e.exports=Vut(t=>{async function e(r,i,n={}){let s=await t.post("object/patch/rm-link",{signal:n.signal,searchParams:zut({arg:[`${r}`,i.Name||i.name||null],...n}),headers:n.headers}),{Hash:o}=await s.json();return Kut.parse(o)}return e})});var r1e=p((dBt,t1e)=>{l();"use strict";var{CID:Hut}=(Ae(),De),$ut=Jo(),Gut=me(),Wut=Ee(),Yut=ea(),{AbortController:Xut}=sn();t1e.exports=Gut(t=>{async function e(r,i,n={}){let s=new Xut,o=Yut(s.signal,n.signal),a=await t.post("object/patch/set-data",{signal:o,searchParams:Wut({arg:[`${r}`],...n}),...await $ut(i,s,n.headers)}),{Hash:c}=await a.json();return Hut.parse(c)}return e})});var n1e=p((hBt,i1e)=>{l();"use strict";i1e.exports=t=>({addLink:X0e()(t),appendData:Z0e()(t),rmLink:e1e()(t),setData:r1e()(t)})});var o1e=p((pBt,s1e)=>{l();"use strict";var Qut=me();s1e.exports=(t,e)=>Qut(i=>{let n=ST()(t,e);async function s(o,a={}){return n(o,{...a,format:"dag-pb",hashAlg:"sha2-256",version:0})}return s})(e)});var c1e=p((yBt,a1e)=>{l();"use strict";var{CID:Zut}=(Ae(),De),Jut=me(),eft=Ee();a1e.exports=Jut(t=>{async function e(r,i={}){let s=await(await t.post("object/stat",{signal:i.signal,searchParams:eft({arg:`${r}`,...i}),headers:i.headers})).json();return{...s,Hash:Zut.parse(s.Hash)}}return e})});var f1e=p((gBt,u1e)=>{l();"use strict";u1e.exports=(t,e)=>({data:F0e()(e),get:V0e()(e),links:$0e()(e),new:W0e()(e),patch:n1e()(e),put:o1e()(t,e),stat:c1e()(e)})});var d1e=p((bBt,l1e)=>{l();"use strict";var tft=A8(),TT=Ee(),hu=class{constructor(e){this.client=new tft(e)}static encodeEndpoint(e){let r=String(e);if(r==="undefined")throw Error("endpoint is required");return r[r.length-1]==="/"?r.slice(0,-1):r}static decodeRemoteService(e){return{service:e.Service,endpoint:new URL(e.ApiEndpoint),...e.Stat&&{stat:hu.decodeStat(e.Stat)}}}static decodeStat(e){switch(e.Status){case"valid":{let{Pinning:r,Pinned:i,Queued:n,Failed:s}=e.PinCount;return{status:"valid",pinCount:{queued:n,pinning:r,pinned:i,failed:s}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}};hu.prototype.add=async function(e,r){let{endpoint:i,key:n,headers:s,timeout:o,signal:a}=r;await this.client.post("pin/remote/service/add",{timeout:o,signal:a,searchParams:TT({arg:[e,hu.encodeEndpoint(i),n]}),headers:s})};hu.prototype.rm=async function(e,r={}){await this.client.post("pin/remote/service/rm",{signal:r.signal,headers:r.headers,searchParams:TT({arg:e})})};hu.prototype.ls=async function(e={}){let{stat:r,headers:i,timeout:n,signal:s}=e,o=await this.client.post("pin/remote/service/ls",{timeout:n,signal:s,headers:i,searchParams:r===!0?TT({stat:r}):void 0}),{RemoteServices:a}=await o.json();return a.map(hu.decodeRemoteService)};l1e.exports=hu});var v1e=p((mBt,m1e)=>{l();"use strict";var{CID:h1e}=(Ae(),De),rft=A8(),ift=d1e(),p1e=Ee(),O1=class{constructor(e){this.client=new rft(e),this.service=new ift(e)}};O1.prototype.add=async function(e,{timeout:r,signal:i,headers:n,...s}){let o=await this.client.post("pin/remote/add",{timeout:r,signal:i,headers:n,searchParams:nft({cid:e,...s})});return y1e(await o.json())};O1.prototype.ls=async function*({timeout:e,signal:r,headers:i,...n}){let s=await this.client.post("pin/remote/ls",{timeout:e,signal:r,headers:i,searchParams:RT(n)});for await(let o of s.ndjson())yield y1e(o)};O1.prototype.rm=async function({timeout:e,signal:r,headers:i,...n}){await this.client.post("pin/remote/rm",{timeout:e,signal:r,headers:i,searchParams:RT({...n,all:!1})})};O1.prototype.rmAll=async function({timeout:t,signal:e,headers:r,...i}){await this.client.post("pin/remote/rm",{timeout:t,signal:e,headers:r,searchParams:RT({...i,all:!0})})};var y1e=({Name:t,Status:e,Cid:r})=>({cid:h1e.parse(r),name:t,status:e}),g1e=t=>{if(typeof t=="string"&&t!=="")return t;throw new TypeError("service name must be passed")},b1e=t=>{if(h1e.asCID(t))return t.toString();throw new TypeError(`CID instance expected instead of ${typeof t}`)},RT=({service:t,cid:e,name:r,status:i,all:n})=>{let s=p1e({service:g1e(t),name:r,force:n?!0:void 0});if(e)for(let o of e)s.append("cid",b1e(o));if(i)for(let o of i)s.append("status",o);return s},nft=({cid:t,service:e,background:r,name:i,origins:n})=>{let s=p1e({arg:b1e(t),service:g1e(e),name:i,background:r?!0:void 0});if(n)for(let o of n)s.append("origin",o.toString());return s};m1e.exports=O1});var PT=p((vBt,_1e)=>{l();"use strict";var{CID:w1e}=(Ae(),De),sft=me(),{normaliseInput:oft}=b0(),aft=Ee();_1e.exports=sft(t=>{async function*e(r,i={}){for await(let{path:n,recursive:s,metadata:o}of oft(r)){let a=await t.post("pin/add",{signal:i.signal,searchParams:aft({...i,arg:n,recursive:s,metadata:o?JSON.stringify(o):void 0,stream:!0}),headers:i.headers});for await(let c of a.ndjson()){if(c.Pins){for(let u of c.Pins)yield w1e.parse(u);continue}yield w1e.parse(c)}}}return e})});var S1e=p((wBt,E1e)=>{l();"use strict";var cft=PT(),uft=Gn(),fft=me();E1e.exports=t=>{let e=cft(t);return fft(()=>{async function r(i,n={}){return uft(e([{path:i,...n}],n))}return r})(t)}});var I1e=p((_Bt,A1e)=>{l();"use strict";var{CID:lft}=(Ae(),De),dft=me(),hft=Ee();function x1e(t,e,r){let i={type:t,cid:lft.parse(e)};return r&&(i.metadata=r),i}A1e.exports=dft(t=>{async function*e(r={}){let i=[];r.paths&&(i=Array.isArray(r.paths)?r.paths:[r.paths]);let n=await t.post("pin/ls",{signal:r.signal,searchParams:hft({...r,arg:i.map(s=>`${s}`),stream:!0}),headers:r.headers});for await(let s of n.ndjson()){if(s.Keys){for(let o of Object.keys(s.Keys))yield x1e(s.Keys[o].Type,o,s.Keys[o].Metadata);return}yield x1e(s.Type,s.Cid,s.Metadata)}}return e})});var CT=p((EBt,R1e)=>{l();"use strict";var{CID:T1e}=(Ae(),De),pft=me(),{normaliseInput:yft}=b0(),gft=Ee();R1e.exports=pft(t=>{async function*e(r,i={}){for await(let{path:n,recursive:s}of yft(r)){let o=new URLSearchParams(i.searchParams);o.append("arg",`${n}`),s!=null&&o.set("recursive",String(s));let a=await t.post("pin/rm",{signal:i.signal,headers:i.headers,searchParams:gft({...i,arg:`${n}`,recursive:s})});for await(let c of a.ndjson()){if(c.Pins){yield*c.Pins.map(u=>T1e.parse(u));continue}yield T1e.parse(c)}}}return e})});var C1e=p((SBt,P1e)=>{l();"use strict";var bft=CT(),mft=Gn(),vft=me();P1e.exports=t=>{let e=bft(t);return vft(()=>{async function r(i,n={}){return mft(e([{path:i,...n}],n))}return r})(t)}});var k1e=p((xBt,O1e)=>{l();"use strict";var wft=v1e();O1e.exports=t=>({add:S1e()(t),addAll:PT()(t),ls:I1e()(t),rm:C1e()(t),rmAll:CT()(t),remote:new wft(t)})});var D1e=p((ABt,q1e)=>{l();"use strict";var _ft=$r(),Eft=me(),Sft=Ee();q1e.exports=Eft(t=>{async function*e(r,i={}){yield*(await t.post("ping",{signal:i.signal,searchParams:Sft({arg:`${r}`,...i}),headers:i.headers,transform:_ft})).ndjson()}return e})});var M1e=p((IBt,B1e)=>{l();"use strict";var{AbortController:xft}=sn(),N1e=class{constructor(){this._subs=new Map}subscribe(e,r,i){let n=this._subs.get(e)||[];if(n.find(o=>o.handler===r))throw new Error(`Already subscribed to ${e} with this handler`);let s=new xft;return this._subs.set(e,[{handler:r,controller:s}].concat(n)),i&&i.addEventListener("abort",()=>this.unsubscribe(e,r)),s.signal}unsubscribe(e,r){let i=this._subs.get(e)||[],n;r?(this._subs.set(e,i.filter(s=>s.handler!==r)),n=i.filter(s=>s.handler===r)):(this._subs.set(e,[]),n=i),(this._subs.get(e)||[]).length||this._subs.delete(e),n.forEach(s=>s.controller.abort())}};B1e.exports=N1e});var U1e=p((TBt,L1e)=>{l();"use strict";var Aft=me(),Ift=Ee();L1e.exports=Aft(t=>{async function e(r={}){let{Strings:i}=await(await t.post("pubsub/ls",{signal:r.signal,searchParams:Ift(r),headers:r.headers})).json();return i||[]}return e})});var j1e=p((RBt,F1e)=>{l();"use strict";var Tft=me(),Rft=Ee();F1e.exports=Tft(t=>{async function e(r,i={}){let n=await t.post("pubsub/peers",{signal:i.signal,searchParams:Rft({arg:r,...i}),headers:i.headers}),{Strings:s}=await n.json();return s||[]}return e})});var V1e=p((PBt,K1e)=>{l();"use strict";var Pft=me(),Cft=Ee(),Oft=Jo(),kft=ea(),{AbortController:qft}=sn();K1e.exports=Pft(t=>{async function e(r,i,n={}){let s=Cft({arg:r,...n}),o=new qft,a=kft(o.signal,n.signal);await(await t.post("pubsub/pub",{signal:a,searchParams:s,...await Oft(i,o,n.headers)})).text()}return e})});var H1e=p((CBt,z1e)=>{l();"use strict";var{fromString:OT}=(ut(),lt),{toString:Dft}=(et(),Je),Nft=be()("ipfs-http-client:pubsub:subscribe"),Bft=me(),Mft=Ee();z1e.exports=(t,e)=>Bft(r=>{async function i(n,s,o={}){o.signal=e.subscribe(n,s,o.signal);let a,c,u=new Promise((d,h)=>{a=d,c=h}),f=setTimeout(()=>a(),1e3);return r.post("pubsub/sub",{signal:o.signal,searchParams:Mft({arg:n,...o}),headers:o.headers}).catch(d=>{e.unsubscribe(n,s),c(d)}).then(d=>{clearTimeout(f),!!d&&(Lft(d,{onMessage:s,onEnd:()=>e.unsubscribe(n,s),onError:o.onError}),a())}),u}return i})(t);async function Lft(t,{onMessage:e,onEnd:r,onError:i}){i=i||Nft;try{for await(let n of t.ndjson())try{if(!n.from)continue;e({from:Dft(OT(n.from,"base64pad"),"base58btc"),data:OT(n.data,"base64pad"),seqno:OT(n.seqno,"base64pad"),topicIDs:n.topicIDs})}catch(s){s.message=`Failed to parse pubsub message: ${s.message}`,i(s,!1,n)}}catch(n){Uft(n)||i(n,!0)}finally{r()}}var Uft=t=>{switch(t.type){case"aborted":return!0;case"abort":return!0;default:return t.name==="AbortError"}}});var G1e=p((OBt,$1e)=>{l();"use strict";$1e.exports=(t,e)=>{async function r(i,n){e.unsubscribe(i,n)}return r}});var Y1e=p((kBt,W1e)=>{l();"use strict";var Fft=M1e();W1e.exports=t=>{let e=new Fft;return{ls:U1e()(t),peers:j1e()(t),publish:V1e()(t),subscribe:H1e()(t,e),unsubscribe:G1e()(t,e)}}});var Q1e=p((qBt,X1e)=>{l();"use strict";var jft=$r(),Kft=me(),Vft=Ee();X1e.exports=Kft(t=>{async function*e(r={}){yield*(await t.post("refs/local",{signal:r.signal,transform:jft,searchParams:Vft(r),headers:r.headers})).ndjson()}return e})});var J1e=p((DBt,Z1e)=>{l();"use strict";var{CID:zft}=(Ae(),De),Hft=$r(),$ft=me(),Gft=Ee();Z1e.exports=$ft((t,e)=>Object.assign(async function*(i,n={}){let s=Array.isArray(i)?i:[i];yield*(await t.post("refs",{signal:n.signal,searchParams:Gft({arg:s.map(a=>`${a instanceof Uint8Array?zft.decode(a):a}`),...n}),headers:n.headers,transform:Hft})).ndjson()},{local:Q1e()(e)}))});var tpe=p((NBt,epe)=>{l();"use strict";var{CID:Wft}=(Ae(),De),Yft=me(),Xft=Ee();epe.exports=Yft(t=>{async function*e(r={}){yield*(await t.post("repo/gc",{signal:r.signal,searchParams:Xft(r),headers:r.headers,transform:n=>({err:n.Error?new Error(n.Error):null,cid:(n.Key||{})["/"]?Wft.parse(n.Key["/"]):null})})).ndjson()}return e})});var kT=p((BBt,rpe)=>{l();"use strict";var Qft=me(),Zft=Ee();rpe.exports=Qft(t=>{async function e(r={}){let n=await(await t.post("repo/stat",{signal:r.signal,searchParams:Zft(r),headers:r.headers})).json();return{numObjects:BigInt(n.NumObjects),repoSize:BigInt(n.RepoSize),repoPath:n.RepoPath,version:n.Version,storageMax:BigInt(n.StorageMax)}}return e})});var npe=p((MBt,ipe)=>{l();"use strict";var Jft=me(),elt=Ee();ipe.exports=Jft(t=>{async function e(r={}){return(await(await t.post("repo/version",{signal:r.signal,searchParams:elt(r),headers:r.headers})).json()).Version}return e})});var ope=p((LBt,spe)=>{l();"use strict";spe.exports=t=>({gc:tpe()(t),stat:kT()(t),version:npe()(t)})});var cpe=p((UBt,ape)=>{l();"use strict";var tlt=me(),rlt=Ee();ape.exports=tlt(t=>{async function e(r,i={}){let n=await t.post("resolve",{signal:i.signal,searchParams:rlt({arg:r,...i}),headers:i.headers}),{Path:s}=await n.json();return s}return e})});var fpe=p((FBt,upe)=>{l();"use strict";var ilt=me(),nlt=Cd();upe.exports=ilt(t=>async(r={})=>{throw nlt(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")})});var dpe=p((jBt,lpe)=>{l();"use strict";var slt=me(),olt=Ee();lpe.exports=slt(t=>{async function*e(r={}){yield*(await t.post("stats/bw",{signal:r.signal,searchParams:olt(r),headers:r.headers,transform:n=>({totalIn:BigInt(n.TotalIn),totalOut:BigInt(n.TotalOut),rateIn:parseFloat(n.RateIn),rateOut:parseFloat(n.RateOut)})})).ndjson()}return e})});var ppe=p((KBt,hpe)=>{l();"use strict";hpe.exports=t=>({bitswap:_T()(t),bw:dpe()(t),repo:kT()(t)})});var gpe=p((VBt,ype)=>{l();"use strict";var alt=me(),clt=Ee();ype.exports=alt(t=>{async function e(r={}){await(await t.post("shutdown",{signal:r.signal,searchParams:clt(r),headers:r.headers})).text()}return e})});var mpe=p((zBt,bpe)=>{l();"use strict";var{Multiaddr:ult}=rt(),flt=me(),llt=Ee();bpe.exports=flt(t=>{async function e(r={}){let i=await t.post("swarm/addrs",{signal:r.signal,searchParams:llt(r),headers:r.headers}),{Addrs:n}=await i.json();return Object.keys(n).map(s=>({id:s,addrs:(n[s]||[]).map(o=>new ult(o))}))}return e})});var wpe=p((HBt,vpe)=>{l();"use strict";var dlt=me(),hlt=Ee();vpe.exports=dlt(t=>{async function e(r,i={}){let n=await t.post("swarm/connect",{signal:i.signal,searchParams:hlt({arg:r,...i}),headers:i.headers}),{Strings:s}=await n.json();return s||[]}return e})});var Epe=p(($Bt,_pe)=>{l();"use strict";var plt=me(),ylt=Ee();_pe.exports=plt(t=>{async function e(r,i={}){let n=await t.post("swarm/disconnect",{signal:i.signal,searchParams:ylt({arg:r,...i}),headers:i.headers}),{Strings:s}=await n.json();return s||[]}return e})});var xpe=p((GBt,Spe)=>{l();"use strict";var{Multiaddr:glt}=rt(),blt=me(),mlt=Ee();Spe.exports=blt(t=>{async function e(r={}){let i=await t.post("swarm/addrs/local",{signal:r.signal,searchParams:mlt(r),headers:r.headers}),{Strings:n}=await i.json();return(n||[]).map(s=>new glt(s))}return e})});var Ipe=p((WBt,Ape)=>{l();"use strict";var{Multiaddr:vlt}=rt(),wlt=me(),_lt=Ee();Ape.exports=wlt(t=>{async function e(r={}){let i=await t.post("swarm/peers",{signal:r.signal,searchParams:_lt(r),headers:r.headers}),{Peers:n}=await i.json();return(n||[]).map(s=>({addr:new vlt(s.Addr),peer:s.Peer,muxer:s.Muxer,latency:s.Latency,streams:s.Streams,direction:s.Direction==null?void 0:s.Direction===0?"inbound":"outbound"}))}return e})});var Rpe=p((YBt,Tpe)=>{l();"use strict";Tpe.exports=t=>({addrs:mpe()(t),connect:wpe()(t),disconnect:Epe()(t),localAddrs:xpe()(t),peers:Ipe()(t)})});var Cpe=p((XBt,Ppe)=>{l();"use strict";var Elt=$r(),Slt=me(),xlt=Ee();Ppe.exports=Slt(t=>{async function e(r={}){let i=await t.post("version",{signal:r.signal,searchParams:xlt(r),headers:r.headers});return Elt(await i.json())}return e})});var qpe=p((QBt,kpe)=>{l();"use strict";var{CID:Alt}=(Ae(),De),{multiaddr:Ilt}=rt(),Tlt=$7(),Rlt=iw(),Plt=hT(),Clt=pT(),Olt=yT(),klt=(wt(),Mt),qlt=(Gc(),ab),{identity:Ope}=(qc(),kc),{bases:Dlt,hashes:Nlt,codecs:Blt}=(e4(),e9);function Mlt(t={}){let e={name:Ope.name,code:Ope.code,encode:u=>u,decode:u=>u},r=Object.values(Dlt);(t.ipld&&t.ipld.bases?t.ipld.bases:[]).forEach(u=>r.push(u));let i=new Olt({bases:r,loadBase:t.ipld&&t.ipld.loadBase}),n=Object.values(Blt);[klt,qlt,e].concat(t.ipld&&t.ipld.codecs||[]).forEach(u=>n.push(u));let s=new Plt({codecs:n,loadCodec:t.ipld&&t.ipld.loadCodec}),o=Object.values(Nlt);(t.ipld&&t.ipld.hashers?t.ipld.hashers:[]).forEach(u=>o.push(u));let a=new Clt({hashers:o,loadHasher:t.ipld&&t.ipld.loadHasher});return{add:kle()(t),addAll:wT()(t),bitswap:jle()(t),block:Xle()(t),bootstrap:cde()(t),cat:fde()(t),commands:dde()(t),config:Rde()(t),dag:Vde()(s,t),dht:nhe()(t),diag:dhe()(t),dns:phe()(t),files:Khe()(t),get:zhe()(t),getEndpointConfig:$he()(t),id:IT()(t),isOnline:Yhe()(t),key:l0e()(t),log:v0e()(t),ls:E0e()(t),mount:x0e()(t),name:L0e()(t),object:f1e()(s,t),pin:k1e()(t),ping:D1e()(t),pubsub:Y1e()(t),refs:J1e()(t),repo:ope()(t),resolve:cpe()(t),start:fpe()(t),stats:ppe()(t),stop:gpe()(t),swarm:Rpe()(t),version:Cpe()(t),bases:i,codecs:s,hashers:a}}kpe.exports={create:Mlt,CID:Alt,multiaddr:Ilt,globSource:Tlt,urlSource:Rlt}});var qT=p((ZBt,Dpe)=>{l();"use strict";var Llt=lr(),Ult=Va(),Flt=Mo(),jlt=p0();function Klt(t,e){return Flt(t,r=>(e.addressBook.add(r.id,r.multiaddrs),r))}function Vlt(t){let e=new Set;return Ult(t,r=>e.has(r.id.toString())?!1:(e.add(r.id.toString()),!0))}async function*zlt(t,e=1){let r=0;for await(let i of t)r++,yield i;if(r<e)throw Llt(new Error("not found"),"NOT_FOUND")}function Hlt(t,e){return e?jlt(t,e):t}Dpe.exports={storeAddresses:Klt,uniquePeers:Vlt,requirePeers:zlt,maybeLimitSource:Hlt}});var DT=p((JBt,Npe)=>{l();"use strict";var k1=new Map,$lt=()=>`${Date.now()}:${Math.floor(Math.random()*1e6)}`;async function Glt(t,e,r){for(;k1.get(r);){try{await t()}catch(i){setTimeout(()=>{throw i},1);break}if(!k1.get(r))break;await new Promise(i=>{let n=setTimeout(i,e);k1.set(r,n)})}}function Wlt(t,e,r){r=r||e;let i=$lt(),n=setTimeout(()=>{Glt(t,e,i)},r);return k1.set(i,n),i}function Ylt(t){let e=k1.get(t);e&&(clearTimeout(e),k1.delete(t))}Npe.exports={setDelayedInterval:Wlt,clearDelayedInterval:Ylt}});var Kpe=p((eMt,jpe)=>{l();"use strict";var Bpe=be(),Xlt=Object.assign(Bpe("libp2p:peer-routing"),{error:Bpe("libp2p:peer-routing:err")}),R8=lr(),{storeAddresses:Mpe,uniquePeers:Qlt,requirePeers:Zlt}=qT(),Lpe=x0(),{pipe:Upe}=Ir(),Jlt=Ll(),edt=Ka(),tdt=Va(),{setDelayedInterval:rdt,clearDelayedInterval:idt}=DT(),Fpe=class{constructor(e){this._peerId=e.peerId,this._peerStore=e.peerStore,this._routers=e._modules.peerRouting||[],e._dht&&e._config.dht.enabled&&this._routers.push(e._dht),this._refreshManagerOptions=e._options.peerRouting.refreshManager,this._findClosestPeersTask=this._findClosestPeersTask.bind(this)}start(){!this._routers.length||this._timeoutId||!this._refreshManagerOptions.enabled||(this._timeoutId=rdt(this._findClosestPeersTask,this._refreshManagerOptions.interval,this._refreshManagerOptions.bootDelay))}async _findClosestPeersTask(){try{await edt(this.getClosestPeers(this._peerId.id))}catch(e){Xlt.error(e)}}stop(){idt(this._timeoutId)}async findPeer(e,r){if(!this._routers.length)throw R8(new Error("No peer routers available"),"NO_ROUTERS_AVAILABLE");if(e.toB58String()===this._peerId.toB58String())throw R8(new Error("Should not try to find self"),"ERR_FIND_SELF");let i=await Upe(Lpe(...this._routers.map(n=>[n.findPeer(e,r)])),n=>tdt(n,Boolean),n=>Mpe(n,this._peerStore),n=>Jlt(n));if(i)return i;throw R8(new Error("not found"),"NOT_FOUND")}async*getClosestPeers(e,r={timeout:3e4}){if(!this._routers.length)throw R8(new Error("No peer routers available"),"NO_ROUTERS_AVAILABLE");yield*Upe(Lpe(...this._routers.map(i=>i.getClosestPeers(e,r))),i=>Mpe(i,this._peerStore),i=>Qlt(i),i=>Zlt(i))}};jpe.exports=Fpe});var Hpe=p((tMt,zpe)=>{l();"use strict";var Xg=lr(),{messages:NT,codes:BT}=yi(),{storeAddresses:ndt,uniquePeers:sdt,requirePeers:odt,maybeLimitSource:adt}=qT(),cdt=x0(),{pipe:udt}=Ir(),Vpe=class{constructor(e){this.libp2p=e,this.routers=e._modules.contentRouting||[],this.dht=e._dht,this.dht&&e._config.dht.enabled&&this.routers.push(this.dht)}async*findProviders(e,r={}){if(!this.routers.length)throw Xg(new Error("No content this.routers available"),"NO_ROUTERS_AVAILABLE");yield*udt(cdt(...this.routers.map(i=>i.findProviders(e,r))),i=>ndt(i,this.libp2p.peerStore),i=>sdt(i),i=>adt(i,r.maxNumProviders),i=>odt(i))}async provide(e){if(!this.routers.length)throw Xg(new Error("No content routers available"),"NO_ROUTERS_AVAILABLE");await Promise.all(this.routers.map(r=>r.provide(e)))}put(e,r,i){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw Xg(new Error(NT.NOT_STARTED_YET),BT.DHT_NOT_STARTED);return this.dht.put(e,r,i)}get(e,r){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw Xg(new Error(NT.NOT_STARTED_YET),BT.DHT_NOT_STARTED);return this.dht.get(e,r)}async getMany(e,r,i){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw Xg(new Error(NT.NOT_STARTED_YET),BT.DHT_NOT_STARTED);return this.dht.getMany(e,r,i)}};zpe.exports=Vpe});var MT=p((rMt,Ype)=>{l();"use strict";var fdt=tt(),{Multiaddr:$pe}=rt(),Gpe=lr(),{codes:Wpe}=yi();function ldt(t){typeof t=="string"&&(t=new $pe(t));let e;if($pe.isMultiaddr(t)){e=t;let r=t.getPeerId();if(!r)throw Gpe(new Error(`${t} does not have a valid peer type`),Wpe.ERR_INVALID_MULTIADDR);try{t=fdt.createFromB58String(r)}catch(i){throw Gpe(new Error(`${t} is not a valid peer type`),Wpe.ERR_INVALID_MULTIADDR)}}return{id:t,multiaddrs:e?[e]:void 0}}Ype.exports=ldt});var Zpe=p((iMt,Qpe)=>{l();"use strict";Qpe.exports=Xpe;var ddt=m_(),Hf=Xpe.prototype,hdt=new Date%1e9;function pdt(){return(Math.random()*1e9>>>0)+hdt++}function Xpe(t){t=t||{},this.id=t.id||pdt(),this.max=t.max||1/0,this.items=t.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(t.lastModified||new Date);for(var e,r,i=this.items.length;i--;)e=this.items[i],r=new Date(e.expires)-new Date,this._lookup[e.key]=e,r>0?this.expire(e.key,r):r<=0&&this.delete(e.key)}Hf.has=function(t){return t in this._lookup};Hf.get=function(t){if(!this.has(t))return null;var e=this._lookup[t];return e.refresh&&this.expire(t,e.refresh),this.items.splice(this.items.indexOf(e),1),this.items.push(e),e.value};Hf.meta=function(t){if(!this.has(t))return null;var e=this._lookup[t];return"meta"in e?e.meta:null};Hf.set=function(t,e,r){var i=this._lookup[t],n=this._lookup[t]={key:t,value:e};return this.lastModified=new Date,i?(clearTimeout(i.timeout),this.items.splice(this.items.indexOf(i),1,n)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(n),this.size++),r&&("ttl"in r&&this.expire(t,r.ttl),"meta"in r&&(n.meta=r.meta),r.refresh&&(n.refresh=r.ttl)),this};Hf.delete=function(t){var e=this._lookup[t];return e?(this.lastModified=new Date,this.items.splice(this.items.indexOf(e),1),clearTimeout(e.timeout),delete this._lookup[t],this.size--,this):!1};Hf.expire=function(t,e){var r=e||0,i=this._lookup[t];if(!i)return this;if(typeof r=="string"&&(r=ddt(e)),typeof r!="number")throw new TypeError("Expiration time must be a string or number.");return clearTimeout(i.timeout),i.timeout=setTimeout(this.delete.bind(this,i.key),r),i.expires=Number(new Date)+r,this};Hf.clear=function(){for(var t=this.items.length;t--;)this.delete(this.items[t].key);return this};Hf.toJSON=function(){for(var t=new Array(this.items.length),e,r=t.length;r--;)e=this.items[r],t[r]={key:e.key,meta:e.meta,value:e.value,expires:e.expires,refresh:e.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:t}}});var e2e=p((nMt,Jpe)=>{l();"use strict";var{default:ydt,Headers:gdt}=X7();function bdt({serverResolver:t,hostname:e,recordType:r}){return`${t}?name=${e}&type=${r}`}function mdt(t){return ydt(t,{headers:new gdt({accept:"application/dns-json"})})}function vdt(t,e){return`${e}_${t}`}Jpe.exports={buildResource:bdt,fetch:mdt,getCacheKey:vdt}});var i2e=p((sMt,r2e)=>{l();"use strict";var t2e=be(),P8=t2e("dns-over-http-resolver");P8.error=t2e("dns-over-http-resolver:error");var wdt=Zpe(),eo=e2e(),C8=class{constructor({maxCache:e=100}={}){this._cache=new wdt({max:e}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"]}getServers(){return this._servers}_getShuffledServers(){let e=[].concat(this._servers);for(let r=e.length-1;r>0;r--){let i=Math.floor(Math.random()*r),n=e[r];e[r]=e[i],e[i]=n}return e}setServers(e){this._servers=e}resolve(e,r="A"){switch(r){case"A":return this.resolve4(e);case"AAAA":return this.resolve6(e);case"TXT":return this.resolveTxt(e);default:throw new Error(`${r} is not supported`)}}async resolve4(e){let r="A",i=this._cache.get(eo.getCacheKey(e,r));if(i)return i;for(let n of this._getShuffledServers())try{let o=await(await eo.fetch(eo.buildResource({serverResolver:n,hostname:e,recordType:r}))).json(),a=o.Answer.map(u=>u.data),c=Math.min(o.Answer.map(u=>u.TTL));return this._cache.set(eo.getCacheKey(e,r),a,{ttl:c}),a}catch(s){P8.error(`${n} could not resolve ${e} record ${r}`)}throw new Error(`Could not resolve ${e} record ${r}`)}async resolve6(e){let r="AAAA",i=this._cache.get(eo.getCacheKey(e,r));if(i)return i;for(let n of this._getShuffledServers())try{let o=await(await eo.fetch(eo.buildResource({serverResolver:n,hostname:e,recordType:r}))).json(),a=o.Answer.map(u=>u.data),c=Math.min(o.Answer.map(u=>u.TTL));return this._cache.set(eo.getCacheKey(e,r),a,{ttl:c}),a}catch(s){P8.error(`${n} could not resolve ${e} record ${r}`)}throw new Error(`Could not resolve ${e} record ${r}`)}async resolveTxt(e){let r="TXT",i=this._cache.get(eo.getCacheKey(e,r));if(i)return i;for(let n of this._getShuffledServers())try{let o=await(await eo.fetch(eo.buildResource({serverResolver:n,hostname:e,recordType:r}))).json(),a=o.Answer.map(u=>[u.data.replace(/['"]+/g,"")]),c=Math.min(o.Answer.map(u=>u.TTL));return this._cache.set(eo.getCacheKey(e,r),a,{ttl:c}),a}catch(s){P8.error(`${n} could not resolve ${e} record ${r}`)}throw new Error(`Could not resolve ${e} record ${r}`)}};C8.Resolver=C8;r2e.exports=C8});var s2e=p((oMt,n2e)=>{l();"use strict";var _dt=i2e();n2e.exports=_dt});var a2e=p((aMt,o2e)=>{l();"use strict";var Edt=M2(),{code:Sdt}=Edt("dnsaddr");async function xdt(t){let e=s2e(),r=new e,i=t.getPeerId(),[,n]=t.stringTuples().find(([a])=>a===Sdt)||[],o=(await r.resolveTxt(`_dnsaddr.${n}`)).flat().map(a=>a.split("=")[1]);return i&&(o=o.filter(a=>a.includes(i))),o}o2e.exports={dnsaddrResolver:xdt}});var O8=p((cMt,c2e)=>{l();"use strict";c2e.exports={DIAL_TIMEOUT:3e4,MAX_PARALLEL_DIALS:100,MAX_PER_PEER_DIALS:4,MAX_ADDRS_TO_DIAL:25,METRICS:{computeThrottleMaxQueueSize:1e3,computeThrottleTimeout:2e3,movingAverageIntervals:[60*1e3,5*60*1e3,15*60*1e3],maxOldPeersRetention:50}}});var LT=p((uMt,Adt)=>{Adt.exports={name:"libp2p",version:"0.32.4",description:"JavaScript implementation of libp2p, a modular peer to peer network stack",leadMaintainer:"Jacob Heun <jacobheun@gmail.com>",main:"src/index.js",types:"dist/src/index.d.ts",typesVersions:{"*":{"src/*":["dist/src/*","dist/src/*/index"]}},files:["dist","src"],scripts:{lint:"aegir lint",build:"aegir build","build:proto":"npm run build:proto:circuit && npm run build:proto:identify && npm run build:proto:plaintext && npm run build:proto:address-book && npm run build:proto:proto-book && npm run build:proto:peer-record && npm run build:proto:envelope","build:proto:circuit":"pbjs -t static-module -w commonjs -r libp2p-circuit --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/circuit/protocol/index.js ./src/circuit/protocol/index.proto","build:proto:identify":"pbjs -t static-module -w commonjs -r libp2p-identify --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/identify/message.js ./src/identify/message.proto","build:proto:plaintext":"pbjs -t static-module -w commonjs -r libp2p-plaintext --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/insecure/proto.js ./src/insecure/proto.proto","build:proto:address-book":"pbjs -t static-module -w commonjs -r libp2p-address-book --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/peer-store/persistent/pb/address-book.js ./src/peer-store/persistent/pb/address-book.proto","build:proto:proto-book":"pbjs -t static-module -w commonjs -r libp2p-proto-book --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/peer-store/persistent/pb/proto-book.js ./src/peer-store/persistent/pb/proto-book.proto","build:proto:peer-record":"pbjs -t static-module -w commonjs -r libp2p-peer-record --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/record/peer-record/peer-record.js ./src/record/peer-record/peer-record.proto","build:proto:envelope":"pbjs -t static-module -w commonjs -r libp2p-envelope --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/record/envelope/envelope.js ./src/record/envelope/envelope.proto","build:proto-types":"npm run build:proto-types:circuit && npm run build:proto-types:identify && npm run build:proto-types:plaintext && npm run build:proto-types:address-book && npm run build:proto-types:proto-book && npm run build:proto-types:peer-record && npm run build:proto-types:envelope","build:proto-types:circuit":"pbts -o src/circuit/protocol/index.d.ts src/circuit/protocol/index.js","build:proto-types:identify":"pbts -o src/identify/message.d.ts src/identify/message.js","build:proto-types:plaintext":"pbts -o src/insecure/proto.d.ts src/insecure/proto.js","build:proto-types:address-book":"pbts -o src/peer-store/persistent/pb/address-book.d.ts src/peer-store/persistent/pb/address-book.js","build:proto-types:proto-book":"pbts -o src/peer-store/persistent/pb/proto-book.d.ts src/peer-store/persistent/pb/proto-book.js","build:proto-types:peer-record":"pbts -o src/record/peer-record/peer-record.d.ts src/record/peer-record/peer-record.js","build:proto-types:envelope":"pbts -o src/record/envelope/envelope.d.ts src/record/envelope/envelope.js",test:"aegir test","test:ts":"aegir build --no-bundle && npm run test --prefix test/ts-use","test:node":'aegir test -t node -f "./test/**/*.{node,spec}.js"',"test:browser":"aegir test -t browser","test:examples":"cd examples && npm run test:all",prepare:"aegir build --no-bundle",release:"aegir release -t node -t browser","release-minor":"aegir release --type minor -t node -t browser","release-major":"aegir release --type major -t node -t browser",coverage:"nyc --reporter=text --reporter=lcov npm run test:node"},repository:{type:"git",url:"https://github.com/libp2p/js-libp2p.git"},keywords:["libp2p","network","p2p","peer","peer-to-peer","IPFS"],bugs:{url:"https://github.com/libp2p/js-libp2p/issues"},homepage:"https://libp2p.io",license:"MIT",engines:{node:">=14.0.0"},browser:{"@motrix/nat-api":!1},eslintConfig:{extends:"ipfs",ignorePatterns:["!.aegir.js","test/ts-use"]},dependencies:{"@motrix/nat-api":"^0.3.1","@vascosantos/moving-average":"^1.1.0","abort-controller":"^3.0.0","aggregate-error":"^3.1.0","any-signal":"^2.1.1","bignumber.js":"^9.0.1","class-is":"^1.1.0",debug:"^4.3.1","err-code":"^3.0.0","es6-promisify":"^6.1.1",events:"^3.3.0",hashlru:"^2.3.0","interface-datastore":"^5.1.1","it-all":"^1.0.4","it-buffer":"^0.1.2","it-drain":"^1.0.3","it-filter":"^1.0.1","it-first":"^1.0.4","it-handshake":"^2.0.0","it-length-prefixed":"^5.0.2","it-map":"^1.0.4","it-merge":"^1.0.0","it-pipe":"^1.1.0","it-take":"^1.0.0","libp2p-crypto":"^0.19.4","libp2p-interfaces":"^1.0.0","libp2p-utils":"^0.4.0",mafmt:"^10.0.0","merge-options":"^3.0.4",multiaddr:"^10.0.0",multiformats:"^9.0.0","multistream-select":"^2.0.0","mutable-proxy":"^1.0.0","node-forge":"^0.10.0","p-any":"^3.0.0","p-fifo":"^1.0.0","p-retry":"^4.4.0","p-settle":"^4.1.1","peer-id":"^0.15.0","private-ip":"^2.1.0",protobufjs:"^6.10.2",retimer:"^3.0.0","sanitize-filename":"^1.6.3","set-delayed-interval":"^1.0.0","streaming-iterables":"^6.0.0","timeout-abort-controller":"^1.1.1",uint8arrays:"^3.0.0",varint:"^6.0.0",wherearewe:"^1.0.0",xsalsa20:"^1.1.0"},devDependencies:{"@chainsafe/libp2p-noise":"^4.0.0","@nodeutils/defaults-deep":"^1.1.0","@types/es6-promisify":"^6.0.0","@types/node":"^16.0.1","@types/node-forge":"^0.10.1","@types/varint":"^6.0.0","abortable-iterator":"^3.0.0",aegir:"^33.1.1",buffer:"^6.0.3",delay:"^5.0.0","interop-libp2p":"^0.4.0","into-stream":"^6.0.0","ipfs-http-client":"^50.1.1","it-concat":"^2.0.0","it-pair":"^1.0.0","it-pushable":"^1.4.0",libp2p:".","libp2p-bootstrap":"^0.13.0","libp2p-delegated-content-routing":"^0.11.0","libp2p-delegated-peer-routing":"^0.10.0","libp2p-floodsub":"^0.27.0","libp2p-gossipsub":"^0.11.0","libp2p-interfaces-compliance-tests":"^1.0.0","libp2p-kad-dht":"^0.23.0","libp2p-mdns":"^0.17.0","libp2p-mplex":"^0.10.1","libp2p-tcp":"^0.17.0","libp2p-webrtc-star":"^0.23.0","libp2p-websockets":"^0.16.0",nock:"^13.0.3","p-defer":"^3.0.0","p-times":"^3.0.0","p-wait-for":"^3.2.0",rimraf:"^3.0.2",sinon:"^11.1.1",util:"^0.12.3"},contributors:["Vasco Santos <vasco.santos@moxy.studio>","David Dias <daviddias.p@gmail.com>","Jacob Heun <jacobheun@gmail.com>","Alex Potsides <alex@achingbrain.net>","Alan Shaw <alan@tableflip.io>","Cayman <caymannava@gmail.com>","Pedro Teixeira <i@pgte.me>","Friedel Ziegelmayer <dignifiedquire@gmail.com>","Maciej Kr\xFCger <mkg20001@gmail.com>","Hugo Dias <mail@hugodias.me>","Volker Mische <volker.mische@gmail.com>","Chris Dostert <chrisdostert@users.noreply.github.com>","dirkmc <dirkmdev@gmail.com>","Richard Littauer <richard.littauer@gmail.com>","zeim839 <50573884+zeim839@users.noreply.github.com>","Ryan Bell <ryan@piing.net>","a1300 <matthias-knopp@gmx.net>","\u1D20\u026A\u1D04\u1D1B\u1D0F\u0280 \u0299\u1D0A\u1D07\u029F\u1D0B\u029C\u1D0F\u029F\u1D0D <victorbjelkholm@gmail.com>","Andrew Nesbitt <andrewnez@gmail.com>","Elven <mon.samuel@qq.com>","Franck Royer <franck@royer.one>","Giovanni T. Parra <fiatjaf@gmail.com>","Samlior <samlior@foxmail.com>","Thomas Eizinger <thomas@eizinger.io>","acolytec3 <17355484+acolytec3@users.noreply.github.com>","Didrik Nordstr\xF6m <didrik@betamos.se>","Irakli Gozalishvili <rfobic@gmail.com>","Joel Gustafson <joelg@mit.edu>","John Rees <johnrees@users.noreply.github.com>","Jo\xE3o Santos <joaosantos15@users.noreply.github.com>","Julien Bouquillon <contact@revolunet.com>","Kevin Kwok <antimatter15@gmail.com>","Kevin Lacker <lacker@gmail.com>","Lars Gierth <lgierth@users.noreply.github.com>","Ethan Lam <elmemphis2000@gmail.com>","Marcin Tojek <mtojek@users.noreply.github.com>","Michael Burns <5170+mburns@users.noreply.github.com>","Miguel Mota <miguelmota2@gmail.com>","Nuno Nogueira <nunofmn@gmail.com>","Dmitriy Ryajov <dryajov@gmail.com>","Philipp Muens <raute1337@gmx.de>","RasmusErik Voel Jensen <github@solsort.com>","Diogo Silva <fsdiogo@gmail.com>","Robert Kiel <robert.kiel@hoprnet.org>","phillmac <phillmac@users.noreply.github.com>","robertkiel <robert.kiel@validitylabs.org>","Smite Chow <xiaopengyou@live.com>","Soeren <nikorpoulsen@gmail.com>","S\xF6nke Hahn <soenkehahn@gmail.com>","TJKoury <TJKoury@gmail.com>","shresthagrawal <34920931+shresthagrawal@users.noreply.github.com>","Tiago Alves <alvesjtiago@gmail.com>","Daijiro Wachi <daijiro.wachi@gmail.com>","Yusef Napora <yusef@napora.org>","Zane Starr <zcstarr@gmail.com>","swedneck <40505480+swedneck@users.noreply.github.com>","Aleksei <vozhdb@gmail.com>","Cindy Wu <ciindy.wu@gmail.com>","Aditya Bose <13054902+adbose@users.noreply.github.com>","Chris Bratlien <chrisbratlien@gmail.com>","ebinks <elizabethjbinks@gmail.com>","greenSnot <greenSnot@users.noreply.github.com>","Bernd Strehl <bernd.strehl@gmail.com>","Francis Gulotta <wizard@roborooter.com>","isan_rivkin <isanrivkin@gmail.com>","Florian-Merle <florian.david.merle@gmail.com>","mayerwin <mayerwin@users.noreply.github.com>","Guy Sviry <32539816+guysv@users.noreply.github.com>","Henrique Dias <hacdias@gmail.com>","mcclure <andi.m.mcclure@gmail.com>","Felipe Martins <felipebrasil93@gmail.com>","Fei Liu <liu.feiwood@gmail.com>"]}});var UT=p((fMt,ac)=>{l();"use strict";var Idt=LT().version;ac.exports.PROTOCOL_VERSION="ipfs/0.1.0";ac.exports.AGENT_VERSION=`js-libp2p/${Idt}`;ac.exports.MULTICODEC_IDENTIFY="/ipfs/id/1.0.0";ac.exports.MULTICODEC_IDENTIFY_PUSH="/ipfs/id/push/1.0.0";ac.exports.IDENTIFY_PROTOCOL_VERSION="0.1.0";ac.exports.MULTICODEC_IDENTIFY_PROTOCOL_NAME="id";ac.exports.MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME="id/push";ac.exports.MULTICODEC_IDENTIFY_PROTOCOL_VERSION="1.0.0";ac.exports.MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION="1.0.0"});var k8=p((lMt,f2e)=>{l();"use strict";var u2e=60*1e3;f2e.exports={ADVERTISE_BOOT_DELAY:15*u2e,ADVERTISE_TTL:30*u2e,CIRCUIT_PROTO_CODE:290,HOP_METADATA_KEY:"hop_relay",HOP_METADATA_VALUE:"true",RELAY_RENDEZVOUS_NS:"/libp2p/relay"}});var l2e=p(Qg=>{l();(function(){var t,e,r,i,n,s,o,a;a=function(c){var u,f,d,h;return u=(c&255<<24)>>>24,f=(c&255<<16)>>>16,d=(c&255<<8)>>>8,h=c&255,[u,f,d,h].join(".")},o=function(c){var u,f,d,h,y,g;for(u=[],d=h=0;h<=3&&c.length!==0;d=++h){if(d>0){if(c[0]!==".")throw new Error("Invalid IP");c=c.substring(1)}g=e(c),y=g[0],f=g[1],c=c.substring(f),u.push(y)}if(c.length!==0)throw new Error("Invalid IP");switch(u.length){case 1:if(u[0]>4294967295)throw new Error("Invalid IP");return u[0]>>>0;case 2:if(u[0]>255||u[1]>16777215)throw new Error("Invalid IP");return(u[0]<<24|u[1])>>>0;case 3:if(u[0]>255||u[1]>255||u[2]>65535)throw new Error("Invalid IP");return(u[0]<<24|u[1]<<16|u[2])>>>0;case 4:if(u[0]>255||u[1]>255||u[2]>255||u[3]>255)throw new Error("Invalid IP");return(u[0]<<24|u[1]<<16|u[2]<<8|u[3])>>>0;default:throw new Error("Invalid IP")}},r=function(c){return c.charCodeAt(0)},i=r("0"),s=r("a"),n=r("A"),e=function(c){var u,f,d,h,y;for(h=0,u=10,f="9",d=0,c.length>1&&c[d]==="0"&&(c[d+1]==="x"||c[d+1]==="X"?(d+=2,u=16):"0"<=c[d+1]&&c[d+1]<="9"&&(d++,u=8,f="7")),y=d;d<c.length;){if("0"<=c[d]&&c[d]<=f)h=h*u+(r(c[d])-i)>>>0;else if(u===16)if("a"<=c[d]&&c[d]<="f")h=h*u+(10+r(c[d])-s)>>>0;else if("A"<=c[d]&&c[d]<="F")h=h*u+(10+r(c[d])-n)>>>0;else break;else break;if(h>4294967295)throw new Error("too large");d++}if(d===y)throw new Error("empty octet");return[h,d]},t=function(){function c(u,f){var d,h,y,g;if(typeof u!="string")throw new Error("Missing `net' parameter");if(f||(g=u.split("/",2),u=g[0],f=g[1]),f||(f=32),typeof f=="string"&&f.indexOf(".")>-1){try{this.maskLong=o(f)}catch(m){throw d=m,new Error("Invalid mask: "+f)}for(h=y=32;y>=0;h=--y)if(this.maskLong===4294967295<<32-h>>>0){this.bitmask=h;break}}else if(f||f===0)this.bitmask=parseInt(f,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0);else throw new Error("Invalid mask: empty");try{this.netLong=(o(u)&this.maskLong)>>>0}catch(m){throw d=m,new Error("Invalid net address: "+u)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+f);this.size=Math.pow(2,32-this.bitmask),this.base=a(this.netLong),this.mask=a(this.maskLong),this.hostmask=a(~this.maskLong),this.first=this.bitmask<=30?a(this.netLong+1):this.base,this.last=this.bitmask<=30?a(this.netLong+this.size-2):a(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?a(this.netLong+this.size-1):void 0}return c.prototype.contains=function(u){return typeof u=="string"&&(u.indexOf("/")>0||u.split(".").length!==4)&&(u=new c(u)),u instanceof c?this.contains(u.base)&&this.contains(u.broadcast||u.last):(o(u)&this.maskLong)>>>0==(this.netLong&this.maskLong)>>>0},c.prototype.next=function(u){return u==null&&(u=1),new c(a(this.netLong+this.size*u),this.mask)},c.prototype.forEach=function(u){var f,d,h;for(h=o(this.first),d=o(this.last),f=0;h<=d;)u(a(h),h,f),f++,h++},c.prototype.toString=function(){return this.base+"/"+this.bitmask},c}(),Qg.ip2long=o,Qg.long2ip=a,Qg.Netmask=t}).call(Qg)});var p2e=p((hMt,h2e)=>{l();var Tdt=l2e().Netmask,d2e=Q9(),Rdt=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"],Pdt=Rdt.map(t=>new Tdt(t));function Cdt(t){for(let e of Pdt)if(e.contains(t))return!0;return!1}function Odt(t){return/^::$/.test(t)||/^::1$/.test(t)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(t)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(t)||/^ff([0-9a-fA-F]{2,2}):/i.test(t)}h2e.exports=t=>d2e.v6().test(t)?Odt(t):d2e().test(t)||t.startsWith("0")?Cdt(t):!1});var FT=p((pMt,y2e)=>{l();"use strict";y2e.exports=p2e()});var b2e=p((yMt,g2e)=>{l();"use strict";var kdt=FT();function qdt(t){let{address:e}=t.nodeAddress();return kdt(e)}g2e.exports=qdt});var jT=p((gMt,v2e)=>{l();"use strict";var m2e=b2e();function Ddt(t,e){let r=m2e(t.multiaddr),i=m2e(e.multiaddr);return r&&!i?1:!r&&i||t.isCertified&&!e.isCertified?-1:!t.isCertified&&e.isCertified?1:0}function Ndt(t){return[...t].sort(Ddt)}v2e.exports.publicAddressesFirst=Ndt});var _2e=p((bMt,KT)=>{l();"use strict";var w2e=async t=>{try{let e=await t;return{isFulfilled:!0,isRejected:!1,value:e}}catch(e){return{isFulfilled:!1,isRejected:!0,reason:e}}};KT.exports=w2e;KT.exports.default=w2e});var S2e=p((mMt,VT)=>{l();"use strict";var E2e=(t,...e)=>new Promise(r=>{r(t(...e))});VT.exports=E2e;VT.exports.default=E2e});var A2e=p((vMt,zT)=>{l();"use strict";var Bdt=S2e(),x2e=t=>{if(!((Number.isInteger(t)||t===1/0)&&t>0))return Promise.reject(new TypeError("Expected `concurrency` to be a number from 1 and up"));let e=[],r=0,i=()=>{r--,e.length>0&&e.shift()()},n=(a,c,...u)=>{r++;let f=Bdt(a,...u);c(f),f.then(i,i)},s=(a,c,...u)=>{r<t?n(a,c,...u):e.push(n.bind(null,a,c,...u))},o=(a,...c)=>new Promise(u=>s(a,u,...c));return Object.defineProperties(o,{activeCount:{get:()=>r},pendingCount:{get:()=>e.length},clearQueue:{value:()=>{e.length=0}}}),o};zT.exports=x2e;zT.exports.default=x2e});var T2e=p((wMt,I2e)=>{l();"use strict";var HT=_2e(),Mdt=A2e();I2e.exports=async(t,e={})=>{let{concurrency:r=1/0}=e,i=Mdt(r);return Promise.all(t.map(n=>n&&typeof n.then=="function"?HT(n):typeof n=="function"?HT(i(()=>n())):HT(Promise.resolve(n))))}});var P2e=p((_Mt,R2e)=>{l();"use strict";function Ldt(t,e){return t.length===e.length&&e.sort()&&t.sort().every((r,i)=>e[i].equals(r))}R2e.exports=Ldt});var k2e=p((EMt,O2e)=>{l();"use strict";var Od=qi(),q8=Od.Reader,C2e=Od.Writer,Gr=Od.util,to=Od.roots["libp2p-peer-record"]||(Od.roots["libp2p-peer-record"]={});to.PeerRecord=function(){function t(e){if(this.addresses=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.peerId=Gr.newBuffer([]),t.prototype.seq=Gr.Long?Gr.Long.fromBits(0,0,!0):0,t.prototype.addresses=Gr.emptyArray,t.encode=function(r,i){if(i||(i=C2e.create()),r.peerId!=null&&Object.hasOwnProperty.call(r,"peerId")&&i.uint32(10).bytes(r.peerId),r.seq!=null&&Object.hasOwnProperty.call(r,"seq")&&i.uint32(16).uint64(r.seq),r.addresses!=null&&r.addresses.length)for(var n=0;n<r.addresses.length;++n)to.PeerRecord.AddressInfo.encode(r.addresses[n],i.uint32(26).fork()).ldelim();return i},t.decode=function(r,i){r instanceof q8||(r=q8.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new to.PeerRecord;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.peerId=r.bytes();break;case 2:s.seq=r.uint64();break;case 3:s.addresses&&s.addresses.length||(s.addresses=[]),s.addresses.push(to.PeerRecord.AddressInfo.decode(r,r.uint32()));break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof to.PeerRecord)return r;var i=new to.PeerRecord;if(r.peerId!=null&&(typeof r.peerId=="string"?Gr.base64.decode(r.peerId,i.peerId=Gr.newBuffer(Gr.base64.length(r.peerId)),0):r.peerId.length&&(i.peerId=r.peerId)),r.seq!=null&&(Gr.Long?(i.seq=Gr.Long.fromValue(r.seq)).unsigned=!0:typeof r.seq=="string"?i.seq=parseInt(r.seq,10):typeof r.seq=="number"?i.seq=r.seq:typeof r.seq=="object"&&(i.seq=new Gr.LongBits(r.seq.low>>>0,r.seq.high>>>0).toNumber(!0))),r.addresses){if(!Array.isArray(r.addresses))throw TypeError(".PeerRecord.addresses: array expected");i.addresses=[];for(var n=0;n<r.addresses.length;++n){if(typeof r.addresses[n]!="object")throw TypeError(".PeerRecord.addresses: object expected");i.addresses[n]=to.PeerRecord.AddressInfo.fromObject(r.addresses[n])}}return i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.addresses=[]),i.defaults)if(i.bytes===String?n.peerId="":(n.peerId=[],i.bytes!==Array&&(n.peerId=Gr.newBuffer(n.peerId))),Gr.Long){var s=new Gr.Long(0,0,!0);n.seq=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.seq=i.longs===String?"0":0;if(r.peerId!=null&&r.hasOwnProperty("peerId")&&(n.peerId=i.bytes===String?Gr.base64.encode(r.peerId,0,r.peerId.length):i.bytes===Array?Array.prototype.slice.call(r.peerId):r.peerId),r.seq!=null&&r.hasOwnProperty("seq")&&(typeof r.seq=="number"?n.seq=i.longs===String?String(r.seq):r.seq:n.seq=i.longs===String?Gr.Long.prototype.toString.call(r.seq):i.longs===Number?new Gr.LongBits(r.seq.low>>>0,r.seq.high>>>0).toNumber(!0):r.seq),r.addresses&&r.addresses.length){n.addresses=[];for(var o=0;o<r.addresses.length;++o)n.addresses[o]=to.PeerRecord.AddressInfo.toObject(r.addresses[o],i)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Od.util.toJSONOptions)},t.AddressInfo=function(){function e(r){if(r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.multiaddr=Gr.newBuffer([]),e.encode=function(i,n){return n||(n=C2e.create()),i.multiaddr!=null&&Object.hasOwnProperty.call(i,"multiaddr")&&n.uint32(10).bytes(i.multiaddr),n},e.decode=function(i,n){i instanceof q8||(i=q8.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new to.PeerRecord.AddressInfo;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.multiaddr=i.bytes();break;default:i.skipType(a&7);break}}return o},e.fromObject=function(i){if(i instanceof to.PeerRecord.AddressInfo)return i;var n=new to.PeerRecord.AddressInfo;return i.multiaddr!=null&&(typeof i.multiaddr=="string"?Gr.base64.decode(i.multiaddr,n.multiaddr=Gr.newBuffer(Gr.base64.length(i.multiaddr)),0):i.multiaddr.length&&(n.multiaddr=i.multiaddr)),n},e.toObject=function(i,n){n||(n={});var s={};return n.defaults&&(n.bytes===String?s.multiaddr="":(s.multiaddr=[],n.bytes!==Array&&(s.multiaddr=Gr.newBuffer(s.multiaddr)))),i.multiaddr!=null&&i.hasOwnProperty("multiaddr")&&(s.multiaddr=n.bytes===String?Gr.base64.encode(i.multiaddr,0,i.multiaddr.length):n.bytes===Array?Array.prototype.slice.call(i.multiaddr):i.multiaddr),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Od.util.toJSONOptions)},e}(),t}();O2e.exports=to});var D2e=p((SMt,q2e)=>{l();"use strict";var Udt="libp2p-peer-record",Fdt=Uint8Array.from([3,1]);q2e.exports={ENVELOPE_DOMAIN_PEER_RECORD:Udt,ENVELOPE_PAYLOAD_TYPE_PEER_RECORD:Fdt}});var D8=p((xMt,M2e)=>{l();"use strict";var{Multiaddr:jdt}=rt(),Kdt=tt(),Vdt=P2e(),{PeerRecord:N2e}=k2e(),{ENVELOPE_DOMAIN_PEER_RECORD:B2e,ENVELOPE_PAYLOAD_TYPE_PEER_RECORD:zdt}=D2e(),kd=class{constructor({peerId:e,multiaddrs:r=[],seqNumber:i=Date.now()}){this.domain=B2e,this.codec=zdt,this.peerId=e,this.multiaddrs=r,this.seqNumber=i,this._marshal=void 0}marshal(){return this._marshal?this._marshal:(this._marshal=N2e.encode({peerId:this.peerId.toBytes(),seq:this.seqNumber,addresses:this.multiaddrs.map(e=>({multiaddr:e.bytes}))}).finish(),this._marshal)}equals(e){return!(!(e instanceof kd)||!this.peerId.equals(e.peerId)||this.seqNumber!==e.seqNumber||!Vdt(this.multiaddrs,e.multiaddrs))}};kd.createFromProtobuf=t=>{let e=N2e.decode(t),r=Kdt.createFromBytes(e.peerId),i=(e.addresses||[]).map(s=>new jdt(s.multiaddr)),n=Number(e.seq);return new kd({peerId:r,multiaddrs:i,seqNumber:n})};kd.DOMAIN=B2e;M2e.exports=kd});var $T=p((AMt,L2e)=>{l();"use strict";var Hdt=Gg(),$dt=D8();async function Gdt(t){let e=new $dt({peerId:t.peerId,multiaddrs:t.multiaddrs}),r=await Hdt.seal(e,t.peerId);t.peerStore.addressBook.consumePeerRecord(r)}L2e.exports.updateSelfPeerRecord=Gdt});var WT=p((IMt,j2e)=>{l();"use strict";var U2e=be(),qd=Object.assign(U2e("libp2p:transports"),{error:U2e("libp2p:transports:err")}),Wdt=T2e(),{codes:q1}=yi(),Zg=lr(),{updateSelfPeerRecord:F2e}=$T(),GT=class{constructor({libp2p:e,upgrader:r,faultTolerance:i=N8.FATAL_ALL}){this.libp2p=e,this.upgrader=r,this._transports=new Map,this._listeners=new Map,this._listenerOptions=new Map,this.faultTolerance=i}add(e,r,i={}){if(qd("adding %s",e),!e)throw Zg(new Error(`Transport must have a valid key, was given '${e}'`),q1.ERR_INVALID_KEY);if(this._transports.has(e))throw Zg(new Error("There is already a transport with this key"),q1.ERR_DUPLICATE_TRANSPORT);let n=new r({...i,libp2p:this.libp2p,upgrader:this.upgrader});this._transports.set(e,n),this._listenerOptions.set(e,i.listenerOptions||{}),this._listeners.has(e)||this._listeners.set(e,[])}async close(){let e=[];for(let[r,i]of this._listeners)for(qd("closing listeners for %s",r);i.length;){let n=i.pop();n.removeAllListeners("listening"),n.removeAllListeners("close"),e.push(n.close())}await Promise.all(e),qd("all listeners closed");for(let r of this._listeners.keys())this._listeners.set(r,[])}async dial(e,r){let i=this.transportForMultiaddr(e);if(!i)throw Zg(new Error(`No transport available for address ${String(e)}`),q1.ERR_TRANSPORT_UNAVAILABLE);try{return await i.dial(e,r)}catch(n){throw n.code||(n.code=q1.ERR_TRANSPORT_DIAL_FAILED),n}}getAddrs(){let e=[];for(let r of this._listeners.values())for(let i of r)e=[...e,...i.getAddrs()];return e}getTransports(){return this._transports.values()}transportForMultiaddr(e){for(let r of this._transports.values())if(r.filter([e]).length)return r;return null}async listen(e){if(!e||e.length===0){qd("no addresses were provided for listening, this node is dial only");return}let r=[];for(let[i,n]of this._transports.entries()){let s=n.filter(e),o=[];for(let u of s){qd("creating listener for %s on %s",i,u);let f=n.createListener(this._listenerOptions.get(i));this._listeners.get(i).push(f),f.on("listening",()=>F2e(this.libp2p)),f.on("close",()=>F2e(this.libp2p)),o.push(f.listen(u))}if(o.length===0){r.push(i);continue}if(!(await Wdt(o)).find(u=>u.isFulfilled===!0)&&this.faultTolerance!==N8.NO_FATAL)throw Zg(new Error(`Transport (${i}) could not listen on any available address`),q1.ERR_NO_VALID_ADDRESSES)}if(r.length===this._transports.size){let i=`no valid addresses were provided for transports [${r}]`;if(this.faultTolerance===N8.FATAL_ALL)throw Zg(new Error(i),q1.ERR_NO_VALID_ADDRESSES);qd(`libp2p in dial mode only: ${i}`)}}async remove(e){if(qd("removing %s",e),this._listeners.has(e))for(let r of this._listeners.get(e))r.removeAllListeners("listening"),r.removeAllListeners("close"),await r.close();this._transports.delete(e),this._listeners.delete(e)}async removeAll(){let e=[];for(let r of this._transports.keys())e.push(this.remove(r));await Promise.all(e)}},N8={FATAL_ALL:0,NO_FATAL:1};GT.FaultTolerance=N8;j2e.exports=GT});var z2e=p((TMt,V2e)=>{l();"use strict";var Ydt=br(),{dnsaddrResolver:Xdt}=a2e(),YT=O8(),{AGENT_VERSION:Qdt}=UT(),K2e=k8(),{publicAddressesFirst:Zdt}=jT(),{FaultTolerance:Jdt}=WT(),eht={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:t=>t},connectionManager:{minConnections:25},transportManager:{faultTolerance:Jdt.FATAL_ALL},dialer:{maxParallelDials:YT.MAX_PARALLEL_DIALS,maxDialsPerPeer:YT.MAX_PER_PEER_DIALS,dialTimeout:YT.DIAL_TIMEOUT,resolvers:{dnsaddr:Xdt},addressSorter:Zdt},host:{agentVersion:Qdt},metrics:{enabled:!1},peerStore:{persistence:!1,threshold:5},peerRouting:{refreshManager:{enabled:!0,interval:6e5,bootDelay:1e4}},config:{protocolPrefix:"ipfs",dht:{enabled:!1,kBucketSize:20,randomWalk:{enabled:!1,queriesPerPeriod:1,interval:3e5,timeout:1e4}},nat:{enabled:!0,ttl:7200,keepAlive:!0,gateway:null,externalIp:null,pmp:{enabled:!1}},peerDiscovery:{autoDial:!0},pubsub:{enabled:!0},relay:{enabled:!0,advertise:{bootDelay:K2e.ADVERTISE_BOOT_DELAY,enabled:!1,ttl:K2e.ADVERTISE_TTL},hop:{enabled:!1,active:!1},autoRelay:{enabled:!1,maxListeners:2}},transport:{}}};V2e.exports.validate=t=>{let e=Ydt(eht,t);if(e.modules.transport.length<1)throw new Error("'options.modules.transport' must contain at least 1 transport");return e}});var G2e=p((RMt,$2e)=>{l();"use strict";var{EventEmitter:tht}=gr(),{Multiaddr:Jg}=rt(),rht=tt(),H2e=class extends tht{constructor(e,{listen:r=[],announce:i=[]}={}){super();this.peerId=e,this.listen=new Set(r.map(n=>n.toString())),this.announce=new Set(i.map(n=>n.toString())),this.observed=new Set}getListenAddrs(){return Array.from(this.listen).map(e=>new Jg(e))}getAnnounceAddrs(){return Array.from(this.announce).map(e=>new Jg(e))}getObservedAddrs(){return Array.from(this.observed).map(e=>new Jg(e))}addObservedAddr(e){let r=new Jg(e),i=r.getPeerId();i&&rht.createFromB58String(i).equals(this.peerId)&&(r=r.decapsulate(new Jg(`/p2p/${this.peerId}`)));let n=r.toString();this.observed.has(n)||(this.observed.add(n),this.emit("change:addresses"))}};$2e.exports=H2e});var X2e=p((PMt,Y2e)=>{l();"use strict";var{EventEmitter:iht}=gr(),XT=be()("latency-monitor:VisibilityChangeEmitter"),W2e=class extends iht{constructor(){super();if(typeof document=="undefined"){XT('This is not a browser, no "document" found. Stopping.');return}this._initializeVisibilityVarNames(),this._addVisibilityChangeListener()}_initializeVisibilityVarNames(){let e,r;typeof document.hidden!="undefined"?(e="hidden",r="visibilitychange"):typeof document.mozHidden!="undefined"?(e="mozHidden",r="mozvisibilitychange"):typeof document.msHidden!="undefined"?(e="msHidden",r="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(e="webkitHidden",r="webkitvisibilitychange"),this._hidden=e,this._visibilityChange=r}_addVisibilityChangeListener(){typeof document.addEventListener=="undefined"||typeof document[this._hidden]=="undefined"?XT("Checking page visibility requires a browser that supports the Page Visibility API."):document.addEventListener(this._visibilityChange,this._handleVisibilityChange.bind(this),!1)}isVisible(){if(!(this._hidden===void 0||document[this._hidden]===void 0))return!document[this._hidden]}_handleVisibilityChange(){let e=!document[this._hidden];XT(e?"Page Visible":"Page Hidden"),this.emit("visibilityChange",e)}};Y2e.exports=W2e});var J2e=p((CMt,Z2e)=>{l();"use strict";var{EventEmitter:nht}=gr(),sht=X2e(),pu=be()("latency-monitor:LatencyMonitor"),Q2e=class extends nht{constructor({latencyCheckIntervalMs:e,dataEmitIntervalMs:r,asyncTestFn:i,latencyRandomPercentage:n}={}){super();let s=this;s.latencyCheckIntervalMs=e||500,s.latencyRandomPercentage=n||10,s._latecyCheckMultiply=2*(s.latencyRandomPercentage/100)*s.latencyCheckIntervalMs,s._latecyCheckSubtract=s._latecyCheckMultiply/2,s.dataEmitIntervalMs=r===null||r===0?void 0:r||5*1e3,pu("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",s.latencyCheckIntervalMs,s.dataEmitIntervalMs),s.dataEmitIntervalMs?pu("Expecting ~%s events per summary",s.latencyCheckIntervalMs/s.dataEmitIntervalMs):pu("Not emitting summaries"),s.asyncTestFn=i}start(){globalThis.process&&globalThis.process.hrtime?(pu("Using process.hrtime for timing"),this.now=globalThis.process.hrtime,this.getDeltaMS=e=>{let r=this.now(e);return r[0]*1e3+r[1]/1e6}):typeof window!="undefined"&&window.performance&&window.performance.now?(pu("Using performance.now for timing"),this.now=window.performance.now.bind(window.performance),this.getDeltaMS=e=>Math.round(this.now()-e)):(pu("Using Date.now for timing"),this.now=Date.now,this.getDeltaMS=e=>this.now()-e),this._latencyData=this._initLatencyData(),oht()&&(this._visibilityChangeEmitter=new sht,this._visibilityChangeEmitter.on("visibilityChange",e=>{e?this._startTimers():(this._emitSummary(),this._stopTimers())})),(!this._visibilityChangeEmitter||this._visibilityChangeEmitter.isVisible())&&this._startTimers()}stop(){this._stopTimers()}_startTimers(){this._checkLatencyID||(this._checkLatency(),this.dataEmitIntervalMs&&(this._emitIntervalID=setInterval(()=>this._emitSummary(),this.dataEmitIntervalMs),typeof this._emitIntervalID.unref=="function"&&this._emitIntervalID.unref()))}_stopTimers(){this._checkLatencyID&&(clearTimeout(this._checkLatencyID),this._checkLatencyID=void 0),this._emitIntervalID&&(clearInterval(this._emitIntervalID),this._emitIntervalID=void 0)}_emitSummary(){let e=this.getSummary();e.events>0&&this.emit("data",e)}getSummary(){let e={events:this._latencyData.events,minMs:this._latencyData.minMs,maxMs:this._latencyData.maxMs,avgMs:this._latencyData.events?this._latencyData.totalMs/this._latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this._latencyData.startTime)};return this._latencyData=this._initLatencyData(),pu("Summary: %O",e),e}_checkLatency(){let e=this,r=Math.random()*e._latecyCheckMultiply-e._latecyCheckSubtract,i={deltaOffset:Math.ceil(e.latencyCheckIntervalMs+r),startTime:e.now()},n=()=>{if(!this._checkLatencyID)return;let s=e.getDeltaMS(i.startTime)-i.deltaOffset;e._checkLatency(),e._latencyData.events++,e._latencyData.minMs=Math.min(e._latencyData.minMs,s),e._latencyData.maxMs=Math.max(e._latencyData.maxMs,s),e._latencyData.totalMs+=s,pu("MS: %s Data: %O",s,e._latencyData)};pu("localData: %O",i),this._checkLatencyID=setTimeout(()=>{e.asyncTestFn?(i.deltaOffset=0,i.startTime=e.now(),e.asyncTestFn(n)):(i.deltaOffset-=1,n())},i.deltaOffset),typeof this._checkLatencyID.unref=="function"&&this._checkLatencyID.unref()}_initLatencyData(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}};function oht(){return typeof window!="undefined"}Z2e.exports=Q2e});var tye=p((OMt,eye)=>{l();"use strict";eye.exports=function(){return Date.now()}});var QT=p((kMt,iye)=>{l();"use strict";var B8=tye(),rye=class{constructor(e,r,i){let n=this;this._started=B8(),this._rescheduled=0,this._scheduled=r,this._args=i,this._triggered=!1,this._timerWrapper=()=>{n._rescheduled>0?(n._scheduled=n._rescheduled-(B8()-n._started),n._schedule(n._scheduled)):(n._triggered=!0,e.apply(null,n._args))},this._timer=setTimeout(this._timerWrapper,r)}reschedule(e){e||(e=this._scheduled);let r=B8();r+e-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(e)):this._triggered?this._schedule(e):(this._started=r,this._rescheduled=e)}_schedule(e){this._triggered=!1,this._started=B8(),this._rescheduled=0,this._scheduled=e,this._timer=setTimeout(this._timerWrapper,e)}clear(){clearTimeout(this._timer)}};function aht(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new rye(arguments[0],arguments[1],t)}iye.exports=aht});var uye=p((qMt,cye)=>{l();"use strict";var nye=be(),ta=Object.assign(nye("libp2p:connection-manager"),{error:nye("libp2p:connection-manager:err")}),sye=lr(),cht=br(),uht=J2e(),M8=QT(),{EventEmitter:fht}=gr(),lht=tt(),{codes:{ERR_INVALID_PARAMETERS:oye}}=yi(),dht={maxConnections:1/0,minConnections:0,maxData:1/0,maxSentData:1/0,maxReceivedData:1/0,maxEventLoopDelay:1/0,pollInterval:2e3,autoDialInterval:1e4,movingAverageInterval:6e4,defaultPeerValue:1},aye=class extends fht{constructor(e,r={}){super();if(this._libp2p=e,this._peerId=e.peerId.toB58String(),this._options=cht.call({ignoreUndefined:!0},dht,r),this._options.maxConnections<this._options.minConnections)throw sye(new Error("Connection Manager maxConnections must be greater than minConnections"),oye);ta("options: %j",this._options),this._peerValues=new Map,this.connections=new Map,this._started=!1,this._timer=null,this._autoDialTimeout=null,this._checkMetrics=this._checkMetrics.bind(this),this._autoDial=this._autoDial.bind(this),this._latencyMonitor=new uht({latencyCheckIntervalMs:this._options.pollInterval,dataEmitIntervalMs:this._options.pollInterval})}get size(){return Array.from(this.connections.values()).reduce((e,r)=>e+r.length,0)}start(){this._libp2p.metrics&&(this._timer=this._timer||M8(this._checkMetrics,this._options.pollInterval)),this._latencyMonitor.start(),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),this._latencyMonitor.on("data",this._onLatencyMeasure),this._started=!0,ta("started"),this._options.autoDial&&this._autoDial()}async stop(){this._autoDialTimeout&&this._autoDialTimeout.clear(),this._timer&&this._timer.clear(),this._latencyMonitor.removeListener("data",this._onLatencyMeasure),this._latencyMonitor.stop(),this._started=!1,await this._close(),ta("stopped")}async _close(){let e=[];for(let r of this.connections.values())for(let i of r)e.push(i.close());await Promise.all(e),this.connections.clear()}setPeerValue(e,r){if(r<0||r>1)throw new Error("value should be a number between 0 and 1");this._peerValues.set(e.toB58String(),r)}_checkMetrics(){if(this._libp2p.metrics){let e=this._libp2p.metrics.global.movingAverages,r=e.dataReceived[this._options.movingAverageInterval].movingAverage();this._checkMaxLimit("maxReceivedData",r);let i=e.dataSent[this._options.movingAverageInterval].movingAverage();this._checkMaxLimit("maxSentData",i);let n=r+i;this._checkMaxLimit("maxData",n),ta("metrics update",n),this._timer=M8(this._checkMetrics,this._options.pollInterval)}}onConnect(e){let r=e.remotePeer,i=r.toB58String(),n=this.connections.get(i);this.emit("peer:connect",e),n?n.push(e):this.connections.set(i,[e]),this._libp2p.peerStore.keyBook.set(r,r.pubKey),this._peerValues.has(i)||this._peerValues.set(i,this._options.defaultPeerValue),this._checkMaxLimit("maxConnections",this.size)}onDisconnect(e){let r=e.remotePeer.toB58String(),i=this.connections.get(r);i&&i.length>1?(i=i.filter(n=>n.id!==e.id),this.connections.set(r,i)):i&&(this.connections.delete(r),this._peerValues.delete(e.remotePeer.toB58String()),this.emit("peer:disconnect",e))}get(e){let r=this.getAll(e);return r.length?r[0]:null}getAll(e){if(!lht.isPeerId(e))throw sye(new Error("peerId must be an instance of peer-id"),oye);let r=e.toB58String(),i=this.connections.get(r);return i?i.filter(n=>n.stat.status==="open"):[]}_onLatencyMeasure(e){this._checkMaxLimit("maxEventLoopDelay",e.avgMs)}_checkMaxLimit(e,r){let i=this._options[e];ta("checking limit of %s. current value: %d of %d",e,r,i),r>i&&(ta("%s: limit exceeded: %s, %d",this._peerId,e,r),this._maybeDisconnectOne())}async _autoDial(){let e=this._options.minConnections;if(this.size>=e){this._autoDialTimeout=M8(this._autoDial,this._options.autoDialInterval);return}let r=Array.from(this._libp2p.peerStore.peers.values()).sort((i,n)=>n.protocols&&n.protocols.length&&(!i.protocols||!i.protocols.length)||n.id.pubKey&&!i.id.pubKey?1:-1);for(let i=0;i<r.length&&this.size<e;i++)if(!this.get(r[i].id)){ta("connecting to a peerStore stored peer %s",r[i].id.toB58String());try{if(await this._libp2p.dialer.connectToPeer(r[i].id),!this._started)return}catch(n){ta.error("could not connect to peerStore stored peer",n)}}this._autoDialTimeout=M8(this._autoDial,this._options.autoDialInterval)}_maybeDisconnectOne(){if(this._options.minConnections<this.connections.size){let e=Array.from(new Map([...this._peerValues.entries()].sort((i,n)=>i[1]-n[1])));ta("%s: sorted peer values: %j",this._peerId,e);let r=e[0];if(r){let i=r[0];ta("%s: lowest value peer is %s",this._peerId,i),ta("%s: closing a connection to %j",this._peerId,i);for(let n of this.connections.values())if(n[0].remotePeer.toB58String()===i){n[0].close();break}}}}};cye.exports=aye});var D1=p((DMt,lye)=>{l();"use strict";var Dd=qi(),L8=Dd.Reader,fye=Dd.Writer,ro=Dd.util,$i=Dd.roots["libp2p-circuit"]||(Dd.roots["libp2p-circuit"]={});$i.CircuitRelay=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.type=1,t.prototype.srcPeer=null,t.prototype.dstPeer=null,t.prototype.code=100,t.encode=function(r,i){return i||(i=fye.create()),r.type!=null&&Object.hasOwnProperty.call(r,"type")&&i.uint32(8).int32(r.type),r.srcPeer!=null&&Object.hasOwnProperty.call(r,"srcPeer")&&$i.CircuitRelay.Peer.encode(r.srcPeer,i.uint32(18).fork()).ldelim(),r.dstPeer!=null&&Object.hasOwnProperty.call(r,"dstPeer")&&$i.CircuitRelay.Peer.encode(r.dstPeer,i.uint32(26).fork()).ldelim(),r.code!=null&&Object.hasOwnProperty.call(r,"code")&&i.uint32(32).int32(r.code),i},t.decode=function(r,i){r instanceof L8||(r=L8.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new $i.CircuitRelay;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.type=r.int32();break;case 2:s.srcPeer=$i.CircuitRelay.Peer.decode(r,r.uint32());break;case 3:s.dstPeer=$i.CircuitRelay.Peer.decode(r,r.uint32());break;case 4:s.code=r.int32();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof $i.CircuitRelay)return r;var i=new $i.CircuitRelay;switch(r.type){case"HOP":case 1:i.type=1;break;case"STOP":case 2:i.type=2;break;case"STATUS":case 3:i.type=3;break;case"CAN_HOP":case 4:i.type=4;break}if(r.srcPeer!=null){if(typeof r.srcPeer!="object")throw TypeError(".CircuitRelay.srcPeer: object expected");i.srcPeer=$i.CircuitRelay.Peer.fromObject(r.srcPeer)}if(r.dstPeer!=null){if(typeof r.dstPeer!="object")throw TypeError(".CircuitRelay.dstPeer: object expected");i.dstPeer=$i.CircuitRelay.Peer.fromObject(r.dstPeer)}switch(r.code){case"SUCCESS":case 100:i.code=100;break;case"HOP_SRC_ADDR_TOO_LONG":case 220:i.code=220;break;case"HOP_DST_ADDR_TOO_LONG":case 221:i.code=221;break;case"HOP_SRC_MULTIADDR_INVALID":case 250:i.code=250;break;case"HOP_DST_MULTIADDR_INVALID":case 251:i.code=251;break;case"HOP_NO_CONN_TO_DST":case 260:i.code=260;break;case"HOP_CANT_DIAL_DST":case 261:i.code=261;break;case"HOP_CANT_OPEN_DST_STREAM":case 262:i.code=262;break;case"HOP_CANT_SPEAK_RELAY":case 270:i.code=270;break;case"HOP_CANT_RELAY_TO_SELF":case 280:i.code=280;break;case"STOP_SRC_ADDR_TOO_LONG":case 320:i.code=320;break;case"STOP_DST_ADDR_TOO_LONG":case 321:i.code=321;break;case"STOP_SRC_MULTIADDR_INVALID":case 350:i.code=350;break;case"STOP_DST_MULTIADDR_INVALID":case 351:i.code=351;break;case"STOP_RELAY_REFUSED":case 390:i.code=390;break;case"MALFORMED_MESSAGE":case 400:i.code=400;break}return i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.type=i.enums===String?"HOP":1,n.srcPeer=null,n.dstPeer=null,n.code=i.enums===String?"SUCCESS":100),r.type!=null&&r.hasOwnProperty("type")&&(n.type=i.enums===String?$i.CircuitRelay.Type[r.type]:r.type),r.srcPeer!=null&&r.hasOwnProperty("srcPeer")&&(n.srcPeer=$i.CircuitRelay.Peer.toObject(r.srcPeer,i)),r.dstPeer!=null&&r.hasOwnProperty("dstPeer")&&(n.dstPeer=$i.CircuitRelay.Peer.toObject(r.dstPeer,i)),r.code!=null&&r.hasOwnProperty("code")&&(n.code=i.enums===String?$i.CircuitRelay.Status[r.code]:r.code),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Dd.util.toJSONOptions)},t.Status=function(){var e={},r=Object.create(e);return r[e[100]="SUCCESS"]=100,r[e[220]="HOP_SRC_ADDR_TOO_LONG"]=220,r[e[221]="HOP_DST_ADDR_TOO_LONG"]=221,r[e[250]="HOP_SRC_MULTIADDR_INVALID"]=250,r[e[251]="HOP_DST_MULTIADDR_INVALID"]=251,r[e[260]="HOP_NO_CONN_TO_DST"]=260,r[e[261]="HOP_CANT_DIAL_DST"]=261,r[e[262]="HOP_CANT_OPEN_DST_STREAM"]=262,r[e[270]="HOP_CANT_SPEAK_RELAY"]=270,r[e[280]="HOP_CANT_RELAY_TO_SELF"]=280,r[e[320]="STOP_SRC_ADDR_TOO_LONG"]=320,r[e[321]="STOP_DST_ADDR_TOO_LONG"]=321,r[e[350]="STOP_SRC_MULTIADDR_INVALID"]=350,r[e[351]="STOP_DST_MULTIADDR_INVALID"]=351,r[e[390]="STOP_RELAY_REFUSED"]=390,r[e[400]="MALFORMED_MESSAGE"]=400,r}(),t.Type=function(){var e={},r=Object.create(e);return r[e[1]="HOP"]=1,r[e[2]="STOP"]=2,r[e[3]="STATUS"]=3,r[e[4]="CAN_HOP"]=4,r}(),t.Peer=function(){function e(r){if(this.addrs=[],r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.id=ro.newBuffer([]),e.prototype.addrs=ro.emptyArray,e.encode=function(i,n){if(n||(n=fye.create()),n.uint32(10).bytes(i.id),i.addrs!=null&&i.addrs.length)for(var s=0;s<i.addrs.length;++s)n.uint32(18).bytes(i.addrs[s]);return n},e.decode=function(i,n){i instanceof L8||(i=L8.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new $i.CircuitRelay.Peer;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.id=i.bytes();break;case 2:o.addrs&&o.addrs.length||(o.addrs=[]),o.addrs.push(i.bytes());break;default:i.skipType(a&7);break}}if(!o.hasOwnProperty("id"))throw ro.ProtocolError("missing required 'id'",{instance:o});return o},e.fromObject=function(i){if(i instanceof $i.CircuitRelay.Peer)return i;var n=new $i.CircuitRelay.Peer;if(i.id!=null&&(typeof i.id=="string"?ro.base64.decode(i.id,n.id=ro.newBuffer(ro.base64.length(i.id)),0):i.id.length&&(n.id=i.id)),i.addrs){if(!Array.isArray(i.addrs))throw TypeError(".CircuitRelay.Peer.addrs: array expected");n.addrs=[];for(var s=0;s<i.addrs.length;++s)typeof i.addrs[s]=="string"?ro.base64.decode(i.addrs[s],n.addrs[s]=ro.newBuffer(ro.base64.length(i.addrs[s])),0):i.addrs[s].length&&(n.addrs[s]=i.addrs[s])}return n},e.toObject=function(i,n){n||(n={});var s={};if((n.arrays||n.defaults)&&(s.addrs=[]),n.defaults&&(n.bytes===String?s.id="":(s.id=[],n.bytes!==Array&&(s.id=ro.newBuffer(s.id)))),i.id!=null&&i.hasOwnProperty("id")&&(s.id=n.bytes===String?ro.base64.encode(i.id,0,i.id.length):n.bytes===Array?Array.prototype.slice.call(i.id):i.id),i.addrs&&i.addrs.length){s.addrs=[];for(var o=0;o<i.addrs.length;++o)s.addrs[o]=n.bytes===String?ro.base64.encode(i.addrs[o],0,i.addrs[o].length):n.bytes===Array?Array.prototype.slice.call(i.addrs[o]):i.addrs[o]}return s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Dd.util.toJSONOptions)},e}(),t}();lye.exports=$i});var pye=p((NMt,hye)=>{l();"use strict";var{source:dye}=nc(),hht=be(),pht=hht("libp2p:stream:converter");function yht({stream:t,remoteAddr:e,localAddr:r},i={}){let{sink:n,source:s}=t,o={async sink(c){i.signal&&(c=dye(c,i.signal));try{await n(c)}catch(u){u.type!=="aborted"&&pht(u)}a()},source:i.signal?dye(s,i.signal):s,conn:t,localAddr:r,remoteAddr:e,timeline:{open:Date.now(),close:void 0},close(){return n(new Uint8Array(0)),a()}};function a(){return o.timeline.close||(o.timeline.close=Date.now()),Promise.resolve()}return o}hye.exports=yht});var e3=p((BMt,yye)=>{l();"use strict";yye.exports={relay:"/libp2p/circuit/relay/0.1.0"}});var bye=p((MMt,gye)=>{l();"use strict";var{EventEmitter:ght}=gr(),{Multiaddr:bht}=rt();gye.exports=t=>{let e=new Map;async function r(s){let o=String(s).split("/p2p-circuit").find(u=>u!==""),a=await t.dial(new bht(o)),c=a.remoteAddr.encapsulate("/p2p-circuit");e.set(a.remotePeer.toB58String(),c),n.emit("listening")}function i(){let s=[];for(let o of e.values())s.push(o);return s}let n=Object.assign(new ght,{close:()=>Promise.resolve(),listen:r,getAddrs:i});return t.connectionManager.on("peer:disconnect",s=>{e.delete(s.remotePeer.toB58String())&&n.emit("close")}),n}});var ZT=p((LMt,wye)=>{l();"use strict";var{Multiaddr:mye}=rt(),{CircuitRelay:Nd}=D1();function vye(t,e){t.write({type:Nd.Type.STATUS,code:e})}function mht(t,e){try{t.dstPeer&&t.dstPeer.addrs&&t.dstPeer.addrs.forEach(r=>new mye(r))}catch(r){throw vye(e,t.type===Nd.Type.HOP?Nd.Status.HOP_DST_MULTIADDR_INVALID:Nd.Status.STOP_DST_MULTIADDR_INVALID),r}try{t.srcPeer&&t.srcPeer.addrs&&t.srcPeer.addrs.forEach(r=>new mye(r))}catch(r){throw vye(e,t.type===Nd.Type.HOP?Nd.Status.HOP_SRC_MULTIADDR_INVALID:Nd.Status.STOP_SRC_MULTIADDR_INVALID),r}}wye.exports={validateAddrs:mht}});var N1=p((UMt,_ye)=>{l();"use strict";var vht=E5(),wht=Ha(),_ht=gf();_ye.exports=t=>{let e=wht(),r=vht(t.source),i=_ht(),n,s=t.sink(async function*(){yield*e,yield*await i.promise}());return s.catch(a=>{n=a}),{reader:r,writer:e,stream:{sink:a=>n?Promise.reject(n):(i.resolve(a),s),source:r},rest:()=>e.end(),write:e.push,read:async()=>(await r.next()).value}}});var F8=p((FMt,Iye)=>{l();"use strict";var Eye=be(),U8=Object.assign(Eye("libp2p:circuit:stream-handler"),{error:Eye("libp2p:circuit:stream-handler:err")}),Sye=Xo(),Eht=N1(),{CircuitRelay:xye}=D1(),Aye=class{constructor({stream:e,maxLength:r=4096}){this.stream=e,this.shake=Eht(this.stream),this.decoder=Sye.decode.fromReader(this.shake.reader,{maxDataLength:r})}async read(){let e=await this.decoder.next();if(e.value){let r=xye.decode(e.value.slice());return U8("read message type",r.type),r}U8("read received no value, closing stream"),this.close()}write(e){U8("write message type %s",e.type),this.shake.write(Sye.encode.single(xye.encode(e).finish()))}rest(){return this.shake.rest(),this.shake.stream}end(e){this.write(e),this.close()}close(){U8("closing the stream"),this.rest().sink([])}};Iye.exports=Aye});var tR=p((jMt,eR)=>{l();"use strict";var Tye=be(),t3=Object.assign(Tye("libp2p:circuit:stop"),{error:Tye("libp2p:circuit:stop:err")}),{CircuitRelay:JT}=D1(),Sht=e3(),xht=F8(),{validateAddrs:Aht}=ZT();eR.exports.handleStop=function({connection:e,request:r,streamHandler:i}){try{Aht(r,i)}catch(n){return t3.error("invalid stop request via peer %s",e.remotePeer.toB58String(),n)}return t3("stop request is valid"),i.write({type:JT.Type.STATUS,code:JT.Status.SUCCESS}),i.rest()};eR.exports.stop=async function({connection:e,request:r}){let{stream:i}=await e.newStream([Sht.relay]);t3("starting stop request to %s",e.remotePeer.toB58String());let n=new xht({stream:i});n.write(r);let s=await n.read();if(!s)return n.close();if(s.code===JT.Status.SUCCESS)return t3("stop request to %s was successful",e.remotePeer.toB58String()),n.rest();t3("stop request failed with code %d",s.code),n.close()}});var rR=p((KMt,qye)=>{l();"use strict";var Rye=be(),yu=Object.assign(Rye("libp2p:circuit:hop"),{error:Rye("libp2p:circuit:hop:err")}),Pye=lr(),Iht=tt(),{validateAddrs:Tht}=ZT(),Cye=F8(),{CircuitRelay:ms}=D1(),{pipe:Rht}=Ir(),{codes:Oye}=yi(),{stop:Pht}=tR(),kye=e3();async function Cht({connection:t,request:e,streamHandler:r,circuit:i}){if(!i._options.hop.enabled)return yu("HOP request received but we are not acting as a relay"),r.end({type:ms.Type.STATUS,code:ms.Status.HOP_CANT_SPEAK_RELAY});try{Tht(e,r)}catch(u){return yu.error("invalid hop request via peer %s",t.remotePeer.toB58String(),u)}if(!e.dstPeer){yu("HOP request received but we do not receive a dstPeer");return}let n=new Iht(e.dstPeer.id),s=i._connectionManager.get(n);if(!s&&!i._options.hop.active)return yu("HOP request received but we are not connected to the destination peer"),r.end({type:ms.Type.STATUS,code:ms.Status.HOP_NO_CONN_TO_DST});if(!s)return;let o={type:ms.Type.STOP,dstPeer:e.dstPeer,srcPeer:e.srcPeer},a;try{a=await Pht({connection:s,request:o})}catch(u){return yu.error(u)}yu("hop request from %s is valid",t.remotePeer.toB58String()),r.write({type:ms.Type.STATUS,code:ms.Status.SUCCESS});let c=r.rest();return Rht(c,a,c)}async function Oht({connection:t,request:e}){let{stream:r}=await t.newStream([kye.relay]),i=new Cye({stream:r});i.write(e);let n=await i.read();if(!n)throw Pye(new Error("HOP request had no response"),Oye.ERR_HOP_REQUEST_FAILED);if(n.code===ms.Status.SUCCESS)return yu("hop request was successful"),i.rest();throw yu("hop request failed with code %d, closing stream",n.code),i.close(),Pye(new Error(`HOP request failed with code ${n.code}`),Oye.ERR_HOP_REQUEST_FAILED)}async function kht({connection:t}){let{stream:e}=await t.newStream([kye.relay]),r=new Cye({stream:e});r.write({type:ms.Type.CAN_HOP});let i=await r.read();return await r.close(),!(!i||i.code!==ms.Status.SUCCESS)}function qht({connection:t,streamHandler:e,circuit:r}){let i=r._options.hop.enabled;yu("can hop (%s) request from %s",i,t.remotePeer.toB58String()),e.end({type:ms.Type.STATUS,code:i?ms.Status.SUCCESS:ms.Status.HOP_CANT_SPEAK_RELAY})}qye.exports={handleHop:Cht,hop:Oht,canHop:kht,handleCanHop:qht}});var Uye=p((VMt,Lye)=>{l();"use strict";var Dye=be(),gu=Object.assign(Dye("libp2p:circuit"),{error:Dye("libp2p:circuit:err")}),Dht=lr(),Nht=Cl(),{Multiaddr:r3}=rt(),Nye=tt(),{CircuitRelay:i3}=D1(),{codes:Bht}=yi(),Bye=pye(),{relay:Mht}=e3(),Lht=bye(),{handleCanHop:Uht,handleHop:Fht,hop:jht}=rR(),{handleStop:Kht}=tR(),Vht=F8(),zht=Symbol.for("@libp2p/js-libp2p-circuit/circuit"),Mye=class{constructor({libp2p:e,upgrader:r}){this._dialer=e.dialer,this._registrar=e.registrar,this._connectionManager=e.connectionManager,this._upgrader=r,this._options=e._config.relay,this._libp2p=e,this.peerId=e.peerId,this._registrar.handle(Mht,this._onProtocol.bind(this))}async _onProtocol({connection:e,stream:r}){let i=new Vht({stream:r}),n=await i.read();if(!n)return;let s=this,o;switch(n.type){case i3.Type.CAN_HOP:{gu("received CAN_HOP request from %s",e.remotePeer.toB58String()),await Uht({circuit:s,connection:e,streamHandler:i});break}case i3.Type.HOP:{gu("received HOP request from %s",e.remotePeer.toB58String()),o=await Fht({connection:e,request:n,streamHandler:i,circuit:s});break}case i3.Type.STOP:{gu("received STOP request from %s",e.remotePeer.toB58String()),o=await Kht({connection:e,request:n,streamHandler:i});break}default:gu("Request of type %s not supported",n.type)}if(o){let a=new r3(n.dstPeer.addrs[0]),c=new r3(n.srcPeer.addrs[0]),u=Bye({stream:o,remoteAddr:a,localAddr:c}),f=n.type===i3.Type.HOP?"relay":"inbound";gu("new %s connection %s",f,u.remoteAddr);let d=await this._upgrader.upgradeInbound(u);gu("%s connection %s upgraded",f,u.remoteAddr),this.handler&&this.handler(d)}}async dial(e,r){let i=e.toString().split("/p2p-circuit"),n=new r3(i[0]),s=new r3(i[i.length-1]),o=n.getPeerId(),a=s.getPeerId();if(!o||!a){let h="Circuit relay dial failed as addresses did not have peer id";throw gu.error(h),Dht(new Error(h),Bht.ERR_RELAYED_DIAL)}let c=Nye.createFromB58String(o),u=Nye.createFromB58String(a),f=!1,d=this._connectionManager.get(c);d||(d=await this._dialer.connectToPeer(n,r),f=!0);try{let h=await jht({connection:d,request:{type:i3.Type.HOP,srcPeer:{id:this.peerId.toBytes(),addrs:this._libp2p.multiaddrs.map(m=>m.bytes)},dstPeer:{id:u.toBytes(),addrs:[new r3(s).bytes]}}}),y=n.encapsulate(`/p2p-circuit/p2p/${this.peerId.toB58String()}`),g=Bye({stream:h,remoteAddr:e,localAddr:y});return gu("new outbound connection %s",g.remoteAddr),this._upgrader.upgradeOutbound(g)}catch(h){throw gu.error("Circuit relay dial failed",h),f&&await d.close(),h}}createListener(e,r){return typeof e=="function"&&(r=e,e={}),this.handler=r,Lht(this._libp2p)}filter(e){return e=Array.isArray(e)?e:[e],e.filter(r=>Nht.Circuit.matches(r))}get[Symbol.toStringTag](){return"Circuit"}static isTransport(e){return Boolean(e&&e[zht])}};Lye.exports=Mye});var iR=p((zMt,Fye)=>{l();"use strict";var{CID:Hht}=(Ae(),De),{sha256:$ht}=(ii(),fi);Fye.exports.namespaceToCid=async t=>{let e=new TextEncoder().encode(t),r=await $ht.digest(e);return Hht.createV0(r)}});var Gye=p((HMt,$ye)=>{l();"use strict";var jye=be(),Kye=Object.assign(jye("libp2p:auto-relay"),{error:jye("libp2p:auto-relay:err")}),{fromString:Ght}=(ut(),lt),{toString:Wht}=(et(),Je),{Multiaddr:Yht}=rt(),Xht=tt(),{relay:Qht}=e3(),{canHop:Zht}=rR(),{namespaceToCid:Jht}=iR(),{CIRCUIT_PROTO_CODE:e0t,HOP_METADATA_KEY:Vye,HOP_METADATA_VALUE:zye,RELAY_RENDEZVOUS_NS:t0t}=k8(),Hye=class{constructor({libp2p:e,maxListeners:r=1,onError:i}){this._libp2p=e,this._peerId=e.peerId,this._peerStore=e.peerStore,this._connectionManager=e.connectionManager,this._transportManager=e.transportManager,this._addressSorter=e.dialer.addressSorter,this.maxListeners=r,this._listenRelays=new Set,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this),this._peerStore.on("change:protocols",this._onProtocolChange),this._connectionManager.on("peer:disconnect",this._onPeerDisconnected),this._onError=(n,s)=>{Kye.error(s||n),i&&i(n,s)}}async _onProtocolChange({peerId:e,protocols:r}){let i=e.toB58String(),n=r.find(s=>s===Qht);if(!n&&this._listenRelays.has(i)){this._removeListenRelay(i);return}else if(!n||this._listenRelays.has(i))return;try{let s=this._connectionManager.get(e);if(!s)return;if(s.remoteAddr.protoCodes().includes(e0t)){Kye(`relayed connection to ${i} will not be used to hop on`);return}await Zht({connection:s})&&(this._peerStore.metadataBook.set(e,Vye,Ght(zye)),await this._addListenRelay(s,i))}catch(s){this._onError(s)}}_onPeerDisconnected(e){let i=e.remotePeer.toB58String();!this._listenRelays.has(i)||this._removeListenRelay(i)}async _addListenRelay(e,r){if(this._listenRelays.size>=this.maxListeners)return;let i=this._peerStore.addressBook.getMultiaddrsForPeer(e.remotePeer,this._addressSorter);if(!i||!i.length)return;let n=`${i[0].toString()}/p2p-circuit`;this._listenRelays.add(r);try{await this._transportManager.listen([new Yht(n)])}catch(s){this._onError(s),this._listenRelays.delete(r)}}_removeListenRelay(e){this._listenRelays.delete(e)&&this._listenOnAvailableHopRelays([e])}async _listenOnAvailableHopRelays(e=[]){if(this._listenRelays.size>=this.maxListeners)return;let r=[];for(let[i,n]of this._peerStore.metadataBook.data.entries()){if(this._listenRelays.has(i)||e.includes(i))continue;let s=n.get(Vye);if(!s||Wht(s)!==zye)continue;let o=Xht.createFromB58String(i),a=this._connectionManager.get(o);if(!a){r.push(o);continue}if(await this._addListenRelay(a,i),this._listenRelays.size>=this.maxListeners)return}for(let i of r)if(await this._tryToListenOnRelay(i),this._listenRelays.size>=this.maxListeners)return;try{let i=await Jht(t0t);for await(let n of this._libp2p.contentRouting.findProviders(i)){if(!n.multiaddrs.length)continue;let s=n.id;if(this._peerStore.addressBook.add(s,n.multiaddrs),await this._tryToListenOnRelay(s),this._listenRelays.size>=this.maxListeners)return}}catch(i){this._onError(i)}}async _tryToListenOnRelay(e){try{let r=await this._libp2p.dial(e);await this._addListenRelay(r,e.toB58String())}catch(r){this._onError(r,`could not connect and listen on known hop relay ${e.toB58String()}`)}}};$ye.exports=Hye});var Zye=p(($Mt,Qye)=>{l();"use strict";var Wye=be(),Yye=Object.assign(Wye("libp2p:relay"),{error:Wye("libp2p:relay:err")}),{setDelayedInterval:r0t,clearDelayedInterval:i0t}=DT(),n0t=Gye(),{namespaceToCid:s0t}=iR(),{RELAY_RENDEZVOUS_NS:o0t}=k8(),Xye=class{constructor(e){this._libp2p=e,this._options={...e._config.relay},this._autoRelay=this._options.autoRelay.enabled&&new n0t({libp2p:e,...this._options.autoRelay}),this._advertiseService=this._advertiseService.bind(this)}start(){this._options.hop.enabled&&this._options.advertise.enabled&&(this._timeout=r0t(this._advertiseService,this._options.advertise.ttl,this._options.advertise.bootDelay))}stop(){i0t(this._timeout)}async _advertiseService(){try{let e=await s0t(o0t);await this._libp2p.contentRouting.provide(e)}catch(e){e.code==="NO_ROUTERS_AVAILABLE"?(Yye.error("a content router, such as a DHT, must be provided in order to advertise the relay service",e),this.stop()):Yye.error(e)}}};Qye.exports=Xye});var rge=p((WMt,tge)=>{l();var Jye=qE(),ege=gf();tge.exports=class{constructor(){this._buffer=new Jye,this._waitingConsumers=new Jye}push(e){let{promise:r,resolve:i}=ege();return this._buffer.push({chunk:e,resolve:i}),this._consume(),r}_consume(){for(;!this._waitingConsumers.isEmpty()&&!this._buffer.isEmpty();){let e=this._waitingConsumers.shift(),r=this._buffer.shift();e.resolve(r.chunk),r.resolve()}}shift(){let{promise:e,resolve:r}=ege();return this._waitingConsumers.push({resolve:r}),this._consume(),e}isEmpty(){return this._buffer.isEmpty()}}});var nge=p((YMt,ige)=>{l();"use strict";ige.exports=(t,e=1,r)=>{if(r={indent:" ",includeEmptyLines:!1,...r},typeof t!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof t}\``);if(typeof e!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof e}\``);if(typeof r.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof r.indent}\``);if(e===0)return t;let i=r.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return t.replace(i,r.indent.repeat(e))}});var sge=p(()=>{l()});var uge=p((ZMt,cge)=>{l();"use strict";var oge=sge(),age=/\s+at.*(?:\(|\s)(.*)\)?/,a0t=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,c0t=typeof oge.homedir=="undefined"?"":oge.homedir();cge.exports=(t,e)=>(e=Object.assign({pretty:!1},e),t.replace(/\\/g,"/").split(`
`).filter(r=>{let i=r.match(age);if(i===null||!i[1])return!0;let n=i[1];return n.includes(".app/Contents/Resources/electron.asar")||n.includes(".app/Contents/Resources/default_app.asar")?!1:!a0t.test(n)}).filter(r=>r.trim()!=="").map(r=>e.pretty?r.replace(age,(i,n)=>i.replace(n,n.replace(c0t,"~"))):r).join(`
`))});var nR=p((JMt,lge)=>{l();"use strict";var u0t=nge(),f0t=uge(),l0t=t=>t.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""),fge=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);e=[...e].map(i=>i instanceof Error?i:i!==null&&typeof i=="object"?Object.assign(new Error(i.message),i):new Error(i));let r=e.map(i=>typeof i.stack=="string"?l0t(f0t(i.stack)):String(i)).join(`
`);r=`
`+u0t(r,4);super(r);this.name="AggregateError",Object.defineProperty(this,"_errors",{value:e})}*[Symbol.iterator](){for(let e of this._errors)yield e}};lge.exports=fge});var dge=p((eLt,oR)=>{l();"use strict";var sR=class extends Error{constructor(e){super(e||"Promise was canceled");this.name="CancelError"}get isCanceled(){return!0}},n3=class{static fn(e){return(...r)=>new n3((i,n,s)=>{r.push(s),e(...r).then(i,n)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((r,i)=>{this._reject=i;let n=a=>{(!this._isCanceled||!o.shouldReject)&&(this._isPending=!1,r(a))},s=a=>{this._isPending=!1,i(a)},o=a=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(a)};return Object.defineProperties(o,{shouldReject:{get:()=>this._rejectOnCancel,set:a=>{this._rejectOnCancel=a}}}),e(n,s,o)})}then(e,r){return this._promise.then(e,r)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let r of this._cancelHandlers)r()}catch(r){this._reject(r);return}this._rejectOnCancel&&this._reject(new sR(e))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(n3.prototype,Promise.prototype);oR.exports=n3;oR.exports.CancelError=sR});var pge=p((tLt,j8)=>{l();"use strict";var hge=nR(),d0t=dge(),aR=class extends Error{},h0t=(t,e)=>new d0t((r,i,n)=>{let{count:s,filter:o=()=>!0}=e;if(!Number.isFinite(s)){i(new TypeError(`Expected a finite number, got ${typeof e.count}`));return}let a=[],c=[],u=0,f=!1,d=new Set,h=()=>(a.length===s&&(r(a),f=!0),u-c.length<s&&(i(new hge(c)),f=!0),f),y=()=>{for(let g of t)!d.has(g)&&typeof g.cancel=="function"&&g.cancel()};n(y);for(let g of t)u++,(async()=>{try{let m=await g;if(f)return;if(!o(m))throw new aR("Value does not satisfy filter");a.push(m)}catch(m){c.push(m)}finally{d.add(g),!f&&h()&&y()}})();s>u&&(i(new RangeError(`Expected input to contain at least ${e.count} items, but contains ${u} items`)),y())});j8.exports=h0t;j8.exports.AggregateError=hge;j8.exports.FilterError=aR});var yge=p((rLt,uR)=>{l();"use strict";var cR=class extends Error{constructor(e){super(e||"Promise was canceled");this.name="CancelError"}get isCanceled(){return!0}},s3=class{static fn(e){return(...r)=>new s3((i,n,s)=>{r.push(s),e(...r).then(i,n)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((r,i)=>{this._reject=i;let n=a=>{(!this._isCanceled||!o.shouldReject)&&(this._isPending=!1,r(a))},s=a=>{this._isPending=!1,i(a)},o=a=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(a)};return Object.defineProperties(o,{shouldReject:{get:()=>this._rejectOnCancel,set:a=>{this._rejectOnCancel=a}}}),e(n,s,o)})}then(e,r){return this._promise.then(e,r)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let r of this._cancelHandlers)r()}catch(r){this._reject(r);return}this._rejectOnCancel&&this._reject(new cR(e))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(s3.prototype,Promise.prototype);uR.exports=s3;uR.exports.CancelError=cR});var bge=p((iLt,fR)=>{l();"use strict";var gge=pge(),p0t=yge();fR.exports=(t,e)=>{let r=gge(t,{...e,count:1});return p0t.fn(async i=>{i(()=>{r.cancel()});let[n]=await r;return n})()};fR.exports.AggregateError=gge.AggregateError});var wge=p((nLt,vge)=>{l();"use strict";var y0t=lr(),g0t=fh().default,{anySignal:b0t}=ku(),m0t=rge(),v0t=bge(),mge=class{constructor({addrs:e,dialAction:r,dialer:i}){this.addrs=e,this.dialer=i,this.dialAction=r}async run(e={}){let r=this.dialer.getTokens(this.addrs.length);if(r.length<1)throw y0t(new Error("No dial tokens available"),"ERR_NO_DIAL_TOKENS");let i=new m0t;r.forEach(o=>i.push(o));let n=this.addrs.map(()=>new g0t),s=0;try{return await v0t(this.addrs.map(async(o,a)=>{let c=await i.shift(),u;try{let f=n[a].signal;u=await this.dialAction(o,{...e,signal:e.signal?b0t([f,e.signal]):f}),n.splice(a,1)}finally{s++,this.addrs.length-s>=r.length?i.push(c):this.dialer.releaseToken(r.splice(r.indexOf(c),1)[0])}return u}))}finally{n.map(o=>o.abort()),r.forEach(o=>this.dialer.releaseToken(o))}}};vge.exports=mge});var xge=p((sLt,Sge)=>{l();"use strict";var _ge=be(),B1=Object.assign(_ge("libp2p:dialer"),{error:_ge("libp2p:dialer:err")}),lR=lr(),{Multiaddr:dR}=rt(),w0t=ub(),{AbortError:_0t}=nc(),{anySignal:E0t}=ku(),S0t=wge(),{publicAddressesFirst:x0t}=jT(),A0t=MT(),{codes:K8}=yi(),{DIAL_TIMEOUT:I0t,MAX_PARALLEL_DIALS:T0t,MAX_PER_PEER_DIALS:R0t,MAX_ADDRS_TO_DIAL:P0t}=O8(),Ege=class{constructor({transportManager:e,peerStore:r,addressSorter:i=x0t,maxParallelDials:n=T0t,maxAddrsToDial:s=P0t,dialTimeout:o=I0t,maxDialsPerPeer:a=R0t,resolvers:c={}}){this.transportManager=e,this.peerStore=r,this.addressSorter=i,this.maxParallelDials=n,this.maxAddrsToDial=s,this.timeout=o,this.maxDialsPerPeer=a,this.tokens=[...new Array(n)].map((u,f)=>f),this._pendingDials=new Map,this._pendingDialTargets=new Map;for(let[u,f]of Object.entries(c))dR.resolvers.set(u,f)}destroy(){for(let e of this._pendingDials.values())try{e.controller.abort()}catch(r){B1.error(r)}this._pendingDials.clear();for(let e of this._pendingDialTargets.values())e.reject(new _0t("Dialer was destroyed"));this._pendingDialTargets.clear()}async connectToPeer(e,r={}){let i=await this._createCancellableDialTarget(e);if(!i.addrs.length)throw lR(new Error("The dial request has no valid addresses"),K8.ERR_NO_VALID_ADDRESSES);let n=this._pendingDials.get(i.id)||this._createPendingDial(i,r);try{let s=await n.promise;return B1("dial succeeded to %s",i.id),s}catch(s){throw n.controller.signal.aborted&&(s.code=K8.ERR_TIMEOUT),B1.error(s),s}finally{n.destroy()}}async _createCancellableDialTarget(e){let r=`${parseInt(String(Math.random()*1e9),10).toString()+Date.now()}`,i=new Promise((s,o)=>{this._pendingDialTargets.set(r,{resolve:s,reject:o})}),n=await Promise.race([this._createDialTarget(e),i]);return this._pendingDialTargets.delete(r),n}async _createDialTarget(e){let{id:r,multiaddrs:i}=A0t(e);i&&this.peerStore.addressBook.add(r,i);let n=this.peerStore.addressBook.getMultiaddrsForPeer(r,this.addressSorter)||[];dR.isMultiaddr(e)&&(n=n.filter(a=>!e.equals(a)),n.unshift(e));let s=[];for(let a of n)(await this._resolve(a)).forEach(u=>s.push(u));let o=s.filter(a=>this.transportManager.transportForMultiaddr(a));if(o.length>this.maxAddrsToDial)throw this.peerStore.delete(r),lR(new Error("dial with more addresses than allowed"),K8.ERR_TOO_MANY_ADDRESSES);return{id:r.toB58String(),addrs:o}}_createPendingDial(e,r={}){let i=(u,f)=>{if(f.signal.aborted)throw lR(new Error("already aborted"),K8.ERR_ALREADY_ABORTED);return this.transportManager.dial(u,f)},n=new S0t({addrs:e.addrs,dialAction:i,dialer:this}),s=new w0t(this.timeout),o=[s.signal];r.signal&&o.push(r.signal);let a=E0t(o),c={dialRequest:n,controller:s,promise:n.run({...r,signal:a}),destroy:()=>{s.clear(),this._pendingDials.delete(e.id)}};return this._pendingDials.set(e.id,c),c}getTokens(e){let r=Math.min(e,this.maxDialsPerPeer,this.tokens.length),i=this.tokens.splice(0,r);return B1("%d tokens request, returning %d, %d remaining",e,r,this.tokens.length),i}releaseToken(e){this.tokens.indexOf(e)>-1||(B1("token %d released",e),this.tokens.push(e))}async _resolve(e){if(!e.protoNames().includes("dnsaddr"))return[e];let i=await this._resolveRecord(e);return(await Promise.all(i.map(o=>this._resolve(o)))).flat().reduce((o,a)=>(o.find(c=>c.equals(a))||o.push(a),o),[])}async _resolveRecord(e){try{return e=new dR(e.toString()),await e.resolve()}catch(r){return B1.error(`multiaddr ${e} could not be resolved`),[]}}};Sge.exports=Ege});var Ige=p((oLt,Age)=>{l();"use strict";function C0t(t){return t>=55296&&t<=56319}function O0t(t){return t>=56320&&t<=57343}Age.exports=function(e,r,i){if(typeof r!="string")throw new Error("Input must be string");for(var n=r.length,s=0,o,a,c=0;c<n;c+=1){if(o=r.charCodeAt(c),a=r[c],C0t(o)&&O0t(r.charCodeAt(c+1))&&(c+=1,a+=r[c]),s+=e(a),s===i)return r.slice(0,c+1);if(s>i)return r.slice(0,c-a.length+1)}return r}});var Rge=p((aLt,Tge)=>{l();"use strict";function k0t(t){return t>=55296&&t<=56319}function q0t(t){return t>=56320&&t<=57343}Tge.exports=function(e){if(typeof e!="string")throw new Error("Input must be string");for(var r=e.length,i=0,n=null,s=null,o=0;o<r;o++)n=e.charCodeAt(o),q0t(n)?s!=null&&k0t(s)?i+=1:i+=3:n<=127?i+=1:n>=128&&n<=2047?i+=2:n>=2048&&n<=65535&&(i+=3),s=n;return i}});var Cge=p((cLt,Pge)=>{l();"use strict";var D0t=Ige(),N0t=Rge();Pge.exports=D0t.bind(null,N0t)});var qge=p((uLt,kge)=>{l();"use strict";var B0t=Cge(),M0t=/[\/\?<>\\:\*\|"]/g,L0t=/[\x00-\x1f\x80-\x9f]/g,U0t=/^\.+$/,F0t=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,j0t=/[\. ]+$/;function Oge(t,e){if(typeof t!="string")throw new Error("Input must be string");var r=t.replace(M0t,e).replace(L0t,e).replace(U0t,e).replace(F0t,e).replace(j0t,e);return B0t(r,255)}kge.exports=function(t,e){var r=e&&e.replacement||"",i=Oge(t,r);return r===""?i:Oge(i,"")}});var Mge=p((fLt,Bge)=>{l();var M1=ft();Tc();Qt();var Me=M1.asn1,L1=Bge.exports=M1.pkcs7asn1=M1.pkcs7asn1||{};M1.pkcs7=M1.pkcs7||{};M1.pkcs7.asn1=L1;var Dge={name:"ContentInfo",tagClass:Me.Class.UNIVERSAL,type:Me.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Me.Class.UNIVERSAL,type:Me.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Me.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};L1.contentInfoValidator=Dge;var Nge={name:"EncryptedContentInfo",tagClass:Me.Class.UNIVERSAL,type:Me.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Me.Class.UNIVERSAL,type:Me.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Me.Class.UNIVERSAL,type:Me.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Me.Class.UNIVERSAL,type:Me.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Me.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Me.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};L1.envelopedDataValidator={name:"EnvelopedData",tagClass:Me.Class.UNIVERSAL,type:Me.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Me.Class.UNIVERSAL,type:Me.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Me.Class.UNIVERSAL,type:Me.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(Nge)};L1.encryptedDataValidator={name:"EncryptedData",tagClass:Me.Class.UNIVERSAL,type:Me.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Me.Class.UNIVERSAL,type:Me.Type.INTEGER,constructed:!1,capture:"version"}].concat(Nge)};var K0t={name:"SignerInfo",tagClass:Me.Class.UNIVERSAL,type:Me.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Me.Class.UNIVERSAL,type:Me.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Me.Class.UNIVERSAL,type:Me.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Me.Class.UNIVERSAL,type:Me.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Me.Class.UNIVERSAL,type:Me.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Me.Class.UNIVERSAL,type:Me.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Me.Class.UNIVERSAL,type:Me.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Me.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Me.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Me.Class.UNIVERSAL,type:Me.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Me.Class.UNIVERSAL,type:Me.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Me.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};L1.signedDataValidator={name:"SignedData",tagClass:Me.Class.UNIVERSAL,type:Me.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Me.Class.UNIVERSAL,type:Me.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Me.Class.UNIVERSAL,type:Me.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},Dge,{name:"SignedData.Certificates",tagClass:Me.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Me.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Me.Class.UNIVERSAL,type:Me.Type.SET,capture:"signerInfos",optional:!0,value:[K0t]}]};L1.recipientInfoValidator={name:"RecipientInfo",tagClass:Me.Class.UNIVERSAL,type:Me.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Me.Class.UNIVERSAL,type:Me.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Me.Class.UNIVERSAL,type:Me.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Me.Class.UNIVERSAL,type:Me.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Me.Class.UNIVERSAL,type:Me.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Me.Class.UNIVERSAL,type:Me.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Me.Class.UNIVERSAL,type:Me.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Me.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:Me.Class.UNIVERSAL,type:Me.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var Uge=p((lLt,Lge)=>{l();var Bd=ft();Qt();Bd.mgf=Bd.mgf||{};var V0t=Lge.exports=Bd.mgf.mgf1=Bd.mgf1=Bd.mgf1||{};V0t.create=function(t){var e={generate:function(r,i){for(var n=new Bd.util.ByteBuffer,s=Math.ceil(i/t.digestLength),o=0;o<s;o++){var a=new Bd.util.ByteBuffer;a.putInt32(o),t.start(),t.update(r+a.getBytes()),n.putBuffer(t.digest())}return n.truncate(n.length()-i),n.getBytes()}};return e}});var jge=p((dLt,Fge)=>{l();var V8=ft();Uge();Fge.exports=V8.mgf=V8.mgf||{};V8.mgf.mgf1=V8.mgf1});var Vge=p((hLt,Kge)=>{l();var Md=ft();Ku();Qt();var z0t=Kge.exports=Md.pss=Md.pss||{};z0t.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,i=e.digestLength,n=t.salt||null;typeof n=="string"&&(n=Md.util.createBuffer(n));var s;if("saltLength"in t)s=t.saltLength;else if(n!==null)s=n.length();else throw new Error("Salt length not specified or specific salt not given.");if(n!==null&&n.length()!==s)throw new Error("Given salt length does not match length of given salt.");var o=t.prng||Md.random,a={};return a.encode=function(c,u){var f,d=u-1,h=Math.ceil(d/8),y=c.digest().getBytes();if(h<i+s+2)throw new Error("Message is too long to encrypt.");var g;n===null?g=o.getBytesSync(s):g=n.bytes();var m=new Md.util.ByteBuffer;m.fillWithByte(0,8),m.putBytes(y),m.putBytes(g),e.start(),e.update(m.getBytes());var E=e.digest().getBytes(),v=new Md.util.ByteBuffer;v.fillWithByte(0,h-s-i-2),v.putByte(1),v.putBytes(g);var A=v.getBytes(),R=h-i-1,F=r.generate(E,R),q="";for(f=0;f<R;f++)q+=String.fromCharCode(A.charCodeAt(f)^F.charCodeAt(f));var D=65280>>8*h-d&255;return q=String.fromCharCode(q.charCodeAt(0)&~D)+q.substr(1),q+E+String.fromCharCode(188)},a.verify=function(c,u,f){var d,h=f-1,y=Math.ceil(h/8);if(u=u.substr(-y),y<i+s+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(y-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=y-i-1,m=u.substr(0,g),E=u.substr(g,i),v=65280>>8*y-h&255;if((m.charCodeAt(0)&v)!=0)throw new Error("Bits beyond keysize not zero as expected.");var A=r.generate(E,g),R="";for(d=0;d<g;d++)R+=String.fromCharCode(m.charCodeAt(d)^A.charCodeAt(d));R=String.fromCharCode(R.charCodeAt(0)&~v)+R.substr(1);var F=y-i-s-2;for(d=0;d<F;d++)if(R.charCodeAt(d)!==0)throw new Error("Leftmost octets not zero as expected");if(R.charCodeAt(F)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var q=R.substr(-s),D=new Md.util.ByteBuffer;D.fillWithByte(0,8),D.putBytes(c),D.putBytes(q),e.start(),e.update(D.getBytes());var z=e.digest().getBytes();return E===z},a}});var pR=p((pLt,Gge)=>{l();var Ce=ft();vh();Tc();K6();ju();jge();gh();$6();Vge();g2();Qt();var O=Ce.asn1,Ie=Gge.exports=Ce.pki=Ce.pki||{},nt=Ie.oids,Wr={};Wr.CN=nt.commonName;Wr.commonName="CN";Wr.C=nt.countryName;Wr.countryName="C";Wr.L=nt.localityName;Wr.localityName="L";Wr.ST=nt.stateOrProvinceName;Wr.stateOrProvinceName="ST";Wr.O=nt.organizationName;Wr.organizationName="O";Wr.OU=nt.organizationalUnitName;Wr.organizationalUnitName="OU";Wr.E=nt.emailAddress;Wr.emailAddress="E";var zge=Ce.pki.rsa.publicKeyValidator,H0t={name:"Certificate",tagClass:O.Class.UNIVERSAL,type:O.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:O.Class.UNIVERSAL,type:O.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:O.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:O.Class.UNIVERSAL,type:O.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:O.Class.UNIVERSAL,type:O.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:O.Class.UNIVERSAL,type:O.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:O.Class.UNIVERSAL,type:O.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:O.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:O.Class.UNIVERSAL,type:O.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:O.Class.UNIVERSAL,type:O.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:O.Class.UNIVERSAL,type:O.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:O.Class.UNIVERSAL,type:O.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:O.Class.UNIVERSAL,type:O.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:O.Class.UNIVERSAL,type:O.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:O.Class.UNIVERSAL,type:O.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},zge,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:O.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:O.Class.UNIVERSAL,type:O.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:O.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:O.Class.UNIVERSAL,type:O.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:O.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:O.Class.UNIVERSAL,type:O.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:O.Class.UNIVERSAL,type:O.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:O.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:O.Class.UNIVERSAL,type:O.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},$0t={name:"rsapss",tagClass:O.Class.UNIVERSAL,type:O.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:O.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:O.Class.UNIVERSAL,type:O.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:O.Class.UNIVERSAL,type:O.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:O.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:O.Class.UNIVERSAL,type:O.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:O.Class.UNIVERSAL,type:O.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:O.Class.UNIVERSAL,type:O.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:O.Class.UNIVERSAL,type:O.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:O.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:O.Class.UNIVERSAL,type:O.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:O.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:O.Class.UNIVERSAL,type:O.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},G0t={name:"CertificationRequestInfo",tagClass:O.Class.UNIVERSAL,type:O.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:O.Class.UNIVERSAL,type:O.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:O.Class.UNIVERSAL,type:O.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},zge,{name:"CertificationRequestInfo.attributes",tagClass:O.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:O.Class.UNIVERSAL,type:O.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:O.Class.UNIVERSAL,type:O.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:O.Class.UNIVERSAL,type:O.Type.SET,constructed:!0}]}]}]},W0t={name:"CertificationRequest",tagClass:O.Class.UNIVERSAL,type:O.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[G0t,{name:"CertificationRequest.signatureAlgorithm",tagClass:O.Class.UNIVERSAL,type:O.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:O.Class.UNIVERSAL,type:O.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:O.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:O.Class.UNIVERSAL,type:O.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Ie.RDNAttributesAsArray=function(t,e){for(var r=[],i,n,s,o=0;o<t.value.length;++o){i=t.value[o];for(var a=0;a<i.value.length;++a)s={},n=i.value[a],s.type=O.derToOid(n.value[0].value),s.value=n.value[1].value,s.valueTagClass=n.value[1].type,s.type in nt&&(s.name=nt[s.type],s.name in Wr&&(s.shortName=Wr[s.name])),e&&(e.update(s.type),e.update(s.value)),r.push(s)}return r};Ie.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var i=t[r],n=O.derToOid(i.value[0].value),s=i.value[1].value,o=0;o<s.length;++o){var a={};if(a.type=n,a.value=s[o].value,a.valueTagClass=s[o].type,a.type in nt&&(a.name=nt[a.type],a.name in Wr&&(a.shortName=Wr[a.name])),a.type===nt.extensionRequest){a.extensions=[];for(var c=0;c<a.value.length;++c)a.extensions.push(Ie.certificateExtensionFromAsn1(a.value[c]))}e.push(a)}return e};function $f(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,i,n=0;r===null&&n<t.attributes.length;++n)i=t.attributes[n],(e.type&&e.type===i.type||e.name&&e.name===i.name||e.shortName&&e.shortName===i.shortName)&&(r=i);return r}var z8=function(t,e,r){var i={};if(t!==nt["RSASSA-PSS"])return i;r&&(i={hash:{algorithmOid:nt.sha1},mgf:{algorithmOid:nt.mgf1,hash:{algorithmOid:nt.sha1}},saltLength:20});var n={},s=[];if(!O.validate(e,$0t,n,s)){var o=new Error("Cannot read RSASSA-PSS parameter block.");throw o.errors=s,o}return n.hashOid!==void 0&&(i.hash=i.hash||{},i.hash.algorithmOid=O.derToOid(n.hashOid)),n.maskGenOid!==void 0&&(i.mgf=i.mgf||{},i.mgf.algorithmOid=O.derToOid(n.maskGenOid),i.mgf.hash=i.mgf.hash||{},i.mgf.hash.algorithmOid=O.derToOid(n.maskGenHashOid)),n.saltLength!==void 0&&(i.saltLength=n.saltLength.charCodeAt(0)),i};Ie.certificateFromPem=function(t,e,r){var i=Ce.pem.decode(t)[0];if(i.type!=="CERTIFICATE"&&i.type!=="X509 CERTIFICATE"&&i.type!=="TRUSTED CERTIFICATE"){var n=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw n.headerType=i.type,n}if(i.procType&&i.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var s=O.fromDer(i.body,r);return Ie.certificateFromAsn1(s,e)};Ie.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:O.toDer(Ie.certificateToAsn1(t)).getBytes()};return Ce.pem.encode(r,{maxline:e})};Ie.publicKeyFromPem=function(t){var e=Ce.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var i=O.fromDer(e.body);return Ie.publicKeyFromAsn1(i)};Ie.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:O.toDer(Ie.publicKeyToAsn1(t)).getBytes()};return Ce.pem.encode(r,{maxline:e})};Ie.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:O.toDer(Ie.publicKeyToRSAPublicKey(t)).getBytes()};return Ce.pem.encode(r,{maxline:e})};Ie.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||Ce.md.sha1.create(),i=e.type||"RSAPublicKey",n;switch(i){case"RSAPublicKey":n=O.toDer(Ie.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":n=O.toDer(Ie.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(n);var s=r.digest();if(e.encoding==="hex"){var o=s.toHex();return e.delimiter?o.match(/.{2}/g).join(e.delimiter):o}else{if(e.encoding==="binary")return s.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return s};Ie.certificationRequestFromPem=function(t,e,r){var i=Ce.pem.decode(t)[0];if(i.type!=="CERTIFICATE REQUEST"){var n=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw n.headerType=i.type,n}if(i.procType&&i.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var s=O.fromDer(i.body,r);return Ie.certificationRequestFromAsn1(s,e)};Ie.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:O.toDer(Ie.certificationRequestToAsn1(t)).getBytes()};return Ce.pem.encode(r,{maxline:e})};Ie.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return $f(t.issuer,e)},t.issuer.addField=function(e){io([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return $f(t.subject,e)},t.subject.addField=function(e){io([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){io(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){io(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)Hge(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,i,n=0;r===null&&n<t.extensions.length;++n)i=t.extensions[n],(e.id&&i.id===e.id||e.name&&i.name===e.name)&&(r=i);return r},t.sign=function(e,r){t.md=r||Ce.md.sha1.create();var i=nt[t.md.algorithm+"WithRSAEncryption"];if(!i){var n=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw n.algorithm=t.md.algorithm,n}t.signatureOid=t.siginfo.algorithmOid=i,t.tbsCertificate=Ie.getTBSCertificate(t);var s=O.toDer(t.tbsCertificate);t.md.update(s.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var i=e.issuer,n=t.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=i.attributes,s.actualIssuer=n.attributes,s}var o=e.md;if(o===null){if(e.signatureOid in nt){var a=nt[e.signatureOid];switch(a){case"sha1WithRSAEncryption":o=Ce.md.sha1.create();break;case"md5WithRSAEncryption":o=Ce.md.md5.create();break;case"sha256WithRSAEncryption":o=Ce.md.sha256.create();break;case"sha384WithRSAEncryption":o=Ce.md.sha384.create();break;case"sha512WithRSAEncryption":o=Ce.md.sha512.create();break;case"RSASSA-PSS":o=Ce.md.sha256.create();break}}if(o===null){var s=new Error("Could not compute certificate digest. Unknown signature OID.");throw s.signatureOid=e.signatureOid,s}var c=e.tbsCertificate||Ie.getTBSCertificate(e),u=O.toDer(c);o.update(u.getBytes())}if(o!==null){var f;switch(e.signatureOid){case nt.sha1WithRSAEncryption:f=void 0;break;case nt["RSASSA-PSS"]:var d,h;if(d=nt[e.signatureParameters.mgf.hash.algorithmOid],d===void 0||Ce.md[d]===void 0){var s=new Error("Unsupported MGF hash function.");throw s.oid=e.signatureParameters.mgf.hash.algorithmOid,s.name=d,s}if(h=nt[e.signatureParameters.mgf.algorithmOid],h===void 0||Ce.mgf[h]===void 0){var s=new Error("Unsupported MGF function.");throw s.oid=e.signatureParameters.mgf.algorithmOid,s.name=h,s}if(h=Ce.mgf[h].create(Ce.md[d].create()),d=nt[e.signatureParameters.hash.algorithmOid],d===void 0||Ce.md[d]===void 0)throw{message:"Unsupported RSASSA-PSS hash function.",oid:e.signatureParameters.hash.algorithmOid,name:d};f=Ce.pss.create(Ce.md[d].create(),h,e.signatureParameters.saltLength);break}r=t.publicKey.verify(o.digest().getBytes(),e.signature,f)}return r},t.isIssuer=function(e){var r=!1,i=t.issuer,n=e.subject;if(i.hash&&n.hash)r=i.hash===n.hash;else if(i.attributes.length===n.attributes.length){r=!0;for(var s,o,a=0;r&&a<i.attributes.length;++a)s=i.attributes[a],o=n.attributes[a],(s.type!==o.type||s.value!==o.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Ie.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=nt.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var i=t.extensions[r];if(i.id===e){var n=t.generateSubjectKeyIdentifier().getBytes();return Ce.util.hexToBytes(i.subjectKeyIdentifier)===n}}return!1},t};Ie.certificateFromAsn1=function(t,e){var r={},i=[];if(!O.validate(t,H0t,r,i)){var n=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw n.errors=i,n}var s=O.derToOid(r.publicKeyOid);if(s!==Ie.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var o=Ie.createCertificate();o.version=r.certVersion?r.certVersion.charCodeAt(0):0;var a=Ce.util.createBuffer(r.certSerialNumber);o.serialNumber=a.toHex(),o.signatureOid=Ce.asn1.derToOid(r.certSignatureOid),o.signatureParameters=z8(o.signatureOid,r.certSignatureParams,!0),o.siginfo.algorithmOid=Ce.asn1.derToOid(r.certinfoSignatureOid),o.siginfo.parameters=z8(o.siginfo.algorithmOid,r.certinfoSignatureParams,!1),o.signature=r.certSignature;var c=[];if(r.certValidity1UTCTime!==void 0&&c.push(O.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&c.push(O.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&c.push(O.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&c.push(O.generalizedTimeToDate(r.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(o.validity.notBefore=c[0],o.validity.notAfter=c[1],o.tbsCertificate=r.tbsCertificate,e){if(o.md=null,o.signatureOid in nt){var s=nt[o.signatureOid];switch(s){case"sha1WithRSAEncryption":o.md=Ce.md.sha1.create();break;case"md5WithRSAEncryption":o.md=Ce.md.md5.create();break;case"sha256WithRSAEncryption":o.md=Ce.md.sha256.create();break;case"sha384WithRSAEncryption":o.md=Ce.md.sha384.create();break;case"sha512WithRSAEncryption":o.md=Ce.md.sha512.create();break;case"RSASSA-PSS":o.md=Ce.md.sha256.create();break}}if(o.md===null){var n=new Error("Could not compute certificate digest. Unknown signature OID.");throw n.signatureOid=o.signatureOid,n}var u=O.toDer(o.tbsCertificate);o.md.update(u.getBytes())}var f=Ce.md.sha1.create();o.issuer.getField=function(h){return $f(o.issuer,h)},o.issuer.addField=function(h){io([h]),o.issuer.attributes.push(h)},o.issuer.attributes=Ie.RDNAttributesAsArray(r.certIssuer,f),r.certIssuerUniqueId&&(o.issuer.uniqueId=r.certIssuerUniqueId),o.issuer.hash=f.digest().toHex();var d=Ce.md.sha1.create();return o.subject.getField=function(h){return $f(o.subject,h)},o.subject.addField=function(h){io([h]),o.subject.attributes.push(h)},o.subject.attributes=Ie.RDNAttributesAsArray(r.certSubject,d),r.certSubjectUniqueId&&(o.subject.uniqueId=r.certSubjectUniqueId),o.subject.hash=d.digest().toHex(),r.certExtensions?o.extensions=Ie.certificateExtensionsFromAsn1(r.certExtensions):o.extensions=[],o.publicKey=Ie.publicKeyFromAsn1(r.subjectPublicKeyInfo),o};Ie.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var i=t.value[r],n=0;n<i.value.length;++n)e.push(Ie.certificateExtensionFromAsn1(i.value[n]));return e};Ie.certificateExtensionFromAsn1=function(t){var e={};if(e.id=O.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===O.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in nt){if(e.name=nt[e.id],e.name==="keyUsage"){var r=O.fromDer(e.value),i=0,n=0;r.value.length>1&&(i=r.value.charCodeAt(1),n=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(i&128)==128,e.nonRepudiation=(i&64)==64,e.keyEncipherment=(i&32)==32,e.dataEncipherment=(i&16)==16,e.keyAgreement=(i&8)==8,e.keyCertSign=(i&4)==4,e.cRLSign=(i&2)==2,e.encipherOnly=(i&1)==1,e.decipherOnly=(n&128)==128}else if(e.name==="basicConstraints"){var r=O.fromDer(e.value);r.value.length>0&&r.value[0].type===O.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var s=null;r.value.length>0&&r.value[0].type===O.Type.INTEGER?s=r.value[0].value:r.value.length>1&&(s=r.value[1].value),s!==null&&(e.pathLenConstraint=O.derToInteger(s))}else if(e.name==="extKeyUsage")for(var r=O.fromDer(e.value),o=0;o<r.value.length;++o){var a=O.derToOid(r.value[o].value);a in nt?e[nt[a]]=!0:e[a]=!0}else if(e.name==="nsCertType"){var r=O.fromDer(e.value),i=0;r.value.length>1&&(i=r.value.charCodeAt(1)),e.client=(i&128)==128,e.server=(i&64)==64,e.email=(i&32)==32,e.objsign=(i&16)==16,e.reserved=(i&8)==8,e.sslCA=(i&4)==4,e.emailCA=(i&2)==2,e.objCA=(i&1)==1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var c,r=O.fromDer(e.value),u=0;u<r.value.length;++u){c=r.value[u];var f={type:c.type,value:c.value};switch(e.altNames.push(f),c.type){case 1:case 2:case 6:break;case 7:f.ip=Ce.util.bytesToIP(c.value);break;case 8:f.oid=O.derToOid(c.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=O.fromDer(e.value);e.subjectKeyIdentifier=Ce.util.bytesToHex(r.value)}}return e};Ie.certificationRequestFromAsn1=function(t,e){var r={},i=[];if(!O.validate(t,W0t,r,i)){var n=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw n.errors=i,n}var s=O.derToOid(r.publicKeyOid);if(s!==Ie.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var o=Ie.createCertificationRequest();if(o.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,o.signatureOid=Ce.asn1.derToOid(r.csrSignatureOid),o.signatureParameters=z8(o.signatureOid,r.csrSignatureParams,!0),o.siginfo.algorithmOid=Ce.asn1.derToOid(r.csrSignatureOid),o.siginfo.parameters=z8(o.siginfo.algorithmOid,r.csrSignatureParams,!1),o.signature=r.csrSignature,o.certificationRequestInfo=r.certificationRequestInfo,e){if(o.md=null,o.signatureOid in nt){var s=nt[o.signatureOid];switch(s){case"sha1WithRSAEncryption":o.md=Ce.md.sha1.create();break;case"md5WithRSAEncryption":o.md=Ce.md.md5.create();break;case"sha256WithRSAEncryption":o.md=Ce.md.sha256.create();break;case"sha384WithRSAEncryption":o.md=Ce.md.sha384.create();break;case"sha512WithRSAEncryption":o.md=Ce.md.sha512.create();break;case"RSASSA-PSS":o.md=Ce.md.sha256.create();break}}if(o.md===null){var n=new Error("Could not compute certification request digest. Unknown signature OID.");throw n.signatureOid=o.signatureOid,n}var a=O.toDer(o.certificationRequestInfo);o.md.update(a.getBytes())}var c=Ce.md.sha1.create();return o.subject.getField=function(u){return $f(o.subject,u)},o.subject.addField=function(u){io([u]),o.subject.attributes.push(u)},o.subject.attributes=Ie.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),o.subject.hash=c.digest().toHex(),o.publicKey=Ie.publicKeyFromAsn1(r.subjectPublicKeyInfo),o.getAttribute=function(u){return $f(o,u)},o.addAttribute=function(u){io([u]),o.attributes.push(u)},o.attributes=Ie.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),o};Ie.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return $f(t.subject,e)},t.subject.addField=function(e){io([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return $f(t,e)},t.addAttribute=function(e){io([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){io(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){io(e),t.attributes=e},t.sign=function(e,r){t.md=r||Ce.md.sha1.create();var i=nt[t.md.algorithm+"WithRSAEncryption"];if(!i){var n=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw n.algorithm=t.md.algorithm,n}t.signatureOid=t.siginfo.algorithmOid=i,t.certificationRequestInfo=Ie.getCertificationRequestInfo(t);var s=O.toDer(t.certificationRequestInfo);t.md.update(s.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){if(t.signatureOid in nt){var i=nt[t.signatureOid];switch(i){case"sha1WithRSAEncryption":r=Ce.md.sha1.create();break;case"md5WithRSAEncryption":r=Ce.md.md5.create();break;case"sha256WithRSAEncryption":r=Ce.md.sha256.create();break;case"sha384WithRSAEncryption":r=Ce.md.sha384.create();break;case"sha512WithRSAEncryption":r=Ce.md.sha512.create();break;case"RSASSA-PSS":r=Ce.md.sha256.create();break}}if(r===null){var n=new Error("Could not compute certification request digest. Unknown signature OID.");throw n.signatureOid=t.signatureOid,n}var s=t.certificationRequestInfo||Ie.getCertificationRequestInfo(t),o=O.toDer(s);r.update(o.getBytes())}if(r!==null){var a;switch(t.signatureOid){case nt.sha1WithRSAEncryption:break;case nt["RSASSA-PSS"]:var c,u;if(c=nt[t.signatureParameters.mgf.hash.algorithmOid],c===void 0||Ce.md[c]===void 0){var n=new Error("Unsupported MGF hash function.");throw n.oid=t.signatureParameters.mgf.hash.algorithmOid,n.name=c,n}if(u=nt[t.signatureParameters.mgf.algorithmOid],u===void 0||Ce.mgf[u]===void 0){var n=new Error("Unsupported MGF function.");throw n.oid=t.signatureParameters.mgf.algorithmOid,n.name=u,n}if(u=Ce.mgf[u].create(Ce.md[c].create()),c=nt[t.signatureParameters.hash.algorithmOid],c===void 0||Ce.md[c]===void 0){var n=new Error("Unsupported RSASSA-PSS hash function.");throw n.oid=t.signatureParameters.hash.algorithmOid,n.name=c,n}a=Ce.pss.create(Ce.md[c].create(),u,t.signatureParameters.saltLength);break}e=t.publicKey.verify(r.digest().getBytes(),t.signature,a)}return e},t};function U1(t){for(var e=O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[]),r,i,n=t.attributes,s=0;s<n.length;++s){r=n[s];var o=r.value,a=O.Type.PRINTABLESTRING;"valueTagClass"in r&&(a=r.valueTagClass,a===O.Type.UTF8&&(o=Ce.util.encodeUtf8(o))),i=O.create(O.Class.UNIVERSAL,O.Type.SET,!0,[O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(r.type).getBytes()),O.create(O.Class.UNIVERSAL,a,!1,o)])]),e.value.push(i)}return e}function io(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name=="undefined"&&(e.type&&e.type in Ie.oids?e.name=Ie.oids[e.type]:e.shortName&&e.shortName in Wr&&(e.name=Ie.oids[Wr[e.shortName]])),typeof e.type=="undefined")if(e.name&&e.name in Ie.oids)e.type=Ie.oids[e.name];else{var i=new Error("Attribute type not specified.");throw i.attribute=e,i}if(typeof e.shortName=="undefined"&&e.name&&e.name in Wr&&(e.shortName=Wr[e.name]),e.type===nt.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=O.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var n=0;n<e.extensions.length;++n)e.value.push(Ie.certificateExtensionToAsn1(Hge(e.extensions[n])))}if(typeof e.value=="undefined"){var i=new Error("Attribute value not specified.");throw i.attribute=e,i}}}function Hge(t,e){if(e=e||{},typeof t.name=="undefined"&&t.id&&t.id in Ie.oids&&(t.name=Ie.oids[t.id]),typeof t.id=="undefined")if(t.name&&t.name in Ie.oids)t.id=Ie.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value!="undefined")return t;if(t.name==="keyUsage"){var i=0,n=0,s=0;t.digitalSignature&&(n|=128,i=7),t.nonRepudiation&&(n|=64,i=6),t.keyEncipherment&&(n|=32,i=5),t.dataEncipherment&&(n|=16,i=4),t.keyAgreement&&(n|=8,i=3),t.keyCertSign&&(n|=4,i=2),t.cRLSign&&(n|=2,i=1),t.encipherOnly&&(n|=1,i=0),t.decipherOnly&&(s|=128,i=7);var o=String.fromCharCode(i);s!==0?o+=String.fromCharCode(n)+String.fromCharCode(s):n!==0&&(o+=String.fromCharCode(n)),t.value=O.create(O.Class.UNIVERSAL,O.Type.BITSTRING,!1,o)}else if(t.name==="basicConstraints")t.value=O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(O.create(O.Class.UNIVERSAL,O.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(O.create(O.Class.UNIVERSAL,O.Type.INTEGER,!1,O.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[]);var a=t.value.value;for(var c in t)t[c]===!0&&(c in nt?a.push(O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(nt[c]).getBytes())):c.indexOf(".")!==-1&&a.push(O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(c).getBytes())))}else if(t.name==="nsCertType"){var i=0,n=0;t.client&&(n|=128,i=7),t.server&&(n|=64,i=6),t.email&&(n|=32,i=5),t.objsign&&(n|=16,i=4),t.reserved&&(n|=8,i=3),t.sslCA&&(n|=4,i=2),t.emailCA&&(n|=2,i=1),t.objCA&&(n|=1,i=0);var o=String.fromCharCode(i);n!==0&&(o+=String.fromCharCode(n)),t.value=O.create(O.Class.UNIVERSAL,O.Type.BITSTRING,!1,o)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[]);for(var u,f=0;f<t.altNames.length;++f){u=t.altNames[f];var o=u.value;if(u.type===7&&u.ip){if(o=Ce.util.bytesFromIP(u.ip),o===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?o=O.oidToDer(O.oidToDer(u.oid)):o=O.oidToDer(o));t.value.value.push(O.create(O.Class.CONTEXT_SPECIFIC,u.type,!1,o))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=O.create(O.Class.UNIVERSAL,O.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var d=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=d.toHex(),t.value=O.create(O.Class.UNIVERSAL,O.Type.OCTETSTRING,!1,d.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[]);var a=t.value.value;if(t.keyIdentifier){var h=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;a.push(O.create(O.Class.CONTEXT_SPECIFIC,0,!1,h))}if(t.authorityCertIssuer){var y=[O.create(O.Class.CONTEXT_SPECIFIC,4,!0,[U1(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];a.push(O.create(O.Class.CONTEXT_SPECIFIC,1,!0,y))}if(t.serialNumber){var g=Ce.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);a.push(O.create(O.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if(t.name==="cRLDistributionPoints"){t.value=O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[]);for(var a=t.value.value,m=O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[]),E=O.create(O.Class.CONTEXT_SPECIFIC,0,!0,[]),u,f=0;f<t.altNames.length;++f){u=t.altNames[f];var o=u.value;if(u.type===7&&u.ip){if(o=Ce.util.bytesFromIP(u.ip),o===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?o=O.oidToDer(O.oidToDer(u.oid)):o=O.oidToDer(o));E.value.push(O.create(O.Class.CONTEXT_SPECIFIC,u.type,!1,o))}m.value.push(O.create(O.Class.CONTEXT_SPECIFIC,0,!0,[E])),a.push(m)}if(typeof t.value=="undefined"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}function hR(t,e){switch(t){case nt["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(O.create(O.Class.CONTEXT_SPECIFIC,0,!0,[O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(e.hash.algorithmOid).getBytes()),O.create(O.Class.UNIVERSAL,O.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(O.create(O.Class.CONTEXT_SPECIFIC,1,!0,[O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(e.mgf.algorithmOid).getBytes()),O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(e.mgf.hash.algorithmOid).getBytes()),O.create(O.Class.UNIVERSAL,O.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(O.create(O.Class.CONTEXT_SPECIFIC,2,!0,[O.create(O.Class.UNIVERSAL,O.Type.INTEGER,!1,O.integerToDer(e.saltLength).getBytes())])),O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,r);default:return O.create(O.Class.UNIVERSAL,O.Type.NULL,!1,"")}}function Y0t(t){var e=O.create(O.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,i=0;i<r.length;++i){var n=r[i],s=n.value,o=O.Type.UTF8;"valueTagClass"in n&&(o=n.valueTagClass),o===O.Type.UTF8&&(s=Ce.util.encodeUtf8(s));var a=!1;"valueConstructed"in n&&(a=n.valueConstructed);var c=O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(n.type).getBytes()),O.create(O.Class.UNIVERSAL,O.Type.SET,!0,[O.create(O.Class.UNIVERSAL,o,a,s)])]);e.value.push(c)}return e}var X0t=new Date("1950-01-01T00:00:00Z"),Q0t=new Date("2050-01-01T00:00:00Z");function $ge(t){return t>=X0t&&t<Q0t?O.create(O.Class.UNIVERSAL,O.Type.UTCTIME,!1,O.dateToUtcTime(t)):O.create(O.Class.UNIVERSAL,O.Type.GENERALIZEDTIME,!1,O.dateToGeneralizedTime(t))}Ie.getTBSCertificate=function(t){var e=$ge(t.validity.notBefore),r=$ge(t.validity.notAfter),i=O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.CONTEXT_SPECIFIC,0,!0,[O.create(O.Class.UNIVERSAL,O.Type.INTEGER,!1,O.integerToDer(t.version).getBytes())]),O.create(O.Class.UNIVERSAL,O.Type.INTEGER,!1,Ce.util.hexToBytes(t.serialNumber)),O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(t.siginfo.algorithmOid).getBytes()),hR(t.siginfo.algorithmOid,t.siginfo.parameters)]),U1(t.issuer),O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[e,r]),U1(t.subject),Ie.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&i.value.push(O.create(O.Class.CONTEXT_SPECIFIC,1,!0,[O.create(O.Class.UNIVERSAL,O.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&i.value.push(O.create(O.Class.CONTEXT_SPECIFIC,2,!0,[O.create(O.Class.UNIVERSAL,O.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&i.value.push(Ie.certificateExtensionsToAsn1(t.extensions)),i};Ie.getCertificationRequestInfo=function(t){var e=O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.INTEGER,!1,O.integerToDer(t.version).getBytes()),U1(t.subject),Ie.publicKeyToAsn1(t.publicKey),Y0t(t)]);return e};Ie.distinguishedNameToAsn1=function(t){return U1(t)};Ie.certificateToAsn1=function(t){var e=t.tbsCertificate||Ie.getTBSCertificate(t);return O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[e,O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(t.signatureOid).getBytes()),hR(t.signatureOid,t.signatureParameters)]),O.create(O.Class.UNIVERSAL,O.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};Ie.certificateExtensionsToAsn1=function(t){var e=O.create(O.Class.CONTEXT_SPECIFIC,3,!0,[]),r=O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[]);e.value.push(r);for(var i=0;i<t.length;++i)r.value.push(Ie.certificateExtensionToAsn1(t[i]));return e};Ie.certificateExtensionToAsn1=function(t){var e=O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[]);e.value.push(O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(t.id).getBytes())),t.critical&&e.value.push(O.create(O.Class.UNIVERSAL,O.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return typeof t.value!="string"&&(r=O.toDer(r).getBytes()),e.value.push(O.create(O.Class.UNIVERSAL,O.Type.OCTETSTRING,!1,r)),e};Ie.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Ie.getCertificationRequestInfo(t);return O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[e,O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(t.signatureOid).getBytes()),hR(t.signatureOid,t.signatureParameters)]),O.create(O.Class.UNIVERSAL,O.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};Ie.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(o){var a=r(o.issuer);return a},e.addCertificate=function(o){if(typeof o=="string"&&(o=Ce.pki.certificateFromPem(o)),i(o.subject),!e.hasCertificate(o))if(o.subject.hash in e.certs){var a=e.certs[o.subject.hash];Ce.util.isArray(a)||(a=[a]),a.push(o),e.certs[o.subject.hash]=a}else e.certs[o.subject.hash]=o},e.hasCertificate=function(o){typeof o=="string"&&(o=Ce.pki.certificateFromPem(o));var a=r(o.subject);if(!a)return!1;Ce.util.isArray(a)||(a=[a]);for(var c=O.toDer(Ie.certificateToAsn1(o)).getBytes(),u=0;u<a.length;++u){var f=O.toDer(Ie.certificateToAsn1(a[u])).getBytes();if(c===f)return!0}return!1},e.listAllCertificates=function(){var o=[];for(var a in e.certs)if(e.certs.hasOwnProperty(a)){var c=e.certs[a];if(!Ce.util.isArray(c))o.push(c);else for(var u=0;u<c.length;++u)o.push(c[u])}return o},e.removeCertificate=function(o){var a;if(typeof o=="string"&&(o=Ce.pki.certificateFromPem(o)),i(o.subject),!e.hasCertificate(o))return null;var c=r(o.subject);if(!Ce.util.isArray(c))return a=e.certs[o.subject.hash],delete e.certs[o.subject.hash],a;for(var u=O.toDer(Ie.certificateToAsn1(o)).getBytes(),f=0;f<c.length;++f){var d=O.toDer(Ie.certificateToAsn1(c[f])).getBytes();u===d&&(a=c[f],c.splice(f,1))}return c.length===0&&delete e.certs[o.subject.hash],a};function r(o){return i(o),e.certs[o.hash]||null}function i(o){if(!o.hash){var a=Ce.md.sha1.create();o.attributes=Ie.RDNAttributesAsArray(U1(o),a),o.hash=a.digest().toHex()}}if(t)for(var n=0;n<t.length;++n){var s=t[n];e.addCertificate(s)}return e};Ie.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Ie.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var i=e.slice(0),n=r.validityCheckDate;typeof n=="undefined"&&(n=new Date);var s=!0,o=null,a=0;do{var c=e.shift(),u=null,f=!1;if(n&&(n<c.validity.notBefore||n>c.validity.notAfter)&&(o={message:"Certificate is not valid yet or has expired.",error:Ie.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:n}),o===null){if(u=e[0]||t.getIssuer(c),u===null&&c.isIssuer(c)&&(f=!0,u=c),u){var d=u;Ce.util.isArray(d)||(d=[d]);for(var h=!1;!h&&d.length>0;){u=d.shift();try{h=u.verify(c)}catch(q){}}h||(o={message:"Certificate signature is invalid.",error:Ie.certificateError.bad_certificate})}o===null&&(!u||f)&&!t.hasCertificate(c)&&(o={message:"Certificate is not trusted.",error:Ie.certificateError.unknown_ca})}if(o===null&&u&&!c.isIssuer(u)&&(o={message:"Certificate issuer is invalid.",error:Ie.certificateError.bad_certificate}),o===null)for(var y={keyUsage:!0,basicConstraints:!0},g=0;o===null&&g<c.extensions.length;++g){var m=c.extensions[g];m.critical&&!(m.name in y)&&(o={message:"Certificate has an unsupported critical extension.",error:Ie.certificateError.unsupported_certificate})}if(o===null&&(!s||e.length===0&&(!u||f))){var E=c.getExtension("basicConstraints"),v=c.getExtension("keyUsage");if(v!==null&&(!v.keyCertSign||E===null)&&(o={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Ie.certificateError.bad_certificate}),o===null&&E!==null&&!E.cA&&(o={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Ie.certificateError.bad_certificate}),o===null&&v!==null&&"pathLenConstraint"in E){var A=a-1;A>E.pathLenConstraint&&(o={message:"Certificate basicConstraints pathLenConstraint violated.",error:Ie.certificateError.bad_certificate})}}var R=o===null?!0:o.error,F=r.verify?r.verify(R,a,i):R;if(F===!0)o=null;else throw R===!0&&(o={message:"The application rejected the certificate.",error:Ie.certificateError.bad_certificate}),(F||F===0)&&(typeof F=="object"&&!Ce.util.isArray(F)?(F.message&&(o.message=F.message),F.error&&(o.error=F.error)):typeof F=="string"&&(o.error=F)),o;s=!1,++a}while(e.length>0);return!0}});var Xge=p((yLt,Yge)=>{l();var qe=ft();vh();Tc();K6();gh();$6();Mge();Ku();Qt();pR();var te=qe.asn1,Dn=Yge.exports=qe.pkcs7=qe.pkcs7||{};Dn.messageFromPem=function(t){var e=qe.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var i=te.fromDer(e.body);return Dn.messageFromAsn1(i)};Dn.messageToPem=function(t,e){var r={type:"PKCS7",body:te.toDer(t.toAsn1()).getBytes()};return qe.pem.encode(r,{maxline:e})};Dn.messageFromAsn1=function(t){var e={},r=[];if(!te.validate(t,Dn.asn1.contentInfoValidator,e,r)){var i=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw i.errors=r,i}var n=te.derToOid(e.contentType),s;switch(n){case qe.pki.oids.envelopedData:s=Dn.createEnvelopedData();break;case qe.pki.oids.encryptedData:s=Dn.createEncryptedData();break;case qe.pki.oids.signedData:s=Dn.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+n+" is not (yet) supported.")}return s.fromAsn1(e.content.value[0]),s};Dn.createSignedData=function(){var t=null;return t={type:qe.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(i){if(gR(t,i,Dn.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var n=t.rawCapture.certificates.value,s=0;s<n.length;++s)t.certificates.push(qe.pki.certificateFromAsn1(n[s]))},toAsn1:function(){t.contentInfo||t.sign();for(var i=[],n=0;n<t.certificates.length;++n)i.push(qe.pki.certificateToAsn1(t.certificates[n]));var s=[],o=te.create(te.Class.CONTEXT_SPECIFIC,0,!0,[te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,te.integerToDer(t.version).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return i.length>0&&o.value[0].value.push(te.create(te.Class.CONTEXT_SPECIFIC,0,!0,i)),s.length>0&&o.value[0].value.push(te.create(te.Class.CONTEXT_SPECIFIC,1,!0,s)),o.value[0].value.push(te.create(te.Class.UNIVERSAL,te.Type.SET,!0,t.signerInfos)),te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(t.type).getBytes()),o])},addSigner:function(i){var n=i.issuer,s=i.serialNumber;if(i.certificate){var o=i.certificate;typeof o=="string"&&(o=qe.pki.certificateFromPem(o)),n=o.issuer.attributes,s=o.serialNumber}var a=i.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof a=="string"&&(a=qe.pki.privateKeyFromPem(a));var c=i.digestAlgorithm||qe.pki.oids.sha1;switch(c){case qe.pki.oids.sha1:case qe.pki.oids.sha256:case qe.pki.oids.sha384:case qe.pki.oids.sha512:case qe.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var u=i.authenticatedAttributes||[];if(u.length>0){for(var f=!1,d=!1,h=0;h<u.length;++h){var y=u[h];if(!f&&y.type===qe.pki.oids.contentType){if(f=!0,d)break;continue}if(!d&&y.type===qe.pki.oids.messageDigest){if(d=!0,f)break;continue}}if(!f||!d)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:a,version:1,issuer:n,serialNumber:s,digestAlgorithm:c,signatureAlgorithm:qe.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(i){if(i=i||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(qe.pki.oids.data).getBytes())]),"content"in t)){var n;t.content instanceof qe.util.ByteBuffer?n=t.content.bytes():typeof t.content=="string"&&(n=qe.util.encodeUtf8(t.content)),i.detached?t.detachedContent=te.create(te.Class.UNIVERSAL,te.Type.OCTETSTRING,!1,n):t.contentInfo.value.push(te.create(te.Class.CONTEXT_SPECIFIC,0,!0,[te.create(te.Class.UNIVERSAL,te.Type.OCTETSTRING,!1,n)]))}if(t.signers.length!==0){var s=e();r(s)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(i){typeof i=="string"&&(i=qe.pki.certificateFromPem(i)),t.certificates.push(i)},addCertificateRevokationList:function(i){throw new Error("PKCS#7 CRL support not yet implemented.")}},t;function e(){for(var i={},n=0;n<t.signers.length;++n){var s=t.signers[n],o=s.digestAlgorithm;o in i||(i[o]=qe.md[qe.pki.oids[o]].create()),s.authenticatedAttributes.length===0?s.md=i[o]:s.md=qe.md[qe.pki.oids[o]].create()}t.digestAlgorithmIdentifiers=[];for(var o in i)t.digestAlgorithmIdentifiers.push(te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(o).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.NULL,!1,"")]));return i}function r(i){var n;if(t.detachedContent?n=t.detachedContent:(n=t.contentInfo.value[1],n=n.value[0]),!n)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=te.derToOid(t.contentInfo.value[0].value),o=te.toDer(n);o.getByte(),te.getBerValueLength(o),o=o.getBytes();for(var a in i)i[a].start().update(o);for(var c=new Date,u=0;u<t.signers.length;++u){var f=t.signers[u];if(f.authenticatedAttributes.length===0){if(s!==qe.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{f.authenticatedAttributesAsn1=te.create(te.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var d=te.create(te.Class.UNIVERSAL,te.Type.SET,!0,[]),h=0;h<f.authenticatedAttributes.length;++h){var y=f.authenticatedAttributes[h];y.type===qe.pki.oids.messageDigest?y.value=i[f.digestAlgorithm].digest():y.type===qe.pki.oids.signingTime&&(y.value||(y.value=c)),d.value.push(yR(y)),f.authenticatedAttributesAsn1.value.push(yR(y))}o=te.toDer(d).getBytes(),f.md.start().update(o)}f.signature=f.key.sign(f.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=i1t(t.signers)}};Dn.createEncryptedData=function(){var t=null;return t={type:qe.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:qe.pki.oids["aes256-CBC"]},fromAsn1:function(e){gR(t,e,Dn.asn1.encryptedDataValidator)},decrypt:function(e){e!==void 0&&(t.encryptedContent.key=e),Wge(t)}},t};Dn.createEnvelopedData=function(){var t=null;return t={type:qe.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:qe.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=gR(t,e,Dn.asn1.envelopedDataValidator);t.recipients=e1t(r.recipientInfos.value)},toAsn1:function(){return te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(t.type).getBytes()),te.create(te.Class.CONTEXT_SPECIFIC,0,!0,[te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,te.integerToDer(t.version).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.SET,!0,t1t(t.recipients)),te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,n1t(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,i=0;i<t.recipients.length;++i){var n=t.recipients[i],s=n.issuer;if(n.serialNumber===e.serialNumber&&s.length===r.length){for(var o=!0,a=0;a<r.length;++a)if(s[a].type!==r[a].type||s[a].value!==r[a].value){o=!1;break}if(o)return n}}return null},decrypt:function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case qe.pki.oids.rsaEncryption:case qe.pki.oids.desCBC:var i=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=qe.util.createBuffer(i);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}Wge(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:qe.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var i,n,s;switch(r){case qe.pki.oids["aes128-CBC"]:i=16,n=16,s=qe.aes.createEncryptionCipher;break;case qe.pki.oids["aes192-CBC"]:i=24,n=16,s=qe.aes.createEncryptionCipher;break;case qe.pki.oids["aes256-CBC"]:i=32,n=16,s=qe.aes.createEncryptionCipher;break;case qe.pki.oids["des-EDE3-CBC"]:i=24,n=8,s=qe.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=qe.util.createBuffer(qe.random.getBytes(i));else if(e.length()!=i)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+i+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=qe.util.createBuffer(qe.random.getBytes(n));var o=s(e);if(o.start(t.encryptedContent.parameter.copy()),o.update(t.content),!o.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=o.output}for(var a=0;a<t.recipients.length;++a){var c=t.recipients[a];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case qe.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}},t};function Z0t(t){var e={},r=[];if(!te.validate(t,Dn.asn1.recipientInfoValidator,e,r)){var i=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw i.errors=r,i}return{version:e.version.charCodeAt(0),issuer:qe.pki.RDNAttributesAsArray(e.issuer),serialNumber:qe.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:te.derToOid(e.encAlgorithm),parameter:e.encParameter.value,content:e.encKey}}}function J0t(t){return te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,te.integerToDer(t.version).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[qe.pki.distinguishedNameToAsn1({attributes:t.issuer}),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,qe.util.hexToBytes(t.serialNumber))]),te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(t.encryptedContent.algorithm).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.NULL,!1,"")]),te.create(te.Class.UNIVERSAL,te.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function e1t(t){for(var e=[],r=0;r<t.length;++r)e.push(Z0t(t[r]));return e}function t1t(t){for(var e=[],r=0;r<t.length;++r)e.push(J0t(t[r]));return e}function r1t(t){var e=te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,te.integerToDer(t.version).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[qe.pki.distinguishedNameToAsn1({attributes:t.issuer}),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,qe.util.hexToBytes(t.serialNumber))]),te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(t.digestAlgorithm).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(t.signatureAlgorithm).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.NULL,!1,"")])),e.value.push(te.create(te.Class.UNIVERSAL,te.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=te.create(te.Class.CONTEXT_SPECIFIC,1,!0,[]),i=0;i<t.unauthenticatedAttributes.length;++i){var n=t.unauthenticatedAttributes[i];r.values.push(yR(n))}e.value.push(r)}return e}function i1t(t){for(var e=[],r=0;r<t.length;++r)e.push(r1t(t[r]));return e}function yR(t){var e;if(t.type===qe.pki.oids.contentType)e=te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(t.value).getBytes());else if(t.type===qe.pki.oids.messageDigest)e=te.create(te.Class.UNIVERSAL,te.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===qe.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),i=new Date("2050-01-01T00:00:00Z"),n=t.value;if(typeof n=="string"){var s=Date.parse(n);isNaN(s)?n.length===13?n=te.utcTimeToDate(n):n=te.generalizedTimeToDate(n):n=new Date(s)}n>=r&&n<i?e=te.create(te.Class.UNIVERSAL,te.Type.UTCTIME,!1,te.dateToUtcTime(n)):e=te.create(te.Class.UNIVERSAL,te.Type.GENERALIZEDTIME,!1,te.dateToGeneralizedTime(n))}return te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(t.type).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.SET,!0,[e])])}function n1t(t){return[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(qe.pki.oids.data).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(t.algorithm).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.OCTETSTRING,!1,t.parameter.getBytes())]),te.create(te.Class.CONTEXT_SPECIFIC,0,!0,[te.create(te.Class.UNIVERSAL,te.Type.OCTETSTRING,!1,t.content.getBytes())])]}function gR(t,e,r){var i={},n=[];if(!te.validate(e,r,i,n)){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw s.errors=s,s}var o=te.derToOid(i.contentType);if(o!==qe.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(i.encryptedContent){var a="";if(qe.util.isArray(i.encryptedContent))for(var c=0;c<i.encryptedContent.length;++c){if(i.encryptedContent[c].type!==te.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=i.encryptedContent[c].value}else a=i.encryptedContent;t.encryptedContent={algorithm:te.derToOid(i.encAlgorithm),parameter:qe.util.createBuffer(i.encParameter.value),content:qe.util.createBuffer(a)}}if(i.content){var a="";if(qe.util.isArray(i.content))for(var c=0;c<i.content.length;++c){if(i.content[c].type!==te.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=i.content[c].value}else a=i.content;t.content=qe.util.createBuffer(a)}return t.version=i.version.charCodeAt(0),t.rawCapture=i,i}function Wge(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case qe.pki.oids["aes128-CBC"]:case qe.pki.oids["aes192-CBC"]:case qe.pki.oids["aes256-CBC"]:e=qe.aes.createDecryptionCipher(t.encryptedContent.key);break;case qe.pki.oids.desCBC:case qe.pki.oids["des-EDE3-CBC"]:e=qe.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}});var Jge=p((gLt,Zge)=>{l();"use strict";pR();var s1t=ft(),Qge=s1t.pki,o1t=(t,e)=>{let r=Qge.setRsaPublicKey(e.n,e.e),i=Qge.createCertificate();i.publicKey=r,i.serialNumber="01",i.validity.notBefore=new Date,i.validity.notAfter=new Date,i.validity.notAfter.setFullYear(i.validity.notBefore.getFullYear()+10);let n=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:t.id}];return i.setSubject(n),i.setIssuer(n),i.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),i.sign(e),i};async function a1t(t,e){let r=t.map(e),n=(await Promise.all(r)).findIndex(s=>s);return t[n]}Zge.exports={certificateForKey:o1t,findAsync:a1t}});var i3e=p((bLt,r3e)=>{l();"use strict";Xge();$w();var Gf=ft(),{certificateForKey:c1t,findAsync:u1t}=Jge(),F1=lr(),{fromString:e3e}=(ut(),lt),{toString:f1t}=(et(),Je),bR=new WeakMap,t3e=class{constructor(e,r){if(!e)throw F1(new Error("keychain is required"),"ERR_KEYCHAIN_REQUIRED");this.keychain=e,bR.set(this,{dek:r})}async encrypt(e,r){if(!(r instanceof Uint8Array))throw F1(new Error("Plain data must be a Uint8Array"),"ERR_INVALID_PARAMS");let i=await this.keychain.findKeyByName(e),n=await this.keychain._getPrivateKey(e),s=bR.get(this).dek,o=Gf.pki.decryptRsaPrivateKey(n,s),a=await c1t(i,o),c=Gf.pkcs7.createEnvelopedData();c.addRecipient(a),c.content=Gf.util.createBuffer(r),c.encrypt();let u=Gf.asn1.toDer(c.toAsn1()).getBytes();return e3e(u,"ascii")}async decrypt(e){if(!(e instanceof Uint8Array))throw F1(new Error("CMS data is required"),"ERR_INVALID_PARAMS");let r;try{let u=Gf.util.createBuffer(f1t(e,"ascii")),f=Gf.asn1.fromDer(u);r=Gf.pkcs7.messageFromAsn1(f)}catch(u){throw F1(new Error("Invalid CMS: "+u.message),"ERR_INVALID_CMS")}let i=r.recipients.filter(u=>u.issuer.find(f=>f.shortName==="O"&&f.value==="ipfs")).filter(u=>u.issuer.find(f=>f.shortName==="CN")).map(u=>({recipient:u,keyId:u.issuer.find(f=>f.shortName==="CN").value})),n=await u1t(i,async u=>{try{if(await this.keychain.findKeyById(u.keyId))return!0}catch(f){return!1}return!1});if(!n){let u=i.map(f=>f.keyId);throw F1(new Error("Decryption needs one of the key(s): "+u.join(", ")),"ERR_MISSING_KEYS",{missingKeys:u})}let s=await this.keychain.findKeyById(n.keyId);if(!s)throw F1(new Error("No key available to decrypto"),"ERR_NO_KEY");let o=await this.keychain._getPrivateKey(s.name),a=bR.get(this).dek,c=Gf.pki.decryptRsaPrivateKey(o,a);return r.decrypt(n.recipient,c),e3e(r.content.getBytes(),"ascii")}};r3e.exports=t3e});var f3e=p((mLt,u3e)=>{l();"use strict";var n3e=be(),s3e=Object.assign(n3e("libp2p:keychain"),{error:n3e("libp2p:keychain:err")}),l1t=qge(),d1t=br(),Ld=La(),{Key:o3e}=Ut(),h1t=i3e(),Sr=lr(),{toString:Ud}=(et(),Je),{fromString:bu}=(ut(),lt);r4();var p1t="/pkcs8/",a3e="/info/",Wf=new WeakMap,Fd={minKeyLength:112/8,minSaltLength:128/8,minIterationCount:1e3},mR={dek:{keyLength:512/8,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function mu(t){return!t||typeof t!="string"?!1:t===l1t(t.trim())}async function $t(t){let e=200,r=1e3,i=Math.random()*(r-e)+e;throw await new Promise(n=>setTimeout(n,i)),t}function cc(t){return new o3e(p1t+t)}function Yf(t){return new o3e(a3e+t)}var c3e=class{constructor(e,r){if(!e)throw new Error("store is required");if(this.store=e,this.opts=d1t(mR,r),this.opts.pass&&this.opts.pass.length<20)throw new Error("pass must be least 20 characters");if(this.opts.dek.keyLength<Fd.minKeyLength)throw new Error(`dek.keyLength must be least ${Fd.minKeyLength} bytes`);if(this.opts.dek.salt.length<Fd.minSaltLength)throw new Error(`dek.saltLength must be least ${Fd.minSaltLength} bytes`);if(this.opts.dek.iterationCount<Fd.minIterationCount)throw new Error(`dek.iterationCount must be least ${Fd.minIterationCount}`);let i=this.opts.pass?Ld.pbkdf2(this.opts.pass,this.opts.dek.salt,this.opts.dek.iterationCount,this.opts.dek.keyLength,this.opts.dek.hash):"";Wf.set(this,{dek:i})}get cms(){return new h1t(this,Wf.get(this).dek)}static generateOptions(){let e=Object.assign({},mR),r=Math.ceil(Fd.minSaltLength/3)*3;return e.dek.salt=Ud(Ld.randomBytes(r),"base64"),e}static get options(){return mR}async createKey(e,r,i=2048){let n=this;if(!mu(e)||e==="self")return $t(Sr(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));if(typeof r!="string")return $t(Sr(new Error(`Invalid key type '${r}'`),"ERR_INVALID_KEY_TYPE"));let s=cc(e);if(await n.store.has(s))return $t(Sr(new Error(`Key '${e}' already exists`),"ERR_KEY_ALREADY_EXISTS"));switch(r.toLowerCase()){case"rsa":if(!Number.isSafeInteger(i)||i<2048)return $t(Sr(new Error(`Invalid RSA key size ${i}`),"ERR_INVALID_KEY_SIZE"));break;default:break}let a;try{let c=await Ld.keys.generateKeyPair(r,i),u=await c.id(),f=Wf.get(this).dek,d=await c.export(f);a={name:e,id:u};let h=n.store.batch();h.put(s,bu(d)),h.put(Yf(e),bu(JSON.stringify(a))),await h.commit()}catch(c){return $t(c)}return a}async listKeys(){let e=this,r={prefix:a3e},i=[];for await(let n of e.store.query(r))i.push(JSON.parse(Ud(n.value)));return i}async findKeyById(e){try{return(await this.listKeys()).find(i=>i.id===e)}catch(r){return $t(r)}}async findKeyByName(e){if(!mu(e))return $t(Sr(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));let r=Yf(e);try{let i=await this.store.get(r);return JSON.parse(Ud(i))}catch(i){return $t(Sr(new Error(`Key '${e}' does not exist. ${i.message}`),"ERR_KEY_NOT_FOUND"))}}async removeKey(e){let r=this;if(!mu(e)||e==="self")return $t(Sr(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));let i=cc(e),n=await r.findKeyByName(e),s=r.store.batch();return s.delete(i),s.delete(Yf(e)),await s.commit(),n}async renameKey(e,r){let i=this;if(!mu(e)||e==="self")return $t(Sr(new Error(`Invalid old key name '${e}'`),"ERR_OLD_KEY_NAME_INVALID"));if(!mu(r)||r==="self")return $t(Sr(new Error(`Invalid new key name '${r}'`),"ERR_NEW_KEY_NAME_INVALID"));let n=cc(e),s=cc(r),o=Yf(e),a=Yf(r);if(await i.store.has(s))return $t(Sr(new Error(`Key '${r}' already exists`),"ERR_KEY_ALREADY_EXISTS"));try{let u=await i.store.get(n),f=await i.store.get(o),d=JSON.parse(Ud(f));d.name=r;let h=i.store.batch();return h.put(s,u),h.put(a,bu(JSON.stringify(d))),h.delete(n),h.delete(o),await h.commit(),d}catch(u){return $t(u)}}async exportKey(e,r){if(!mu(e))return $t(Sr(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));if(!r)return $t(Sr(new Error("Password is required"),"ERR_PASSWORD_REQUIRED"));let i=cc(e);try{let n=await this.store.get(i),s=Ud(n),o=Wf.get(this).dek;return(await Ld.keys.import(s,o)).export(r)}catch(n){return $t(n)}}async importKey(e,r,i){let n=this;if(!mu(e)||e==="self")return $t(Sr(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));if(!r)return $t(Sr(new Error("PEM encoded key is required"),"ERR_PEM_REQUIRED"));let s=cc(e);if(await n.store.has(s))return $t(Sr(new Error(`Key '${e}' already exists`),"ERR_KEY_ALREADY_EXISTS"));let a;try{a=await Ld.keys.import(r,i)}catch(d){return $t(Sr(new Error("Cannot read the key, most likely the password is wrong"),"ERR_CANNOT_READ_KEY"))}let c;try{c=await a.id();let d=Wf.get(this).dek;r=await a.export(d)}catch(d){return $t(d)}let u={name:e,id:c},f=n.store.batch();return f.put(s,bu(r)),f.put(Yf(e),bu(JSON.stringify(u))),await f.commit(),u}async importPeer(e,r){let i=this;if(!mu(e))return $t(Sr(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));if(!r||!r.privKey)return $t(Sr(new Error("Peer.privKey is required"),"ERR_MISSING_PRIVATE_KEY"));let n=r.privKey,s=cc(e);if(await i.store.has(s))return $t(Sr(new Error(`Key '${e}' already exists`),"ERR_KEY_ALREADY_EXISTS"));try{let a=await n.id(),c=Wf.get(this).dek,u=await n.export(c),f={name:e,id:a},d=i.store.batch();return d.put(s,bu(u)),d.put(Yf(e),bu(JSON.stringify(f))),await d.commit(),f}catch(a){return $t(a)}}async _getPrivateKey(e){if(!mu(e))return $t(Sr(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));try{let r=cc(e),i=await this.store.get(r);return Ud(i)}catch(r){return $t(Sr(new Error(`Key '${e}' does not exist. ${r.message}`),"ERR_KEY_NOT_FOUND"))}}async rotateKeychainPass(e,r){if(typeof e!="string")return $t(Sr(new Error(`Invalid old pass type '${typeof e}'`),"ERR_INVALID_OLD_PASS_TYPE"));if(typeof r!="string")return $t(Sr(new Error(`Invalid new pass type '${typeof r}'`),"ERR_INVALID_NEW_PASS_TYPE"));if(r.length<20)return $t(Sr(new Error(`Invalid pass length ${r.length}`),"ERR_INVALID_PASS_LENGTH"));s3e("recreating keychain");let i=Wf.get(this).dek;this.opts.pass=r;let n=r?Ld.pbkdf2(r,this.opts.dek.salt,this.opts.dek.iterationCount,this.opts.dek.keyLength,this.opts.dek.hash):"";Wf.set(this,{dek:n});let s=await this.listKeys();for(let o of s){let a=await this.store.get(cc(o.name)),c=Ud(a),u=await Ld.keys.import(c,i),f=n.toString(),d=await u.export(f),h=this.store.batch(),y={name:o.name,id:o.id};h.put(cc(o.name),bu(d)),h.put(Yf(o.name),bu(JSON.stringify(y))),await h.commit()}s3e("keychain reconstructed")}};u3e.exports=c3e});var d3e=p((vLt,l3e)=>{l();"use strict";var y1t=py();l3e.exports=t=>{let e=y1t(t);return e.delete=e.remove,e}});var p3e=p((h3e,H8)=>{l();(function(t){"use strict";var e,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,n=Math.floor,s="[BigNumber Error] ",o=s+"Number primitive has more than 15 significant digits: ",a=1e14,c=14,u=9007199254740991,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,h=1e9;function y(q){var D,z,G,Y=X.prototype={constructor:X,toString:null,valueOf:null},P=new X(1),b=20,w=4,S=-7,C=21,B=-1e7,W=1e7,K=!1,M=1,_=0,L={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},ae="0123456789abcdefghijklmnopqrstuvwxyz";function X(k,j){var $,Z,I,U,V,N,Q,ee,J=this;if(!(J instanceof X))return new X(k,j);if(j==null){if(k&&k._isBigNumber===!0){J.s=k.s,!k.c||k.e>W?J.c=J.e=null:k.e<B?J.c=[J.e=0]:(J.e=k.e,J.c=k.c.slice());return}if((N=typeof k=="number")&&k*0==0){if(J.s=1/k<0?(k=-k,-1):1,k===~~k){for(U=0,V=k;V>=10;V/=10,U++);U>W?J.c=J.e=null:(J.e=U,J.c=[k]);return}ee=String(k)}else{if(!r.test(ee=String(k)))return G(J,ee,N);J.s=ee.charCodeAt(0)==45?(ee=ee.slice(1),-1):1}(U=ee.indexOf("."))>-1&&(ee=ee.replace(".","")),(V=ee.search(/e/i))>0?(U<0&&(U=V),U+=+ee.slice(V+1),ee=ee.substring(0,V)):U<0&&(U=ee.length)}else{if(v(j,2,ae.length,"Base"),j==10)return J=new X(k),he(J,b+J.e+1,w);if(ee=String(k),N=typeof k=="number"){if(k*0!=0)return G(J,ee,N,j);if(J.s=1/k<0?(ee=ee.slice(1),-1):1,X.DEBUG&&ee.replace(/^0\.0*|\./,"").length>15)throw Error(o+k)}else J.s=ee.charCodeAt(0)===45?(ee=ee.slice(1),-1):1;for($=ae.slice(0,j),U=V=0,Q=ee.length;V<Q;V++)if($.indexOf(Z=ee.charAt(V))<0){if(Z=="."){if(V>U){U=Q;continue}}else if(!I&&(ee==ee.toUpperCase()&&(ee=ee.toLowerCase())||ee==ee.toLowerCase()&&(ee=ee.toUpperCase()))){I=!0,V=-1,U=0;continue}return G(J,String(k),N,j)}N=!1,ee=z(ee,j,10,J.s),(U=ee.indexOf("."))>-1?ee=ee.replace(".",""):U=ee.length}for(V=0;ee.charCodeAt(V)===48;V++);for(Q=ee.length;ee.charCodeAt(--Q)===48;);if(ee=ee.slice(V,++Q)){if(Q-=V,N&&X.DEBUG&&Q>15&&(k>u||k!==n(k)))throw Error(o+J.s*k);if((U=U-V-1)>W)J.c=J.e=null;else if(U<B)J.c=[J.e=0];else{if(J.e=U,J.c=[],V=(U+1)%c,U<0&&(V+=c),V<Q){for(V&&J.c.push(+ee.slice(0,V)),Q-=c;V<Q;)J.c.push(+ee.slice(V,V+=c));V=c-(ee=ee.slice(V)).length}else V-=Q;for(;V--;ee+="0");J.c.push(+ee)}}else J.c=[J.e=0]}X.clone=y,X.ROUND_UP=0,X.ROUND_DOWN=1,X.ROUND_CEIL=2,X.ROUND_FLOOR=3,X.ROUND_HALF_UP=4,X.ROUND_HALF_DOWN=5,X.ROUND_HALF_EVEN=6,X.ROUND_HALF_CEIL=7,X.ROUND_HALF_FLOOR=8,X.EUCLID=9,X.config=X.set=function(k){var j,$;if(k!=null)if(typeof k=="object"){if(k.hasOwnProperty(j="DECIMAL_PLACES")&&($=k[j],v($,0,h,j),b=$),k.hasOwnProperty(j="ROUNDING_MODE")&&($=k[j],v($,0,8,j),w=$),k.hasOwnProperty(j="EXPONENTIAL_AT")&&($=k[j],$&&$.pop?(v($[0],-h,0,j),v($[1],0,h,j),S=$[0],C=$[1]):(v($,-h,h,j),S=-(C=$<0?-$:$))),k.hasOwnProperty(j="RANGE"))if($=k[j],$&&$.pop)v($[0],-h,-1,j),v($[1],1,h,j),B=$[0],W=$[1];else if(v($,-h,h,j),$)B=-(W=$<0?-$:$);else throw Error(s+j+" cannot be zero: "+$);if(k.hasOwnProperty(j="CRYPTO"))if($=k[j],$===!!$)if($)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))K=$;else throw K=!$,Error(s+"crypto unavailable");else K=$;else throw Error(s+j+" not true or false: "+$);if(k.hasOwnProperty(j="MODULO_MODE")&&($=k[j],v($,0,9,j),M=$),k.hasOwnProperty(j="POW_PRECISION")&&($=k[j],v($,0,h,j),_=$),k.hasOwnProperty(j="FORMAT"))if($=k[j],typeof $=="object")L=$;else throw Error(s+j+" not an object: "+$);if(k.hasOwnProperty(j="ALPHABET"))if($=k[j],typeof $=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test($))ae=$;else throw Error(s+j+" invalid: "+$)}else throw Error(s+"Object expected: "+k);return{DECIMAL_PLACES:b,ROUNDING_MODE:w,EXPONENTIAL_AT:[S,C],RANGE:[B,W],CRYPTO:K,MODULO_MODE:M,POW_PRECISION:_,FORMAT:L,ALPHABET:ae}},X.isBigNumber=function(k){if(!k||k._isBigNumber!==!0)return!1;if(!X.DEBUG)return!0;var j,$,Z=k.c,I=k.e,U=k.s;e:if({}.toString.call(Z)=="[object Array]"){if((U===1||U===-1)&&I>=-h&&I<=h&&I===n(I)){if(Z[0]===0){if(I===0&&Z.length===1)return!0;break e}if(j=(I+1)%c,j<1&&(j+=c),String(Z[0]).length==j){for(j=0;j<Z.length;j++)if($=Z[j],$<0||$>=a||$!==n($))break e;if($!==0)return!0}}}else if(Z===null&&I===null&&(U===null||U===1||U===-1))return!0;throw Error(s+"Invalid BigNumber: "+k)},X.maximum=X.max=function(){return oe(arguments,Y.lt)},X.minimum=X.min=function(){return oe(arguments,Y.gt)},X.random=function(){var k=9007199254740992,j=Math.random()*k&2097151?function(){return n(Math.random()*k)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function($){var Z,I,U,V,N,Q=0,ee=[],J=new X(P);if($==null?$=b:v($,0,h),V=i($/c),K)if(crypto.getRandomValues){for(Z=crypto.getRandomValues(new Uint32Array(V*=2));Q<V;)N=Z[Q]*131072+(Z[Q+1]>>>11),N>=9e15?(I=crypto.getRandomValues(new Uint32Array(2)),Z[Q]=I[0],Z[Q+1]=I[1]):(ee.push(N%1e14),Q+=2);Q=V/2}else if(crypto.randomBytes){for(Z=crypto.randomBytes(V*=7);Q<V;)N=(Z[Q]&31)*281474976710656+Z[Q+1]*1099511627776+Z[Q+2]*4294967296+Z[Q+3]*16777216+(Z[Q+4]<<16)+(Z[Q+5]<<8)+Z[Q+6],N>=9e15?crypto.randomBytes(7).copy(Z,Q):(ee.push(N%1e14),Q+=7);Q=V/7}else throw K=!1,Error(s+"crypto unavailable");if(!K)for(;Q<V;)N=j(),N<9e15&&(ee[Q++]=N%1e14);for(V=ee[--Q],$%=c,V&&$&&(N=f[c-$],ee[Q]=n(V/N)*N);ee[Q]===0;ee.pop(),Q--);if(Q<0)ee=[U=0];else{for(U=-1;ee[0]===0;ee.splice(0,1),U-=c);for(Q=1,N=ee[0];N>=10;N/=10,Q++);Q<c&&(U-=c-Q)}return J.e=U,J.c=ee,J}}(),X.sum=function(){for(var k=1,j=arguments,$=new X(j[0]);k<j.length;)$=$.plus(j[k++]);return $},z=function(){var k="0123456789";function j($,Z,I,U){for(var V,N=[0],Q,ee=0,J=$.length;ee<J;){for(Q=N.length;Q--;N[Q]*=Z);for(N[0]+=U.indexOf($.charAt(ee++)),V=0;V<N.length;V++)N[V]>I-1&&(N[V+1]==null&&(N[V+1]=0),N[V+1]+=N[V]/I|0,N[V]%=I)}return N.reverse()}return function($,Z,I,U,V){var N,Q,ee,J,ce,ye,ge,je,Te=$.indexOf("."),Ke=b,Ze=w;for(Te>=0&&(J=_,_=0,$=$.replace(".",""),je=new X(Z),ye=je.pow($.length-Te),_=J,je.c=j(F(m(ye.c),ye.e,"0"),10,I,k),je.e=je.c.length),ge=j($,Z,I,V?(N=ae,k):(N=k,ae)),ee=J=ge.length;ge[--J]==0;ge.pop());if(!ge[0])return N.charAt(0);if(Te<0?--ee:(ye.c=ge,ye.e=ee,ye.s=U,ye=D(ye,je,Ke,Ze,I),ge=ye.c,ce=ye.r,ee=ye.e),Q=ee+Ke+1,Te=ge[Q],J=I/2,ce=ce||Q<0||ge[Q+1]!=null,ce=Ze<4?(Te!=null||ce)&&(Ze==0||Ze==(ye.s<0?3:2)):Te>J||Te==J&&(Ze==4||ce||Ze==6&&ge[Q-1]&1||Ze==(ye.s<0?8:7)),Q<1||!ge[0])$=ce?F(N.charAt(1),-Ke,N.charAt(0)):N.charAt(0);else{if(ge.length=Q,ce)for(--I;++ge[--Q]>I;)ge[Q]=0,Q||(++ee,ge=[1].concat(ge));for(J=ge.length;!ge[--J];);for(Te=0,$="";Te<=J;$+=N.charAt(ge[Te++]));$=F($,ee,N.charAt(0))}return $}}(),D=function(){function k(Z,I,U){var V,N,Q,ee,J=0,ce=Z.length,ye=I%d,ge=I/d|0;for(Z=Z.slice();ce--;)Q=Z[ce]%d,ee=Z[ce]/d|0,V=ge*Q+ee*ye,N=ye*Q+V%d*d+J,J=(N/U|0)+(V/d|0)+ge*ee,Z[ce]=N%U;return J&&(Z=[J].concat(Z)),Z}function j(Z,I,U,V){var N,Q;if(U!=V)Q=U>V?1:-1;else for(N=Q=0;N<U;N++)if(Z[N]!=I[N]){Q=Z[N]>I[N]?1:-1;break}return Q}function $(Z,I,U,V){for(var N=0;U--;)Z[U]-=N,N=Z[U]<I[U]?1:0,Z[U]=N*V+Z[U]-I[U];for(;!Z[0]&&Z.length>1;Z.splice(0,1));}return function(Z,I,U,V,N){var Q,ee,J,ce,ye,ge,je,Te,Ke,Ze,ze,Ve,pt,Yt,ir,Sn,zt,At=Z.s==I.s?1:-1,Zr=Z.c,it=I.c;if(!Zr||!Zr[0]||!it||!it[0])return new X(!Z.s||!I.s||(Zr?it&&Zr[0]==it[0]:!it)?NaN:Zr&&Zr[0]==0||!it?At*0:At/0);for(Te=new X(At),Ke=Te.c=[],ee=Z.e-I.e,At=U+ee+1,N||(N=a,ee=g(Z.e/c)-g(I.e/c),At=At/c|0),J=0;it[J]==(Zr[J]||0);J++);if(it[J]>(Zr[J]||0)&&ee--,At<0)Ke.push(1),ce=!0;else{for(Yt=Zr.length,Sn=it.length,J=0,At+=2,ye=n(N/(it[0]+1)),ye>1&&(it=k(it,ye,N),Zr=k(Zr,ye,N),Sn=it.length,Yt=Zr.length),pt=Sn,Ze=Zr.slice(0,Sn),ze=Ze.length;ze<Sn;Ze[ze++]=0);zt=it.slice(),zt=[0].concat(zt),ir=it[0],it[1]>=N/2&&ir++;do{if(ye=0,Q=j(it,Ze,Sn,ze),Q<0){if(Ve=Ze[0],Sn!=ze&&(Ve=Ve*N+(Ze[1]||0)),ye=n(Ve/ir),ye>1)for(ye>=N&&(ye=N-1),ge=k(it,ye,N),je=ge.length,ze=Ze.length;j(ge,Ze,je,ze)==1;)ye--,$(ge,Sn<je?zt:it,je,N),je=ge.length,Q=1;else ye==0&&(Q=ye=1),ge=it.slice(),je=ge.length;if(je<ze&&(ge=[0].concat(ge)),$(Ze,ge,ze,N),ze=Ze.length,Q==-1)for(;j(it,Ze,Sn,ze)<1;)ye++,$(Ze,Sn<ze?zt:it,ze,N),ze=Ze.length}else Q===0&&(ye++,Ze=[0]);Ke[J++]=ye,Ze[0]?Ze[ze++]=Zr[pt]||0:(Ze=[Zr[pt]],ze=1)}while((pt++<Yt||Ze[0]!=null)&&At--);ce=Ze[0]!=null,Ke[0]||Ke.splice(0,1)}if(N==a){for(J=1,At=Ke[0];At>=10;At/=10,J++);he(Te,U+(Te.e=J+ee*c-1)+1,V,ce)}else Te.e=ee,Te.r=+ce;return Te}}();function ne(k,j,$,Z){var I,U,V,N,Q;if($==null?$=w:v($,0,8),!k.c)return k.toString();if(I=k.c[0],V=k.e,j==null)Q=m(k.c),Q=Z==1||Z==2&&(V<=S||V>=C)?R(Q,V):F(Q,V,"0");else if(k=he(new X(k),j,$),U=k.e,Q=m(k.c),N=Q.length,Z==1||Z==2&&(j<=U||U<=S)){for(;N<j;Q+="0",N++);Q=R(Q,U)}else if(j-=V,Q=F(Q,U,"0"),U+1>N){if(--j>0)for(Q+=".";j--;Q+="0");}else if(j+=U-N,j>0)for(U+1==N&&(Q+=".");j--;Q+="0");return k.s<0&&I?"-"+Q:Q}function oe(k,j){for(var $,Z=1,I=new X(k[0]);Z<k.length;Z++)if($=new X(k[Z]),$.s)j.call(I,$)&&(I=$);else{I=$;break}return I}function de(k,j,$){for(var Z=1,I=j.length;!j[--I];j.pop());for(I=j[0];I>=10;I/=10,Z++);return($=Z+$*c-1)>W?k.c=k.e=null:$<B?k.c=[k.e=0]:(k.e=$,k.c=j),k}G=function(){var k=/^(-?)0([xbo])(?=\w[\w.]*$)/i,j=/^([^.]+)\.$/,$=/^\.([^.]+)$/,Z=/^-?(Infinity|NaN)$/,I=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(U,V,N,Q){var ee,J=N?V:V.replace(I,"");if(Z.test(J))U.s=isNaN(J)?null:J<0?-1:1;else{if(!N&&(J=J.replace(k,function(ce,ye,ge){return ee=(ge=ge.toLowerCase())=="x"?16:ge=="b"?2:8,!Q||Q==ee?ye:ce}),Q&&(ee=Q,J=J.replace(j,"$1").replace($,"0.$1")),V!=J))return new X(J,ee);if(X.DEBUG)throw Error(s+"Not a"+(Q?" base "+Q:"")+" number: "+V);U.s=null}U.c=U.e=null}}();function he(k,j,$,Z){var I,U,V,N,Q,ee,J,ce=k.c,ye=f;if(ce){e:{for(I=1,N=ce[0];N>=10;N/=10,I++);if(U=j-I,U<0)U+=c,V=j,Q=ce[ee=0],J=Q/ye[I-V-1]%10|0;else if(ee=i((U+1)/c),ee>=ce.length)if(Z){for(;ce.length<=ee;ce.push(0));Q=J=0,I=1,U%=c,V=U-c+1}else break e;else{for(Q=N=ce[ee],I=1;N>=10;N/=10,I++);U%=c,V=U-c+I,J=V<0?0:Q/ye[I-V-1]%10|0}if(Z=Z||j<0||ce[ee+1]!=null||(V<0?Q:Q%ye[I-V-1]),Z=$<4?(J||Z)&&($==0||$==(k.s<0?3:2)):J>5||J==5&&($==4||Z||$==6&&(U>0?V>0?Q/ye[I-V]:0:ce[ee-1])%10&1||$==(k.s<0?8:7)),j<1||!ce[0])return ce.length=0,Z?(j-=k.e+1,ce[0]=ye[(c-j%c)%c],k.e=-j||0):ce[0]=k.e=0,k;if(U==0?(ce.length=ee,N=1,ee--):(ce.length=ee+1,N=ye[c-U],ce[ee]=V>0?n(Q/ye[I-V]%ye[V])*N:0),Z)for(;;)if(ee==0){for(U=1,V=ce[0];V>=10;V/=10,U++);for(V=ce[0]+=N,N=1;V>=10;V/=10,N++);U!=N&&(k.e++,ce[0]==a&&(ce[0]=1));break}else{if(ce[ee]+=N,ce[ee]!=a)break;ce[ee--]=0,N=1}for(U=ce.length;ce[--U]===0;ce.pop());}k.e>W?k.c=k.e=null:k.e<B&&(k.c=[k.e=0])}return k}function we(k){var j,$=k.e;return $===null?k.toString():(j=m(k.c),j=$<=S||$>=C?R(j,$):F(j,$,"0"),k.s<0?"-"+j:j)}return Y.absoluteValue=Y.abs=function(){var k=new X(this);return k.s<0&&(k.s=1),k},Y.comparedTo=function(k,j){return E(this,new X(k,j))},Y.decimalPlaces=Y.dp=function(k,j){var $,Z,I,U=this;if(k!=null)return v(k,0,h),j==null?j=w:v(j,0,8),he(new X(U),k+U.e+1,j);if(!($=U.c))return null;if(Z=((I=$.length-1)-g(this.e/c))*c,I=$[I])for(;I%10==0;I/=10,Z--);return Z<0&&(Z=0),Z},Y.dividedBy=Y.div=function(k,j){return D(this,new X(k,j),b,w)},Y.dividedToIntegerBy=Y.idiv=function(k,j){return D(this,new X(k,j),0,1)},Y.exponentiatedBy=Y.pow=function(k,j){var $,Z,I,U,V,N,Q,ee,J,ce=this;if(k=new X(k),k.c&&!k.isInteger())throw Error(s+"Exponent not an integer: "+we(k));if(j!=null&&(j=new X(j)),N=k.e>14,!ce.c||!ce.c[0]||ce.c[0]==1&&!ce.e&&ce.c.length==1||!k.c||!k.c[0])return J=new X(Math.pow(+we(ce),N?2-A(k):+we(k))),j?J.mod(j):J;if(Q=k.s<0,j){if(j.c?!j.c[0]:!j.s)return new X(NaN);Z=!Q&&ce.isInteger()&&j.isInteger(),Z&&(ce=ce.mod(j))}else{if(k.e>9&&(ce.e>0||ce.e<-1||(ce.e==0?ce.c[0]>1||N&&ce.c[1]>=24e7:ce.c[0]<8e13||N&&ce.c[0]<=9999975e7)))return U=ce.s<0&&A(k)?-0:0,ce.e>-1&&(U=1/U),new X(Q?1/U:U);_&&(U=i(_/c+2))}for(N?($=new X(.5),Q&&(k.s=1),ee=A(k)):(I=Math.abs(+we(k)),ee=I%2),J=new X(P);;){if(ee){if(J=J.times(ce),!J.c)break;U?J.c.length>U&&(J.c.length=U):Z&&(J=J.mod(j))}if(I){if(I=n(I/2),I===0)break;ee=I%2}else if(k=k.times($),he(k,k.e+1,1),k.e>14)ee=A(k);else{if(I=+we(k),I===0)break;ee=I%2}ce=ce.times(ce),U?ce.c&&ce.c.length>U&&(ce.c.length=U):Z&&(ce=ce.mod(j))}return Z?J:(Q&&(J=P.div(J)),j?J.mod(j):U?he(J,_,w,V):J)},Y.integerValue=function(k){var j=new X(this);return k==null?k=w:v(k,0,8),he(j,j.e+1,k)},Y.isEqualTo=Y.eq=function(k,j){return E(this,new X(k,j))===0},Y.isFinite=function(){return!!this.c},Y.isGreaterThan=Y.gt=function(k,j){return E(this,new X(k,j))>0},Y.isGreaterThanOrEqualTo=Y.gte=function(k,j){return(j=E(this,new X(k,j)))===1||j===0},Y.isInteger=function(){return!!this.c&&g(this.e/c)>this.c.length-2},Y.isLessThan=Y.lt=function(k,j){return E(this,new X(k,j))<0},Y.isLessThanOrEqualTo=Y.lte=function(k,j){return(j=E(this,new X(k,j)))===-1||j===0},Y.isNaN=function(){return!this.s},Y.isNegative=function(){return this.s<0},Y.isPositive=function(){return this.s>0},Y.isZero=function(){return!!this.c&&this.c[0]==0},Y.minus=function(k,j){var $,Z,I,U,V=this,N=V.s;if(k=new X(k,j),j=k.s,!N||!j)return new X(NaN);if(N!=j)return k.s=-j,V.plus(k);var Q=V.e/c,ee=k.e/c,J=V.c,ce=k.c;if(!Q||!ee){if(!J||!ce)return J?(k.s=-j,k):new X(ce?V:NaN);if(!J[0]||!ce[0])return ce[0]?(k.s=-j,k):new X(J[0]?V:w==3?-0:0)}if(Q=g(Q),ee=g(ee),J=J.slice(),N=Q-ee){for((U=N<0)?(N=-N,I=J):(ee=Q,I=ce),I.reverse(),j=N;j--;I.push(0));I.reverse()}else for(Z=(U=(N=J.length)<(j=ce.length))?N:j,N=j=0;j<Z;j++)if(J[j]!=ce[j]){U=J[j]<ce[j];break}if(U&&(I=J,J=ce,ce=I,k.s=-k.s),j=(Z=ce.length)-($=J.length),j>0)for(;j--;J[$++]=0);for(j=a-1;Z>N;){if(J[--Z]<ce[Z]){for($=Z;$&&!J[--$];J[$]=j);--J[$],J[Z]+=a}J[Z]-=ce[Z]}for(;J[0]==0;J.splice(0,1),--ee);return J[0]?de(k,J,ee):(k.s=w==3?-1:1,k.c=[k.e=0],k)},Y.modulo=Y.mod=function(k,j){var $,Z,I=this;return k=new X(k,j),!I.c||!k.s||k.c&&!k.c[0]?new X(NaN):!k.c||I.c&&!I.c[0]?new X(I):(M==9?(Z=k.s,k.s=1,$=D(I,k,0,3),k.s=Z,$.s*=Z):$=D(I,k,0,M),k=I.minus($.times(k)),!k.c[0]&&M==1&&(k.s=I.s),k)},Y.multipliedBy=Y.times=function(k,j){var $,Z,I,U,V,N,Q,ee,J,ce,ye,ge,je,Te,Ke,Ze=this,ze=Ze.c,Ve=(k=new X(k,j)).c;if(!ze||!Ve||!ze[0]||!Ve[0])return!Ze.s||!k.s||ze&&!ze[0]&&!Ve||Ve&&!Ve[0]&&!ze?k.c=k.e=k.s=null:(k.s*=Ze.s,!ze||!Ve?k.c=k.e=null:(k.c=[0],k.e=0)),k;for(Z=g(Ze.e/c)+g(k.e/c),k.s*=Ze.s,Q=ze.length,ce=Ve.length,Q<ce&&(je=ze,ze=Ve,Ve=je,I=Q,Q=ce,ce=I),I=Q+ce,je=[];I--;je.push(0));for(Te=a,Ke=d,I=ce;--I>=0;){for($=0,ye=Ve[I]%Ke,ge=Ve[I]/Ke|0,V=Q,U=I+V;U>I;)ee=ze[--V]%Ke,J=ze[V]/Ke|0,N=ge*ee+J*ye,ee=ye*ee+N%Ke*Ke+je[U]+$,$=(ee/Te|0)+(N/Ke|0)+ge*J,je[U--]=ee%Te;je[U]=$}return $?++Z:je.splice(0,1),de(k,je,Z)},Y.negated=function(){var k=new X(this);return k.s=-k.s||null,k},Y.plus=function(k,j){var $,Z=this,I=Z.s;if(k=new X(k,j),j=k.s,!I||!j)return new X(NaN);if(I!=j)return k.s=-j,Z.minus(k);var U=Z.e/c,V=k.e/c,N=Z.c,Q=k.c;if(!U||!V){if(!N||!Q)return new X(I/0);if(!N[0]||!Q[0])return Q[0]?k:new X(N[0]?Z:I*0)}if(U=g(U),V=g(V),N=N.slice(),I=U-V){for(I>0?(V=U,$=Q):(I=-I,$=N),$.reverse();I--;$.push(0));$.reverse()}for(I=N.length,j=Q.length,I-j<0&&($=Q,Q=N,N=$,j=I),I=0;j;)I=(N[--j]=N[j]+Q[j]+I)/a|0,N[j]=a===N[j]?0:N[j]%a;return I&&(N=[I].concat(N),++V),de(k,N,V)},Y.precision=Y.sd=function(k,j){var $,Z,I,U=this;if(k!=null&&k!==!!k)return v(k,1,h),j==null?j=w:v(j,0,8),he(new X(U),k,j);if(!($=U.c))return null;if(I=$.length-1,Z=I*c+1,I=$[I]){for(;I%10==0;I/=10,Z--);for(I=$[0];I>=10;I/=10,Z++);}return k&&U.e+1>Z&&(Z=U.e+1),Z},Y.shiftedBy=function(k){return v(k,-u,u),this.times("1e"+k)},Y.squareRoot=Y.sqrt=function(){var k,j,$,Z,I,U=this,V=U.c,N=U.s,Q=U.e,ee=b+4,J=new X("0.5");if(N!==1||!V||!V[0])return new X(!N||N<0&&(!V||V[0])?NaN:V?U:1/0);if(N=Math.sqrt(+we(U)),N==0||N==1/0?(j=m(V),(j.length+Q)%2==0&&(j+="0"),N=Math.sqrt(+j),Q=g((Q+1)/2)-(Q<0||Q%2),N==1/0?j="5e"+Q:(j=N.toExponential(),j=j.slice(0,j.indexOf("e")+1)+Q),$=new X(j)):$=new X(N+""),$.c[0]){for(Q=$.e,N=Q+ee,N<3&&(N=0);;)if(I=$,$=J.times(I.plus(D(U,I,ee,1))),m(I.c).slice(0,N)===(j=m($.c)).slice(0,N))if($.e<Q&&--N,j=j.slice(N-3,N+1),j=="9999"||!Z&&j=="4999"){if(!Z&&(he(I,I.e+b+2,0),I.times(I).eq(U))){$=I;break}ee+=4,N+=4,Z=1}else{(!+j||!+j.slice(1)&&j.charAt(0)=="5")&&(he($,$.e+b+2,1),k=!$.times($).eq(U));break}}return he($,$.e+b+1,w,k)},Y.toExponential=function(k,j){return k!=null&&(v(k,0,h),k++),ne(this,k,j,1)},Y.toFixed=function(k,j){return k!=null&&(v(k,0,h),k=k+this.e+1),ne(this,k,j)},Y.toFormat=function(k,j,$){var Z,I=this;if($==null)k!=null&&j&&typeof j=="object"?($=j,j=null):k&&typeof k=="object"?($=k,k=j=null):$=L;else if(typeof $!="object")throw Error(s+"Argument not an object: "+$);if(Z=I.toFixed(k,j),I.c){var U,V=Z.split("."),N=+$.groupSize,Q=+$.secondaryGroupSize,ee=$.groupSeparator||"",J=V[0],ce=V[1],ye=I.s<0,ge=ye?J.slice(1):J,je=ge.length;if(Q&&(U=N,N=Q,Q=U,je-=U),N>0&&je>0){for(U=je%N||N,J=ge.substr(0,U);U<je;U+=N)J+=ee+ge.substr(U,N);Q>0&&(J+=ee+ge.slice(U)),ye&&(J="-"+J)}Z=ce?J+($.decimalSeparator||"")+((Q=+$.fractionGroupSize)?ce.replace(new RegExp("\\d{"+Q+"}\\B","g"),"$&"+($.fractionGroupSeparator||"")):ce):J}return($.prefix||"")+Z+($.suffix||"")},Y.toFraction=function(k){var j,$,Z,I,U,V,N,Q,ee,J,ce,ye,ge=this,je=ge.c;if(k!=null&&(N=new X(k),!N.isInteger()&&(N.c||N.s!==1)||N.lt(P)))throw Error(s+"Argument "+(N.isInteger()?"out of range: ":"not an integer: ")+we(N));if(!je)return new X(ge);for(j=new X(P),ee=$=new X(P),Z=Q=new X(P),ye=m(je),U=j.e=ye.length-ge.e-1,j.c[0]=f[(V=U%c)<0?c+V:V],k=!k||N.comparedTo(j)>0?U>0?j:ee:N,V=W,W=1/0,N=new X(ye),Q.c[0]=0;J=D(N,j,0,1),I=$.plus(J.times(Z)),I.comparedTo(k)!=1;)$=Z,Z=I,ee=Q.plus(J.times(I=ee)),Q=I,j=N.minus(J.times(I=j)),N=I;return I=D(k.minus($),Z,0,1),Q=Q.plus(I.times(ee)),$=$.plus(I.times(Z)),Q.s=ee.s=ge.s,U=U*2,ce=D(ee,Z,U,w).minus(ge).abs().comparedTo(D(Q,$,U,w).minus(ge).abs())<1?[ee,Z]:[Q,$],W=V,ce},Y.toNumber=function(){return+we(this)},Y.toPrecision=function(k,j){return k!=null&&v(k,1,h),ne(this,k,j,2)},Y.toString=function(k){var j,$=this,Z=$.s,I=$.e;return I===null?Z?(j="Infinity",Z<0&&(j="-"+j)):j="NaN":(k==null?j=I<=S||I>=C?R(m($.c),I):F(m($.c),I,"0"):k===10?($=he(new X($),b+I+1,w),j=F(m($.c),$.e,"0")):(v(k,2,ae.length,"Base"),j=z(F(m($.c),I,"0"),10,k,Z,!0)),Z<0&&$.c[0]&&(j="-"+j)),j},Y.valueOf=Y.toJSON=function(){return we(this)},Y._isBigNumber=!0,q!=null&&X.set(q),X}function g(q){var D=q|0;return q>0||q===D?D:D-1}function m(q){for(var D,z,G=1,Y=q.length,P=q[0]+"";G<Y;){for(D=q[G++]+"",z=c-D.length;z--;D="0"+D);P+=D}for(Y=P.length;P.charCodeAt(--Y)===48;);return P.slice(0,Y+1||1)}function E(q,D){var z,G,Y=q.c,P=D.c,b=q.s,w=D.s,S=q.e,C=D.e;if(!b||!w)return null;if(z=Y&&!Y[0],G=P&&!P[0],z||G)return z?G?0:-w:b;if(b!=w)return b;if(z=b<0,G=S==C,!Y||!P)return G?0:!Y^z?1:-1;if(!G)return S>C^z?1:-1;for(w=(S=Y.length)<(C=P.length)?S:C,b=0;b<w;b++)if(Y[b]!=P[b])return Y[b]>P[b]^z?1:-1;return S==C?0:S>C^z?1:-1}function v(q,D,z,G){if(q<D||q>z||q!==n(q))throw Error(s+(G||"Argument")+(typeof q=="number"?q<D||q>z?" out of range: ":" not an integer: ":" not a primitive number: ")+String(q))}function A(q){var D=q.c.length-1;return g(q.e/c)==D&&q.c[D]%2!=0}function R(q,D){return(q.length>1?q.charAt(0)+"."+q.slice(1):q)+(D<0?"e":"e+")+D}function F(q,D,z){var G,Y;if(D<0){for(Y=z+".";++D;Y+=z);q=Y+q}else if(G=q.length,++D>G){for(Y=z,D-=G;--D;Y+=z);q+=Y}else D<G&&(q=q.slice(0,D)+"."+q.slice(D));return q}e=y(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof H8!="undefined"&&H8.exports?H8.exports=e:(t||(t=typeof self!="undefined"&&self?self:window),t.BigNumber=e)})(h3e)});var vR=p((y3e,g3e)=>{l();"use strict";var g1t=Math.exp;y3e=g3e.exports=function(e){if(typeof e!="number")throw new Error("must provide a timespan to the moving average constructor");if(e<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");let r,i=0,n=0,s=0,o,a={};function c(u,f){return 1-g1t(-(u-f)/e)}return a.push=function(f,d){if(o){let h=c(f,o),y=d-r,g=h*y;r=h*d+(1-h)*r,i=(1-h)*(i+y*g),n=Math.sqrt(i),s=r+h*y}else r=d;o=f},a.movingAverage=function(){return r},a.variance=function(){return i},a.deviation=function(){return n},a.forecast=function(){return s},a}});var w3e=p((wLt,v3e)=>{l();"use strict";var{EventEmitter:b1t}=gr(),{BigNumber:$8}=p3e(),b3e=vR(),m1t=QT(),m3e=class extends b1t{constructor(e,r){super();this._options=r,this._queue=[],this._stats={dataReceived:$8(0),dataSent:$8(0)},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this);let i=this._options.movingAverageIntervals;for(let n=0;n<e.length;n++){let s=e[n];this._stats[s]=$8(0),this._movingAverages[s]={};for(let o=0;o<i.length;o++){let a=i[o];(this._movingAverages[s][a]=b3e(a)).push(this._frequencyLastTime,0)}}}start(){this._queue.length&&this._resetComputeTimeout()}stop(){this._timeout&&(this._timeout.clear(),this._timeout=null)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}toJSON(){let e=this.snapshot,r=this.movingAverages,i={dataReceived:e.dataReceived.toString(),dataSent:e.dataSent.toString(),movingAverages:{}},n=Object.keys(r);for(let s of n){i.movingAverages[s]={};for(let o of Object.keys(r[s]))i.movingAverages[s][o]=r[s][o].movingAverage()}return i}push(e,r){this._queue.push([e,r,Date.now()]),this._resetComputeTimeout()}_resetComputeTimeout(){this._timeout=m1t(this._update,this._nextTimeout())}_nextTimeout(){let e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;for(e of this._queue)this._applyOp(e);this._queue=[],this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){let r=e-this._frequencyLastTime;Object.keys(this._stats).forEach(i=>{this._updateFrequencyFor(i,r,e)}),this._frequencyLastTime=e}_updateFrequencyFor(e,r,i){let n=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;let o=n/(r||1)*1e3,a=this._movingAverages[e];a||(a=this._movingAverages[e]={});let c=this._options.movingAverageIntervals;for(let u=0;u<c.length;u++){let f=c[u],d=a[f];d||(d=a[f]=b3e(f)),d.push(i,o)}}_applyOp(e){let r=e[0],i=e[1];if(typeof i!="number")throw new Error(`invalid increment number: ${i}`);let n;Object.prototype.hasOwnProperty.call(this._stats,r)?n=this._stats[r]:n=this._stats[r]=$8(0),this._stats[r]=n.plus(i),this._frequencyAccumulators[r]||(this._frequencyAccumulators[r]=0),this._frequencyAccumulators[r]+=i}};v3e.exports=m3e});var S3e=p((_Lt,E3e)=>{l();"use strict";var v1t=br(),{pipe:w1t}=Ir(),{tap:_3e}=M0(),_1t=d3e(),{METRICS:E1t}=O8(),wR=w3e(),_R=["dataReceived","dataSent"],S1t={in:"dataReceived",out:"dataSent"},G8=class{constructor(e){this._options=v1t(E1t,e),this._globalStats=new wR(_R,this._options),this._peerStats=new Map,this._protocolStats=new Map,this._oldPeers=_1t(this._options.maxOldPeersRetention),this._running=!1,this._onMessage=this._onMessage.bind(this),this._connectionManager=e.connectionManager,this._connectionManager.on("peer:disconnect",r=>{this.onPeerDisconnected(r.remotePeer)})}start(){this._running=!0}stop(){this._running=!1,this._globalStats.stop();for(let e of this._peerStats.values())e.stop();for(let e of this._protocolStats.values())e.stop()}get global(){return this._globalStats}get peers(){return Array.from(this._peerStats.keys())}forPeer(e){let r=e.toB58String();return this._peerStats.get(r)||this._oldPeers.get(r)}get protocols(){return Array.from(this._protocolStats.keys())}forProtocol(e){return this._protocolStats.get(e)}onPeerDisconnected(e){let r=e.toB58String(),i=this._peerStats.get(r);i&&(i.stop(),this._peerStats.delete(r),this._oldPeers.set(r,i))}_onMessage({remotePeer:e,protocol:r,direction:i,dataLength:n}){if(!this._running)return;let s=S1t[i],o=this.forPeer(e);if(o||(o=new wR(_R,this._options),this._peerStats.set(e.toB58String(),o)),o.push(s,n),this._globalStats.push(s,n),r){let a=this.forProtocol(r);a||(a=new wR(_R,this._options),this._protocolStats.set(r,a)),a.push(s,n)}}updatePlaceholder(e,r){if(!this._running)return;let i=this.forPeer(e),n=r.toB58String(),s=this.forPeer(r),o=i;s&&(o=G8.mergeStats(s,o),this._oldPeers.delete(n)),this._peerStats.delete(e.toB58String()),this._peerStats.set(n,o),o.start()}trackStream({stream:e,remotePeer:r,protocol:i}){let n=this,s=e.source;e.source=_3e(a=>n._onMessage({remotePeer:r,protocol:i,direction:"in",dataLength:a.length}))(s);let o=e.sink;return e.sink=a=>w1t(a,_3e(c=>n._onMessage({remotePeer:r,protocol:i,direction:"out",dataLength:c.length})),o),e}static mergeStats(e,r){return e.stop(),r.stop(),e._queue=[...e._queue,...r._queue],e}};E3e.exports=G8});var ER=p((ELt,A3e)=>{l();"use strict";function x3e(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function x1t(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return x3e(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),x3e(new n,r)}}A3e.exports=x1t});var W8=p(jd=>{l();"use strict";var I3e=bn(),T3e=Xo(),A1t=Ir(),I1t=ER(),{fromString:T1t}=(ut(),lt),R1t=Ll(),R3e=T1t(`
`);jd.encode=t=>T3e.encode.single(new I3e([t,R3e]));jd.write=(t,e)=>t.push(jd.encode(e));jd.writeAll=(t,e)=>{t.push(e.reduce((r,i)=>r.append(jd.encode(i)),new I3e))};jd.read=async t=>{let e=1,r={[Symbol.asyncIterator](){return this},next:()=>t.next(e)},i=s=>{e=s},n=await A1t(r,T3e.decode({onLength:i}),R1t);if(n.get(n.length-1)!==R3e[0])throw I1t(new Error("missing newline"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return n.shallowSlice(0,-1)}});var C3e=p((xLt,P3e)=>{l();"use strict";var j1=be()("mss:select"),P1t=ER(),K1=W8(),C1t=N1();P3e.exports=async(t,e,r)=>{e=Array.isArray(e)?[...e]:[e];let{reader:i,writer:n,rest:s,stream:o}=C1t(t),a=e.shift();r?(j1('select: write ["%s", "%s"]',r,a),K1.writeAll(n,[r,a])):(j1('select: write "%s"',a),K1.write(n,a));let c=(await K1.read(i)).toString();if(j1('select: read "%s"',c),c===r&&(c=(await K1.read(i)).toString(),j1('select: read "%s"',c)),c===a)return s(),{stream:o,protocol:a};for(let u of e){j1('select: write "%s"',u),K1.write(n,u);let f=(await K1.read(i)).toString();if(j1('select: read "%s" for "%s"',f,u),f===u)return s(),{stream:o,protocol:u}}throw s(),P1t(new Error("protocol selection failed"),"ERR_UNSUPPORTED_PROTOCOL")}});var SR=p(O3e=>{l();"use strict";O3e.PROTOCOL_ID="/multistream/1.0.0"});var q3e=p((ILt,k3e)=>{l();"use strict";var o3=be()("mss:handle"),O1t=bn(),V1=W8(),k1t=N1(),{PROTOCOL_ID:xR}=SR();k3e.exports=async(t,e)=>{e=Array.isArray(e)?e:[e];let{writer:r,reader:i,rest:n,stream:s}=k1t(t);for(;;){let o=(await V1.read(i)).toString();if(o3('read "%s"',o),o===xR){o3('respond with "%s" for "%s"',xR,o),V1.write(r,xR);continue}if(e.includes(o))return V1.write(r,o),o3('respond with "%s" for "%s"',o,o),n(),{stream:s,protocol:o};if(o==="ls"){V1.write(r,new O1t(e.map(a=>V1.encode(a)))),o3('respond with "%s" for %s',e,o);continue}V1.write(r,"na"),o3('respond with "na" for "%s"',o)}}});var B3e=p((TLt,N3e)=>{l();"use strict";var q1t=E5(),D1t=be()("it-multistream-select:ls"),D3e=W8(),N1t=N1(),B1t=Xo(),M1t=Ir();N3e.exports=async t=>{let{reader:e,writer:r,rest:i,stream:n}=N1t(t);D1t('write "ls"'),D3e.write(r,"ls"),i();let s=await D3e.read(e),o=q1t([s]),a=[];return await M1t(o,B1t.decode(),async c=>{for await(let u of c)a.push(u.shallowSlice(0,-1).toString())}),{stream:n,protocols:a}}});var F3e=p(Y8=>{l();"use strict";var M3e=C3e(),L1t=q3e(),U1t=B3e(),{PROTOCOL_ID:AR}=SR();Y8.PROTOCOL_ID=AR;var IR=class{constructor(e){this._stream=e,this._shaken=!1}async _handshake(){if(this._shaken)return;let{stream:e}=await M3e(this._stream,AR);this._stream=e,this._shaken=!0}},L3e=class extends IR{select(e){return M3e(this._stream,e,this._shaken?null:AR)}async ls(){await this._handshake();let{stream:e,protocols:r}=await U1t(this._stream);return this._stream=e,r}};Y8.Dialer=L3e;var U3e=class extends IR{handle(e){return L1t(this._stream,e)}};Y8.Listener=U3e});var K3e=p((PLt,j3e)=>{l();"use strict";var F1t={OPEN:"open",CLOSING:"closing",CLOSED:"closed"};j3e.exports=F1t});var W3e=p((CLt,G3e)=>{l();"use strict";var V3e=tt(),{Multiaddr:j1t}=rt(),vs=NI(),{OPEN:K1t,CLOSING:z3e,CLOSED:TR}=K3e(),H3e=Symbol.for("@libp2p/interface-connection/connection"),$3e=class{constructor({localAddr:e,remoteAddr:r,localPeer:i,remotePeer:n,newStream:s,close:o,getStreams:a,stat:c}){V1t(e,i,n,s,o,a,c),this.id=parseInt(String(Math.random()*1e9)).toString(36)+Date.now(),this.localAddr=e,this.remoteAddr=r,this.localPeer=i,this.remotePeer=n,this._stat={...c,status:K1t},this._newStream=s,this._close=o,this._getStreams=a,this.registry=new Map,this.tags=[]}get[Symbol.toStringTag](){return"Connection"}get[H3e](){return!0}static isConnection(e){return Boolean(e&&e[H3e])}get stat(){return this._stat}get streams(){return this._getStreams()}async newStream(e){if(this.stat.status===z3e)throw vs(new Error("the connection is being closed"),"ERR_CONNECTION_BEING_CLOSED");if(this.stat.status===TR)throw vs(new Error("the connection is closed"),"ERR_CONNECTION_CLOSED");Array.isArray(e)||(e=[e]);let{stream:r,protocol:i}=await this._newStream(e);return this.addStream(r,{protocol:i}),{stream:r,protocol:i}}addStream(e,{protocol:r,metadata:i={}}){this.registry.set(e.id,{protocol:r,...i})}removeStream(e){this.registry.delete(e)}async close(){if(this.stat.status!==TR){if(this._closing)return this._closing;this.stat.status=z3e,this._closing=await this._close(),this._stat.timeline.close=Date.now(),this.stat.status=TR}}};G3e.exports=$3e;function V1t(t,e,r,i,n,s,o){if(t&&!j1t.isMultiaddr(t))throw vs(new Error("localAddr must be an instance of multiaddr"),"ERR_INVALID_PARAMETERS");if(!V3e.isPeerId(e))throw vs(new Error("localPeer must be an instance of peer-id"),"ERR_INVALID_PARAMETERS");if(!V3e.isPeerId(r))throw vs(new Error("remotePeer must be an instance of peer-id"),"ERR_INVALID_PARAMETERS");if(typeof i!="function")throw vs(new Error("new stream must be a function"),"ERR_INVALID_PARAMETERS");if(typeof n!="function")throw vs(new Error("close must be a function"),"ERR_INVALID_PARAMETERS");if(typeof s!="function")throw vs(new Error("getStreams must be a function"),"ERR_INVALID_PARAMETERS");if(!o)throw vs(new Error("connection metadata object must be provided"),"ERR_INVALID_PARAMETERS");if(o.direction!=="inbound"&&o.direction!=="outbound")throw vs(new Error('direction must be "inbound" or "outbound"'),"ERR_INVALID_PARAMETERS");if(!o.timeline)throw vs(new Error("connection timeline object must be provided in the stat object"),"ERR_INVALID_PARAMETERS");if(!o.timeline.open)throw vs(new Error("connection open timestamp must be provided"),"ERR_INVALID_PARAMETERS");if(!o.timeline.upgraded)throw vs(new Error("connection upgraded timestamp must be provided"),"ERR_INVALID_PARAMETERS")}});var X3e=p(Y3e=>{l();"use strict";Y3e.Connection=W3e()});var Z3e=p((kLt,Q3e)=>{l();"use strict";function z1t(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}else return Array.from(t)}Q3e.exports=function(e){var r=void 0,i=void 0;function n(a){if(!(a instanceof Object))throw new Error('Target "'+a+'" is not an object');i=a}function s(a){Object.keys(a).forEach(function(c){var u=a[c];if(typeof u!="function")throw new Error('Trap "'+c+": "+u+'" is not a function');if(!Reflect[c])throw new Error('Trap "'+c+": "+u+'" is not a valid trap')}),r=a}n(function(){}),e&&n(e),s(Reflect);var o=new Proxy({},{get:function(c,u){return function(){for(var f=arguments.length,d=Array(f),h=0;h<f;h++)d[h]=arguments[h];return r[u].apply(null,[i].concat(z1t(d.slice(1))))}}});return{setTarget:n,setHandler:s,getTarget:function(){return i},getHandler:function(){return r},proxy:new Proxy(i,o)}}});var i6e=p((qLt,r6e)=>{l();"use strict";var J3e=be(),Ii=Object.assign(J3e("libp2p:upgrader"),{error:J3e("libp2p:upgrader:err")}),Kd=lr(),z1=F3e(),{Connection:H1t}=X3e(),$1t=tt(),{pipe:G1t}=Ir(),e6e=Z3e(),{codes:H1}=yi(),t6e=class{constructor({localPeer:e,metrics:r,cryptos:i=new Map,muxers:n=new Map,onConnectionEnd:s=()=>{},onConnection:o=()=>{}}){this.localPeer=e,this.metrics=r,this.cryptos=i,this.muxers=n,this.protector=null,this.protocols=new Map,this.onConnection=o,this.onConnectionEnd=s}async upgradeInbound(e){let r,i,n,s,o,a,c;if(this.metrics){({setTarget:a,proxy:c}=e6e());let f=(Math.random()*1e9).toString(36)+Date.now();a({toB58String:()=>f}),e=this.metrics.trackStream({stream:e,remotePeer:c})}Ii("Starting the inbound connection upgrade");let u=e;this.protector&&(u=await this.protector.protect(e));try{({conn:r,remotePeer:i,protocol:o}=await this._encryptInbound(this.localPeer,u,this.cryptos)),this.muxers.size?{stream:n,Muxer:s}=await this._multiplexInbound(r,this.muxers):n=r}catch(f){throw Ii.error("Failed to upgrade inbound connection",f),await e.close(f),f}return this.metrics&&(this.metrics.updatePlaceholder(c,i),a(i)),Ii("Successfully upgraded inbound connection"),this._createConnection({cryptoProtocol:o,direction:"inbound",maConn:e,upgradedConn:n,Muxer:s,remotePeer:i})}async upgradeOutbound(e){let r=e.remoteAddr.getPeerId();if(!r)throw Kd(new Error("outbound connection must have a peer id"),H1.ERR_INVALID_MULTIADDR);let i=$1t.createFromB58String(r),n,s,o,a,c,u,f;if(this.metrics){({setTarget:u,proxy:f}=e6e());let h=(Math.random()*1e9).toString(36)+Date.now();u({toB58String:()=>h}),e=this.metrics.trackStream({stream:e,remotePeer:f})}Ii("Starting the outbound connection upgrade");let d=e;this.protector&&(d=await this.protector.protect(e));try{({conn:n,remotePeer:s,protocol:a}=await this._encryptOutbound(this.localPeer,d,i,this.cryptos)),this.muxers.size?{stream:o,Muxer:c}=await this._multiplexOutbound(n,this.muxers):o=n}catch(h){throw Ii.error("Failed to upgrade outbound connection",h),await e.close(h),h}return this.metrics&&(this.metrics.updatePlaceholder(f,s),u(s)),Ii("Successfully upgraded outbound connection"),this._createConnection({cryptoProtocol:a,direction:"outbound",maConn:e,upgradedConn:o,Muxer:c,remotePeer:s})}_createConnection({cryptoProtocol:e,direction:r,maConn:i,upgradedConn:n,Muxer:s,remotePeer:o}){let a,c,u;s&&(a=new s({onStream:async h=>{if(!u)return;let y=new z1.Listener(h);try{let{stream:g,protocol:m}=await y.handle(Array.from(this.protocols.keys()));Ii("%s: incoming stream opened on %s",r,m),this.metrics&&this.metrics.trackStream({stream:g,remotePeer:o,protocol:m}),u.addStream(h,{protocol:m}),this._onStream({connection:u,stream:{...h,...g},protocol:m})}catch(g){Ii.error(g)}},onStreamEnd:h=>{u.removeStream(h.id)}}),c=async h=>{Ii("%s: starting new stream on %s",r,h);let y=a.newStream(),g=new z1.Dialer(y);try{let{stream:m,protocol:E}=await g.select(h);return this.metrics&&this.metrics.trackStream({stream:m,remotePeer:o,protocol:E}),{stream:{...y,...m},protocol:E}}catch(m){throw Ii.error("could not create new stream",m),Kd(m,H1.ERR_UNSUPPORTED_PROTOCOL)}},G1t(n,a,n).catch(Ii.error));let f=i.timeline;i.timeline=new Proxy(f,{set:(...h)=>(u&&h[1]==="close"&&h[2]&&!f.close&&(async()=>{try{u.stat.status==="open"&&await u.close()}catch(y){Ii.error(y)}finally{this.onConnectionEnd(u)}})(),Reflect.set(...h))}),i.timeline.upgraded=Date.now();let d=()=>{throw Kd(new Error("connection is not multiplexed"),"ERR_CONNECTION_NOT_MULTIPLEXED")};return u=new H1t({localAddr:i.localAddr,remoteAddr:i.remoteAddr,localPeer:this.localPeer,remotePeer:o,stat:{direction:r,timeline:i.timeline,multiplexer:s&&s.multicodec,encryption:e},newStream:c||d,getStreams:()=>a?a.streams:d(),close:async()=>{await i.close(),a&&a.streams.map(h=>h.abort())}}),this.onConnection(u),u}_onStream({connection:e,stream:r,protocol:i}){this.protocols.get(i)({connection:e,stream:r,protocol:i})}async _encryptInbound(e,r,i){let n=new z1.Listener(r),s=Array.from(i.keys());Ii("handling inbound crypto protocol selection",s);try{let{stream:o,protocol:a}=await n.handle(s),c=i.get(a);if(Ii("encrypting inbound connection..."),!c)throw new Error(`no crypto module found for ${a}`);return{...await c.secureInbound(e,o),protocol:a}}catch(o){throw Kd(o,H1.ERR_ENCRYPTION_FAILED)}}async _encryptOutbound(e,r,i,n){let s=new z1.Dialer(r),o=Array.from(n.keys());Ii("selecting outbound crypto protocol",o);try{let{stream:a,protocol:c}=await s.select(o),u=n.get(c);if(Ii("encrypting outbound connection to %j",i),!u)throw new Error(`no crypto module found for ${c}`);return{...await u.secureOutbound(e,a,i),protocol:c}}catch(a){throw Kd(a,H1.ERR_ENCRYPTION_FAILED)}}async _multiplexOutbound(e,r){let i=new z1.Dialer(e),n=Array.from(r.keys());Ii("outbound selecting muxer %s",n);try{let{stream:s,protocol:o}=await i.select(n);Ii("%s selected as muxer protocol",o);let a=r.get(o);return{stream:s,Muxer:a}}catch(s){throw Kd(s,H1.ERR_MUXER_UNAVAILABLE)}}async _multiplexInbound(e,r){let i=new z1.Listener(e),n=Array.from(r.keys());Ii("inbound handling muxers %s",n);try{let{stream:s,protocol:o}=await i.handle(n),a=r.get(o);return{stream:s,Muxer:a}}catch(s){throw Kd(s,H1.ERR_MUXER_UNAVAILABLE)}}};r6e.exports=t6e});var a3=p((DLt,a6e)=>{l();"use strict";var RR=lr(),n6e=tt(),{codes:{ERR_INVALID_PARAMETERS:s6e}}=yi(),W1t=t=>t,o6e=class{constructor({peerStore:e,eventName:r,eventProperty:i,eventTransformer:n=W1t}){this._ps=e,this.eventName=r,this.eventProperty=i,this.eventTransformer=n,this.data=new Map}set(e,r){throw RR(new Error("set must be implemented by the subclass"),"ERR_NOT_IMPLEMENTED")}_setData(e,r,{emit:i=!0}={}){let n=e.toB58String();this.data.set(n,r),i&&this._emit(e,r)}_emit(e,r){this._ps.emit(this.eventName,{peerId:e,[this.eventProperty]:this.eventTransformer(r)})}get(e){if(!n6e.isPeerId(e))throw RR(new Error("peerId must be an instance of peer-id"),s6e);let r=this.data.get(e.toB58String());return r?[...r]:void 0}delete(e){if(!n6e.isPeerId(e))throw RR(new Error("peerId must be an instance of peer-id"),s6e);return this.data.delete(e.toB58String())?(this._emit(e,[]),!0):!1}};a6e.exports=o6e});var l6e=p((NLt,f6e)=>{l();"use strict";var c6e=be(),ra=Object.assign(c6e("libp2p:peer-store:address-book"),{error:c6e("libp2p:peer-store:address-book:err")}),$1=lr(),{Multiaddr:Y1t}=rt(),X8=tt(),X1t=a3(),Q1t=D8(),{codes:{ERR_INVALID_PARAMETERS:G1}}=yi(),Z1t=Gg(),u6e=class extends X1t{constructor(e){super({peerStore:e,eventName:"change:multiaddrs",eventProperty:"multiaddrs",eventTransformer:r=>r.addresses?r.addresses.map(i=>i.multiaddr):[]});this.data=new Map}consumePeerRecord(e){let r;try{r=Q1t.createFromProtobuf(e.payload)}catch(c){return ra.error("invalid peer record received"),!1}if(!r.peerId.equals(e.peerId))return ra("signing key does not match PeerId in the PeerRecord"),!1;if(!r.multiaddrs||!r.multiaddrs.length)return!1;let i=r.peerId,n=i.toB58String(),o=(this.data.get(n)||{record:void 0}).record;if(o&&o.seqNumber>=r.seqNumber)return!1;let a=this._toAddresses(r.multiaddrs,!0);return this._setData(i,{addresses:a,record:{raw:e.marshal(),seqNumber:r.seqNumber}}),ra(`stored provided peer record for ${n}`),!0}getRawEnvelope(e){let r=this.data.get(e.toB58String());if(!(!r||!r.record||!r.record.raw))return r.record.raw}getPeerRecord(e){let r=this.getRawEnvelope(e);if(!!r)return Z1t.createFromProtobuf(r)}set(e,r){if(!X8.isPeerId(e))throw ra.error("peerId must be an instance of peer-id to store data"),$1(new Error("peerId must be an instance of peer-id"),G1);let i=this._toAddresses(r);if(!i.length)return this;let n=e.toB58String(),s=this.data.get(n);return s&&s.addresses&&s.addresses.length===i.length&&s.addresses.filter(a=>i.some(c=>a.multiaddr.equals(c.multiaddr))).length===s.addresses.length?(ra(`the addresses provided to store are equal to the already stored for ${n}`),this):(this._setData(e,{addresses:i,record:s&&s.record}),ra(`stored provided multiaddrs for ${n}`),s||this._ps.emit("peer",e),this)}add(e,r){if(!X8.isPeerId(e))throw ra.error("peerId must be an instance of peer-id to store data"),$1(new Error("peerId must be an instance of peer-id"),G1);let i=this._toAddresses(r),n=e.toB58String();if(!i.length)return this;let s=this.data.get(n);return s&&s.addresses&&(s.addresses.forEach(o=>{i.find(a=>a.multiaddr.equals(o.multiaddr))||i.push(o)}),s.addresses.length===i.length)?(ra(`the addresses provided to store are already stored for ${n}`),this):(this._setData(e,{addresses:i,record:s&&s.record}),ra(`added provided multiaddrs for ${n}`),s&&s.addresses||this._ps.emit("peer",e),this)}get(e){if(!X8.isPeerId(e))throw $1(new Error("peerId must be an instance of peer-id"),G1);let r=this.data.get(e.toB58String());return r&&r.addresses?[...r.addresses]:void 0}_toAddresses(e,r=!1){if(!e)throw ra.error("multiaddrs must be provided to store data"),$1(new Error("multiaddrs must be provided"),G1);let i=[];return e.forEach(n=>{if(!Y1t.isMultiaddr(n))throw ra.error(`multiaddr ${n} must be an instance of multiaddr`),$1(new Error(`multiaddr ${n} must be an instance of multiaddr`),G1);i.find(s=>s.multiaddr.equals(n))||i.push({multiaddr:n,isCertified:r})}),i}getMultiaddrsForPeer(e,r=i=>i){if(!X8.isPeerId(e))throw $1(new Error("peerId must be an instance of peer-id"),G1);let i=this.data.get(e.toB58String());if(!(!i||!i.addresses))return r(i.addresses||[]).map(n=>{let s=n.multiaddr,o=s.getPeerId();return o&&o===e.toB58String()?s:s.encapsulate(`/p2p/${e.toB58String()}`)})}};f6e.exports=u6e});var v6e=p((BLt,m6e)=>{l();"use strict";var d6e=be(),h6e=Object.assign(d6e("libp2p:peer-store:key-book"),{error:d6e("libp2p:peer-store:key-book:err")}),p6e=lr(),y6e=tt(),J1t=a3(),{codes:{ERR_INVALID_PARAMETERS:g6e}}=yi(),b6e=class extends J1t{constructor(e){super({peerStore:e,eventName:"change:pubkey",eventProperty:"pubkey",eventTransformer:r=>r.pubKey});this.data=new Map}set(e,r){if(!y6e.isPeerId(e))throw h6e.error("peerId must be an instance of peer-id to store data"),p6e(new Error("peerId must be an instance of peer-id"),g6e);let i=e.toB58String();return!this.data.get(i)&&r&&(e.pubKey=r,this._setData(e,e),h6e(`stored provided public key for ${i}`)),this}get(e){if(!y6e.isPeerId(e))throw p6e(new Error("peerId must be an instance of peer-id"),g6e);let r=this.data.get(e.toB58String());return r?r.pubKey:void 0}};m6e.exports=b6e});var S6e=p((MLt,E6e)=>{l();"use strict";var w6e=be(),PR=Object.assign(w6e("libp2p:peer-store:proto-book"),{error:w6e("libp2p:peer-store:proto-book:err")}),W1=lr(),{equals:ept}=(di(),li),c3=tt(),tpt=a3(),{codes:{ERR_INVALID_PARAMETERS:Y1}}=yi(),_6e=class extends tpt{constructor(e){super({peerStore:e,eventName:"change:metadata",eventProperty:"metadata"});this.data=new Map}set(e,r,i){if(!c3.isPeerId(e))throw PR.error("peerId must be an instance of peer-id to store data"),W1(new Error("peerId must be an instance of peer-id"),Y1);if(typeof r!="string"||!(i instanceof Uint8Array))throw PR.error("valid key and value must be provided to store data"),W1(new Error("valid key and value must be provided"),Y1);return this._setValue(e,r,i),this}_setValue(e,r,i,{emit:n=!0}={}){let s=e.toB58String(),o=this.data.get(s)||new Map,a=o.get(r);if(a&&ept(i,a)){PR(`the metadata provided to store is equal to the already stored for ${s} on ${r}`);return}o.set(r,i),this.data.set(s,o),n&&this._emit(e,r)}get(e){if(!c3.isPeerId(e))throw W1(new Error("peerId must be an instance of peer-id"),Y1);return this.data.get(e.toB58String())}getValue(e,r){if(!c3.isPeerId(e))throw W1(new Error("peerId must be an instance of peer-id"),Y1);let i=this.data.get(e.toB58String());return i&&i.get(r)}delete(e){if(!c3.isPeerId(e))throw W1(new Error("peerId must be an instance of peer-id"),Y1);return this.data.delete(e.toB58String())?(this._emit(e),!0):!1}deleteValue(e,r){if(!c3.isPeerId(e))throw W1(new Error("peerId must be an instance of peer-id"),Y1);let i=this.data.get(e.toB58String());return!i||!i.delete(r)?!1:(this._emit(e,r),!0)}};E6e.exports=_6e});var T6e=p((LLt,I6e)=>{l();"use strict";var x6e=be(),ia=Object.assign(x6e("libp2p:peer-store:proto-book"),{error:x6e("libp2p:peer-store:proto-book:err")}),X1=lr(),CR=tt(),rpt=a3(),{codes:{ERR_INVALID_PARAMETERS:Q1}}=yi(),A6e=class extends rpt{constructor(e){super({peerStore:e,eventName:"change:protocols",eventProperty:"protocols",eventTransformer:r=>Array.from(r)});this.data=new Map}set(e,r){if(!CR.isPeerId(e))throw ia.error("peerId must be an instance of peer-id to store data"),X1(new Error("peerId must be an instance of peer-id"),Q1);if(!r)throw ia.error("protocols must be provided to store data"),X1(new Error("protocols must be provided"),Q1);let i=e.toB58String(),n=this.data.get(i),s=new Set(r);return n&&((a,c)=>a.size===c.size&&[...a].every(u=>c.has(u)))(n,s)?(ia(`the protocols provided to store are equal to the already stored for ${i}`),this):(this._setData(e,s),ia(`stored provided protocols for ${i}`),this)}add(e,r){if(!CR.isPeerId(e))throw ia.error("peerId must be an instance of peer-id to store data"),X1(new Error("peerId must be an instance of peer-id"),Q1);if(!r)throw ia.error("protocols must be provided to store data"),X1(new Error("protocols must be provided"),Q1);let i=e.toB58String(),n=this.data.get(i)||new Set,s=new Set([...n,...r]);return n.size===s.size?(ia(`the protocols provided to store are already stored for ${i}`),this):(this._setData(e,s),ia(`added provided protocols for ${i}`),this)}remove(e,r){if(!CR.isPeerId(e))throw ia.error("peerId must be an instance of peer-id to store data"),X1(new Error("peerId must be an instance of peer-id"),Q1);if(!r)throw ia.error("protocols must be provided to store data"),X1(new Error("protocols must be provided"),Q1);let i=e.toB58String(),n=this.data.get(i);if(n){let s=new Set([...n].filter(o=>!r.includes(o)));if(n.size===s.size)return this;this._setData(e,s),ia(`removed provided protocols for ${i}`)}return this}};I6e.exports=A6e});var OR=p((ULt,C6e)=>{l();"use strict";var ipt=lr(),{EventEmitter:npt}=gr(),R6e=tt(),spt=l6e(),opt=v6e(),apt=S6e(),cpt=T6e(),{codes:{ERR_INVALID_PARAMETERS:upt}}=yi(),P6e=class extends npt{constructor({peerId:e}){super();this._peerId=e,this.addressBook=new spt(this),this.keyBook=new opt(this),this.metadataBook=new apt(this),this.protoBook=new cpt(this)}start(){}stop(){}get peers(){let e=new Set([...this.addressBook.data.keys(),...this.keyBook.data.keys(),...this.protoBook.data.keys(),...this.metadataBook.data.keys()]);this._peerId&&e.delete(this._peerId.toB58String());let r=new Map;return e.forEach(i=>{r.set(i,this.get(R6e.createFromB58String(i)))}),r}delete(e){let r=this.addressBook.delete(e),i=this.keyBook.delete(e),n=this.protoBook.delete(e),s=this.metadataBook.delete(e);return r||i||n||s}get(e){if(!R6e.isPeerId(e))throw ipt(new Error("peerId must be an instance of peer-id"),upt);let r=this.keyBook.data.get(e.toB58String()),i=this.addressBook.get(e),n=this.metadataBook.get(e),s=this.protoBook.get(e);if(!(!r&&!i&&!n&&!s))return{id:r||e,addresses:i||[],protocols:s||[],metadata:n}}};C6e.exports=P6e});var k6e=p((FLt,O6e)=>{l();"use strict";function fpt(t,e,r){let i=new t(e,r);i._subscribeAdapter=i.subscribe,i._unsubscribeAdapter=i.unsubscribe;function n(o,a){a&&i.on(o,a),i._subscribeAdapter(o)}function s(o,a){a?i.removeListener(o,a):i.removeAllListeners(o),i.listenerCount(o)===0&&i._unsubscribeAdapter(o)}return i.subscribe=n,i.unsubscribe=s,i}O6e.exports=fpt});var q6e=p((jLt,Z1)=>{l();"use strict";Z1.exports.NAMESPACE_COMMON="/peers/";Z1.exports.NAMESPACE_ADDRESS="/peers/addrs/";Z1.exports.NAMESPACE_KEYS="/peers/keys/";Z1.exports.NAMESPACE_METADATA="/peers/metadata/";Z1.exports.NAMESPACE_PROTOCOL="/peers/protos/"});var N6e=p((KLt,D6e)=>{l();"use strict";var Xf=qi(),J1=Xf.Reader,kR=Xf.Writer,Yr=Xf.util,Ti=Xf.roots["libp2p-address-book"]||(Xf.roots["libp2p-address-book"]={});Ti.Addresses=function(){function t(e){if(this.addrs=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.addrs=Yr.emptyArray,t.prototype.certifiedRecord=null,t.encode=function(r,i){if(i||(i=kR.create()),r.addrs!=null&&r.addrs.length)for(var n=0;n<r.addrs.length;++n)Ti.Addresses.Address.encode(r.addrs[n],i.uint32(10).fork()).ldelim();return r.certifiedRecord!=null&&Object.hasOwnProperty.call(r,"certifiedRecord")&&Ti.Addresses.CertifiedRecord.encode(r.certifiedRecord,i.uint32(18).fork()).ldelim(),i},t.decode=function(r,i){r instanceof J1||(r=J1.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Ti.Addresses;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.addrs&&s.addrs.length||(s.addrs=[]),s.addrs.push(Ti.Addresses.Address.decode(r,r.uint32()));break;case 2:s.certifiedRecord=Ti.Addresses.CertifiedRecord.decode(r,r.uint32());break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof Ti.Addresses)return r;var i=new Ti.Addresses;if(r.addrs){if(!Array.isArray(r.addrs))throw TypeError(".Addresses.addrs: array expected");i.addrs=[];for(var n=0;n<r.addrs.length;++n){if(typeof r.addrs[n]!="object")throw TypeError(".Addresses.addrs: object expected");i.addrs[n]=Ti.Addresses.Address.fromObject(r.addrs[n])}}if(r.certifiedRecord!=null){if(typeof r.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");i.certifiedRecord=Ti.Addresses.CertifiedRecord.fromObject(r.certifiedRecord)}return i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.addrs=[]),i.defaults&&(n.certifiedRecord=null),r.addrs&&r.addrs.length){n.addrs=[];for(var s=0;s<r.addrs.length;++s)n.addrs[s]=Ti.Addresses.Address.toObject(r.addrs[s],i)}return r.certifiedRecord!=null&&r.hasOwnProperty("certifiedRecord")&&(n.certifiedRecord=Ti.Addresses.CertifiedRecord.toObject(r.certifiedRecord,i)),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Xf.util.toJSONOptions)},t.Address=function(){function e(r){if(r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.multiaddr=Yr.newBuffer([]),e.prototype.isCertified=!1,e.encode=function(i,n){return n||(n=kR.create()),i.multiaddr!=null&&Object.hasOwnProperty.call(i,"multiaddr")&&n.uint32(10).bytes(i.multiaddr),i.isCertified!=null&&Object.hasOwnProperty.call(i,"isCertified")&&n.uint32(16).bool(i.isCertified),n},e.decode=function(i,n){i instanceof J1||(i=J1.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new Ti.Addresses.Address;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.multiaddr=i.bytes();break;case 2:o.isCertified=i.bool();break;default:i.skipType(a&7);break}}return o},e.fromObject=function(i){if(i instanceof Ti.Addresses.Address)return i;var n=new Ti.Addresses.Address;return i.multiaddr!=null&&(typeof i.multiaddr=="string"?Yr.base64.decode(i.multiaddr,n.multiaddr=Yr.newBuffer(Yr.base64.length(i.multiaddr)),0):i.multiaddr.length&&(n.multiaddr=i.multiaddr)),i.isCertified!=null&&(n.isCertified=Boolean(i.isCertified)),n},e.toObject=function(i,n){n||(n={});var s={};return n.defaults&&(n.bytes===String?s.multiaddr="":(s.multiaddr=[],n.bytes!==Array&&(s.multiaddr=Yr.newBuffer(s.multiaddr))),s.isCertified=!1),i.multiaddr!=null&&i.hasOwnProperty("multiaddr")&&(s.multiaddr=n.bytes===String?Yr.base64.encode(i.multiaddr,0,i.multiaddr.length):n.bytes===Array?Array.prototype.slice.call(i.multiaddr):i.multiaddr),i.isCertified!=null&&i.hasOwnProperty("isCertified")&&(s.isCertified=i.isCertified),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Xf.util.toJSONOptions)},e}(),t.CertifiedRecord=function(){function e(r){if(r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.seq=Yr.Long?Yr.Long.fromBits(0,0,!0):0,e.prototype.raw=Yr.newBuffer([]),e.encode=function(i,n){return n||(n=kR.create()),i.seq!=null&&Object.hasOwnProperty.call(i,"seq")&&n.uint32(8).uint64(i.seq),i.raw!=null&&Object.hasOwnProperty.call(i,"raw")&&n.uint32(18).bytes(i.raw),n},e.decode=function(i,n){i instanceof J1||(i=J1.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new Ti.Addresses.CertifiedRecord;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.seq=i.uint64();break;case 2:o.raw=i.bytes();break;default:i.skipType(a&7);break}}return o},e.fromObject=function(i){if(i instanceof Ti.Addresses.CertifiedRecord)return i;var n=new Ti.Addresses.CertifiedRecord;return i.seq!=null&&(Yr.Long?(n.seq=Yr.Long.fromValue(i.seq)).unsigned=!0:typeof i.seq=="string"?n.seq=parseInt(i.seq,10):typeof i.seq=="number"?n.seq=i.seq:typeof i.seq=="object"&&(n.seq=new Yr.LongBits(i.seq.low>>>0,i.seq.high>>>0).toNumber(!0))),i.raw!=null&&(typeof i.raw=="string"?Yr.base64.decode(i.raw,n.raw=Yr.newBuffer(Yr.base64.length(i.raw)),0):i.raw.length&&(n.raw=i.raw)),n},e.toObject=function(i,n){n||(n={});var s={};if(n.defaults){if(Yr.Long){var o=new Yr.Long(0,0,!0);s.seq=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else s.seq=n.longs===String?"0":0;n.bytes===String?s.raw="":(s.raw=[],n.bytes!==Array&&(s.raw=Yr.newBuffer(s.raw)))}return i.seq!=null&&i.hasOwnProperty("seq")&&(typeof i.seq=="number"?s.seq=n.longs===String?String(i.seq):i.seq:s.seq=n.longs===String?Yr.Long.prototype.toString.call(i.seq):n.longs===Number?new Yr.LongBits(i.seq.low>>>0,i.seq.high>>>0).toNumber(!0):i.seq),i.raw!=null&&i.hasOwnProperty("raw")&&(s.raw=n.bytes===String?Yr.base64.encode(i.raw,0,i.raw.length):n.bytes===Array?Array.prototype.slice.call(i.raw):i.raw),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Xf.util.toJSONOptions)},e}(),t}();D6e.exports=Ti});var L6e=p((VLt,M6e)=>{l();"use strict";var ep=qi(),B6e=ep.Reader,lpt=ep.Writer,dpt=ep.util,u3=ep.roots["libp2p-proto-book"]||(ep.roots["libp2p-proto-book"]={});u3.Protocols=function(){function t(e){if(this.protocols=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.protocols=dpt.emptyArray,t.encode=function(r,i){if(i||(i=lpt.create()),r.protocols!=null&&r.protocols.length)for(var n=0;n<r.protocols.length;++n)i.uint32(10).string(r.protocols[n]);return i},t.decode=function(r,i){r instanceof B6e||(r=B6e.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new u3.Protocols;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.protocols&&s.protocols.length||(s.protocols=[]),s.protocols.push(r.string());break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof u3.Protocols)return r;var i=new u3.Protocols;if(r.protocols){if(!Array.isArray(r.protocols))throw TypeError(".Protocols.protocols: array expected");i.protocols=[];for(var n=0;n<r.protocols.length;++n)i.protocols[n]=String(r.protocols[n])}return i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.protocols=[]),r.protocols&&r.protocols.length){n.protocols=[];for(var s=0;s<r.protocols.length;++s)n.protocols[s]=r.protocols[s]}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,ep.util.toJSONOptions)},t}();M6e.exports=u3});var z6e=p((zLt,V6e)=>{l();"use strict";var U6e=be(),Gi=Object.assign(U6e("libp2p:persistent-peer-store"),{error:U6e("libp2p:persistent-peer-store:err")}),{Key:Q8}=Ut(),{Multiaddr:hpt}=rt(),qR=tt(),{base32:ppt}=(an(),on),ypt=OR(),{NAMESPACE_ADDRESS:gpt,NAMESPACE_COMMON:bpt,NAMESPACE_KEYS:mpt,NAMESPACE_METADATA:vpt,NAMESPACE_PROTOCOL:wpt}=q6e(),{Addresses:F6e}=N6e(),{Protocols:j6e}=L6e(),K6e=class extends ypt{constructor({peerId:e,datastore:r,threshold:i=5}){super({peerId:e});this._datastore=r,this._dirtyPeers=new Set,this._dirtyMetadata=new Map,this.threshold=i,this._addDirtyPeer=this._addDirtyPeer.bind(this)}async start(){Gi("PeerStore is starting"),this.on("change:protocols",this._addDirtyPeer),this.on("change:multiaddrs",this._addDirtyPeer),this.on("change:pubkey",this._addDirtyPeerKey),this.on("change:metadata",this._addDirtyPeerMetadata);for await(let e of this._datastore.query({prefix:bpt}))await this._processDatastoreEntry(e);Gi("PeerStore started")}async stop(){Gi("PeerStore is stopping"),this.removeAllListeners(),await this._commitData(),Gi("PeerStore stopped")}_addDirtyPeer({peerId:e}){let r=e.toB58String();Gi("add dirty peer",r),this._dirtyPeers.add(r),this._dirtyPeers.size>=this.threshold&&this._commitData().catch(i=>{Gi.error("error committing data",i)})}_addDirtyPeerKey({peerId:e}){if(e.hasInlinePublicKey())return;let r=e.toB58String();Gi("add dirty peer key",r),this._dirtyPeers.add(r),this._dirtyPeers.size>=this.threshold&&this._commitData().catch(i=>{Gi.error("error committing data",i)})}_addDirtyPeerMetadata({peerId:e,metadata:r}){let i=e.toB58String();Gi("add dirty metadata peer",i),this._dirtyPeers.add(i);let n=this._dirtyMetadata.get(i)||new Set;n.add(r),this._dirtyMetadata.set(i,n),this._dirtyPeers.size>=this.threshold&&this._commitData().catch(s=>{Gi.error("error committing data",s)})}async _commitData(){let e=Array.from(this._dirtyPeers);if(!e.length)return;this._dirtyPeers.clear(),Gi("create batch commit");let r=this._datastore.batch();for(let i of e){let n=this.keyBook.data.get(i)||qR.createFromB58String(i);this._batchAddressBook(n,r),!n.hasInlinePublicKey()&&this._batchKeyBook(n,r),this._batchMetadataBook(n,r),this._batchProtoBook(n,r)}await r.commit(),Gi("batch committed")}_batchAddressBook(e,r){let i=e.toString(),n=new Q8(`${gpt}${i}`),s=this.addressBook.data.get(e.toB58String());try{if(!s){r.delete(n);return}let o=F6e.encode({addrs:s.addresses.map(a=>({multiaddr:a.multiaddr.bytes,isCertified:a.isCertified})),certifiedRecord:s.record?{seq:s.record.seqNumber,raw:s.record.raw}:void 0}).finish();r.put(n,o)}catch(o){Gi.error(o)}}_batchKeyBook(e,r){let i=e.toString(),n=new Q8(`${mpt}${i}`);try{if(!e.pubKey){r.delete(n);return}let s=e.marshalPubKey();r.put(n,s)}catch(s){Gi.error(s)}}_batchMetadataBook(e,r){let i=e.toString(),n=this._dirtyMetadata.get(e.toB58String())||[];try{n.forEach(s=>{let o=new Q8(`${vpt}${i}/${s}`),a=this.metadataBook.getValue(e,s);a?r.put(o,a):r.delete(o)})}catch(s){Gi.error(s)}}_batchProtoBook(e,r){let i=e.toString(),n=new Q8(`${wpt}${i}`),s=this.protoBook.get(e);try{if(!s){r.delete(n);return}let o=j6e.encode({protocols:s}).finish();r.put(n,o)}catch(o){Gi.error(o)}}async _processDatastoreEntry({key:e,value:r}){try{let i=e.toString().split("/"),n=qR.createFromBytes(ppt.decode(i[3])),s;switch(i[2]){case"addrs":s=F6e.decode(r),this.addressBook._setData(n,{addresses:s.addrs.map(o=>({multiaddr:new hpt(o.multiaddr),isCertified:Boolean(o.isCertified)})),record:s.certifiedRecord?{raw:s.certifiedRecord.raw,seqNumber:s.certifiedRecord.seq}:void 0},{emit:!1});break;case"keys":s=await qR.createFromPubKey(r),this.keyBook._setData(s,s,{emit:!1});break;case"metadata":this.metadataBook._setValue(n,i[4],r,{emit:!1});break;case"protos":s=j6e.decode(r),this.protoBook._setData(n,new Set(s.protocols),{emit:!1});break;default:Gi("invalid data persisted for: ",e.toString())}}catch(i){Gi.error(i)}}};V6e.exports=K6e});var W6e=p((HLt,G6e)=>{l();"use strict";var H6e=be(),_pt=Object.assign(H6e("libp2p:registrar"),{error:H6e("libp2p:registrar:err")}),Ept=lr(),{codes:{ERR_INVALID_PARAMETERS:Spt}}=yi(),xpt=BI(),$6e=class{constructor({peerStore:e,connectionManager:r}){this.peerStore=e,this.connectionManager=r,this.topologies=new Map,this._handle=void 0,this._onDisconnect=this._onDisconnect.bind(this),this.connectionManager.on("peer:disconnect",this._onDisconnect)}get handle(){return this._handle}set handle(e){this._handle=e}getConnection(e){return this.connectionManager.get(e)}register(e){if(!xpt.isTopology(e))throw _pt.error("topology must be an instance of interfaces/topology"),Ept(new Error("topology must be an instance of interfaces/topology"),Spt);let r=(Math.random()*1e9).toString(36)+Date.now();return this.topologies.set(r,e),e.registrar=this,r}unregister(e){return this.topologies.delete(e)}_onDisconnect(e){for(let[,r]of this.topologies)r.disconnect(e.remotePeer)}};G6e.exports=$6e});var ev=p(($Lt,f3)=>{l();"use strict";var{Buffer:Z8}=Vt(),J8=bn();f3.exports=async function*(t){for await(let e of t)Z8.isBuffer(e)?yield e:J8.isBufferList(e)?yield e.slice():yield Z8.from(e)};f3.exports.toBuffer=f3.exports;f3.exports.toList=async function*(t){for await(let e of t)Z8.isBuffer(e)?yield new J8().append(e):J8.isBufferList(e)?yield e:yield new J8().append(Z8.from(e))}});var X6e=p((GLt,Y6e)=>{l();"use strict";Y6e.exports={PROTOCOL:"/ipfs/ping/1.0.0",PING_LENGTH:32,PROTOCOL_VERSION:"1.0.0",PROTOCOL_NAME:"ping"}});var e4e=p((tv,J6e)=>{l();"use strict";var Q6e=be(),Apt=Object.assign(Q6e("libp2p:ping"),{error:Q6e("libp2p:ping:err")}),Ipt=lr(),Tpt=La(),{pipe:Z6e}=Ir(),{toBuffer:Rpt}=ev(),{collect:Ppt,take:Cpt}=M0(),{equals:Opt}=(di(),li),{PROTOCOL_NAME:DR,PING_LENGTH:kpt,PROTOCOL_VERSION:NR}=X6e();async function qpt(t,e){let r=`/${t._config.protocolPrefix}/${DR}/${NR}`;Apt("dialing %s to %s",r,e.toB58String?e.toB58String():e);let i=await t.dial(e),{stream:n}=await i.newStream(r),s=Date.now(),o=Tpt.randomBytes(kpt),[a]=await Z6e([o],n,u=>Cpt(1,u),Rpt,Ppt),c=Date.now();if(!Opt(o,a))throw Ipt(new Error("Received wrong ping ack"),"ERR_WRONG_PING_ACK");return c-s}function Dpt(t){t.handle(`/${t._config.protocolPrefix}/${DR}/${NR}`,({stream:e})=>Z6e(e,e))}function Npt(t){t.unhandle(`/${t._config.protocolPrefix}/${DR}/${NR}`)}tv=J6e.exports=qpt;tv.mount=Dpt;tv.unmount=Npt});var i4e=p((WLt,r4e)=>{l();"use strict";var tp=qi(),t4e=tp.Reader,Bpt=tp.Writer,xr=tp.util,l3=tp.roots["libp2p-identify"]||(tp.roots["libp2p-identify"]={});l3.Identify=function(){function t(e){if(this.listenAddrs=[],this.protocols=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.protocolVersion="",t.prototype.agentVersion="",t.prototype.publicKey=xr.newBuffer([]),t.prototype.listenAddrs=xr.emptyArray,t.prototype.observedAddr=xr.newBuffer([]),t.prototype.protocols=xr.emptyArray,t.prototype.signedPeerRecord=xr.newBuffer([]),t.encode=function(r,i){if(i||(i=Bpt.create()),r.publicKey!=null&&Object.hasOwnProperty.call(r,"publicKey")&&i.uint32(10).bytes(r.publicKey),r.listenAddrs!=null&&r.listenAddrs.length)for(var n=0;n<r.listenAddrs.length;++n)i.uint32(18).bytes(r.listenAddrs[n]);if(r.protocols!=null&&r.protocols.length)for(var n=0;n<r.protocols.length;++n)i.uint32(26).string(r.protocols[n]);return r.observedAddr!=null&&Object.hasOwnProperty.call(r,"observedAddr")&&i.uint32(34).bytes(r.observedAddr),r.protocolVersion!=null&&Object.hasOwnProperty.call(r,"protocolVersion")&&i.uint32(42).string(r.protocolVersion),r.agentVersion!=null&&Object.hasOwnProperty.call(r,"agentVersion")&&i.uint32(50).string(r.agentVersion),r.signedPeerRecord!=null&&Object.hasOwnProperty.call(r,"signedPeerRecord")&&i.uint32(66).bytes(r.signedPeerRecord),i},t.decode=function(r,i){r instanceof t4e||(r=t4e.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new l3.Identify;r.pos<n;){var o=r.uint32();switch(o>>>3){case 5:s.protocolVersion=r.string();break;case 6:s.agentVersion=r.string();break;case 1:s.publicKey=r.bytes();break;case 2:s.listenAddrs&&s.listenAddrs.length||(s.listenAddrs=[]),s.listenAddrs.push(r.bytes());break;case 4:s.observedAddr=r.bytes();break;case 3:s.protocols&&s.protocols.length||(s.protocols=[]),s.protocols.push(r.string());break;case 8:s.signedPeerRecord=r.bytes();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof l3.Identify)return r;var i=new l3.Identify;if(r.protocolVersion!=null&&(i.protocolVersion=String(r.protocolVersion)),r.agentVersion!=null&&(i.agentVersion=String(r.agentVersion)),r.publicKey!=null&&(typeof r.publicKey=="string"?xr.base64.decode(r.publicKey,i.publicKey=xr.newBuffer(xr.base64.length(r.publicKey)),0):r.publicKey.length&&(i.publicKey=r.publicKey)),r.listenAddrs){if(!Array.isArray(r.listenAddrs))throw TypeError(".Identify.listenAddrs: array expected");i.listenAddrs=[];for(var n=0;n<r.listenAddrs.length;++n)typeof r.listenAddrs[n]=="string"?xr.base64.decode(r.listenAddrs[n],i.listenAddrs[n]=xr.newBuffer(xr.base64.length(r.listenAddrs[n])),0):r.listenAddrs[n].length&&(i.listenAddrs[n]=r.listenAddrs[n])}if(r.observedAddr!=null&&(typeof r.observedAddr=="string"?xr.base64.decode(r.observedAddr,i.observedAddr=xr.newBuffer(xr.base64.length(r.observedAddr)),0):r.observedAddr.length&&(i.observedAddr=r.observedAddr)),r.protocols){if(!Array.isArray(r.protocols))throw TypeError(".Identify.protocols: array expected");i.protocols=[];for(var n=0;n<r.protocols.length;++n)i.protocols[n]=String(r.protocols[n])}return r.signedPeerRecord!=null&&(typeof r.signedPeerRecord=="string"?xr.base64.decode(r.signedPeerRecord,i.signedPeerRecord=xr.newBuffer(xr.base64.length(r.signedPeerRecord)),0):r.signedPeerRecord.length&&(i.signedPeerRecord=r.signedPeerRecord)),i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.listenAddrs=[],n.protocols=[]),i.defaults&&(i.bytes===String?n.publicKey="":(n.publicKey=[],i.bytes!==Array&&(n.publicKey=xr.newBuffer(n.publicKey))),i.bytes===String?n.observedAddr="":(n.observedAddr=[],i.bytes!==Array&&(n.observedAddr=xr.newBuffer(n.observedAddr))),n.protocolVersion="",n.agentVersion="",i.bytes===String?n.signedPeerRecord="":(n.signedPeerRecord=[],i.bytes!==Array&&(n.signedPeerRecord=xr.newBuffer(n.signedPeerRecord)))),r.publicKey!=null&&r.hasOwnProperty("publicKey")&&(n.publicKey=i.bytes===String?xr.base64.encode(r.publicKey,0,r.publicKey.length):i.bytes===Array?Array.prototype.slice.call(r.publicKey):r.publicKey),r.listenAddrs&&r.listenAddrs.length){n.listenAddrs=[];for(var s=0;s<r.listenAddrs.length;++s)n.listenAddrs[s]=i.bytes===String?xr.base64.encode(r.listenAddrs[s],0,r.listenAddrs[s].length):i.bytes===Array?Array.prototype.slice.call(r.listenAddrs[s]):r.listenAddrs[s]}if(r.protocols&&r.protocols.length){n.protocols=[];for(var s=0;s<r.protocols.length;++s)n.protocols[s]=r.protocols[s]}return r.observedAddr!=null&&r.hasOwnProperty("observedAddr")&&(n.observedAddr=i.bytes===String?xr.base64.encode(r.observedAddr,0,r.observedAddr.length):i.bytes===Array?Array.prototype.slice.call(r.observedAddr):r.observedAddr),r.protocolVersion!=null&&r.hasOwnProperty("protocolVersion")&&(n.protocolVersion=r.protocolVersion),r.agentVersion!=null&&r.hasOwnProperty("agentVersion")&&(n.agentVersion=r.agentVersion),r.signedPeerRecord!=null&&r.hasOwnProperty("signedPeerRecord")&&(n.signedPeerRecord=i.bytes===String?xr.base64.encode(r.signedPeerRecord,0,r.signedPeerRecord.length):i.bytes===Array?Array.prototype.slice.call(r.signedPeerRecord):r.signedPeerRecord),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,tp.util.toJSONOptions)},t}();r4e.exports=l3});var d4e=p((YLt,l4e)=>{l();"use strict";var n4e=be(),uc=Object.assign(n4e("libp2p:identify"),{error:n4e("libp2p:identify:err")}),BR=lr(),rv=Xo(),{pipe:iv}=Ir(),{collect:s4e,take:o4e,consume:a4e}=M0(),{fromString:rp}=(ut(),lt),Mpt=tt(),{Multiaddr:MR}=rt(),{toBuffer:c4e}=ev(),d3=i4e(),u4e=Gg(),f4e=D8(),{MULTICODEC_IDENTIFY:Lpt,MULTICODEC_IDENTIFY_PUSH:Upt,IDENTIFY_PROTOCOL_VERSION:Fpt,MULTICODEC_IDENTIFY_PROTOCOL_NAME:jpt,MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME:Kpt,MULTICODEC_IDENTIFY_PROTOCOL_VERSION:Vpt,MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION:zpt}=UT(),{codes:LR}=yi(),Vd=class{static getProtocolStr(e){return{identifyProtocolStr:`/${e._config.protocolPrefix}/${jpt}/${Vpt}`,identifyPushProtocolStr:`/${e._config.protocolPrefix}/${Kpt}/${zpt}`}}constructor({libp2p:e}){this._libp2p=e,this.peerStore=e.peerStore,this.addressManager=e.addressManager,this.connectionManager=e.connectionManager,this.peerId=e.peerId,this.handleMessage=this.handleMessage.bind(this);let r=Vd.getProtocolStr(e);this.identifyProtocolStr=r.identifyProtocolStr,this.identifyPushProtocolStr=r.identifyPushProtocolStr,this._host={protocolVersion:`${e._config.protocolPrefix}/${Fpt}`,...e._options.host},this.peerStore.metadataBook.set(this.peerId,"AgentVersion",rp(this._host.agentVersion)),this.peerStore.metadataBook.set(this.peerId,"ProtocolVersion",rp(this._host.protocolVersion)),this.connectionManager.on("peer:connect",i=>{this.identify(i).catch(uc.error)}),this.peerStore.on("change:multiaddrs",({peerId:i})=>{i.toString()===this.peerId.toString()&&this.pushToPeerStore()}),this.peerStore.on("change:protocols",({peerId:i})=>{i.toString()===this.peerId.toString()&&this.pushToPeerStore()})}async push(e){let r=await this.peerStore.addressBook.getRawEnvelope(this.peerId),i=this._libp2p.multiaddrs.map(o=>o.bytes),n=this.peerStore.protoBook.get(this.peerId)||[],s=e.map(async o=>{try{let{stream:a}=await o.newStream(this.identifyPushProtocolStr);await iv([d3.Identify.encode({listenAddrs:i,signedPeerRecord:r,protocols:n}).finish()],rv.encode(),a,a4e)}catch(a){uc.error("could not push identify update to peer",a)}});return Promise.all(s)}pushToPeerStore(){if(!this._libp2p.isStarted())return;let e=[],r;for(let i of this.peerStore.peers.values())i.protocols.includes(this.identifyPushProtocolStr)&&(r=this.connectionManager.get(i.id))&&e.push(r);this.push(e)}async identify(e){let{stream:r}=await e.newStream(this.identifyProtocolStr),[i]=await iv([],r,rv.decode(),o4e(1),c4e,s4e);if(!i)throw BR(new Error("No data could be retrieved"),LR.ERR_CONNECTION_ENDED);let n;try{n=d3.Identify.decode(i)}catch(h){throw BR(h,LR.ERR_INVALID_MESSAGE)}let{publicKey:s,listenAddrs:o,protocols:a,observedAddr:c,signedPeerRecord:u}=n,f=await Mpt.createFromPubKey(s);if(e.remotePeer.toB58String()!==f.toB58String())throw BR(new Error("identified peer does not match the expected peer"),LR.ERR_INVALID_PEER);let d=Vd.getCleanMultiaddr(c);try{let h=await u4e.openAndCertify(u,f4e.DOMAIN);if(this.peerStore.addressBook.consumePeerRecord(h)){this.peerStore.protoBook.set(f,a),this.peerStore.metadataBook.set(f,"AgentVersion",rp(n.agentVersion)),this.peerStore.metadataBook.set(f,"ProtocolVersion",rp(n.protocolVersion));return}}catch(h){uc("received invalid envelope, discard it and fallback to listenAddrs is available",h)}try{this.peerStore.addressBook.set(f,o.map(h=>new MR(h)))}catch(h){uc.error("received invalid addrs",h)}this.peerStore.protoBook.set(f,a),this.peerStore.metadataBook.set(f,"AgentVersion",rp(n.agentVersion)),this.peerStore.metadataBook.set(f,"ProtocolVersion",rp(n.protocolVersion)),uc("received observed address of %s",d)}handleMessage({connection:e,stream:r,protocol:i}){switch(i){case this.identifyProtocolStr:return this._handleIdentify({connection:e,stream:r});case this.identifyPushProtocolStr:return this._handlePush({connection:e,stream:r});default:uc.error("cannot handle unknown protocol %s",i)}}async _handleIdentify({connection:e,stream:r}){let i=new Uint8Array(0);this.peerId.pubKey&&(i=this.peerId.pubKey.bytes);let n=await this.peerStore.addressBook.getRawEnvelope(this.peerId),s=this.peerStore.protoBook.get(this.peerId)||[],o=d3.Identify.encode({protocolVersion:this._host.protocolVersion,agentVersion:this._host.agentVersion,publicKey:i,listenAddrs:this._libp2p.multiaddrs.map(a=>a.bytes),signedPeerRecord:n,observedAddr:e.remoteAddr.bytes,protocols:s}).finish();try{await iv([o],rv.encode(),r,a4e)}catch(a){uc.error("could not respond to identify request",a)}}async _handlePush({connection:e,stream:r}){let i;try{let[s]=await iv([],r,rv.decode(),o4e(1),c4e,s4e);i=d3.Identify.decode(s)}catch(s){return uc.error("received invalid message",s)}let n=e.remotePeer;try{let s=await u4e.openAndCertify(i.signedPeerRecord,f4e.DOMAIN);if(this.peerStore.addressBook.consumePeerRecord(s)){this.peerStore.protoBook.set(n,i.protocols);return}}catch(s){uc("received invalid envelope, discard it and fallback to listenAddrs is available",s)}try{this.peerStore.addressBook.set(n,i.listenAddrs.map(s=>new MR(s)))}catch(s){uc.error("received invalid addrs",s)}this.peerStore.protoBook.set(n,i.protocols)}static getCleanMultiaddr(e){if(e&&e.length>0)try{return new MR(e)}catch(r){return null}return null}},Hpt={IDENTIFY:Lpt,IDENTIFY_PUSH:Upt};Vd.multicodecs=Hpt;Vd.Messsage=d3;l4e.exports=Vd});var h4e=p(()=>{l()});var y4e=p(UR=>{l();"use strict";Object.defineProperty(UR,"__esModule",{value:!0});UR.promisify=nv;var p4e="__ES6-PROMISIFY--CUSTOM-ARGUMENTS__";function nv(t){if(typeof t!="function")throw new TypeError("Argument to promisify must be a function");var e=t[p4e],r=nv.Promise||Promise;if(typeof r!="function")throw new Error("No Promise implementation found; do you need a polyfill?");return function(){for(var i=this,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return new r(function(a,c){s.push(function(f){if(f)return c(f);for(var d=arguments.length,h=new Array(d>1?d-1:0),y=1;y<d;y++)h[y-1]=arguments[y];if(h.length===1||!e)return a(h[0]);var g={};h.forEach(function(m,E){var v=e[E];v&&(g[v]=m)}),a(g)}),t.apply(i,s)})}}nv.argumentNames=p4e;nv.Promise=void 0});var b4e=p((JLt,g4e)=>{l();"use strict";var $pt=W7(),sv=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,h3=$pt(),Gpt=sv&&!h3,Wpt=h3&&!sv,Ypt=h3&&sv,Xpt=typeof ua=="function"&&typeof process!="undefined"&&typeof process.release!="undefined"&&process.release.name==="node"&&!h3,Qpt=typeof importScripts=="function"&&typeof self!="undefined"&&typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope,Zpt=typeof process!="undefined"&&typeof process.env!="undefined"&&!1;g4e.exports={isTest:Zpt,isElectron:h3,isElectronMain:Wpt,isElectronRenderer:Ypt,isNode:Xpt,isBrowser:Gpt,isWebWorker:Qpt,isEnvWithDom:sv}});var v4e=p((eUt,m4e)=>{l();function no(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}m4e.exports=no;no.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};no.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};no.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var i=this;return this._timer=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},r),this._options.unref&&this._timer.unref(),!0};no.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};no.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};no.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};no.prototype.start=no.prototype.try;no.prototype.errors=function(){return this._errors};no.prototype.attempts=function(){return this._attempts};no.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,i=0;i<this._errors.length;i++){var n=this._errors[i],s=n.message,o=(t[s]||0)+1;t[s]=o,o>=r&&(e=n,r=o)}return e}});var w4e=p(zd=>{l();var Jpt=v4e();zd.operation=function(t){var e=zd.timeouts(t);return new Jpt(e,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})};zd.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var r in t)e[r]=t[r];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],n=0;n<e.retries;n++)i.push(this.createTimeout(n,e));return t&&t.forever&&!i.length&&i.push(this.createTimeout(n,e)),i.sort(function(s,o){return s-o}),i};zd.createTimeout=function(t,e){var r=e.randomize?Math.random()+1:1,i=Math.round(r*Math.max(e.minTimeout,1)*Math.pow(e.factor,t));return i=Math.min(i,e.maxTimeout),i};zd.wrap=function(t,e,r){if(e instanceof Array&&(r=e,e=null),!r){r=[];for(var i in t)typeof t[i]=="function"&&r.push(i)}for(var n=0;n<r.length;n++){var s=r[n],o=t[s];t[s]=function(c){var u=zd.operation(e),f=Array.prototype.slice.call(arguments,1),d=f.pop();f.push(function(h){u.retry(h)||(h&&(arguments[0]=u.mainError()),d.apply(this,arguments))}),u.attempt(function(){c.apply(t,f)})}.bind(t,o),t[s].options=e}}});var E4e=p((rUt,_4e)=>{l();_4e.exports=w4e()});var x4e=p((iUt,ov)=>{l();"use strict";var e2t=E4e(),t2t=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"],FR=class extends Error{constructor(e){super();e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}},r2t=(t,e,r)=>{let i=r.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=i,t},i2t=t=>t2t.includes(t),S4e=(t,e)=>new Promise((r,i)=>{e={onFailedAttempt:()=>{},retries:10,...e};let n=e2t.operation(e);n.attempt(async s=>{try{r(await t(s))}catch(o){if(!(o instanceof Error)){i(new TypeError(`Non-error was thrown: "${o}". You should only throw errors.`));return}if(o instanceof FR)n.stop(),i(o.originalError);else if(o instanceof TypeError&&!i2t(o.message))n.stop(),i(o);else{r2t(o,s,e);try{await e.onFailedAttempt(o)}catch(a){i(a);return}n.retry(o)||i(n.mainError())}}})});ov.exports=S4e;ov.exports.default=S4e;ov.exports.AbortError=FR});var I4e=p((nUt,A4e)=>{l();"use strict";function n2t(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^::1$/.test(t)}A4e.exports=n2t});var R4e=p((sUt,T4e)=>{l();"use strict";var s2t=I4e();function o2t(t){let{address:e}=t.nodeAddress();return s2t(e)}T4e.exports=o2t});var D4e=p((oUt,q4e)=>{l();"use strict";var a2t=h4e(),P4e=be(),{promisify:jR}=y4e(),{Multiaddr:c2t}=rt(),ip=Object.assign(P4e("libp2p:nat"),{error:P4e("libp2p:nat:err")}),{isBrowser:C4e}=b4e(),KR=x4e(),u2t=FT(),O4e=LT(),f2t=lr(),{codes:{ERR_INVALID_PARAMETERS:l2t}}=yi(),d2t=R4e(),VR=7200;function h2t(t=1024,e=65535){return Math.floor(Math.random()*(e-t+1)+t)}var k4e=class{constructor({peerId:e,addressManager:r,transportManager:i,...n}){if(this._peerId=e,this._addressManager=r,this._transportManager=i,this._enabled=n.enabled,this._externalIp=n.externalIp,this._options={description:n.description||`${O4e.name}@${O4e.version} ${this._peerId}`,ttl:n.ttl||VR,autoUpdate:n.keepAlive||!0,gateway:n.gateway,enablePMP:Boolean(n.pmp&&n.pmp.enabled)},this._options.ttl<VR)throw f2t(new Error(`NatManager ttl should be at least ${VR} seconds`),l2t)}start(){C4e||!this._enabled||this._start().catch(e=>{ip.error(e)})}async _start(){let e=this._transportManager.getAddrs();for(let r of e){let{family:i,host:n,port:s,transport:o}=r.toOptions();if(!r.isThinWaistAddress()||o!=="tcp"||d2t(r)||i!==4)continue;let a=this._getClient(),c=this._externalIp||await a.externalIp();if(u2t(c))throw new Error(`${c} is private - please set config.nat.externalIp to an externally routable IP or ensure you are not behind a double NAT`);let u=h2t();ip(`opening uPnP connection from ${c}:${u} to ${n}:${s}`),await a.map({publicPort:u,privatePort:s,protocol:o.toUpperCase()}),this._addressManager.addObservedAddr(c2t.fromNodeAddress({family:4,address:c,port:u},o))}}_getClient(){if(this._client)return this._client;let e=new a2t(this._options),r=jR(e.map.bind(e)),i=jR(e.destroy.bind(e)),n=jR(e.externalIp.bind(e));return this._client={map:(...s)=>KR(()=>r(...s),{onFailedAttempt:ip.error,unref:!0}),destroy:(...s)=>KR(()=>i(...s),{onFailedAttempt:ip.error,unref:!0}),externalIp:(...s)=>KR(()=>n(...s),{onFailedAttempt:ip.error,unref:!0})},this._client}async stop(){if(!(C4e||!this._client))try{await this._client.destroy(),this._client=null}catch(e){ip.error(e)}}};q4e.exports=k4e});var F4e=p((aUt,U4e)=>{l();"use strict";var N4e=be(),ws=Object.assign(N4e("libp2p"),{error:N4e("libp2p:err")}),{EventEmitter:p2t}=gr(),zR=lr(),y2t=tt(),{Multiaddr:g2t}=rt(),b2t=Kpe(),m2t=Hpe(),HR=MT(),{validate:v2t}=z2e(),{codes:av,messages:w2t}=yi(),_2t=G2e(),E2t=uye(),B4e=Uye(),S2t=Zye(),x2t=xge(),M4e=f3e(),A2t=S3e(),I2t=WT(),T2t=i6e(),R2t=OR(),P2t=k6e(),C2t=z6e(),O2t=W6e(),cv=e4e(),L4e=d4e(),k2t=D4e(),{updateSelfPeerRecord:q2t}=$T(),p3=class extends p2t{static async create(e){if(e.peerId)return new p3(e);let r=await y2t.create();return e.peerId=r,new p3(e)}constructor(e){super();if(this._options=v2t(e),this.peerId=this._options.peerId,this.datastore=this._options.datastore,this.peerStore=this.datastore&&this._options.peerStore.persistence?new C2t({peerId:this.peerId,datastore:this.datastore,...this._options.peerStore}):new R2t({peerId:this.peerId}),this.addresses=this._options.addresses,this.addressManager=new _2t(this.peerId,this._options.addresses),this.addressManager.on("change:addresses",()=>{q2t(this).catch(i=>{ws.error("Error updating self peer record",i)})}),this._modules=this._options.modules,this._config=this._options.config,this._transport=[],this._discovery=new Map,this.connectionManager=new E2t(this,{autoDial:this._config.peerDiscovery.autoDial,...this._options.connectionManager}),this._options.metrics.enabled&&(this.metrics=new A2t({...this._options.metrics,connectionManager:this.connectionManager})),this._options.keychain&&this._options.keychain.datastore){ws("creating keychain");let i=M4e.generateOptions();this.keychain=new M4e(this._options.keychain.datastore,{...i,...this._options.keychain}),ws("keychain constructed")}if(this.upgrader=new T2t({localPeer:this.peerId,metrics:this.metrics,onConnection:i=>this.connectionManager.onConnect(i),onConnectionEnd:i=>this.connectionManager.onDisconnect(i)}),this.transportManager=new I2t({libp2p:this,upgrader:this.upgrader,faultTolerance:this._options.transportManager.faultTolerance}),this.natManager=new k2t({peerId:this.peerId,addressManager:this.addressManager,transportManager:this.transportManager,...this._options.config.nat}),this.registrar=new O2t({peerStore:this.peerStore,connectionManager:this.connectionManager}),this.handle=this.handle.bind(this),this.registrar.handle=this.handle,!this._modules.connEncryption||!this._modules.connEncryption.length)throw zR(new Error(w2t.CONN_ENCRYPTION_REQUIRED),av.CONN_ENCRYPTION_REQUIRED);if(this._modules.connEncryption.forEach(i=>{this.upgrader.cryptos.set(i.protocol,i)}),this.dialer=new x2t({transportManager:this.transportManager,peerStore:this.peerStore,...this._options.dialer}),this._modules.transport.forEach(i=>{let n=i.prototype[Symbol.toStringTag],s=this._config.transport[n];this.transportManager.add(n,i,s)}),this._config.relay.enabled&&(this.transportManager.add(B4e.prototype[Symbol.toStringTag],B4e),this.relay=new S2t(this)),this._modules.streamMuxer&&(this._modules.streamMuxer.forEach(n=>{this.upgrader.muxers.set(n.multicodec,n)}),this.identifyService=new L4e({libp2p:this}),this.handle(Object.values(L4e.getProtocolStr(this)),this.identifyService.handleMessage)),this._modules.connProtector)this.upgrader.protector=this._modules.connProtector;else if(globalThis.process!==void 0&&globalThis.process.env&&globalThis.process.env.LIBP2P_FORCE_PNET)throw new Error("Private network is enforced, but no protector was provided");if(this._modules.dht){let i=this._modules.dht;this._dht=new i({libp2p:this,dialer:this.dialer,peerId:this.peerId,peerStore:this.peerStore,registrar:this.registrar,datastore:this.datastore,...this._config.dht})}if(this._modules.pubsub){let i=this._modules.pubsub;this.pubsub=P2t(i,this,this._config.pubsub)}this.peerRouting=new b2t(this),this.contentRouting=new m2t(this),cv.mount(this),this._onDiscoveryPeer=this._onDiscoveryPeer.bind(this)}emit(e,...r){return e==="error"&&!this._events.error?(ws.error(r),!1):super.emit(e,...r)}async start(){ws("libp2p is starting");try{await this._onStarting(),await this._onDidStart(),ws("libp2p has started")}catch(e){throw this.emit("error",e),ws.error("An error occurred starting libp2p",e),await this.stop(),e}}async stop(){ws("libp2p is stopping");try{this._isStarted=!1,this.relay&&this.relay.stop(),this.peerRouting.stop();for(let e of this._discovery.values())e.removeListener("peer",this._onDiscoveryPeer);await Promise.all(Array.from(this._discovery.values(),e=>e.stop())),this._discovery=new Map,await this.peerStore.stop(),await this.connectionManager.stop(),await Promise.all([this.pubsub&&this.pubsub.stop(),this._dht&&this._dht.stop(),this.metrics&&this.metrics.stop()]),await this.natManager.stop(),await this.transportManager.close(),cv.unmount(this),this.dialer.destroy()}catch(e){e&&(ws.error(e),this.emit("error",e))}ws("libp2p has stopped")}async loadKeychain(){if(!!this.keychain)try{await this.keychain.findKeyByName("self")}catch(e){await this.keychain.importPeer("self",this.peerId)}}isStarted(){return this._isStarted}get connections(){return this.connectionManager.connections}dial(e,r){return this._dial(e,r)}async dialProtocol(e,r,i){if(!r||!r.length)throw zR(new Error("no protocols were provided to open a stream"),av.ERR_INVALID_PROTOCOLS_FOR_STREAM);return(await this._dial(e,i)).newStream(r)}async _dial(e,r){let{id:i,multiaddrs:n}=HR(e);if(i.equals(this.peerId))throw zR(new Error("Cannot dial self"),av.ERR_DIALED_SELF);let s=this.connectionManager.get(i);return s?n&&this.peerStore.addressBook.add(i,n):s=await this.dialer.connectToPeer(e,r),s}get multiaddrs(){let e=this.addressManager.getAnnounceAddrs().map(n=>n.toString());e.length||(e=this.transportManager.getAddrs().map(n=>n.toString())),e=e.concat(this.addressManager.getObservedAddrs().map(n=>n.toString()));let r=this._options.addresses.announceFilter,i=new Set(e);return r(Array.from(i).map(n=>new g2t(n)))}async hangUp(e){let{id:r}=HR(e),i=this.connectionManager.connections.get(r.toB58String());!i||await Promise.all(i.map(n=>n.close()))}ping(e){let{id:r,multiaddrs:i}=HR(e);return i?cv(this,i[0]):cv(this,r)}handle(e,r){e=Array.isArray(e)?e:[e],e.forEach(i=>{this.upgrader.protocols.set(i,r)}),this.peerStore.protoBook.add(this.peerId,e)}unhandle(e){e=Array.isArray(e)?e:[e],e.forEach(r=>{this.upgrader.protocols.delete(r)}),this.peerStore.protoBook.remove(this.peerId,e)}async _onStarting(){let e=this.addressManager.getListenAddrs();await this.transportManager.listen(e),this.natManager.start(),await this.peerStore.start(),this._config.pubsub.enabled&&this.pubsub&&this.pubsub.start(),this._config.dht.enabled&&(this._dht&&this._dht.start(),this._dht.on("peer",this._onDiscoveryPeer)),this.metrics&&this.metrics.start()}async _onDidStart(){this._isStarted=!0,this.peerStore.on("peer",e=>{this.emit("peer:discovery",e),this._maybeConnect(e)});for(let e of this.peerStore.peers.values())this.emit("peer:discovery",e.id);this.connectionManager.start(),await this._setupPeerDiscovery(),this.relay&&this.relay.start(),this.peerRouting.start()}_onDiscoveryPeer(e){if(e.id.toB58String()===this.peerId.toB58String()){ws.error(new Error(av.ERR_DISCOVERED_SELF));return}e.multiaddrs&&this.peerStore.addressBook.add(e.id,e.multiaddrs),e.protocols&&this.peerStore.protoBook.set(e.id,e.protocols)}async _maybeConnect(e){if(this._config.peerDiscovery.autoDial===!0&&!this.connectionManager.get(e)&&(this._options.connectionManager.minConnections||0)>this.connectionManager.size){ws("connecting to discovered peer %s",e.toB58String());try{await this.dialer.connectToPeer(e)}catch(i){ws.error(`could not connect to discovered peer ${e.toB58String()} with ${i}`)}}}async _setupPeerDiscovery(){let e=r=>{let i={enabled:!0};if(r.tag&&this._config.peerDiscovery&&this._config.peerDiscovery[r.tag]&&(i={...i,...this._config.peerDiscovery[r.tag]}),i.enabled&&!this._discovery.has(r.tag)){let n;typeof r=="function"?n=new r(Object.assign({},i,{peerId:this.peerId,libp2p:this})):n=r,n.on("peer",this._onDiscoveryPeer),this._discovery.set(r.tag,n)}};for(let r of this._modules.peerDiscovery||[])e(r);for(let r of this.transportManager.getTransports())r.discovery&&e(r.discovery);await Promise.all(Array.from(this._discovery.values(),r=>r.start()))}};U4e.exports=p3});var j4e=p(()=>{l()});var V4e=p((fUt,K4e)=>{l();K4e.exports=typeof WebSocket=="undefined"?j4e():WebSocket});var H4e=p(uv=>{l();"use strict";Object.defineProperty(uv,"__esModule",{value:!0});var z4e=class{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(e){if(this.isStopped)return;let r={value:e,done:!1};if(this.pullQueue.length){let i=this.pullQueue.shift();i&&i.resolve(r)}else this.pushQueue.push(Promise.resolve(r)),this.highWaterMark!==void 0&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn(`EventIterator queue reached ${this.pushQueue.length} items`))}stop(){if(!this.isStopped){this.isStopped=!0,this.remove();for(let e of this.pullQueue)e.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(e){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(let r of this.pullQueue)r.reject(e);this.pullQueue.length=0}else{let r=Promise.reject(e);r.catch(()=>{}),this.pushQueue.push(r)}}remove(){Promise.resolve().then(()=>{this.removeCallback&&this.removeCallback()})}[Symbol.asyncIterator](){return{next:e=>{let r=this.pushQueue.shift();return r?(this.lowWaterMark!==void 0&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),r):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise((i,n)=>{this.pullQueue.push({resolve:i,reject:n})})},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}},$R=class{constructor(e,{highWaterMark:r=100,lowWaterMark:i=1}={}){let n=new z4e;n.highWaterMark=r,n.lowWaterMark=i,n.removeCallback=e({push:s=>n.push(s),stop:()=>n.stop(),fail:s=>n.fail(s),on:(s,o)=>{n.eventHandlers[s]=o}})||(()=>{}),this[Symbol.asyncIterator]=()=>n[Symbol.asyncIterator](),Object.freeze(this)}};uv.EventIterator=$R;uv.default=$R});var $4e=p(y3=>{l();"use strict";Object.defineProperty(y3,"__esModule",{value:!0});var GR=H4e();y3.EventIterator=GR.EventIterator;function D2t(t,e,r){return new GR.EventIterator(({push:i})=>(this.addEventListener(t,i,e),()=>this.removeEventListener(t,i,e)),r)}y3.subscribe=D2t;y3.default=GR.EventIterator});var W4e=p((hUt,G4e)=>{l();var{Buffer:N2t}=Vt(),{EventIterator:B2t}=$4e();function M2t(t){return t instanceof ArrayBuffer||t!=null&&t.constructor!=null&&t.constructor.name==="ArrayBuffer"&&typeof t.byteLength=="number"}G4e.exports=t=>{let e=t.removeEventListener||t.removeListener,r=async function*(){let s=new B2t(({push:o,stop:a,fail:c})=>(t.addEventListener("message",o),t.addEventListener("error",c),t.addEventListener("close",a),()=>{e.call(t,"message",o),e.call(t,"error",c),e.call(t,"close",a)}),{highWaterMark:1/0});for await(let{data:o}of s)yield M2t(o)?N2t.from(o):o}(),i=t.readyState===1,n;return t.addEventListener("open",()=>{i=!0,n=null}),t.addEventListener("close",()=>{i=!1,n=null}),t.addEventListener("error",s=>{i||(n=s)}),r.connected=()=>new Promise((s,o)=>{if(i)return s();if(n)return o(n);let a=f=>{e.call(t,"open",c),e.call(t,"error",u),f()},c=()=>a(s),u=f=>a(()=>o(f));t.addEventListener("open",c),t.addEventListener("error",u)}),r}});var X4e=p((pUt,Y4e)=>{l();Y4e.exports=async t=>{if(t.readyState>=2)throw new Error("socket closed");if(t.readyState!==1)return new Promise((e,r)=>{let i=t&&(t.removeEventListener||t.removeListener);function n(){typeof i=="function"&&(i.call(t,"open",s),i.call(t,"error",o))}function s(){n(),e()}function o(a){n(),r(a)}t.addEventListener("open",s),t.addEventListener("error",o)})}});var Z4e=p((yUt,Q4e)=>{l();var L2t=X4e();Q4e.exports=(t,e)=>(e=e||{},e.closeOnEnd=e.closeOnEnd!==!1,async r=>{for await(let i of r){try{await L2t(t)}catch(n){if(n.message==="socket closed")break;throw n}t.send(i)}if(e.closeOnEnd&&t.readyState<=1)return new Promise((i,n)=>{t.addEventListener("close",s=>{if(s.wasClean||s.code===1006)i();else{let o=Object.assign(new Error("ws error"),{event:s});n(o)}}),setTimeout(()=>t.close())})})});var ebe=p((gUt,J4e)=>{l();var U2t=W4e(),F2t=Z4e();J4e.exports=(t,e)=>{e=e||{},e.binaryType?t.binaryType=e.binaryType:e.binary&&(t.binaryType="arraybuffer");let r={sink:F2t(t,e),source:U2t(t,e),connected:()=>r.source.connected()};return r}});var rbe=p((bUt,tbe)=>{l();var{relative:j2t}=v6(),K2t={http:"ws",https:"wss"},V2t="ws";tbe.exports=(t,e)=>j2t(t,e,K2t,V2t)});var ibe=p((mUt,fv)=>{l();"use strict";var z2t=V4e(),H2t=ebe(),$2t=rbe();fv.exports=function(t,e={}){let r=typeof window=="undefined"?{}:window.location,i=$2t(t,r),n=new z2t(i,e.websocket),s=H2t(n,e);return s.remoteAddress=i,s.close=()=>new Promise((o,a)=>{n.addEventListener("close",o),n.close()}),s.destroy=()=>{n.terminate?n.terminate():n.close()},s.socket=n,s};fv.exports.connect=fv.exports});var sbe=p((vUt,nbe)=>{l();"use strict";nbe.exports=function(){throw new Error("WebSocket Servers can not be created in the browser!")}});var WR=p(Hd=>{l();"use strict";Hd.CODE_P2P=421;Hd.CODE_CIRCUIT=290;Hd.CODE_TCP=6;Hd.CODE_WS=477;Hd.CODE_WSS=478;Hd.CLOSE_TIMEOUT=2e3});var cbe=p((_Ut,abe)=>{l();"use strict";function obe(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function G2t(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return obe(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),obe(new n,r)}}abe.exports=G2t});var YR=p(np=>{l();"use strict";Object.defineProperty(np,"__esModule",{value:!0});np.isCorrect=np.isInSubnet=void 0;function W2t(t){return this.subnetMask<t.subnetMask?!1:this.mask(t.subnetMask)===t.mask()}np.isInSubnet=W2t;function Y2t(t){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===t&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}np.isCorrect=Y2t});var XR=p(fc=>{l();"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.RE_SUBNET_STRING=fc.RE_ADDRESS=fc.GROUPS=fc.BITS=void 0;fc.BITS=32;fc.GROUPS=4;fc.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g;fc.RE_SUBNET_STRING=/\/\d{1,2}$/});var lv=p(sp=>{l();"use strict";var X2t=sp&&sp.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(sp,"__esModule",{value:!0});sp.AddressError=void 0;var Q2t=function(t){X2t(e,t);function e(r,i){var n=t.call(this,r)||this;return n.name="AddressError",i!==null&&(n.parseMessage=i),n}return e}(Error);sp.AddressError=Q2t});var QR=p((dv,ube)=>{l();(function(){var t,e=244837814094590,r=(e&16777215)==15715070;function i(x,T,H){x!=null&&(typeof x=="number"?this.fromNumber(x,T,H):T==null&&typeof x!="string"?this.fromString(x,256):this.fromString(x,T))}function n(){return new i(null)}function s(x,T,H,ie,pe,_e){for(;--_e>=0;){var Ne=T*this[x++]+H[ie]+pe;pe=Math.floor(Ne/67108864),H[ie++]=Ne&67108863}return pe}function o(x,T,H,ie,pe,_e){for(var Ne=T&32767,Fe=T>>15;--_e>=0;){var pr=this[x]&32767,Ci=this[x++]>>15,xs=Fe*pr+Ci*Ne;pr=Ne*pr+((xs&32767)<<15)+H[ie]+(pe&1073741823),pe=(pr>>>30)+(xs>>>15)+Fe*Ci+(pe>>>30),H[ie++]=pr&1073741823}return pe}function a(x,T,H,ie,pe,_e){for(var Ne=T&16383,Fe=T>>14;--_e>=0;){var pr=this[x]&16383,Ci=this[x++]>>14,xs=Fe*pr+Ci*Ne;pr=Ne*pr+((xs&16383)<<14)+H[ie]+pe,pe=(pr>>28)+(xs>>14)+Fe*Ci,H[ie++]=pr&268435455}return pe}var c=typeof navigator!="undefined";c&&r&&navigator.appName=="Microsoft Internet Explorer"?(i.prototype.am=o,t=30):c&&r&&navigator.appName!="Netscape"?(i.prototype.am=s,t=26):(i.prototype.am=a,t=28),i.prototype.DB=t,i.prototype.DM=(1<<t)-1,i.prototype.DV=1<<t;var u=52;i.prototype.FV=Math.pow(2,u),i.prototype.F1=u-t,i.prototype.F2=2*t-u;var f="0123456789abcdefghijklmnopqrstuvwxyz",d=new Array,h,y;for(h="0".charCodeAt(0),y=0;y<=9;++y)d[h++]=y;for(h="a".charCodeAt(0),y=10;y<36;++y)d[h++]=y;for(h="A".charCodeAt(0),y=10;y<36;++y)d[h++]=y;function g(x){return f.charAt(x)}function m(x,T){var H=d[x.charCodeAt(T)];return H??-1}function E(x){for(var T=this.t-1;T>=0;--T)x[T]=this[T];x.t=this.t,x.s=this.s}function v(x){this.t=1,this.s=x<0?-1:0,x>0?this[0]=x:x<-1?this[0]=x+this.DV:this.t=0}function A(x){var T=n();return T.fromInt(x),T}function R(x,T){var H;if(T==16)H=4;else if(T==8)H=3;else if(T==256)H=8;else if(T==2)H=1;else if(T==32)H=5;else if(T==4)H=2;else{this.fromRadix(x,T);return}this.t=0,this.s=0;for(var ie=x.length,pe=!1,_e=0;--ie>=0;){var Ne=H==8?x[ie]&255:m(x,ie);if(Ne<0){x.charAt(ie)=="-"&&(pe=!0);continue}pe=!1,_e==0?this[this.t++]=Ne:_e+H>this.DB?(this[this.t-1]|=(Ne&(1<<this.DB-_e)-1)<<_e,this[this.t++]=Ne>>this.DB-_e):this[this.t-1]|=Ne<<_e,_e+=H,_e>=this.DB&&(_e-=this.DB)}H==8&&(x[0]&128)!=0&&(this.s=-1,_e>0&&(this[this.t-1]|=(1<<this.DB-_e)-1<<_e)),this.clamp(),pe&&i.ZERO.subTo(this,this)}function F(){for(var x=this.s&this.DM;this.t>0&&this[this.t-1]==x;)--this.t}function q(x){if(this.s<0)return"-"+this.negate().toString(x);var T;if(x==16)T=4;else if(x==8)T=3;else if(x==2)T=1;else if(x==32)T=5;else if(x==4)T=2;else return this.toRadix(x);var H=(1<<T)-1,ie,pe=!1,_e="",Ne=this.t,Fe=this.DB-Ne*this.DB%T;if(Ne-- >0)for(Fe<this.DB&&(ie=this[Ne]>>Fe)>0&&(pe=!0,_e=g(ie));Ne>=0;)Fe<T?(ie=(this[Ne]&(1<<Fe)-1)<<T-Fe,ie|=this[--Ne]>>(Fe+=this.DB-T)):(ie=this[Ne]>>(Fe-=T)&H,Fe<=0&&(Fe+=this.DB,--Ne)),ie>0&&(pe=!0),pe&&(_e+=g(ie));return pe?_e:"0"}function D(){var x=n();return i.ZERO.subTo(this,x),x}function z(){return this.s<0?this.negate():this}function G(x){var T=this.s-x.s;if(T!=0)return T;var H=this.t;if(T=H-x.t,T!=0)return this.s<0?-T:T;for(;--H>=0;)if((T=this[H]-x[H])!=0)return T;return 0}function Y(x){var T=1,H;return(H=x>>>16)!=0&&(x=H,T+=16),(H=x>>8)!=0&&(x=H,T+=8),(H=x>>4)!=0&&(x=H,T+=4),(H=x>>2)!=0&&(x=H,T+=2),(H=x>>1)!=0&&(x=H,T+=1),T}function P(){return this.t<=0?0:this.DB*(this.t-1)+Y(this[this.t-1]^this.s&this.DM)}function b(x,T){var H;for(H=this.t-1;H>=0;--H)T[H+x]=this[H];for(H=x-1;H>=0;--H)T[H]=0;T.t=this.t+x,T.s=this.s}function w(x,T){for(var H=x;H<this.t;++H)T[H-x]=this[H];T.t=Math.max(this.t-x,0),T.s=this.s}function S(x,T){var H=x%this.DB,ie=this.DB-H,pe=(1<<ie)-1,_e=Math.floor(x/this.DB),Ne=this.s<<H&this.DM,Fe;for(Fe=this.t-1;Fe>=0;--Fe)T[Fe+_e+1]=this[Fe]>>ie|Ne,Ne=(this[Fe]&pe)<<H;for(Fe=_e-1;Fe>=0;--Fe)T[Fe]=0;T[_e]=Ne,T.t=this.t+_e+1,T.s=this.s,T.clamp()}function C(x,T){T.s=this.s;var H=Math.floor(x/this.DB);if(H>=this.t){T.t=0;return}var ie=x%this.DB,pe=this.DB-ie,_e=(1<<ie)-1;T[0]=this[H]>>ie;for(var Ne=H+1;Ne<this.t;++Ne)T[Ne-H-1]|=(this[Ne]&_e)<<pe,T[Ne-H]=this[Ne]>>ie;ie>0&&(T[this.t-H-1]|=(this.s&_e)<<pe),T.t=this.t-H,T.clamp()}function B(x,T){for(var H=0,ie=0,pe=Math.min(x.t,this.t);H<pe;)ie+=this[H]-x[H],T[H++]=ie&this.DM,ie>>=this.DB;if(x.t<this.t){for(ie-=x.s;H<this.t;)ie+=this[H],T[H++]=ie&this.DM,ie>>=this.DB;ie+=this.s}else{for(ie+=this.s;H<x.t;)ie-=x[H],T[H++]=ie&this.DM,ie>>=this.DB;ie-=x.s}T.s=ie<0?-1:0,ie<-1?T[H++]=this.DV+ie:ie>0&&(T[H++]=ie),T.t=H,T.clamp()}function W(x,T){var H=this.abs(),ie=x.abs(),pe=H.t;for(T.t=pe+ie.t;--pe>=0;)T[pe]=0;for(pe=0;pe<ie.t;++pe)T[pe+H.t]=H.am(0,ie[pe],T,pe,0,H.t);T.s=0,T.clamp(),this.s!=x.s&&i.ZERO.subTo(T,T)}function K(x){for(var T=this.abs(),H=x.t=2*T.t;--H>=0;)x[H]=0;for(H=0;H<T.t-1;++H){var ie=T.am(H,T[H],x,2*H,0,1);(x[H+T.t]+=T.am(H+1,2*T[H],x,2*H+1,ie,T.t-H-1))>=T.DV&&(x[H+T.t]-=T.DV,x[H+T.t+1]=1)}x.t>0&&(x[x.t-1]+=T.am(H,T[H],x,2*H,0,1)),x.s=0,x.clamp()}function M(x,T,H){var ie=x.abs();if(!(ie.t<=0)){var pe=this.abs();if(pe.t<ie.t){T!=null&&T.fromInt(0),H!=null&&this.copyTo(H);return}H==null&&(H=n());var _e=n(),Ne=this.s,Fe=x.s,pr=this.DB-Y(ie[ie.t-1]);pr>0?(ie.lShiftTo(pr,_e),pe.lShiftTo(pr,H)):(ie.copyTo(_e),pe.copyTo(H));var Ci=_e.t,xs=_e[Ci-1];if(xs!=0){var ss=xs*(1<<this.F1)+(Ci>1?_e[Ci-2]>>this.F2:0),_c=this.FV/ss,c6=(1<<this.F1)/ss,yo=1<<this.F2,go=H.t,u6=go-Ci,Cu=T??n();for(_e.dlShiftTo(u6,Cu),H.compareTo(Cu)>=0&&(H[H.t++]=1,H.subTo(Cu,H)),i.ONE.dlShiftTo(Ci,Cu),Cu.subTo(_e,_e);_e.t<Ci;)_e[_e.t++]=0;for(;--u6>=0;){var q7=H[--go]==xs?this.DM:Math.floor(H[go]*_c+(H[go-1]+yo)*c6);if((H[go]+=_e.am(0,q7,H,u6,0,Ci))<q7)for(_e.dlShiftTo(u6,Cu),H.subTo(Cu,H);H[go]<--q7;)H.subTo(Cu,H)}T!=null&&(H.drShiftTo(Ci,T),Ne!=Fe&&i.ZERO.subTo(T,T)),H.t=Ci,H.clamp(),pr>0&&H.rShiftTo(pr,H),Ne<0&&i.ZERO.subTo(H,H)}}}function _(x){var T=n();return this.abs().divRemTo(x,null,T),this.s<0&&T.compareTo(i.ZERO)>0&&x.subTo(T,T),T}function L(x){this.m=x}function ae(x){return x.s<0||x.compareTo(this.m)>=0?x.mod(this.m):x}function X(x){return x}function ne(x){x.divRemTo(this.m,null,x)}function oe(x,T,H){x.multiplyTo(T,H),this.reduce(H)}function de(x,T){x.squareTo(T),this.reduce(T)}L.prototype.convert=ae,L.prototype.revert=X,L.prototype.reduce=ne,L.prototype.mulTo=oe,L.prototype.sqrTo=de;function he(){if(this.t<1)return 0;var x=this[0];if((x&1)==0)return 0;var T=x&3;return T=T*(2-(x&15)*T)&15,T=T*(2-(x&255)*T)&255,T=T*(2-((x&65535)*T&65535))&65535,T=T*(2-x*T%this.DV)%this.DV,T>0?this.DV-T:-T}function we(x){this.m=x,this.mp=x.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<x.DB-15)-1,this.mt2=2*x.t}function k(x){var T=n();return x.abs().dlShiftTo(this.m.t,T),T.divRemTo(this.m,null,T),x.s<0&&T.compareTo(i.ZERO)>0&&this.m.subTo(T,T),T}function j(x){var T=n();return x.copyTo(T),this.reduce(T),T}function $(x){for(;x.t<=this.mt2;)x[x.t++]=0;for(var T=0;T<this.m.t;++T){var H=x[T]&32767,ie=H*this.mpl+((H*this.mph+(x[T]>>15)*this.mpl&this.um)<<15)&x.DM;for(H=T+this.m.t,x[H]+=this.m.am(0,ie,x,T,0,this.m.t);x[H]>=x.DV;)x[H]-=x.DV,x[++H]++}x.clamp(),x.drShiftTo(this.m.t,x),x.compareTo(this.m)>=0&&x.subTo(this.m,x)}function Z(x,T){x.squareTo(T),this.reduce(T)}function I(x,T,H){x.multiplyTo(T,H),this.reduce(H)}we.prototype.convert=k,we.prototype.revert=j,we.prototype.reduce=$,we.prototype.mulTo=I,we.prototype.sqrTo=Z;function U(){return(this.t>0?this[0]&1:this.s)==0}function V(x,T){if(x>4294967295||x<1)return i.ONE;var H=n(),ie=n(),pe=T.convert(this),_e=Y(x)-1;for(pe.copyTo(H);--_e>=0;)if(T.sqrTo(H,ie),(x&1<<_e)>0)T.mulTo(ie,pe,H);else{var Ne=H;H=ie,ie=Ne}return T.revert(H)}function N(x,T){var H;return x<256||T.isEven()?H=new L(T):H=new we(T),this.exp(x,H)}i.prototype.copyTo=E,i.prototype.fromInt=v,i.prototype.fromString=R,i.prototype.clamp=F,i.prototype.dlShiftTo=b,i.prototype.drShiftTo=w,i.prototype.lShiftTo=S,i.prototype.rShiftTo=C,i.prototype.subTo=B,i.prototype.multiplyTo=W,i.prototype.squareTo=K,i.prototype.divRemTo=M,i.prototype.invDigit=he,i.prototype.isEven=U,i.prototype.exp=V,i.prototype.toString=q,i.prototype.negate=D,i.prototype.abs=z,i.prototype.compareTo=G,i.prototype.bitLength=P,i.prototype.mod=_,i.prototype.modPowInt=N,i.ZERO=A(0),i.ONE=A(1);function Q(){var x=n();return this.copyTo(x),x}function ee(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function J(){return this.t==0?this.s:this[0]<<24>>24}function ce(){return this.t==0?this.s:this[0]<<16>>16}function ye(x){return Math.floor(Math.LN2*this.DB/Math.log(x))}function ge(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function je(x){if(x==null&&(x=10),this.signum()==0||x<2||x>36)return"0";var T=this.chunkSize(x),H=Math.pow(x,T),ie=A(H),pe=n(),_e=n(),Ne="";for(this.divRemTo(ie,pe,_e);pe.signum()>0;)Ne=(H+_e.intValue()).toString(x).substr(1)+Ne,pe.divRemTo(ie,pe,_e);return _e.intValue().toString(x)+Ne}function Te(x,T){this.fromInt(0),T==null&&(T=10);for(var H=this.chunkSize(T),ie=Math.pow(T,H),pe=!1,_e=0,Ne=0,Fe=0;Fe<x.length;++Fe){var pr=m(x,Fe);if(pr<0){x.charAt(Fe)=="-"&&this.signum()==0&&(pe=!0);continue}Ne=T*Ne+pr,++_e>=H&&(this.dMultiply(ie),this.dAddOffset(Ne,0),_e=0,Ne=0)}_e>0&&(this.dMultiply(Math.pow(T,_e)),this.dAddOffset(Ne,0)),pe&&i.ZERO.subTo(this,this)}function Ke(x,T,H){if(typeof T=="number")if(x<2)this.fromInt(1);else for(this.fromNumber(x,H),this.testBit(x-1)||this.bitwiseTo(i.ONE.shiftLeft(x-1),zt,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(T);)this.dAddOffset(2,0),this.bitLength()>x&&this.subTo(i.ONE.shiftLeft(x-1),this);else{var ie=new Array,pe=x&7;ie.length=(x>>3)+1,T.nextBytes(ie),pe>0?ie[0]&=(1<<pe)-1:ie[0]=0,this.fromString(ie,256)}}function Ze(){var x=this.t,T=new Array;T[0]=this.s;var H=this.DB-x*this.DB%8,ie,pe=0;if(x-- >0)for(H<this.DB&&(ie=this[x]>>H)!=(this.s&this.DM)>>H&&(T[pe++]=ie|this.s<<this.DB-H);x>=0;)H<8?(ie=(this[x]&(1<<H)-1)<<8-H,ie|=this[--x]>>(H+=this.DB-8)):(ie=this[x]>>(H-=8)&255,H<=0&&(H+=this.DB,--x)),(ie&128)!=0&&(ie|=-256),pe==0&&(this.s&128)!=(ie&128)&&++pe,(pe>0||ie!=this.s)&&(T[pe++]=ie);return T}function ze(x){return this.compareTo(x)==0}function Ve(x){return this.compareTo(x)<0?this:x}function pt(x){return this.compareTo(x)>0?this:x}function Yt(x,T,H){var ie,pe,_e=Math.min(x.t,this.t);for(ie=0;ie<_e;++ie)H[ie]=T(this[ie],x[ie]);if(x.t<this.t){for(pe=x.s&this.DM,ie=_e;ie<this.t;++ie)H[ie]=T(this[ie],pe);H.t=this.t}else{for(pe=this.s&this.DM,ie=_e;ie<x.t;++ie)H[ie]=T(pe,x[ie]);H.t=x.t}H.s=T(this.s,x.s),H.clamp()}function ir(x,T){return x&T}function Sn(x){var T=n();return this.bitwiseTo(x,ir,T),T}function zt(x,T){return x|T}function At(x){var T=n();return this.bitwiseTo(x,zt,T),T}function Zr(x,T){return x^T}function it(x){var T=n();return this.bitwiseTo(x,Zr,T),T}function Ar(x,T){return x&~T}function J3(x){var T=n();return this.bitwiseTo(x,Ar,T),T}function Tr(){for(var x=n(),T=0;T<this.t;++T)x[T]=this.DM&~this[T];return x.t=this.t,x.s=~this.s,x}function Rr(x){var T=n();return x<0?this.rShiftTo(-x,T):this.lShiftTo(x,T),T}function e6(x){var T=n();return x<0?this.lShiftTo(-x,T):this.rShiftTo(x,T),T}function Pr(x){if(x==0)return-1;var T=0;return(x&65535)==0&&(x>>=16,T+=16),(x&255)==0&&(x>>=8,T+=8),(x&15)==0&&(x>>=4,T+=4),(x&3)==0&&(x>>=2,T+=2),(x&1)==0&&++T,T}function Cr(){for(var x=0;x<this.t;++x)if(this[x]!=0)return x*this.DB+Pr(this[x]);return this.s<0?this.t*this.DB:-1}function t6(x){for(var T=0;x!=0;)x&=x-1,++T;return T}function Or(){for(var x=0,T=this.s&this.DM,H=0;H<this.t;++H)x+=t6(this[H]^T);return x}function kr(x){var T=Math.floor(x/this.DB);return T>=this.t?this.s!=0:(this[T]&1<<x%this.DB)!=0}function r6(x,T){var H=i.ONE.shiftLeft(x);return this.bitwiseTo(H,T,H),H}function qr(x){return this.changeBit(x,zt)}function Dr(x){return this.changeBit(x,Ar)}function i6(x){return this.changeBit(x,Zr)}function Nr(x,T){for(var H=0,ie=0,pe=Math.min(x.t,this.t);H<pe;)ie+=this[H]+x[H],T[H++]=ie&this.DM,ie>>=this.DB;if(x.t<this.t){for(ie+=x.s;H<this.t;)ie+=this[H],T[H++]=ie&this.DM,ie>>=this.DB;ie+=this.s}else{for(ie+=this.s;H<x.t;)ie+=x[H],T[H++]=ie&this.DM,ie>>=this.DB;ie+=x.s}T.s=ie<0?-1:0,ie>0?T[H++]=ie:ie<-1&&(T[H++]=this.DV+ie),T.t=H,T.clamp()}function Br(x){var T=n();return this.addTo(x,T),T}function n6(x){var T=n();return this.subTo(x,T),T}function Mr(x){var T=n();return this.multiplyTo(x,T),T}function Lr(){var x=n();return this.squareTo(x),x}function s6(x){var T=n();return this.divRemTo(x,T,null),T}function Ur(x){var T=n();return this.divRemTo(x,null,T),T}function Fr(x){var T=n(),H=n();return this.divRemTo(x,T,H),new Array(T,H)}function o6(x){this[this.t]=this.am(0,x-1,this,0,0,this.t),++this.t,this.clamp()}function jr(x,T){if(x!=0){for(;this.t<=T;)this[this.t++]=0;for(this[T]+=x;this[T]>=this.DV;)this[T]-=this.DV,++T>=this.t&&(this[this.t++]=0),++this[T]}}function nr(){}function th(x){return x}function Np(x,T,H){x.multiplyTo(T,H)}function Bp(x,T){x.squareTo(T)}nr.prototype.convert=th,nr.prototype.revert=th,nr.prototype.mulTo=Np,nr.prototype.sqrTo=Bp;function Mp(x){return this.exp(x,new nr)}function Lp(x,T,H){var ie=Math.min(this.t+x.t,T);for(H.s=0,H.t=ie;ie>0;)H[--ie]=0;var pe;for(pe=H.t-this.t;ie<pe;++ie)H[ie+this.t]=this.am(0,x[ie],H,ie,0,this.t);for(pe=Math.min(x.t,T);ie<pe;++ie)this.am(0,x[ie],H,ie,0,T-ie);H.clamp()}function Up(x,T,H){--T;var ie=H.t=this.t+x.t-T;for(H.s=0;--ie>=0;)H[ie]=0;for(ie=Math.max(T-this.t,0);ie<x.t;++ie)H[this.t+ie-T]=this.am(T-ie,x[ie],H,0,0,this.t+ie-T);H.clamp(),H.drShiftTo(1,H)}function ho(x){this.r2=n(),this.q3=n(),i.ONE.dlShiftTo(2*x.t,this.r2),this.mu=this.r2.divide(x),this.m=x}function Fp(x){if(x.s<0||x.t>2*this.m.t)return x.mod(this.m);if(x.compareTo(this.m)<0)return x;var T=n();return x.copyTo(T),this.reduce(T),T}function jp(x){return x}function Kp(x){for(x.drShiftTo(this.m.t-1,this.r2),x.t>this.m.t+1&&(x.t=this.m.t+1,x.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);x.compareTo(this.r2)<0;)x.dAddOffset(1,this.m.t+1);for(x.subTo(this.r2,x);x.compareTo(this.m)>=0;)x.subTo(this.m,x)}function Vp(x,T){x.squareTo(T),this.reduce(T)}function zp(x,T,H){x.multiplyTo(T,H),this.reduce(H)}ho.prototype.convert=Fp,ho.prototype.revert=jp,ho.prototype.reduce=Kp,ho.prototype.mulTo=zp,ho.prototype.sqrTo=Vp;function Hp(x,T){var H=x.bitLength(),ie,pe=A(1),_e;if(H<=0)return pe;H<18?ie=1:H<48?ie=3:H<144?ie=4:H<768?ie=5:ie=6,H<8?_e=new L(T):T.isEven()?_e=new ho(T):_e=new we(T);var Ne=new Array,Fe=3,pr=ie-1,Ci=(1<<ie)-1;if(Ne[1]=_e.convert(this),ie>1){var xs=n();for(_e.sqrTo(Ne[1],xs);Fe<=Ci;)Ne[Fe]=n(),_e.mulTo(xs,Ne[Fe-2],Ne[Fe]),Fe+=2}var ss=x.t-1,_c,c6=!0,yo=n(),go;for(H=Y(x[ss])-1;ss>=0;){for(H>=pr?_c=x[ss]>>H-pr&Ci:(_c=(x[ss]&(1<<H+1)-1)<<pr-H,ss>0&&(_c|=x[ss-1]>>this.DB+H-pr)),Fe=ie;(_c&1)==0;)_c>>=1,--Fe;if((H-=Fe)<0&&(H+=this.DB,--ss),c6)Ne[_c].copyTo(pe),c6=!1;else{for(;Fe>1;)_e.sqrTo(pe,yo),_e.sqrTo(yo,pe),Fe-=2;Fe>0?_e.sqrTo(pe,yo):(go=pe,pe=yo,yo=go),_e.mulTo(yo,Ne[_c],pe)}for(;ss>=0&&(x[ss]&1<<H)==0;)_e.sqrTo(pe,yo),go=pe,pe=yo,yo=go,--H<0&&(H=this.DB-1,--ss)}return _e.revert(pe)}function $p(x){var T=this.s<0?this.negate():this.clone(),H=x.s<0?x.negate():x.clone();if(T.compareTo(H)<0){var ie=T;T=H,H=ie}var pe=T.getLowestSetBit(),_e=H.getLowestSetBit();if(_e<0)return T;for(pe<_e&&(_e=pe),_e>0&&(T.rShiftTo(_e,T),H.rShiftTo(_e,H));T.signum()>0;)(pe=T.getLowestSetBit())>0&&T.rShiftTo(pe,T),(pe=H.getLowestSetBit())>0&&H.rShiftTo(pe,H),T.compareTo(H)>=0?(T.subTo(H,T),T.rShiftTo(1,T)):(H.subTo(T,H),H.rShiftTo(1,H));return _e>0&&H.lShiftTo(_e,H),H}function Gp(x){if(x<=0)return 0;var T=this.DV%x,H=this.s<0?x-1:0;if(this.t>0)if(T==0)H=this[0]%x;else for(var ie=this.t-1;ie>=0;--ie)H=(T*H+this[ie])%x;return H}function Wp(x){var T=x.isEven();if(this.isEven()&&T||x.signum()==0)return i.ZERO;for(var H=x.clone(),ie=this.clone(),pe=A(1),_e=A(0),Ne=A(0),Fe=A(1);H.signum()!=0;){for(;H.isEven();)H.rShiftTo(1,H),T?((!pe.isEven()||!_e.isEven())&&(pe.addTo(this,pe),_e.subTo(x,_e)),pe.rShiftTo(1,pe)):_e.isEven()||_e.subTo(x,_e),_e.rShiftTo(1,_e);for(;ie.isEven();)ie.rShiftTo(1,ie),T?((!Ne.isEven()||!Fe.isEven())&&(Ne.addTo(this,Ne),Fe.subTo(x,Fe)),Ne.rShiftTo(1,Ne)):Fe.isEven()||Fe.subTo(x,Fe),Fe.rShiftTo(1,Fe);H.compareTo(ie)>=0?(H.subTo(ie,H),T&&pe.subTo(Ne,pe),_e.subTo(Fe,_e)):(ie.subTo(H,ie),T&&Ne.subTo(pe,Ne),Fe.subTo(_e,Fe))}if(ie.compareTo(i.ONE)!=0)return i.ZERO;if(Fe.compareTo(x)>=0)return Fe.subtract(x);if(Fe.signum()<0)Fe.addTo(x,Fe);else return Fe;return Fe.signum()<0?Fe.add(x):Fe}var vi=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Yp=(1<<26)/vi[vi.length-1];function Xp(x){var T,H=this.abs();if(H.t==1&&H[0]<=vi[vi.length-1]){for(T=0;T<vi.length;++T)if(H[0]==vi[T])return!0;return!1}if(H.isEven())return!1;for(T=1;T<vi.length;){for(var ie=vi[T],pe=T+1;pe<vi.length&&ie<Yp;)ie*=vi[pe++];for(ie=H.modInt(ie);T<pe;)if(ie%vi[T++]==0)return!1}return H.millerRabin(x)}function N_e(x){var T=this.subtract(i.ONE),H=T.getLowestSetBit();if(H<=0)return!1;var ie=T.shiftRight(H);x=x+1>>1,x>vi.length&&(x=vi.length);for(var pe=n(),_e=0;_e<x;++_e){pe.fromInt(vi[Math.floor(Math.random()*vi.length)]);var Ne=pe.modPow(ie,this);if(Ne.compareTo(i.ONE)!=0&&Ne.compareTo(T)!=0){for(var Fe=1;Fe++<H&&Ne.compareTo(T)!=0;)if(Ne=Ne.modPowInt(2,this),Ne.compareTo(i.ONE)==0)return!1;if(Ne.compareTo(T)!=0)return!1}}return!0}i.prototype.chunkSize=ye,i.prototype.toRadix=je,i.prototype.fromRadix=Te,i.prototype.fromNumber=Ke,i.prototype.bitwiseTo=Yt,i.prototype.changeBit=r6,i.prototype.addTo=Nr,i.prototype.dMultiply=o6,i.prototype.dAddOffset=jr,i.prototype.multiplyLowerTo=Lp,i.prototype.multiplyUpperTo=Up,i.prototype.modInt=Gp,i.prototype.millerRabin=N_e,i.prototype.clone=Q,i.prototype.intValue=ee,i.prototype.byteValue=J,i.prototype.shortValue=ce,i.prototype.signum=ge,i.prototype.toByteArray=Ze,i.prototype.equals=ze,i.prototype.min=Ve,i.prototype.max=pt,i.prototype.and=Sn,i.prototype.or=At,i.prototype.xor=it,i.prototype.andNot=J3,i.prototype.not=Tr,i.prototype.shiftLeft=Rr,i.prototype.shiftRight=e6,i.prototype.getLowestSetBit=Cr,i.prototype.bitCount=Or,i.prototype.testBit=kr,i.prototype.setBit=qr,i.prototype.clearBit=Dr,i.prototype.flipBit=i6,i.prototype.add=Br,i.prototype.subtract=n6,i.prototype.multiply=Mr,i.prototype.divide=s6,i.prototype.remainder=Ur,i.prototype.divideAndRemainder=Fr,i.prototype.modPow=Hp,i.prototype.modInverse=Wp,i.prototype.pow=Mp,i.prototype.gcd=$p,i.prototype.isProbablePrime=Xp,i.prototype.square=Lr,i.prototype.Barrett=ho;var a6,ns,Pi;function B_e(x){ns[Pi++]^=x&255,ns[Pi++]^=x>>8&255,ns[Pi++]^=x>>16&255,ns[Pi++]^=x>>24&255,Pi>=k7&&(Pi-=k7)}function aO(){B_e(new Date().getTime())}if(ns==null){ns=new Array,Pi=0;var po;if(typeof window!="undefined"&&window.crypto){if(window.crypto.getRandomValues){var cO=new Uint8Array(32);for(window.crypto.getRandomValues(cO),po=0;po<32;++po)ns[Pi++]=cO[po]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var uO=window.crypto.random(32);for(po=0;po<uO.length;++po)ns[Pi++]=uO.charCodeAt(po)&255}}for(;Pi<k7;)po=Math.floor(65536*Math.random()),ns[Pi++]=po>>>8,ns[Pi++]=po&255;Pi=0,aO()}function M_e(){if(a6==null){for(aO(),a6=j_e(),a6.init(ns),Pi=0;Pi<ns.length;++Pi)ns[Pi]=0;Pi=0}return a6.next()}function L_e(x){var T;for(T=0;T<x.length;++T)x[T]=M_e()}function C7(){}C7.prototype.nextBytes=L_e;function O7(){this.i=0,this.j=0,this.S=new Array}function U_e(x){var T,H,ie;for(T=0;T<256;++T)this.S[T]=T;for(H=0,T=0;T<256;++T)H=H+this.S[T]+x[T%x.length]&255,ie=this.S[T],this.S[T]=this.S[H],this.S[H]=ie;this.i=0,this.j=0}function F_e(){var x;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,x=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=x,this.S[x+this.S[this.i]&255]}O7.prototype.init=U_e,O7.prototype.next=F_e;function j_e(){return new O7}var k7=256;typeof dv!="undefined"?dv=ube.exports={default:i,BigInteger:i,SecureRandom:C7}:this.jsbn={BigInteger:i,SecureRandom:C7}}).call(dv)});var g3=p(hv=>{l();(function(){"use strict";var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function e(o){return i(s(o),arguments)}function r(o,a){return e.apply(null,[o].concat(a||[]))}function i(o,a){var c=1,u=o.length,f,d="",h,y,g,m,E,v,A,R;for(h=0;h<u;h++)if(typeof o[h]=="string")d+=o[h];else if(typeof o[h]=="object"){if(g=o[h],g.keys)for(f=a[c],y=0;y<g.keys.length;y++){if(f==null)throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',g.keys[y],g.keys[y-1]));f=f[g.keys[y]]}else g.param_no?f=a[g.param_no]:f=a[c++];if(t.not_type.test(g.type)&&t.not_primitive.test(g.type)&&f instanceof Function&&(f=f()),t.numeric_arg.test(g.type)&&typeof f!="number"&&isNaN(f))throw new TypeError(e("[sprintf] expecting number but found %T",f));switch(t.number.test(g.type)&&(A=f>=0),g.type){case"b":f=parseInt(f,10).toString(2);break;case"c":f=String.fromCharCode(parseInt(f,10));break;case"d":case"i":f=parseInt(f,10);break;case"j":f=JSON.stringify(f,null,g.width?parseInt(g.width):0);break;case"e":f=g.precision?parseFloat(f).toExponential(g.precision):parseFloat(f).toExponential();break;case"f":f=g.precision?parseFloat(f).toFixed(g.precision):parseFloat(f);break;case"g":f=g.precision?String(Number(f.toPrecision(g.precision))):parseFloat(f);break;case"o":f=(parseInt(f,10)>>>0).toString(8);break;case"s":f=String(f),f=g.precision?f.substring(0,g.precision):f;break;case"t":f=String(!!f),f=g.precision?f.substring(0,g.precision):f;break;case"T":f=Object.prototype.toString.call(f).slice(8,-1).toLowerCase(),f=g.precision?f.substring(0,g.precision):f;break;case"u":f=parseInt(f,10)>>>0;break;case"v":f=f.valueOf(),f=g.precision?f.substring(0,g.precision):f;break;case"x":f=(parseInt(f,10)>>>0).toString(16);break;case"X":f=(parseInt(f,10)>>>0).toString(16).toUpperCase();break}t.json.test(g.type)?d+=f:(t.number.test(g.type)&&(!A||g.sign)?(R=A?"+":"-",f=f.toString().replace(t.sign,"")):R="",E=g.pad_char?g.pad_char==="0"?"0":g.pad_char.charAt(1):" ",v=g.width-(R+f).length,m=g.width&&v>0?E.repeat(v):"",d+=g.align?R+f+m:E==="0"?R+m+f:m+R+f)}return d}var n=Object.create(null);function s(o){if(n[o])return n[o];for(var a=o,c,u=[],f=0;a;){if((c=t.text.exec(a))!==null)u.push(c[0]);else if((c=t.modulo.exec(a))!==null)u.push("%");else if((c=t.placeholder.exec(a))!==null){if(c[2]){f|=1;var d=[],h=c[2],y=[];if((y=t.key.exec(h))!==null)for(d.push(y[1]);(h=h.substring(y[0].length))!=="";)if((y=t.key_access.exec(h))!==null)d.push(y[1]);else if((y=t.index_access.exec(h))!==null)d.push(y[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");c[2]=d}else f|=2;if(f===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");u.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");a=a.substring(c[0].length)}return n[o]=u}typeof hv!="undefined"&&(hv.sprintf=e,hv.vsprintf=r),typeof window!="undefined"&&(window.sprintf=e,window.vsprintf=r,typeof define=="function"&&define.amd&&define(function(){return{sprintf:e,vsprintf:r}}))})()});var ZR=p(lc=>{l();"use strict";var Z2t=lc&&lc.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),J2t=lc&&lc.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fbe=lc&&lc.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Z2t(e,t,r);return J2t(e,t),e};Object.defineProperty(lc,"__esModule",{value:!0});lc.Address4=void 0;var lbe=fbe(YR()),na=fbe(XR()),dbe=lv(),b3=QR(),op=g3(),eyt=function(){function t(e){this.groups=na.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=lbe.isCorrect(na.BITS),this.isInSubnet=lbe.isInSubnet,this.address=e;var r=na.RE_SUBNET_STRING.exec(e);if(r){if(this.parsedSubnet=r[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/"+this.subnetMask,this.subnetMask<0||this.subnetMask>na.BITS)throw new dbe.AddressError("Invalid subnet mask.");e=e.replace(na.RE_SUBNET_STRING,"")}this.addressMinusSuffix=e,this.parsedAddress=this.parse(e)}return t.isValid=function(e){try{return new t(e),!0}catch(r){return!1}},t.prototype.parse=function(e){var r=e.split(".");if(!e.match(na.RE_ADDRESS))throw new dbe.AddressError("Invalid IPv4 address.");return r},t.prototype.correctForm=function(){return this.parsedAddress.map(function(e){return parseInt(e,10)}).join(".")},t.fromHex=function(e){var r=e.replace(/:/g,"").padStart(8,"0"),i=[],n;for(n=0;n<8;n+=2){var s=r.slice(n,n+2);i.push(parseInt(s,16))}return new t(i.join("."))},t.fromInteger=function(e){return t.fromHex(e.toString(16))},t.fromArpa=function(e){var r=e.replace(/(\.in-addr\.arpa)?\.$/,""),i=r.split(".").reverse().join(".");return new t(i)},t.prototype.toHex=function(){return this.parsedAddress.map(function(e){return op.sprintf("%02x",parseInt(e,10))}).join(":")},t.prototype.toArray=function(){return this.parsedAddress.map(function(e){return parseInt(e,10)})},t.prototype.toGroup6=function(){var e=[],r;for(r=0;r<na.GROUPS;r+=2){var i=op.sprintf("%02x%02x",parseInt(this.parsedAddress[r],10),parseInt(this.parsedAddress[r+1],10));e.push(op.sprintf("%x",parseInt(i,16)))}return e.join(":")},t.prototype.bigInteger=function(){return new b3.BigInteger(this.parsedAddress.map(function(e){return op.sprintf("%02x",parseInt(e,10))}).join(""),16)},t.prototype._startAddress=function(){return new b3.BigInteger(this.mask()+"0".repeat(na.BITS-this.subnetMask),2)},t.prototype.startAddress=function(){return t.fromBigInteger(this._startAddress())},t.prototype.startAddressExclusive=function(){var e=new b3.BigInteger("1");return t.fromBigInteger(this._startAddress().add(e))},t.prototype._endAddress=function(){return new b3.BigInteger(this.mask()+"1".repeat(na.BITS-this.subnetMask),2)},t.prototype.endAddress=function(){return t.fromBigInteger(this._endAddress())},t.prototype.endAddressExclusive=function(){var e=new b3.BigInteger("1");return t.fromBigInteger(this._endAddress().subtract(e))},t.fromBigInteger=function(e){return t.fromInteger(parseInt(e.toString(),10))},t.prototype.mask=function(e){return e===void 0&&(e=this.subnetMask),this.getBitsBase2(0,e)},t.prototype.getBitsBase2=function(e,r){return this.binaryZeroPad().slice(e,r)},t.prototype.reverseForm=function(e){e||(e={});var r=this.correctForm().split(".").reverse().join(".");return e.omitSuffix?r:op.sprintf("%s.in-addr.arpa.",r)},t.prototype.isMulticast=function(){return this.isInSubnet(new t("224.0.0.0/4"))},t.prototype.binaryZeroPad=function(){return this.bigInteger().toString(2).padStart(na.BITS,"0")},t.prototype.groupForV6=function(){var e=this.parsedAddress;return this.address.replace(na.RE_ADDRESS,op.sprintf('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',e.slice(0,2).join("."),e.slice(2,4).join(".")))},t}();lc.Address4=eyt});var JR=p(Xr=>{l();"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.RE_URL_WITH_PORT=Xr.RE_URL=Xr.RE_ZONE_STRING=Xr.RE_SUBNET_STRING=Xr.RE_BAD_ADDRESS=Xr.RE_BAD_CHARACTERS=Xr.TYPES=Xr.SCOPES=Xr.GROUPS=Xr.BITS=void 0;Xr.BITS=128;Xr.GROUPS=8;Xr.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"};Xr.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"};Xr.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi;Xr.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi;Xr.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/;Xr.RE_ZONE_STRING=/%.*$/;Xr.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/);Xr.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/)});var eP=p(dc=>{l();"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.simpleGroup=dc.spanLeadingZeroes=dc.spanAll=dc.spanAllZeroes=void 0;var hbe=g3();function pbe(t){return t.replace(/(0+)/g,'<span class="zero">$1</span>')}dc.spanAllZeroes=pbe;function tyt(t,e){e===void 0&&(e=0);var r=t.split("");return r.map(function(i,n){return hbe.sprintf('<span class="digit value-%s position-%d">%s</span>',i,n+e,pbe(i))}).join("")}dc.spanAll=tyt;function ybe(t){return t.replace(/^(0+)/,'<span class="zero">$1</span>')}function ryt(t){var e=t.split(":");return e.map(function(r){return ybe(r)}).join(":")}dc.spanLeadingZeroes=ryt;function iyt(t,e){e===void 0&&(e=0);var r=t.split(":");return r.map(function(i,n){return/group-v4/.test(i)?i:hbe.sprintf('<span class="hover-group group-%d">%s</span>',n+e,ybe(i))})}dc.simpleGroup=iyt});var gbe=p(Wi=>{l();"use strict";var nyt=Wi&&Wi.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),syt=Wi&&Wi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),oyt=Wi&&Wi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&nyt(e,t,r);return syt(e,t),e};Object.defineProperty(Wi,"__esModule",{value:!0});Wi.possibleElisions=Wi.simpleRegularExpression=Wi.ADDRESS_BOUNDARY=Wi.padGroup=Wi.groupPossibilities=void 0;var ayt=oyt(JR()),ap=g3();function pv(t){return ap.sprintf("(%s)",t.join("|"))}Wi.groupPossibilities=pv;function yv(t){return t.length<4?ap.sprintf("0{0,%d}%s",4-t.length,t):t}Wi.padGroup=yv;Wi.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]";function cyt(t){var e=[];t.forEach(function(i,n){var s=parseInt(i,16);s===0&&e.push(n)});var r=e.map(function(i){return t.map(function(n,s){if(s===i){var o=s===0||s===ayt.GROUPS-1?":":"";return pv([yv(n),o])}return yv(n)}).join(":")});return r.push(t.map(yv).join(":")),pv(r)}Wi.simpleRegularExpression=cyt;function uyt(t,e,r){var i=e?"":":",n=r?"":":",s=[];!e&&!r&&s.push("::"),e&&r&&s.push(""),(r&&!e||!r&&e)&&s.push(":"),s.push(ap.sprintf("%s(:0{1,4}){1,%d}",i,t-1)),s.push(ap.sprintf("(0{1,4}:){1,%d}%s",t-1,n)),s.push(ap.sprintf("(0{1,4}:){%d}0{1,4}",t-1));for(var o=1;o<t-1;o++)for(var a=1;a<t-o;a++)s.push(ap.sprintf("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",a,t-a-o-1));return pv(s)}Wi.possibleElisions=uyt});var _be=p(so=>{l();"use strict";var fyt=so&&so.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),lyt=so&&so.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gv=so&&so.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&fyt(e,t,r);return lyt(e,t),e},bbe=so&&so.__spreadArray||function(t,e){for(var r=0,i=e.length,n=t.length;r<i;r++,n++)t[n]=e[r];return t};Object.defineProperty(so,"__esModule",{value:!0});so.Address6=void 0;var mbe=gv(YR()),tP=gv(XR()),dr=gv(JR()),rP=gv(eP()),$d=ZR(),Gd=gbe(),vu=lv(),Nn=QR(),Bn=g3();function bv(t){if(!t)throw new Error("Assertion failed.")}function dyt(t){for(var e=/(\d+)(\d{3})/;e.test(t);)t=t.replace(e,"$1,$2");return t}function hyt(t){return t=t.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),t=t.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),t}function pyt(t,e){var r=[],i=[],n;for(n=0;n<t.length;n++)n<e[0]?r.push(t[n]):n>e[1]&&i.push(t[n]);return r.concat(["compact"]).concat(i)}function vbe(t){return Bn.sprintf("%04x",parseInt(t,16))}function wbe(t){return t&255}var yyt=function(){function t(e,r){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=mbe.isInSubnet,this.isCorrect=mbe.isCorrect(dr.BITS),r===void 0?this.groups=dr.GROUPS:this.groups=r,this.address=e;var i=dr.RE_SUBNET_STRING.exec(e);if(i){if(this.parsedSubnet=i[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/"+this.subnetMask,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>dr.BITS)throw new vu.AddressError("Invalid subnet mask.");e=e.replace(dr.RE_SUBNET_STRING,"")}else if(/\//.test(e))throw new vu.AddressError("Invalid subnet mask.");var n=dr.RE_ZONE_STRING.exec(e);n&&(this.zone=n[0],e=e.replace(dr.RE_ZONE_STRING,"")),this.addressMinusSuffix=e,this.parsedAddress=this.parse(this.addressMinusSuffix)}return t.isValid=function(e){try{return new t(e),!0}catch(r){return!1}},t.fromBigInteger=function(e){var r=e.toString(16).padStart(32,"0"),i=[],n;for(n=0;n<dr.GROUPS;n++)i.push(r.slice(n*4,(n+1)*4));return new t(i.join(":"))},t.fromURL=function(e){var r,i=null,n;if(e.indexOf("[")!==-1&&e.indexOf("]:")!==-1){if(n=dr.RE_URL_WITH_PORT.exec(e),n===null)return{error:"failed to parse address with port",address:null,port:null};r=n[1],i=n[2]}else if(e.indexOf("/")!==-1){if(e=e.replace(/^[a-z0-9]+:\/\//,""),n=dr.RE_URL.exec(e),n===null)return{error:"failed to parse address from URL",address:null,port:null};r=n[1]}else r=e;return i?(i=parseInt(i,10),(i<0||i>65536)&&(i=null)):i=null,{address:new t(r),port:i}},t.fromAddress4=function(e){var r=new $d.Address4(e),i=dr.BITS-(tP.BITS-r.subnetMask);return new t("::ffff:"+r.correctForm()+"/"+i)},t.fromArpa=function(e){var r=e.replace(/(\.ip6\.arpa)?\.$/,""),i=7;if(r.length!==63)throw new vu.AddressError("Invalid 'ip6.arpa' form.");for(var n=r.split(".").reverse(),s=i;s>0;s--){var o=s*4;n.splice(o,0,":")}return r=n.join(""),new t(r)},t.prototype.microsoftTranscription=function(){return Bn.sprintf("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))},t.prototype.mask=function(e){return e===void 0&&(e=this.subnetMask),this.getBitsBase2(0,e)},t.prototype.possibleSubnets=function(e){e===void 0&&(e=128);var r=dr.BITS-this.subnetMask,i=Math.abs(e-dr.BITS),n=r-i;return n<0?"0":dyt(new Nn.BigInteger("2",10).pow(n).toString(10))},t.prototype._startAddress=function(){return new Nn.BigInteger(this.mask()+"0".repeat(dr.BITS-this.subnetMask),2)},t.prototype.startAddress=function(){return t.fromBigInteger(this._startAddress())},t.prototype.startAddressExclusive=function(){var e=new Nn.BigInteger("1");return t.fromBigInteger(this._startAddress().add(e))},t.prototype._endAddress=function(){return new Nn.BigInteger(this.mask()+"1".repeat(dr.BITS-this.subnetMask),2)},t.prototype.endAddress=function(){return t.fromBigInteger(this._endAddress())},t.prototype.endAddressExclusive=function(){var e=new Nn.BigInteger("1");return t.fromBigInteger(this._endAddress().subtract(e))},t.prototype.getScope=function(){var e=dr.SCOPES[this.getBits(12,16).intValue()];return this.getType()==="Global unicast"&&e!=="Link local"&&(e="Global"),e||"Unknown"},t.prototype.getType=function(){for(var e=0,r=Object.keys(dr.TYPES);e<r.length;e++){var i=r[e];if(this.isInSubnet(new t(i)))return dr.TYPES[i]}return"Global unicast"},t.prototype.getBits=function(e,r){return new Nn.BigInteger(this.getBitsBase2(e,r),2)},t.prototype.getBitsBase2=function(e,r){return this.binaryZeroPad().slice(e,r)},t.prototype.getBitsBase16=function(e,r){var i=r-e;if(i%4!=0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(e,r).toString(16).padStart(i/4,"0")},t.prototype.getBitsPastSubnet=function(){return this.getBitsBase2(this.subnetMask,dr.BITS)},t.prototype.reverseForm=function(e){e||(e={});var r=Math.floor(this.subnetMask/4),i=this.canonicalForm().replace(/:/g,"").split("").slice(0,r).reverse().join(".");return r>0?e.omitSuffix?i:Bn.sprintf("%s.ip6.arpa.",i):e.omitSuffix?"":"ip6.arpa."},t.prototype.correctForm=function(){var e,r=[],i=0,n=[];for(e=0;e<this.parsedAddress.length;e++){var s=parseInt(this.parsedAddress[e],16);s===0&&i++,s!==0&&i>0&&(i>1&&n.push([e-i,e-1]),i=0)}i>1&&n.push([this.parsedAddress.length-i,this.parsedAddress.length-1]);var o=n.map(function(u){return u[1]-u[0]+1});if(n.length>0){var a=o.indexOf(Math.max.apply(Math,o));r=pyt(this.parsedAddress,n[a])}else r=this.parsedAddress;for(e=0;e<r.length;e++)r[e]!=="compact"&&(r[e]=parseInt(r[e],16).toString(16));var c=r.join(":");return c=c.replace(/^compact$/,"::"),c=c.replace(/^compact|compact$/,":"),c=c.replace(/compact/,""),c},t.prototype.binaryZeroPad=function(){return this.bigInteger().toString(2).padStart(dr.BITS,"0")},t.prototype.parse4in6=function(e){var r=e.split(":"),i=r.slice(-1)[0],n=i.match(tP.RE_ADDRESS);if(n){this.parsedAddress4=n[0],this.address4=new $d.Address4(this.parsedAddress4);for(var s=0;s<this.address4.groups;s++)if(/^0[0-9]+/.test(this.address4.parsedAddress[s]))throw new vu.AddressError("IPv4 addresses can't have leading zeroes.",e.replace(tP.RE_ADDRESS,this.address4.parsedAddress.map(hyt).join(".")));this.v4=!0,r[r.length-1]=this.address4.toGroup6(),e=r.join(":")}return e},t.prototype.parse=function(e){e=this.parse4in6(e);var r=e.match(dr.RE_BAD_CHARACTERS);if(r)throw new vu.AddressError(Bn.sprintf("Bad character%s detected in address: %s",r.length>1?"s":"",r.join("")),e.replace(dr.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));var i=e.match(dr.RE_BAD_ADDRESS);if(i)throw new vu.AddressError(Bn.sprintf("Address failed regex: %s",i.join("")),e.replace(dr.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));var n=[],s=e.split("::");if(s.length===2){var o=s[0].split(":"),a=s[1].split(":");o.length===1&&o[0]===""&&(o=[]),a.length===1&&a[0]===""&&(a=[]);var c=this.groups-(o.length+a.length);if(!c)throw new vu.AddressError("Error parsing groups");this.elidedGroups=c,this.elisionBegin=o.length,this.elisionEnd=o.length+this.elidedGroups,n=n.concat(o);for(var u=0;u<c;u++)n.push("0");n=n.concat(a)}else if(s.length===1)n=e.split(":"),this.elidedGroups=0;else throw new vu.AddressError("Too many :: groups found");if(n=n.map(function(f){return Bn.sprintf("%x",parseInt(f,16))}),n.length!==this.groups)throw new vu.AddressError("Incorrect number of groups found");return n},t.prototype.canonicalForm=function(){return this.parsedAddress.map(vbe).join(":")},t.prototype.decimal=function(){return this.parsedAddress.map(function(e){return Bn.sprintf("%05d",parseInt(e,16))}).join(":")},t.prototype.bigInteger=function(){return new Nn.BigInteger(this.parsedAddress.map(vbe).join(""),16)},t.prototype.to4=function(){var e=this.binaryZeroPad().split("");return $d.Address4.fromHex(new Nn.BigInteger(e.slice(96,128).join(""),2).toString(16))},t.prototype.to4in6=function(){var e=this.to4(),r=new t(this.parsedAddress.slice(0,6).join(":"),6),i=r.correctForm(),n="";return/:$/.test(i)||(n=":"),i+n+e.address},t.prototype.inspectTeredo=function(){var e=this.getBitsBase16(0,32),r=this.getBits(80,96).xor(new Nn.BigInteger("ffff",16)).toString(),i=$d.Address4.fromHex(this.getBitsBase16(32,64)),n=$d.Address4.fromHex(this.getBits(96,128).xor(new Nn.BigInteger("ffffffff",16)).toString(16)),s=this.getBits(64,80),o=this.getBitsBase2(64,80),a=s.testBit(15),c=s.testBit(14),u=s.testBit(8),f=s.testBit(9),d=new Nn.BigInteger(o.slice(2,6)+o.slice(8,16),2).toString(10);return{prefix:Bn.sprintf("%s:%s",e.slice(0,4),e.slice(4,8)),server4:i.address,client4:n.address,flags:o,coneNat:a,microsoft:{reserved:c,universalLocal:f,groupIndividual:u,nonce:d},udpPort:r}},t.prototype.inspect6to4=function(){var e=this.getBitsBase16(0,16),r=$d.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:Bn.sprintf("%s",e.slice(0,4)),gateway:r.address}},t.prototype.to6to4=function(){if(!this.is4())return null;var e=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new t(e)},t.prototype.toByteArray=function(){var e=this.bigInteger().toByteArray();return e.length===17&&e[0]===0?e.slice(1):e},t.prototype.toUnsignedByteArray=function(){return this.toByteArray().map(wbe)},t.fromByteArray=function(e){return this.fromUnsignedByteArray(e.map(wbe))},t.fromUnsignedByteArray=function(e){for(var r=new Nn.BigInteger("256",10),i=new Nn.BigInteger("0",10),n=new Nn.BigInteger("1",10),s=e.length-1;s>=0;s--)i=i.add(n.multiply(new Nn.BigInteger(e[s].toString(10),10))),n=n.multiply(r);return t.fromBigInteger(i)},t.prototype.isCanonical=function(){return this.addressMinusSuffix===this.canonicalForm()},t.prototype.isLinkLocal=function(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"},t.prototype.isMulticast=function(){return this.getType()==="Multicast"},t.prototype.is4=function(){return this.v4},t.prototype.isTeredo=function(){return this.isInSubnet(new t("2001::/32"))},t.prototype.is6to4=function(){return this.isInSubnet(new t("2002::/16"))},t.prototype.isLoopback=function(){return this.getType()==="Loopback"},t.prototype.href=function(e){return e===void 0?e="":e=Bn.sprintf(":%s",e),Bn.sprintf("http://[%s]%s/",this.correctForm(),e)},t.prototype.link=function(e){e||(e={}),e.className===void 0&&(e.className=""),e.prefix===void 0&&(e.prefix="/#address="),e.v4===void 0&&(e.v4=!1);var r=this.correctForm;return e.v4&&(r=this.to4in6),e.className?Bn.sprintf('<a href="%1$s%2$s" class="%3$s">%2$s</a>',e.prefix,r.call(this),e.className):Bn.sprintf('<a href="%1$s%2$s">%2$s</a>',e.prefix,r.call(this))},t.prototype.group=function(){if(this.elidedGroups===0)return rP.simpleGroup(this.address).join(":");bv(typeof this.elidedGroups=="number"),bv(typeof this.elisionBegin=="number");var e=[],r=this.address.split("::"),i=r[0],n=r[1];i.length?e.push.apply(e,rP.simpleGroup(i)):e.push("");for(var s=["hover-group"],o=this.elisionBegin;o<this.elisionBegin+this.elidedGroups;o++)s.push(Bn.sprintf("group-%d",o));return e.push(Bn.sprintf('<span class="%s"></span>',s.join(" "))),n.length?e.push.apply(e,rP.simpleGroup(n,this.elisionEnd)):e.push(""),this.is4()&&(bv(this.address4 instanceof $d.Address4),e.pop(),e.push(this.address4.groupForV6())),e.join(":")},t.prototype.regularExpressionString=function(e){e===void 0&&(e=!1);var r=[],i=new t(this.correctForm());if(i.elidedGroups===0)r.push(Gd.simpleRegularExpression(i.parsedAddress));else if(i.elidedGroups===dr.GROUPS)r.push(Gd.possibleElisions(dr.GROUPS));else{var n=i.address.split("::");n[0].length&&r.push(Gd.simpleRegularExpression(n[0].split(":"))),bv(typeof i.elidedGroups=="number"),r.push(Gd.possibleElisions(i.elidedGroups,n[0].length!==0,n[1].length!==0)),n[1].length&&r.push(Gd.simpleRegularExpression(n[1].split(":"))),r=[r.join(":")]}return e||(r=bbe(bbe(["(?=^|",Gd.ADDRESS_BOUNDARY,"|[^\\w\\:])("],r),[")(?=[^\\w\\:]|",Gd.ADDRESS_BOUNDARY,"|$)"])),r.join("")},t.prototype.regularExpression=function(e){return e===void 0&&(e=!1),new RegExp(this.regularExpressionString(e),"i")},t}();so.Address6=yyt});var Ebe=p(wn=>{l();"use strict";var gyt=wn&&wn.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),byt=wn&&wn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),myt=wn&&wn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&gyt(e,t,r);return byt(e,t),e};Object.defineProperty(wn,"__esModule",{value:!0});wn.v6=wn.AddressError=wn.Address6=wn.Address4=void 0;var vyt=ZR();Object.defineProperty(wn,"Address4",{enumerable:!0,get:function(){return vyt.Address4}});var wyt=_be();Object.defineProperty(wn,"Address6",{enumerable:!0,get:function(){return wyt.Address6}});var _yt=lv();Object.defineProperty(wn,"AddressError",{enumerable:!0,get:function(){return _yt.AddressError}});var Eyt=myt(eP());wn.v6={helpers:Eyt}});var oP=p((kUt,sP)=>{l();"use strict";var Sbe=be(),Syt=Object.assign(Sbe("libp2p:ip-port-to-multiaddr"),{error:Sbe("libp2p:ip-port-to-multiaddr:err")}),{Multiaddr:iP}=rt(),nP=cbe(),{Address4:xyt,Address6:Ayt}=Ebe(),mv={ERR_INVALID_IP_PARAMETER:"ERR_INVALID_IP_PARAMETER",ERR_INVALID_PORT_PARAMETER:"ERR_INVALID_PORT_PARAMETER",ERR_INVALID_IP:"ERR_INVALID_IP"};function Iyt(t,e){if(typeof t!="string")throw nP(new Error(`invalid ip provided: ${t}`),mv.ERR_INVALID_IP_PARAMETER);if(typeof e=="string"&&(e=parseInt(e)),isNaN(e))throw nP(new Error(`invalid port provided: ${e}`),mv.ERR_INVALID_PORT_PARAMETER);try{return new xyt(t),new iP(`/ip4/${t}/tcp/${e}`)}catch{}try{let r=new Ayt(t);return r.is4()?new iP(`/ip4/${r.to4().correctForm()}/tcp/${e}`):new iP(`/ip6/${t}/tcp/${e}`)}catch(r){let i=`invalid ip:port for creating a multiaddr: ${t}:${e}`;throw Syt.error(i),nP(new Error(i),mv.ERR_INVALID_IP)}}sP.exports=Iyt;sP.exports.Errors=mv});var Abe=p((qUt,vv)=>{l();"use strict";var aP=class extends Error{constructor(e){super(e);this.name="TimeoutError"}},xbe=(t,e,r,i)=>{let n,s=new Promise((o,a)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){o(t);return}i={customTimers:{setTimeout,clearTimeout},...i},n=i.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{o(r())}catch(f){a(f)}return}let c=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,u=r instanceof Error?r:new aP(c);typeof t.cancel=="function"&&t.cancel(),a(u)},e),(async()=>{try{o(await t)}catch(c){a(c)}finally{i.customTimers.clearTimeout.call(void 0,n)}})()});return s.clear=()=>{clearTimeout(n),n=void 0},s};vv.exports=xbe;vv.exports.default=xbe;vv.exports.TimeoutError=aP});var Cbe=p((DUt,Pbe)=>{l();"use strict";var Ibe=nc(),{CLOSE_TIMEOUT:Tyt}=WR(),Tbe=oP(),Ryt=Abe(),Rbe=be(),cP=Rbe("libp2p:websockets:socket");cP.error=Rbe("libp2p:websockets:socket:error");Pbe.exports=(t,e={})=>{let r={async sink(i){e.signal&&(i=Ibe(i,e.signal));try{await t.sink(async function*(){for await(let n of i)yield n instanceof Uint8Array?n:n.slice()}())}catch(n){n.type!=="aborted"&&cP.error(n)}},source:e.signal?Ibe(t.source,e.signal):t.source,conn:t,localAddr:e.localAddr||(t.localAddress&&t.localPort?Tbe(t.localAddress,t.localPort):void 0),remoteAddr:e.remoteAddr||Tbe(t.remoteAddress,t.remotePort),timeline:{open:Date.now()},async close(){let i=Date.now();try{await Ryt(t.close(),Tyt)}catch(n){let{host:s,port:o}=r.remoteAddr.toOptions();cP("timeout closing stream to %s:%s after %dms, destroying it manually",s,o,Date.now()-i),t.destroy()}finally{r.timeline.close=Date.now()}}};return t.socket.once&&t.socket.once("close",()=>{r.timeline.close||(r.timeline.close=Date.now())}),r}});var qbe=p((NUt,kbe)=>{l();"use strict";var Qf=Cl(),{CODE_CIRCUIT:uP,CODE_P2P:fP,CODE_TCP:lP,CODE_WS:Pyt,CODE_WSS:Obe}=WR();kbe.exports={all:t=>t.filter(e=>{if(e.protoCodes().includes(uP))return!1;let r=e.decapsulateCode(fP);return Qf.WebSockets.matches(r)||Qf.WebSocketsSecure.matches(r)}),dnsWss:t=>t.filter(e=>{if(e.protoCodes().includes(uP))return!1;let r=e.decapsulateCode(fP);return Qf.WebSocketsSecure.matches(r)&&Qf.DNS.matches(r.decapsulateCode(lP).decapsulateCode(Obe))}),dnsWsOrWss:t=>t.filter(e=>{if(e.protoCodes().includes(uP))return!1;let r=e.decapsulateCode(fP);return Qf.WebSockets.matches(r)?Qf.DNS.matches(r.decapsulateCode(lP).decapsulateCode(Pyt)):Qf.WebSocketsSecure.matches(r)&&Qf.DNS.matches(r.decapsulateCode(lP).decapsulateCode(Obe))})}});var Fbe=p((BUt,Ube)=>{l();"use strict";var Cyt=ibe(),Oyt=O4(),kyt=Y5(),{AbortError:Dbe}=nc(),qyt=gf(),Nbe=be(),Zf=Nbe("libp2p:websockets");Zf.error=Nbe("libp2p:websockets:error");var Bbe=Jp(),Dyt=sbe(),Nyt=Cbe(),Mbe=qbe(),Lbe=class{constructor({upgrader:e,filter:r}){if(!e)throw new Error("An upgrader must be provided. See https://github.com/libp2p/interface-transport#upgrader.");this._upgrader=e,this._filter=r}async dial(e,r={}){Zf("dialing %s",e);let i=await this._connect(e,r),n=Nyt(i,{remoteAddr:e,signal:r.signal});Zf("new outbound connection %s",n.remoteAddr);let s=await this._upgrader.upgradeOutbound(n);return Zf("outbound connection %s upgraded",n.remoteAddr),s}async _connect(e,r={}){if(r.signal&&r.signal.aborted)throw new Dbe;let i=e.toOptions();Zf("dialing %s:%s",i.host,i.port);let n=qyt(),s=u=>{let f=`connection error: ${u.message}`;Zf.error(f),n.reject(u)},o=Cyt(kyt(e),Object.assign({binary:!0},r));if(o.socket.on?o.socket.on("error",s):o.socket.onerror=s,!r.signal)return await Promise.race([o.connected(),n.promise]),Zf("connected %s",e),o;let a,c=new Promise((u,f)=>{if(a=()=>{f(new Dbe),setTimeout(()=>{o.close()})},r.signal.aborted)return a();r.signal.addEventListener("abort",a)});try{await Promise.race([c,n.promise,o.connected()])}finally{r.signal.removeEventListener("abort",a)}return Zf("connected %s",e),o}createListener(e={},r){return typeof e=="function"&&(r=e,e={}),Dyt({handler:r,upgrader:this._upgrader},e)}filter(e){return e=Array.isArray(e)?e:[e],this._filter?this._filter(e):Bbe.isBrowser||Bbe.isWebWorker?Mbe.dnsWss(e):Mbe.all(e)}};Ube.exports=Oyt(Lbe,{className:"WebSockets",symbolName:"@libp2p/js-libp2p-websockets/websockets"})});var dP=p((MUt,Kbe)=>{l();"use strict";function jbe(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Byt(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return jbe(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),jbe(new n,r)}}Kbe.exports=Byt});var zbe=p((LUt,Vbe)=>{l();Vbe.exports=function(){if(typeof globalThis=="undefined")return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}});var yP=p((UUt,pP)=>{l();"use strict";var hP=65536,Myt=4294967295;function Lyt(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var Uyt=eI().Buffer,wv=globalThis.crypto||globalThis.msCrypto;wv&&wv.getRandomValues?pP.exports=Fyt:pP.exports=Lyt;function Fyt(t,e){if(t>Myt)throw new RangeError("requested too many random bytes");var r=Uyt.allocUnsafe(t);if(t>0)if(t>hP)for(var i=0;i<t;i+=hP)wv.getRandomValues(r.slice(i,i+hP));else wv.getRandomValues(r);return typeof e=="function"?process.nextTick(function(){e(null,r)}):r}});var Gbe=p((FUt,$be)=>{l();"use strict";function Hbe(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function jyt(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=void 0),e!=null&&(r.code=e);try{return Hbe(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),Hbe(new n,r)}}$be.exports=jyt});var mP=p((jUt,Qbe)=>{l();var Kyt=be()("simple-peer"),Wbe=zbe(),Ybe=yP(),Vyt=gI(),gP=Om(),hr=Gbe(),bP=64*1024,zyt=5*1e3,Hyt=5*1e3;function Xbe(t){return t.replace(/a=ice-options:trickle\s\n/g,"")}function $yt(t){console.warn(t)}var Jf=class extends Vyt.Duplex{constructor(e){e=Object.assign({allowHalfOpen:!1},e);super(e);if(this._id=Ybe(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||Ybe(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||Jf.channelConfig,this.negotiated=this.channelConfig.negotiated,this.config=Object.assign({},Jf.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(r=>r),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=e.trickle!==void 0?e.trickle:!0,this.allowHalfTrickle=e.allowHalfTrickle!==void 0?e.allowHalfTrickle:!1,this.iceCompleteTimeout=e.iceCompleteTimeout||zyt,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&typeof e.wrtc=="object"?e.wrtc:Wbe(),!this._wrtc)throw typeof window=="undefined"?hr(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):hr(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=this.negotiated?!1:!this.initiator,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._firstStable=!0,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(r){gP(()=>this.destroy(hr(r,"ERR_PC_CONSTRUCTOR")));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=r=>{this._onIceCandidate(r)},this.initiator||this.negotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=r=>{this._setupData(r)},this.streams&&this.streams.forEach(r=>{this.addStream(r)}),this._pc.ontrack=r=>{this._onTrack(r)},this.initiator&&this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(this.destroyed)throw hr(new Error("cannot signal after peer is destroyed"),"ERR_SIGNALING");if(typeof e=="string")try{e=JSON.parse(e)}catch(r){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(r=>{this._addIceCandidate(r)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(r=>{this.destroy(hr(r,"ERR_SET_REMOTE_DESCRIPTION"))}),!e.sdp&&!e.candidate&&!e.renegotiate&&!e.transceiverRequest&&this.destroy(hr(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}_addIceCandidate(e){var r=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(r).catch(i=>{!r.address||r.address.endsWith(".local")?$yt("Ignoring unsupported ICE candidate."):this.destroy(hr(i,"ERR_ADD_ICE_CANDIDATE"))})}send(e){this._channel.send(e)}addTransceiver(e,r){if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,r),this._needsNegotiation()}catch(i){this.destroy(hr(i,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{transceiverRequest:{kind:e,init:r}})}addStream(e){this._debug("addStream()"),e.getTracks().forEach(r=>{this.addTrack(r,e)})}addTrack(e,r){this._debug("addTrack()");var i=this._senderMap.get(e)||new Map,n=i.get(r);if(!n)n=this._pc.addTrack(e,r),i.set(r,n),this._senderMap.set(e,i),this._needsNegotiation();else throw n.removed?hr(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):hr(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(e,r,i){this._debug("replaceTrack()");var n=this._senderMap.get(e),s=n?n.get(i):null;if(!s)throw hr(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");r&&this._senderMap.set(r,n),s.replaceTrack!=null?s.replaceTrack(r):this.destroy(hr(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,r){this._debug("removeSender()");var i=this._senderMap.get(e),n=i?i.get(r):null;if(!n)throw hr(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{n.removed=!0,this._pc.removeTrack(n)}catch(s){s.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(n):this.destroy(hr(s,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){this._debug("removeSenders()"),e.getTracks().forEach(r=>{this.removeTrack(r,e)})}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,gP(()=>{this._batchedNegotiation=!1,this._debug("starting batched negotiation"),this.negotiate()}))}negotiate(){this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{renegotiate:!0})),this._isNegotiating=!0}_destroy(e,r){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(i){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(i){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,r(e)}_setupData(e){if(!e.channel)return this.destroy(hr(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=bP),this.channelName=this._channel.label,this._channel.onmessage=i=>{this._onChannelMessage(i)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=i=>{this.destroy(hr(i,"ERR_DATA_CHANNEL"))};var r=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(r&&this._onChannelClose(),r=!0):r=!1},Hyt)}_read(){}_write(e,r,i){if(this.destroyed)return i(hr(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(n){return this.destroy(hr(n,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>bP?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=i):i(null)}else this._debug("write before connect"),this._chunk=e,this._cb=i}_onFinish(){if(this.destroyed)return;let e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=Xbe(e.sdp)),e.sdp=this.sdpTransform(e.sdp);let r=()=>{if(!this.destroyed){var s=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:s.type,sdp:s.sdp})}},i=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?r():this.once("_iceComplete",r))},n=s=>{this.destroy(hr(s,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(e).then(i).catch(n)}).catch(e=>{this.destroy(hr(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{!e.mid&&e.sender.track&&!e.requested&&(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=Xbe(e.sdp)),e.sdp=this.sdpTransform(e.sdp);let r=()=>{if(!this.destroyed){var s=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:s.type,sdp:s.sdp}),this.initiator||this._requestMissingTransceivers()}},i=()=>{this.destroyed||(this.trickle||this._iceComplete?r():this.once("_iceComplete",r))},n=s=>{this.destroy(hr(s,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(e).then(i).catch(n)}).catch(e=>{this.destroy(hr(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(hr(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(!this.destroyed){var e=this._pc.iceConnectionState,r=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,r),this.emit("iceStateChange",e,r),(e==="connected"||e==="completed")&&(this._pcReady=!0,this._maybeReady()),e==="failed"&&this.destroy(hr(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),e==="closed"&&this.destroy(hr(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}}getStats(e){let r=i=>(Object.prototype.toString.call(i.values)==="[object Array]"&&i.values.forEach(n=>{Object.assign(i,n)}),i);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(i=>{var n=[];i.forEach(s=>{n.push(r(s))}),e(null,n)},i=>e(i)):this._pc.getStats.length>0?this._pc.getStats(i=>{if(!this.destroyed){var n=[];i.result().forEach(s=>{var o={};s.names().forEach(a=>{o[a]=s.stat(a)}),o.id=s.id,o.type=s.type,o.timestamp=s.timestamp,n.push(r(o))}),e(null,n)}},i=>e(i)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;let e=()=>{this.destroyed||this.getStats((r,i)=>{if(this.destroyed)return;r&&(i=[]);var n={},s={},o={},a=!1;i.forEach(f=>{(f.type==="remotecandidate"||f.type==="remote-candidate")&&(n[f.id]=f),(f.type==="localcandidate"||f.type==="local-candidate")&&(s[f.id]=f),(f.type==="candidatepair"||f.type==="candidate-pair")&&(o[f.id]=f)});let c=f=>{a=!0;var d=s[f.localCandidateId];d&&(d.ip||d.address)?(this.localAddress=d.ip||d.address,this.localPort=Number(d.port)):d&&d.ipAddress?(this.localAddress=d.ipAddress,this.localPort=Number(d.portNumber)):typeof f.googLocalAddress=="string"&&(d=f.googLocalAddress.split(":"),this.localAddress=d[0],this.localPort=Number(d[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");var h=n[f.remoteCandidateId];h&&(h.ip||h.address)?(this.remoteAddress=h.ip||h.address,this.remotePort=Number(h.port)):h&&h.ipAddress?(this.remoteAddress=h.ipAddress,this.remotePort=Number(h.portNumber)):typeof f.googRemoteAddress=="string"&&(h=f.googRemoteAddress.split(":"),this.remoteAddress=h[0],this.remotePort=Number(h[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(i.forEach(f=>{f.type==="transport"&&f.selectedCandidatePairId&&c(o[f.selectedCandidatePairId]),(f.type==="googCandidatePair"&&f.googActiveConnection==="true"||(f.type==="candidatepair"||f.type==="candidate-pair")&&f.selected)&&c(f)}),!a&&(!Object.keys(o).length||Object.keys(s).length)){setTimeout(e,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(f){return this.destroy(hr(f,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');var u=this._cb;this._cb=null,u(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>bP||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&!this._firstStable&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation&&(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()),this._debug("negotiate"),this.emit("negotiate")),this._firstStable=!1,this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(!this.destroyed){var r=e.data;r instanceof ArrayBuffer&&(r=new Uint8Array(r)),this.push(r)}}_onChannelBufferedAmountLow(){if(!(this.destroyed||!this._cb)){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);var e=this._cb;this._cb=null,e(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(r=>{this._debug("on track"),this.emit("track",e.track,r),this._remoteTracks.push({track:e.track,stream:r}),!this._remoteStreams.some(i=>i.id===r.id)&&(this._remoteStreams.push(r),gP(()=>{this.emit("stream",r)}))})}_debug(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],Kyt.apply(null,e)}};Jf.WEBRTC_SUPPORT=!!Wbe();Jf.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};Jf.channelConfig={};Qbe.exports=Jf});var Jbe=p((KUt,Zbe)=>{l();"use strict";Zbe.exports={supportsFileReader:typeof self!="undefined"&&"FileReader"in self,supportsWebRTC:"RTCPeerConnection"in globalThis&&typeof navigator!="undefined"&&typeof navigator.mediaDevices!="undefined"&&"getUserMedia"in navigator.mediaDevices,supportsWebRTCDataChannels:"RTCPeerConnection"in globalThis}});var Ev=p(_v=>{l();"use strict";_v.CODE_P2P=421;_v.CODE_CIRCUIT=290;_v.CLOSE_TIMEOUT=2e3});var vP=p((zUt,e5e)=>{l();var Gyt=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Wyt=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e5e.exports=function(e){var r=e,i=e.indexOf("["),n=e.indexOf("]");i!=-1&&n!=-1&&(e=e.substring(0,i)+e.substring(i,n).replace(/:/g,";")+e.substring(n,e.length));for(var s=Gyt.exec(e||""),o={},a=14;a--;)o[Wyt[a]]=s[a]||"";return i!=-1&&n!=-1&&(o.source=r,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=Yyt(o,o.path),o.queryKey=Xyt(o,o.query),o};function Yyt(t,e){var r=/\/{2,9}/g,i=e.replace(r,"/").split("/");return(e.substr(0,1)=="/"||e.length===0)&&i.splice(0,1),e.substr(e.length-1,1)=="/"&&i.splice(i.length-1,1),i}function Xyt(t,e){var r={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,n,s){n&&(r[n]=s)}),r}});var r5e=p(Sv=>{l();"use strict";Object.defineProperty(Sv,"__esModule",{value:!0});Sv.url=void 0;var Qyt=vP(),t5e=be()("socket.io-client:url");function Zyt(t,e="",r){let i=t;r=r||typeof location!="undefined"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(t5e("protocol-less url %s",t),typeof r!="undefined"?t=r.protocol+"//"+t:t="https://"+t),t5e("parse %s",t),i=Qyt(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";let s=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+s+":"+i.port+e,i.href=i.protocol+"://"+s+(r&&r.port===i.port?"":":"+i.port),i}Sv.url=Zyt});var i5e=p(($Ut,wP)=>{l();try{wP.exports=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch(t){wP.exports=!1}});var cp=p((GUt,n5e)=>{l();n5e.exports=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())()});var _P=p((WUt,s5e)=>{l();var Jyt=i5e(),egt=cp();s5e.exports=function(t){let e=t.xdomain,r=t.xscheme,i=t.enablesXDR;try{if(typeof XMLHttpRequest!="undefined"&&(!e||Jyt))return new XMLHttpRequest}catch(n){}try{if(typeof XDomainRequest!="undefined"&&!r&&i)return new XDomainRequest}catch(n){}if(!e)try{return new egt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(n){}}});var EP=p((YUt,a5e)=>{l();var hc=Object.create(null);hc.open="0";hc.close="1";hc.ping="2";hc.pong="3";hc.message="4";hc.upgrade="5";hc.noop="6";var o5e=Object.create(null);Object.keys(hc).forEach(t=>{o5e[hc[t]]=t});var tgt={type:"error",data:"parser error"};a5e.exports={PACKET_TYPES:hc,PACKET_TYPES_REVERSE:o5e,ERROR_PACKET:tgt}});var f5e=p((XUt,u5e)=>{l();var{PACKET_TYPES:rgt}=EP(),igt=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",ngt=typeof ArrayBuffer=="function",sgt=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,ogt=({type:t,data:e},r,i)=>igt&&e instanceof Blob?r?i(e):c5e(e,i):ngt&&(e instanceof ArrayBuffer||sgt(e))?r?i(e):c5e(new Blob([e]),i):i(rgt[t]+(e||"")),c5e=(t,e)=>{let r=new FileReader;return r.onload=function(){let i=r.result.split(",")[1];e("b"+i)},r.readAsDataURL(t)};u5e.exports=ogt});var l5e=p(SP=>{l();(function(t){"use strict";SP.encode=function(e){var r=new Uint8Array(e),i,n=r.length,s="";for(i=0;i<n;i+=3)s+=t[r[i]>>2],s+=t[(r[i]&3)<<4|r[i+1]>>4],s+=t[(r[i+1]&15)<<2|r[i+2]>>6],s+=t[r[i+2]&63];return n%3==2?s=s.substring(0,s.length-1)+"=":n%3==1&&(s=s.substring(0,s.length-2)+"=="),s},SP.decode=function(e){var r=e.length*.75,i=e.length,n,s=0,o,a,c,u;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);var f=new ArrayBuffer(r),d=new Uint8Array(f);for(n=0;n<i;n+=4)o=t.indexOf(e[n]),a=t.indexOf(e[n+1]),c=t.indexOf(e[n+2]),u=t.indexOf(e[n+3]),d[s++]=o<<2|a>>4,d[s++]=(a&15)<<4|c>>2,d[s++]=(c&3)<<6|u&63;return f}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")});var p5e=p((ZUt,h5e)=>{l();var{PACKET_TYPES_REVERSE:xP,ERROR_PACKET:agt}=EP(),cgt=typeof ArrayBuffer=="function",AP;cgt&&(AP=l5e());var ugt=(t,e)=>{if(typeof t!="string")return{type:"message",data:d5e(t,e)};let r=t.charAt(0);return r==="b"?{type:"message",data:fgt(t.substring(1),e)}:xP[r]?t.length>1?{type:xP[r],data:t.substring(1)}:{type:xP[r]}:agt},fgt=(t,e)=>{if(AP){let r=AP.decode(t);return d5e(r,e)}else return{base64:!0,data:t}},d5e=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}};h5e.exports=ugt});var up=p((JUt,m5e)=>{l();var y5e=f5e(),g5e=p5e(),b5e=String.fromCharCode(30),lgt=(t,e)=>{let r=t.length,i=new Array(r),n=0;t.forEach((s,o)=>{y5e(s,!1,a=>{i[o]=a,++n===r&&e(i.join(b5e))})})},dgt=(t,e)=>{let r=t.split(b5e),i=[];for(let n=0;n<r.length;n++){let s=g5e(r[n],e);if(i.push(s),s.type==="error")break}return i};m5e.exports={protocol:4,encodePacket:y5e,encodePayload:lgt,decodePacket:g5e,decodePayload:dgt}});var fp=p((eFt,IP)=>{l();typeof IP!="undefined"&&(IP.exports=_s);function _s(t){if(t)return hgt(t)}function hgt(t){for(var e in _s.prototype)t[e]=_s.prototype[e];return t}_s.prototype.on=_s.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};_s.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this};_s.prototype.off=_s.prototype.removeListener=_s.prototype.removeAllListeners=_s.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,n=0;n<r.length;n++)if(i=r[n],i===e||i.fn===e){r.splice(n,1);break}return r.length===0&&delete this._callbacks["$"+t],this};_s.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(r){r=r.slice(0);for(var i=0,n=r.length;i<n;++i)r[i].apply(this,e)}return this};_s.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};_s.prototype.hasListeners=function(t){return!!this.listeners(t).length}});var lp=p((tFt,TP)=>{l();var xv=cp();TP.exports.pick=(t,...e)=>e.reduce((r,i)=>(t.hasOwnProperty(i)&&(r[i]=t[i]),r),{});var pgt=setTimeout,ygt=clearTimeout;TP.exports.installTimerFunctions=(t,e)=>{e.useNativeTimers?(t.setTimeoutFn=pgt.bind(xv),t.clearTimeoutFn=ygt.bind(xv)):(t.setTimeoutFn=setTimeout.bind(xv),t.clearTimeoutFn=clearTimeout.bind(xv))}});var Av=p((rFt,w5e)=>{l();var ggt=up(),bgt=fp(),{installTimerFunctions:mgt}=lp(),vgt=be()("engine.io-client:transport"),v5e=class extends bgt{constructor(e){super();mgt(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,r){let i=new Error(e);return i.type="TransportError",i.description=r,this.emit("error",i),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"?this.write(e):vgt("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,this.emit("open")}onData(e){let r=ggt.decodePacket(e,this.socket.binaryType);this.onPacket(r)}onPacket(e){this.emit("packet",e)}onClose(){this.readyState="closed",this.emit("close")}};w5e.exports=v5e});var Iv=p(RP=>{l();RP.encode=function(t){var e="";for(var r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e};RP.decode=function(t){for(var e={},r=t.split("&"),i=0,n=r.length;i<n;i++){var s=r[i].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}});var OP=p((nFt,A5e)=>{l();"use strict";var _5e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Tv=64,E5e={},S5e=0,el=0,x5e;function PP(t){var e="";do e=_5e[t%Tv]+e,t=Math.floor(t/Tv);while(t>0);return e}function wgt(t){var e=0;for(el=0;el<t.length;el++)e=e*Tv+E5e[t.charAt(el)];return e}function CP(){var t=PP(+new Date);return t!==x5e?(S5e=0,x5e=t):t+"."+PP(S5e++)}for(;el<Tv;el++)E5e[_5e[el]]=el;CP.encode=PP;CP.decode=wgt;A5e.exports=CP});var kP=p((sFt,R5e)=>{l();var _gt=Av(),Egt=Iv(),I5e=up(),Sgt=OP(),sa=be()("engine.io-client:polling"),T5e=class extends _gt{get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";let r=()=>{sa("paused"),this.readyState="paused",e()};if(this.polling||!this.writable){let i=0;this.polling&&(sa("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){sa("pre-pause polling complete"),--i||r()})),this.writable||(sa("we are currently writing - waiting to pause"),i++,this.once("drain",function(){sa("pre-pause writing complete"),--i||r()}))}else r()}poll(){sa("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(e){sa("polling got data %s",e);let r=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose(),!1;this.onPacket(i)};I5e.decodePayload(e,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():sa('ignoring poll - transport state "%s"',this.readyState))}doClose(){let e=()=>{sa("writing close packet"),this.write([{type:"close"}])};this.readyState==="open"?(sa("transport open - closing"),e()):(sa("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,I5e.encodePayload(e,r=>{this.doWrite(r,()=>{this.writable=!0,this.emit("drain")})})}uri(){let e=this.query||{},r=this.opts.secure?"https":"http",i="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=Sgt()),!this.supportsBinary&&!e.sid&&(e.b64=1),e=Egt.encode(e),this.opts.port&&(r==="https"&&Number(this.opts.port)!==443||r==="http"&&Number(this.opts.port)!==80)&&(i=":"+this.opts.port),e.length&&(e="?"+e);let n=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(n?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+e}};R5e.exports=T5e});var q5e=p((oFt,DP)=>{l();var P5e=_P(),xgt=kP(),Agt=fp(),{pick:Igt,installTimerFunctions:Tgt}=lp(),Rgt=cp(),qP=be()("engine.io-client:polling-xhr");function C5e(){}var Pgt=function(){return new P5e({xdomain:!1}).responseType!=null}(),O5e=class extends xgt{constructor(e){super(e);if(typeof location!="undefined"){let i=location.protocol==="https:",n=location.port;n||(n=i?443:80),this.xd=typeof location!="undefined"&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==i}let r=e&&e.forceBase64;this.supportsBinary=Pgt&&!r}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new oo(this.uri(),e)}doWrite(e,r){let i=this.request({method:"POST",data:e});i.on("success",r),i.on("error",n=>{this.onError("xhr post error",n)})}doPoll(){qP("xhr poll");let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",r=>{this.onError("xhr poll error",r)}),this.pollXhr=e}},oo=class extends Agt{constructor(e,r){super();Tgt(this,r),this.opts=r,this.method=r.method||"GET",this.uri=e,this.async=r.async!==!1,this.data=r.data!==void 0?r.data:null,this.create()}create(){let e=Igt(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;let r=this.xhr=new P5e(e);try{qP("xhr open %s: %s",this.method,this.uri),r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}}catch(i){}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}try{r.setRequestHeader("Accept","*/*")}catch(i){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),this.hasXDR()?(r.onload=()=>{this.onLoad()},r.onerror=()=>{this.onError(r.responseText)}):r.onreadystatechange=()=>{r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},qP("xhr data %s",this.data),r.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document!="undefined"&&(this.index=oo.requestsCount++,oo.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(e){this.emit("data",e),this.onSuccess()}onError(e){this.emit("error",e),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=C5e:this.xhr.onreadystatechange=C5e,e)try{this.xhr.abort()}catch(r){}typeof document!="undefined"&&delete oo.requests[this.index],this.xhr=null}}onLoad(){let e=this.xhr.responseText;e!==null&&this.onData(e)}hasXDR(){return typeof XDomainRequest!="undefined"&&!this.xs&&this.enablesXDR}abort(){this.cleanup()}};oo.requestsCount=0;oo.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",k5e);else if(typeof addEventListener=="function"){let t="onpagehide"in Rgt?"pagehide":"unload";addEventListener(t,k5e,!1)}}function k5e(){for(let t in oo.requests)oo.requests.hasOwnProperty(t)&&oo.requests[t].abort()}DP.exports=O5e;DP.exports.Request=oo});var M5e=p((aFt,B5e)=>{l();var Cgt=kP(),D5e=cp(),Ogt=/\n/g,kgt=/\\n/g,Rv,N5e=class extends Cgt{constructor(e){super(e);this.query=this.query||{},Rv||(Rv=D5e.___eio=D5e.___eio||[]),this.index=Rv.length,Rv.push(this.onData.bind(this)),this.query.j=this.index}get supportsBinary(){return!1}doClose(){this.script&&(this.script.onerror=()=>{},this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),super.doClose()}doPoll(){let e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=n=>{this.onError("jsonp poll error",n)};let r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(e,r):(document.head||document.body).appendChild(e),this.script=e,typeof navigator!="undefined"&&/gecko/i.test(navigator.userAgent)&&this.setTimeoutFn(function(){let n=document.createElement("iframe");document.body.appendChild(n),document.body.removeChild(n)},100)}doWrite(e,r){let i;if(!this.form){let o=document.createElement("form"),a=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=c,o.method="POST",o.setAttribute("accept-charset","utf-8"),a.name="d",o.appendChild(a),document.body.appendChild(o),this.form=o,this.area=a}this.form.action=this.uri();function n(){s(),r()}let s=()=>{if(this.iframe)try{this.form.removeChild(this.iframe)}catch(o){this.onError("jsonp polling iframe removal error",o)}try{let o='<iframe src="javascript:0" name="'+this.iframeId+'">';i=document.createElement(o)}catch(o){i=document.createElement("iframe"),i.name=this.iframeId,i.src="javascript:0"}i.id=this.iframeId,this.form.appendChild(i),this.iframe=i};s(),e=e.replace(kgt,`\\
`),this.area.value=e.replace(Ogt,"\\n");try{this.form.submit()}catch(o){}this.iframe.attachEvent?this.iframe.onreadystatechange=()=>{this.iframe.readyState==="complete"&&n()}:this.iframe.onload=n}};B5e.exports=N5e});var F5e=p((cFt,U5e)=>{l();var L5e=cp(),qgt=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,r)=>r(e,0))();U5e.exports={WebSocket:L5e.WebSocket||L5e.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer",nextTick:qgt}});var z5e=p((uFt,V5e)=>{l();var j5e=Av(),Dgt=up(),Ngt=Iv(),Bgt=OP(),{pick:Mgt}=lp(),{WebSocket:m3,usingBrowserWebSocket:NP,defaultBinaryType:Lgt,nextTick:Ugt}=F5e(),Fgt=be()("engine.io-client:websocket"),K5e=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",Pv=class extends j5e{constructor(e){super(e);this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let e=this.uri(),r=this.opts.protocols,i=K5e?{}:Mgt(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=NP&&!K5e?r?new m3(e,r):new m3(e):new m3(e,r,i)}catch(n){return this.emit("error",n)}this.ws.binaryType=this.socket.binaryType||Lgt,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let r=0;r<e.length;r++){let i=e[r],n=r===e.length-1;Dgt.encodePacket(i,this.supportsBinary,s=>{let o={};NP||(i.options&&(o.compress=i.options.compress),this.opts.perMessageDeflate&&(typeof s=="string"?Buffer.byteLength(s):s.length)<this.opts.perMessageDeflate.threshold&&(o.compress=!1));try{NP?this.ws.send(s):this.ws.send(s,o)}catch(a){Fgt("websocket closed before onclose event")}n&&Ugt(()=>{this.writable=!0,this.emit("drain")},this.setTimeoutFn)})}}onClose(){j5e.prototype.onClose.call(this)}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{},r=this.opts.secure?"wss":"ws",i="";this.opts.port&&(r==="wss"&&Number(this.opts.port)!==443||r==="ws"&&Number(this.opts.port)!==80)&&(i=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=Bgt()),this.supportsBinary||(e.b64=1),e=Ngt.encode(e),e.length&&(e="?"+e);let n=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(n?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+e}check(){return!!m3&&!("__initialize"in m3&&this.name===Pv.prototype.name)}};V5e.exports=Pv});var MP=p(BP=>{l();var jgt=_P(),Kgt=q5e(),Vgt=M5e(),zgt=z5e();BP.polling=Hgt;BP.websocket=zgt;function Hgt(t){let e,r=!1,i=!1,n=t.jsonp!==!1;if(typeof location!="undefined"){let s=location.protocol==="https:",o=location.port;o||(o=s?443:80),r=t.hostname!==location.hostname||o!==t.port,i=t.secure!==s}if(t.xdomain=r,t.xscheme=i,e=new jgt(t),"open"in e&&!t.forceJSONP)return new Kgt(t);if(!n)throw new Error("JSONP disabled");return new Vgt(t)}});var W5e=p((lFt,G5e)=>{l();var $gt=MP(),Ggt=fp(),ai=be()("engine.io-client:socket"),H5e=up(),$5e=vP(),Wgt=Iv(),{installTimerFunctions:Ygt}=lp(),pc=class extends Ggt{constructor(e,r={}){super();e&&typeof e=="object"&&(r=e,e=null),e?(e=$5e(e),r.hostname=e.host,r.secure=e.protocol==="https"||e.protocol==="wss",r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=$5e(r.host).host),Ygt(this,r),this.secure=r.secure!=null?r.secure:typeof location!="undefined"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=r.port||(typeof location!="undefined"&&location.port?location.port:this.secure?443:80),this.transports=r.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},r),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=Wgt.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){ai('creating transport "%s"',e);let r=Xgt(this.opts.query);r.EIO=H5e.protocol,r.transport=e,this.id&&(r.sid=this.id);let i=Object.assign({},this.opts.transportOptions[e],this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return ai("options: %j",i),new $gt[e](i)}open(){let e;if(this.opts.rememberUpgrade&&pc.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emit("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch(r){ai("error while creating transport: %s",r),this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){ai("setting transport %s",e.name),this.transport&&(ai("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",()=>{this.onClose("transport close")})}probe(e){ai('probing transport "%s"',e);let r=this.createTransport(e,{probe:1}),i=!1;pc.priorWebsocketSuccess=!1;let n=()=>{i||(ai('probe transport "%s" opened',e),r.send([{type:"ping",data:"probe"}]),r.once("packet",d=>{if(!i)if(d.type==="pong"&&d.data==="probe"){if(ai('probe transport "%s" pong',e),this.upgrading=!0,this.emit("upgrading",r),!r)return;pc.priorWebsocketSuccess=r.name==="websocket",ai('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{i||this.readyState!=="closed"&&(ai("changing transport and sending upgrade packet"),f(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emit("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{ai('probe transport "%s" failed',e);let h=new Error("probe error");h.transport=r.name,this.emit("upgradeError",h)}}))};function s(){i||(i=!0,f(),r.close(),r=null)}let o=d=>{let h=new Error("probe error: "+d);h.transport=r.name,s(),ai('probe transport "%s" failed because of error: %s',e,d),this.emit("upgradeError",h)};function a(){o("transport closed")}function c(){o("socket closed")}function u(d){r&&d.name!==r.name&&(ai('"%s" works - aborting "%s"',d.name,r.name),s())}let f=()=>{r.removeListener("open",n),r.removeListener("error",o),r.removeListener("close",a),this.removeListener("close",c),this.removeListener("upgrading",u)};r.once("open",n),r.once("error",o),r.once("close",a),this.once("close",c),this.once("upgrading",u),r.open()}onOpen(){if(ai("socket open"),this.readyState="open",pc.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){ai("starting upgrade probes");let e=0,r=this.upgrades.length;for(;e<r;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(ai('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("ping"),this.emit("pong");break;case"error":let r=new Error("server error");r.code=e.data,this.onError(r);break;case"message":this.emit("data",e.data),this.emit("message",e.data);break}else ai('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()}flush(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(ai("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}write(e,r,i){return this.sendPacket("message",e,r,i),this}send(e,r,i){return this.sendPacket("message",e,r,i),this}sendPacket(e,r,i,n){if(typeof r=="function"&&(n=r,r=void 0),typeof i=="function"&&(n=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;let s={type:e,data:r,options:i};this.emit("packetCreate",s),this.writeBuffer.push(s),n&&this.once("flush",n),this.flush()}close(){let e=()=>{this.onClose("forced close"),ai("socket closing - telling transport to close"),this.transport.close()},r=()=>{this.removeListener("upgrade",r),this.removeListener("upgradeError",r),e()},i=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}onError(e){ai("socket error %j",e),pc.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)}onClose(e,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(ai('socket close with reason: "%s"',e),this.clearTimeoutFn(this.pingIntervalTimer),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emit("close",e,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){let r=[],i=0,n=e.length;for(;i<n;i++)~this.transports.indexOf(e[i])&&r.push(e[i]);return r}};pc.priorWebsocketSuccess=!1;pc.protocol=H5e.protocol;function Xgt(t){let e={};for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}G5e.exports=pc});var Y5e=p((dFt,Wd)=>{l();var LP=W5e();Wd.exports=(t,e)=>new LP(t,e);Wd.exports.Socket=LP;Wd.exports.protocol=LP.protocol;Wd.exports.Transport=Av();Wd.exports.transports=MP();Wd.exports.parser=up()});var UP=p(dp=>{l();"use strict";Object.defineProperty(dp,"__esModule",{value:!0});dp.hasBinary=dp.isBinary=void 0;var Qgt=typeof ArrayBuffer=="function",Zgt=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,X5e=Object.prototype.toString,Jgt=typeof Blob=="function"||typeof Blob!="undefined"&&X5e.call(Blob)==="[object BlobConstructor]",e3t=typeof File=="function"||typeof File!="undefined"&&X5e.call(File)==="[object FileConstructor]";function Q5e(t){return Qgt&&(t instanceof ArrayBuffer||Zgt(t))||Jgt&&t instanceof Blob||e3t&&t instanceof File}dp.isBinary=Q5e;function Cv(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,i=t.length;r<i;r++)if(Cv(t[r]))return!0;return!1}if(Q5e(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Cv(t.toJSON(),!0);for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&Cv(t[r]))return!0;return!1}dp.hasBinary=Cv});var Z5e=p(hp=>{l();"use strict";Object.defineProperty(hp,"__esModule",{value:!0});hp.reconstructPacket=hp.deconstructPacket=void 0;var t3t=UP();function r3t(t){let e=[],r=t.data,i=t;return i.data=FP(r,e),i.attachments=e.length,{packet:i,buffers:e}}hp.deconstructPacket=r3t;function FP(t,e){if(!t)return t;if(t3t.isBinary(t)){let r={_placeholder:!0,num:e.length};return e.push(t),r}else if(Array.isArray(t)){let r=new Array(t.length);for(let i=0;i<t.length;i++)r[i]=FP(t[i],e);return r}else if(typeof t=="object"&&!(t instanceof Date)){let r={};for(let i in t)t.hasOwnProperty(i)&&(r[i]=FP(t[i],e));return r}return t}function i3t(t,e){return t.data=jP(t.data,e),t.attachments=void 0,t}hp.reconstructPacket=i3t;function jP(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=jP(t[r],e);else if(typeof t=="object")for(let r in t)t.hasOwnProperty(r)&&(t[r]=jP(t[r],e));return t}});var kv=p(oa=>{l();"use strict";Object.defineProperty(oa,"__esModule",{value:!0});oa.Decoder=oa.Encoder=oa.PacketType=oa.protocol=void 0;var n3t=fp(),J5e=Z5e(),eme=UP(),KP=be()("socket.io-parser");oa.protocol=5;var gi;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(gi=oa.PacketType||(oa.PacketType={}));var tme=class{encode(e){return KP("encoding packet %j",e),(e.type===gi.EVENT||e.type===gi.ACK)&&eme.hasBinary(e)?(e.type=e.type===gi.EVENT?gi.BINARY_EVENT:gi.BINARY_ACK,this.encodeAsBinary(e)):[this.encodeAsString(e)]}encodeAsString(e){let r=""+e.type;return(e.type===gi.BINARY_EVENT||e.type===gi.BINARY_ACK)&&(r+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(r+=e.nsp+","),e.id!=null&&(r+=e.id),e.data!=null&&(r+=JSON.stringify(e.data)),KP("encoded %j as %s",e,r),r}encodeAsBinary(e){let r=J5e.deconstructPacket(e),i=this.encodeAsString(r.packet),n=r.buffers;return n.unshift(i),n}};oa.Encoder=tme;var Ov=class extends n3t{constructor(){super()}add(e){let r;if(typeof e=="string")r=this.decodeString(e),r.type===gi.BINARY_EVENT||r.type===gi.BINARY_ACK?(this.reconstructor=new rme(r),r.attachments===0&&super.emit("decoded",r)):super.emit("decoded",r);else if(eme.isBinary(e)||e.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,super.emit("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let r=0,i={type:Number(e.charAt(0))};if(gi[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===gi.BINARY_EVENT||i.type===gi.BINARY_ACK){let s=r+1;for(;e.charAt(++r)!=="-"&&r!=e.length;);let o=e.substring(s,r);if(o!=Number(o)||e.charAt(r)!=="-")throw new Error("Illegal attachments");i.attachments=Number(o)}if(e.charAt(r+1)==="/"){let s=r+1;for(;++r&&!(e.charAt(r)===","||r===e.length););i.nsp=e.substring(s,r)}else i.nsp="/";let n=e.charAt(r+1);if(n!==""&&Number(n)==n){let s=r+1;for(;++r;){let o=e.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===e.length)break}i.id=Number(e.substring(s,r+1))}if(e.charAt(++r)){let s=s3t(e.substr(r));if(Ov.isPayloadValid(i.type,s))i.data=s;else throw new Error("invalid payload")}return KP("decoded %s as %j",e,i),i}static isPayloadValid(e,r){switch(e){case gi.CONNECT:return typeof r=="object";case gi.DISCONNECT:return r===void 0;case gi.CONNECT_ERROR:return typeof r=="string"||typeof r=="object";case gi.EVENT:case gi.BINARY_EVENT:return Array.isArray(r)&&r.length>0;case gi.ACK:case gi.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}};oa.Decoder=Ov;function s3t(t){try{return JSON.parse(t)}catch(e){return!1}}var rme=class{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){let r=J5e.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}});var VP=p(qv=>{l();"use strict";Object.defineProperty(qv,"__esModule",{value:!0});qv.on=void 0;function o3t(t,e,r){return t.on(e,r),function(){t.off(e,r)}}qv.on=o3t});var zP=p(Dv=>{l();"use strict";Object.defineProperty(Dv,"__esModule",{value:!0});Dv.StrictEventEmitter=void 0;var a3t=fp(),ime=class extends a3t{on(e,r){return super.on(e,r),this}once(e,r){return super.once(e,r),this}emit(e,...r){return super.emit(e,...r),this}emitReserved(e,...r){return super.emit(e,...r),this}listeners(e){return super.listeners(e)}};Dv.StrictEventEmitter=ime});var HP=p(Bv=>{l();"use strict";Object.defineProperty(Bv,"__esModule",{value:!0});Bv.Socket=void 0;var ao=kv(),Nv=VP(),c3t=zP(),co=be()("socket.io-client:socket"),u3t=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),nme=class extends c3t.StrictEventEmitter{constructor(e,r,i){super();this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=r,i&&i.auth&&(this.auth=i.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;let e=this.io;this.subs=[(0,Nv.on)(e,"open",this.onopen.bind(this)),(0,Nv.on)(e,"packet",this.onpacket.bind(this)),(0,Nv.on)(e,"error",this.onerror.bind(this)),(0,Nv.on)(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...r){if(u3t.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');r.unshift(e);let i={type:ao.PacketType.EVENT,data:r};i.options={},i.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"&&(co("emitting packet with ack id %d",this.ids),this.acks[this.ids]=r.pop(),i.id=this.ids++);let n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)?co("discard packet as the transport is not currently writable"):this.connected?this.packet(i):this.sendBuffer.push(i),this.flags={},this}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){co("transport is open - connecting"),typeof this.auth=="function"?this.auth(e=>{this.packet({type:ao.PacketType.CONNECT,data:e})}):this.packet({type:ao.PacketType.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e){co("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case ao.PacketType.CONNECT:if(e.data&&e.data.sid){let n=e.data.sid;this.onconnect(n)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ao.PacketType.EVENT:this.onevent(e);break;case ao.PacketType.BINARY_EVENT:this.onevent(e);break;case ao.PacketType.ACK:this.onack(e);break;case ao.PacketType.BINARY_ACK:this.onack(e);break;case ao.PacketType.DISCONNECT:this.ondisconnect();break;case ao.PacketType.CONNECT_ERROR:let i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){let r=e.data||[];co("emitting event %j",r),e.id!=null&&(co("attaching ack callback to event"),r.push(this.ack(e.id))),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){let r=this._anyListeners.slice();for(let i of r)i.apply(this,e)}super.emit.apply(this,e)}ack(e){let r=this,i=!1;return function(...n){i||(i=!0,co("sending ack %j",n),r.packet({type:ao.PacketType.ACK,id:e,data:n}))}}onack(e){let r=this.acks[e.id];typeof r=="function"?(co("calling ack %s with %j",e.id,e.data),r.apply(this,e.data),delete this.acks[e.id]):co("bad ack %s",e.id)}onconnect(e){co("socket connected with id %s",e),this.id=e,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>this.packet(e)),this.sendBuffer=[]}ondisconnect(){co("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(co("performing disconnect (%s)",this.nsp),this.packet({type:ao.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let r=this._anyListeners;for(let i=0;i<r.length;i++)if(e===r[i])return r.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}};Bv.Socket=nme});var ome=p((vFt,sme)=>{l();sme.exports=pp;function pp(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}pp.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-r:t+r}return Math.min(t,this.max)|0};pp.prototype.reset=function(){this.attempts=0};pp.prototype.setMin=function(t){this.ms=t};pp.prototype.setMax=function(t){this.max=t};pp.prototype.setJitter=function(t){this.jitter=t}});var $P=p(Mv=>{l();"use strict";Object.defineProperty(Mv,"__esModule",{value:!0});Mv.Manager=void 0;var f3t=Y5e(),l3t=lp(),d3t=HP(),h3t=kv(),Yd=VP(),p3t=ome(),y3t=zP(),tn=be()("socket.io-client:manager"),ame=class extends y3t.StrictEventEmitter{constructor(e,r){var i;super();this.nsps={},this.subs=[],e&&typeof e=="object"&&(r=e,e=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,(0,l3t.installTimerFunctions)(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((i=r.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new p3t({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=e;let n=r.parser||h3t;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var r;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(r=this.backoff)===null||r===void 0||r.setMin(e),this)}randomizationFactor(e){var r;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(r=this.backoff)===null||r===void 0||r.setJitter(e),this)}reconnectionDelayMax(e){var r;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(r=this.backoff)===null||r===void 0||r.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(tn("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;tn("opening %s",this.uri),this.engine=f3t(this.uri,this.opts);let r=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;let n=(0,Yd.on)(r,"open",function(){i.onopen(),e&&e()}),s=(0,Yd.on)(r,"error",o=>{tn("error"),i.cleanup(),i._readyState="closed",this.emitReserved("error",o),e?e(o):i.maybeReconnectOnOpen()});if(this._timeout!==!1){let o=this._timeout;tn("connect attempt will timeout after %d",o),o===0&&n();let a=this.setTimeoutFn(()=>{tn("connect attempt timed out after %d",o),n(),r.close(),r.emit("error",new Error("timeout"))},o);this.opts.autoUnref&&a.unref(),this.subs.push(function(){clearTimeout(a)})}return this.subs.push(n),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){tn("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push((0,Yd.on)(e,"ping",this.onping.bind(this)),(0,Yd.on)(e,"data",this.ondata.bind(this)),(0,Yd.on)(e,"error",this.onerror.bind(this)),(0,Yd.on)(e,"close",this.onclose.bind(this)),(0,Yd.on)(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){tn("error",e),this.emitReserved("error",e)}socket(e,r){let i=this.nsps[e];return i||(i=new d3t.Socket(this,e,r),this.nsps[e]=i),i}_destroy(e){let r=Object.keys(this.nsps);for(let i of r)if(this.nsps[i].active){tn("socket %s is still active, skipping close",i);return}this._close()}_packet(e){tn("writing packet %j",e);let r=this.encoder.encode(e);for(let i=0;i<r.length;i++)this.engine.write(r[i],e.options)}cleanup(){tn("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){tn("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this._readyState==="opening"&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e){tn("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)tn("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let r=this.backoff.duration();tn("will wait %dms before reconnect attempt",r),this._reconnecting=!0;let i=this.setTimeoutFn(()=>{e.skipReconnect||(tn("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(n=>{n?(tn("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",n)):(tn("reconnect success"),e.onreconnect())}))},r);this.opts.autoUnref&&i.unref(),this.subs.push(function(){clearTimeout(i)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}};Mv.Manager=ame});var lme=p((es,fme)=>{l();"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.io=es.Socket=es.Manager=es.protocol=void 0;var g3t=r5e(),cme=$P(),ume=be()("socket.io-client");fme.exports=es=Lv;var v3=es.managers={};function Lv(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};let r=(0,g3t.url)(t,e.path||"/socket.io"),i=r.source,n=r.id,s=r.path,o=v3[n]&&s in v3[n].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o,c;return a?(ume("ignoring socket cache for %s",i),c=new cme.Manager(i,e)):(v3[n]||(ume("new io instance for %s",i),v3[n]=new cme.Manager(i,e)),c=v3[n]),r.query&&!e.query&&(e.query=r.queryKey),c.socket(r.path,e)}es.io=Lv;var b3t=kv();Object.defineProperty(es,"protocol",{enumerable:!0,get:function(){return b3t.protocol}});es.connect=Lv;var m3t=$P();Object.defineProperty(es,"Manager",{enumerable:!0,get:function(){return m3t.Manager}});var v3t=HP();Object.defineProperty(es,"Socket",{enumerable:!0,get:function(){return v3t.Socket}});es.default=Lv});var GP=p((_Ft,dme)=>{l();var w3t=f8();dme.exports=t=>async e=>{e=w3t(e);let r=v=>{typeof v.return=="function"&&v.return()},i=null,n=null,s=v=>{i=v,n&&n(v),r(e)},o=null,a=!1,c=()=>{a=!0,o&&o()},u=null,f=!1,d=()=>{f=!0,u&&u()},h=null,y=()=>{h&&h()},g=()=>new Promise((v,A)=>{o=h=v,n=A,t.once("drain",y)}),m=()=>(r(e),new Promise((v,A)=>{if(a||f||i)return v();u=o=v,n=A})),E=()=>{t.removeListener("error",s),t.removeListener("close",c),t.removeListener("finish",d),t.removeListener("drain",y)};t.once("error",s),t.once("close",c),t.once("finish",d);try{for await(let v of e){if(!t.writable||t.destroyed||i)break;t.write(v)===!1&&await g()}}catch(v){i||t.destroy(),i=v}try{if(t.writable&&t.end(),await m(),i)throw i}finally{E()}}});var WP=p((EFt,hme)=>{l();var _3t=GP(),E3t=Yg();hme.exports=t=>({sink:_3t(t),source:E3t(t)})});var yme=p((SFt,pme)=>{l();var S3t=WP();pme.exports=t=>async function*(e){let r=S3t(t),i;if(r.sink(e).catch(n=>{i=n}),yield*r.source,i)throw i}});var gme=p((xFt,yp)=>{l();yp.exports=Yg();yp.exports.source=Yg();yp.exports.sink=GP();yp.exports.transform=yme();yp.exports.duplex=WP()});var YP=p((AFt,_me)=>{l();"use strict";var bme=nc(),x3t=gme(),{CLOSE_TIMEOUT:A3t}=Ev(),mme=oP(),vme=be(),Uv=vme("libp2p:webrtc-star:socket");Uv.error=vme("libp2p:webrtc-star:socket:error");var wme=(t,e)=>{if(!(!t||!e))try{return mme(t,e)}catch(r){return Uv.error(r),mme("0.0.0.0",e)}};_me.exports=(t,e={})=>{let{sink:r,source:i}=x3t.duplex(t),n=e.remoteAddr||wme(t.remoteAddress,t.remotePort),s=wme(t.localAddress,t.localPort),o={async sink(a){e.signal&&(a=bme(a,e.signal));try{await r(async function*(){for await(let c of a)yield c instanceof Uint8Array?c:c.slice()}())}catch(c){c.type!=="aborted"&&Uv.error(c)}},source:e.signal?bme(i,e.signal):i,conn:t,localAddr:s,remoteAddr:n,timeline:{open:Date.now()},close(){if(!t.destroyed)return new Promise((a,c)=>{let u=Date.now(),f=setTimeout(()=>{if(o.remoteAddr){let{host:d,port:h}=o.remoteAddr.toOptions();Uv("timeout closing socket to %s:%s after %dms, destroying it manually",d,h,Date.now()-u)}t.destroyed||t.destroy()},A3t);t.once("close",()=>{a()}),t.end(d=>{if(clearTimeout(f),o.timeline.close=Date.now(),d)return c(d)})})}};return t.once("close",()=>{o.timeline.close||(o.timeline.close=Date.now())}),o}});var XP=p((IFt,Sme)=>{l();"use strict";var{Multiaddr:Eme}=rt();function I3t(t){let e=t.toString().split("/"),r=t.protos()[1].name,i=t.protos()[2].name,n=t.stringTuples()[1][1];if(r!=="tcp"||i!=="ws"&&i!=="wss")throw new Error("invalid multiaddr: "+t.toString());if(!Eme.isName(t))return"http://"+e[2]+":"+e[4];if(i==="ws")return"http://"+e[2]+(n==="80"?"":":"+n);if(i==="wss")return"https://"+e[2]+(n==="443"?"":":"+n)}function T3t(t){let e="/libp2p-webrtc-star";if(t.indexOf(e)!==-1){t=t.substring(e.length,t.length);let r=new Eme(t),i=r.stringTuples().filter(n=>n[0]===421)[0];r=r.decapsulate("p2p"),r=r.encapsulate("/p2p-webrtc-star"),r=r.encapsulate(`/p2p/${i[1]}`),t=r.toString()}return t}Sme.exports={cleanUrlSIO:I3t,cleanMultiaddr:T3t}});var Tme=p((TFt,Ime)=>{l();"use strict";var R3t=gr(),xme=be(),Xd=xme("libp2p:webrtc-star:listener");Xd.error=xme("libp2p:webrtc-star:listener:error");var P3t=dP(),C3t=lme(),O3t=mP(),k3t=gf(),q3t=YP(),{cleanUrlSIO:D3t}=XP(),{CODE_P2P:Ame}=Ev(),N3t={transports:["websocket"],"force new connection":!0,path:"/socket.io-next/"};Ime.exports=({handler:t,upgrader:e},r,i={})=>{let n=new R3t,s,o;return n.__connections=[],n.__spChannels=new Map,n.__pendingIntents=new Map,n.listen=a=>{if(s)throw P3t(new Error("listener already in use"),"ERR_ALREADY_LISTENING");let c=k3t();s=a;let u;!a.protoCodes().includes(Ame)&&e.localPeer?u=a.encapsulate(`/p2p/${e.localPeer.toB58String()}`):u=a,n.on("error",()=>c.reject()),o=D3t(a),Xd("Dialing to Signalling Server on: "+o),n.io=C3t.connect(o,N3t);let f=d=>{if(d.answer||d.err||!d.intentId)return;let h=d.intentId,y=n.__pendingIntents.get(h);y||(y=[],n.__pendingIntents.set(h,y));let g=n.__spChannels.get(h);if(g){g.signal(d.signal);return}else if(d.signal.type!=="offer"){y.push(d);return}let m={trickle:!1,...i};r.wrtc&&(m.wrtc=r.wrtc),g=new O3t(m);let E=v=>{Xd.error("incoming connection errored",v)};g.on("error",E),g.once("close",(...v)=>{g.removeListener("error",E)}),g.on("signal",v=>{d.signal=v,d.answer=!0,n.io.emit("ss-handshake",d)}),g.signal(d.signal);for(let v of y)g.signal(v.signal);n.__pendingIntents.set(h,[]),g.once("connect",async()=>{let v=q3t(g);Xd("new inbound connection %s",v.remoteAddr);let A;try{A=await e.upgradeInbound(v)}catch(R){return Xd.error("inbound connection failed to upgrade",R),v.close()}if(!A.remoteAddr)try{A.remoteAddr=a.decapsulateCode(Ame).encapsulate(`/p2p/${A.remotePeer.toB58String()}`)}catch(R){Xd.error("could not determine remote address",R)}Xd("inbound connection %s upgraded",v.remoteAddr),B3t(n,v,h),n.emit("connection",A),t(A)}),n.__spChannels.set(h,g)};return n.io.once("connect_error",d=>c.reject(d)),n.io.once("error",d=>{n.emit("error",d),n.emit("close")}),n.io.on("ws-handshake",f),n.io.on("ws-peer",r._peerDiscovered),n.io.on("connect",()=>{n.io.emit("ss-join",u.toString())}),n.io.once("connect",()=>{n.emit("listening"),c.resolve()}),r.sigReferences.set(o,{listener:n,signallingAddr:u}),c.promise},n.close=async()=>{let a=r.sigReferences.get(o);a&&a.listener.io&&(a.listener.io.emit("ss-leave"),a.listener.io.close()),await Promise.all(n.__connections.map(c=>c.close())),n.emit("close"),n.removeAllListeners(),s=void 0,r.sigReferences.delete(o)},n.getAddrs=()=>[s],n};function B3t(t,e,r){t.__connections.push(e);let i=()=>{t.__connections=t.__connections.filter(n=>n!==e),t.__spChannels.delete(r),t.__pendingIntents.delete(r)};e.conn.once("close",i)}});var kme=p((RFt,Ome)=>{l();"use strict";var Rme=be(),wu=Rme("libp2p:webrtc-star");wu.error=Rme("libp2p:webrtc-star:error");var{EventEmitter:M3t}=gr(),Fv=dP(),L3t=O4(),{AbortError:Pme}=nc(),U3t=mP(),{supportsWebRTCDataChannels:F3t}=Jbe(),{Multiaddr:j3t}=rt(),K3t=Cl(),V3t=tt(),{CODE_CIRCUIT:z3t}=Ev(),H3t=Tme(),$3t=YP(),{cleanMultiaddr:G3t,cleanUrlSIO:W3t}=XP();function Y3t(){}var Cme=class{constructor(e={}){if(!e.upgrader)throw new Error("An upgrader must be provided. See https://github.com/libp2p/interface-transport#upgrader.");this._upgrader=e.upgrader,this.sioOptions={transports:["websocket"],"force new connection":!0},e.wrtc&&(this.wrtc=e.wrtc),this.sigReferences=new Map,this.discovery=new M3t,this.discovery.tag="webRTCStar",this.discovery._isStarted=!1,this.discovery.start=()=>{this.discovery._isStarted=!0},this.discovery.stop=()=>{this.discovery._isStarted=!1},this._peerDiscovered=this._peerDiscovered.bind(this)}async dial(e,r={}){let i=await this._connect(e,r),n=$3t(i,{remoteAddr:e,signal:r.signal});wu("new outbound connection %s",n.remoteAddr);let s=await this._upgrader.upgradeOutbound(n);return wu("outbound connection %s upgraded",n.remoteAddr),s}_connect(e,r={}){if(r.signal&&r.signal.aborted)throw new Pme;let i={initiator:!0,trickle:!1,...r.spOptions||{}};this.wrtc&&(i.wrtc=this.wrtc);let n=e.toOptions(),s=(~~(Math.random()*1e9)).toString(36)+Date.now();return new Promise((o,a)=>{let c=this.sigReferences.get(W3t(e));if(!c||!c.listener)return a(Fv(new Error("unknown signal server to use"),"ERR_UNKNOWN_SIGNAL_SERVER"));let u=c.listener.io,f=Date.now(),d;wu("dialing %s:%s",n.host,n.port);let h=new U3t(i),y=A=>{if(!d){let R=`connection error ${n.host}:${n.port}: ${A.message}`;wu.error(R),v(A)}},g=()=>{wu("connnection timeout %s:%s",n.host,n.port);let A=Fv(new Error(`connection timeout after ${Date.now()-f}ms`),"ERR_CONNECT_TIMEOUT");h.emit("error",A)},m=()=>{d=!0,wu("connection opened %s:%s",n.host,n.port),v(null)},E=()=>{wu.error("connection aborted %s:%s",n.host,n.port),h.destroy(),v(new Pme)},v=A=>{h.removeListener("timeout",g),h.removeListener("connect",m),r.signal&&r.signal.removeEventListener("abort",E),A?a(A):o(h)};h.on("error",y),h.once("timeout",g),h.once("connect",m),h.on("close",()=>{h.removeListener("error",y)}),r.signal&&r.signal.addEventListener("abort",E),h.on("signal",A=>{u.emit("ss-handshake",{intentId:s,srcMultiaddr:c.signallingAddr.toString(),dstMultiaddr:e.toString(),signal:A})}),u.on("ws-handshake",A=>{A.intentId===s&&A.err&&(h.destroy(),a(Fv(A.err instanceof Error?A.err:new Error(A.err),"ERR_SIGNALLING_FAILED"))),!(A.intentId!==s||!A.answer||h.destroyed)&&h.signal(A.signal)})})}createListener(e={},r){if(!F3t&&!this.wrtc)throw Fv(new Error("no WebRTC support"),"ERR_NO_WEBRTC_SUPPORT");return typeof e=="function"&&(r=e,e={}),r=r||Y3t,H3t({handler:r,upgrader:this._upgrader},this,e)}filter(e){return e=Array.isArray(e)?e:[e],e.filter(r=>r.protoCodes().includes(z3t)?!1:K3t.WebRTCStar.matches(r))}_peerDiscovered(e){if(!this.discovery._isStarted)return;wu("Peer Discovered:",e),e=G3t(e);let r=new j3t(e),i=V3t.createFromB58String(r.getPeerId());this.discovery.emit("peer",{id:i,multiaddrs:[r]})}};Ome.exports=L3t(Cme,{className:"WebRTCStar",symbolName:"@libp2p/js-libp2p-webrtc-star/webrtcstar"})});var Mme=p((PFt,Bme)=>{l();"use strict";var jv=as(),qme=bn(),QP=10*1024,Dme=class{constructor(){this._pool=new Uint8Array(QP),this._poolOffset=0}write(e){let r=this._pool,i=this._poolOffset;jv.encode(e.id<<3|e.type,r,i),i+=jv.encode.bytes,jv.encode(e.data?e.data.length:0,r,i),i+=jv.encode.bytes;let n=r.subarray(this._poolOffset,i);return QP-i<100?(this._pool=new Uint8Array(QP),this._poolOffset=0):this._poolOffset=i,e.data?[n,e.data]:n}},Nme=new Dme;Bme.exports=t=>async function*(){for await(let r of t)Array.isArray(r)?yield new qme(r.map(i=>Nme.write(i))):yield new qme(Nme.write(r))}()});var Fme=p((CFt,Ume)=>{l();"use strict";var Kv=as(),X3t=bn();Ume.exports=t=>async function*(){let r=new Lme;for await(let i of t){let n=r.write(i);n.length&&(yield n)}}();var Lme=class{constructor(){this._buffer=new X3t,this._bufferProxy=new Proxy({},{get:(e,r)=>r[0]==="l"?this._buffer[r]:this._buffer.get(parseInt(r))}),this._headerInfo=null}write(e){if(!e||!e.length)return[];this._buffer.append(e);let r=[];for(;;){if(!this._headerInfo)try{this._headerInfo=this._decodeHeader(this._bufferProxy)}catch(c){break}let{id:i,type:n,length:s,offset:o}=this._headerInfo;if(this._buffer.length-o<s)break;r.push({id:i,type:n,data:this._buffer.shallowSlice(o,o+s)}),this._buffer.consume(o+s),this._headerInfo=null}return r}_decodeHeader(e){let r=Kv.decode(e),i=Kv.decode.bytes,n=Kv.decode(e,i);return i+=Kv.decode.bytes,{id:r>>3,type:r&7,offset:i,length:n}}}});var jme=p(ZP=>{l();"use strict";ZP.encode=Mme();ZP.decode=Fme()});var eC=p((kFt,JP)=>{l();"use strict";var Kme=1<<20;JP.exports=t=>{t=t||Kme;let e=r=>{if(r.data&&r.data.length>t)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"})};return r=>async function*(){for await(let n of r)Array.isArray(n)?n.forEach(e):e(n),yield n}()};JP.exports.MAX_MSG_SIZE=Kme});var tC=p(w3=>{l();"use strict";var _u=Object.freeze({NEW_STREAM:0,MESSAGE_RECEIVER:1,MESSAGE_INITIATOR:2,CLOSE_RECEIVER:3,CLOSE_INITIATOR:4,RESET_RECEIVER:5,RESET_INITIATOR:6});w3.MessageTypes=_u;w3.InitiatorMessageTypes=Object.freeze({NEW_STREAM:_u.NEW_STREAM,MESSAGE:_u.MESSAGE_INITIATOR,CLOSE:_u.CLOSE_INITIATOR,RESET:_u.RESET_INITIATOR});w3.ReceiverMessageTypes=Object.freeze({MESSAGE:_u.MESSAGE_RECEIVER,CLOSE:_u.CLOSE_RECEIVER,RESET:_u.RESET_RECEIVER});w3.MessageTypeNames=Object.freeze(Object.entries(_u).reduce((t,e)=>(t[e[1]]=e[0],t),{}))});var Hme=p((DFt,zme)=>{l();"use strict";function Vme(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Q3t(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Vme(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),Vme(new n,r)}}zme.exports=Q3t});var Yme=p((NFt,Wme)=>{l();"use strict";var Z3t=nc(),$me=fh(),_3=be()("libp2p:mplex:stream"),J3t=Ha(),Gme=bn(),e6t=Hme(),{MAX_MSG_SIZE:t6t}=eC(),{InitiatorMessageTypes:r6t,ReceiverMessageTypes:i6t}=tC(),rC="ERR_MPLEX_STREAM_RESET",n6t="ERR_MPLEX_STREAM_ABORT";Wme.exports=({id:t,name:e,send:r,onEnd:i=()=>{},type:n="initiator",maxMsgSize:s=t6t})=>{let o=new $me,a=new $me,c=n==="initiator"?r6t:i6t,u=n==="initiator"?`i${t}`:`r${t}`;e=String(e??t);let f=!1,d=!1,h,y=E=>{f||(f=!0,_3("%s stream %s source end",n,e,E),E&&!h&&(h=E),d&&(m.timeline.close=Date.now(),i(h)))},g=E=>{d||(d=!0,_3("%s stream %s sink end",n,e,E),E&&!h&&(h=E),f&&(m.timeline.close=Date.now(),i(h)))},m={close:()=>m.source.end(),abort:E=>{_3("%s stream %s abort",n,e,E),m.source.end(E),o.abort(),g(E)},reset:()=>{let E=e6t(new Error("stream reset"),rC);a.abort(),m.source.end(E),g(E)},sink:async E=>{E=Z3t(E,[{signal:o.signal,options:{abortMessage:"stream aborted",abortCode:n6t}},{signal:a.signal,options:{abortMessage:"stream reset",abortCode:rC}}]),n==="initiator"&&r({id:t,type:c.NEW_STREAM,data:e});try{for await(let v of E)for(;v.length;){if(v.length<=s){r({id:t,type:c.MESSAGE,data:v});break}v=Gme.isBufferList(v)?v:new Gme(v),r({id:t,type:c.MESSAGE,data:v.shallowSlice(0,s)}),v.consume(s)}}catch(v){return v.code===rC?_3("%s stream %s reset",n,e):(_3("%s stream %s error",n,e,v),r({id:t,type:c.RESET})),m.source.end(v),g(v)}r({id:t,type:c.CLOSE}),g()},source:J3t(y),timeline:{open:Date.now(),close:null},id:u};return m}});var Jme=p((BFt,Zme)=>{l();"use strict";var s6t=Ir(),o6t=Ha(),Eu=be()("libp2p:mplex"),a6t=nc(),Xme=jme(),c6t=eC(),{MessageTypes:Qd,MessageTypeNames:Qme}=tC(),u6t=Yme(),iC=class{constructor(e){e=e||{},e=typeof e=="function"?{onStream:e}:e,this._streamId=0,this._streams={initiators:new Map,receivers:new Map},this._options=e,this.sink=this._createSink(),this.source=this._createSource(),this.onStream=e.onStream,this.onStreamEnd=e.onStreamEnd}get streams(){let e=[];return this._streams.initiators.forEach(r=>{e.push(r)}),this._streams.receivers.forEach(r=>{e.push(r)}),e}newStream(e){let r=this._streamId++;e=e==null?r.toString():String(e);let i=this._streams.initiators;return this._newStream({id:r,name:e,type:"initiator",registry:i})}_newReceiverStream({id:e,name:r}){let i=this._streams.receivers;return this._newStream({id:e,name:r,type:"receiver",registry:i})}_newStream({id:e,name:r,type:i,registry:n}){if(n.has(e))throw new Error(`${i} stream ${e} already exists!`);Eu("new %s stream %s %s",i,e,r);let a=u6t({id:e,name:r,send:c=>(Eu.enabled&&Eu("%s stream %s %s send",i,e,r,{...c,type:Qme[c.type],data:c.data&&c.data.slice()}),this.source.push(c)),type:i,onEnd:()=>{Eu("%s stream %s %s ended",i,e,r),n.delete(e),this.onStreamEnd&&this.onStreamEnd(a)},maxMsgSize:this._options.maxMsgSize});return n.set(e,a),a}_createSink(){return async e=>{this._options.signal&&(e=a6t(e,this._options.signal));try{await s6t(e,Xme.decode,c6t(this._options.maxMsgSize),async r=>{for await(let i of r)for(let n of i)this._handleIncoming(n)})}catch(r){return Eu("error in sink",r),this.source.end(r)}this.source.end()}}_createSource(){let r=o6t({onEnd:i=>{let{initiators:n,receivers:s}=this._streams;for(let o of n.values())o.abort(i);for(let o of s.values())o.abort(i)},writev:!0});return Object.assign(Xme.encode(r),{push:r.push,end:r.end,return:r.return})}_handleIncoming({id:e,type:r,data:i}){if(Eu.enabled&&Eu("incoming message",{id:e,type:Qme[r],data:i.slice()}),r===Qd.NEW_STREAM&&this.onStream){let o=this._newReceiverStream({id:e,name:i.toString()});return this.onStream(o)}let s=(r&1?this._streams.initiators:this._streams.receivers).get(e);if(!s)return Eu("missing stream %s",e);switch(r){case Qd.MESSAGE_INITIATOR:case Qd.MESSAGE_RECEIVER:s.source.push(i);break;case Qd.CLOSE_INITIATOR:case Qd.CLOSE_RECEIVER:s.close();break;case Qd.RESET_INITIATOR:case Qd.RESET_RECEIVER:s.reset();break;default:Eu("unknown message type %s",r)}}};iC.multicodec="/mplex/6.7.0";Zme.exports=iC});var t8e=p((MFt,e8e)=>{l();"use strict";e8e.exports=Jme()});var i8e=p(nC=>{l();"use strict";Object.defineProperty(nC,"__esModule",{value:!0});var r8e=65536,f6t=function(){function t(){this.isAvailable=!1,this.isInstantiated=!1;var e=typeof self!="undefined"?self.crypto||self.msCrypto:null;e&&e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}return t.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");for(var r=new Uint8Array(e),i=0;i<r.length;i+=r8e)this._crypto.getRandomValues(r.subarray(i,i+Math.min(r.length-i,r8e)));return r},t}();nC.BrowserRandomSource=f6t});var yc=p(sC=>{l();"use strict";Object.defineProperty(sC,"__esModule",{value:!0});function l6t(t){for(var e=0;e<t.length;e++)t[e]=0;return t}sC.wipe=l6t});var n8e=p(oC=>{l();"use strict";Object.defineProperty(oC,"__esModule",{value:!0});var d6t=yc(),h6t=function(){function t(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof ua!="undefined"){var e=wh();e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}return t.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");var r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");for(var i=new Uint8Array(e),n=0;n<i.length;n++)i[n]=r[n];return d6t.wipe(r),i},t}();oC.NodeRandomSource=h6t});var s8e=p(aC=>{l();"use strict";Object.defineProperty(aC,"__esModule",{value:!0});var p6t=i8e(),y6t=n8e(),g6t=function(){function t(){if(this.isAvailable=!1,this.name="",this._source=new p6t.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new y6t.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}return t.prototype.randomBytes=function(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)},t}();aC.SystemRandomSource=g6t});var o8e=p(Es=>{l();"use strict";Object.defineProperty(Es,"__esModule",{value:!0});function b6t(t,e){var r=t>>>16&65535,i=t&65535,n=e>>>16&65535,s=e&65535;return i*s+(r*s+i*n<<16>>>0)|0}Es.mul=Math.imul||b6t;function m6t(t,e){return t+e|0}Es.add=m6t;function v6t(t,e){return t-e|0}Es.sub=v6t;function w6t(t,e){return t<<e|t>>>32-e}Es.rotl=w6t;function _6t(t,e){return t<<32-e|t>>>e}Es.rotr=_6t;function E6t(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}Es.isInteger=Number.isInteger||E6t;Es.MAX_SAFE_INTEGER=9007199254740991;Es.isSafeInteger=function(t){return Es.isInteger(t)&&t>=-Es.MAX_SAFE_INTEGER&&t<=Es.MAX_SAFE_INTEGER}});var E3=p(gt=>{l();"use strict";Object.defineProperty(gt,"__esModule",{value:!0});var a8e=o8e();function S6t(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}gt.readInt16BE=S6t;function x6t(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}gt.readUint16BE=x6t;function A6t(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}gt.readInt16LE=A6t;function I6t(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}gt.readUint16LE=I6t;function c8e(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}gt.writeUint16BE=c8e;gt.writeInt16BE=c8e;function u8e(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}gt.writeUint16LE=u8e;gt.writeInt16LE=u8e;function cC(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}gt.readInt32BE=cC;function uC(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}gt.readUint32BE=uC;function fC(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}gt.readInt32LE=fC;function lC(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}gt.readUint32LE=lC;function Vv(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}gt.writeUint32BE=Vv;gt.writeInt32BE=Vv;function zv(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}gt.writeUint32LE=zv;gt.writeInt32LE=zv;function T6t(t,e){e===void 0&&(e=0);var r=cC(t,e),i=cC(t,e+4);return r*4294967296+i-(i>>31)*4294967296}gt.readInt64BE=T6t;function R6t(t,e){e===void 0&&(e=0);var r=uC(t,e),i=uC(t,e+4);return r*4294967296+i}gt.readUint64BE=R6t;function P6t(t,e){e===void 0&&(e=0);var r=fC(t,e),i=fC(t,e+4);return i*4294967296+r-(r>>31)*4294967296}gt.readInt64LE=P6t;function C6t(t,e){e===void 0&&(e=0);var r=lC(t,e),i=lC(t,e+4);return i*4294967296+r}gt.readUint64LE=C6t;function f8e(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Vv(t/4294967296>>>0,e,r),Vv(t>>>0,e,r+4),e}gt.writeUint64BE=f8e;gt.writeInt64BE=f8e;function l8e(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),zv(t>>>0,e,r),zv(t/4294967296>>>0,e,r+4),e}gt.writeUint64LE=l8e;gt.writeInt64LE=l8e;function O6t(t,e,r){if(r===void 0&&(r=0),t%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,n=1,s=t/8+r-1;s>=r;s--)i+=e[s]*n,n*=256;return i}gt.readUintBE=O6t;function k6t(t,e,r){if(r===void 0&&(r=0),t%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,n=1,s=r;s<r+t/8;s++)i+=e[s]*n,n*=256;return i}gt.readUintLE=k6t;function q6t(t,e,r,i){if(r===void 0&&(r=new Uint8Array(t/8)),i===void 0&&(i=0),t%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!a8e.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var n=1,s=t/8+i-1;s>=i;s--)r[s]=e/n&255,n*=256;return r}gt.writeUintBE=q6t;function D6t(t,e,r,i){if(r===void 0&&(r=new Uint8Array(t/8)),i===void 0&&(i=0),t%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!a8e.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var n=1,s=i;s<i+t/8;s++)r[s]=e/n&255,n*=256;return r}gt.writeUintLE=D6t;function N6t(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}gt.readFloat32BE=N6t;function B6t(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}gt.readFloat32LE=B6t;function M6t(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}gt.readFloat64BE=M6t;function L6t(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}gt.readFloat64LE=L6t;function U6t(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(r,t),e}gt.writeFloat32BE=U6t;function F6t(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(r,t,!0),e}gt.writeFloat32LE=F6t;function j6t(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(r,t),e}gt.writeFloat64BE=j6t;function K6t(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(r,t,!0),e}gt.writeFloat64LE=K6t});var y8e=p(aa=>{l();"use strict";Object.defineProperty(aa,"__esModule",{value:!0});var V6t=s8e(),z6t=E3(),d8e=yc();aa.defaultRandomSource=new V6t.SystemRandomSource;function dC(t,e){return e===void 0&&(e=aa.defaultRandomSource),e.randomBytes(t)}aa.randomBytes=dC;function H6t(t){t===void 0&&(t=aa.defaultRandomSource);var e=dC(4,t),r=z6t.readUint32LE(e);return d8e.wipe(e),r}aa.randomUint32=H6t;var h8e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function p8e(t,e,r){if(e===void 0&&(e=h8e),r===void 0&&(r=aa.defaultRandomSource),e.length<2)throw new Error("randomString charset is too short");if(e.length>256)throw new Error("randomString charset is too long");for(var i="",n=e.length,s=256-256%n;t>0;){for(var o=dC(Math.ceil(t*256/s),r),a=0;a<o.length&&t>0;a++){var c=o[a];c<s&&(i+=e.charAt(c%n),t--)}d8e.wipe(o)}return i}aa.randomString=p8e;function $6t(t,e,r){e===void 0&&(e=h8e),r===void 0&&(r=aa.defaultRandomSource);var i=Math.ceil(t/(Math.log(e.length)/Math.LN2));return p8e(i,e,r)}aa.randomStringForEntropy=$6t});var Gv=p(ts=>{l();"use strict";Object.defineProperty(ts,"__esModule",{value:!0});var G6t=y8e(),W6t=yc();ts.PUBLIC_KEY_LENGTH=32;ts.SECRET_KEY_LENGTH=32;ts.SHARED_KEY_LENGTH=32;function gc(t){var e=new Float64Array(16);if(t)for(var r=0;r<t.length;r++)e[r]=t[r];return e}var g8e=new Uint8Array(32);g8e[0]=9;var Y6t=gc([56129,1]);function hC(t){for(var e=1,r=0;r<16;r++){var i=t[r]+e+65535;e=Math.floor(i/65536),t[r]=i-e*65536}t[0]+=e-1+37*(e-1)}function S3(t,e,r){for(var i=~(r-1),n=0;n<16;n++){var s=i&(t[n]^e[n]);t[n]^=s,e[n]^=s}}function X6t(t,e){for(var r=gc(),i=gc(),n=0;n<16;n++)i[n]=e[n];hC(i),hC(i),hC(i);for(var s=0;s<2;s++){r[0]=i[0]-65517;for(var n=1;n<15;n++)r[n]=i[n]-65535-(r[n-1]>>16&1),r[n-1]&=65535;r[15]=i[15]-32767-(r[14]>>16&1);var o=r[15]>>16&1;r[14]&=65535,S3(i,r,1-o)}for(var n=0;n<16;n++)t[2*n]=i[n]&255,t[2*n+1]=i[n]>>8}function Q6t(t,e){for(var r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function Hv(t,e,r){for(var i=0;i<16;i++)t[i]=e[i]+r[i]}function $v(t,e,r){for(var i=0;i<16;i++)t[i]=e[i]-r[i]}function Su(t,e,r){var i,n,s=0,o=0,a=0,c=0,u=0,f=0,d=0,h=0,y=0,g=0,m=0,E=0,v=0,A=0,R=0,F=0,q=0,D=0,z=0,G=0,Y=0,P=0,b=0,w=0,S=0,C=0,B=0,W=0,K=0,M=0,_=0,L=r[0],ae=r[1],X=r[2],ne=r[3],oe=r[4],de=r[5],he=r[6],we=r[7],k=r[8],j=r[9],$=r[10],Z=r[11],I=r[12],U=r[13],V=r[14],N=r[15];i=e[0],s+=i*L,o+=i*ae,a+=i*X,c+=i*ne,u+=i*oe,f+=i*de,d+=i*he,h+=i*we,y+=i*k,g+=i*j,m+=i*$,E+=i*Z,v+=i*I,A+=i*U,R+=i*V,F+=i*N,i=e[1],o+=i*L,a+=i*ae,c+=i*X,u+=i*ne,f+=i*oe,d+=i*de,h+=i*he,y+=i*we,g+=i*k,m+=i*j,E+=i*$,v+=i*Z,A+=i*I,R+=i*U,F+=i*V,q+=i*N,i=e[2],a+=i*L,c+=i*ae,u+=i*X,f+=i*ne,d+=i*oe,h+=i*de,y+=i*he,g+=i*we,m+=i*k,E+=i*j,v+=i*$,A+=i*Z,R+=i*I,F+=i*U,q+=i*V,D+=i*N,i=e[3],c+=i*L,u+=i*ae,f+=i*X,d+=i*ne,h+=i*oe,y+=i*de,g+=i*he,m+=i*we,E+=i*k,v+=i*j,A+=i*$,R+=i*Z,F+=i*I,q+=i*U,D+=i*V,z+=i*N,i=e[4],u+=i*L,f+=i*ae,d+=i*X,h+=i*ne,y+=i*oe,g+=i*de,m+=i*he,E+=i*we,v+=i*k,A+=i*j,R+=i*$,F+=i*Z,q+=i*I,D+=i*U,z+=i*V,G+=i*N,i=e[5],f+=i*L,d+=i*ae,h+=i*X,y+=i*ne,g+=i*oe,m+=i*de,E+=i*he,v+=i*we,A+=i*k,R+=i*j,F+=i*$,q+=i*Z,D+=i*I,z+=i*U,G+=i*V,Y+=i*N,i=e[6],d+=i*L,h+=i*ae,y+=i*X,g+=i*ne,m+=i*oe,E+=i*de,v+=i*he,A+=i*we,R+=i*k,F+=i*j,q+=i*$,D+=i*Z,z+=i*I,G+=i*U,Y+=i*V,P+=i*N,i=e[7],h+=i*L,y+=i*ae,g+=i*X,m+=i*ne,E+=i*oe,v+=i*de,A+=i*he,R+=i*we,F+=i*k,q+=i*j,D+=i*$,z+=i*Z,G+=i*I,Y+=i*U,P+=i*V,b+=i*N,i=e[8],y+=i*L,g+=i*ae,m+=i*X,E+=i*ne,v+=i*oe,A+=i*de,R+=i*he,F+=i*we,q+=i*k,D+=i*j,z+=i*$,G+=i*Z,Y+=i*I,P+=i*U,b+=i*V,w+=i*N,i=e[9],g+=i*L,m+=i*ae,E+=i*X,v+=i*ne,A+=i*oe,R+=i*de,F+=i*he,q+=i*we,D+=i*k,z+=i*j,G+=i*$,Y+=i*Z,P+=i*I,b+=i*U,w+=i*V,S+=i*N,i=e[10],m+=i*L,E+=i*ae,v+=i*X,A+=i*ne,R+=i*oe,F+=i*de,q+=i*he,D+=i*we,z+=i*k,G+=i*j,Y+=i*$,P+=i*Z,b+=i*I,w+=i*U,S+=i*V,C+=i*N,i=e[11],E+=i*L,v+=i*ae,A+=i*X,R+=i*ne,F+=i*oe,q+=i*de,D+=i*he,z+=i*we,G+=i*k,Y+=i*j,P+=i*$,b+=i*Z,w+=i*I,S+=i*U,C+=i*V,B+=i*N,i=e[12],v+=i*L,A+=i*ae,R+=i*X,F+=i*ne,q+=i*oe,D+=i*de,z+=i*he,G+=i*we,Y+=i*k,P+=i*j,b+=i*$,w+=i*Z,S+=i*I,C+=i*U,B+=i*V,W+=i*N,i=e[13],A+=i*L,R+=i*ae,F+=i*X,q+=i*ne,D+=i*oe,z+=i*de,G+=i*he,Y+=i*we,P+=i*k,b+=i*j,w+=i*$,S+=i*Z,C+=i*I,B+=i*U,W+=i*V,K+=i*N,i=e[14],R+=i*L,F+=i*ae,q+=i*X,D+=i*ne,z+=i*oe,G+=i*de,Y+=i*he,P+=i*we,b+=i*k,w+=i*j,S+=i*$,C+=i*Z,B+=i*I,W+=i*U,K+=i*V,M+=i*N,i=e[15],F+=i*L,q+=i*ae,D+=i*X,z+=i*ne,G+=i*oe,Y+=i*de,P+=i*he,b+=i*we,w+=i*k,S+=i*j,C+=i*$,B+=i*Z,W+=i*I,K+=i*U,M+=i*V,_+=i*N,s+=38*q,o+=38*D,a+=38*z,c+=38*G,u+=38*Y,f+=38*P,d+=38*b,h+=38*w,y+=38*S,g+=38*C,m+=38*B,E+=38*W,v+=38*K,A+=38*M,R+=38*_,n=1,i=s+n+65535,n=Math.floor(i/65536),s=i-n*65536,i=o+n+65535,n=Math.floor(i/65536),o=i-n*65536,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=c+n+65535,n=Math.floor(i/65536),c=i-n*65536,i=u+n+65535,n=Math.floor(i/65536),u=i-n*65536,i=f+n+65535,n=Math.floor(i/65536),f=i-n*65536,i=d+n+65535,n=Math.floor(i/65536),d=i-n*65536,i=h+n+65535,n=Math.floor(i/65536),h=i-n*65536,i=y+n+65535,n=Math.floor(i/65536),y=i-n*65536,i=g+n+65535,n=Math.floor(i/65536),g=i-n*65536,i=m+n+65535,n=Math.floor(i/65536),m=i-n*65536,i=E+n+65535,n=Math.floor(i/65536),E=i-n*65536,i=v+n+65535,n=Math.floor(i/65536),v=i-n*65536,i=A+n+65535,n=Math.floor(i/65536),A=i-n*65536,i=R+n+65535,n=Math.floor(i/65536),R=i-n*65536,i=F+n+65535,n=Math.floor(i/65536),F=i-n*65536,s+=n-1+37*(n-1),n=1,i=s+n+65535,n=Math.floor(i/65536),s=i-n*65536,i=o+n+65535,n=Math.floor(i/65536),o=i-n*65536,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=c+n+65535,n=Math.floor(i/65536),c=i-n*65536,i=u+n+65535,n=Math.floor(i/65536),u=i-n*65536,i=f+n+65535,n=Math.floor(i/65536),f=i-n*65536,i=d+n+65535,n=Math.floor(i/65536),d=i-n*65536,i=h+n+65535,n=Math.floor(i/65536),h=i-n*65536,i=y+n+65535,n=Math.floor(i/65536),y=i-n*65536,i=g+n+65535,n=Math.floor(i/65536),g=i-n*65536,i=m+n+65535,n=Math.floor(i/65536),m=i-n*65536,i=E+n+65535,n=Math.floor(i/65536),E=i-n*65536,i=v+n+65535,n=Math.floor(i/65536),v=i-n*65536,i=A+n+65535,n=Math.floor(i/65536),A=i-n*65536,i=R+n+65535,n=Math.floor(i/65536),R=i-n*65536,i=F+n+65535,n=Math.floor(i/65536),F=i-n*65536,s+=n-1+37*(n-1),t[0]=s,t[1]=o,t[2]=a,t[3]=c,t[4]=u,t[5]=f,t[6]=d,t[7]=h,t[8]=y,t[9]=g,t[10]=m,t[11]=E,t[12]=v,t[13]=A,t[14]=R,t[15]=F}function x3(t,e){Su(t,e,e)}function Z6t(t,e){for(var r=gc(),i=0;i<16;i++)r[i]=e[i];for(var i=253;i>=0;i--)x3(r,r),i!==2&&i!==4&&Su(r,r,e);for(var i=0;i<16;i++)t[i]=r[i]}function pC(t,e){for(var r=new Uint8Array(32),i=new Float64Array(80),n=gc(),s=gc(),o=gc(),a=gc(),c=gc(),u=gc(),f=0;f<31;f++)r[f]=t[f];r[31]=t[31]&127|64,r[0]&=248,Q6t(i,e);for(var f=0;f<16;f++)s[f]=i[f];n[0]=a[0]=1;for(var f=254;f>=0;--f){var d=r[f>>>3]>>>(f&7)&1;S3(n,s,d),S3(o,a,d),Hv(c,n,o),$v(n,n,o),Hv(o,s,a),$v(s,s,a),x3(a,c),x3(u,n),Su(n,o,n),Su(o,s,c),Hv(c,n,o),$v(n,n,o),x3(s,n),$v(o,a,u),Su(n,o,Y6t),Hv(n,n,a),Su(o,o,n),Su(n,a,u),Su(a,s,i),x3(s,c),S3(n,s,d),S3(o,a,d)}for(var f=0;f<16;f++)i[f+16]=n[f],i[f+32]=o[f],i[f+48]=s[f],i[f+64]=a[f];var h=i.subarray(32),y=i.subarray(16);Z6t(h,h),Su(y,y,h);var g=new Uint8Array(32);return X6t(g,y),g}ts.scalarMult=pC;function b8e(t){return pC(t,g8e)}ts.scalarMultBase=b8e;function m8e(t){if(t.length!==ts.SECRET_KEY_LENGTH)throw new Error("x25519: seed must be "+ts.SECRET_KEY_LENGTH+" bytes");var e=new Uint8Array(t),r=b8e(e);return{publicKey:r,secretKey:e}}ts.generateKeyPairFromSeed=m8e;function J6t(t){var e=G6t.randomBytes(32,t),r=m8e(e);return W6t.wipe(e),r}ts.generateKeyPair=J6t;function e4t(t,e,r){if(r===void 0&&(r=!1),t.length!==ts.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(e.length!==ts.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");var i=pC(t,e);if(r){for(var n=0,s=0;s<i.length;s++)n|=i[s];if(n===0)throw new Error("X25519: invalid shared key")}return i}ts.sharedKey=e4t});var _8e=p(($Ft,w8e)=>{l();"use strict";var t4t=BA(),r4t=N1(),v8e=Xo();w8e.exports=(t,e={})=>{let r=r4t(t),i=v8e.decode.fromReader(r.reader,e),n=!1,s={read:async o=>{let{value:a,done:c}=await r.reader.next(o);if(c&&a.length<o)throw new Error("Couldn't read enough bytes");if(n=c,!a)throw new Error("Value is null");return a},readLP:async()=>{let{value:o,done:a}=await i.next();if(n=a,!o)throw new Error("Value is null");return o},readPB:async o=>{let a=await s.readLP();if(!a)throw new Error("Value is null");let c=t4t(a)?a:a.slice();return o.decode(c)},write:o=>{r.writer.push(o)},writeLP:o=>{s.write(v8e.encode.single(o,e))},writePB:(o,a)=>{s.writeLP(a.encode(o))},pb:o=>({read:()=>s.readPB(o),write:a=>s.writePB(a,o)}),unwrap:()=>(r.rest(),r.stream)};return s}});var S8e=p((GFt,E8e)=>{l();"use strict";var i4t=f8();E8e.exports=function(){let e,r,i=async s=>{if(e)throw new Error("already piped");e=i4t(s),r&&r(e)},n={[Symbol.asyncIterator](){return this},next(){return e?e.next():new Promise(s=>{r=o=>{r=null,s(o.next())}})}};return{sink:i,source:n}}});var I8e=p((WFt,A8e)=>{l();var x8e=S8e();A8e.exports=function(){var t=x8e(),e=x8e();return[{source:t.source,sink:e.sink},{source:e.source,sink:t.sink}]}});var T8e=p(yC=>{l();"use strict";Object.defineProperty(yC,"__esModule",{value:!0});function n4t(t){return typeof t.saveState!="undefined"&&typeof t.restoreState!="undefined"&&typeof t.cleanSavedState!="undefined"}yC.isSerializableHash=n4t});var Wv=p(gp=>{l();"use strict";Object.defineProperty(gp,"__esModule",{value:!0});function s4t(t,e,r){return~(t-1)&e|t-1&r}gp.select=s4t;function o4t(t,e){return(t|0)-(e|0)-1>>>31&1}gp.lessOrEqual=o4t;function R8e(t,e){if(t.length!==e.length)return 0;for(var r=0,i=0;i<t.length;i++)r|=t[i]^e[i];return 1&r-1>>>8}gp.compare=R8e;function a4t(t,e){return t.length===0||e.length===0?!1:R8e(t,e)!==0}gp.equal=a4t});var C8e=p(A3=>{l();"use strict";Object.defineProperty(A3,"__esModule",{value:!0});var bc=T8e(),c4t=Wv(),u4t=yc(),P8e=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(i).clean():i.set(r);for(var n=0;n<i.length;n++)i[n]^=54;this._inner.update(i);for(var n=0;n<i.length;n++)i[n]^=54^92;this._outer.update(i),bc.isSerializableHash(this._inner)&&bc.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),u4t.wipe(i)}return t.prototype.reset=function(){if(!bc.isSerializableHash(this._inner)||!bc.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){bc.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),bc.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!bc.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!bc.isSerializableHash(this._inner)||!bc.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!bc.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();A3.HMAC=P8e;function f4t(t,e,r){var i=new P8e(t,e);i.update(r);var n=i.digest();return i.clean(),n}A3.hmac=f4t;A3.equal=c4t.equal});var q8e=p(gC=>{l();"use strict";Object.defineProperty(gC,"__esModule",{value:!0});var O8e=C8e(),k8e=yc(),l4t=function(){function t(e,r,i,n){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=n;var s=O8e.hmac(this._hash,i,r);this._hmac=new O8e.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),i=0;i<r.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[i]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),k8e.wipe(this._buffer),k8e.wipe(this._counter),this._bufpos=0},t}();gC.HKDF=l4t});var mC=p(tl=>{l();"use strict";Object.defineProperty(tl,"__esModule",{value:!0});var Yv=E3(),Xv=yc();tl.DIGEST_LENGTH=32;tl.BLOCK_SIZE=64;var D8e=function(){function t(){this.digestLength=tl.DIGEST_LENGTH,this.blockSize=tl.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){Xv.wipe(this._buffer),Xv.wipe(this._temp),this.reset()},t.prototype.update=function(e,r){if(r===void 0&&(r=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var i=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&r>0;)this._buffer[this._bufferLength++]=e[i++],r--;this._bufferLength===this.blockSize&&(bC(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(i=bC(this._temp,this._state,e,i,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=e[i++],r--;return this},t.prototype.finish=function(e){if(!this._finished){var r=this._bytesHashed,i=this._bufferLength,n=r/536870912|0,s=r<<3,o=r%64<56?64:128;this._buffer[i]=128;for(var a=i+1;a<o-8;a++)this._buffer[a]=0;Yv.writeUint32BE(n,this._buffer,o-8),Yv.writeUint32BE(s,this._buffer,o-4),bC(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(var a=0;a<this.digestLength/4;a++)Yv.writeUint32BE(this._state[a],e,a*4);return this},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(e){Xv.wipe(e.state),e.buffer&&Xv.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},t}();tl.SHA256=D8e;var d4t=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function bC(t,e,r,i,n){for(;n>=64;){for(var s=e[0],o=e[1],a=e[2],c=e[3],u=e[4],f=e[5],d=e[6],h=e[7],y=0;y<16;y++){var g=i+y*4;t[y]=Yv.readUint32BE(r,g)}for(var y=16;y<64;y++){var m=t[y-2],E=(m>>>17|m<<32-17)^(m>>>19|m<<32-19)^m>>>10;m=t[y-15];var v=(m>>>7|m<<32-7)^(m>>>18|m<<32-18)^m>>>3;t[y]=(E+t[y-7]|0)+(v+t[y-16]|0)}for(var y=0;y<64;y++){var E=(((u>>>6|u<<32-6)^(u>>>11|u<<32-11)^(u>>>25|u<<32-25))+(u&f^~u&d)|0)+(h+(d4t[y]+t[y]|0)|0)|0,v=((s>>>2|s<<32-2)^(s>>>13|s<<32-13)^(s>>>22|s<<32-22))+(s&o^s&a^o&a)|0;h=d,d=f,f=u,u=c+E|0,c=a,a=o,o=s,s=E+v|0}e[0]+=s,e[1]+=o,e[2]+=a,e[3]+=c,e[4]+=u,e[5]+=f,e[6]+=d,e[7]+=h,i+=64,n-=64}return i}function h4t(t){var e=new D8e;e.update(t);var r=e.digest();return e.clean(),r}tl.hash=h4t});var B8e=p((N8e,I3)=>{l();"use strict";(function(t,e){typeof define=="function"&&define.amd?define(["protobufjs/minimal"],e):typeof ua=="function"&&typeof I3=="object"&&I3&&I3.exports&&(I3.exports=e(qi()))})(N8e,function(t){"use strict";var e=t.Reader,r=t.Writer,i=t.util,n=t.roots["libp2p-noise"]||(t.roots["libp2p-noise"]={});return n.pb=function(){var s={};return s.NoiseHandshakePayload=function(){function o(a){if(a)for(var c=Object.keys(a),u=0;u<c.length;++u)a[c[u]]!=null&&(this[c[u]]=a[c[u]])}return o.prototype.identityKey=i.newBuffer([]),o.prototype.identitySig=i.newBuffer([]),o.prototype.data=i.newBuffer([]),o.create=function(c){return new o(c)},o.encode=function(c,u){return u||(u=r.create()),c.identityKey!=null&&Object.hasOwnProperty.call(c,"identityKey")&&u.uint32(10).bytes(c.identityKey),c.identitySig!=null&&Object.hasOwnProperty.call(c,"identitySig")&&u.uint32(18).bytes(c.identitySig),c.data!=null&&Object.hasOwnProperty.call(c,"data")&&u.uint32(26).bytes(c.data),u},o.encodeDelimited=function(c,u){return this.encode(c,u).ldelim()},o.decode=function(c,u){c instanceof e||(c=e.create(c));for(var f=u===void 0?c.len:c.pos+u,d=new n.pb.NoiseHandshakePayload;c.pos<f;){var h=c.uint32();switch(h>>>3){case 1:d.identityKey=c.bytes();break;case 2:d.identitySig=c.bytes();break;case 3:d.data=c.bytes();break;default:c.skipType(h&7);break}}return d},o.decodeDelimited=function(c){return c instanceof e||(c=new e(c)),this.decode(c,c.uint32())},o.verify=function(c){return typeof c!="object"||c===null?"object expected":c.identityKey!=null&&c.hasOwnProperty("identityKey")&&!(c.identityKey&&typeof c.identityKey.length=="number"||i.isString(c.identityKey))?"identityKey: buffer expected":c.identitySig!=null&&c.hasOwnProperty("identitySig")&&!(c.identitySig&&typeof c.identitySig.length=="number"||i.isString(c.identitySig))?"identitySig: buffer expected":c.data!=null&&c.hasOwnProperty("data")&&!(c.data&&typeof c.data.length=="number"||i.isString(c.data))?"data: buffer expected":null},o.fromObject=function(c){if(c instanceof n.pb.NoiseHandshakePayload)return c;var u=new n.pb.NoiseHandshakePayload;return c.identityKey!=null&&(typeof c.identityKey=="string"?i.base64.decode(c.identityKey,u.identityKey=i.newBuffer(i.base64.length(c.identityKey)),0):c.identityKey.length&&(u.identityKey=c.identityKey)),c.identitySig!=null&&(typeof c.identitySig=="string"?i.base64.decode(c.identitySig,u.identitySig=i.newBuffer(i.base64.length(c.identitySig)),0):c.identitySig.length&&(u.identitySig=c.identitySig)),c.data!=null&&(typeof c.data=="string"?i.base64.decode(c.data,u.data=i.newBuffer(i.base64.length(c.data)),0):c.data.length&&(u.data=c.data)),u},o.toObject=function(c,u){u||(u={});var f={};return u.defaults&&(u.bytes===String?f.identityKey="":(f.identityKey=[],u.bytes!==Array&&(f.identityKey=i.newBuffer(f.identityKey))),u.bytes===String?f.identitySig="":(f.identitySig=[],u.bytes!==Array&&(f.identitySig=i.newBuffer(f.identitySig))),u.bytes===String?f.data="":(f.data=[],u.bytes!==Array&&(f.data=i.newBuffer(f.data)))),c.identityKey!=null&&c.hasOwnProperty("identityKey")&&(f.identityKey=u.bytes===String?i.base64.encode(c.identityKey,0,c.identityKey.length):u.bytes===Array?Array.prototype.slice.call(c.identityKey):c.identityKey),c.identitySig!=null&&c.hasOwnProperty("identitySig")&&(f.identitySig=u.bytes===String?i.base64.encode(c.identitySig,0,c.identitySig.length):u.bytes===Array?Array.prototype.slice.call(c.identitySig):c.identitySig),c.data!=null&&c.hasOwnProperty("data")&&(f.data=u.bytes===String?i.base64.encode(c.data,0,c.data.length):u.bytes===Array?Array.prototype.slice.call(c.data):c.data),f},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s}(),n})});var rl=p(Gt=>{l();"use strict";var p4t=Gt&&Gt.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),y4t=Gt&&Gt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),g4t=Gt&&Gt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&p4t(e,t,r);return y4t(e,t),e},b4t=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.isValidPublicKey=Gt.getHkdf=Gt.verifySignedPayload=Gt.getHandshakePayload=Gt.decodePayload=Gt.getPeerIdFromPayload=Gt.signPayload=Gt.createHandshakePayload=Gt.getPayload=Gt.generateKeypair=void 0;var m4t=q8e(),v4t=mC(),w4t=g4t(Gv()),rs=Vt(),vC=b4t(tt()),_4t=La(),E4t=B8e(),S4t=(di(),li),Qv=E4t.pb.NoiseHandshakePayload;function x4t(){let t=w4t.generateKeyPair();return{publicKey:rs.Buffer.from(t.publicKey.buffer,t.publicKey.byteOffset,t.publicKey.length),privateKey:rs.Buffer.from(t.secretKey.buffer,t.secretKey.byteOffset,t.secretKey.length)}}Gt.generateKeypair=x4t;async function A4t(t,e,r){let i=await L8e(t,wC(e)),n=r??rs.Buffer.alloc(0);return M8e(t.marshalPubKey(),i,n)}Gt.getPayload=A4t;function M8e(t,e,r){let i=Qv.create({identityKey:rs.Buffer.from(t),identitySig:e,data:r??null});return rs.Buffer.from(Qv.encode(i).finish())}Gt.createHandshakePayload=M8e;async function L8e(t,e){return rs.Buffer.from(await t.privKey.sign(e))}Gt.signPayload=L8e;async function I4t(t){return await vC.default.createFromPubKey(rs.Buffer.from(t.identityKey))}Gt.getPeerIdFromPayload=I4t;function T4t(t){return Qv.toObject(Qv.decode(rs.Buffer.from(t)))}Gt.decodePayload=T4t;function wC(t){return rs.Buffer.concat([rs.Buffer.from("noise-libp2p-static-key:"),t])}Gt.getHandshakePayload=wC;async function R4t(t,e){let r=await vC.default.createFromPubKey(e);return S4t.equals(r.id,t)}async function P4t(t,e,r){let i=rs.Buffer.from(e.identityKey);if(!await R4t(r.id,i))throw new Error("Peer ID doesn't match libp2p public key.");let n=wC(t),s=_4t.keys.unmarshalPublicKey(i);if(!e.identitySig||!s.verify(n,rs.Buffer.from(e.identitySig)))throw new Error("Static key doesn't match to peer that signed payload!");return await vC.default.createFromPubKey(i)}Gt.verifySignedPayload=P4t;function C4t(t,e){let i=new m4t.HKDF(v4t.SHA256,e,t).expand(96),n=rs.Buffer.from(i.buffer,i.byteOffset,i.length),s=n.slice(0,32),o=n.slice(32,64),a=n.slice(64,96);return[s,o,a]}Gt.getHkdf=C4t;function O4t(t){return!(!rs.Buffer.isBuffer(t)||t.length!==32)}Gt.isValidPublicKey=O4t});var F8e=p(Zv=>{l();"use strict";Object.defineProperty(Zv,"__esModule",{value:!0});var _n=E3(),_C=yc(),k4t=20;function q4t(t,e,r){for(var i=1634760805,n=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],u=r[11]<<24|r[10]<<16|r[9]<<8|r[8],f=r[15]<<24|r[14]<<16|r[13]<<8|r[12],d=r[19]<<24|r[18]<<16|r[17]<<8|r[16],h=r[23]<<24|r[22]<<16|r[21]<<8|r[20],y=r[27]<<24|r[26]<<16|r[25]<<8|r[24],g=r[31]<<24|r[30]<<16|r[29]<<8|r[28],m=e[3]<<24|e[2]<<16|e[1]<<8|e[0],E=e[7]<<24|e[6]<<16|e[5]<<8|e[4],v=e[11]<<24|e[10]<<16|e[9]<<8|e[8],A=e[15]<<24|e[14]<<16|e[13]<<8|e[12],R=i,F=n,q=s,D=o,z=a,G=c,Y=u,P=f,b=d,w=h,S=y,C=g,B=m,W=E,K=v,M=A,_=0;_<k4t;_+=2)R=R+z|0,B^=R,B=B>>>32-16|B<<16,b=b+B|0,z^=b,z=z>>>32-12|z<<12,F=F+G|0,W^=F,W=W>>>32-16|W<<16,w=w+W|0,G^=w,G=G>>>32-12|G<<12,q=q+Y|0,K^=q,K=K>>>32-16|K<<16,S=S+K|0,Y^=S,Y=Y>>>32-12|Y<<12,D=D+P|0,M^=D,M=M>>>32-16|M<<16,C=C+M|0,P^=C,P=P>>>32-12|P<<12,q=q+Y|0,K^=q,K=K>>>32-8|K<<8,S=S+K|0,Y^=S,Y=Y>>>32-7|Y<<7,D=D+P|0,M^=D,M=M>>>32-8|M<<8,C=C+M|0,P^=C,P=P>>>32-7|P<<7,F=F+G|0,W^=F,W=W>>>32-8|W<<8,w=w+W|0,G^=w,G=G>>>32-7|G<<7,R=R+z|0,B^=R,B=B>>>32-8|B<<8,b=b+B|0,z^=b,z=z>>>32-7|z<<7,R=R+G|0,M^=R,M=M>>>32-16|M<<16,S=S+M|0,G^=S,G=G>>>32-12|G<<12,F=F+Y|0,B^=F,B=B>>>32-16|B<<16,C=C+B|0,Y^=C,Y=Y>>>32-12|Y<<12,q=q+P|0,W^=q,W=W>>>32-16|W<<16,b=b+W|0,P^=b,P=P>>>32-12|P<<12,D=D+z|0,K^=D,K=K>>>32-16|K<<16,w=w+K|0,z^=w,z=z>>>32-12|z<<12,q=q+P|0,W^=q,W=W>>>32-8|W<<8,b=b+W|0,P^=b,P=P>>>32-7|P<<7,D=D+z|0,K^=D,K=K>>>32-8|K<<8,w=w+K|0,z^=w,z=z>>>32-7|z<<7,F=F+Y|0,B^=F,B=B>>>32-8|B<<8,C=C+B|0,Y^=C,Y=Y>>>32-7|Y<<7,R=R+G|0,M^=R,M=M>>>32-8|M<<8,S=S+M|0,G^=S,G=G>>>32-7|G<<7;_n.writeUint32LE(R+i|0,t,0),_n.writeUint32LE(F+n|0,t,4),_n.writeUint32LE(q+s|0,t,8),_n.writeUint32LE(D+o|0,t,12),_n.writeUint32LE(z+a|0,t,16),_n.writeUint32LE(G+c|0,t,20),_n.writeUint32LE(Y+u|0,t,24),_n.writeUint32LE(P+f|0,t,28),_n.writeUint32LE(b+d|0,t,32),_n.writeUint32LE(w+h|0,t,36),_n.writeUint32LE(S+y|0,t,40),_n.writeUint32LE(C+g|0,t,44),_n.writeUint32LE(B+m|0,t,48),_n.writeUint32LE(W+E|0,t,52),_n.writeUint32LE(K+v|0,t,56),_n.writeUint32LE(M+A|0,t,60)}function U8e(t,e,r,i,n){if(n===void 0&&(n=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(n===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=n}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){q4t(a,s,t);for(var u=c;u<c+64&&u<r.length;u++)i[u]=r[u]^a[u-c];N4t(s,0,o)}return _C.wipe(a),n===0&&_C.wipe(s),i}Zv.streamXOR=U8e;function D4t(t,e,r,i){return i===void 0&&(i=0),_C.wipe(r),U8e(t,e,r,r,i)}Zv.stream=D4t;function N4t(t,e,r){for(var i=1;r--;)i=i+(t[e]&255)|0,t[e]=i&255,i>>>=8,e++;if(i>0)throw new Error("ChaCha: counter overflow")}});var K8e=p(xu=>{l();"use strict";Object.defineProperty(xu,"__esModule",{value:!0});var B4t=Wv(),Jv=yc();xu.DIGEST_LENGTH=16;var j8e=function(){function t(e){this.digestLength=xu.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=e[0]|e[1]<<8;this._r[0]=r&8191;var i=e[2]|e[3]<<8;this._r[1]=(r>>>13|i<<3)&8191;var n=e[4]|e[5]<<8;this._r[2]=(i>>>10|n<<6)&7939;var s=e[6]|e[7]<<8;this._r[3]=(n>>>7|s<<9)&8191;var o=e[8]|e[9]<<8;this._r[4]=(s>>>4|o<<12)&255,this._r[5]=o>>>1&8190;var a=e[10]|e[11]<<8;this._r[6]=(o>>>14|a<<2)&8191;var c=e[12]|e[13]<<8;this._r[7]=(a>>>11|c<<5)&8065;var u=e[14]|e[15]<<8;this._r[8]=(c>>>8|u<<8)&8191,this._r[9]=u>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return t.prototype._blocks=function(e,r,i){for(var n=this._fin?0:1<<11,s=this._h[0],o=this._h[1],a=this._h[2],c=this._h[3],u=this._h[4],f=this._h[5],d=this._h[6],h=this._h[7],y=this._h[8],g=this._h[9],m=this._r[0],E=this._r[1],v=this._r[2],A=this._r[3],R=this._r[4],F=this._r[5],q=this._r[6],D=this._r[7],z=this._r[8],G=this._r[9];i>=16;){var Y=e[r+0]|e[r+1]<<8;s+=Y&8191;var P=e[r+2]|e[r+3]<<8;o+=(Y>>>13|P<<3)&8191;var b=e[r+4]|e[r+5]<<8;a+=(P>>>10|b<<6)&8191;var w=e[r+6]|e[r+7]<<8;c+=(b>>>7|w<<9)&8191;var S=e[r+8]|e[r+9]<<8;u+=(w>>>4|S<<12)&8191,f+=S>>>1&8191;var C=e[r+10]|e[r+11]<<8;d+=(S>>>14|C<<2)&8191;var B=e[r+12]|e[r+13]<<8;h+=(C>>>11|B<<5)&8191;var W=e[r+14]|e[r+15]<<8;y+=(B>>>8|W<<8)&8191,g+=W>>>5|n;var K=0,M=K;M+=s*m,M+=o*(5*G),M+=a*(5*z),M+=c*(5*D),M+=u*(5*q),K=M>>>13,M&=8191,M+=f*(5*F),M+=d*(5*R),M+=h*(5*A),M+=y*(5*v),M+=g*(5*E),K+=M>>>13,M&=8191;var _=K;_+=s*E,_+=o*m,_+=a*(5*G),_+=c*(5*z),_+=u*(5*D),K=_>>>13,_&=8191,_+=f*(5*q),_+=d*(5*F),_+=h*(5*R),_+=y*(5*A),_+=g*(5*v),K+=_>>>13,_&=8191;var L=K;L+=s*v,L+=o*E,L+=a*m,L+=c*(5*G),L+=u*(5*z),K=L>>>13,L&=8191,L+=f*(5*D),L+=d*(5*q),L+=h*(5*F),L+=y*(5*R),L+=g*(5*A),K+=L>>>13,L&=8191;var ae=K;ae+=s*A,ae+=o*v,ae+=a*E,ae+=c*m,ae+=u*(5*G),K=ae>>>13,ae&=8191,ae+=f*(5*z),ae+=d*(5*D),ae+=h*(5*q),ae+=y*(5*F),ae+=g*(5*R),K+=ae>>>13,ae&=8191;var X=K;X+=s*R,X+=o*A,X+=a*v,X+=c*E,X+=u*m,K=X>>>13,X&=8191,X+=f*(5*G),X+=d*(5*z),X+=h*(5*D),X+=y*(5*q),X+=g*(5*F),K+=X>>>13,X&=8191;var ne=K;ne+=s*F,ne+=o*R,ne+=a*A,ne+=c*v,ne+=u*E,K=ne>>>13,ne&=8191,ne+=f*m,ne+=d*(5*G),ne+=h*(5*z),ne+=y*(5*D),ne+=g*(5*q),K+=ne>>>13,ne&=8191;var oe=K;oe+=s*q,oe+=o*F,oe+=a*R,oe+=c*A,oe+=u*v,K=oe>>>13,oe&=8191,oe+=f*E,oe+=d*m,oe+=h*(5*G),oe+=y*(5*z),oe+=g*(5*D),K+=oe>>>13,oe&=8191;var de=K;de+=s*D,de+=o*q,de+=a*F,de+=c*R,de+=u*A,K=de>>>13,de&=8191,de+=f*v,de+=d*E,de+=h*m,de+=y*(5*G),de+=g*(5*z),K+=de>>>13,de&=8191;var he=K;he+=s*z,he+=o*D,he+=a*q,he+=c*F,he+=u*R,K=he>>>13,he&=8191,he+=f*A,he+=d*v,he+=h*E,he+=y*m,he+=g*(5*G),K+=he>>>13,he&=8191;var we=K;we+=s*G,we+=o*z,we+=a*D,we+=c*q,we+=u*F,K=we>>>13,we&=8191,we+=f*R,we+=d*A,we+=h*v,we+=y*E,we+=g*m,K+=we>>>13,we&=8191,K=(K<<2)+K|0,K=K+M|0,M=K&8191,K=K>>>13,_+=K,s=M,o=_,a=L,c=ae,u=X,f=ne,d=oe,h=de,y=he,g=we,r+=16,i-=16}this._h[0]=s,this._h[1]=o,this._h[2]=a,this._h[3]=c,this._h[4]=u,this._h[5]=f,this._h[6]=d,this._h[7]=h,this._h[8]=y,this._h[9]=g},t.prototype.finish=function(e,r){r===void 0&&(r=0);var i=new Uint16Array(10),n,s,o,a;if(this._leftover){for(a=this._leftover,this._buffer[a++]=1;a<16;a++)this._buffer[a]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(n=this._h[1]>>>13,this._h[1]&=8191,a=2;a<10;a++)this._h[a]+=n,n=this._h[a]>>>13,this._h[a]&=8191;for(this._h[0]+=n*5,n=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=n,n=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=n,i[0]=this._h[0]+5,n=i[0]>>>13,i[0]&=8191,a=1;a<10;a++)i[a]=this._h[a]+n,n=i[a]>>>13,i[a]&=8191;for(i[9]-=1<<13,s=(n^1)-1,a=0;a<10;a++)i[a]&=s;for(s=~s,a=0;a<10;a++)this._h[a]=this._h[a]&s|i[a];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,o=this._h[0]+this._pad[0],this._h[0]=o&65535,a=1;a<8;a++)o=(this._h[a]+this._pad[a]|0)+(o>>>16)|0,this._h[a]=o&65535;return e[r+0]=this._h[0]>>>0,e[r+1]=this._h[0]>>>8,e[r+2]=this._h[1]>>>0,e[r+3]=this._h[1]>>>8,e[r+4]=this._h[2]>>>0,e[r+5]=this._h[2]>>>8,e[r+6]=this._h[3]>>>0,e[r+7]=this._h[3]>>>8,e[r+8]=this._h[4]>>>0,e[r+9]=this._h[4]>>>8,e[r+10]=this._h[5]>>>0,e[r+11]=this._h[5]>>>8,e[r+12]=this._h[6]>>>0,e[r+13]=this._h[6]>>>8,e[r+14]=this._h[7]>>>0,e[r+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(e){var r=0,i=e.length,n;if(this._leftover){n=16-this._leftover,n>i&&(n=i);for(var s=0;s<n;s++)this._buffer[this._leftover+s]=e[r+s];if(i-=n,r+=n,this._leftover+=n,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(i>=16&&(n=i-i%16,this._blocks(e,r,n),r+=n,i-=n),i){for(var s=0;s<i;s++)this._buffer[this._leftover+s]=e[r+s];this._leftover+=i}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},t.prototype.clean=function(){return Jv.wipe(this._buffer),Jv.wipe(this._r),Jv.wipe(this._h),Jv.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();xu.Poly1305=j8e;function M4t(t,e){var r=new j8e(t);r.update(e);var i=r.digest();return r.clean(),i}xu.oneTimeAuth=M4t;function L4t(t,e){return t.length!==xu.DIGEST_LENGTH||e.length!==xu.DIGEST_LENGTH?!1:B4t.equal(t,e)}xu.equal=L4t});var H8e=p(Au=>{l();"use strict";Object.defineProperty(Au,"__esModule",{value:!0});var e7=F8e(),U4t=K8e(),T3=yc(),V8e=E3(),F4t=Wv();Au.KEY_LENGTH=32;Au.NONCE_LENGTH=12;Au.TAG_LENGTH=16;var z8e=new Uint8Array(16),j4t=function(){function t(e){if(this.nonceLength=Au.NONCE_LENGTH,this.tagLength=Au.TAG_LENGTH,e.length!==Au.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return t.prototype.seal=function(e,r,i,n){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);e7.stream(this._key,s,o,4);var a=r.length+this.tagLength,c;if(n){if(n.length!==a)throw new Error("ChaCha20Poly1305: incorrect destination length");c=n}else c=new Uint8Array(a);return e7.streamXOR(this._key,s,r,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),o,c.subarray(0,c.length-this.tagLength),i),T3.wipe(s),c},t.prototype.open=function(e,r,i,n){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(r.length<this.tagLength)return null;var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);e7.stream(this._key,s,o,4);var a=new Uint8Array(this.tagLength);if(this._authenticate(a,o,r.subarray(0,r.length-this.tagLength),i),!F4t.equal(a,r.subarray(r.length-this.tagLength,r.length)))return null;var c=r.length-this.tagLength,u;if(n){if(n.length!==c)throw new Error("ChaCha20Poly1305: incorrect destination length");u=n}else u=new Uint8Array(c);return e7.streamXOR(this._key,s,r.subarray(0,r.length-this.tagLength),u,4),T3.wipe(s),u},t.prototype.clean=function(){return T3.wipe(this._key),this},t.prototype._authenticate=function(e,r,i,n){var s=new U4t.Poly1305(r);n&&(s.update(n),n.length%16>0&&s.update(z8e.subarray(n.length%16))),s.update(i),i.length%16>0&&s.update(z8e.subarray(i.length%16));var o=new Uint8Array(8);n&&V8e.writeUint64LE(n.length,o),s.update(o),V8e.writeUint64LE(i.length,o),s.update(o);for(var a=s.digest(),c=0;c<a.length;c++)e[c]=a[c];s.clean(),T3.wipe(a),T3.wipe(o)},t}();Au.ChaCha20Poly1305=j4t});var t7=p(Iu=>{l();"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});Iu.DUMP_SESSION_KEYS=Iu.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG=Iu.NOISE_MSG_MAX_LENGTH_BYTES=void 0;Iu.NOISE_MSG_MAX_LENGTH_BYTES=65535;Iu.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG=Iu.NOISE_MSG_MAX_LENGTH_BYTES-16;Iu.DUMP_SESSION_KEYS=process.env.DUMP_SESSION_KEYS});var bp=p(rn=>{l();"use strict";var K4t=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rn,"__esModule",{value:!0});rn.logCipherState=rn.logRemoteEphemeralKey=rn.logRemoteStaticKey=rn.logLocalEphemeralKeys=rn.logLocalStaticKeys=rn.logger=void 0;var V4t=K4t(be()),z4t=t7();rn.logger=V4t.default("libp2p:noise");var uo;z4t.DUMP_SESSION_KEYS?uo=rn.logger:uo=()=>{};function H4t(t){uo(`LOCAL_STATIC_PUBLIC_KEY ${t.publicKey.toString("hex")}`),uo(`LOCAL_STATIC_PRIVATE_KEY ${t.privateKey.toString("hex")}`)}rn.logLocalStaticKeys=H4t;function $4t(t){t?(uo(`LOCAL_PUBLIC_EPHEMERAL_KEY ${t.publicKey.toString("hex")}`),uo(`LOCAL_PRIVATE_EPHEMERAL_KEY ${t.privateKey.toString("hex")}`)):uo("Missing local ephemeral keys.")}rn.logLocalEphemeralKeys=$4t;function G4t(t){uo(`REMOTE_STATIC_PUBLIC_KEY ${t.toString("hex")}`)}rn.logRemoteStaticKey=G4t;function W4t(t){uo(`REMOTE_EPHEMERAL_PUBLIC_KEY ${t.toString("hex")}`)}rn.logRemoteEphemeralKey=W4t;function Y4t(t){t.cs1&&t.cs2?(uo(`CIPHER_STATE_1 ${t.cs1.n} ${t.cs1.k.toString("hex")}`),uo(`CIPHER_STATE_2 ${t.cs2.n} ${t.cs2.k.toString("hex")}`)):uo("Missing cipher state.")}rn.logCipherState=Y4t});var EC=p(Ss=>{l();"use strict";var X4t=Ss&&Ss.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Q4t=Ss&&Ss.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),$8e=Ss&&Ss.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&X4t(e,t,r);return Q4t(e,t),e};Object.defineProperty(Ss,"__esModule",{value:!0});Ss.AbstractHandshake=Ss.MIN_NONCE=void 0;var nn=Vt(),Z4t=$8e(Gv()),J4t=$8e(mC()),G8e=H8e(),W8e=rl(),ebt=bp();Ss.MIN_NONCE=0;var Y8e=class{encryptWithAd(e,r,i){let n=this.encrypt(e.k,e.n,r,i);return this.setNonce(e,this.incrementNonce(e.n)),n}decryptWithAd(e,r,i){let{plaintext:n,valid:s}=this.decrypt(e.k,e.n,r,i);return this.setNonce(e,this.incrementNonce(e.n)),{plaintext:n,valid:s}}hasKey(e){return!this.isEmptyKey(e.k)}setNonce(e,r){e.n=r}createEmptyKey(){return nn.Buffer.alloc(32)}isEmptyKey(e){return this.createEmptyKey().equals(e)}incrementNonce(e){return e+1}nonceToBytes(e){let r=nn.Buffer.alloc(12);return r.writeUInt32LE(e,4),r}encrypt(e,r,i,n){let s=this.nonceToBytes(r),a=new G8e.ChaCha20Poly1305(e).seal(s,n,i);return nn.Buffer.from(a.buffer,a.byteOffset,a.length)}encryptAndHash(e,r){let i;return this.hasKey(e.cs)?i=this.encryptWithAd(e.cs,e.h,r):i=r,this.mixHash(e,i),i}decrypt(e,r,i,n){let s=this.nonceToBytes(r),a=new G8e.ChaCha20Poly1305(e).open(s,n,i);return a?{plaintext:nn.Buffer.from(a.buffer,a.byteOffset,a.length),valid:!0}:{plaintext:nn.Buffer.from(""),valid:!1}}decryptAndHash(e,r){let i,n=!0;return this.hasKey(e.cs)?{plaintext:i,valid:n}=this.decryptWithAd(e.cs,e.h,r):i=r,this.mixHash(e,r),{plaintext:i,valid:n}}dh(e,r){try{let i=Z4t.sharedKey(e,r),n=nn.Buffer.from(i.buffer,i.byteOffset,i.length),s=nn.Buffer.alloc(32);return n.copy(s),s}catch(i){return ebt.logger(i.message),nn.Buffer.alloc(32)}}mixHash(e,r){e.h=this.getHash(e.h,r)}getHash(e,r){let i=J4t.hash(nn.Buffer.from([...e,...r]));return nn.Buffer.from(i.buffer,i.byteOffset,i.length)}mixKey(e,r){let[i,n]=W8e.getHkdf(e.ck,r);e.cs=this.initializeKey(n),e.ck=i}initializeKey(e){let r=Ss.MIN_NONCE;return{k:e,n:r}}initializeSymmetric(e){let r=nn.Buffer.from(e,"utf-8"),i=this.hashProtocolName(r),n=i,s=this.createEmptyKey();return{cs:this.initializeKey(s),ck:n,h:i}}hashProtocolName(e){if(e.length<=32){let r=nn.Buffer.alloc(32);return e.copy(r),r}else return this.getHash(e,nn.Buffer.alloc(0))}split(e){let[r,i]=W8e.getHkdf(e.ck,nn.Buffer.alloc(0)),n=this.initializeKey(r),s=this.initializeKey(i);return{cs1:n,cs2:s}}writeMessageRegular(e,r){let i=this.encryptWithAd(e,nn.Buffer.alloc(0),r),n=this.createEmptyKey(),s=nn.Buffer.alloc(0);return{ne:n,ns:s,ciphertext:i}}readMessageRegular(e,r){return this.decryptWithAd(e,nn.Buffer.alloc(0),r.ciphertext)}};Ss.AbstractHandshake=Y8e});var Q8e=p(r7=>{l();"use strict";Object.defineProperty(r7,"__esModule",{value:!0});r7.XX=void 0;var Zd=Vt(),mp=rl(),tbt=EC(),X8e=class extends tbt.AbstractHandshake{initializeInitiator(e,r,i,n){let s="Noise_XX_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(s);this.mixHash(o,e);let a=Zd.Buffer.alloc(32);return{ss:o,s:r,rs:i,psk:n,re:a}}initializeResponder(e,r,i,n){let s="Noise_XX_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(s);this.mixHash(o,e);let a=Zd.Buffer.alloc(32);return{ss:o,s:r,rs:i,psk:n,re:a}}writeMessageA(e,r,i){let n=Zd.Buffer.alloc(0);i!==void 0?e.e=i:e.e=mp.generateKeypair();let s=e.e.publicKey;this.mixHash(e.ss,s);let o=this.encryptAndHash(e.ss,r);return{ne:s,ns:n,ciphertext:o}}writeMessageB(e,r){e.e=mp.generateKeypair();let i=e.e.publicKey;this.mixHash(e.ss,i),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));let n=Zd.Buffer.from(e.s.publicKey),s=this.encryptAndHash(e.ss,n);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let o=this.encryptAndHash(e.ss,r);return{ne:i,ns:s,ciphertext:o}}writeMessageC(e,r){let i=Zd.Buffer.from(e.s.publicKey),n=this.encryptAndHash(e.ss,i);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let s=this.encryptAndHash(e.ss,r),a={ne:this.createEmptyKey(),ns:n,ciphertext:s},{cs1:c,cs2:u}=this.split(e.ss);return{h:e.ss.h,messageBuffer:a,cs1:c,cs2:u}}readMessageA(e,r){return mp.isValidPublicKey(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),this.decryptAndHash(e.ss,r.ciphertext)}readMessageB(e,r){if(mp.isValidPublicKey(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));let{plaintext:i,valid:n}=this.decryptAndHash(e.ss,r.ns);n&&i.length===32&&mp.isValidPublicKey(i)&&(e.rs=i),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let{plaintext:s,valid:o}=this.decryptAndHash(e.ss,r.ciphertext);return{plaintext:s,valid:n&&o}}readMessageC(e,r){let{plaintext:i,valid:n}=this.decryptAndHash(e.ss,r.ns);if(n&&i.length===32&&mp.isValidPublicKey(i)&&(e.rs=i),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let{plaintext:s,valid:o}=this.decryptAndHash(e.ss,r.ciphertext),{cs1:a,cs2:c}=this.split(e.ss);return{h:e.ss.h,plaintext:s,valid:n&&o,cs1:a,cs2:c}}initSession(e,r,i){let n=this.createEmptyKey(),s=Zd.Buffer.alloc(32),o;return e?o=this.initializeInitiator(r,i,s,n):o=this.initializeResponder(r,i,s,n),{hs:o,i:e,mc:0}}sendMessage(e,r,i){let n;if(e.mc===0)n=this.writeMessageA(e.hs,r,i);else if(e.mc===1)n=this.writeMessageB(e.hs,r);else if(e.mc===2){let{h:s,messageBuffer:o,cs1:a,cs2:c}=this.writeMessageC(e.hs,r);n=o,e.h=s,e.cs1=a,e.cs2=c}else if(e.mc>2)if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");n=this.writeMessageRegular(e.cs1,r)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");n=this.writeMessageRegular(e.cs2,r)}else throw new Error("Session invalid.");return e.mc++,n}recvMessage(e,r){let i=Zd.Buffer.alloc(0),n=!1;if(e.mc===0)({plaintext:i,valid:n}=this.readMessageA(e.hs,r));else if(e.mc===1)({plaintext:i,valid:n}=this.readMessageB(e.hs,r));else if(e.mc===2){let{h:s,plaintext:o,valid:a,cs1:c,cs2:u}=this.readMessageC(e.hs,r);i=o,n=a,e.h=s,e.cs1=c,e.cs2=u}return e.mc++,{plaintext:i,valid:n}}};r7.XX=X8e});var R3=p(bi=>{l();"use strict";Object.defineProperty(bi,"__esModule",{value:!0});bi.decode2=bi.decode1=bi.decode0=bi.encode2=bi.encode1=bi.encode0=bi.uint16BEDecode=bi.uint16BEEncode=void 0;var vp=Vt(),rbt=(t,e,r)=>(e=e||vp.Buffer.allocUnsafe(2),e.writeUInt16BE(t,r),e);bi.uint16BEEncode=rbt;bi.uint16BEEncode.bytes=2;var ibt=t=>{if(t.length<2)throw RangeError("Could not decode int16BE");return t.readUInt16BE(0)};bi.uint16BEDecode=ibt;bi.uint16BEDecode.bytes=2;function nbt(t){return vp.Buffer.concat([t.ne,t.ciphertext])}bi.encode0=nbt;function sbt(t){return vp.Buffer.concat([t.ne,t.ns,t.ciphertext])}bi.encode1=sbt;function obt(t){return vp.Buffer.concat([t.ns,t.ciphertext])}bi.encode2=obt;function abt(t){if(t.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:t.slice(0,32),ciphertext:t.slice(32,t.length),ns:vp.Buffer.alloc(0)}}bi.decode0=abt;function cbt(t){if(t.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:t.slice(0,32),ns:t.slice(32,80),ciphertext:t.slice(80,t.length)}}bi.decode1=cbt;function ubt(t){if(t.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:vp.Buffer.alloc(0),ns:t.slice(0,48),ciphertext:t.slice(48,t.length)}}bi.decode2=ubt});var SC=p(i7=>{l();"use strict";Object.defineProperty(i7,"__esModule",{value:!0});i7.XXHandshake=void 0;var P3=Vt(),fbt=Q8e(),wp=rl(),ci=bp(),_p=R3(),Z8e=class{constructor(e,r,i,n,s,o,a){this.isInitiator=e,this.payload=r,this.prologue=i,this.staticKeypair=n,this.connection=s,o&&(this.remotePeer=o),this.xx=a??new fbt.XX,this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair),this.remoteEarlyData=P3.Buffer.alloc(0)}async propose(){if(ci.logLocalStaticKeys(this.session.hs.s),this.isInitiator){ci.logger("Stage 0 - Initiator starting to send first message.");let e=this.xx.sendMessage(this.session,P3.Buffer.alloc(0));this.connection.writeLP(_p.encode0(e)),ci.logger("Stage 0 - Initiator finished sending first message."),ci.logLocalEphemeralKeys(this.session.hs.e)}else{ci.logger("Stage 0 - Responder waiting to receive first message...");let e=_p.decode0((await this.connection.readLP()).slice()),{valid:r}=this.xx.recvMessage(this.session,e);if(!r)throw new Error("xx handshake stage 0 validation fail");ci.logger("Stage 0 - Responder received first message."),ci.logRemoteEphemeralKey(this.session.hs.re)}}async exchange(){if(this.isInitiator){ci.logger("Stage 1 - Initiator waiting to receive first message from responder...");let e=_p.decode1((await this.connection.readLP()).slice()),{plaintext:r,valid:i}=this.xx.recvMessage(this.session,e);if(!i)throw new Error("xx handshake stage 1 validation fail");ci.logger("Stage 1 - Initiator received the message."),ci.logRemoteEphemeralKey(this.session.hs.re),ci.logRemoteStaticKey(this.session.hs.rs),ci.logger("Initiator going to check remote's signature...");try{let n=await wp.decodePayload(r);this.remotePeer=this.remotePeer||await wp.getPeerIdFromPayload(n),this.remotePeer=await wp.verifySignedPayload(e.ns,n,this.remotePeer),this.setRemoteEarlyData(n.data)}catch(n){let s=n;throw new Error(`Error occurred while verifying signed payload: ${s.message}`)}ci.logger("All good with the signature!")}else{ci.logger("Stage 1 - Responder sending out first message with signed payload and static key.");let e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(_p.encode1(e)),ci.logger("Stage 1 - Responder sent the second handshake message with signed payload."),ci.logLocalEphemeralKeys(this.session.hs.e)}}async finish(){if(this.isInitiator){ci.logger("Stage 2 - Initiator sending third handshake message.");let e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(_p.encode2(e)),ci.logger("Stage 2 - Initiator sent message with signed payload.")}else{ci.logger("Stage 2 - Responder waiting for third handshake message...");let e=_p.decode2((await this.connection.readLP()).slice()),{plaintext:r,valid:i}=this.xx.recvMessage(this.session,e);if(!i)throw new Error("xx handshake stage 2 validation fail");ci.logger("Stage 2 - Responder received the message, finished handshake.");try{let n=await wp.decodePayload(r);this.remotePeer=this.remotePeer||await wp.getPeerIdFromPayload(n),await wp.verifySignedPayload(this.session.hs.rs,n,this.remotePeer),this.setRemoteEarlyData(n.data)}catch(n){let s=n;throw new Error(`Error occurred while verifying signed payload: ${s.message}`)}}ci.logCipherState(this.session)}encrypt(e,r){let i=this.getCS(r);return this.xx.encryptWithAd(i,P3.Buffer.alloc(0),e)}decrypt(e,r){let i=this.getCS(r,!1);return this.xx.decryptWithAd(i,P3.Buffer.alloc(0),e)}getRemoteStaticKey(){return this.session.hs.rs}getCS(e,r=!0){if(!e.cs1||!e.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?r?e.cs1:e.cs2:r?e.cs2:e.cs1}setRemoteEarlyData(e){e&&(this.remoteEarlyData=P3.Buffer.from(e.buffer,e.byteOffset,e.length))}};i7.XXHandshake=Z8e});var eve=p(s7=>{l();"use strict";Object.defineProperty(s7,"__esModule",{value:!0});s7.IK=void 0;var n7=Vt(),C3=rl(),lbt=EC(),J8e=class extends lbt.AbstractHandshake{initSession(e,r,i,n){let s=this.createEmptyKey(),o;return e?o=this.initializeInitiator(r,i,n,s):o=this.initializeResponder(r,i,n,s),{hs:o,i:e,mc:0}}sendMessage(e,r){let i;if(e.mc===0)i=this.writeMessageA(e.hs,r);else if(e.mc===1){let{messageBuffer:n,h:s,cs1:o,cs2:a}=this.writeMessageB(e.hs,r);i=n,e.h=s,e.cs1=o,e.cs2=a}else if(e.mc>1)if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");i=this.writeMessageRegular(e.cs1,r)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");i=this.writeMessageRegular(e.cs2,r)}else throw new Error("Session invalid.");return e.mc++,i}recvMessage(e,r){let i=n7.Buffer.alloc(0),n=!1;if(e.mc===0&&({plaintext:i,valid:n}=this.readMessageA(e.hs,r)),e.mc===1){let{plaintext:s,valid:o,h:a,cs1:c,cs2:u}=this.readMessageB(e.hs,r);i=s,n=o,e.h=a,e.cs1=c,e.cs2=u}return e.mc++,{plaintext:i,valid:n}}writeMessageA(e,r){e.e=C3.generateKeypair();let i=e.e.publicKey;this.mixHash(e.ss,i),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let n=n7.Buffer.from(e.s.publicKey),s=this.encryptAndHash(e.ss,n);this.mixKey(e.ss,this.dh(e.s.privateKey,e.rs));let o=this.encryptAndHash(e.ss,r);return{ne:i,ns:s,ciphertext:o}}writeMessageB(e,r){e.e=C3.generateKeypair();let i=e.e.publicKey;this.mixHash(e.ss,i),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re)),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let n=this.encryptAndHash(e.ss,r),s=this.createEmptyKey(),o={ne:i,ns:s,ciphertext:n},{cs1:a,cs2:c}=this.split(e.ss);return{messageBuffer:o,cs1:a,cs2:c,h:e.ss.h}}readMessageA(e,r){C3.isValidPublicKey(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let{plaintext:i,valid:n}=this.decryptAndHash(e.ss,r.ns);n&&i.length===32&&C3.isValidPublicKey(i)&&(e.rs=i),this.mixKey(e.ss,this.dh(e.s.privateKey,e.rs));let{plaintext:s,valid:o}=this.decryptAndHash(e.ss,r.ciphertext);return{plaintext:s,valid:n&&o}}readMessageB(e,r){if(C3.isValidPublicKey(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state should contain ephemeral key by now.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re)),this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let{plaintext:i,valid:n}=this.decryptAndHash(e.ss,r.ciphertext),{cs1:s,cs2:o}=this.split(e.ss);return{h:e.ss.h,valid:n,plaintext:i,cs1:s,cs2:o}}initializeInitiator(e,r,i,n){let s="Noise_IK_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(s);this.mixHash(o,e),this.mixHash(o,i);let a=n7.Buffer.alloc(32);return{ss:o,s:r,rs:i,re:a,psk:n}}initializeResponder(e,r,i,n){let s="Noise_IK_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(s);this.mixHash(o,e),this.mixHash(o,r.publicKey);let a=n7.Buffer.alloc(32);return{ss:o,s:r,rs:i,re:a,psk:n}}};s7.IK=J8e});var rve=p(o7=>{l();"use strict";Object.defineProperty(o7,"__esModule",{value:!0});o7.FailedIKError=void 0;var tve=class extends Error{constructor(e,r){super(r);this.initialMsg=e,this.name="FailedIKhandshake"}};o7.FailedIKError=tve});var sve=p(c7=>{l();"use strict";Object.defineProperty(c7,"__esModule",{value:!0});c7.IKHandshake=void 0;var dbt=eve(),Ep=Vt(),a7=R3(),Sp=rl(),ive=rve(),Ri=bp(),nve=class{constructor(e,r,i,n,s,o,a,c){this.isInitiator=e,this.payload=Ep.Buffer.from(r),this.prologue=i,this.staticKeypair=n,this.connection=s,a&&(this.remotePeer=a),this.ik=c??new dbt.IK,this.session=this.ik.initSession(this.isInitiator,this.prologue,this.staticKeypair,o),this.remoteEarlyData=Ep.Buffer.alloc(0)}async stage0(){if(Ri.logLocalStaticKeys(this.session.hs.s),Ri.logRemoteStaticKey(this.session.hs.rs),this.isInitiator){Ri.logger("IK Stage 0 - Initiator sending message...");let e=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP(a7.encode1(e)),Ri.logger("IK Stage 0 - Initiator sent message."),Ri.logLocalEphemeralKeys(this.session.hs.e)}else{Ri.logger("IK Stage 0 - Responder receiving message...");let e=await this.connection.readLP();try{let r=a7.decode1(e.slice()),{plaintext:i,valid:n}=this.ik.recvMessage(this.session,r);if(!n)throw new Error("ik handshake stage 0 decryption validation fail");Ri.logger("IK Stage 0 - Responder got message, going to verify payload.");let s=await Sp.decodePayload(i);this.remotePeer=this.remotePeer||await Sp.getPeerIdFromPayload(s),await Sp.verifySignedPayload(this.session.hs.rs,s,this.remotePeer),this.setRemoteEarlyData(s.data),Ri.logger("IK Stage 0 - Responder successfully verified payload!"),Ri.logRemoteEphemeralKey(this.session.hs.re)}catch(r){let i=r;throw Ri.logger("Responder breaking up with IK handshake in stage 0."),new ive.FailedIKError(e,`Error occurred while verifying initiator's signed payload: ${i.message}`)}}}async stage1(){if(this.isInitiator){Ri.logger("IK Stage 1 - Initiator receiving message...");let e=(await this.connection.readLP()).slice(),r=a7.decode0(Ep.Buffer.from(e)),{plaintext:i,valid:n}=this.ik.recvMessage(this.session,r);Ri.logger("IK Stage 1 - Initiator got message, going to verify payload.");try{if(!n)throw new Error("ik stage 1 decryption validation fail");let s=await Sp.decodePayload(i);this.remotePeer=this.remotePeer||await Sp.getPeerIdFromPayload(s),await Sp.verifySignedPayload(r.ns.slice(0,32),s,this.remotePeer),this.setRemoteEarlyData(s.data),Ri.logger("IK Stage 1 - Initiator successfully verified payload!"),Ri.logRemoteEphemeralKey(this.session.hs.re)}catch(s){let o=s;throw Ri.logger("Initiator breaking up with IK handshake in stage 1."),new ive.FailedIKError(e,`Error occurred while verifying responder's signed payload: ${o.message}`)}}else{Ri.logger("IK Stage 1 - Responder sending message...");let e=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP(a7.encode0(e)),Ri.logger("IK Stage 1 - Responder sent message..."),Ri.logLocalEphemeralKeys(this.session.hs.e)}Ri.logCipherState(this.session)}decrypt(e,r){let i=this.getCS(r,!1);return this.ik.decryptWithAd(i,Ep.Buffer.alloc(0),e)}encrypt(e,r){let i=this.getCS(r);return this.ik.encryptWithAd(i,Ep.Buffer.alloc(0),e)}getLocalEphemeralKeys(){if(!this.session.hs.e)throw new Error("Ephemeral keys do not exist.");return this.session.hs.e}getCS(e,r=!0){if(!e.cs1||!e.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?r?e.cs1:e.cs2:r?e.cs2:e.cs1}setRemoteEarlyData(e){e&&(this.remoteEarlyData=Ep.Buffer.from(e.buffer,e.byteOffset,e.length))}};c7.IKHandshake=nve});var cve=p(u7=>{l();"use strict";Object.defineProperty(u7,"__esModule",{value:!0});u7.XXFallbackHandshake=void 0;var xC=Vt(),hbt=SC(),AC=rl(),fo=bp(),ove=R3(),ave=class extends hbt.XXHandshake{constructor(e,r,i,n,s,o,a,c,u){super(e,r,i,n,s,a,u);c&&(this.ephemeralKeys=c),this.initialMsg=o}async propose(){if(this.isInitiator)this.xx.sendMessage(this.session,xC.Buffer.alloc(0),this.ephemeralKeys),fo.logger("XX Fallback Stage 0 - Initialized state as the first message was sent by initiator."),fo.logLocalEphemeralKeys(this.session.hs.e);else{fo.logger("XX Fallback Stage 0 - Responder decoding initial msg from IK.");let e=ove.decode0(this.initialMsg),{valid:r}=this.xx.recvMessage(this.session,{ne:e.ne,ns:xC.Buffer.alloc(0),ciphertext:xC.Buffer.alloc(0)});if(!r)throw new Error("xx fallback stage 0 decryption validation fail");fo.logger("XX Fallback Stage 0 - Responder used received message from IK."),fo.logRemoteEphemeralKey(this.session.hs.re)}}async exchange(){if(this.isInitiator){let e=ove.decode1(this.initialMsg),{plaintext:r,valid:i}=this.xx.recvMessage(this.session,e);if(!i)throw new Error("xx fallback stage 1 decryption validation fail");fo.logger("XX Fallback Stage 1 - Initiator used received message from IK."),fo.logRemoteEphemeralKey(this.session.hs.re),fo.logRemoteStaticKey(this.session.hs.rs),fo.logger("Initiator going to check remote's signature...");try{let n=await AC.decodePayload(r);this.remotePeer=this.remotePeer||await AC.getPeerIdFromPayload(n),await AC.verifySignedPayload(this.session.hs.rs,n,this.remotePeer),this.setRemoteEarlyData(n.data)}catch(n){let s=n;throw new Error(`Error occurred while verifying signed payload from responder: ${s.message}`)}fo.logger("All good with the signature!")}else fo.logger("XX Fallback Stage 1 - Responder start"),await super.exchange(),fo.logger("XX Fallback Stage 1 - Responder end")}};u7.XXFallbackHandshake=ave});var fve=p(xp=>{l();"use strict";Object.defineProperty(xp,"__esModule",{value:!0});xp.decryptStream=xp.encryptStream=void 0;var uve=Vt(),f7=t7();function pbt(t){return async function*(e){for await(let r of e){let i=uve.Buffer.from(r.buffer,r.byteOffset,r.length);for(let n=0;n<i.length;n+=f7.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG){let s=n+f7.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG;s>i.length&&(s=i.length),yield t.encrypt(i.slice(n,s),t.session)}}}}xp.encryptStream=pbt;function ybt(t){return async function*(e){for await(let r of e){let i=uve.Buffer.from(r.buffer,r.byteOffset,r.length);for(let n=0;n<i.length;n+=f7.NOISE_MSG_MAX_LENGTH_BYTES){let s=n+f7.NOISE_MSG_MAX_LENGTH_BYTES;s>i.length&&(s=i.length);let o=i.slice(n,s),{plaintext:a,valid:c}=await t.decrypt(o,t.session);if(!c)throw new Error("Failed to validate decrypted chunk");yield a}}}}xp.decryptStream=ybt});var dve=p(l7=>{l();"use strict";Object.defineProperty(l7,"__esModule",{value:!0});l7.KeyCache=void 0;var lve=class{constructor(){this.storage=new Map}store(e,r){this.storage.set(e.id,r)}load(e){var r;return e&&(r=this.storage.get(e.id))!==null&&r!==void 0?r:null}resetStorage(){this.storage.clear()}},gbt=new lve;l7.KeyCache=gbt});var TC=p(lo=>{l();"use strict";var bbt=lo&&lo.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),mbt=lo&&lo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vbt=lo&&lo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&bbt(e,t,r);return mbt(e,t),e},d7=lo&&lo.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lo,"__esModule",{value:!0});lo.Noise=void 0;var wbt=vbt(Gv()),O3=Vt(),hve=d7(_8e()),_bt=d7(I8e()),pve=d7(ev()),Ebt=d7(Ir()),yve=Xo(),Sbt=SC(),xbt=sve(),Abt=cve(),gve=rl(),Ap=R3(),bve=fve(),IC=dve(),Ibt=bp(),mve=t7(),vve=class{constructor(e,r){if(this.protocol="/noise",this.prologue=O3.Buffer.alloc(0),this.earlyData=r??O3.Buffer.alloc(0),this.useNoisePipes=!1,e){let i=wbt.generateKeyPairFromSeed(e);this.staticKeys={privateKey:O3.Buffer.from(i.secretKey.buffer,i.secretKey.byteOffset,i.secretKey.length),publicKey:O3.Buffer.from(i.publicKey.buffer,i.publicKey.byteOffset,i.publicKey.length)}}else this.staticKeys=gve.generateKeypair()}async secureOutbound(e,r,i){let n=hve.default(r,{lengthEncoder:Ap.uint16BEEncode,lengthDecoder:Ap.uint16BEDecode,maxDataLength:mve.NOISE_MSG_MAX_LENGTH_BYTES}),s=await this.performHandshake({connection:n,isInitiator:!0,localPeer:e,remotePeer:i});return{conn:await this.createSecureConnection(n,s),remoteEarlyData:s.remoteEarlyData,remotePeer:s.remotePeer}}async secureInbound(e,r,i){let n=hve.default(r,{lengthEncoder:Ap.uint16BEEncode,lengthDecoder:Ap.uint16BEDecode,maxDataLength:mve.NOISE_MSG_MAX_LENGTH_BYTES}),s=await this.performHandshake({connection:n,isInitiator:!1,localPeer:e,remotePeer:i});return{conn:await this.createSecureConnection(n,s),remoteEarlyData:s.remoteEarlyData,remotePeer:s.remotePeer}}async performHandshake(e){var r;let i=await gve.getPayload(e.localPeer,this.staticKeys.publicKey,this.earlyData),n=this.useNoisePipes;if(e.isInitiator&&IC.KeyCache.load(e.remotePeer)===null&&(n=!1),n){let{remotePeer:s,connection:o,isInitiator:a}=e,c=new xbt.IKHandshake(a,i,this.prologue,this.staticKeys,o,(r=IC.KeyCache.load(e.remotePeer))!==null&&r!==void 0?r:O3.Buffer.alloc(32),s);try{return await this.performIKHandshake(c)}catch(u){let f;return e.isInitiator&&(f=c.getLocalEphemeralKeys()),await this.performXXFallbackHandshake(e,i,u.initialMsg,f)}}else return await this.performXXHandshake(e,i)}async performXXFallbackHandshake(e,r,i,n){let{isInitiator:s,remotePeer:o,connection:a}=e,c=new Abt.XXFallbackHandshake(s,r,this.prologue,this.staticKeys,a,i,o,n);try{await c.propose(),await c.exchange(),await c.finish()}catch(u){Ibt.logger(u);let f=u;throw new Error(`Error occurred during XX Fallback handshake: ${f.message}`)}return c}async performXXHandshake(e,r){let{isInitiator:i,remotePeer:n,connection:s}=e,o=new Sbt.XXHandshake(i,r,this.prologue,this.staticKeys,s,n);try{await o.propose(),await o.exchange(),await o.finish(),this.useNoisePipes&&o.remotePeer&&IC.KeyCache.store(o.remotePeer,o.getRemoteStaticKey())}catch(a){let c=a;throw new Error(`Error occurred during XX handshake: ${c.message}`)}return o}async performIKHandshake(e){return await e.stage0(),await e.stage1(),e}async createSecureConnection(e,r){let[i,n]=_bt.default(),s=e.unwrap();return await Ebt.default(i,pve.default,bve.encryptStream(r),yve.encode({lengthEncoder:Ap.uint16BEEncode}),s,yve.decode({lengthDecoder:Ap.uint16BEDecode}),pve.default,bve.decryptStream(r),i),n}};lo.Noise=vve});var wve=p(Tu=>{l();"use strict";var Tbt=Tu&&Tu.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Rbt=Tu&&Tu.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Tbt(e,t,r)};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.NOISE=void 0;var Pbt=TC();Rbt(TC(),Tu);Tu.NOISE=new Pbt.Noise});var ca=p((mjt,Eve)=>{l();"use strict";function _ve(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Cbt(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return _ve(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),_ve(new n,r)}}Eve.exports=Cbt});var Ave=p((vjt,xve)=>{l();"use strict";var Obt=yP(),{EventEmitter:kbt}=gr();function Sve(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0,i=t.length;r<i;++r)if(t[r]!==e[r])return!1;return!0}function RC(){return{contacts:[],dontSplit:!1,left:null,right:null}}function k3(t,e){if(!(e instanceof Uint8Array))throw new TypeError(t+" is not a Uint8Array")}var q3=class extends kbt{constructor(e={}){super();this.localNodeId=e.localNodeId||Obt(20),this.numberOfNodesPerKBucket=e.numberOfNodesPerKBucket||20,this.numberOfNodesToPing=e.numberOfNodesToPing||3,this.distance=e.distance||q3.distance,this.arbiter=e.arbiter||q3.arbiter,this.metadata=Object.assign({},e.metadata),k3("option.localNodeId as parameter 1",this.localNodeId),this.root=RC()}static arbiter(e,r){return e.vectorClock>r.vectorClock?e:r}static distance(e,r){let i=0,n=0,s=Math.min(e.length,r.length),o=Math.max(e.length,r.length);for(;n<s;++n)i=i*256+(e[n]^r[n]);for(;n<o;++n)i=i*256+255;return i}add(e){k3("contact.id",(e||{}).id);let r=0,i=this.root;for(;i.contacts===null;)i=this._determineNode(i,e.id,r++);let n=this._indexOf(i,e.id);return n>=0?(this._update(i,n,e),this):i.contacts.length<this.numberOfNodesPerKBucket?(i.contacts.push(e),this.emit("added",e),this):i.dontSplit?(this.emit("ping",i.contacts.slice(0,this.numberOfNodesToPing),e),this):(this._split(i,r),this.add(e))}closest(e,r=1/0){if(k3("id",e),!Number.isInteger(r)&&r!==1/0||r<=0)throw new TypeError("n is not positive number");let i=[];for(let n=[this.root],s=0;n.length>0&&i.length<r;){let o=n.pop();if(o.contacts===null){let a=this._determineNode(o,e,s++);n.push(o.left===a?o.right:o.left),n.push(a)}else i=i.concat(o.contacts)}return i.map(n=>[this.distance(n.id,e),n]).sort((n,s)=>n[0]-s[0]).slice(0,r).map(n=>n[1])}count(){let e=0;for(let r=[this.root];r.length>0;){let i=r.pop();i.contacts===null?r.push(i.right,i.left):e+=i.contacts.length}return e}_determineNode(e,r,i){let n=i>>3,s=i%8;return r.length<=n&&s!==0?e.left:r[n]&1<<7-s?e.right:e.left}get(e){k3("id",e);let r=0,i=this.root;for(;i.contacts===null;)i=this._determineNode(i,e,r++);let n=this._indexOf(i,e);return n>=0?i.contacts[n]:null}_indexOf(e,r){for(let i=0;i<e.contacts.length;++i)if(Sve(e.contacts[i].id,r))return i;return-1}remove(e){k3("the id as parameter 1",e);let r=0,i=this.root;for(;i.contacts===null;)i=this._determineNode(i,e,r++);let n=this._indexOf(i,e);if(n>=0){let s=i.contacts.splice(n,1)[0];this.emit("removed",s)}return this}_split(e,r){e.left=RC(),e.right=RC();for(let s of e.contacts)this._determineNode(e,s.id,r).contacts.push(s);e.contacts=null;let i=this._determineNode(e,this.localNodeId,r),n=e.left===i?e.right:e.left;n.dontSplit=!0}toArray(){let e=[];for(let r=[this.root];r.length>0;){let i=r.pop();i.contacts===null?r.push(i.right,i.left):e=e.concat(i.contacts)}return e}*toIterable(){for(let e=[this.root];e.length>0;){let r=e.pop();r.contacts===null?e.push(r.right,r.left):yield*r.contacts}}_update(e,r,i){if(!Sve(e.contacts[r].id,i.id))throw new Error("wrong index for _update");let n=e.contacts[r],s=this.arbiter(n,i);s===n&&n!==i||(e.contacts.splice(r,1),e.contacts.push(s),this.emit("updated",n,s))}};xve.exports=q3});var D3={};bt(D3,{xor:()=>qbt});function qbt(t,e){if(t.length!==e.length)throw new Error("Inputs should have the same length");let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t[i]^e[i];return r}var N3=Se(()=>{l()});var Ive=p((wjt,Dbt)=>{Dbt.exports=[77591,22417,43971,28421,740,29829,71467,228973,196661,78537,27689,36431,44415,14362,19456,106025,96308,2882,49509,21149,87173,131409,75844,23676,121838,30291,17492,2953,7564,110620,129477,127283,53113,72417,165166,109690,21200,102125,24049,71504,90342,25307,72039,26812,26715,32264,133800,71161,88956,171987,51779,24425,16671,30251,186294,247761,14202,2121,8465,35024,4876,85917,169730,3638,256836,96184,943,18678,6583,52907,35807,112254,214097,18796,11595,9243,23554,887,268203,382004,24590,111335,11625,16619,29039,102425,69006,97976,92362,32552,63717,41433,128974,137630,59943,10019,13986,35430,33665,108037,43799,43280,38195,29078,58629,18265,14425,46832,235538,40830,77881,110717,58937,3463,325358,51300,47623,117252,19007,10170,20540,91237,294813,4951,79841,56232,36270,128547,69209,66275,100156,32063,73531,34439,80937,28892,44466,88595,216307,32583,49620,16605,82127,45807,21630,78726,20235,40163,111007,96926,5567,72083,21665,58844,39419,179767,48328,42662,51550,5251,37811,49608,81056,50854,55513,20922,18891,197409,164656,32593,71449,220474,58919,85682,67854,13758,35066,3565,61905,214793,119572,141419,21504,10302,27354,67003,46131,32668,15165,64871,34450,17821,2757,11452,34189,5160,12257,85523,560,53385,65887,119549,135620,312353,115979,122356,10867,193231,124537,54783,90675,120791,4715,142253,50943,17271,43358,25331,4917,120566,34580,12878,33786,160528,32523,4869,301307,104817,81491,23276,8832,97911,31265,52065,7998,49622,9715,43998,34091,84587,20664,69041,29419,53205,10838,58288,116145,6185,5154,141795,35924,21307,144738,43730,12085,8279,10002,119,133779,199668,72938,31768,39176,67875,38453,9700,44144,4121,116048,41733,12868,82669,92308,128,34262,11332,7712,90764,36141,13553,71312,77470,117314,96549,49135,23602,54468,28605,6327,62308,17171,67531,21319,14105,894,107722,46157,8503,51069,100472,45138,15246,14577,35609,191464,1757,13364,161349,32067,91705,81144,52339,5408,91066,21983,14157,100545,4372,26630,129112,1423,29676,213626,4397,88436,99190,6877,49958,26122,114348,60661,29818,293118,50042,179738,16400,163423,89627,31040,43973,36638,45952,5153,1894,109322,1898,134021,12402,112077,68309,190269,69866,31938,107383,11522,105232,11248,14868,39852,71707,186525,16530,38162,106212,11700,5130,16608,26998,59586,108399,230033,43683,48135,82179,2073,5015,196684,189293,16378,23452,8301,35640,11632,214551,29240,57644,33137,91949,55157,52384,117313,5090,17717,89668,49363,82238,241035,66216,29066,184088,97206,62820,26595,4241,135635,173672,8202,459,71355,146294,29587,3008,135385,141203,14803,6634,45094,69362,50925,546,51884,62011,83296,234584,44515,56050,89476,87751,19373,12691,149923,19794,13833,35846,87557,58339,2884,19145,25647,12224,11024,77338,64608,122297,53025,7205,36189,36294,170779,21750,7739,173883,75192,35664,224240,113121,30181,26267,27036,117827,92015,106516,55628,203549,67949,60462,60844,35911,20457,1820,920,19773,8738,73173,181993,38521,98254,76257,46008,92796,5384,26868,151566,22124,2411,15919,186872,180021,28099,152961,78811,80237,62352,102653,74259,184890,16792,123702,224945,29940,19512,75283,14059,112691,92811,233329,20411,138569,53341,109802,50600,134528,66747,5529,166531,31578,64732,67189,1596,126357,967,167999,206598,109752,119431,207825,78791,91938,10301,27311,24233,252343,28831,32812,66002,112267,90895,8786,8095,16824,22866,21813,60507,174833,19549,130985,117051,52110,6938,81923,123864,38061,919,18680,53534,46739,112893,161529,85429,26761,11900,81121,91968,15390,217947,56524,1713,6654,37089,85630,138866,61850,16491,75577,16884,98296,73523,6140,44645,6062,36366,29844,57946,37932,42472,5266,20834,19309,33753,127182,134259,35810,41805,45878,312001,14881,47757,49251,120050,44252,3708,25856,107864,120347,1228,36550,41682,34496,47025,8393,173365,246526,12894,161607,35670,90785,126572,2095,124731,157033,58694,554,12786,9642,4817,16136,47864,174698,66992,4639,69284,10625,40710,27763,51738,30404,264105,137904,109882,52487,42824,57514,2740,10479,146799,107390,16586,88038,174951,9410,16185,44158,5568,40658,46108,12763,97385,26175,108859,664,230732,67470,46663,14395,50750,141320,93140,15361,47997,55784,6791,307840,118569,107326,18056,58281,260415,54691,8790,73332,45633,7511,45674,143373,14031,11799,94491,35646,96544,14560,26049,32983,25791,83814,42094,231370,63955,139212,2359,169908,3108,183486,105867,28197,32941,124968,26402,88267,149768,23053,3078,19091,52924,25383,19209,111548,97361,3959,24880,235061,9099,24921,161254,151405,20508,7159,34381,20133,11434,74036,19974,34769,36585,1076,22454,17354,38727,235160,111547,96454,117448,156940,91330,37299,7310,26915,117060,51369,22620,61861,322264,106850,111694,15091,2624,40345,300446,177064,1707,27389,54792,327783,132669,183543,59003,17744,20603,151134,106923,53084,71803,279424,319816,11579,21946,16728,38274,72711,5085,83391,88646,40159,25027,34680,10752,12988,54126,30365,18338,100445,230674,44874,84974,143877,123253,139372,28082,91477,144002,13096,219729,46016,50029,42377,14601,6660,58244,58978,23918,88206,113611,64452,17541,41032,10942,12021,49189,10978,40175,37156,10947,71709,106894,112538,57007,137486,150608,152719,40615,7746,279716,13101,19524,28708,40578,72320,1096,182051,94527,51275,22833,45164,81917,77519,48508,5421,140302,37845,149830,5587,27579,5357,428725,248187,6326,206760,39814,32585,89923,44341,288753,284443,96368,31201,94189,119504,20359,52073,103216,179,27934,32801,96035,34111,34309,101326,18198,20704,210266,37643,27880,141873,106e3,19414,56614,167714,66483,107885,86602,4379,20796,75467,4987,5017,118857,26003,34308,114428,29198,6686,29697,73632,3739,69795,16798,41504,7207,30722,21436,36735,28067,28545,3239,11221,36031,41889,100010,19247,317673,29495,174554,6424,129725,53845,94986,7955,59676,2604,191497,19735,102214,62954,23844,11872,179525,261436,34492,428,78404,142035,16747,17246,27578,37021,33672,57944,26056,135760,2369,61674,122066,31327,19374,157065,40553,130982,69619,71290,38855,72100,92903,95940,51422,165999,65713,57873,50726,7288,20272,2081,42326,22624,81120,57914,79352,19447,1684,72302,11774,302559,161481,96396,13692,414988,3721,79066,56627,46883,21150,11747,12184,5856,113458,176117,84416,52079,27933,3354,59765,141359,2212,216309,2555,23458,196722,142463,45701,44548,28798,19418,215,29916,9396,10574,114226,84475,13520,18694,34056,4524,90302,62930,13539,19407,77209,7728,38088,9535,2263,23875,183945,17750,26274,67172,10585,28042,22199,7478,51331,66030,26774,192929,31434,25850,50197,52926,178158,4679,181256,70184,229600,9959,105594,72158,73974,2726,35085,78087,23284,35568,51713,155676,5401,27254,11966,17569,223253,71993,103357,111477,55722,30504,26034,46774,35392,36285,214814,41143,163465,1051,16094,81044,6636,76489,179102,20712,39178,35683,125177,54219,30617,52994,25324,50123,2543,87529,58995,10688,125199,12388,60158,125481,131646,7642,133350,65874,3438,97277,101450,10075,56344,116821,50778,60547,98016,106135,13859,14255,16300,77373,173521,8285,45932,37426,4054,114295,55947,7703,39114,52,51119,128135,19714,60715,9554,50492,88180,2823,118271,52993,122625,97919,23859,37895,25040,33614,32102,20431,3577,9275,15686,43031,157741,110358,1884,40291,125391,13736,5008,64881,87336,77381,70711,43032,49155,118587,70494,4318,10168,30126,12580,10524,280104,104001,145413,2862,84140,6603,106005,13566,12780,11251,42830,571,179910,82443,13146,469,42714,32591,265217,424024,92553,54721,134100,6007,15242,114681,59030,16718,85465,200214,85982,55174,165013,23493,56964,82529,109150,32706,27568,82442,5350,14976,13165,44890,60021,21343,33978,17264,4655,22328,27819,75730,16567,55483,14510,17926,45827,150609,3704,7385,272531,161543,76904,122163,52405,2039,19165,41623,14423,228354,3369,176360,85491,7122,35789,303724,4465,13628,2233,55311,118771,20713,10006,221519,45115,71021,35650,29775,7337,10864,20665,21142,1746,15080,1624,32449,10905,105743,229797,7701,3940,22997,178467,57208,389057,39683,59403,63344,63125,54847,69691,18336,56448,3362,37202,18282,29648,138224,35867,10495,5911,28814,26653,31514,176702,26550,45621,11734,4525,40543,73944,121080,27858,155561,14887,44670,30742,8796,107455,113472,56369,75581,183777,240095,133699,153299,8768,160464,26058,49078,103971,21875,71486,44888,17156,9678,89541,123019,102337,3972,83930,21245,87852,109660,287918,183019,686,10100,39177,283941,11274,24736,26793,26214,25995,77011,141580,4070,23742,46285,46632,30700,26669,19056,35951,115575,174034,56097,35463,87425,24575,44245,38701,82317,85922,281616,100333,147697,61503,7730,84330,8530,59917,61597,17173,9092,32658,90288,193136,39023,20381,56654,31132,7779,1919,1375,117128,30819,11169,40938,23935,115201,101155,151034,4835,11231,74550,89388,59951,91704,107312,167882,115062,12732,72738,88703,464019,158267,57995,60496,737,14371,123867,4174,243339,159946,7568,16025,134556,110916,38103,191,80226,88794,29688,27230,10454,76308,57647,77409,113483,66864,14745,19808,12023,46583,84805,16015,17102,2231,20611,3547,95740,250131,34559,108894,8498,15853,159169,148920,20942,2813,93160,45188,210613,45531,52587,149062,39782,28194,57849,60965,84954,89766,84453,100927,16501,27658,165311,103841,54192,207341,19558,20084,319622,5672,205467,98462,61849,36279,13609,147177,24726,165015,209489,59591,31157,6551,117580,75060,141146,277310,21072,22023,106474,63041,137443,122965,68371,5383,42146,98961,113467,30863,23794,4843,99630,30392,82679,13699,241612,33601,93146,24319,18643,32155,95669,40440,15333,34089,67799,142144,58245,38633,114531,117400,77861,188726,5507,2568,8853,10987,107222,2663,2421,11530,13345,30075,41785,118661,104786,17459,12490,16281,71936,193555,17431,5944,71758,26485,77317,20803,367167,158,7362,93430,11735,172445,46002,11532,54482,930,62911,2235,23004,179236,4764,101859,208113,22477,55163,95579,14098,67320,162556,90709,156949,3826,57492,4025,34092,87442,104565,6718,186015,28214,14209,10039,107186,233912,58877,81637,55265,39828,6194,145813,50831,105849,4974,88319,122296,10272,197216,95714,51540,72418,23324,91555,8743,140452,250249,51666,34124,7229,38592,129641,78169,174242,22464,149964,51450,14034,10026,95376,26190,120062,14401,8700,265,31386,143573,7203,229889,61567,4227,140981,2466,72052,10787,10062,30958,6099,38471,30103,23202,208101,70847,467,58934,32271,32984,36637,24107,30771,17109,73353,13650,2098,157040,67366,66904,106018,265380,107238,18535,44025,32681,144983,62505,91295,56120,3082,77508,10322,63023,36700,81885,224127,16721,45023,239261,111272,13852,7866,149243,204199,32309,22084,42029,38316,126644,104973,14406,43454,67322,61310,15789,40285,24026,181047,6301,70927,23319,115823,27248,66693,115875,278566,63007,146844,56841,59007,87368,180001,22370,42114,80605,12022,10374,308,25079,14689,12618,63368,7936,264973,212291,136713,95999,105801,18965,32075,48700,52230,35119,96912,32992,8586,16606,101333,101812,14969,39930,759,193090,27387,42914,12937,5058,62646,64528,38624,25743,37502,3716,4435,30352,178687,26461,132611,42002,138442,35833,59582,16345,8048,60319,49349,309,47800,49739,90482,26405,34470,63786,32479,85028,39866,47846,11649,23934,29466,2816,42864,31828,7410,74885,49632,47629,111801,90749,19536,18767,105764,59606,21223,10746,76298,22220,39408,7190,79654,64856,11602,82156,272765,17079,70089,245473,51813,184407,384678,1576,122249,5064,27481,6188,25790,74361,27541,318284,45430,31488,620,93579,45723,192118,22670,51913,4162,70244,35966,26397,16199,50899,209613,121702,287507,2993,36101,132229,67345,33062,76295,118628,78705,52316,34375,107083,107454,44863,127561,33964,3073,154010,190914,55967,39074,6272,31047,5550,41123,26154,98638,47110,19998,148091,50229,31329,59900,195442,19106,61347,73497,70015,682,45850,25776,38022,148951,6288,37411,232526,109277,27286,32342,9262,5220,16651,23175,46740,129438,78614,121925,66914,88710,127952,5563,21500,34521,10739,14863,191006,62956,17359,16749,67027,56284,69134,43301,35039,58883,54466,60823,404451,75743,59856,86979,7923,34273,83785,32142,7693,268986,197428,282681,17049,22346,22990,92245,107180,3357,37104,96724,49153,7683,31197,43267,82231,164276,23696,20848,188364,22309,24821,158707,1018,22514,70922,27792,45589,59709,10765,736,35218,63479,51987,24275,63588,55361,92929,81964,4658,20122,12330,44058,13065,311456,72224,8337,211229,38979,22590,138478,52757,32595,133600,8838,31549,94412,43391,90056,1585,94802,127271,6223,31889,137038,132910,2165,57616,230152,6080,10748,36737,74579,134062,50525,180532,119270,34556,76155,82394,52595,29258,31435,87820,67996,26943,183878,38007,2410,13526,180297,69856,3503,187396,167700,7838,16701,9199,56267,3661,37407,65994,23767,5708,62508,221700,67088,86978,46776,84434,32088,5612,9149,88244,21685,95151,46750,189612,2979,506311,2594,3628,40074,105039,78243,28523,6651,38058,71999,30992,12764,68261,108991,6165,26450,61961,13400,22426,7490,60890,109623,2070,12958,50355,67979,257096,7213,42578,52121,35716,65461,7516,124758,39268,302,64712,14977,1467,219452,2840,34229,11121,21602,19270,63574,8024,1532,17331,79839,78885,52029,180767,57957,6069,91265,61380,55767,8927,32881,287603,22149,35029,68876,6428,199567,46926,13412,104132,21434,366616,45060,110046,81924,128910,45886,52821,130416,29416,77342,21762,67329,121432,79924,11724,38625,81006,102033,28338,13326,3250,82056,82526,38212,21112,12382,111495,3263,7414,86274,93490,40844,30224,45212,24019,48411,71367,24941,76729,57776,3769,38114,202019,197745,31953,237533,33270,201580,255648,100798,44741,32241,98468,106931,10085,15090,170358,33154,66787,18819,69760,25061,234005,82660,6295,131975,16874,9076,4094,25005,17740,40908,19533,220019,44330,99792,50040,19619,13950,55228,24423,31253,95308,103177,184795,28590,82285,5059,3210,75525,49894,70007,56178,10580,36051,139681,21617,98736,3555,106306,164189,37352,63915,47824,24883,145530,61904,28444,11483,19837,145446,30420,112972,85939,11835,191233,2262,20705,58630,1753,148334,1197,144714,6887,11223,107667,60879,77914,4151,57417,81594,96681,169430,1784,20444,95138,254041,27038,596,7117,72808,13759,3353,126776,21074,55322,27081,36942,39547,139830,179275,4453,713,8722,71399,19204,25785,22794,23923,104114,11291,25458,102309,88396,75288,230440,206396,104551,58447,130857,37247,94734,31548,176529,226077,65159,20104,10096,66881,94191,237909,27109,37404,1520,27421,25220,113003,23423,24884,50585,6286,231877,150800,11789,3226,90004,60642,5053,202400,61442,132531,175329,57138,30116,103847,9973,75367,16452,32360,59119,21246,10191,164804,23305,61051,37348,154530,13214,5468,50403,66754,130976,50559,80515,14436,155492,84017,5472,43107,41240,2890,90431,70188,382,76234,48040,50211,281038,237007,32115,142178,1536,22761,96429,1811,31243,1679,49143,55209,17402,235054,61494,7462,77030,34925,87609,78002,9499,9027,73289,201078,101379,63544,27666,5469,10642,30029,49816,132979,95620,58086,351930,116300,2110,2043,30845,6154,11279,16727,4122,2277,27281,4971,3650,39060,61970,65951,39674,75686,38151,11370,130809,177895,32665,63725,122267,7857,39618,118483,44792,157755,178624,136994,24260,41308,22471,12404,21707,12486,30473,52781,50246,20247,39065,909,56825,103158,128603,31542,1089,41935,32744,12428,37963,84420,33134,72921,208449,42622,168151,127335,147107,46699,38216,12591,94342,85814,31423,24944,2605,87542,67473,192551,4496,56321,91819,17630,6300,256183,114569,202090,33209,35289,34897,24967,40520,43470,5344,10199,34810,14283,10381,10017,62923,49924,23233,64539,13051,35686,19698,11570,135555,120868,44924,87065,52318,52335,47586,140906,245885,109834,78668,9065,46990,25258,72022,61243,40838,4545,146387,10537,11557,17470,36930,68104,46711,24264,79401,81043,18225,120488,24746,84338,81652,28266,13776,21878,46973,1047,230465,73357,95777,24973,210160,62210,58404,110633,169651,6937,41870,9909,26822,191062,76553,27519,96256,239070,2478,205678,67955,58532,20601,50120,19148,78501,195724,110740,8249,109665,27446,30568,57631,31425,49752,32820,65504,50079,3663,102256,219898,23849,211315,14645,4359,91767,9528,12449,49366,7941,49763,107848,8930,27086,50686,9744,10447,81935,39513,46514,1670,29229,6172,22312,137280,97759,9806,14445,22976,56458,73391,34983,93760,174219,52573,33149,59747,2429,136277,75123,165263,91040,7446,57632,48633,97140,246081,84766,151684,79918,93268,120346,54059,54875,77858,32996,103590,45276,11968,19600,25849,17159,132907,42828,16817,4913,99462,103303,27395,5737,74184,20749,21160,14377,77062,131403,158735,10999,27799,77785,9320,34366,51593,61070,33746,47048,29268,36675,30262,53297,9832,82e3,20188,122292,39917,7331,18160,68301,185935,134830,15031,4935,10004,165845,185534,46923,30109,44134,122631,18874,22903,112790,26561,18549,348902,82871,140345,255565,135390,63556,103747,145055,179600,145662,296111,61661,211987,23952,52342,126343,48450,32919,44277,82185,9591,62139,205363,376969,394874,108461,18040,120885,14798,39863,16571,16794,58271,81025,55206,14640,118656,6361,44092,85970,6262,153863,108244,180200,72264,79947,38044,10050,5735,61221,80712,5471,115689,11391,11661,184257,20010,60116,30320,19327,134598,45455,27542,18004,125092,452272,1549,91523,46567,180063,156026,2608,11174,58848,37788,65907,80194,30490,5786,40775,119519,106241,11323,156297,8425,61495,2617,29675,2425,59886,112582,49142,59618,4863,50597,86710,50650,168632,27693,85641,83643,18993,25768,84284,28090,93592,36627,312804,43381,9887,9402,100931,97165,3311,173330,66805,28935,4963,184460,3201,78102,19126,21607,37496,24938,22615,16153,32862,134792,153318,61120,6067,2812,12826,12792,23825,37559,64662,202250,102694,155488,85881,149193,46233,65383,15521,106982,11358,176786,25752,39717,34208,24510,32464,77742,39371,72028,138229,60688,71386,102834,132477,2208,11548,63670,271279,28351,30338,38620,32491,99845,143885,152266,13252,2825,178663,108097,1775,78201,14897,113573,163346,62292,171129,22183,96598,38733,64971,166776,117445,9968,146393,44677,74867,20908,97328,12761,25656,26785,9148,112344,26115,99176,110121,22437,49547,6180,79320,5835,31392,43328,33377,75870,119860,69497,80273,7325,155219,43167,111173,28347,20222,3763,71752,55041,47252,14618,28088,15012,97805,194698,54636,2036,41349,6173,96604,61530,51859,43782,13361,24334,22668,24792,7070,23441,16789,3209,36211,208475,26242,32880,122181,182407,21444,31060,88459,29929,77907,12716,10934,97005,20599,31690,8403,58445,30303,22700,10336,86731,103115,337709,72556,46788,112566,47684,67089,53548,36874,56487,41387,125985,26893,40071,106683,73712,18787,40105,72992,67246,137276,50802,36790,70328,138827,22466,39263,183295,29858,50975,9322,57397,10654,24364,30383,55799,41600,23584,127295,296610,129078,143558,244131,86397,36049,1085,80677,3820,108139,5476,34767,24683,7758,13060,7239,131671,250593,59556,103392,29810,4188,252323,39404,116877,7651,43600,40338,13554,157253,39196,25978,144387,61211,234,50104,6129,10449,93777,9240,356378,274148,4439,72970,3724,147770,78680,62570,115877,40027,40547,36817,224392,64609,34795,165027,67440,2477,37206,23431,50754,164797,46018,94995,170982,27051,7957,22767,3674,27900,56419,18930,60701,41302,2692,84749,339721,61996,111094,80221,50129,1045,8153,62945,19202,8250,37208,37418,32560,79477,41106,88569,33963,36693,5892,30570,1581,66471,49647,11922,160717,29442,5643,114865,82962,95982,132098,22633,22838,94726,54556,28566,205039,162340,33216,16849,35847,221339,94851,26533,71469,1805,3804,12935,45483,71020,36310,65381,192960,34240,35165,59773,1248,46954,155332,96864,4246,388800,16129,57133,74592,44807,442014,38203,42574,80818,91592,26377,36424,65760,977,77387,22628,147610,28018,30561,98454,6969,119628,63648,18170,36854,26601,64018,22027,37279,51395,152934,21153,9430,58760,194742,5330,55115,34158,28917,174111,13171,122326,1526,43896,66094,25325,4234,148354,11450,275,18999,112191,44365,22723,68409,8733,57746,96565,75007,14196,108844,29475,88599,177563,100792,106156,86323,93726,14248,135341,194131,40126,47099,14779,8272,39597,95983,171398,65882,28052,10393,47213,40689,22120,72212,106829,34964,109146,753,648,21660,30047,17527,181025,5619,145357,4085,216883,9359,186951,24779,53931,24545,36197,223296,62628,168101,4243,107313,30321,26642,13049,51059,31027,107912,807,73550,26551,84369,122422,165872,49754,74213,234264,33151,52014,33100,87183,22365,52500,40013,23302,5652,72723,21404,26107,48434,587,94049,168493,96418,32871,70860,31709,25128,443,71597,166253,15670,70994,26341,133675,28280,75491,54756,47955,56028,26182,11952,113272,472197,64640,110753,17919,337,50642,22576,142,87371,53391,93210,126694,15285,19642,85667,14148,1506,42092,52962,33243,11970,20734,135843,57044,58880,13002,219134,22876,64754,232519,4257,43120,321573,24799,64526,124728,52579,81472,70831,276848,17403,74359,23021,182101,74597,23744,148267,12055,7976,5349,11772,67540,167347,65318,18720,127832,108238,22828,90233,9987,259080,118185,73209,79270,13775,90100,137742,90799,70569,15699,19961,9087,67475,57872,39731,8810,134897,131868,146849,19898,3334,2281,167061,91073,60356,467742,74712,188,53179,137679,92769,29241,9537,132595,80119,1041,88962,5976,40171,44911,102859,139059,104558,98987,47761,19272,71472,113864,175377,73338,10857,23402,23758,1591,139864,5644,4076,118760,16427,134198,18853,20291,100849,37423,22038,36677,19071,195521,57445,11069,31869,55718,66882,148490,44,41296,75242,49704,166810,9906,20943,122258,49112,105667,15969,10344,6408,187694,21399,72742,58970,14867,14376,81889,41856,23225,15042,56993,16074,131389,74276,72407,53875,383108,53597,37363,68993,44854,122548,430927,198279,38430,80409,12245,2981,628,2818,17760,37437,238229,7968,46892,2200,3730,34190,65983,37959,112291,87850,70827,6522,20750,73913,111621,41652,19587,2780,58668,25916,85259,18200,168962,95781,42445,102050,7776,57662,103313,47742,96358,41964,66174,100396,29069,204735,19679,27978,7479,40264,22534,61183,36081,107436,58223,14680,23002,101311,24716,124108,12908,5646,31750,40380,14215,232799,102772,14122,96775,61398,50917,12096,149880,67833,598749,124194,155871,49216,790,14677,65319,56917,7440,145744,95701,12206,49405,129269,76199,45732,9767,11058,9047,210885,11051,7392,26307,2130,8132,147526,20802,232698,115660,50060,59789,57344,107623,80343,112676,23291,9866,160971,34032,118291,15719,59730,164911,28975,2659,58046,78480,21854,66209,53863,109085,116045,29021,46481,107552,22130,18764,70254,31272,11300,52460,43933,84738,20721,53869,190840,79673,105300,7561,321817,66924,13940,33281,101046,183181,32176,71878,5678,62924,79535,56646,40303,19559,27703,93042,73368,42187,3670,37376,46440,7023,36816,109628,20680,5940,276440,275233,170848,112093,136996,14984,20226,111441,77693,112960,48577,39370,55707,50314,123404,26570,54281,61372,123391,4857,35928,246740,132507,106646,44241,7196,92258,9825,37688,51197,303141,5590,15476,132986,10955,85782,34486,26696,7991,28813,18858,39546,11703,11365,38185,5716,93555,11925,40121,60002,6985,10976,171384,3887,43394,13337,56346,6381,252336,39573,75042,53711,1028,31781,44295,95925,131713,7214,68125,43571,70954,213234,1628,8760,13391,65485,17320,56038,1710,25248,60803,57399,19839,3870,326,281556,50945,72400,21460,316244,75619,56246,98775,481,13513,55765,50427,7388,123519,32929,57908,27124,61316,101097,57467,30228,48792,10788,20402,37318,50526,155730,34456,158065,145305,17832,43733,64052,4506,35072,205355,177028,184004,187081,68616,35938,83703,10367,36892,93186,260137,51934,89970,4985,23445,26755,21558,7948,78741,23376,124405,85594,68596,57536,49351,12619,56593,132668,99924,109728,71844,71935,196018,65464,17617,14987,89701,143773,33997,8687,22701,33258,2914,4436,72108,85610,9671,49067,2327,82988,1361,1672,44033,35777,30269,24057,10605,82236,616,15793,13919,47249,112086,116698,9484,80207,90574,33304,68624,93127,56101,42210,160929,4827,38995,38095,4701,125119,5027,33680,9236,231236,14135,87837,23318,70261,78893,30151,81482,14332,1084,74256,27532,46644,79185,3148,62615,6981,55672,31668,36825,1849,14536,37446,14738,23779,43058,162749,72199,1168,21346,5592,85932,85302,9668,18351,57135,150360,2080,228015,77953,34670,119302,151751,31009,106725,84265,45214,59289,74178,113071,263206,111009,4021,44449,188119,192629,123592,392506,292847,114487,12831,205858,9852,20780,79648,75767,357014,97721,18166,21005,67950,33226,204009,16536,2987,11335,66717,144910,47950,17262,55060,15063,2934,51038,26775,178497,66008,3427,49433,128592,20036,157553,63861,3089,23015,51210,28696,35933,49942,71135,231518,99620,17248,21835,176536,20676,16944,38700,165831,233253,295625,36723,13023,52745,10907,19423,67972,125868,95473,82875,1183,108455,52685,33417,64095,21433,52438,33191,127809,44505,211823,7810,2752,95548,162031,7185,91196,47563,61721,33359,17897,23682,42806,178101,22874,49707,199897,75419,82456,8618,11171,79712,116847,18783,44190,46564,5346,59046,95032,7893,14916,3214,26800,24172,121453,34362,10250,17408,18888,4840,68696,22831,13162,36005,32512,14800,62357,41723,45046,27247,37486,5372,2564,34261,298500,66509,133920,89138,31305,117697,19097,108304,81386,84106,23802,46411,63304,946,51417,41777,41041,19501,115864,60743,294354,37955,94165,18116,1156,17937,20645,57114,90804,58042,48643,92288,9861,2557,88546,61333,101008,12853,5148,87856,4152,144503,73841,18718,9789,147565,10846,42085,12789,30223,8993,56352,67203,2448,28215,6052,23540,126319,75933,36689,80235,23231,23561,21383,38800,77548,102798,21234,31468,158608,46188,63960,191679,8051,67014,11185,170078,42186,28827,34777,41930,212079,12421,34750,24111,110344,73918,45171,70826,141949,40063,23979,24254,37309,26724,27179,24718,83648,54938,14591,17425,29525,102675,48975,48654,12316,8929,60640,41709,50168,63264,89812,50716,48632,38755,138583,160123,55579,71829,24230,233277,46322,39650,166388,34718,24108,98252,7031,106695,62498,18258,35062,217827,78731,34824,33354,19520,60852,2432,60224,8587,2836,62955,702,20227,42285,40560,95592,62486,11094,53035,143291,18842,46177,77994,1770,9657,107422,172915,32655,128716,25886,25164,156740,119928,165875,85817,11007,89110,33956,12652,65156,180266,8494,36889,19958,20955,96,1264,118288,135769,44754,86671,5632,19026,168220,289120,33569,93821,66144,70635,7687,5642,2714,55445,56636,71545,184182,93133,7332,37389,12643,52315,22729,11014,158742,17050,152889,50178,34601,41945,52136,9948,26914,63548,95721,115951,40759,8960,158258,38938,49232,48325,42234,81523,253019,66128,40978,20048,238048,38760,62928,122560,118532,43687,137472,163689,26680,9878,17448,51035,16211,60834,36749,29178,14241,59868,150086,2305,26477,42422,34342,165341,83279,33894,14257,29928,12743,13957,125571,89134,66712,10952,16507,147839,30146,7249,16565,45399,39874,114565,215780,31990,230881,171477,102,196546,44538,10880,84948,281705,86651,10617,31395,2342,453658,43569,60561,132901,21845,17727,58556,258242,22262,58728,4008,77997,11806,37431,30599,81375,109137,185787,114085,217292,97453,169085,30593,60212,11544,102056,65580,2384,91655,4855,95725,7295,157994,16228,20669,53276,141590,105246,17334,25440,76067,17967,39321,38911,11362,28559,63807,21627,26468,85816,40120,1025,15234,58319,69516,66512,124548,75845,78873,22137,46681,51242,85683,32909,76747,35555,43396,101465,1765,73094,1077,2962,39028,66777,57831,42048,15828,13962,36041,63657,52412,5242,58846,2141,5506,219012,134451,3936,182230,17558,17153,152237,22621,49377,170216,35257,68233,65374,6510,11126,212151,7184,2480,22517,3437,33073,30156,16557,3768,55067,86829,91e3,12350,148650,66017,79424,70885,49066,28250,21369,51213,34533,11510,3258,18176,18465,84413,6315,36411,163765,4346,356,107618,598,13727,285026,162695,8749,14583,7132,63521,184253,32378,25991,5604,30961,53675,4874,84693,5086,34811,26978,56564,7904,33519,51221,113942,69253,6664,125563,22055,220680,102008,742,51930,19494,176108,44424,35123,13025,75685,11759,74335,22250,181453,131147,16984,132115,154311,11991,76452,52609,85351,196,30969,9198,74919,2529,56838,71779,29187,116304,3504,62330,41190,86153,28393,254926,104228,105189,13264,84359,3574,12415,8534,57147,10175,188174,59504,60932,66318,16407,107921,17638,99103,49278,28403,39786,145865,8462,3558,43406,142271,29139,21989,36552,93955,72365,7176,13556,106185,37957,321774,17782,129017,51154,27938,24952,1935,39366,2791,33489,41582,56078,24558,9311,5449,218786,27808,190429,68013,36020,86003,29735,3404,87348,119357,115714,2324,86796,81973,40992,43376,93621,28784,16808,36367,2517,2909,191926,24978,55303,53308,205724,60068,3098,21375,64784,23949,26579,63121,12319,80145,39967,97861,6757,70143,67642,37082,34698,69140,122883,46151,62187,80934,429,19437,135071,137885,222647,13331,154065,327,61778,74257,40116,37493,14855,85079,237641,42342,102164,199965,71204,4662,29368,5042,113914,122214,8955,13149,102503,43173,5659,163787,69003,307084,63392,171080,21390,81918,86666,36622,24126,28887,5736,28054,207170,163428,79891,346467,95363,38980,111806,80828,9200,19288,294896,114468,87405,111715,141705,7015,72754,68463,48738,243147,33397,101210,37051,98801,82847,20397,4940,185559,18716,54718,83491,11725,40803,1128,12128,23060,5174,7745,67007,46701,1571,27807,180186,256996,18975,16837,7877,212758,250379,15440,87954,57755,24719,124057,83461,258,50864,8874,29038,71289,31627,15429,9005,4061,113851,107716,82819,13651,79656,117851,17539,111446,12938,39724,190787,4352,15402,21070,62708,8539,23777,73853,13552,38810,86117,16285,56400,1718,75342,142863,29033,378,110113,180321,32586,23606,26393,160984,207987,23783,8406,16904,24596,47274,11693,46539,60524,78595,48423,31718,20170,9009,146268,15183,191060,172765,1349,138436,37365,10970,40509,225817,20021,70394,152138,21541,66559,66544,89352,2725,17258,91345,7313,3815,115868,8660,40362,4071,103524,39388,118275,21950,6549,38226,32754,209574,29201,43495,18028,20296,40597,18370,47520,202450,24134,2219,8195,69545,38041,136934,46374,19041,159811,84865,58620,846,98749,13569,30714,97246,32186,4479,27355,92973,35214,151491,75963,37631,1561,27200,238083,23182,60756,12291,25766,39355,102333,87362,65741,59906,19538,201575,48772,102938,24438,292580,39964,66366,9004,61379,50548,37622,38732,28379,68180,76622,17488,69849,5963,7219,48143,43413,55358,540,58691,29506,19245,52193,48621,5518,13048,118625,44755,191081,42061,89197,2259,60665,66994,71210,51232,3585,142096,55024,7892,8345,58653,463307,65658,64319,137941,136323,53499,12746,43492,6978,95163,29925,60175,5128,7352,41463,184756,121146,20473,18426,4598,5309,54580,14277,121151,10691,56711,43880,63409,76682,11830,172218,264898,32632,66536,81062,31649,25788,92774,60222,11100,63159,9432,224657,25240,53613,152,138620,163829,2397,85345,12501,37507,64932,38575,43522,65789,80198,78796,35226,3851,108891,73311,3060,28391,93671,39663,46142,30982,66041,37281,68157,26553,71872,81142,211527,39747,118119,22695,2859,11066,20232,168911,7933,197005,17066,111071,44434,133994,120798,12766,227798,45756,132852,29917,36076,55352,65281,129800,41958,18944,84678,18580,168093,132621,39997,54092,27740,32354,3770,114118,103242,43918,15899,18574,145944,3190,123469,219903,24169,100571,62403,16776,92779,14535,17168,16475,14304,37231,1712,28218,242754,61688,28980,1318,51359,222657,99200,67989,31772,23932,35351,201251,49041,27306,19128,40135,3986,77333,19649,120683,151927,21081,7076,78375,77501,101599,8011,89585,96715,58179,5378,102138,106793,26051,217276,4197,16297,27014,46721,13322,22806,5278,29629,70632,9647,71519,58818,40603,128530,8903,36770,56900,31483,26935,43845,34265,34920,87658,6114,84767,64250,47318,50720,19264,162514,33357,13117,6705,46696,75032,71054,87004,42035,69138,11903,99854,102328,19611,34525,69312,6431,49842,101600,133178,108751,41829,89939,225664,48916,99556,9195,130387,5960,36857,116724,53518,94002,39077,53996,6945,22261,64291,8314,152785,57588,16522,9091,5048,87671,35441,39509,1945,12423,158923,178413,37549,14095,1475,73188,62878,4819,24012,68534,42606,4010,120809,57497,59564,101758,103718,32701,80116,12345,95834,46918,21468,53213,15665,31200,3867,5140,96013,250744,21016,10069,13968,35449,180829,27683,39704,59956,22893,3115,26293,32785,75934,62445,141162,62720,2018,83638,19949,114012,95006,3330,99829,130935,309272,9565,55874,121727,37017,23586,319858,40970,27602,8625,112329,61060,100088,118525,25922,16232,1907,60671,51583,44553,80993,5262,94679,8676,940,20736,11823,3020,16476,12340,152600,97416,3703,25744,66826,16245,16876,46446,84798,74227,176020,45192,61955,75496,23946,23626,40372,26036,6149,11822,30582,16541,41914,82385,232823,40921,80773,14930,3631,7517,39619,4348,36180,126106,138939,62611,1477,113512,47321,25052,14546,118881,29060,23589,128322,36795,18401,137921,104699,267929,36194,172791,18113,4766,188215,30083,332586,94089,5805,77909,22194,68234,154976,43220,40660,70001,184893,138095,11128,103010,22663,5108,212615,8485,5565,49222,54614,26530,42639,16319,55062,152662,105595,21114,22216,10294,68158,10436,86950,7206,62115,3977,3657,59874,456,118617,18156,106663,112229,80992,17442,8217,55551,5133,34344,251927,51153,39364,201321,7816,66803,23057,156724,145664,14276,95705,979,2796,6875,13429,212525,50602,26276,28284,3424,19465,52397,46963,31420,51399,206476,92317,48851,637,100820,83349,10317,60227,21972,6908,282439,32857,224767,95629,83882,42106,87338,69757,29840,68709,37665,45244,114577,49188,175943,54009,186746,106158,70168,3358,234002,50555,9221,129338,9562,20118,32923,78479,118280,65752,4977,10474,102174,60947,129006,10570,83451,8598,8078,159367,123785,80438,16742,5905,5281,181513,42402,6977,163136,93179,42191,14968,50421,112401,105440,33456,57347,121611,4221,94954,36517,24046,27796,6255,33394,72990,135408,116627,1233,57874,25654,95419,68156,401399,313338,55208,45573,93124,119251,47200,38196,11909,130667,45391,73904,64964,167846,4137,115606,52036,62214,7969,160925,7187,1132,134835,40309,73195,64494,80472,444841,61111,26500,45323,40743,53625,52797,22659,15631,29739,36706,28841,39147,102836,26794,10536,14845,87305,45874,12241,127587,83833,57183,79722,30844,41304,84655,20825,92500,3722,25655,27811,10157,81634,31362,34088,92487,70123,22190,185100,72658,139035,192523,88241,2078,230490,44528,85638,100198,22088,29982,291233,241062,13865,4445,137791,37835,107218,31726,19718,38234,72528,23046,19177,66695,5109,17251,28077,5617,21554,47839,72425,133825,1486,73065,181275,141508,21768,62971,63082,2512,34200,9904,120309,6392,91243,68416,268253,41199,116757,138551,185526,41246,28986,4093,19057,17295,4148,245766,122360,35356,112075,20301,75441,10998,7977,19769,62922,937,63547,100196,26427,157820,20983,236696,22935,8140,90315,156004,47204,140973,7726,45097,52725,22636,23436,257282,105247,522,88389,216031,202204,46812,211666,19693,68828,81691,45925,11256,30292,372,5236,167826,88328,232776,151611,5360,82104,18841,80393,25465,18285,20320,72377,31730,33160,45803,38715,27705,37379,24163,18360,103586,4015,32305,269494,91252,20080,36567,54650,7797,57073,12650,31164,42209,6375,261663,105528,81661,106002,2800,5375,17247,43151,4442,15727,194619,100855,144898,62320,78465,39929,16454,1967,28311,61363,17219,9395,8745,121445,76939,80385,162380,22009,54191,44248,16299,122830,48151,74429,78291,64755,14238,44966,2511,17712,67954,93583,829,105899,49935,84750,11591,33185,85447,42717,27409,208542,28965,62052,52525,5597,25694,65594,16343,63224,276188,12475,9331,127507,38522,57287,24128,133161,79723,105548,133695,48917,27558,43278,46520,13778,141954,110785,83366,17715,46317,105763,66298,147013,41086,94180,16478,220447,44611,730,19722,78975,117889,125643,26254,16574,18480,65006,15806,38549,246418,46052,36056,8440,34984,30170,3163,59800,4458,115442,4283,41970,33507,104078,1653,22,121158,276486,3655,6338,24048,133421,23641,2161,24422,36006,8086,10675,181474,12307,29514,59143,14729,52509,87128,122470,19446,80852,33314,24573,119864,14237,9652,57779,6612,51851,15284,98871,90581,124466,156831,21190,22015,71380,161906,87247,69201,18392,17908,108470,72962,40719,14338,17911,95260,43339,20610,78916,20710,72451,11315,31448,17263,58853,178878,48111,116002,45497,80506,82605,85880,36300,121755,25215,36118,301929,88728,405223,276136,553,34704,212438,49970,78329,922,20711,25036,257130,38295,145369,18128,15385,30829,55656,48345,8012,3561,28004,122041,192900,58338,112508,41085,29976,87040,47117,23905,4336,92061,138880,97407,42083,172121,6256,25192,172671,5,93568,1420,12677,31605,56743,40620,6015,78415,231077,31298,80026,13902,19048,24924,170586,32955,176119,87859,36731,6773,27711,24658,26475,115216,133207,93250,95820,88522,8317,5714,124047,55219,86860,19677,23961,22928,162209,8904,225992,359835,56084,96201,29392,96558,86071,93643,55114,13347,8183,95129,82012,2017,123336,34219,115554,157159,47747,101684,41008,18735,193781,104151,226906,7552,179874,124113,31159,21162,44010,14771,51268,166128,31382,73124,77438,92830,205709,12113,1292,38937,13114,1334,2118,15597,69581,14449,21934,76618,48728,67038,14967,51495,24243,87736,147249,26720,11119,46063,43749,5843,44147,152629,133428,65703,14269,45604,57982,28672,55616,45957,8438,95433,37698,220862,132034,39456,61870,4161,26501,73560,56418,9845,4654,20916,10456,88920,119358,9015,65931,96507,48029,38534,21676,109081,43078,34943,25089,6131,28766,23665,5477,10255,16695,67,45778,42443,42770,29534,23733,100513,62617,42630,48746,14191,43753,50295,26007,8792,57243,43119,54725,164253,58250,112304,131796,25165,4651,3188,24831,47748,3705,19540,13211,102095,5593,18699,23666,32005,117571,33541,60584,74573,86311,99443,25172,27222,168938,7143,11853,53560,18834,19960,86522,28217,53266,117700,72989,34323,18721,66450,34346,74056,47217,202002,46269,9429,68582,75458,37823,82843,96652,32549,145144,27958,19820,158086,31955,201406,135379,31207,192545,12950,51704,9094,248263,76147,64028,110009,79407,89345,99284,223492,47966,26848,15359,201137,2861,110507,71231,72297,31851,118777,71039,151051,240855,16333,50766,14727,7939,4149,80908,418780,88378,59276,1327,7284,38576,79814,65820,42199,84860,49574,62596,12396,70598,40117,8648,7994,16836,7630,14047,359699,106878,525,29037,28064,13380,11675,50669,74216,103539,180314,27449,56299,172344,19274,7301,246099,32043,19422,36506,129317,6806,30140,4614,46639,66926,932,86600,6322,27847,233103,10541,39025,34887,3517,12972,26220,2031,66561,115015,48658,47596,12714,33845,3893,16165,35237,89983,14769,11962,147224,47018,29977,27979,5552,82338,86023,131368,1218,24853,237840,132193,15455,40873,3668,65351,53388,15229,59889,272245,47934,11858,34347,18038,90853,86981,300602,19343,114181,29362,84921,6095,106059,79472,38015,1206,48741,6208,8e4,21916,17423,6002,108083,24479,34931,56661,9511,26995,100694,163853,35997,81254,58321,18919,171890,86877,91341,74503,70477,53412,7027,59281,39892,131302,5864,15947,61301,67466,162369,47956,27874,35624,282324,21270,111847,102548,41482,30955,116737,28264,8592,55458,22301,75090,29821,30697,51709,3041,19208,8038,24634,30467,87509,126428,19389,18814,152686,20701,83474,45832,80891,105808,11378,153223,120770,98186,150633,49838,9141,12755,30962,5260,74490,21256,31678,65062,33326,289838,187831,20595,89768,2805,58535,10844,70085,12090,2451,138068,98544,24461,4511,6754,41684,28203,3383,65355,82833,30161,83924,234361,128424,28921,222594,33975,125491,34069,11508,67464,144226,41850,98703,34371,7901,21254,38398,65651,23549,53883,213340,123269,12028,71764,177701,28758,2623,68395,11549,15232,68603,9660,63116,36079,57093,31198,20475,48467,89984,35619,186847,107469,31389,43631,73867,41949,68841,114250,1605,30564,63403,17588,27680,99533,12641,70325,50428,73426,78379,11855,91651,72081,91720,60198,15743,12065,83398,140046,6761,46598,45900,5068,886,62448,148968,37347,19405,9680,15819,43496,63370,75667,163700,37639,3633,22774,34341,183131,134335,37200,23915,7054,14194,12970,26438,13350,285521,25594,8219,104410,91039,168804,138480,149734,15907,33818,61132,60082,4622,110187,56736,13551,73571,3945,73463,65498,17758,263266,17593,2710,27585,54469,38200,45367,63754,28881,3473,12791,98287,31895,65787,4463,94536,24951,36332,59901,28803,52130,86403,7668,181822,74831,18977,9850,177206,145485,109798,7292,31421,26280,77211,58511,12507,127004,11113,147,8729,56208,43066,79926,129937,31345,83947,39915,46146,98763,42566,1337,13192,18323,105163,80570,117753,16555,72883,11077,159438,40764,70933,83329,26066,12276,72059,21655,173836,126713,69454,153482,91585,70644,102558,110483,6764,127864,190133,3961,101798,20945,71138,82402,90884,69669,44753,923,16939,59700,164258,25969,27082,31399,43846,6306,246093,51342,6153,151581,202801,182731,56475,162188,89426,141356,14355,121815,27536,28023,65257,77523,106668,127314,24947,12790,38796,169698,23555,10725,44573,183083,42088,62716,43265,105958,32050,44067,50118,1668,3874,6243,318411,16599,1691,94999,52378,28671,216728,123258,2059,34969,69225,5913,136280,171443,141515,91662,22175,135282,80020,92270,1663,4808,4482,3495,34691,5226,109830,108512,17342,107488,11606,123190,100247,29666,146527,113014,15794,30894,13224,39585,243192,22351,9903,7836,47699,11078,25468,122291,48821,26780,122679,75521,81450,630,4895,92900,55074,74293,17441,3563,111657,103102,51613,12318,52370,36191,68245,34269,40445,41354,122901,168604,182500,62012,42557,11259,24428,115113,86345,12362,3909,78430,86852,134602,20459,47853,93879,22577,7659,3688,38555,13349,17381,56715,91639,12493,10895,92438,3142,37057,28928,2004,36427,32268,34222,209974,10432,67436,41989,173518,107930,27079,62729,30908,55558,5828,45031,14902,53546,8204,144263,60255,14520,88212,86582,109589,69356,8064,47449,8505,66558,16886,4844,52817,111260,215129,12941,91118,650,20770,6273,73089,40618,62790,2873,35002,14023,97208,19386,102646,36993,143736,135457,35385,113601,17893,32627,84439,100619,56016,6581,57264,172160,45452,111710,203627,70131,24100,322787,1996,35665,70078,22358,90922,83658,4097,63200,58499,14542,99153,52159,6615,12414,63415,31986,16823,1579,65405,137809,8841,16898,48082,259,33014,42375,12260,179850,73667,91389,98882,29532,17311,326251,41092,5928,20742,44964,48019,43505,9317,49265,6643,192712,48424,163487,19861,20113,70848,31928,105333,23685,78563,14638,54755,7158,24142,44018,20774,125255,20331,24280,10163,1285,2336,39851,4299,117269,46714,63816,87779,159624,11731,9971,990,137317,108831,50994,74554,162680,23640,131597,146962,170620,34829,91205,21184,1913,63616,18427,93136,156592,17519,67565,115882,138220,78622,88535,18115,2711,33554,109492,54298,971,24914,25863,36363,45715,27099,194995,14299,178181,111488,72395,322385,157719,130787,11897,81843,83999,11369,49280,118604,40922,61332,110343,53407,75639,40582,300440,54722,25637,13694,48248,48278,194521,56203,52779,48783,72627,10953,376,16733,280238,26351,230789,15132,25168,137270,3588,63704,73376,94031,74284,19443,159557,9697,39901,13351,119050,15406,146455,3460,29556,75195,37673,102524,92329,47289,98413,15311,100684,56345,7116,95480,11590,7200,167,23610,58426,17730,136656,27944,53151,2701,8824,103124,3017,90744,113588,53216,79736,65940,26931,498,29568,80540,143543,21292,1740,59268,16561,180816,42323,50174,40890,52866,10703,57169,4700,17191,4424,93511,49698,166650,26972,48631,165169,82879,69326,202970,4007,2376,231325,139592,22119,62851,37504,68816,58345,67398,186643,43331,277416,53749,15746,23102,17432,4793,151138,48822,54265,48203,198688,14305,54287,2291,18018,113378,123260,7180,97549,87027,120085,2920,76080,8190,102005,5641,64580,14955,59802,54028,58884,19367,81779,412567,85957,97053,103637,78871,29364,27637,141728,4767,30686,112738,130146,42745,12730,105040,14844,232,210944,36581,152317,135543,29744,3129,55647,58149,46319,27265,17499,28005,59948,7170,34138,5702,293047,110892,408,91760,218674,18469,46095,81403,14389,4610,35672,73060,11006,74848,104820,118143,190357,20043,105358,141735,5115,27093,45924,123073,52599,29433,9616,238350,78610,24851,58858,26769,31969,24613,18294,4982,32735,39639,143563,112073,202205,12567,4873,88601,44897,81503,101648,81362,34662,85277,17574,48173,21435,221188,40215,39576,80786,26544,64668,81841,10731,37733,247986,149188,127703,495,18382,54388,72446,43071,30974,198723,89608,41360,190,33045,8386,31658,19992,237838,119015,137622,50890,100913,6460,116233,267230,26621,104129,65114,14190,41542,14888,85962,23342,23041,26453,43725,71809,45186,4770,46452,53894,56616,221286,18973,9038,109299,55365,19366,26863,18808,60909,69353,41738,83463,12100,68561,72860,3980,13796,49340,12332,31311,27418,4255,53430,18976,45523,510,14224,30477,26581,4530,3651,101663,139840,22709,150861,31996,63923,120623,262522,3076,10528,2929,14672,130238,18087,9816,121894,100308,25085,55111,14565,18952,53293,2042,369988,23674,61789,133529,28783,108293,35477,47119,36448,71049,40015,33055,78598,198442,1833,159937,40654,77444,189245,113153,8621,18599,38553,35223,166072,2375,11659,21786,89523,6032,12116,63046,159398,18454,3678,32521,47626,11411,103527,38896,42946,15696,26370,10185,8413,37080,165583,4331,63555,14907,72220,50056,6623,62236,36565,49783,10049,17503,100581,55951,146244,24724,9626,17969,25524,109300,173965,99994,101056,46459,43647,53737,277968,8347,123521,74858,33829,44762,77574,877,81377,222525,123532,30602,43881,53145,2973,16284,81940,61281,127044,63620,9875,14756,114829,19032,9202,52759,119141,23928,120551,19607,3599,33401,76821,73233,117430,39968,36539,7071,5446,121735,194059,15206,45283,6706,15603,65615,1207,165723,92275,34773,104447,8396,32353,205240,164323,13600,60555,79205,25532,22907,33410,57480,107111,69630,32137,47832,70913,33161,20321,2371,117348,10714,86246,1625,11763,17900,268,78457,99175,97940,101092,86660,32221,14041,128504,125080,53744,124263,31017,13897,403,31859,21964,5633,111630,5547,77329,17961,18241,84995,25984,12983,67491,62168,47262,5241,297,51191,7351,8967,147212,82060,16821,782,11033,82431,62957,5026,43459,77963,203477,53528,6247,191852,87774,74164,215654,13467,1522,219964,28589,244104,16242,117821,67725,72570,156792,17186,15979,26990,44128,193014,35276,57125,16212,166451,68017,6905,77608,16364,53777,75921,76426,37975,26203,269296,64099,84122,12077,38533,830,4407,20139,963,43028,38902,42911,37503,83343,85045,16979,1165,60835,137387,58380,86990,110066,134540,56331,193845,81238,17922,163093,38744,110641,12502,56404,34862,26865,125964,12965,111648,25547,7771,27196,136980,9555,29551,107158,57885,18831,37705,35505,101742,13970,102109,62548,124657,23328,11124,89592,146376,248050,6241,22033,18337,80685,29898,11908,216623,67721,106162,146610,21377,15085,91552,42041,62560,122532,125336,102365,121537,142559,29693,223919,11515,110495,18776,22494,5895,185059,103592,229351,51220,100102,37027,257855,29359,54123,36066,106493,12244,79258,32002,432,56205,94836,90182,6726,14762,29391,48938,26864,38083,60364,3310,60192,14766,205567,57504,110760,22649,24666,46333,21517,3430,13135,28873,27052,158809,11597,20529,6695,23138,22960,37137,45574,6545,305877,43423,26153,24769,59844,14501,10430,134352,56169,13213,103432,49523,35181,13435,12408,129475,64620,230854,77390,51990,15653,83248,33466,44571,117828,51481,2187,10559,68019,18021,54895,48247,18354,33737,4554,108595,37288,39767,116707,9175,3726,108877,21616,83684,49862,1938,8543,276466,20134,108498,48770,102254,31914,131520,185291,100559,51890,209,19526,76471,50544,71814,99351,8172,198526,28816,20419,9109,98389,136777,76479,75596,30635,165417,48216,120220,25955,211071,39314,24308,32164,2559,146280,43403,9233,17947,90585,1786,86920,125662,2457,64741,32152,32918,122882,78538,44001,31723,56426,23375,103172,88177,145697,52506,49319,68016,31664,41488,18486,110400,7030,28241,986,109199,19900,42147,56864,65287,49183,7858,24e3,30453,840,16673,25907,68916,89927,6309,158335,36407,199737,130464,13137,59603,201778,195292,21015,42466,179062,172561,89492,11075,180407,31868,72493,20998,60217,9865,19530,39274,130266,54539,21623,12535,13505,40641,73375,4087,85633,2153,3117,70680,55788,92096,47509,98493,37490,271936,151475,3032,16171,96642,34106,78425,125761,19591,3366,19316,54508,24183,50786,194248,91528,33253,34622,108355,41741,705,3814,3883,108929,13203,67831,10142,59754,68208,29128,84820,56880,38794,24972,48571,40821,40476,18137,164254,24064,236309,79181,11282,395,39169,2013,51587,28551,9645,701,109513,115899,113566,12762,62045,58322,103726,41343,40866,244102,143816,2490,70346,40973,52618,15412,30720,104315,38917,42027,93676,17513,107418,20706,123890,13399,97727,24044,87962,65606,44250,98044,65276,74790,101473,19350,91570,1326,87790,172042,7577,100813,86896,85891,41512,108130,27794,14875,71431,12835,156250,58135,3759,22476,42176,115873,34686,56523,73643,108505,51491,20838,12721,32863,45700,29496,13700,34294,55360,29206,155942,123812,7706,163234,203,132720,49358,144431,8130,175788,35818,3270,76832,25710,54095,97274,28779,94621,74396,19092,128242,58067,20885,14670,93255,15107,63291,23654,126900,129421,59294,262659,9798,3251,67344,28600,44629,50672,29072,26999,31526,23183,49175,165843,175455,17282,175411,32022,45989,30298,90690,78118,83156,23749,35636,31317,7069,80381,94561,133756,14960,97404,6138,41065,78041,32843,16601,34123,9559,146529,123377,96395,54441,42012,84257,123541,10745,22139,106459,11720,150883,172651,154996,110538,4728,53447,25704,2009,71152,119354,21166,66604,1429,216162,8637,122250,63520,27180,29172,36124,276428,107787,77184,4680,14952,104903,24418,14793,51561,52931,8371,26342,48526,7118,92066,67280,40653,8847,34597,105438,14198,50163,61188,146286,50315,41205,170829,161496,585,197359,95056,1687,365794,91349,48507,5804,49263,5146,104902,96365,117343,132222,46084,96919,16875,8073,262381,79982,52663,13928,16056,153908,15145,109256,132308,18763,24904,167644,13618,40750,18686,147124,114709,150038,52849,2938,12568,48617,8778,5459,44202,44591,74914,17183,248689,13878,7822,80060,23116,194037,18487,2067,7798,43077,33678,244028,31320,74273,2794,19466,8218,36280,183997,48124,19416,29656,19280,98734,7715,18311,30701,133602,150307,126956,7378,2933,79903,13178,12593,86571,26604,92446,13574,44205,65699,427599,21118,8245,14407,27877,47936,33542,7916,26460,117762,21596,37818,2249,127359,209394,60044,47677,308089,36791,154971,31417,6998,150042,174360,12255,43009,29335,48739,3912,101398,53340,2580,146939,151295,45360,125275,15273,45383,27456,48761,23314,8750,60801,85823,104759,27894,123685,66968,39480,26917,55290,83305,2696,98390,57569,145853,340733,4919,20024,52268,30884,7413,203685,70989,112855,4129,50536,349518,68205,332641,159581,135361,236026,37563,176404,64899,6578,122033,63871,1850,85234,82089,66124,74145,121098,107351,12687,36881,117334,13136,14698,85933,93866,18047,32620,310,15094,46e3,88451,23632,36645,27940,87618,80520,58892,20976,27702,140090,96075,67841,103292,238964,87778,107338,17019,83427,67522,7302,8261,47570,116787,8730,80484,61772,174422,56005,131193,52875,14588,28471,59817,9586,15720,158155,51307,109734,15196,11025,59331,3884,52626,102602,84797,25158,27314,4437,20488,76214,189248,35023,114952,157376,2827,62439,102878,129749,36405,10329,109339,108633,36662,1254,13267,5470,87105,58004,15397,10434,159667,21864,52022,179464,3013,32147,31496,116832,18494,105502,129227,107267,50033,13481,9954,24267,22141,16257,116154,36185,950,115685,11305,176708,2048,178671,112573,287867,162328,497663,95170,50979,193861,50987,30368,136257,31830,46549,15119,169876,23788,17462,249887,57377,1949,35448,14791,43769,210091,3783,34612,282103,88380,245190,5457,20491,98908,11402,86899,117916,16028,162584,60644,320177,156096,31065,55876,22e3,77655,9992,23397,13757,317623,63978,215255,2443,17648,93231,27388,104529,93807,55505,140477,12046,112040,70887,40152,94365,112353,25063,114679,266061,71248,119555,15589,2244,617,14129,211431,70110,100652,7777,4383,85911,89221,21010,120615,58357,86405,37554,41647,18,15143,69662,60491,14714,186134,148344,42347,5410,168175,44535,42449,343894,129417,99682,20659,27272,140483,63455,222159,17536,13722,42637,62324,11976,114691,148109,2283,32057,182393,4295,147364,33705,2075,44303,30274,28331,63740,69740,29148,10346,44862,33716,73937,153333,12930,38784,247159,2515,41053,20256,83368,256189,54639,115240,5096,24661,175419,153552,26516,141,138176,63885,34115,47222,55709,2765,28479,38875,236608,12229,22921,77291,54426,45388,2860,57787,114579,295139,105782,17826,71066,19119,54364,69385,16568,12323,28057,33346,34919,124763,155533,101386,31644,8627,49001,303600,29868,63213,9103,77280,71333,9696,138789,37059,24823,5057,21352,32368,114208,56803,19424,10445,58514,8661,209508,26187,171838,10460,63454,14016,122504,41328,21329,46618,32493,38225,7855,31763,7945,29876,8734,6438,24205,97490,139977,130740,47323,33195,85390,57194,13813,60600,21313,96251,7699,27584,170521,139271,1363,4402,336738,129223,84983,69150,13147,3590,163929,207225,155260,55916,20288,4503,8398,98490,11773,27512,37113,84976,86558,28365,11756,116005,182148,13733,115313,47644,67208,85069,9347,14995,226141,14704,101835,41159,35314,13113,63526,214039,29978,50446,83339,17440,129441,72522,118641,97816,24907,73844,15717,118884,167255,96509,162793,30847,36849,51297,78974,77793,10427,1873,2972,9999,35074,28190,64297,146836,46298,60038,163007,108919,61219,2403,75022,127339,4233,110389,69022,9833,128097,88016,79390,222936,22570,94657,28462,56956,38803,81536,30474,152794,19566,16481,147408,74574,81895,20731,1918,1366,76367,187321,54494,24366,21690,61696,33283,107477,77499,31112,414383,74362,18463,218441,120929,59848,258629,201924,69269,454,19989,13054,59894,3623,58908,20681,35723,78523,102680,38988,184112,108087,50944,132704,52966,21699,18860,96349,201411,82697,85395,95658,5093,6427,177894,44191,32755,26961,155739,6249,31310,81030,26574,84311,120155,86730,113535,7424,48888,13516,45747,98098,20077,183995,81945,43210,26704,40420,75831,45648,11180,6855,57927,65528,124096,34851,2598,156633,107572,127352,38169,123845,60142,62722,105584,232364,23211,68120,1601,22169,89299,747,258039,80572,7258,152249,11862,101204,8834,121434,33761,19175,133142,46343,40178,48723,3589,41977,30210,38868,62257,10087,82658,87827,90646,16415,47552,351723,28298,72225,91146,272760,1701,11295,1652,109651,300747,51863,198800,29446,11794,32345,37538,22356,33102,37590,113544,37970,11478,179743,25454,103417,59905,221970,105196,145604,7817,164809,102360,16974,75840,255333,56902,6659,1954,645,59400,67769,7689,18675,5215,13793,20536,27852,3387,29523,259718,16860,94625,43143,29245,15848,233581,22685,63631,78557,22836,133302,84513,1348,51826,47129,98836,58284,1830,1749,94642,10933,6145,12506,10975,13879,103781,144434,10268,28409,32346,52968,121567,107374,77268,23686,35097,10501,155275,15303,47136,21102,168741,55332,90385,15996,84817,681,137803,25054,142275,6163,38175,8056,124296,240642,65621,4934,178205,16101,62803,60964,18230,100622,76465,44689,14545,9543,47514,16852,93380,28048,12047,107106,37575,101485,77047,57326,34819,96137,76916,6469,46264,115983,75768,87668,69942,13027,165,8373,114231,26434,52844,42799,182044,23580,146254,38081,43236,33883,146220,382894,14606,46035,36481,166621,35417,95382,2957,59384,60428,36358,66343,75378,22267,22950,83528,17577,56474,25285,4619,179691,75355,95836,53295,34588,171410,4487,14679,84208,44015,18562,109133,54101,11531,86052,174479,303157,28095,9953,35642,14564,39802,16145,77606,117406,53038,121117,53624,22062,1212,7632,127157,237292,189087,10478,127345,102515,181997,86752,87623,10966,121602,68783,68681,83042,114380,138349,191305,67176,50085,39016,1427,42384,1412,67118,122616,72389,25260,2237,13576,137346,19938,20304,2191,68759,5373,61364,238507,75814,23931,69565,38993,131741,38364,12528,87762,5679,129853,5310,186831,32653,90338,260176,389531,108118,26843,43985,50175,30563,25106,56965,18130,140428,4542,165503,117991,24219,229605,1819,129663,1240,3797,76093,18398,71339,51919,93043,27175,47060,216257,6483,35051,1217,16512,80798,129064,13225,69339,8548,237079,72298,2575,34280,51379,117910,55671,53345,247552,29486,39328,140821,34681,57045,60177,5004,90269,78522,2479,322607,48474,61296,13057,31558,4678,59271,6699,27044,31988,35944,12503,83480,4389,136508,3781,114121,70279,4488,155829,42214,2898,68191,75695,305850,45041,74344,106509,30087,17429,93292,12477,290,23080,114802,35714,18751,26554,105424,17775,2144,2412,100610,65192,113975,52975,180272,135050,129815,76238,106483,21440,63186,4260,46189,9711,28249,4169,23429,23390,8324,141585,63809,67668,38457,38063,39226,59972,1189,203916,62368,14403,16949,61767,85801,1739,40147,35049,76757,33124,62102,15780,103593,103009,53484,22952,67973,114645,6566,5245,50462,7601,8288,3513,194571,80276,1908,54592,5124,58571,2513,6800,273997,193904,1119,17991,117245,2508,129156,82366,26278,71465,63341,56943,39662,106116,94966,156875,9736,2204,122308,94418,27134,1280,24539,49022,45314,3764,50904,46424,30699,28087,293839,9400,33646,40165,822,147499,50263,116179,29085,11863,31314,5578,17797,5104,12454,1604,15342,219206,10232,67800,94261,25872,13565,90339,78971,75377,26649,41184,47695,11514,35369,20767,14227,41953,309396,148270,147938,33074,14453,27499,109019,39018,25738,240196,158931,52820,8612,95853,21524,137010,84901,70869,70021,116794,48404,38771,6732,1070,70990,187297,49140,5238,576,3564,253975,16027,16483,2811,37775,19034,25259,4053,2e3,70083,95774,19713,33431,92703,91314,42381,288770,48194,95985,3991,77418,13406,241328,245086,56533,35275,62725,9246,51924,70181,95331,16163,31410,79016,39312,120878,119371,275987,80124,27712,9186,220,23598,146167,85209,68238,282190,57048,31273,30555,80913,17594,75779,59160,135002,101219,189377,29225,96735,60126,62522,104e3,27620,86814,17240,147533,11001,5425,43682,410,49460,87270,69480,46315,59448,1816,76201,9431,11788,87960,29063,65539,47347,11678,33846,7008,196704,9895,6753,8633,120892,59970,572824,115934,6646,202559,892,48351,37611,251282,57823,67263,57750,26527,34485,90747,7685,88370,6144,64182,1709,41969,21458,62327,181657,49247,225330,122600,114574,107124,85361,111833,63243,71420,15655,191178,72430,18063,51425,54002,12364,53225,86557,18193,97580,41232,138398,67821,128724,8944,233212,101353,52099,42127,14006,120107,32789,32132,3498,18123,33758,56058,5779,128760,59888,98869,18445,84702,51911,13234,218379,20093,39031,8074,70195,20708,23462,24355,131384,60189,26390,10403,41060,7140,10781,49410,42261,87202,82566,41663,43105,60276,2768,5733,74176,28329,2297,145430,131632,83615,122915,105441,655,224102,5284,136426,67763,16294,188511,32538,61049,27893,3394,13951,159099,28542,17930,145360,9492,190122,32285,78855,26440,13570,58648,73908,4239,124561,2444,74172,53131,11468,10794,73566,11623,35343,64710,30481,4163,10328,38309,29901,10538,154377,76132,92405,24839,11679,3465,13449,11637,7824,2337,57754,1260,14458,41118,19878,38661,13416,159180,37074,163164,54137,28627,52134,184900,8520,40385,29546,30502,22386,66527,107458,6850,24022,47983,30603,35083,8934,304066,39500,9,28261,33026,77251,9374,44833,116312,34990,29236,63563,125639,135405,165398,159055,55690,88141,69643,236964,31983,25572,20436,36746,60896,31850,16179,11828,5888,3043,66368,9750,31167,7915,53111,36430,1333,64344,93659,20061,60596,180191,51630,6792,30244,43509,101058,22409,420,44210,109783,43223,27030,72477,72831,32679,29235,7675,47556,12258,39907,149412,84926,118247,24692,71717,105038,86009,45941,41189,89453,29856,52543,30627,226798,67303,59230,67415,34408,1367,99685,16867,128419,52147,4111,125381,117881,16173,44093,102224,31575,23234,24870,83790,127407,239098,3200,994,1255,100903,242275,117266,55116,38205,16140,29662,11307,40414,208793,123355,56470,4862,75600,30119,58218,70828,24075,26974,7802,192353,4851,5475,78720,66596,3409,28573,64396,30381,30690,59859,88256,5406,99945,103064,34463,37727,24238,86643,60088,4057,23741,5967,162904,38240,28356,93858,25510,122879,6897,3278,7057,11971,4400,35461,211413,21395,59615,39471,87233,55795,128426,3051,22470,41950,14705,3974,180108,80476,78442,204996,91987,15634,67610,139015,142373,35611,51134,10387,4353,153456,57749,181039,14183,68447,151532,21107,36452,20551,3186,46247,46383,129666,88736,140662,146243,2066,8360,7978,64818,106963,17896,47801,10723,114821,223295,74192,3293,3393,16987,74064,11277,91622,4270,29828,27951,387869,103235,1374,61988,120083,477,145892,128378,11779,211263,61354,18221,17869,46530,83061,108538,157981,90608,67199,95080,49064,195814,12302,66307,10348,231346,160732,112859,63633,146558,21271,31037,198802,47622,12862,95710,3910,77850,73961,85585,34752,61e3,4082,24595,103679,71107,8208,79568,150019,16615,24961,139857,32664,197366,4559,54735,32696,4126,162019,75698,13916,70108,159638,19834,9349,24675,175560,49643,18206,52459,27992,10809,88865,401975,133172,29e3,34558,30915,3658,25834,42430,36562,125265,18182,10155,40149,97082,208980,19575,60853,90529,66545,9600,789,46420,2317,88593,55595,98980,115302,5742,169155,1073,177901,3472,11189,63711,78643,65472,50459,127979,93,42202,67053,21720,157650,11145,141378,42033,22824,85705,79114,35584,15974,1510,54172,28562,12451,104226,19190,97151,73024,20948,5151,81741,21499,29006,84183,198074,54003,45120,170125,26240,35177,28389,64863,79974,60778,176915,232183,45342,2038,80253,41564,40703,32689,5430,100689,5366,23007,134279,14266,26712,73993,24934,64242,52113,102887,61801,46415,201049,54251,62133,122757,164883,30815,139966,2319,30842,766,13362,10287,134518,86111,81665,82440,28333,43019,18963,8804,161944,23439,102144,101145,80029,39052,248708,30350,117340,11878,128467,974,138625,63961,5237,74778,61834,67040,43814,13690,65947,33809,232476,115258,181745,28824,94013,9510,10246,93722,81976,7217,114383,3493,16014,69045,72692,12145,80981,9507,6692,1620,60820,330444,35474,33962,4797,7053,295463,46445,27026,12491,77988,49524,35675,90947,29114,166705,101385,133782,32704,6186,84595,176031,185623,45966,151302,63069,1699,107491,947,15458,74452,196212,6046,10498,12163,10239,35191,243951,9277,9090,29539,54460,22820,26514,112549,60372,51753,48756,21812,70861,260326,41,44222,10441,16961,48148,138771,216194,5914,52153,53400,212036,56519,26245,10117,45888,15294,138019,90913,26368,43842,42111,23348,6082,194845,161089,156206,51546,11647,30759,302912,262094,8635,78876,26535,35283,54183,31183,85484,147873,12989,5197,6356,72894,65347,20150,27370,73787,1493,45918,12366,190217,20724,13858,10981,67449,81213,7553,14115,72242,271517,11842,48310,88743,143726,22177,3290,243231,58452,62937,12592,1654,40066,33477,13751,9921,128442,15868,7106,75236,83773,10775,36938,10482,170465,17368,17469,161508,32752,98340,800,19824,264456,3901,87319,2867,26782,9630,113102,185815,24197,44584,86366,40224,3636,140916,31731,267731,9567,53678,72984,29389,27963,17106,50282,284911,60170,8322,12608,23374,89652,5268,39044,229766,8869,151350,31436,177342,12269,183212,120418,116270,2843,78888,69192,7865,184099,1086,129897,18383,70508,20242,18508,229924,124569,35749,50589,55626,9884,83115,40971,30671,18135,14452,38861,17844,201826,5549,26413,17189,13561,38539,10679,143331,3314,36785,171194,49685,187713,67506,4618,104039,17060,195080,50648,33159,19238,67559,134840,28599,157523,17130,38064,117398,94355,31918,13575,34538,40326,13997,3494,348283,62481,26862,3603,104426,244363,153709,112487,304612,199674,41239,35545,54869,293005,28223,26277,26899,4533,18518,15492,38587,80488,70485,160395,263,60162,11382,222152,4696,250751,51921,182609,10707,48463,46243,1227,49111,111564,46502,33342,56846,68541,63559,858,139927,16654,229375,76759,26478,33205,95828,23399,92945,2637,35630,28470,143992,50214,14174,21456,166191,65665,1711,21594,78019,97599,111701,36,147151,110246,189022,43021,30397,40757,131935,42065,73335,48039,26596,28984,15102,2361,7421,202167,69744,43766,52826,3642,83304,33873,75140,63169,192389,36551,92748,13039,123959,233220,21738,84447,77230,20228,187852,19095,25799,92136,108774,29237,53947,2299,118106,2687,8830,42331,202924,33667,2023,73763,30704,19363,19779,16737,35629,48081,24068,101013,162338,291912,13749,24745,328289,167679,70086,48299,23306,16732,17801,43322,54589,3586,63653,43624,53474,925,109177,251316,43805,13082,19511,86565,142182,92461,17117,101033,103319,64589,4022,4351,235897,5352,82705,107142,46391,156084,5860,61365,10558,13045,7717,18357,33922,12590,33065,6928,46993,783,46937,67846,8952,26295,6107,119656,18799,17458,50747,4229,179559,112727,118080,20683,41464,125468,51560,49749,44231,7359,35339,62988,136487,67015,5208,29150,24956,105186,48858,6143,18097,6972,16404,73489,58742,97196,36357,164616,5834,32267,13746,147733,15113,132091,34127,106298,39729,106426,22294,9780,15602,36213,71502,42808,66802,599,60755,5851,39120,67363,108623,126368,72770,91263,32486,30596,151717,7951,52002,43103,11768,68942,40901,39344,24037,127500,116890,48403,16926,86750,17745,48648,159545,34460,58419,5634,114317,67865,31462,23352,24010,98185,125708,69686,68337,13610,26271,70691,2980,4768,27225,102402,75453,28106,8104,6931,1176,6274,6475,112635,22498,6176,238686,26832,28893,90319,14441,15682,15087,39517,45270,109134,104440,45965,47645,81772,7876,52683,87720,12898,4505,185665,2769,113401,15664,57592,105229,137381,97059,119268,6876,43309,33886,128363,35476,144249,67013,143587,83367,25703,91436,59347,53236,2289,16519,19844,46309,58558,99834,23313,218816,231303,36388,51333,183535,109792,139277,54306,90139,18235,8275,32710,37677,82464,86025,92204,88842,117723,37570,128723,234242,76350,73795,34896,148247,58424,11105,11744,45746,63372,17118,49772,199520,81902,38004,22911,33752,3125,1995,53792,4689,26909,108150,146062,69674,41811,161444,84855,8999,28561,16731,93937,3189,21967,24890,22943,1356,145300,51569,28802,517,118679,31703,40607,48098,108854,25003,10233,73969,177495,5248,24516,215347,146192,48712,60626,69188,40735,5866,586,101541,6509,47590,52129,5969,222045,110933,25733,24223,65339,62812,2414,155418,35819,16022,78423,43138,20995,128255,240673,46745,236093,72176,57085,97841,61248,107,36068,193177,105427,55726,215229,20446,47228,100420,87091,14429,121708,23605,21157,187721,21880,2997,203976,99166,95068,25877,7724,98925,83401,4829,13182,18229,13718,239662,38653,116505,153497,30589,89029,38962,181302,43853,78872,180301,4786,248240,7401,106136,112590,77745,19731,60880,77789,125748,135487,5975,48627,34084,12419,215770,47557,254582,10364,106495,21856,67539,88981,38805,21428,48732,42316,12149,16078,52808,25327,51322,33850,51147,12253,122354,46077,56483,254553,115417,81834,150991,94662,86668,7381,12841,100650,18218,15741,22372,68294,50705,15535,84660,61887,22553,72299,31361,24824,17743,46820,64288,31582,77006,111674,116384,30760,80920,86149,77192,51979,79691,60342,122805,103800,240873,160744,233114,78962,54920,8608,3484,316104,72548,24337,5088,230040,21926,10172,36838,26,86221,83458,102176,12062,17571,41929,41170,28428,68239,41750,103930,2634,18313,53019,34825,97837,63115,24606,73157,152474,14715,91439,37033,109806,140259,30668,174760,380,135597,95673,136073,65073,134249,13829,17279,122305,4420,46444,10237,64848,203623,70728,10349,182885,65075,24519,25783,40318,34139,22222,63394,55266,102764,41422,20126,65100,90408,53640,35128,48932,11192,38935,96839,34782,39492,19396,41332,6250,5511,19492,51304,25936,104466,54099,73771,86115,5080,7669,30891,111700,13931,25276,72289,135447,14820,258641,25265,31005,281179,75286,393,95359,14623,13584,6680,101227,80173,44933,76666,54542,13244,39348,458,25379,109451,134348,81143,6959,65554,12027,51311,8716,57589,140731,28467,23316,17272,30458,25980,55229,77197,83798,28302,114784,7428,34548,26241,14712,39336,103304,18928,54080,12870,334,87722,15208,16895,142098,114262,39820,83913,57817,28682,7721,14900,108672,11250,62246,42849,415188,1724,26555,24549,25505,26443,107450,145899,61035,43528,6901,60726,65906,267741,21338,147590,42079,18924,73017,135236,15393,5206,4026,84185,1531,5988,113890,82647,303391,7386,69844,71611,189865,76523,31877,13315,19314,198575,32821,1928,67641,25913,104475,103489,3297,70391,18406,15446,113347,19295,93790,27856,1792,167471,116449,8541,4408,41757,63233,25765,86680,64501,27034,24816,34975,6079,4486,49693,36229,16917,21581,62426,27862,11612,54284,35702,194034,355,24277,48262,87411,70504,310164,118018,12516,47559,43502,57433,107139,9290,66533,80863,14634,34312,91725,28606,21342,67241,72355,43244,375789,37402,174015,105070,8342,44167,67494,1890,16365,11723,271002,1865,47918,8350,45564,27742,25110,125803,8553,49504,81925,62211,4534,15491,19011,80373,206920,667,102405,128623,245524,5553,113309,192739,65766,19567,22832,261958,29679,21293,71134,20962,105123,24721,860,21752,33448,18372,157167,94822,35770,173224,232737,75729,28937,46828,28062,25453,5207,140366,36665,30652,6169,67920,150458,92040,23186,184604,92330,20891,176492,49427,27828,38305,42495,143982,49560,25503,90043,29747,65328,47830,12932,11068,77721,9003,25213,94205,140426,46090,89945,138173,192691,33329,112232,129905,35709,27514,1841,19957,31411,127476,53572,17497,173549,55063,175135,19841,69314,5192,237921,117660,150697,4060,273045,50414,98940,65348,153665,164423,58804,156695,48994,213928,86036,28608,8355,39574,34540,16927,135680,18374,151587,10830,53805,16878,16623,4282,48030,8537,14986,46102,13062,72897,72,33050,108227,39451,45935,651,113320,40535,95176,57450,48843,5003,19019,10407,211163,3848,1068,4988,32091,30095,41692,15099,43602,107434,50744,7627,171349,16313,150832,352665,207750,33937,38256,51091,156e3,87889,90663,84175,24908,114900,50365,31494,83829,5398,169342,47521,54818,18935,8356,43094,41212,174536,10082,92550,6678,60614,23355,69721,14796,34149,128830,58187,3179,208,40325,28399,225029,401412,51150,31580,207268,6657,10993,69818,64282,289845,23308,12961,38447,6681,52944,31855,2572,47646,120728,179148,37240,45196,218274,4816,3695,21961,50084,35209,18073,51452,27004,6100,33941,1377,84831,171214,85,141510,9078,99227,32610,6417,11718,49868,65579,87902,73018,49062,46280,61742,21512,40862,107733,15941,29168,157765,144919,14487,5767,158014,140070,7241,573,71584,16921,223566,40331,179473,35081,47926,140885,41508,52104,59180,42310,32811,29048,123517,102413,80208,10104,14746,12649,153641,126022,37965,113017,4171,83,142592,2809,6362,50416,71323,116894,260776,16204,1524,5760,30351,12658,20703,54403,36083,45408,74772,4946,14485,50759,111222,10890,2195,167147,92962,130534,16283,177256,35016,15472,210156,151187,73922,117691,43250,52051,37392,24811,24358,30830,5775,818,21969,1476,127322,151783,58392,31021,106913,65215,89407,90802,28531,11690,20234,95249,44602,37256,18707,11928,5161,4410,26571,51903,49768,22008,25252,65780,209499,68769,203726,13249,137363,48845,86823,6658,5674,31881,1083,1823,108676,34518,166752,13791,14287,91576,91429,8665,11529,26401,16191,91972,30964,5254,28486,54697,79613,66520,18447,22870,45203,194466,22822,51703,12278,76716,44595,73455,33546,12235,144843,36154,51247,11116,33040,3180,225753,60864,1972,28469,12891,28879,10338,144157,56294,353058,38302,41447,87532,110616,27065,168438,6557,1213,50804,144643,24817,2390,136531,38174,247513,16190,4059,122791,131994,137430,39506,57650,16305,5188,54309,106128,20628,88071,67394,395446,250285,66176,91254,1399,114196,43915,60230,44853,27206,106353,43013,18733,345105,226453,51202,16607,57106,117175,35492,10476,89598,127439,15187,39624,13688,61570,10615,31111,59370,6238,175252,32143,224492,41388,95408,34384,148238,78307,38959,9340,160091,61443,15737,11216,41244,170,38299,102443,113097,26382,14027,33707,3957,76300,66160,19431,18900,6952,1717,108656,82206,188021,257335,27295,43999,41210,31777,46956,57457,12657,11489,15697,48060,204748,53583,82422,284790,30503,137341,8120,19615,220311,15991,10217,63424,9808,67431,70976,98221,4491,15177,28535,144789,751,13230,2394,1504,33977,132104,30316,22230,931,97193,185240,24826,22687,174322,15307,22988,1390,188745,180325,29580,59068,74903,18994,29195,79,15436,7622,38462,11566,138710,44828,45774,37768,99236,68137,84083,19282,22698,17134,74807,126662,173497,46248,16938,119735,3212,28292,213652,49013,9975,32180,45660,86250,4801,68788,95490,77482,113751,11994,44624,94452,46839,128497,100316,5798,58588,73184,202987,65417,37790,88524,1606,43156,97964,105717,34947,11203,100060,37742,130074,93653,107799,94311,196106,41347,8035,10780,16390,27883,118236,167395,1979,25006,19375,31628,18916,144723,78502,114047,103107,86492,107686,5844,20934,206963,23556,22591,16562,146333,20167,10471,117434,33085,2863,9740,36669,41849,37271,22790,18209,28979,8231,12952,54408,21731,25130,45208,55748,138120,75826,414,29593,9925,292865,25999,683,123149,7036,92159,86055,61827,103680,23176,54918,58466,57578,13305,5709,86479,16697,31064,17660,200919,10770,49793,33423,32370,52047,16488,62555,6459,8426,83493,7763,59725,82812,18628,67760,79405,68557,9612,7673,28102,56517,69620,171797,32458,29541,15870,81109,32080,207644,71495,21202,11039,91036,61230,2810,130800,32260,4613,60590,37112,75214,33979,126402,155062,30642,63875,12810,194463,82799,47664,16725,36685,43367,61099,449,172150,102867,21691,301838,36745,7130,18671,57316,34852,38034,54182,35578,65900,99486,19771,3456,2658,16914,99866,28390,28109,8262,21147,34353,20006,4228,137085,1675,203023,283196,198286,214375,163329,290603,152574,40471,83506,30068,14730,23177,131539,34759,27668,32178,71896,104799,116305,85430,119262,42860,25160,8911,23428,49437,105322,6519,16203,6349,74711,1230,38045,8540,75165,44736,25909,51026,317034,4984,32281,91312,27060,44431,17817,45363,155937,239085,35697,59784,91993,29531,126740,213757,76560,167776,285273,24262,8237,65030,41160,74437,48804,118916,13159,37842,1031,75349,1478,11655,108777,23435,277425,101734,67469,70231,124711,43532,28514,65526,54956,1e3,21882,17728,25302,40952,52214,149632,1999,2111,3259,63362,89961,220561,39777,26335,9063,10572,12416,34551,34623,38604,24723,5947,15588,69927,66252,119177,69173,46629,28714,70715,212408,20521,406913,74380,11716,50659,50862,37009,88460,130101,7210,53853,538,65120,151950,55806,163748,52837,13153,21100,16674,64536,6091,138201,44837,58547,3723,163,2177,32288,85454,34033,8497,14282,25742,10535,10741,79559,117493,243787,49337,100718,79495,40139,42956,7551,55433,15421,31509,23034,45081,547,61176,53434,328001,8470,36263,30145,4519,74173,53935,11845,73774,60211,78025,3,4102,73782,109293,315332,48412,26683,13714,6865,20128,18490,104141,325,39470,171970,115860,15707,7268,73301,74336,31370,2368,111827,107757,136231,142844,97138,96638,84053,38691,23801,1588,10573,122098,77039,240,186135,146101,11996,18143,112963,46171,155836,348769,47795,121213,116266,132515,3344,144804,31286,99187,255838,129694,35894,48779,55235,148582,71967,65282,15174,13920,47080,6147,108242,157593,125025,7136,1286,28957,127956,28402,98813,20805,7532,109417,40610,5041,32958,15142,18408,108596,33543,50517,27748,80114,233434,91447,487,37094,100048,30541,43477,10639,89862,155868,37667,8726,60684,237903,73408,99589,12190,38739,97348,3914,13594,2680,149016,13907,30171,28343,23530,115225,61104,35821,147679,14337,4297,244282,24085,326976,56428,7851,21303,131620,71446,83253,68692,111870,5224,15813,38197,49026,45057,13660,3306,76345,40671,27905,91072,996,68527,62085,91351,122634,55109,168209,2024,27560,112707,17352,8306,167115,169921,166958,5031,46020,11844,67284,19130,76185,6920,32849,5450,14610,22451,21002,17392,31872,66682,84796,13709,40210,59898,12029,8719,53564,21462,91884,21647,88379,194428,12754,37797,132826,160016,22567,54383,53186,77611,31107,8339,4694,19185,90355,23597,17222,140675,28442,23668,55977,9128,61555,28774,155229,17658,9390,24379,69357,15752,127381,239631,62460,93181,55913,45133,140155,18676,25249,33164,29581,82837,67223,22362,29975,7317,52813,1943,29613,20012,207130,49617,49651,5636,15334,36313,29226,28084,95247,72072,19e3,224932,15811,114,32127,38097,37508,88507,37225,27359,91626,12193,69279,20608,11055,88156,92808,2152,57259,55275,72789,24475,104414,1708,9882,3818,48661,66897,1631,34806,227930,85815,87753,18321,250664,72733,25107,206797,50891,8082,196411,92596,96764,152823,65514,22819,387277,62176,51225,40329,15563,189,3659,73670,64357,51793,275136,33482,86653,74615,67058,11318,125720,15388,22388,8267,1730,102663,170910,40784,7144,85373,13040,7088,94309,583,44224,140424,77439,18496,164026,36578,4722,9151,5824,63365,26510,35199,40500,79277,32495,44614,35233,9566,203293,152144,7097,2330,183480,98629,13423,330887,44130,68600,30939,97829,31012,345465,56747,94879,4939,160027,149761,99423,46099,32251,15332,8761,96094,128555,5763,235318,222223,55729,30241,55420,201746,3987,81382,8259,49325,23287,7719,24633,251100,92311,18591,110533,64759,170260,393860,7175,21144,132887,3593,75346,101277,91109,16387,259187,11627,57459,173829,44694,55780,49797,89192,120443,62622,3904,14814,23887,1027,112258,64955,99800,11132,66353,36202,48624,18158,88481,96882,43059,11040,2455,7077,21651,181159,99126,100434,61388,68186,19161,110468,120052,8819,55324,41494,7014,37689,3618,87729,92615,207943,9823,128657,12587,15857,6379,67628,51216,71775,157617,63244,1503,3864,218754,110864,5769,21492,7243,1192,87921,85529,31512,18537,42698,35350,73510,84474,34301,8991,21013,35034,566,38832,19838,35586,37216,39413,55006,12178,59742,856,84563,6900,25632,17437,49786,30723,13847,70845,4044,7843,23944,235976,55530,48942,6518,20939,73769,192653,52936,95207,23895,132542,142982,22632,87452,48042,54018,178468,10728,26230,23559,363,81269,142012,5718,346258,31456,84333,246476,51018,66692,101804,120570,39962,30373,70593,2864,60541,19425,54209,104092,7201,31545,48018,25865,15442,46257,40443,8328,6451,111782,47527,97754,33046,470,245116,31095,39,91934,87208,73470,36708,36521,12801,70624,36272,8892,79768,12427,55454,103756,5908,52390,62962,22720,141138,94634,41689,128402,126390,6628,106394,35527,134394,82727,254651,194502,148064,89549,3202,28359,957,21954,27906,49840,142747,8307,24206,48978,1186,71728,133038,71474,91306,6333,110959,74600,70387,18983,62609,56057,22970,1147,135850,1321,28834,3578,59715,102227,32827,81415,99952,55636,257598,390,22702,35701,85872,402916,39216,189795,14929,19467,10112,144422,61514,5279,63421,134686,41436,8424,51925,10598,132295,124416,4604,194739,210929,57866,31829,51626,50007,9976,91878,61906,56168,81906,60918,61859,40017,23059,16887,40927,62064,12785,32893,32913,21782,93965,20169,44387,79084,38463,11457,93950,27127,157050,2697,337088,5116,54128,48255,33279,8821,27352,25515,124022,65710,28906,38557,33390,1722,104435,72215,38551,12094,30978,25113,6671,37355,175109,42862,98024,65406,221276,59624,118012,64637,78760,86697,21426,1639,40350,12584,67193,84144,31396,7863,143011,69629,63112,9454,28666,65798,46372,134721,6314,51402,30837,151922,2847,38676,38008,92823,136245,17540,5504,109295,205242,37606,5211,214892,1586,20670,208711,137743,19328,40652,16995,20023,14657,154919,34422,12996,13918,38221,47690,16398,2959,37680,89122,6721,198469,91876,172043,83898,101992,26084,94570,3635,76958,22853,76497,38266,176590,168403,44464,142840,79180,184594,1984,41806,83147,11985,6546,366068,59732,24533,271505,8736,39084,222992,93429,28962,58985,86665,8432,30028,14548,32439,54424,165029,55175,27458,69046,121277,46168,33732,20661,24581,135574,123110,37556,79260,72611,16957,12939,46162,58238,44907,72936,253758,41324,32518,96480,11949,124438,65280,43256,34107,53533,43531,37037,28366,45970,32741,173438,6121,194202,62969,26355,30314,58370,28455,1848,50519,82830,90393,21761,295490,10936,256940,133568,44050,20269,4089,27457,21610,219460,36743,14821,101388,52005,13124,30979,140816,167362,26054,18458,60789,34917,40447,26606,33422,9066,3452,83614,5761,20263,137238,25038,91310,101,52322,74548,42572,38084,214054,186568,31802,17665,30620,141936,37730,14420,4265,187218,49640,188208,51441,55388,96452,66659,40869,42039,60967,221027,19234,178581,29105,96050,9165,196118,157335,3738,40354,117436,2965,34136,59659,15570,50843,230035,31444,71260,43886,18316,5387,38500,168508,17406,32174,8828,103373,143806,90367,3560,18719,122310,16508,26719,2541,105429,6645,37998,73190,10591,235916,49737,87112,233941,53188,32193,79154,4544,52905,126477,7580,63501,57314,3216,31337,6541,103083,60846,49,9756,15481,1355,43840,14319,13743,27486,10222,73114,230718,418644,16706,6674,279748,23058,45273,295831,86306,2743,5535,88773,21829,35253,120938,31153,3169,16839,42847,8751,80974,33942,36867,35514,16485,26474,77775,56877,5391,48346,3882,108713,31403,27804,55248,26235,43821,136104,40118,175507,28034,203908,18732,1788,34030,106427,36958,54359,7251,44936,15356,69139,455,157915,22173,140291,50348,43275,82066,49621,54952,15216,36226,96695,66855,6936,1987,8227,196087,4631,68827,99004,47541,110265,17953,147605,110242,58520,31312,38724,329975,642,3155,34497,75937,6207,73843,6120,17249,51429,117746,3218,910,68961,319671,14938,29555,34700,1649,66673,72268,9655,76800,153087,6941,210168,27130,35398,1780,73242,3135,56689,19556,165307,8765,35967,121458,13333,70453,17350,117253,22265,13340,44265,39869,441,3742,135025,23581,33309,16543,17731,13291,157637,283005,21408,101360,63887,52312,83873,5338,233779,23759,186949,34531,177320,38069,156465,91004,19353,59852,68160,14891,1338,1072,29823,1950,28901,81407,313445,73038,84807,162348,240257,37162,138934,16111,58013,41253,102951,16457,96056,19541,56402,67217,41638,94381,89674,29481,37456,80815,151579,13937,13683,132537,19699,134545,67020,29816,222341,141235,427578,48868,129557,233342,23077,87871,16213,18728,16184,9469,37913,19680,2798,171356,178328,13216,50049,72690,71904,124644,55455,7504,29052,41036,266546,19899,30391,188755,8659,59469,16,104298,112943,53865,76203,138226,68857,139953,14125,107625,119795,173133,4398,50273,48808,54390,16466,122086,31835,67035,50971,48859,7508,46427,66477,73021,84615,39985,83076,46779,201569,53336,36443,60865,168164,143810,51393,25548,169307,32896,24485,38424,21837,29087,275813,51674,6714,64883,46169,187369,55186,76192,12852,12018,62134,31067,118303,16542,12125,10579,4928,26291,43854,7091,10946,253716,109062,39283,17261,113012,258512,47764,125126,32646,55892,80279,201623,149872,3192,385,1208,48750,5376,58738,22335,5427,82416,47811,32435,143086,38930,94128,59975,156037,37977,38224,62485,7698,50405,71027,16462,21559,136153,34131,107506,162069,63703,3101,215029,40407,4178,3774,9187,80019,17880,97926,67579,2600,18405,8351,47924,86638,70820,92206,86453,29610,42241,119200,3198,15466,67813,57863,35454,4779,99518,4649,104641,144269,33730,38073,65864,6838,109456,193298,154007,5623,45741,30846,182578,25573,157224,1543,58575,138703,146140,44971,49356,18275,59064,20300,13122,11848,24453,11973,9797,86843,2919,25530,49210,1130,161220,76788,75373,85604,34926,36014,17777,17255,51533,11676,92226,51845,119859,21525,5936,18507,28050,1140,31418,14857,34207,47859,10750,36382,32079,106909,59426,87757,38393,110042,15965,97104,33757,35344,97993,53979,33651,45407,41884,82515,173089,7177,58371,35365,47543,51927,35587,10670,23544,29306,84233,39976,76076,62097,9007,8668,28119,78281,120790,19835,143020,54968,18670,64959,20649,34469,42570,33001,136570,87796,120044,1106,58700,63951,127623,12805,83057,40212,31773,49850,7361,54336,347524,101314,23751,19569,48791,29174,49369,20467,7465,75842,38281,623,112457,60210,28849,51003,94720,6426,90047,85560,43761,3579,85105,34607,90410,118528,7224,42907,111163,18168,6960,161135,191298,5247,100584,127552,171568,20121,91173,12636,54615,20199,63730,98105,2396,40387,14438,125012,4765,33235,12865,45299,37728,82098,77872,114037,59253,19675,24838,398016,102561,11446,17069,57508,178277,65836,99941,26114,2585,271882,136866,50126,11027,155648,118367,14585,8910,123015,335383,40434,41016,53021,14439,87098,176860,201543,121888,2358,9286,5739,22666,54270,37884,169381,33984,93859,16124,89364,72207,51639,76366,99029,65812,2198,12147,174891,194289,6986,30252,88822,21284,11445,288337,160821,33034,100869,43852,25761,52882,1144,103809,1924,84458,86079,43411,13542,139276,18141,34978,41298,7276,26481,173800,33210,17951,142652,33616,33677,2210,19941,98568,2486,192414,80136,12058,235883,50963,249638,29572,27221,47034,6124,72107,63346,97620,158513,299699,40388,23235,37176,224244,198386,121323,67992,23827,63170,17838,106622,158590,26807,5345,23489,91891,55474,74834,37981,13058,5977,72552,34706,26828,145172,19904,21367,34043,960,77092,91381,4733,47446,7680,41697,5170,16960,14741,46101,13656,473,51842,37433,11103,11551,121951,13191,97536,165932,50397,51628,129028,9069,44885,6590,59195,47045,32940,225472,90345,21833,13303,29407,96615,141951,5198,6028,18395,7181,3861,14966,156358,167182,36529,55253,25942,173153,30959,27261,50691,150176,162201,38467,48462,80602,42163,118482,168,108756,26011,17166,54149,456538,22512,91374,13816,90358,131615,18132,226707,1824,28139,26860,42253,93877,77351,65575,8980,80574,22020,27948,40422,91324,76376,13528,39281,91685,82215,122541,144066,1983,193851,17283,26320,2739,194978,4790,26845,42627,61300,65815,174612,55133,4200,191130,79771,158321,52280,166796,221620,62461,11278,4067,88152,83409,31717,121367,13522,47325,37945,10406,174348,249321,154101,64912,29938,51775,17220,15776,166138,78890,84425,54121,42861,16368,24572,291647,10197,32073,22651,11677,97509,26952,35787,18424,41910,71614,94977,72318,41594,70024,275419,37702,60199,7335,39107,61315,18271,18394,33768,87884,104277,123724,7277,56288,71981,189803,49320,3352,6798,14240,8954,69220,94433,57372,28620,68863,193727,85575,42309,41667,67689,42081,22543,44824,12719,28540,114236,101553,27638,27296,4300,5353,4663,19379,94098,3758,95888,95144,80344,87320,28447,259518,12718,71391,152731,37063,24132,31911,104896,15672,103782,1521,4945,72541,23717,122632,15619,87175,206120,29428,189780,61416,28350,44457,972,1175,47233,198738,95789,41907,21953,97034,59341,22864,53713,16873,32971,20693,20954,31336,21477,16169,38370,16412,9019,3841,24599,21938,17085,6484,81198,76413,5849,72514,12320,65247,276175,37234,59796,52642,16312,57349,198507,94148,46134,18958,125552,1747,18725,151873,14901,5490,68287,29470,3689,64794,40814,26018,25692,54450,2703,88278,124886,173087,174e3,24159,179477,24276,46004,201876,209202,445,52876,31948,30206,157610,39180,18439,44124,50469,5774,96278,222758,200216,50290,45486,20435,46986,46276,140133,142326,15569,13363,47522,92583,2182,7135,16853,22998,30272,4952,63263,35623,39096,53789,44864,20053,110392,124213,4630,16087,28221,127787,25839,77481,44693,13464,113146,6983,27069,55717,50102,4760,7107,26186,66507,59145,36032,104182,71328,29425,64317,50781,47465,94298,69706,74899,22754,120756,25108,93077,56834,73286,39928,16218,41699,176763,7555,70819,50083,26895,23315,26014,16773,123079,41712,5719,31516,90427,158540,85051,183128,40864,27505,55392,9058,45224,96857,30901,136622,96557,56304,120061,11501,151448,5773,89743,7769,86069,2935,18471,41628,10114,33660,110170,49479,26745,92846,33221,26731,18795,87076,8550,2100,29972,120289,3077,72490,33784,2630,208722,50861,63483,79029,6419,39467,14302,45286,64207,9686,67513,44170,1050,77246,59266,17055,53801,7150,11111,42432,4278,94579,362117,36175,42902,41933,39002,98489,22913,74161,84773,57036,17556,162288,74485,178760,93867,73635,128860,50362,261,67455,80001,46080,35662,4368,25247,19230,74393,22588,1822,27682,235324,13798,85998,13194,235067,23514,71669,147632,23191,134748,214683,105101,1518,25489,247114,7380,54842,26922,3971,26361,20844,68642,170517,77339,123255,8963,77818,150998,48466,36806,2732,23261,11741,236162,18243,126216,28690,50546,16385,92760,197383,246558,201295,88255,67588,71687,176076,172653,169058,33906,63747,24835,157621,43338,30050,46152,132741,2770,51371,94835,6614,15112,11749,56936,1250,19027,399017,58036,100215,23388,55815,308768,124152,94803,9521,64186,8971,28,30427,62163,7616,103838,35079,29203,131235,7743,17389,10882,37420,61460,228512,85363,41581,131077,62822,119647,10130,54445,26925,19968,29016,24446,74028,24176,61448,67185,9254,8563,119129,9771,99184,37716,39514,10532,221512,258753,218630,55980,23394,32141,61924,66749,32411,3741,36475,26678,77010,44946,91203,128749,116953,20476,49625,53116,13735,102335,29376,51946,83407,67892,59212,34685,21083,1546,112982,32972,74397,1078,190545,16082,86140,58591,89611,101531,10061,105104,76319,20035,17551,52611,169061,190842,100780,23907,90413,115619,9675,34710,193435,49443,129734,11183,258877,16318,136182,126808,44635,27304,192375,2599,125648,47051,12091,23814,721,58800,40137,66726,97930,60877,74487,7942,54326,9841,41428,13762,8211,85383,6950,99177,79806,201786,296464,124087,13144,29741,41721,47634,55088,254286,106408,17041,99064,12942,64086,45233,14005,2612,55827,255,7984,13980,38574,12776,46654,73499,249951,2101,26676,25996,132326,116415,119062,50449,31033,23038,11589,179252,20007,14860,129270,21143,17796,144715,60106,70758,69842,34674,282133,44014,16774,57268,38528,24053,46373,201667,28327,471023,51889,102667,21193,114909,84132,69317,96723,67969,16134,68145,15058,28765,32035,2524,101089,98664,25045,76571,14957,86040,118506,262428,154764,81573,39681,283900,73287,127825,544,80448,52347,38512,175971,15180,45467,33086,46552,48894,81107,43213,36672,54025,76703,8053,7608,13299,56619,20752,238099,54164,105133,1444,32942,953,37564,8e3,66316,119463,106817,404,13667,149108,128597,31267,10269,49836,106150,1484,52330,76965,160486,171648,38456,31263,22424,37738,66245,67467,143369,60471,75610,20895,115528,86070,60854,40796,49347,18989,15030,11371,37578,15779,79867,10187,86462,46402,155626,93200,40229,7090,57547,108053,99598,11088,47505,41218,206017,2173,20988,30219,22919,80563,57566,42369,93141,41675,2407,182519,120495,27154,16702,29456,14349,7958,16688,117177,140375,42467,261919,74916,153569,10836,34742,49526,7621,105997,12212,2270,392377,7755,17959,25086,232152,138791,33847,13860,35316,5811,1344,71259,50452,207539,92635,50359,5821,33674,30255,2086,2587,96264,17543,42,6029,9580,43007,139248,82831,12917,29607,25786,51467,42137,85161,100698,31561,88989,121990,278500,3602,109344,37982,15279,116442,28936,30880,87894,58079,128661,126731,67392,28051,146885,4861,16216,97344,42827,147561,153948,22684,21335,47685,1853,43349,15185,59642,10229,25520,187921,108972,5579,98037,24945,6697,19193,63734,137934,75056,89740,19767,224268,56138,63643,151661,39313,70618,84031,89723,84074,13703,85626,35460,8867,64845,3439,57906,99776,63968,49270,81130,34356,16210,23547,36446,34090,140028,72439,2221,22163,57058,363492,113754,18913,95451,48663,54464,54037,176097,68425,3023,34906,29482,117389,341780,80431,58330,16753,92616,60907,94846,147486,4498,48646,7773,46801,7778,18946,464978,47558,33223,177444,7328,15626,63337,94700,11743,9351,255024,39098,16447,42647,96230,39769,58840,10068,63439,35800,65843,58823,413844,9156,51258,7434,61791,85018,6872,3692,28096,7121,33024,6009,75532,31997,192535,9661,3304,9547,14753,31987,25314,55689,15896,20430,39472,31340,99744,25398,115569,54883,28719,205423,23071,57855,64638,149867,25671,82403,37616,20668,39989,77996,74948,140555,175248,64810,36515,46595,4958,248773,24045,28728,136673,168704,20804,114833,100325,27135,21205,96151,153134,45992,7093,13992,76047,1980,19432,145001,75159,87462,17710,1013,45556,34297,144882,20648,26061,11319,129567,108555,18872,464580,33386,22717,65948,167189,5603,135042,79542,8801,202632,18114,91882,5973,5239,67315,4431,60916,47819,71693,32597,32606,18183,45072,80329,76385,24749,51305,40314,156514,14693,130345,13168,66214,18029,12858,34801,27628,14544,10823,40522,40185,33739,148694,23548,9923,61012,28859,17933,19442,34364,99849,164107,141167,30629,21054,6744,36491,8096,42474,41706,155060,30650,10600,163442,1143,96655,61390,52359,7559,51568,64256,203854,4467,22453,14504,436398,7878,6980,8293,63610,293747,16167,35763,19627,147603,15419,18032,110744,51346,33681,54571,40472,48615,39073,21604,13754,173027,92560,11083,47299,63062,11813,52007,29883,9734,139722,15953,1550,20651,13616,49306,16113,90089,92326,7584,30712,72424,164858,6831,152871,55746,197721,34167,196442,6022,112107,55215,7538,123381,4920,43539,77165,8939,50392,34192,20225,79762,22505,58667,40770,29788,97180,82835,4568,8579,13273,363569,35898,49983,436,36598,3237,131691,62418,35591,8101,4073,379438,65218,76072,33887,2968,27573,212619,288680,68278,72851,150504,217896,6913,121339,22017,35340,51072,43616,75043,31437,10833,81487,4364,22968,41454,106687,85446,19863,109625,149241,524,141850,214404,54376,657,237023,9401,108137,53800,32474,49712,53334,126876,27337,45552,177696,8269,15036,12097,42240,2328,125374,119295,99715,2500,19624,39441,27220,102691,60957,94543,39101,18566,67362,13975,78230,25017,34017,239007,90027,39351,41681,35354,43822,1043,916,58587,141983,94818,38799,75459,41114,67432,16195,36606,59568,22272,126769,31424,68659,12287,134302,257977,5756,207285,95637,47248,117689,19583,77451,22373,12200,54993,117118,34244,29386,34562,53819,71267,64172,77665,49368,7716,59301,25749,45426,194789,17297,2650,1766,32501,45198,20403,20984,6600,14171,94604,19037,5402,29896,9938,59935,109708,88081,145182,44844,39167,352626,164173,35374,45982,6122,154,73419,220487,53834,53601,17992,8609,229321,5610,68098,66815,71012,95069,140968,27396,8957,134489,24656,86659,56598,134852,17316,123838,255436,6613,41610,138033,81452,32023,32396,123687,63398,8693,29712,30407,19296,121188,3551,36099,20032,111948,56624,16547,27453,35916,15378,52039,56849,13489,22214,73177,53097,277349,2157,14029,187886,10260,141743,246460,91880,50869,3788,49486,133566,54950,33120,129337,53768,18333,9525,26902,312251,10297,9020,70759,16647,112432,59260,84609,9818,82766,73569,468,46001,75780,55028,52106,11498,43645,108069,17150,17753,29417,16705,31799,9606,289,122254,115975,8620,6133,255357,56908,14456,133464,43554,79224,11247,29630,160,12756,25464,65960,350428,62521,321796,100359,67358,35169,46172,113128,48988,88868,31094,33266,6847,60887,98188,49659,69117,92977,220228,13947,80181,35103,62170,97351,13475,2440,199768,19498,36597,46971,25234,67806,62881,84717,73648,181966,10488,94149,21550,26655,63436,48375,14405,165650,9621,24439,28043,42735,4490,29963,56674,45373,1934,262446,50855,67098,26898,5261,52696,40644,33900,9440,180286,87162,22940,19704,26936,69769,10254,101759,27406,12243,48e3,73926,113215,54935,5726,192787,4312,106216,9366,11550,52949,23457,212271,277152,133895,108374,6191,96477,29980,218916,58024,54696,40853,91124,65894,91170,65908,252552,6793,29212,15389,44516,122515,52617,35058,9017,103536,39510,49136,19242,130652,662077,74699,47024,31422,8517,73351,24399,13867,128360,4810,4434,61779,111983,61036,17798,110240,59722,102960,39688,10001,23803,23039,176498,56659,44814,134295,17188,77577,74466,226175,102472,154333,63900,111747,18062,41171,79669,32773,408933,42562,28931,30907,107388,43487,2946,240310,23938,24354,319,184983,7927,6488,1422,10790,68809,68209,64775,4361,202,17123,59634,51200,44391,18188,17843,2619,74278,3230,9540,47187,21702,36274,56894,43907,16310,34790,16866,6150,5561,13587,107545,108873,126867,86986,28640,33427,19017,5762,80637,17430,46903,2047,131055,25958,13558,5444,47152,13900,44563,122857,45348,70863,39593,54332,38068,33637,318,40310,143467,18502,24520,11377,62013,28942,27246,28269,83545,17999,59015,90707,30065,15161,34720,1263,37008,2012,6060,98575,92933,5721,299,199555,24578,29223,2985,743,115825,109523,136657,47454,26378,53586,3733,174945,93340,244456,5693,37386,28782,89767,27545,23573,18798,136425,34320,84778,20041,48453,38215,7477,71958,40621,8773,5874,187927,105965,51100,43533,18083,8443,10180,43597,2003,183999,69689,12216,129696,146188,62389,34044,68410,12765,43273,26949,266807,3345,34477,79197,5688,47539,213110,21634,22257,50092,32222,42346,39530,63668,98,134978,74022,5152,59088,174145,37220,9934,9545,118937,5724,87240,19875,15784,40143,23263,87513,181654,285152,37881,263241,4966,43934,10433,186657,6470,74416,225854,25908,142677,246262,32280,6192,75890,45546,143264,135305,29742,47013,77787,11732,126658,8763,37950,21806,57557,113464,89465,108995,164574,23894,22996,23169,15369,23117,17642,130607,40503,36239,280990,44666,9981,40427,147487,26869,168452,32886,32991,46798,240839,15111,70502,65697,88548,44145,28701,48767,31139,206777,35659,181164,166262,14554,171445,31786,66523,76607,17956,6507,31279,90476,116611,167918,6560,1243,115324,80128,41867,55897,187323,37069,32596,189444,145931,13390,105530,65709,26805,6999,55714,41300,22915,68951,22138,21120,22264,10058,19945,33635,56123,99085,10032,5818,6016,46649,57476,35264,94413,112522,262288,93686,83038,14341,23204,28807,66084,77987,6101,126673,7133,38126,5923,122091,170240,97772,46874,215746,43948,41622,3272,55596,8332,146411,251315,13533,8561,81521,115449,48616,175175,2063,186556,3036,134537,75772,29728,82360,22973,186559,86348,89100,38388,82297,45610,2613,87082,9986,177812,57884,23591,47485,42543,33582,44713,74439,257444,252451,31825,35631,38540,33066,5147,13973,4343,51830,70378,22827,26448,95560,36896,241741,48067,203953,298860,61620,20450,3220,67272,6586,107662,100160,108684,6929,57226,4762,7457,1320,40404,77204,99309,62750,208653,59977,44e3,74315,34332,5819,172217,64904,114077,18147,84012,1791,98456,90930,21446,116669,103938,7422,85140,59713,5768,326211,16239,75411,13229,29398,10758,236107,1539,112472,95979,152154,151294,306,21196,38146,10700,6891,84282,109646,56492,40539,6589,119491,51354,30685,140209,136906,29622,73617,49553,70525,51671,166869,139616,74395,37439,49595,45678,11959,33211,86560,52434,9282,62690,112155,130810,5243,108261,99970,265613,72551,80049,6391,33365,90721,66737,69872,87011,1860,9032,112544,60905,37371,89015,140351,19076,850,373531,2802,36725,218795,72062,28990,16550,24614,7815,6187,26336,33373,32162,42791,73555,32062,23386,10244,56392,49442,27076,136262,12412,14883,1134,33675,97153,199281,15608,100152,74072,47942,254301,36451,16026,10687,65067,56708,254030,30290,50490,13864,57941,259331,35588,23485,43486,24869,21620,92971,22072,88645,1048,182050,13343,32452,14825,19509,3325,216938,45740,99716,189082,53740,78245,25609,24311,176777,47340,308354,40669,66085,14102,125339,9225,128709,97207,1271,200933,78439,113451,88975,18324,46521,11819,18570,141756,72512,170020,52754,63550,118515,103073,93330,32736,50499,14722,31600,68452,398867,29316,172786,18417,104924,2606,5670,84818,16288,67106,59580,82929,607401,291,85829,359,15897,35830,50696,65630,52672,22115,356968,29895,40837,231192,34024,38957,26722,406,23335,124952,72068,68804,13268,147101,164740,276569,162596,66943,11569,26654,66358,4777,23229,102127,5848,978,2921,59666,5371,28212,90108,42938,39320,2499,4271,108792,33510,125072,71653,65239,38250,66357,38577,13964,86251,35708,50755,36010,29448,12209,3844,38222,206337,100876,67827,137088,14167,252225,84163,195270,1306,5703,54198,779,46802,22028,51124,86759,70560,113164,35685,162145,45471,34561,422,2611,6464,47486,19223,38246,9191,18331,89942,243642,212364,15893,17518,22617,6409,30046,126182,59716,36560,104428,18846,26592,19458,50793,147333,30826,1388,27647,10922,14495,33545,19269,135828,39727,41601,46931,233379,49169,131130,182112,16276,82381,118209,142445,128310,19672,28740,82907,33436,3118,102206,28723,24819,41937,38854,5157,3881,111491,1142,9776,421673,152241,29309,14961,87854,6054,15424,3796,82656,54996,2108,55367,239450,154525,9643,118103,106041,64601,68549,48707,30266,25772,18740,9462,229669,91798,112152,191327,14493,72828,8175,66636,236474,25817,87351,129027,76653,20422,22983,71240,27846,44661,12399,46158,77704,53101,35032,11072,17300,109294,33638,24408,1895,11241,760,17584,82479,125877,63150,141075,34259,23274,81698,15732,43577,48340,91584,14688,16379,24481,150280,96420,262050,48635,43727,61819,56268,72003,88178,17281,79912,13218,122519,125295,166396,11811,2171,118930,67746,17636,178278,174656,95661,173039,83845,79689,17473,98555,127696,203415,54730,22925,232239,9309,12136,175026,20740,180188,10747,39816,314017,266131,10040,175732,112550,220651,31974,37393,888,23008,86799,4303,64905,148467,75337,251,3284,370102,50264,9835,5438,23655,4481,29851,329,12855,7162,64931,78141,12804,42372,296771,83547,18624,34874,86271,3360,48665,77735,88767,11463,63527,28889,22258,29140,194315,113924,25499,6406,31334,1845,4802,49184,43455,35469,127594,92970,61038,115005,38840,87761,106838,8811,20572,55637,11162,96721,132425,108925,2948,125457,36356,3502,75270,27622,127192,2561,123095,49394,61155,16897,110064,9699,89448,53356,19628,220310,21622,83036,9885,112214,6087,26713,17901,161912,91492,3440,68594,9266,92238,8087,6866,150194,72175,80701,13459,31836,43243,239700,95846,44749,50647,21945,230538,120612,132371,244604,5193,105637,34661,41341,68775,85393,1874,8771,33718,49672,77403,595452,99507,6490,58895,128742,7704,39239,73217,43816,62824,37804,199976,22361,80005,87514,94832,14089,4574,139975,59142,75523,100268,43906,53442,15152,2547,186002,17011,19513,204282,3343,60568,128318,119250,4298,51871,41336,71759,21921,45074,98169,145889,99427,11350,1237,5520,28799,7803,53702,21026,136352,38293,128690,12158,90132,44600,10184,26957,39459,126025,78904,82999,59373,39301,150198,120529,153042,20177,50089,14764,271571,30530,123161,38975,101562,22941,5648,124654,109243,69817,71675,49162,106884,21241,107795,30258,16572,188262,141456,7688,60718,8271,11044,32440,104608,103419,236109,93156,43293,128929,42107,67180,25201,115254,185488,130954,72813,167547,20537,39969,38432,22582,184022,1139,27199,5655,17767,97412,122606,209377,27070,35871,326617,188954,42680,73512,80911,22629,3011,95021,315242,157737,383,41821,41808,19335,27950,15674,25677,110950,35375,76835,59108,57370,35262,16569,160415,37706,78086,32041,49691,137143,9782,172080,50148,77917,6323,10110,69172,17711,21795,59511,76184,135114,31046,132319,59105,157578,20549,80778,57649,158421,65143,4575,72235,21899,10797,92745,34035,106079,80159,4508,78304,25350,75457,46458,32937,25623,47,8531,104751,84953,8138,36508,187199,66310,115274,13253,32461,38536,1916,42007,187160,35055,26325,84394,35963,94216,45590,97782]});var PC=p((_jt,Tve)=>{l();"use strict";var Nbt=nR();Tve.exports=async(t,e,{concurrency:r=1/0,stopOnError:i=!0}={})=>new Promise((n,s)=>{if(typeof e!="function")throw new TypeError("Mapper function is required");if(!((Number.isSafeInteger(r)||r===1/0)&&r>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${r}\` (${typeof r})`);let o=[],a=[],c=t[Symbol.iterator](),u=!1,f=!1,d=0,h=0,y=()=>{if(u)return;let g=c.next(),m=h;if(h++,g.done){f=!0,d===0&&(!i&&a.length!==0?s(new Nbt(a)):n(o));return}d++,(async()=>{try{let E=await g.value;o[m]=await e(E,m),d--,y()}catch(E){i?(u=!0,s(E)):(a.push(E),d--,y())}})()};for(let g=0;g<r&&(y(),!f);g++);})});var Ip=p((Ejt,h7)=>{l();"use strict";var CC=class extends Error{constructor(e){super(e);this.name="TimeoutError"}},Rve=(t,e,r,i)=>{let n,s=new Promise((o,a)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){o(t);return}i={customTimers:{setTimeout,clearTimeout},...i},n=i.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{o(r())}catch(f){a(f)}return}let c=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,u=r instanceof Error?r:new CC(c);typeof t.cancel=="function"&&t.cancel(),a(u)},e),(async()=>{try{o(await t)}catch(c){a(c)}finally{i.customTimers.clearTimeout.call(void 0,n)}})()});return s.clear=()=>{clearTimeout(n),n=void 0},s};h7.exports=Rve;h7.exports.default=Rve;h7.exports.TimeoutError=CC});var mi=p(ui=>{l();"use strict";var OC=be(),{sha256:Pve}=(ii(),fi),{base58btc:Bbt}=(ti(),ei),{Key:Mbt}=Ut(),{xor:Lbt}=(N3(),D3),{compare:Ubt}=(bb(),gb),Fbt=PC(),{Record:jbt}=$l(),Kbt=tt(),Vbt=ca(),{fromString:Cve}=(ut(),lt),{toString:Ove}=(et(),Je),{concat:zbt}=(fn(),un),kve=Ip();ui.convertBuffer=async t=>(await Pve.digest(t)).digest;ui.convertPeerId=async t=>(await Pve.digest(t.id)).digest;ui.bufferToKey=t=>new Mbt("/"+ui.encodeBase32(t),!1);ui.keyForPublicKey=t=>zbt([Cve("/pk/"),t.id]);ui.isPublicKeyKey=t=>Ove(t.slice(0,4))==="/pk/";ui.fromPublicKeyKey=t=>new Kbt(t.slice(4));ui.now=()=>Date.now();ui.encodeBase32=t=>Ove(t,"base32");ui.decodeBase32=t=>Cve(t,"base32");ui.sortClosestPeers=async(t,e)=>(await Fbt(t,async i=>{let n=await ui.convertPeerId(i);return{peer:i,distance:Lbt(n,e)}})).sort(ui.xorCompare).map(i=>i.peer);ui.xorCompare=(t,e)=>Ubt(t.distance,e.distance);ui.pathSize=(t,e)=>Math.ceil(t/e);ui.createPutRecord=(t,e)=>{let r=new Date;return new jbt(t,e,r).serialize()};ui.logger=(t,e)=>{let r=["libp2p","dht"];return e&&r.push(e),t&&r.push(`${t.toB58String().slice(0,8)}`),OC.formatters.b=n=>Bbt.baseEncode(n),Object.assign(OC(r.join(":")),{error:OC(r.concat(["error"]).join(":"))})};ui.TimeoutError=class extends Error{get code(){return"ETIMEDOUT"}};ui.withTimeout=(t,e)=>{async function r(...i){if(!e)return t(...i);let n;try{n=await kve(t(...i),e)}catch(s){throw s instanceof kve.TimeoutError?Vbt(s,"ETIMEDOUT"):s}return n}return r};ui.mapParallel=async function(t,e){let r=[];for await(let i of t)r.push(e(i));return Promise.all(r)}});var Bve=p((Ajt,Nve)=>{l();"use strict";var Hbt=Ave(),{xor:$bt}=(N3(),D3),Gbt=Ive(),{sha256:Wbt}=(ii(),fi),Ybt=La(),Xbt=tt(),p7=mi(),qve=be(),Ru=Object.assign(qve("libp2p:dht:routing-table"),{error:qve("libp2p:dht:routing-table:error")}),Qbt=pb(),y7=15,Dve=class{constructor(e,{kBucketSize:r,refreshInterval:i}={}){this.peerId=e.peerId,this.dht=e,this._kBucketSize=r||20,this._refreshInterval=i||3e4,this.kb=new Hbt({numberOfNodesPerKBucket:this._kBucketSize,numberOfNodesToPing:1}),this.commonPrefixLengthRefreshedAt=[],this._refreshTable=this._refreshTable.bind(this),this._onPing=this._onPing.bind(this)}async start(){this.kb.localNodeId=await p7.convertPeerId(this.peerId),this.kb.on("ping",this._onPing),await this._refreshTable(!0)}async stop(){this._refreshTimeoutId&&clearTimeout(this._refreshTimeoutId)}async _refreshTable(e){Ru("refreshing routing table");let r=this._maxCommonPrefix(),i=this._getTrackedCommonPrefixLengthsForRefresh(r);Ru(`max common prefix length ${r}`),Ru(`tracked CPLs [ ${i.map(n=>`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"0")}-${n.getDate().toString().padStart(2,"0")} ${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}:${n.getSeconds().toString().padStart(2,"0")}`).join(", ")} ]`),await Promise.all(i.map(async(n,s)=>{try{if(await this._refreshCommonPrefixLength(s,n,e===!0),this._numPeersForCpl(r)===0){let o=Math.min(2*(s+1),i.length-1);for(let a=s+1;a<o+1;a++)try{await this._refreshCommonPrefixLength(a,n,e===!0)}catch(c){Ru.error(c)}}}catch(o){Ru.error(o)}})),this._refreshTimeoutId=setTimeout(this._refreshTable,this._refreshInterval),this._refreshTimeoutId.unref()}async _refreshCommonPrefixLength(e,r,i){if(!i&&r.getTime()>Date.now()-this._refreshInterval){Ru(`not running refresh for cpl ${e} as time since last refresh not above interval`);return}let n=await this._generateRandomPeerId(e);Ru(`starting refreshing cpl ${e} with key ${n.toB58String()} (routing table size was ${this.kb.count()})`);let s=await Qbt(this.dht.getClosestPeers(n.toBytes(),{}));Ru(`found ${s} peers that were close to imaginary peer ${n.toB58String()}`),Ru(`finished refreshing cpl ${e} with key ${n.toB58String()} (routing table size was ${this.kb.count()})`)}_getTrackedCommonPrefixLengthsForRefresh(e){e>y7&&(e=y7);let r=[];for(let i=0;i<=e;i++)r[i]=this.commonPrefixLengthRefreshedAt[i]||new Date;return r}async _generateRandomPeerId(e){let r=Ybt.randomBytes(2),i=(r[1]<<8)+r[0],n=await this._makePeerId(this.kb.localNodeId,i,e);return Xbt.createFromBytes(n)}async _makePeerId(e,r,i){if(i>y7)throw new Error(`Cannot generate peer ID for common prefix length greater than ${y7}`);let o=new DataView(e.buffer,e.byteOffset,e.byteLength).getUint16(0,!1)^32768>>i,a=65535<<16-(i+1),c=o&a|r&~a,u=Gbt[c],f=new ArrayBuffer(34),d=new DataView(f,0,f.byteLength);return d.setUint8(0,Wbt.code),d.setUint8(1,32),d.setUint32(2,u,!1),new Uint8Array(d.buffer,d.byteOffset,d.byteLength)}_maxCommonPrefix(){if(!this.kb.localNodeId)return 0;let e=0;for(let r of this._prefixLengths())r>e&&(e=r);return e}_numPeersForCpl(e){let r=0;for(let i of this._prefixLengths())i===e&&r++;return r}*_prefixLengths(){for(let{id:e}of this.kb.toIterable()){let r=$bt(this.kb.localNodeId,e),i=0;for(let n of r)if(n===0)i++;else break;yield i}}_onPing(e,r){let i=e[0];i&&this.kb.remove(i.id),this.kb.add(r)}get size(){return this.kb.count()}async find(e){let r=await p7.convertPeerId(e),i=this.closestPeer(r);if(i&&e.equals(i))return i}closestPeer(e){let r=this.closestPeers(e,1);if(r.length>0)return r[0]}closestPeers(e,r){return this.kb.closest(e,r).map(n=>n.peer)}async add(e){let r=await p7.convertPeerId(e);this.kb.add({id:r,peer:e})}async remove(e){let r=await p7.convertPeerId(e);this.kb.remove(r)}};Nve.exports=Dve});var Jd=p(is=>{l();"use strict";var Mve=is.second=1e3,Zbt=is.minute=60*Mve,kC=is.hour=60*Zbt;is.MAX_RECORD_AGE=36*kC;is.PROTOCOL_DHT="/kad/1.0.0";is.PROVIDERS_KEY_PREFIX="/providers/";is.PROVIDERS_LRU_CACHE_SIZE=256;is.PROVIDERS_VALIDITY=24*kC;is.PROVIDERS_CLEANUP_INTERVAL=kC;is.READ_MESSAGE_TIMEOUT=10*Mve;is.GET_MANY_RECORD_COUNT=16;is.K=20;is.ALPHA=3});var Uve=p((Tjt,Lve)=>{l();"use strict";var il=qi(),Tp=il.Reader,qC=il.Writer,$e=il.util,Qr=il.roots["libp2p-dht-message"]||(il.roots["libp2p-dht-message"]={});Qr.Record=function(){function t(r){if(r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}t.prototype.key=null,t.prototype.value=null,t.prototype.author=null,t.prototype.signature=null,t.prototype.timeReceived=null;var e;return Object.defineProperty(t.prototype,"_key",{get:$e.oneOfGetter(e=["key"]),set:$e.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_value",{get:$e.oneOfGetter(e=["value"]),set:$e.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_author",{get:$e.oneOfGetter(e=["author"]),set:$e.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_signature",{get:$e.oneOfGetter(e=["signature"]),set:$e.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_timeReceived",{get:$e.oneOfGetter(e=["timeReceived"]),set:$e.oneOfSetter(e)}),t.encode=function(i,n){return n||(n=qC.create()),i.key!=null&&Object.hasOwnProperty.call(i,"key")&&n.uint32(10).bytes(i.key),i.value!=null&&Object.hasOwnProperty.call(i,"value")&&n.uint32(18).bytes(i.value),i.author!=null&&Object.hasOwnProperty.call(i,"author")&&n.uint32(26).bytes(i.author),i.signature!=null&&Object.hasOwnProperty.call(i,"signature")&&n.uint32(34).bytes(i.signature),i.timeReceived!=null&&Object.hasOwnProperty.call(i,"timeReceived")&&n.uint32(42).string(i.timeReceived),n},t.decode=function(i,n){i instanceof Tp||(i=Tp.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new Qr.Record;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.key=i.bytes();break;case 2:o.value=i.bytes();break;case 3:o.author=i.bytes();break;case 4:o.signature=i.bytes();break;case 5:o.timeReceived=i.string();break;default:i.skipType(a&7);break}}return o},t.fromObject=function(i){if(i instanceof Qr.Record)return i;var n=new Qr.Record;return i.key!=null&&(typeof i.key=="string"?$e.base64.decode(i.key,n.key=$e.newBuffer($e.base64.length(i.key)),0):i.key.length&&(n.key=i.key)),i.value!=null&&(typeof i.value=="string"?$e.base64.decode(i.value,n.value=$e.newBuffer($e.base64.length(i.value)),0):i.value.length&&(n.value=i.value)),i.author!=null&&(typeof i.author=="string"?$e.base64.decode(i.author,n.author=$e.newBuffer($e.base64.length(i.author)),0):i.author.length&&(n.author=i.author)),i.signature!=null&&(typeof i.signature=="string"?$e.base64.decode(i.signature,n.signature=$e.newBuffer($e.base64.length(i.signature)),0):i.signature.length&&(n.signature=i.signature)),i.timeReceived!=null&&(n.timeReceived=String(i.timeReceived)),n},t.toObject=function(i,n){n||(n={});var s={};return i.key!=null&&i.hasOwnProperty("key")&&(s.key=n.bytes===String?$e.base64.encode(i.key,0,i.key.length):n.bytes===Array?Array.prototype.slice.call(i.key):i.key,n.oneofs&&(s._key="key")),i.value!=null&&i.hasOwnProperty("value")&&(s.value=n.bytes===String?$e.base64.encode(i.value,0,i.value.length):n.bytes===Array?Array.prototype.slice.call(i.value):i.value,n.oneofs&&(s._value="value")),i.author!=null&&i.hasOwnProperty("author")&&(s.author=n.bytes===String?$e.base64.encode(i.author,0,i.author.length):n.bytes===Array?Array.prototype.slice.call(i.author):i.author,n.oneofs&&(s._author="author")),i.signature!=null&&i.hasOwnProperty("signature")&&(s.signature=n.bytes===String?$e.base64.encode(i.signature,0,i.signature.length):n.bytes===Array?Array.prototype.slice.call(i.signature):i.signature,n.oneofs&&(s._signature="signature")),i.timeReceived!=null&&i.hasOwnProperty("timeReceived")&&(s.timeReceived=i.timeReceived,n.oneofs&&(s._timeReceived="timeReceived")),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,il.util.toJSONOptions)},t}();Qr.Message=function(){function t(r){if(this.closerPeers=[],this.providerPeers=[],r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}t.prototype.type=null,t.prototype.clusterLevelRaw=null,t.prototype.key=null,t.prototype.record=null,t.prototype.closerPeers=$e.emptyArray,t.prototype.providerPeers=$e.emptyArray;var e;return Object.defineProperty(t.prototype,"_type",{get:$e.oneOfGetter(e=["type"]),set:$e.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_clusterLevelRaw",{get:$e.oneOfGetter(e=["clusterLevelRaw"]),set:$e.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_key",{get:$e.oneOfGetter(e=["key"]),set:$e.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_record",{get:$e.oneOfGetter(e=["record"]),set:$e.oneOfSetter(e)}),t.encode=function(i,n){if(n||(n=qC.create()),i.type!=null&&Object.hasOwnProperty.call(i,"type")&&n.uint32(8).int32(i.type),i.key!=null&&Object.hasOwnProperty.call(i,"key")&&n.uint32(18).bytes(i.key),i.record!=null&&Object.hasOwnProperty.call(i,"record")&&n.uint32(26).bytes(i.record),i.closerPeers!=null&&i.closerPeers.length)for(var s=0;s<i.closerPeers.length;++s)Qr.Message.Peer.encode(i.closerPeers[s],n.uint32(66).fork()).ldelim();if(i.providerPeers!=null&&i.providerPeers.length)for(var s=0;s<i.providerPeers.length;++s)Qr.Message.Peer.encode(i.providerPeers[s],n.uint32(74).fork()).ldelim();return i.clusterLevelRaw!=null&&Object.hasOwnProperty.call(i,"clusterLevelRaw")&&n.uint32(80).int32(i.clusterLevelRaw),n},t.decode=function(i,n){i instanceof Tp||(i=Tp.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new Qr.Message;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.type=i.int32();break;case 10:o.clusterLevelRaw=i.int32();break;case 2:o.key=i.bytes();break;case 3:o.record=i.bytes();break;case 8:o.closerPeers&&o.closerPeers.length||(o.closerPeers=[]),o.closerPeers.push(Qr.Message.Peer.decode(i,i.uint32()));break;case 9:o.providerPeers&&o.providerPeers.length||(o.providerPeers=[]),o.providerPeers.push(Qr.Message.Peer.decode(i,i.uint32()));break;default:i.skipType(a&7);break}}return o},t.fromObject=function(i){if(i instanceof Qr.Message)return i;var n=new Qr.Message;switch(i.type){case"PUT_VALUE":case 0:n.type=0;break;case"GET_VALUE":case 1:n.type=1;break;case"ADD_PROVIDER":case 2:n.type=2;break;case"GET_PROVIDERS":case 3:n.type=3;break;case"FIND_NODE":case 4:n.type=4;break;case"PING":case 5:n.type=5;break}if(i.clusterLevelRaw!=null&&(n.clusterLevelRaw=i.clusterLevelRaw|0),i.key!=null&&(typeof i.key=="string"?$e.base64.decode(i.key,n.key=$e.newBuffer($e.base64.length(i.key)),0):i.key.length&&(n.key=i.key)),i.record!=null&&(typeof i.record=="string"?$e.base64.decode(i.record,n.record=$e.newBuffer($e.base64.length(i.record)),0):i.record.length&&(n.record=i.record)),i.closerPeers){if(!Array.isArray(i.closerPeers))throw TypeError(".Message.closerPeers: array expected");n.closerPeers=[];for(var s=0;s<i.closerPeers.length;++s){if(typeof i.closerPeers[s]!="object")throw TypeError(".Message.closerPeers: object expected");n.closerPeers[s]=Qr.Message.Peer.fromObject(i.closerPeers[s])}}if(i.providerPeers){if(!Array.isArray(i.providerPeers))throw TypeError(".Message.providerPeers: array expected");n.providerPeers=[];for(var s=0;s<i.providerPeers.length;++s){if(typeof i.providerPeers[s]!="object")throw TypeError(".Message.providerPeers: object expected");n.providerPeers[s]=Qr.Message.Peer.fromObject(i.providerPeers[s])}}return n},t.toObject=function(i,n){n||(n={});var s={};if((n.arrays||n.defaults)&&(s.closerPeers=[],s.providerPeers=[]),i.type!=null&&i.hasOwnProperty("type")&&(s.type=n.enums===String?Qr.Message.MessageType[i.type]:i.type,n.oneofs&&(s._type="type")),i.key!=null&&i.hasOwnProperty("key")&&(s.key=n.bytes===String?$e.base64.encode(i.key,0,i.key.length):n.bytes===Array?Array.prototype.slice.call(i.key):i.key,n.oneofs&&(s._key="key")),i.record!=null&&i.hasOwnProperty("record")&&(s.record=n.bytes===String?$e.base64.encode(i.record,0,i.record.length):n.bytes===Array?Array.prototype.slice.call(i.record):i.record,n.oneofs&&(s._record="record")),i.closerPeers&&i.closerPeers.length){s.closerPeers=[];for(var o=0;o<i.closerPeers.length;++o)s.closerPeers[o]=Qr.Message.Peer.toObject(i.closerPeers[o],n)}if(i.providerPeers&&i.providerPeers.length){s.providerPeers=[];for(var o=0;o<i.providerPeers.length;++o)s.providerPeers[o]=Qr.Message.Peer.toObject(i.providerPeers[o],n)}return i.clusterLevelRaw!=null&&i.hasOwnProperty("clusterLevelRaw")&&(s.clusterLevelRaw=i.clusterLevelRaw,n.oneofs&&(s._clusterLevelRaw="clusterLevelRaw")),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,il.util.toJSONOptions)},t.MessageType=function(){var r={},i=Object.create(r);return i[r[0]="PUT_VALUE"]=0,i[r[1]="GET_VALUE"]=1,i[r[2]="ADD_PROVIDER"]=2,i[r[3]="GET_PROVIDERS"]=3,i[r[4]="FIND_NODE"]=4,i[r[5]="PING"]=5,i}(),t.ConnectionType=function(){var r={},i=Object.create(r);return i[r[0]="NOT_CONNECTED"]=0,i[r[1]="CONNECTED"]=1,i[r[2]="CAN_CONNECT"]=2,i[r[3]="CANNOT_CONNECT"]=3,i}(),t.Peer=function(){function r(n){if(this.addrs=[],n)for(var s=Object.keys(n),o=0;o<s.length;++o)n[s[o]]!=null&&(this[s[o]]=n[s[o]])}r.prototype.id=null,r.prototype.addrs=$e.emptyArray,r.prototype.connection=null;var i;return Object.defineProperty(r.prototype,"_id",{get:$e.oneOfGetter(i=["id"]),set:$e.oneOfSetter(i)}),Object.defineProperty(r.prototype,"_connection",{get:$e.oneOfGetter(i=["connection"]),set:$e.oneOfSetter(i)}),r.encode=function(s,o){if(o||(o=qC.create()),s.id!=null&&Object.hasOwnProperty.call(s,"id")&&o.uint32(10).bytes(s.id),s.addrs!=null&&s.addrs.length)for(var a=0;a<s.addrs.length;++a)o.uint32(18).bytes(s.addrs[a]);return s.connection!=null&&Object.hasOwnProperty.call(s,"connection")&&o.uint32(24).int32(s.connection),o},r.decode=function(s,o){s instanceof Tp||(s=Tp.create(s));for(var a=o===void 0?s.len:s.pos+o,c=new Qr.Message.Peer;s.pos<a;){var u=s.uint32();switch(u>>>3){case 1:c.id=s.bytes();break;case 2:c.addrs&&c.addrs.length||(c.addrs=[]),c.addrs.push(s.bytes());break;case 3:c.connection=s.int32();break;default:s.skipType(u&7);break}}return c},r.fromObject=function(s){if(s instanceof Qr.Message.Peer)return s;var o=new Qr.Message.Peer;if(s.id!=null&&(typeof s.id=="string"?$e.base64.decode(s.id,o.id=$e.newBuffer($e.base64.length(s.id)),0):s.id.length&&(o.id=s.id)),s.addrs){if(!Array.isArray(s.addrs))throw TypeError(".Message.Peer.addrs: array expected");o.addrs=[];for(var a=0;a<s.addrs.length;++a)typeof s.addrs[a]=="string"?$e.base64.decode(s.addrs[a],o.addrs[a]=$e.newBuffer($e.base64.length(s.addrs[a])),0):s.addrs[a].length&&(o.addrs[a]=s.addrs[a])}switch(s.connection){case"NOT_CONNECTED":case 0:o.connection=0;break;case"CONNECTED":case 1:o.connection=1;break;case"CAN_CONNECT":case 2:o.connection=2;break;case"CANNOT_CONNECT":case 3:o.connection=3;break}return o},r.toObject=function(s,o){o||(o={});var a={};if((o.arrays||o.defaults)&&(a.addrs=[]),s.id!=null&&s.hasOwnProperty("id")&&(a.id=o.bytes===String?$e.base64.encode(s.id,0,s.id.length):o.bytes===Array?Array.prototype.slice.call(s.id):s.id,o.oneofs&&(a._id="id")),s.addrs&&s.addrs.length){a.addrs=[];for(var c=0;c<s.addrs.length;++c)a.addrs[c]=o.bytes===String?$e.base64.encode(s.addrs[c],0,s.addrs[c].length):o.bytes===Array?Array.prototype.slice.call(s.addrs[c]):s.addrs[c]}return s.connection!=null&&s.hasOwnProperty("connection")&&(a.connection=o.enums===String?Qr.Message.ConnectionType[s.connection]:s.connection,o.oneofs&&(a._connection="connection")),a},r.prototype.toJSON=function(){return this.constructor.toObject(this,il.util.toJSONOptions)},r}(),t}();Lve.exports=Qr});var mc=p((Rjt,Vve)=>{l();"use strict";var Jbt=tt(),{Multiaddr:e5t}=rt(),{Record:t5t}=$l(),g7=Uve(),r5t=g7.Message.MessageType,Fve=g7.Message.ConnectionType,Rp=class{constructor(e,r,i){if(r&&!(r instanceof Uint8Array))throw new Error("Key must be a Uint8Array");this.type=e,this.key=r,this._clusterLevelRaw=i,this.closerPeers=[],this.providerPeers=[],this.record=void 0}get clusterLevel(){let e=this._clusterLevelRaw-1;return e<0?0:e}set clusterLevel(e){this._clusterLevelRaw=e}serialize(){let e={key:this.key,type:this.type,clusterLevelRaw:this._clusterLevelRaw,closerPeers:this.closerPeers.map(jve),providerPeers:this.providerPeers.map(jve),record:void 0};return this.record&&(this.record instanceof Uint8Array?e.record=this.record:e.record=this.record.serialize()),g7.Message.encode(e).finish()}static deserialize(e){let r=g7.Message.decode(e),i=new Rp(r.type||0,r.key||Uint8Array.from([]),r.clusterLevelRaw||0);return i.closerPeers=r.closerPeers.map(Kve),i.providerPeers=r.providerPeers.map(Kve),r.record&&r.record.length&&(i.record=t5t.deserialize(r.record)),i}};Rp.TYPES=r5t;Rp.CONNECTION_TYPES=Fve;function jve(t){return{id:t.id.id,addrs:(t.multiaddrs||[]).map(r=>r.bytes),connection:Fve.CONNECTED}}function Kve(t){return{id:new Jbt(t.id),multiaddrs:(t.addrs||[]).map(e=>new e5t(e))}}Vve.exports=Rp});var $ve=p((Pjt,Hve)=>{l();"use strict";var{Record:i5t}=$l(),n5t=ca(),zve=mc(),DC=mi();Hve.exports=t=>{let e=DC.logger(t.peerId,"rpc:get-value");async function r(i,n){let s=n.key;if(e("key: %b",s),!s||s.length===0)throw n5t(new Error("Invalid key"),"ERR_INVALID_KEY");let o=new zve(zve.TYPES.GET_VALUE,s,n.clusterLevel);if(DC.isPublicKeyKey(s)){e("is public key");let u=DC.fromPublicKeyKey(s),f;if(t._isSelf(u))f=t.peerId;else{let d=t.peerStore.get(u);f=d&&d.id}if(f&&f.pubKey)return e("returning found public key"),o.record=new i5t(s,f.pubKey.bytes),o}let[a,c]=await Promise.all([t._checkLocalDatastore(s),t._betterPeersToQuery(n,i)]);return a&&(e("got record"),o.record=a),c.length>0&&(e("got closer %s",c.length),o.closerPeers=c),o}return r}});var Yve=p((Cjt,Wve)=>{l();"use strict";var Gve=mi(),s5t=ca();Wve.exports=t=>{let e=Gve.logger(t.peerId,"rpc:put-value");async function r(i,n){let s=n.key;e("key: %b",s);let o=n.record;if(!o){let c=`Empty record from: ${i.toB58String()}`;throw e.error(c),s5t(new Error(c),"ERR_EMPTY_RECORD")}await t._verifyRecordLocally(o),o.timeReceived=new Date;let a=Gve.bufferToKey(o.key);return await t.datastore.put(a,o.serialize()),t.onPut(o,i),n}return r}});var Qve=p((Ojt,Xve)=>{l();"use strict";var{equals:o5t}=(di(),li),a5t=mc(),c5t=mi();Xve.exports=t=>{let e=c5t.logger(t.peerId,"rpc:find-node");async function r(i,n){e("start");let s;o5t(n.key,t.peerId.id)?s=[{id:t.peerId,multiaddrs:t.libp2p.multiaddrs}]:s=await t._betterPeersToQuery(n,i);let o=new a5t(n.type,new Uint8Array(0),n.clusterLevel);return s.length>0?o.closerPeers=s:e("handle FindNode %s: could not find anything",i.toB58String()),o}return r}});var e7e=p((kjt,Jve)=>{l();"use strict";var{CID:u5t}=(Ae(),De),Zve=ca(),f5t=mi();Jve.exports=t=>{let e=f5t.logger(t.peerId,"rpc:add-provider");async function r(i,n){if(e("start"),!n.key||n.key.length===0)throw Zve(new Error("Missing key"),"ERR_MISSING_KEY");let s;try{s=u5t.decode(n.key)}catch(o){let a=`Invalid CID: ${o.message}`;throw Zve(new Error(a),"ERR_INVALID_CID")}return n.providerPeers.forEach(o=>{if(!o.id.isEqual(i)){e("invalid provider peer %s from %s",o.id.toB58String(),i.toB58String());return}if(o.multiaddrs.length<1){e("no valid addresses for provider %s. Ignore",i.toB58String());return}if(e("received provider %s for %s (addrs %s)",i.toB58String(),s.toString(),o.multiaddrs.map(a=>a.toString())),!t._isSelf(o.id))return t.peerStore.addressBook.add(o.id,o.multiaddrs),t.providers.addProvider(s,o.id)}),t.providers.addProvider(s,i)}return r}});var i7e=p((qjt,r7e)=>{l();"use strict";var{CID:l5t}=(Ae(),De),d5t=ca(),h5t=mc(),t7e=mi();r7e.exports=t=>{let e=t7e.logger(t.peerId,"rpc:get-providers");async function r(i,n){let s;try{s=l5t.decode(n.key)}catch(y){throw d5t(new Error(`Invalid CID: ${y.message}`),"ERR_INVALID_CID")}e("%s",s.toString());let o=t7e.bufferToKey(s.bytes),[a,c,u]=await Promise.all([t.datastore.has(o),t.providers.getProviders(s),t._betterPeersToQuery(n,i)]),f=c.map(y=>({id:y,multiaddrs:[]})),d=u.map(y=>({id:y.id,multiaddrs:[]}));a&&f.push({id:t.peerId,multiaddrs:[]});let h=new h5t(n.type,n.key,n.clusterLevel);return f.length>0&&(h.providerPeers=f),d.length>0&&(h.closerPeers=d),e("got %s providers %s closerPeers",f.length,d.length),h}return r}});var s7e=p((Djt,n7e)=>{l();"use strict";var p5t=mi();n7e.exports=t=>{let e=p5t.logger(t.peerId,"rpc:ping");function r(i,n){return e("from %s",i.toB58String()),n}return r}});var a7e=p((Njt,o7e)=>{l();"use strict";var Pp=mc().TYPES;o7e.exports=t=>{let e={[Pp.GET_VALUE]:$ve()(t),[Pp.PUT_VALUE]:Yve()(t),[Pp.FIND_NODE]:Qve()(t),[Pp.ADD_PROVIDER]:e7e()(t),[Pp.GET_PROVIDERS]:i7e()(t),[Pp.PING]:s7e()(t)};function r(i){return e[i]}return r}});var f7e=p((Bjt,u7e)=>{l();"use strict";var{pipe:y5t}=Ir(),c7e=Xo(),g5t=mc(),b5t=a7e(),m5t=mi();u7e.exports=t=>{let e=m5t.logger(t.peerId,"rpc"),r=b5t(t);async function i(s,o){let a=r(o.type);try{await t._add(s)}catch(c){e.error("Failed to update the kbucket store",c)}if(!a){e.error(`no handler found for message type: ${o.type}`);return}return a(s,o)}async function n({stream:s,connection:o}){let a=o.remotePeer;try{await t._add(a)}catch(u){e.error(u)}let c=a.toB58String();e("from: %s",c),await y5t(s.source,c7e.decode(),u=>async function*(){for await(let f of u){let d=g5t.deserialize(f.slice()),h=await i(a,d);h&&(yield h.serialize())}}(),c7e.encode(),s.sink)}return n}});var p7e=p((Mjt,h7e)=>{l();"use strict";var b7=ca(),{pipe:l7e}=Ir(),NC=Xo(),v5t=Ip(),{consume:w5t}=M0(),_5t=Ll(),E5t=o8(),S5t=f7e(),x5t=Jd(),A5t=mc(),I5t=mi(),d7e=class{constructor(e){this.dht=e,this.readMessageTimeout=x5t.READ_MESSAGE_TIMEOUT,this._log=I5t.logger(this.dht.peerId,"net"),this._rpc=S5t(this.dht),this._onPeerConnected=this._onPeerConnected.bind(this),this._running=!1}start(){if(this._running)return;if(!this.dht.isStarted)throw b7(new Error("Can not start network"),"ERR_CANNOT_START_NETWORK");this._running=!0,this.dht._clientMode===!1&&this.dht.registrar.handle(this.dht.protocol,this._rpc);let e=new E5t({multicodecs:[this.dht.protocol],handlers:{onConnect:this._onPeerConnected,onDisconnect:()=>{}}});this._registrarId=this.dht.registrar.register(e)}stop(){!this.dht.isStarted&&!this.isStarted||(this._running=!1,this._registrarId&&this.dht.registrar.unregister(this._registrarId))}get isStarted(){return this._running}get isConnected(){return this.dht.isStarted&&this.isStarted}async _onPeerConnected(e){await this.dht._add(e),this._log("added to the routing table: %s",e.toB58String())}async sendRequest(e,r){if(!this.isConnected)throw b7(new Error("Network is offline"),"ERR_NETWORK_OFFLINE");let i=e.toB58String();this._log("sending to: %s",i);let n=this.dht.registrar.connectionManager.get(e);n||(n=await this.dht.dialer.connectToPeer(e));let{stream:s}=await n.newStream(this.dht.protocol);return this._writeReadMessage(s,r.serialize())}async sendMessage(e,r){if(!this.isConnected)throw b7(new Error("Network is offline"),"ERR_NETWORK_OFFLINE");let i=e.toB58String();this._log("sending to: %s",i);let n=this.dht.registrar.connectionManager.get(e);n||(n=await this.dht.dialer.connectToPeer(e));let{stream:s}=await n.newStream(this.dht.protocol);return this._writeMessage(s,r.serialize())}async _writeReadMessage(e,r){return v5t(T5t(e,r),this.readMessageTimeout)}_writeMessage(e,r){return l7e([r],NC.encode(),e,w5t)}};async function T5t(t,e){let r=await l7e([e],NC.encode(),t,NC.decode(),async i=>{let n=await _5t(i);if(n)return n.slice()});if(r.length===0)throw b7(new Error("No message received"),"ERR_NO_MESSAGE_RECEIVED");return A5t.deserialize(r)}h7e.exports=d7e});var w7e=p((Ljt,v7e)=>{l();"use strict";var y7e=mi(),R5t=PC(),{equals:P5t}=(di(),li),{compare:g7e}=(bb(),gb),{xor:b7e}=(N3(),D3),m7e=class{constructor(e,r){this.originDhtKey=e,this.capacity=r,this.peerDistances=[]}get length(){return this.peerDistances.length}get peers(){return this.peerDistances.map(e=>e.peerId)}async add(e){if(this.peerDistances.find(n=>P5t(n.peerId.id,e.id)))return;let r=await y7e.convertPeerId(e),i={peerId:e,distance:b7e(this.originDhtKey,r)};this.peerDistances.push(i),this.peerDistances.sort((n,s)=>g7e(n.distance,s.distance)),this.peerDistances=this.peerDistances.slice(0,this.capacity)}async anyCloser(e){if(!e.length)return!1;if(!this.length)return!0;let r=await R5t(e,n=>y7e.convertPeerId(n)),i=this.peerDistances[this.peerDistances.length-1].distance;for(let n of r){let s=b7e(this.originDhtKey,n);if(g7e(s,i)<0)return!0}return!1}};v7e.exports=m7e});var E7e=p((BC,_7e)=>{l();(function(){var t,e,r,i,n,s,o,a,c,u,f,d,h,y,g;r=Math.floor,u=Math.min,e=function(m,E){return m<E?-1:m>E?1:0},c=function(m,E,v,A,R){var F;if(v==null&&(v=0),R==null&&(R=e),v<0)throw new Error("lo must be non-negative");for(A==null&&(A=m.length);v<A;)F=r((v+A)/2),R(E,m[F])<0?A=F:v=F+1;return[].splice.apply(m,[v,v-v].concat(E)),E},s=function(m,E,v){return v==null&&(v=e),m.push(E),y(m,0,m.length-1,v)},n=function(m,E){var v,A;return E==null&&(E=e),v=m.pop(),m.length?(A=m[0],m[0]=v,g(m,0,E)):A=v,A},a=function(m,E,v){var A;return v==null&&(v=e),A=m[0],m[0]=E,g(m,0,v),A},o=function(m,E,v){var A;return v==null&&(v=e),m.length&&v(m[0],E)<0&&(A=[m[0],E],E=A[0],m[0]=A[1],g(m,0,v)),E},i=function(m,E){var v,A,R,F,q,D,z,G;for(E==null&&(E=e),D=function(){G=[];for(var Y=0,P=r(m.length/2);0<=P?Y<P:Y>P;0<=P?Y++:Y--)G.push(Y);return G}.apply(this).reverse(),z=[],A=0,F=D.length;A<F;A++)v=D[A],z.push(g(m,v,E));return z},h=function(m,E,v){var A;if(v==null&&(v=e),A=m.indexOf(E),A!==-1)return y(m,0,A,v),g(m,A,v)},f=function(m,E,v){var A,R,F,q,D;if(v==null&&(v=e),R=m.slice(0,E),!R.length)return R;for(i(R,v),D=m.slice(E),F=0,q=D.length;F<q;F++)A=D[F],o(R,A,v);return R.sort(v).reverse()},d=function(m,E,v){var A,R,F,q,D,z,G,Y,P,b;if(v==null&&(v=e),E*10<=m.length){if(q=m.slice(0,E).sort(v),!q.length)return q;for(F=q[q.length-1],Y=m.slice(E),D=0,G=Y.length;D<G;D++)A=Y[D],v(A,F)<0&&(c(q,A,0,null,v),q.pop(),F=q[q.length-1]);return q}for(i(m,v),b=[],R=z=0,P=u(E,m.length);0<=P?z<P:z>P;R=0<=P?++z:--z)b.push(n(m,v));return b},y=function(m,E,v,A){var R,F,q;for(A==null&&(A=e),R=m[v];v>E;){if(q=v-1>>1,F=m[q],A(R,F)<0){m[v]=F,v=q;continue}break}return m[v]=R},g=function(m,E,v){var A,R,F,q,D;for(v==null&&(v=e),R=m.length,D=E,F=m[E],A=2*E+1;A<R;)q=A+1,q<R&&!(v(m[A],m[q])<0)&&(A=q),m[E]=m[A],E=A,A=2*E+1;return m[E]=F,y(m,D,E,v)},t=function(){m.push=s,m.pop=n,m.replace=a,m.pushpop=o,m.heapify=i,m.updateItem=h,m.nlargest=f,m.nsmallest=d;function m(E){this.cmp=E??e,this.nodes=[]}return m.prototype.push=function(E){return s(this.nodes,E,this.cmp)},m.prototype.pop=function(){return n(this.nodes,this.cmp)},m.prototype.peek=function(){return this.nodes[0]},m.prototype.contains=function(E){return this.nodes.indexOf(E)!==-1},m.prototype.replace=function(E){return a(this.nodes,E,this.cmp)},m.prototype.pushpop=function(E){return o(this.nodes,E,this.cmp)},m.prototype.heapify=function(){return i(this.nodes,this.cmp)},m.prototype.updateItem=function(E){return h(this.nodes,E,this.cmp)},m.prototype.clear=function(){return this.nodes=[]},m.prototype.empty=function(){return this.nodes.length===0},m.prototype.size=function(){return this.nodes.length},m.prototype.clone=function(){var E;return E=new m,E.nodes=this.nodes.slice(0),E},m.prototype.toArray=function(){return this.nodes.slice(0)},m.prototype.insert=m.prototype.push,m.prototype.top=m.prototype.peek,m.prototype.front=m.prototype.peek,m.prototype.has=m.prototype.contains,m.prototype.copy=m.prototype.clone,m}(),function(m,E){return typeof define=="function"&&define.amd?define([],E):typeof BC=="object"?_7e.exports=E():m.Heap=E()}(this,function(){return t})}).call(BC)});var x7e=p((Ujt,S7e)=>{l();S7e.exports=E7e()});var I7e=p((Fjt,A7e)=>{l();"use strict";var C5t=x7e(),{xor:O5t}=(N3(),D3),k5t=be(),m7=mi(),MC=k5t("libp2p:dht:peer-queue"),B3=class{static async fromPeerId(e){let r=await m7.convertPeerId(e);return new B3(r)}static async fromKey(e){let r=await m7.convertBuffer(e);return new B3(r)}constructor(e){MC("create: %b",e),this.from=e,this.heap=new C5t(m7.xorCompare)}async enqueue(e){MC("enqueue %s",e.toB58String());let r=await m7.convertPeerId(e),i={id:e,distance:O5t(this.from,r)};this.heap.push(i)}dequeue(){let e=this.heap.pop();return MC("dequeue %s",e.id.toB58String()),e.id}get length(){return this.heap.size()}};A7e.exports=B3});var P7e=p((jjt,R7e)=>{l();"use strict";var q5t=I7e(),D5t=mi(),N5t=3e4,T7e=class{constructor(e,r){if(this.run=e,this.queryFunc=D5t.withTimeout(r,N5t),!this.queryFunc)throw new Error("Path requires a `queryFn` to be specified");if(typeof this.queryFunc!="function")throw new Error("Path expected `queryFn` to be a function. Got "+typeof this.queryFunc);this.initialPeers=[],this.peersToQuery=null,this.res=null}addInitialPeer(e){this.initialPeers.push(e)}async execute(){let e=await q5t.fromKey(this.run.query.key);this.peersToQuery=e,await Promise.all(this.initialPeers.map(r=>this.addPeerToQuery(r))),await this.run.workerQueue(this)}async addPeerToQuery(e){this.run.query.dht._isSelf(e)||this.run.peersSeen.has(e.toB58String())||this.peersToQuery&&await this.peersToQuery.enqueue(e)}};R7e.exports=T7e});var k7e=p((Kjt,O7e)=>{l();"use strict";var{default:B5t}=Yc(),C7e=class{constructor(e,r,i,n){this.dht=e,this.run=r,this.path=i,this.log=n,this.concurrency=this.dht.concurrency,this.queue=this.setupQueue(),this.execution=null,this.queuedPeerIds=new Set}setupQueue(){let e=new B5t({concurrency:this.concurrency});return e.on("idle",()=>{this.path.peersToQuery&&!this.path.peersToQuery.length&&(this.log("queue:drain"),this.stop())}),e.on("next",()=>{!this.running||e.pending<this.concurrency&&this.fill()}),e}stop(e){!this.running||(this.running=!1,this.queue.clear(),this.log("worker:stop, %d workers still running",this.run.workers.filter(r=>r.running).length),this.execution&&(e?this.execution.reject(e):this.execution.resolve()))}async execute(){this.running=!0,this.execution=null;let e=new Promise((r,i)=>{this.execution={resolve:r,reject:i}});this.fill(),await e}fill(){if(!!this.path.peersToQuery)for(;this.queue.pending+this.queue.size<this.concurrency&&this.path.peersToQuery.length>0;){let e=this.path.peersToQuery.dequeue();this.queuedPeerIds.add(e),this.queue.add(()=>this.processNext(e).catch(r=>{this.log.error("queue",r),this.stop(r)}).finally(()=>{this.queuedPeerIds.delete(e)}))}}async processNext(e){if(!this.running||this.run.peersSeen.has(e.toB58String()))return;let r,i;try{r=await this.run.continueQuerying(this)}catch(o){i=o}if(!this.running)return;if(i)throw i;if(!r){this.stop();return}if(this.run.peersSeen.has(e.toB58String()))return;this.run.peersSeen.add(e.toB58String()),this.log("queue:work");let n,s;try{n=await this.execQuery(e)}catch(o){s=o}if(!!this.running){if(this.log("queue:work:done",s,n),s)throw s;if(n&&n.queryComplete){this.log("query:complete"),this.run.stop();return}n&&n.pathComplete&&this.stop()}}async execQuery(e){let r,i;try{r=await this.path.queryFunc(e)}catch(n){i=n}if(!!this.running){if(i){this.run.errors.push(i);return}if(this.run.peersQueried&&await this.run.peersQueried.add(e),!!r){if(r.pathComplete||r.queryComplete)return this.path.res=r,{pathComplete:r.pathComplete,queryComplete:r.queryComplete};if(r.closerPeers&&r.closerPeers.length>0){let n=async s=>{this.dht._isSelf(s.id)||(this.dht._peerDiscovered(s.id,s.multiaddrs),await this.path.addPeerToQuery(s.id))};await Promise.all(r.closerPeers.map(n))}}}}};O7e.exports=C7e});var N7e=p((Vjt,D7e)=>{l();"use strict";var M5t=w7e(),L5t=gr(),U5t=P7e(),F5t=k7e(),j5t=mi(),q7e=class extends L5t{constructor(e){super();this.query=e,this.running=!1,this.workers=[],this.peersSeen=new Set,this.errors=[],this.peersQueried=null}stop(){if(!!this.running){this.running=!1;for(let e of this.workers)e.stop()}}async execute(e){let r=[],i=Math.min(this.query.dht.disjointPaths,e.length);for(let s=0;s<i;s++)r.push(new U5t(this,this.query.makePath(s,i)));e.forEach((s,o)=>{r[o%i].addInitialPeer(s)}),await this.executePaths(r);let n={finalSet:new Set(this.peersQueried&&this.peersQueried.peers),paths:[]};for(let s of r)s.res&&(s.res.pathComplete||s.res.queryComplete)&&(s.res.success=!0,n.paths.push(s.res));return n}async executePaths(e){this.running=!0,this.emit("start");try{await Promise.all(e.map(r=>r.execute()))}finally{this.stop(),this.emit("complete")}if(this.errors.length===this.peersSeen.size)throw this.errors[0]}async workerQueue(e){await this.init(),await this.startWorker(e)}async startWorker(e){let r=new F5t(this.query.dht,this,e,this.query._log);this.workers.push(r),await r.execute()}async init(){if(!this.peersQueried){if(this.peersQueriedPromise){await this.peersQueriedPromise;return}this.peersQueriedPromise=(async()=>{let e=await j5t.convertBuffer(this.query.key);this.peersQueried=new M5t(e,this.query.dht.kBucketSize)})(),await this.peersQueriedPromise,delete this.peersQueriedPromise}}async continueQuerying(e){if(this.peersQueried&&this.peersQueried.length<this.peersQueried.capacity)return!0;let r=Array.from(e.queuedPeerIds);return!!(this.peersQueried&&await this.peersQueried.anyCloser(r))}};D7e.exports=q7e});var v7=p((zjt,M7e)=>{l();"use strict";var{base58btc:K5t}=(ti(),ei),V5t=mi(),z5t=N7e(),B7e=class{constructor(e,r,i){this.dht=e,this.key=r,this.makePath=i,this._log=V5t.logger(this.dht.peerId,"query:"+K5t.baseEncode(r)),this.running=!1,this._onStart=this._onStart.bind(this),this._onComplete=this._onComplete.bind(this)}async run(e){return this.dht._queryManager.running?e.length===0?(this._log.error("Running query with no peers"),{finalSet:new Set,paths:[]}):(this._run=new z5t(this),this._log(`query running with K=${this.dht.kBucketSize}, A=${this.dht.concurrency}, D=${Math.min(this.dht.disjointPaths,e.length)}`),this._run.once("start",this._onStart),this._run.once("complete",this._onComplete),this._run.execute(e)):(this._log.error("Attempt to run query after shutdown"),{finalSet:new Set,paths:[]})}_onStart(){this.running=!0,this._startTime=Date.now(),this._log("query:start"),this.dht._queryManager.queryStarted(this)}_onComplete(){this.stop()}stop(){this._log(`query:done in ${Date.now()-(this._startTime||0)}ms`),this._run&&this._log(`${this._run.errors.length} of ${this._run.peersSeen.size} peers errored (${this._run.errors.length/this._run.peersSeen.size*100}% fail rate)`),!!this.running&&(this.running=!1,this._run&&(this._run.removeListener("start",this._onStart),this._run.removeListener("complete",this._onComplete),this._run.stop()),this.dht._queryManager.queryCompleted(this))}};M7e.exports=B7e});var j7e=p((Hjt,F7e)=>{l();"use strict";var LC=ca(),H5t=Ip(),{equals:$5t}=(di(),li),{toString:L7e}=(et(),Je),U7e=$l(),UC=Jd(),G5t=v7(),eh=mi(),W5t=U7e.Record;F7e.exports=t=>{let e=async(n,s)=>t.datastore.put(eh.bufferToKey(n),s),r=async n=>{t._log(`getLocal ${L7e(n,"base32")}`);let s=await t.datastore.get(eh.bufferToKey(n));t._log(`found ${L7e(n,"base32")} in local datastore`);let o=W5t.deserialize(s);return await t._verifyRecordLocally(o),o},i=async(n,s,o)=>{let a=await eh.createPutRecord(n,o);return Promise.all(s.map(async c=>{if(!$5t(c.val,o)){if(t._isSelf(c.from)){try{await t._putLocal(n,a)}catch(u){t._log.error("Failed error correcting self",u)}return}try{await t._putValueToPeer(n,a,c.from)}catch(u){t._log.error("Failed error correcting entry",u)}}}))};return{async _putLocal(n,s){return e(n,s)},async put(n,s,o={}){t._log("PutValue %b",n);let a=await eh.createPutRecord(n,s);await e(n,a);let c=0,u=0;await eh.mapParallel(t.getClosestPeers(n,{shallow:!0}),async d=>{try{c+=1,await t._putValueToPeer(n,a,d),u+=1}catch(h){t._log.error("Failed to put to peer (%b): %s",d.id,h)}});let f=o.minPeers||c;if(f>u){let d=LC(new Error(`Failed to put value to enough peers: ${u}/${f}`),"ERR_NOT_ENOUGH_PUT_PEERS");throw t._log.error(d),d}},async get(n,s={}){s.timeout=s.timeout||UC.minute,t._log("_get %b",n);let o=await t.getMany(n,UC.GET_MANY_RECORD_COUNT,s),a=o.map(f=>f.val),c=0;try{c=U7e.selection.bestRecord(t.selectors,n,a)}catch(f){if(f.code!=="ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")throw f}let u=a[c];if(t._log("GetValue %b %s",n,u),!u)throw LC(new Error("best value was not found"),"ERR_NOT_FOUND");return await i(n,o,u),u},async getMany(n,s,o={}){o.timeout=o.timeout||UC.minute,t._log("getMany %b (%s)",n,s);let a=[],c;try{c=await r(n)}catch(g){if(s===0)throw g}if(c&&a.push({val:c.value,from:t.peerId}),a.length>=s)return a;let u=await eh.convertBuffer(n),f=t.routingTable.closestPeers(u,t.kBucketSize);if(t._log("peers in rt: %d",f.length),f.length===0){let g="Failed to lookup key! No peers from routing table!";if(t._log.error(g),a.length===0)throw LC(new Error(g),"ERR_NO_PEERS_IN_ROUTING_TABLE");return a}let d=a.length;function h(g,m){let E=eh.pathSize(s-d,m),v=0;async function A(R){let F,q,D;try{let G=await t._getValueOrPeers(R,n);F=G.record,q=G.peers}catch(G){if(G.code!=="ERR_INVALID_RECORD")throw G;D=G}let z={closerPeers:q};return F&&F.value?(a.push({val:F.value,from:R}),v++):D&&(a.push({err:D,from:R}),v++),v>=E&&(z.pathComplete=!0),z}return A}let y=new G5t(t,n,h);try{await H5t(y.run(f),o.timeout)}catch(g){if(a.length===0)throw g}finally{y.stop()}return a}}}});var z7e=p(($jt,V7e)=>{l();"use strict";var K7e=class{constructor(){this.list=[]}push(e){return this.has(e.id)?!1:(this.list.push(e),!0)}has(e){let r=this.list.find(i=>i.id.equals(e));return Boolean(r)}toArray(){return this.list.slice()}pop(){return this.list.pop()}get length(){return this.list.length}};V7e.exports=K7e});var G7e=p((Gjt,$7e)=>{l();"use strict";var Y5t=z7e(),H7e=class extends Y5t{constructor(e){super();this.limit=e}push(e){return this.length<this.limit?super.push(e):!1}};$7e.exports=H7e});var J7e=p((Wjt,Z7e)=>{l();"use strict";var X5t=ca(),W7e=Ip(),Y7e=Jd(),X7e=G7e(),w7=mc(),Q5t=v7(),Q7e=mi();Z7e.exports=t=>{let e=async(r,i)=>{let n=new w7(w7.TYPES.GET_PROVIDERS,i.bytes,0);return t.network.sendRequest(r,n)};return{async provide(r){t._log(`provide: ${r}`);let i=[];await t.providers.addProvider(r,t.peerId);let n=t.libp2p?t.libp2p.multiaddrs:[],s=new w7(w7.TYPES.ADD_PROVIDER,r.bytes,0);s.providerPeers=[{id:t.peerId,multiaddrs:n}];async function o(a){t._log(`putProvider ${r} to ${a.toB58String()}`);try{await t.network.sendMessage(a,s)}catch(c){i.push(c)}}if(await Q7e.mapParallel(t.getClosestPeers(r.bytes),o),i.length)throw X5t(new Error(`Failed to provide to ${i.length} of ${t.kBucketSize} peers`),"ERR_SOME_PROVIDES_FAILED",{errors:i})},async*findProviders(r,i={timeout:6e4,maxNumProviders:5}){let n=i.timeout||Y7e.minute,s=i.maxNumProviders||Y7e.K;t._log(`findProviders ${r}`);let o=new X7e(s);if((await t.providers.getProviders(r)).forEach(h=>{let y=t.peerStore.get(h);y?o.push({id:y.id,multiaddrs:y.addresses.map(g=>g.multiaddr)}):o.push({id:h,multiaddrs:[]})}),o.length>=s){for(let h of o.toArray())yield h;return}let c=[];function u(h,y){let g=Q7e.pathSize(s-o.length,y),m=new X7e(g);c.push(m);async function E(v){let A=await e(v,r),R=A.providerPeers;return t._log(`Found ${R.length} provider entries for ${r}`),R.forEach(F=>{m.push({...F})}),m.length>=g?{pathComplete:!0}:{closerPeers:A.closerPeers}}return E}let f=new Q5t(t,r.bytes,u),d=t.routingTable.closestPeers(r.bytes,t.kBucketSize);try{await W7e(f.run(d),n)}catch(h){if(h.name!==W7e.TimeoutError.name)throw h}finally{f.stop()}c.forEach(h=>{h.toArray().forEach(y=>{o.push(y)})});for(let h of o.toArray())yield h}}}});var rwe=p((Yjt,twe)=>{l();"use strict";var M3=ca(),Z5t=Ip(),FC=tt(),J5t=La(),{toString:emt}=(et(),Je),tmt=Jd(),_7=mc(),ewe=v7(),L3=mi();twe.exports=t=>{let e=async s=>{t._log(`findPeerLocal ${s.toB58String()}`);let o=await t.routingTable.find(s),a=o&&t.peerStore.get(o);if(a)return{id:a.id,multiaddrs:a.addresses.map(c=>c.multiaddr)}},r=async(s,o)=>{let a=new _7(_7.TYPES.GET_VALUE,o,0);return t.network.sendRequest(s,a)},i=async(s,o)=>(t._log(`closerPeersSingle ${emt(s,"base32")} from ${o.toB58String()}`),(await t.peerRouting._findPeerSingle(o,new FC(s))).closerPeers.filter(c=>!t._isSelf(c.id)).map(c=>(t.peerStore.addressBook.add(c.id,c.multiaddrs),c))),n=async s=>{let o=L3.keyForPublicKey(s),a=await r(s,o);if(!a.record||!a.record.value)throw M3(new Error(`Node not responding with its public key: ${s.toB58String()}`),"ERR_INVALID_RECORD");let c=await FC.createFromPubKey(a.record.value);if(!c.equals(s))throw M3(new Error("public key does not match id"),"ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID");return c.pubKey};return{async _findPeerSingle(s,o){t._log("findPeerSingle %s",s.toB58String());let a=new _7(_7.TYPES.FIND_NODE,o.id,0);return t.network.sendRequest(s,a)},async findPeer(s,o={timeout:6e4}){o.timeout=o.timeout||tmt.minute,t._log("findPeer %s",s.toB58String());let a=await e(s);if(a!=null)return t._log("found local"),a;let c=await L3.convertPeerId(s),u=t.routingTable.closestPeers(c,t.kBucketSize);if(u.length===0)throw M3(new Error("Peer lookup failed"),"ERR_LOOKUP_FAILED");if(u.find(m=>m.isEqual(s))){let m=t.peerStore.get(s);if(m)return t._log("found in peerStore"),{id:m.id,multiaddrs:m.addresses.map(E=>E.multiaddr)}}let d=new ewe(t,s.id,()=>async E=>{let v=await this._findPeerSingle(E,s),A=v.closerPeers.find(R=>R.id.isEqual(s));return A?{peer:A,queryComplete:!0}:{closerPeers:v.closerPeers}}),h;try{h=await Z5t(d.run(u),o.timeout)}finally{d.stop()}let y=!1;if(h.paths.forEach(m=>{m.success&&m.peer&&(y=!0,t.peerStore.addressBook.add(m.peer.id,m.peer.multiaddrs))}),t._log("findPeer %s: %s",s.toB58String(),y),!y)throw M3(new Error("No peer found"),"ERR_NOT_FOUND");let g=t.peerStore.get(s);if(!g)throw M3(new Error("No peer found in peer store"),"ERR_NOT_FOUND");return{id:g.id,multiaddrs:g.addresses.map(m=>m.multiaddr)}},async*getClosestPeers(s,o={shallow:!1}){t._log("getClosestPeers to %b",s);let a=await L3.convertBuffer(s),c=t.routingTable.closestPeers(a,t.kBucketSize),f=await new ewe(t,s,()=>async h=>({closerPeers:await i(s,h),pathComplete:o.shallow?!0:void 0})).run(c);if(!f||!f.finalSet)return[];let d=await L3.sortClosestPeers(Array.from(f.finalSet),a);for(let h of d.slice(0,t.kBucketSize))yield h},async getPublicKey(s){t._log("getPublicKey %s",s.toB58String());let o=t.peerStore.get(s);if(o&&o.id.pubKey)return t._log("getPublicKey: found local copy"),o.id.pubKey;let a;try{a=await n(s)}catch(f){let d=L3.keyForPublicKey(s),h=await t.get(d);a=J5t.keys.unmarshalPublicKey(h)}let c=new FC(s.id,void 0,a),u=(o&&o.addresses||[]).map(f=>f.multiaddr);return t.peerStore.addressBook.add(c,u),t.peerStore.keyBook.set(c,a),a}}}});var cwe=p((Xjt,awe)=>{l();"use strict";var rmt=py(),iwe=as(),imt=tt(),{Key:nmt}=Ut(),{default:smt}=Yc(),U3=Jd(),F3=mi(),nwe=class{constructor(e,r,i){this.datastore=e,this._log=F3.logger(r,"providers"),this.cleanupInterval=U3.PROVIDERS_CLEANUP_INTERVAL,this.provideValidity=U3.PROVIDERS_VALIDITY,this.lruCacheSize=i||U3.PROVIDERS_LRU_CACHE_SIZE,this.providers=rmt(this.lruCacheSize),this.syncQueue=new smt({concurrency:1})}start(){this._started||(this._started=!0,this._cleaner=setInterval(()=>this._cleanup(),this.cleanupInterval))}stop(){this._started=!1,this._cleaner&&(clearInterval(this._cleaner),this._cleaner=null)}_cleanup(){return this.syncQueue.add(async()=>{this._log("start cleanup");let e=Date.now(),r=0,i=0,n=new Map,s=this.datastore.batch(),o=this.datastore.query({prefix:U3.PROVIDERS_KEY_PREFIX});for await(let a of o)try{let{cid:c,peerId:u}=swe(a.key),f=owe(a.value),d=Date.now(),h=d-f,y=h>this.provideValidity;if(this._log("comparing: %d - %d = %d > %d %s",d,f,h,this.provideValidity,y?"(expired)":""),y){i++,s.delete(a.key);let g=n.get(c)||new Set;g.add(u),n.set(c,g)}r++}catch(c){this._log.error(c.message)}this._log("deleting %d / %d entries",i,r),n.size&&await s.commit();for(let[a,c]of n){let u=j3(a),f=this.providers.get(u);if(f){for(let d of c)f.delete(d);f.size===0?this.providers.remove(u):this.providers.set(u,f)}}this._log("Cleanup successful (%dms)",Date.now()-e)})}async _getProvidersMap(e){let r=j3(e),i=this.providers.get(r);return i||(i=await amt(this.datastore,e),this.providers.set(r,i)),i}async addProvider(e,r){return this.syncQueue.add(async()=>{this._log("addProvider %s",e.toString());let i=await this._getProvidersMap(e);this._log("loaded %s provs",i.size);let n=new Date;i.set(F3.encodeBase32(r.id),n);let s=j3(e);return this.providers.set(s,i),omt(this.datastore,e,r,n)})}async getProviders(e){return this.syncQueue.add(async()=>(this._log("getProviders %s",e.toString()),[...(await this._getProvidersMap(e)).keys()].map(i=>new imt(F3.decodeBase32(i)))))}};function j3(t){return t=typeof t=="string"?t:F3.encodeBase32(t.bytes),U3.PROVIDERS_KEY_PREFIX+t}async function omt(t,e,r,i){let n=[j3(e),"/",F3.encodeBase32(r.id)].join(""),s=new nmt(n),o=Uint8Array.from(iwe.encode(i.getTime()));return t.put(s,o)}function swe(t){let e=t.toString().split("/");if(e.length!==4)throw new Error("incorrectly formatted provider entry key in datastore: "+t);return{cid:e[2],peerId:e[3]}}async function amt(t,e){let r=new Map,i=t.query({prefix:j3(e)});for await(let n of i){let{peerId:s}=swe(n.key);r.set(s,owe(n.value))}return r}function owe(t){return iwe.decode(t)}awe.exports=nwe});var lwe=p((Qjt,fwe)=>{l();"use strict";var uwe=class{constructor(){this.queries=new Set,this.running=!1}queryStarted(e){this.queries.add(e)}queryCompleted(e){this.queries.delete(e)}start(){this.running=!0}stop(){this.running=!1;for(let e of this.queries)e.stop();this.queries.clear()}};fwe.exports=uwe});var pwe=p((Zjt,VC)=>{l();"use strict";var{EventEmitter:cmt}=gr(),E7=ca(),K3=$l(),{MemoryDatastore:umt}=Ut(),{equals:dwe}=(di(),li),{toString:jC}=(et(),Je),fmt=Bve(),Cp=mi(),V3=Jd(),lmt=p7e(),dmt=j7e(),hmt=J7e(),pmt=rwe(),S7=mc(),ymt=cwe(),gmt=lwe(),KC=K3.Record,hwe=class extends cmt{constructor({libp2p:e,dialer:r,peerId:i,peerStore:n,registrar:s,protocolPrefix:o="/ipfs",forceProtocolLegacy:a=!1,datastore:c=new umt,kBucketSize:u=V3.K,clientMode:f=!1,concurrency:d=V3.ALPHA,validators:h={},selectors:y={},onPut:g=()=>{},onRemove:m=()=>{}}){super();if(!r)throw new Error("libp2p-kad-dht requires an instance of Dialer");this.libp2p=e,this.dialer=r,this.peerId=i,this.peerStore=n,this.registrar=s,this.protocol=o+(a?"":V3.PROTOCOL_DHT),this.kBucketSize=u,this._clientMode=f,this.concurrency=d,this.disjointPaths=Math.ceil(this.kBucketSize/2),this.routingTable=new fmt(this,{kBucketSize:this.kBucketSize}),this.datastore=c,this.providers=new ymt(this.datastore,this.peerId),this.validators={pk:K3.validator.validators.pk,...h},this.selectors={pk:K3.selection.selectors.pk,...y},this.network=new lmt(this),this._log=Cp.logger(this.peerId),this._queryManager=new gmt,this._running=!1,this.contentFetching=dmt(this),this.contentRouting=hmt(this),this.peerRouting=pmt(this),this.onPut=g,this.onRemove=m}get isStarted(){return this._running}start(){return this._running=!0,Promise.all([this.providers.start(),this._queryManager.start(),this.network.start(),this.routingTable.start()])}stop(){return this._running=!1,Promise.all([this.providers.stop(),this._queryManager.stop(),this.network.stop(),this.routingTable.stop()])}async put(e,r,i={}){return this.contentFetching.put(e,r,i)}async get(e,r={}){return this.contentFetching.get(e,r)}async getMany(e,r,i={}){return this.contentFetching.getMany(e,r,i)}async removeLocal(e){this._log(`removeLocal: ${jC(e,"base32")}`);let r=Cp.bufferToKey(e);try{await this.datastore.delete(r)}catch(i){if(i.code==="ERR_NOT_FOUND")return;throw i}}async _putLocal(e,r){this._log(`_putLocal: ${jC(e,"base32")}`);let i=Cp.bufferToKey(e);await this.datastore.put(i,r)}async provide(e){return this.contentRouting.provide(e)}async*findProviders(e,r={timeout:6e3,maxNumProviders:5}){for await(let i of this.contentRouting.findProviders(e,r))yield i}async findPeer(e,r={timeout:6e4}){return this.peerRouting.findPeer(e,r)}async*getClosestPeers(e,r={shallow:!1}){yield*this.peerRouting.getClosestPeers(e,r)}getPublicKey(e){return this.peerRouting.getPublicKey(e)}_peerDiscovered(e,r){this.emit("peer",{id:e,multiaddrs:r})}async _nearestPeersToQuery(e){let r=await Cp.convertBuffer(e.key);return this.routingTable.closestPeers(r,this.kBucketSize).map(n=>{let s=this.peerStore.get(n);return{id:n,multiaddrs:s?s.addresses.map(o=>o.multiaddr):[]}})}async _betterPeersToQuery(e,r){return this._log("betterPeersToQuery"),(await this._nearestPeersToQuery(e)).filter(n=>this._isSelf(n.id)?(this._log.error("trying to return self as closer"),!1):!n.id.isEqual(r))}async _checkLocalDatastore(e){this._log(`checkLocalDatastore: ${jC(e)} %b`,e);let r=Cp.bufferToKey(e),i;try{i=await this.datastore.get(r)}catch(s){if(s.code==="ERR_NOT_FOUND")return;throw s}let n=KC.deserialize(i);if(!n)throw E7(new Error("Invalid record"),"ERR_INVALID_RECORD");if(n.timeReceived==null||Cp.now()-n.timeReceived.getTime()>V3.MAX_RECORD_AGE){await this.datastore.delete(r),this.onRemove(n);return}return n}async _add(e){await this.routingTable.add(e)}async _verifyRecordLocally(e){this._log("verifyRecordLocally"),await K3.validator.verifyRecord(this.validators,e)}_isSelf(e){return e&&dwe(this.peerId.id,e.id)}async _putValueToPeer(e,r,i){let n=new S7(S7.TYPES.PUT_VALUE,e,0);n.record=KC.deserialize(r);let s=await this.network.sendRequest(i,n);if(s.record&&!dwe(s.record.value,KC.deserialize(r).value))throw E7(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")}async _getValueOrPeers(e,r){let i=await this._getValueSingle(e,r),n=i.closerPeers,s=i.record;if(s){try{await this._verifyRecordOnline(s)}catch(o){let a="invalid record received, discarded";throw this._log(a),E7(new Error(a),"ERR_INVALID_RECORD")}return{record:s,peers:n}}if(n.length>0)return{peers:n};throw E7(new Error("Not found"),"ERR_NOT_FOUND")}async _getValueSingle(e,r){let i=new S7(S7.TYPES.GET_VALUE,r,0);return this.network.sendRequest(e,i)}async _verifyRecordOnline(e){await K3.validator.verifyRecord(this.validators,e)}};VC.exports=hwe;VC.exports.multicodec="/ipfs"+V3.PROTOCOL_DHT});var bwe=p((Jjt,gwe)=>{l();"use strict";var bmt=Fbe(),mmt=kme(),vmt=t8e(),{NOISE:wmt}=wve(),_mt=pwe(),Emt=lT(),ywe=AS();gwe.exports=()=>({dialer:{maxParallelDials:150,maxDialsPerPeer:4,dialTimeout:1e4},modules:{transport:[bmt,mmt],streamMuxer:[vmt],connEncryption:[wmt],peerDiscovery:[],dht:_mt,pubsub:Emt},config:{peerDiscovery:{autoDial:!0,bootstrap:{enabled:!0},webRTCStar:{enabled:!0}},dht:{kBucketSize:20,enabled:!1,clientMode:!0,randomWalk:{enabled:!1},validators:{ipns:ywe.validator},selectors:{ipns:ywe.selector}},pubsub:{enabled:!0,emitSelf:!0},nat:{enabled:!1}},metrics:{enabled:!0},peerStore:{persistence:!0,threshold:1}})});var _we=p((zC,wwe)=>{l();"use strict";var Smt=tt(),{Multiaddr:xmt}=rt(),Amt=Cl(),{EventEmitter:Imt}=gr(),mwe=be(),x7=Object.assign(mwe("libp2p:bootstrap"),{error:mwe("libp2p:bootstrap:error")}),vwe=class extends Imt{constructor(e={list:[]}){if(!e.list||!e.list.length)throw new Error("Bootstrap requires a list of peer addresses");super();this._list=e.list,this._interval=e.interval||1e4,this._timer=null}start(){this._timer||(this._timer=setInterval(()=>this._discoverBootstrapPeers(),this._interval),x7("Starting bootstrap node discovery"),this._discoverBootstrapPeers())}_discoverBootstrapPeers(){!this._timer||this._list.forEach(e=>{if(!Amt.P2P.matches(e))return x7.error("Invalid multiaddr");let r=new xmt(e),i=r.getPeerId();if(!i){x7.error("Invalid bootstrap multiaddr without peer id");return}let n=Smt.createFromB58String(i);try{this.emit("peer",{id:n,multiaddrs:[r]})}catch(s){x7.error("Invalid bootstrap peer id",s)}})}stop(){this._timer&&clearInterval(this._timer),this._timer=null}};zC=wwe.exports=vwe;zC.tag="bootstrap"});var HC=p((eKt,Swe)=>{l();"use strict";var jt=qy(),Tmt=br().bind({ignoreUndefined:!0}),Rmt=xt(),Ewe=Ffe(),Pmt=$fe(),Cmt=Zfe(),{create:Omt}=qpe(),{Multiaddr:kmt}=rt(),qmt=F5().version;Swe.exports=({options:t={},peerId:e,multiaddrs:r=[],repo:i,keychainConfig:n={},config:s={}})=>{let{datastore:o,keys:a}=i,c=Dmt({options:t,config:s,datastore:o,keys:a,keychainConfig:n,peerId:e,multiaddrs:r});return typeof t.libp2p=="function"?t.libp2p({libp2pOptions:c,options:t,config:s,datastore:o,peerId:e}):F4e().create(c)};function Dmt({options:t,config:e,datastore:r,keys:i,keychainConfig:n,peerId:s,multiaddrs:o}){let a=()=>{let m=jt(e,"Pubsub.Router")||"gossipsub";if(!Ewe[m])throw Rmt(new Error(`Router unavailable. Configure libp2p.modules.pubsub to use the ${m} router.`),"ERR_NOT_SUPPORTED");return Ewe[m]},c={datastore:r,peerId:s,modules:{}},u={modules:{pubsub:a(),contentRouting:[],peerRouting:[]},config:{peerDiscovery:{mdns:{enabled:jt(t,"config.Discovery.MDNS.Enabled",jt(e,"Discovery.MDNS.Enabled",!0))},webRTCStar:{enabled:jt(t,"config.Discovery.webRTCStar.Enabled",jt(e,"Discovery.webRTCStar.Enabled",!0))},bootstrap:{list:jt(t,"config.Bootstrap",jt(e,"Bootstrap",[]))}},relay:{enabled:jt(t,"relay.enabled",jt(e,"relay.enabled",!0)),hop:{enabled:jt(t,"relay.hop.enabled",jt(e,"relay.hop.enabled",!1)),active:jt(t,"relay.hop.active",jt(e,"relay.hop.active",!1))}},dht:{enabled:jt(e,"Routing.Type","none")!=="none",clientMode:jt(e,"Routing.Type","dht")!=="dhtserver",kBucketSize:jt(t,"dht.kBucketSize",20)},pubsub:{enabled:jt(t,"config.Pubsub.Enabled",jt(e,"Pubsub.Enabled",!0))},nat:{enabled:!jt(e,"Swarm.DisableNatPortMap",!1)}},addresses:{listen:o.map(m=>m.toString()),announce:jt(t,"addresses.announce",jt(e,"Addresses.Announce",[])),noAnnounce:jt(t,"addresses.noAnnounce",jt(e,"Addresses.NoAnnounce",[]))},connectionManager:jt(t,"connectionManager",{maxConnections:jt(t,"config.Swarm.ConnMgr.HighWater",jt(e,"Swarm.ConnMgr.HighWater")),minConnections:jt(t,"config.Swarm.ConnMgr.LowWater",jt(e,"Swarm.ConnMgr.LowWater"))}),keychain:{datastore:i,...n},host:{agentVersion:`js-ipfs/${qmt}`}},f=bwe(),d=jt(t,"libp2p",void 0);typeof d=="function"&&(d=void 0);let h=Tmt(c,f(),u,d);jt(h,"config.peerDiscovery.bootstrap.list",[]).length>0&&h.modules.peerDiscovery.push(_we());let g=jt(t,"config.Addresses.Delegates",jt(e,"Addresses.Delegates",[]));if(g.length>0){let m=g[Math.floor(Math.random()*g.length)],E=new kmt(m).toOptions(),v={host:E.host,protocol:parseInt(E.port)===443?"https":"http",port:E.port},A=Omt(v);u.modules.contentRouting=u.modules.contentRouting||[],u.modules.contentRouting.push(new Cmt(s,A)),u.modules.peerRouting=u.modules.peerRouting||[],u.modules.peerRouting.push(new Pmt(A))}return h}});var Pwe=p((tKt,Rwe)=>{l();"use strict";var z3=be()("ipfs:components:peer:storage"),Nmt=Uce(),Bmt=e5(),{ERR_REPO_NOT_INITIALIZED:Mmt}=Fl().errors,{fromString:Lmt}=(ut(),lt),{toString:Umt}=(et(),Je),$C=tt(),xwe=br().bind({ignoreUndefined:!0}),Fmt=Hx(),{NotEnabledError:jmt,NotInitializedError:Kmt}=af(),Awe=HC(),A7=class{constructor(e,r,i,n,s){this.print=n,this.peerId=e,this.keychain=r,this.repo=i,this.print=n,this.isNew=s}static async start(e,r,i){let{repoAutoMigrate:n,repo:s,onMigrationProgress:o}=i,a=typeof s=="string"||s==null?Nmt(e,r,{path:s,autoMigrate:n,onMigrationProgress:o}):s,{peerId:c,keychain:u,isNew:f}=await Vmt(e,a,i);return new A7(c,u,a,e,f)}};Rwe.exports=A7;var Vmt=async(t,e,r)=>{if(!e.closed)return{...await Iwe(e,r),isNew:!1};try{return await e.open(),{...await Iwe(e,r),isNew:!1}}catch(i){if(i.code!==Mmt)throw i;if(r.init&&r.init.allowNew===!1)throw new jmt("Initialization of new repos disabled by config, pass `config.init.isNew: true` to enable it");return{...await zmt(t,e,r),isNew:!0}}},zmt=async(t,e,r)=>{let i=r.init||{},n=await e.exists();if(z3("repo exists?",n),n===!0)throw new Error("repo already exists");let s=i.privateKey?await Hmt(i.privateKey):await $mt(t,i),o=Gmt(s);z3("peer identity: %s",o.PeerID);let a={...xwe(Twe(Bmt(),i.profiles),r.config),Identity:o};await e.init(a),await e.open(),z3("repo opened");let c={pass:r.pass};try{c.dek=await e.config.get("Keychain.DEK")}catch(f){if(f.code!=="ERR_NOT_FOUND")throw f}let u=await Awe({options:void 0,multiaddrs:void 0,peerId:s,repo:e,config:a,keychainConfig:c});return u.keychain&&u.keychain.opts&&(await u.loadKeychain(),await e.config.set("Keychain",{DEK:u.keychain.opts.dek})),{peerId:s,keychain:u.keychain}},Hmt=t=>(z3("using user-supplied private-key"),typeof t=="object"?t:$C.createFromPrivKey(Lmt(t,"base64pad"))),$mt=(t,{algorithm:e="Ed25519",bits:r=2048})=>(t("generating %s keypair...",e),$C.create({keyType:e,bits:r})),Gmt=t=>({PeerID:t.toB58String(),PrivKey:Umt(t.privKey.bytes,"base64pad")}),Iwe=async(t,e)=>{let r=e.config,i=e.init&&e.init.profiles||[],n=e.pass,s=await t.config.getAll(),o=Wmt(Twe(s,i),r);if(s!==o&&await t.config.replace(o),!o.Identity||!o.Identity.PrivKey)throw new Kmt("No private key was found in the config, please intialize the repo");let a=await $C.createFromPrivKey(o.Identity.PrivKey),c=await Awe({options:void 0,multiaddrs:void 0,peerId:a,repo:t,config:o,keychainConfig:{pass:n,...o.Keychain}});return c.keychain&&await c.loadKeychain(),{peerId:a,keychain:c.keychain}},Wmt=(t,e)=>e?xwe(t,e):t,Twe=(t,e)=>(e||[]).reduce((r,i)=>{let n=Fmt.profiles[i];if(!n)throw new Error(`Could not find profile with name '${i}'`);return z3("applying profile %s",i),n.transform(r)},t)});var qwe=p((rKt,kwe)=>{l();kwe.exports=Owe;var Cwe=128,Ymt=127,Xmt=~Ymt,Qmt=Math.pow(2,31);function Owe(t,e,r){e=e||[],r=r||0;for(var i=r;t>=Qmt;)e[r++]=t&255|Cwe,t/=128;for(;t&Xmt;)e[r++]=t&255|Cwe,t>>>=7;return e[r]=t|0,Owe.bytes=r-i+1,e}});var Bwe=p((iKt,Nwe)=>{l();Nwe.exports=GC;var Zmt=128,Dwe=127;function GC(t,e){var r=0,e=e||0,i=0,n=e,s,o=t.length;do{if(n>=o)throw GC.bytes=0,new RangeError("Could not decode varint");s=t[n++],r+=i<28?(s&Dwe)<<i:(s&Dwe)*Math.pow(2,i),i+=7}while(s>=Zmt);return GC.bytes=n-e,r}});var Lwe=p((nKt,Mwe)=>{l();var Jmt=Math.pow(2,7),e8t=Math.pow(2,14),t8t=Math.pow(2,21),r8t=Math.pow(2,28),i8t=Math.pow(2,35),n8t=Math.pow(2,42),s8t=Math.pow(2,49),o8t=Math.pow(2,56),a8t=Math.pow(2,63);Mwe.exports=function(t){return t<Jmt?1:t<e8t?2:t<t8t?3:t<r8t?4:t<i8t?5:t<n8t?6:t<s8t?7:t<o8t?8:t<a8t?9:10}});var Fwe=p((sKt,Uwe)=>{l();Uwe.exports={encode:qwe(),decode:Bwe(),encodingLength:Lwe()}});var Vwe=p((oKt,Kwe)=>{l();"use strict";var jwe=Fwe();Kwe.exports=t=>{if(!(t instanceof Uint8Array))throw new Error("arg needs to be a Uint8Array");let e=[];for(;t.length>0;){let r=jwe.decode(t);e.push(r),t=t.slice(jwe.decode.bytes)}return e}});var $we=p((aKt,Hwe)=>{l();"use strict";var{base58btc:c8t}=(ti(),ei),zwe=class{constructor(e,r,i){this._refCounter=1,this.cid=e,this.priority=r||1,this.wantType=i}inc(){this._refCounter+=1}dec(){this._refCounter=Math.max(0,this._refCounter-1)}hasRefs(){return this._refCounter>0}get[Symbol.toStringTag](){return`WantlistEntry <key: ${this.cid.toString(c8t)}, priority: ${this.priority}, refs: ${this._refCounter}>`}equals(e){return this._refCounter===e._refCounter&&this.cid.equals(e.cid)&&this.priority===e.priority&&this.wantType===e.wantType}};Hwe.exports=zwe});var H3=p((cKt,Wwe)=>{l();"use strict";var Gwe=$we(),{base58btc:I7}=(ti(),ei),u8t=(t,e)=>Array.prototype.slice.call(e,0).sort((r,i)=>{let n=t(r),s=t(i);return n<s?-1:n>s?1:0}),WC=class{constructor(e){this.set=new Map,this._stats=e}get length(){return this.set.size}add(e,r,i){let n=Op(),s=e.toString(I7),o=this.set.get(s);o?(o.inc(),o.priority=r,o.wantType===n.WantType.Have&&i===n.WantType.Block&&(o.wantType=i)):(this.set.set(s,new Gwe(e,r,i)),this._stats&&this._stats.push(null,"wantListSize",1))}remove(e){let r=e.toString(I7),i=this.set.get(r);!i||(i.dec(),!i.hasRefs()&&(this.set.delete(r),this._stats&&this._stats.push(null,"wantListSize",-1)))}removeForce(e){this.set.has(e)&&this.set.delete(e)}forEach(e){return this.set.forEach(e)}entries(){return this.set.entries()}sortedEntries(){return new Map(u8t(e=>e[1].key,Array.from(this.set.entries())))}contains(e){let r=e.toString(I7);return this.set.has(r)}get(e){let r=e.toString(I7);return this.set.get(r)}};WC.Entry=Gwe;Wwe.exports=WC});var YC=p((fKt,Ywe)=>{l();"use strict";var f8t=H3().Entry,{base58btc:l8t}=(ti(),ei);Ywe.exports=class{constructor(e,r,i,n,s){this.entry=new f8t(e,r,i),this.cancel=Boolean(n),this.sendDontHave=Boolean(s)}get cid(){return this.entry.cid}set cid(e){this.entry.cid=e}get priority(){return this.entry.priority}set priority(e){this.entry.priority=e}get wantType(){return this.entry.wantType}set wantType(e){this.entry.wantType=e}get[Symbol.toStringTag](){return`BitswapMessageEntry ${this.cid.toString(l8t)} <cancel: ${this.cancel}, priority: ${this.priority}>`}equals(e){return this.cancel===e.cancel&&this.sendDontHave===e.sendDontHave&&this.wantType===e.wantType&&this.entry.equals(e.entry)}}});var nl=p((lKt,Zwe)=>{l();"use strict";var Xwe=be(),{equals:d8t}=(di(),li),Qwe=YC(),h8t=(t,e)=>{let r=["bitswap"];return e&&r.push(e),t&&r.push(`${t.toB58String().slice(0,8)}`),Object.assign(Xwe(r.join(":")),{error:Xwe(r.concat(["error"]).join(":"))})},XC=(t,e,r)=>{let i=0,n=r.length;for(;i<n;){if(t(e,r[i]))return!0;i+=1}return!1},p8t=(t,e)=>{let r=0,i=e.length,n=[],s;for(;r<i;)s=e[r],XC(t,s,n)||(n[n.length]=s),r+=1;return n},y8t=(t,e)=>e.reduce((r,i)=>{let n=t(i);return r[n]?r[n].push(i):r[n]=[i],r},{}),g8t=(t,e,r)=>e.filter(i=>!XC(t,i,r)),b8t=(t,e)=>Array.prototype.slice.call(e,0).sort((r,i)=>{let n=t(r),s=t(i);return n<s?-1:n>s?1:0}),m8t=(t,e)=>{if(t.size!==e.size)return!1;for(let[r,i]of t){let n=e.get(r);if(n===void 0||i instanceof Uint8Array&&n instanceof Uint8Array&&!d8t(i,n)||i instanceof Qwe&&n instanceof Qwe&&!i.equals(n))return!1}return!0};Zwe.exports={logger:h8t,includesWith:XC,uniqWith:p8t,groupBy:y8t,pullAllWith:g8t,sortBy:b8t,isMapEqual:m8t}});var e9e=p((dKt,Jwe)=>{l();"use strict";var vc=qi(),wc=vc.Reader,$3=vc.Writer,Kt=vc.util,Rt=vc.roots["ipfs-bitswap"]||(vc.roots["ipfs-bitswap"]={});Rt.Message=function(){function t(e){if(this.blocks=[],this.payload=[],this.blockPresences=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.wantlist=null,t.prototype.blocks=Kt.emptyArray,t.prototype.payload=Kt.emptyArray,t.prototype.blockPresences=Kt.emptyArray,t.prototype.pendingBytes=0,t.encode=function(r,i){if(i||(i=$3.create()),r.wantlist!=null&&Object.hasOwnProperty.call(r,"wantlist")&&Rt.Message.Wantlist.encode(r.wantlist,i.uint32(10).fork()).ldelim(),r.blocks!=null&&r.blocks.length)for(var n=0;n<r.blocks.length;++n)i.uint32(18).bytes(r.blocks[n]);if(r.payload!=null&&r.payload.length)for(var n=0;n<r.payload.length;++n)Rt.Message.Block.encode(r.payload[n],i.uint32(26).fork()).ldelim();if(r.blockPresences!=null&&r.blockPresences.length)for(var n=0;n<r.blockPresences.length;++n)Rt.Message.BlockPresence.encode(r.blockPresences[n],i.uint32(34).fork()).ldelim();return r.pendingBytes!=null&&Object.hasOwnProperty.call(r,"pendingBytes")&&i.uint32(40).int32(r.pendingBytes),i},t.decode=function(r,i){r instanceof wc||(r=wc.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Rt.Message;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.wantlist=Rt.Message.Wantlist.decode(r,r.uint32());break;case 2:s.blocks&&s.blocks.length||(s.blocks=[]),s.blocks.push(r.bytes());break;case 3:s.payload&&s.payload.length||(s.payload=[]),s.payload.push(Rt.Message.Block.decode(r,r.uint32()));break;case 4:s.blockPresences&&s.blockPresences.length||(s.blockPresences=[]),s.blockPresences.push(Rt.Message.BlockPresence.decode(r,r.uint32()));break;case 5:s.pendingBytes=r.int32();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof Rt.Message)return r;var i=new Rt.Message;if(r.wantlist!=null){if(typeof r.wantlist!="object")throw TypeError(".Message.wantlist: object expected");i.wantlist=Rt.Message.Wantlist.fromObject(r.wantlist)}if(r.blocks){if(!Array.isArray(r.blocks))throw TypeError(".Message.blocks: array expected");i.blocks=[];for(var n=0;n<r.blocks.length;++n)typeof r.blocks[n]=="string"?Kt.base64.decode(r.blocks[n],i.blocks[n]=Kt.newBuffer(Kt.base64.length(r.blocks[n])),0):r.blocks[n].length&&(i.blocks[n]=r.blocks[n])}if(r.payload){if(!Array.isArray(r.payload))throw TypeError(".Message.payload: array expected");i.payload=[];for(var n=0;n<r.payload.length;++n){if(typeof r.payload[n]!="object")throw TypeError(".Message.payload: object expected");i.payload[n]=Rt.Message.Block.fromObject(r.payload[n])}}if(r.blockPresences){if(!Array.isArray(r.blockPresences))throw TypeError(".Message.blockPresences: array expected");i.blockPresences=[];for(var n=0;n<r.blockPresences.length;++n){if(typeof r.blockPresences[n]!="object")throw TypeError(".Message.blockPresences: object expected");i.blockPresences[n]=Rt.Message.BlockPresence.fromObject(r.blockPresences[n])}}return r.pendingBytes!=null&&(i.pendingBytes=r.pendingBytes|0),i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.blocks=[],n.payload=[],n.blockPresences=[]),i.defaults&&(n.wantlist=null,n.pendingBytes=0),r.wantlist!=null&&r.hasOwnProperty("wantlist")&&(n.wantlist=Rt.Message.Wantlist.toObject(r.wantlist,i)),r.blocks&&r.blocks.length){n.blocks=[];for(var s=0;s<r.blocks.length;++s)n.blocks[s]=i.bytes===String?Kt.base64.encode(r.blocks[s],0,r.blocks[s].length):i.bytes===Array?Array.prototype.slice.call(r.blocks[s]):r.blocks[s]}if(r.payload&&r.payload.length){n.payload=[];for(var s=0;s<r.payload.length;++s)n.payload[s]=Rt.Message.Block.toObject(r.payload[s],i)}if(r.blockPresences&&r.blockPresences.length){n.blockPresences=[];for(var s=0;s<r.blockPresences.length;++s)n.blockPresences[s]=Rt.Message.BlockPresence.toObject(r.blockPresences[s],i)}return r.pendingBytes!=null&&r.hasOwnProperty("pendingBytes")&&(n.pendingBytes=r.pendingBytes),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,vc.util.toJSONOptions)},t.Wantlist=function(){function e(r){if(this.entries=[],r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.entries=Kt.emptyArray,e.prototype.full=!1,e.encode=function(i,n){if(n||(n=$3.create()),i.entries!=null&&i.entries.length)for(var s=0;s<i.entries.length;++s)Rt.Message.Wantlist.Entry.encode(i.entries[s],n.uint32(10).fork()).ldelim();return i.full!=null&&Object.hasOwnProperty.call(i,"full")&&n.uint32(16).bool(i.full),n},e.decode=function(i,n){i instanceof wc||(i=wc.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new Rt.Message.Wantlist;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.entries&&o.entries.length||(o.entries=[]),o.entries.push(Rt.Message.Wantlist.Entry.decode(i,i.uint32()));break;case 2:o.full=i.bool();break;default:i.skipType(a&7);break}}return o},e.fromObject=function(i){if(i instanceof Rt.Message.Wantlist)return i;var n=new Rt.Message.Wantlist;if(i.entries){if(!Array.isArray(i.entries))throw TypeError(".Message.Wantlist.entries: array expected");n.entries=[];for(var s=0;s<i.entries.length;++s){if(typeof i.entries[s]!="object")throw TypeError(".Message.Wantlist.entries: object expected");n.entries[s]=Rt.Message.Wantlist.Entry.fromObject(i.entries[s])}}return i.full!=null&&(n.full=Boolean(i.full)),n},e.toObject=function(i,n){n||(n={});var s={};if((n.arrays||n.defaults)&&(s.entries=[]),n.defaults&&(s.full=!1),i.entries&&i.entries.length){s.entries=[];for(var o=0;o<i.entries.length;++o)s.entries[o]=Rt.Message.Wantlist.Entry.toObject(i.entries[o],n)}return i.full!=null&&i.hasOwnProperty("full")&&(s.full=i.full),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,vc.util.toJSONOptions)},e.WantType=function(){var r={},i=Object.create(r);return i[r[0]="Block"]=0,i[r[1]="Have"]=1,i}(),e.Entry=function(){function r(i){if(i)for(var n=Object.keys(i),s=0;s<n.length;++s)i[n[s]]!=null&&(this[n[s]]=i[n[s]])}return r.prototype.block=Kt.newBuffer([]),r.prototype.priority=0,r.prototype.cancel=!1,r.prototype.wantType=0,r.prototype.sendDontHave=!1,r.encode=function(n,s){return s||(s=$3.create()),n.block!=null&&Object.hasOwnProperty.call(n,"block")&&s.uint32(10).bytes(n.block),n.priority!=null&&Object.hasOwnProperty.call(n,"priority")&&s.uint32(16).int32(n.priority),n.cancel!=null&&Object.hasOwnProperty.call(n,"cancel")&&s.uint32(24).bool(n.cancel),n.wantType!=null&&Object.hasOwnProperty.call(n,"wantType")&&s.uint32(32).int32(n.wantType),n.sendDontHave!=null&&Object.hasOwnProperty.call(n,"sendDontHave")&&s.uint32(40).bool(n.sendDontHave),s},r.decode=function(n,s){n instanceof wc||(n=wc.create(n));for(var o=s===void 0?n.len:n.pos+s,a=new Rt.Message.Wantlist.Entry;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.block=n.bytes();break;case 2:a.priority=n.int32();break;case 3:a.cancel=n.bool();break;case 4:a.wantType=n.int32();break;case 5:a.sendDontHave=n.bool();break;default:n.skipType(c&7);break}}return a},r.fromObject=function(n){if(n instanceof Rt.Message.Wantlist.Entry)return n;var s=new Rt.Message.Wantlist.Entry;switch(n.block!=null&&(typeof n.block=="string"?Kt.base64.decode(n.block,s.block=Kt.newBuffer(Kt.base64.length(n.block)),0):n.block.length&&(s.block=n.block)),n.priority!=null&&(s.priority=n.priority|0),n.cancel!=null&&(s.cancel=Boolean(n.cancel)),n.wantType){case"Block":case 0:s.wantType=0;break;case"Have":case 1:s.wantType=1;break}return n.sendDontHave!=null&&(s.sendDontHave=Boolean(n.sendDontHave)),s},r.toObject=function(n,s){s||(s={});var o={};return s.defaults&&(s.bytes===String?o.block="":(o.block=[],s.bytes!==Array&&(o.block=Kt.newBuffer(o.block))),o.priority=0,o.cancel=!1,o.wantType=s.enums===String?"Block":0,o.sendDontHave=!1),n.block!=null&&n.hasOwnProperty("block")&&(o.block=s.bytes===String?Kt.base64.encode(n.block,0,n.block.length):s.bytes===Array?Array.prototype.slice.call(n.block):n.block),n.priority!=null&&n.hasOwnProperty("priority")&&(o.priority=n.priority),n.cancel!=null&&n.hasOwnProperty("cancel")&&(o.cancel=n.cancel),n.wantType!=null&&n.hasOwnProperty("wantType")&&(o.wantType=s.enums===String?Rt.Message.Wantlist.WantType[n.wantType]:n.wantType),n.sendDontHave!=null&&n.hasOwnProperty("sendDontHave")&&(o.sendDontHave=n.sendDontHave),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,vc.util.toJSONOptions)},r}(),e}(),t.Block=function(){function e(r){if(r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.prefix=Kt.newBuffer([]),e.prototype.data=Kt.newBuffer([]),e.encode=function(i,n){return n||(n=$3.create()),i.prefix!=null&&Object.hasOwnProperty.call(i,"prefix")&&n.uint32(10).bytes(i.prefix),i.data!=null&&Object.hasOwnProperty.call(i,"data")&&n.uint32(18).bytes(i.data),n},e.decode=function(i,n){i instanceof wc||(i=wc.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new Rt.Message.Block;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.prefix=i.bytes();break;case 2:o.data=i.bytes();break;default:i.skipType(a&7);break}}return o},e.fromObject=function(i){if(i instanceof Rt.Message.Block)return i;var n=new Rt.Message.Block;return i.prefix!=null&&(typeof i.prefix=="string"?Kt.base64.decode(i.prefix,n.prefix=Kt.newBuffer(Kt.base64.length(i.prefix)),0):i.prefix.length&&(n.prefix=i.prefix)),i.data!=null&&(typeof i.data=="string"?Kt.base64.decode(i.data,n.data=Kt.newBuffer(Kt.base64.length(i.data)),0):i.data.length&&(n.data=i.data)),n},e.toObject=function(i,n){n||(n={});var s={};return n.defaults&&(n.bytes===String?s.prefix="":(s.prefix=[],n.bytes!==Array&&(s.prefix=Kt.newBuffer(s.prefix))),n.bytes===String?s.data="":(s.data=[],n.bytes!==Array&&(s.data=Kt.newBuffer(s.data)))),i.prefix!=null&&i.hasOwnProperty("prefix")&&(s.prefix=n.bytes===String?Kt.base64.encode(i.prefix,0,i.prefix.length):n.bytes===Array?Array.prototype.slice.call(i.prefix):i.prefix),i.data!=null&&i.hasOwnProperty("data")&&(s.data=n.bytes===String?Kt.base64.encode(i.data,0,i.data.length):n.bytes===Array?Array.prototype.slice.call(i.data):i.data),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,vc.util.toJSONOptions)},e}(),t.BlockPresenceType=function(){var e={},r=Object.create(e);return r[e[0]="Have"]=0,r[e[1]="DontHave"]=1,r}(),t.BlockPresence=function(){function e(r){if(r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.cid=Kt.newBuffer([]),e.prototype.type=0,e.encode=function(i,n){return n||(n=$3.create()),i.cid!=null&&Object.hasOwnProperty.call(i,"cid")&&n.uint32(10).bytes(i.cid),i.type!=null&&Object.hasOwnProperty.call(i,"type")&&n.uint32(16).int32(i.type),n},e.decode=function(i,n){i instanceof wc||(i=wc.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new Rt.Message.BlockPresence;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.cid=i.bytes();break;case 2:o.type=i.int32();break;default:i.skipType(a&7);break}}return o},e.fromObject=function(i){if(i instanceof Rt.Message.BlockPresence)return i;var n=new Rt.Message.BlockPresence;switch(i.cid!=null&&(typeof i.cid=="string"?Kt.base64.decode(i.cid,n.cid=Kt.newBuffer(Kt.base64.length(i.cid)),0):i.cid.length&&(n.cid=i.cid)),i.type){case"Have":case 0:n.type=0;break;case"DontHave":case 1:n.type=1;break}return n},e.toObject=function(i,n){n||(n={});var s={};return n.defaults&&(n.bytes===String?s.cid="":(s.cid=[],n.bytes!==Array&&(s.cid=Kt.newBuffer(s.cid))),s.type=n.enums===String?"Have":0),i.cid!=null&&i.hasOwnProperty("cid")&&(s.cid=n.bytes===String?Kt.base64.encode(i.cid,0,i.cid.length):n.bytes===Array?Array.prototype.slice.call(i.cid):i.cid),i.type!=null&&i.hasOwnProperty("type")&&(s.type=n.enums===String?Rt.Message.BlockPresenceType[i.type]:i.type),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,vc.util.toJSONOptions)},e}(),t}();Jwe.exports=Rt});var i9e=p((hKt,r9e)=>{l();"use strict";function t9e(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function v8t(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return t9e(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),t9e(new n,r)}}r9e.exports=v8t});var Op=p((pKt,s9e)=>{l();"use strict";var{CID:kp}=(Nc(),xh),{sha256:QC}=(ii(),fi),{base58btc:G3}=(ti(),ei),w8t=Vwe(),{isMapEqual:ZC}=nl(),{Message:Pu}=e9e(),n9e=YC(),{concat:_8t}=(fn(),un),E8t=i9e(),En=class{constructor(e){this.full=e,this.wantlist=new Map,this.blocks=new Map,this.blockPresences=new Map,this.pendingBytes=0}get empty(){return this.blocks.size===0&&this.wantlist.size===0&&this.blockPresences.size===0}addEntry(e,r,i,n,s){i==null&&(i=En.WantType.Block);let o=e.toString(G3),a=this.wantlist.get(o);a?(a.wantType===i&&(a.priority=r),n&&(a.cancel=Boolean(n)),s&&(a.sendDontHave=Boolean(s)),i===En.WantType.Block&&a.wantType===En.WantType.Have&&(a.wantType=i)):this.wantlist.set(o,new n9e(e,r,i,n,s))}addBlock(e,r){let i=e.toString(G3);this.blocks.set(i,r)}addHave(e){let r=e.toString(G3);this.blockPresences.has(r)||this.blockPresences.set(r,En.BlockPresenceType.Have)}addDontHave(e){let r=e.toString(G3);this.blockPresences.has(r)||this.blockPresences.set(r,En.BlockPresenceType.DontHave)}cancel(e){let r=e.toString(G3);this.wantlist.delete(r),this.addEntry(e,0,En.WantType.Block,!0,!1)}setPendingBytes(e){this.pendingBytes=e}serializeToBitswap100(){let e={wantlist:{entries:Array.from(this.wantlist.values()).map(r=>({block:r.cid.bytes,priority:Number(r.priority),cancel:Boolean(r.cancel)})),full:this.full?!0:void 0},blocks:Array.from(this.blocks.values())};return Pu.encode(e).finish()}serializeToBitswap110(){let e={wantlist:{entries:Array.from(this.wantlist.values()).map(r=>({block:r.cid.bytes,priority:Number(r.priority),wantType:r.wantType,cancel:Boolean(r.cancel),sendDontHave:Boolean(r.sendDontHave)})),full:this.full?!0:void 0},blockPresences:[],payload:[],pendingBytes:this.pendingBytes};for(let[r,i]of this.blocks.entries()){let n=kp.parse(r),s=Uint8Array.from([n.code]),o=n.multihash.bytes.subarray(0,2),a=_8t([[n.version],s,o],1+s.byteLength+o.byteLength);e.payload.push(new Pu.Block({prefix:a,data:i}))}for(let[r,i]of this.blockPresences)e.blockPresences.push(new Pu.BlockPresence({cid:kp.parse(r).bytes,type:i}));return this.pendingBytes>0&&(e.pendingBytes=this.pendingBytes),Pu.encode(e).finish()}equals(e){return!(this.full!==e.full||this.pendingBytes!==e.pendingBytes||!ZC(this.wantlist,e.wantlist)||!ZC(this.blocks,e.blocks)||!ZC(this.blockPresences,e.blockPresences))}get[Symbol.toStringTag](){let e=Array.from(this.wantlist.keys()),r=Array.from(this.blocks.keys());return`BitswapMessage <full: ${this.full}, list: ${e}, blocks: ${r}>`}};En.deserialize=async(t,e={})=>{let r=Pu.decode(t),i=r.wantlist&&r.wantlist.full||!1,n=new En(i);return r.wantlist&&r.wantlist.entries&&r.wantlist.entries.forEach(s=>{if(!s.block)return;let o=kp.decode(s.block);n.addEntry(o,s.priority||0,s.wantType,Boolean(s.cancel),Boolean(s.sendDontHave))}),r.blockPresences&&r.blockPresences.forEach(s=>{if(!s.cid)return;let o=kp.decode(s.cid);s.type===En.BlockPresenceType.Have?n.addHave(o):n.addDontHave(o)}),r.blocks.length>0?(await Promise.all(r.blocks.map(async s=>{let o=await QC.digest(s),a=kp.createV0(o);n.addBlock(a,s)})),n):(r.payload.length>0&&(await Promise.all(r.payload.map(async s=>{if(!s.prefix||!s.data)return;let o=w8t(s.prefix),a=o[0],c=o[1],u=o[2],f=u===QC.code?QC:e[u];if(!f)throw E8t(new Error("Unknown hash algorithm"),"ERR_UNKNOWN_HASH_ALG");let d=await f.digest(s.data),h=kp.create(a,c,d);n.addBlock(h,s.data)})),n.setPendingBytes(r.pendingBytes)),n)};En.blockPresenceSize=t=>t.bytes.length+1;En.Entry=n9e;En.WantType={Block:Pu.Wantlist.WantType.Block,Have:Pu.Wantlist.WantType.Have};En.BlockPresenceType={Have:Pu.BlockPresenceType.Have,DontHave:Pu.BlockPresenceType.DontHave};s9e.exports=En});var W3=p((yKt,o9e)=>{l();"use strict";var JC=1e3;o9e.exports={maxProvidersPerRequest:3,providerRequestTimeout:10*JC,hasBlockTimeout:15*JC,provideTimeout:15*JC,kMaxPriority:Math.pow(2,31)-1,maxListeners:1e3,wantlistSendDebounceMs:1}});var c9e=p((gKt,a9e)=>{l();a9e.exports=S8t;function S8t(t,e,r){var i=null,n=null,s=function(){i&&(clearTimeout(i),n=null,i=null)},o=function(){var c=n;s(),c&&c()},a=function(){if(!e)return t.apply(this,arguments);var c=this,u=arguments,f=r&&!i;if(s(),n=function(){t.apply(c,u)},i=setTimeout(function(){if(i=null,!f){var d=n;return n=null,d()}},e),f)return n()};return a.cancel=s,a.flush=o,a}});var f9e=p((mKt,u9e)=>{l();"use strict";var x8t=c9e(),A8t=Op(),I8t=nl().logger,{wantlistSendDebounceMs:T8t}=W3();u9e.exports=class{constructor(e,r,i){this.peerId=r,this.network=i,this.refcnt=1,this._entries=[],this._log=I8t(e,"msgqueue"),this.sendEntries=x8t(this._sendEntries.bind(this),T8t)}addMessage(e){e.empty||this.send(e)}addEntries(e){this._entries=this._entries.concat(e),this.sendEntries()}_sendEntries(){if(!this._entries.length)return;let e=new A8t(!1);this._entries.forEach(r=>{r.cancel?e.cancel(r.cid):e.addEntry(r.cid,r.priority)}),this._entries=[],this.addMessage(e)}async send(e){try{await this.network.connectTo(this.peerId)}catch(r){this._log.error("cant connect to peer %s: %s",this.peerId.toB58String(),r.message);return}this._log("sending message to peer %s",this.peerId.toB58String()),this.network.sendMessage(this.peerId,e).catch(r=>{this._log.error("send error: %s",r.message)})}}});var d9e=p((wKt,l9e)=>{l();"use strict";var eO=Op(),R8t=H3(),P8t=W3(),C8t=f9e(),O8t=nl().logger,{base58btc:k8t}=(ti(),ei);l9e.exports=class{constructor(e,r,i){this.peers=new Map,this.wantlist=new R8t(i),this.network=r,this._stats=i,this._peerId=e,this._log=O8t(e,"want")}_addEntries(e,r,i){let n=e.map((s,o)=>new eO.Entry(s,P8t.kMaxPriority-o,eO.WantType.Block,r));n.forEach(s=>{s.cancel?i?this.wantlist.removeForce(s.cid.toString(k8t)):this.wantlist.remove(s.cid):(this._log("adding to wl"),this.wantlist.add(s.cid,s.priority))});for(let s of this.peers.values())s.addEntries(n)}_startPeerHandler(e){let r=this.peers.get(e.toB58String());if(r){r.refcnt++;return}r=new C8t(this._peerId,e,this.network);let i=new eO(!0);for(let n of this.wantlist.entries())i.addEntry(n[1].cid,n[1].priority);return r.addMessage(i),this.peers.set(e.toB58String(),r),r}_stopPeerHandler(e){let r=this.peers.get(e.toB58String());!r||(r.refcnt--,!(r.refcnt>0)&&this.peers.delete(e.toB58String()))}wantBlocks(e,r={}){this._addEntries(e,!1),r&&r.signal&&r.signal.addEventListener("abort",()=>{this.cancelWants(e)})}unwantBlocks(e){this._log("unwant blocks: %s",e.length),this._addEntries(e,!0,!0)}cancelWants(e){this._log("cancel wants: %s",e.length),this._addEntries(e,!0)}connectedPeers(){return Array.from(this.peers.keys())}connected(e){this._startPeerHandler(e)}disconnected(e){this._stopPeerHandler(e)}start(){}stop(){this.peers.forEach(e=>this.disconnected(e.peerId))}}});var m9e=p((_Kt,b9e)=>{l();"use strict";var h9e=Xo(),{pipe:p9e}=Ir(),q8t=o8(),D8t=Op(),y9e=W3(),N8t=nl().logger,tO="/ipfs/bitswap/1.0.0",rO="/ipfs/bitswap/1.1.0",iO="/ipfs/bitswap/1.2.0",g9e=class{constructor(e,r,i,n={}){this._log=N8t(e.peerId,"network"),this._libp2p=e,this._bitswap=r,this._protocols=[tO],n.b100Only||(this._protocols.unshift(rO),this._protocols.unshift(iO)),this._stats=i,this._running=!1,this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._onConnection=this._onConnection.bind(this),this._hashers=n.hashers||{}}start(){this._running=!0,this._libp2p.handle(this._protocols,this._onConnection);let e=new q8t({multicodecs:this._protocols,handlers:{onConnect:this._onPeerConnect,onDisconnect:this._onPeerDisconnect}});this._registrarId=this._libp2p.registrar.register(e);for(let r of this._libp2p.peerStore.peers.values()){let i=this._libp2p.connectionManager.get(r.id);i&&this._onPeerConnect(i.remotePeer)}}stop(){this._running=!1,this._libp2p.unhandle(this._protocols),this._registrarId!=null&&this._libp2p.registrar.unregister(this._registrarId)}async _onConnection({protocol:e,stream:r,connection:i}){if(!!this._running){this._log("incoming new bitswap %s connection from %s",e,i.remotePeer.toB58String());try{await p9e(r,h9e.decode(),async n=>{for await(let s of n)try{let o=await D8t.deserialize(s.slice(),this._hashers);await this._bitswap._receiveMessage(i.remotePeer,o)}catch(o){this._bitswap._receiveError(o);break}})}catch(n){this._log(n)}}}_onPeerConnect(e){this._bitswap._onPeerConnected(e)}_onPeerDisconnect(e){this._bitswap._onPeerDisconnected(e)}findProviders(e,r,i={}){return this._libp2p.contentRouting.findProviders(e,{timeout:y9e.providerRequestTimeout,maxNumProviders:r})}async findAndConnect(e,r){let i=[];for await(let n of this.findProviders(e,y9e.maxProvidersPerRequest,r))this._log(`connecting to provider ${n.id}`),i.push(this.connectTo(n.id,r).catch(s=>{this._log.error(s)}));await Promise.all(i)}async provide(e,r){await this._libp2p.contentRouting.provide(e,r)}async sendMessage(e,r){if(!this._running)throw new Error("network isn't running");let i=e.toB58String();this._log("sendMessage to %s",i,r);let n=await this._libp2p.dial(e),{stream:s,protocol:o}=await n.newStream([iO,rO,tO]),a;switch(o){case tO:a=r.serializeToBitswap100();break;case rO:case iO:a=r.serializeToBitswap110();break;default:throw new Error("Unknown protocol: "+o)}B8t(s,a,this._log),this._updateSentStats(e,r.blocks)}async connectTo(e,r){if(!this._running)throw new Error("network isn't running");return this._libp2p.dial(e,r)}_updateSentStats(e,r){let i=e.toB58String();if(this._stats){for(let n of r.values())this._stats.push(i,"dataSent",n.length);this._stats.push(i,"blocksSent",r.size)}}};async function B8t(t,e,r){try{await p9e([e],h9e.encode(),t)}catch(i){r(i)}}b9e.exports=g9e});var _9e=p((EKt,w9e)=>{l();"use strict";var M8t=H3(),v9e=class{constructor(e){this.partner=e,this.wantlist=new M8t,this.exchangeCount=0,this.sentToPeer=new Map,this.accounting={bytesSent:0,bytesRecv:0}}sentBytes(e){this.exchangeCount++,this.lastExchange=new Date().getTime(),this.accounting.bytesSent+=e}receivedBytes(e){this.exchangeCount++,this.lastExchange=new Date().getTime(),this.accounting.bytesRecv+=e}wants(e,r,i){this.wantlist.add(e,r,i)}cancelWant(e){this.wantlist.remove(e)}wantlistContains(e){return this.wantlist.get(e)}debtRatio(){return this.accounting.bytesSent/(this.accounting.bytesRecv+1)}};w9e.exports=v9e});var x9e=p((SKt,S9e)=>{l();"use strict";var E9e=class extends Map{constructor(e,r){super();this._cmp=r||this._defaultSort,this._keys=[];for(let[i,n]of e||[])this.set(i,n)}update(e){if(e<0||e>=this._keys.length)return;let r=this._keys[e];this._keys.splice(e,1);let i=this._find(r);this._keys.splice(i,0,r)}set(e,r){if(this.has(e)){let n=this.indexOf(e);this._keys.splice(n,1)}super.set(e,r);let i=this._find(e);return this._keys.splice(i,0,e),this}clear(){super.clear(),this._keys=[]}delete(e){if(!this.has(e))return!1;let r=this.indexOf(e);return this._keys.splice(r,1),super.delete(e)}indexOf(e){if(!this.has(e))return-1;let r=this._find(e);if(this._keys[r]===e)return r;for(let i=1;i<this._keys.length;i++){if(this._keys[r+i]===e)return r+i;if(this._keys[r-i]===e)return r-i}return-1}_find(e){let r=0,i=this._keys.length;for(;r<i;){let n=r+i>>>1,s=this._kCmp(this._keys[n],e);if(s<0)r=n+1;else if(s>0)i=n;else return n}return r}*keys(){for(let e of this._keys)yield e}*values(){for(let e of this._keys)yield this.get(e)}*entries(){for(let e of this._keys)yield[e,this.get(e)]}*[Symbol.iterator](){yield*this.entries()}forEach(e,r){if(!!e)for(let i of this._keys)e.apply(r,[[i,this.get(i)]])}_defaultSort(e,r){return e[0]<r[0]?-1:r[0]<e[0]?1:0}_kCmp(e,r){return this._cmp([e,this.get(e)],[r,this.get(r)])}};S9e.exports=E9e});var P9e=p((xKt,R9e)=>{l();"use strict";var A9e=x9e(),L8t={hasNewInfo(){return!1},merge(){}},I9e=class{constructor(e=L8t){this._taskMerger=e,this._byPeer=new A9e([],nO.compare)}pushTasks(e,r){let i=this._byPeer.get(e.toB58String());i||(i=new nO(e,this._taskMerger)),i.pushTasks(r),this._byPeer.set(e.toB58String(),i)}popTasks(e){let r=this._head();if(r===void 0)return{tasks:[],pendingSize:0};let{tasks:i,pendingSize:n}=r.popTasks(e);if(i.length===0)return{tasks:i,pendingSize:n};let s=r.peerId;return r.isIdle()?this._byPeer.delete(s.toB58String()):this._byPeer.update(0),{peerId:s,tasks:i,pendingSize:n}}_head(){if(this._byPeer.size!==0)for(let[,e]of this._byPeer)return e}remove(e,r){let i=this._byPeer.get(r.toB58String());i&&i.remove(e)}tasksDone(e,r){let i=this._byPeer.get(e.toB58String());if(!i)return;let n=this._byPeer.indexOf(e.toB58String());for(let s of r)i.taskDone(s);this._byPeer.update(n)}},nO=class{constructor(e,r){this.peerId=e,this._taskMerger=r,this._activeTotalSize=0,this._pending=new T9e,this._active=new Set}pushTasks(e){for(let r of e)this._pushTask(r)}_pushTask(e){if(!this._taskHasMoreInfoThanActiveTasks(e))return;let r=this._pending.get(e.topic);if(r){e.priority>r.priority&&this._pending.updatePriority(e.topic,e.priority),this._taskMerger.merge(e,r);return}this._pending.add(e)}_taskHasMoreInfoThanActiveTasks(e){let r=[];for(let i of this._active)i.topic===e.topic&&r.push(i);return r.length===0?!0:this._taskMerger.hasNewInfo(e,r)}popTasks(e){let r=0,i=[],n=this._pending.tasks();for(let s=0;s<n.length&&r<e;s++){let o=n[s];i.push(o),r+=o.size,this._pending.delete(o.topic),this._activeTotalSize+=o.size,this._active.add(o)}return{tasks:i,pendingSize:this._pending.totalSize}}taskDone(e){this._active.has(e)&&(this._activeTotalSize-=e.size,this._active.delete(e))}remove(e){this._pending.delete(e)}isIdle(){return this._pending.length===0&&this._active.size===0}static compare(e,r){return e[1]._pending.length===0?1:r[1]._pending.length===0?-1:e[1]._activeTotalSize===r[1]._activeTotalSize?r[1]._pending.length-e[1]._pending.length:e[1]._activeTotalSize-r[1]._activeTotalSize}},T9e=class{constructor(){this._tasks=new A9e([],this._compare)}get length(){return this._tasks.size}get totalSize(){return[...this._tasks.values()].reduce((e,r)=>e+r.task.size,0)}get(e){return(this._tasks.get(e)||{}).task}add(e){this._tasks.set(e.topic,{created:Date.now(),task:e})}delete(e){this._tasks.delete(e)}tasks(){return[...this._tasks.values()].map(e=>e.task)}updatePriority(e,r){let i=this._tasks.get(e);if(!i)return;let n=this._tasks.indexOf(e);i.task.priority=r,this._tasks.update(n)}_compare(e,r){return e[1].task.priority===r[1].task.priority?e[1].created-r[1].created:r[1].task.priority-e[1].task.priority}};R9e.exports=I9e});var O9e=p((AKt,C9e)=>{l();"use strict";var U8t={hasNewInfo(t,e){let r=!1,i=!1;for(let n of e)n.data.haveBlock&&(r=!0),n.data.isWantBlock&&(i=!0);return!!(!i&&t.data.isWantBlock||!r&&t.data.haveBlock)},merge(t,e){let r=t.data,i=e.data;!i.haveBlock&&r.haveBlock&&(i.haveBlock=r.haveBlock,i.blockSize=r.blockSize),!i.isWantBlock&&r.isWantBlock&&(i.isWantBlock=!0,(!i.haveBlock||r.haveBlock)&&(i.haveBlock=r.haveBlock,e.size=t.size)),i.isWantBlock&&i.haveBlock&&(e.size=i.blockSize)}};C9e.exports=U8t});var N9e=p((IKt,D9e)=>{l();"use strict";var{CID:sO}=(Nc(),xh),{base58btc:T7}=(ti(),ei),Y3=Op(),k9e=Y3.WantType,F8t=H3(),j8t=_9e(),K8t=P9e(),V8t=O9e(),{logger:z8t}=nl(),H8t=16*1024,$8t=1024,q9e=class{constructor(e,r,i,n,s={}){this._log=z8t(e,"engine"),this.blockstore=r,this.network=i,this._stats=n,this._opts=this._processOpts(s),this.ledgerMap=new Map,this._running=!1,this._requestQueue=new K8t(V8t)}_processOpts(e){return{maxSizeReplaceHasWithBlock:$8t,targetMessageSize:H8t,...e}}_scheduleProcessTasks(){setTimeout(()=>{this._processTasks()})}async _processTasks(){if(!this._running)return;let{peerId:e,tasks:r,pendingSize:i}=this._requestQueue.popTasks(this._opts.targetMessageSize);if(r.length===0)return;let n=new Y3(!1);n.setPendingBytes(i);let s=[],o=new Map;for(let c of r){let u=sO.parse(c.topic);c.data.haveBlock?c.data.isWantBlock?(s.push(u),o.set(c.topic,c.data)):n.addHave(u):n.addDontHave(u)}let a=await this._getBlocks(s);for(let[c,u]of o){let f=sO.parse(c),d=a.get(c);d?n.addBlock(f,d):u.sendDontHave&&n.addDontHave(f)}if(n.empty){e&&this._requestQueue.tasksDone(e,r),this._scheduleProcessTasks();return}try{e&&await this.network.sendMessage(e,n);for(let[c,u]of a.entries())e&&this.messageSent(e,sO.parse(c),u)}catch(c){this._log.error(c)}e&&this._requestQueue.tasksDone(e,r),this._scheduleProcessTasks()}wantlistForPeer(e){let r=e.toB58String(),i=this.ledgerMap.get(r);return i?i.wantlist.sortedEntries():new Map}ledgerForPeer(e){let r=e.toB58String(),i=this.ledgerMap.get(r);return i?{peer:i.partner,value:i.debtRatio(),sent:i.accounting.bytesSent,recv:i.accounting.bytesRecv,exchanged:i.exchangeCount}:null}peers(){return Array.from(this.ledgerMap.values()).map(e=>e.partner)}receivedBlocks(e){if(!!e.length){for(let r of this.ledgerMap.values())for(let i of e){let n=r.wantlistContains(i.cid);if(!n)continue;let s=i.data.length,o=this._sendAsBlock(n.wantType,s),a=s;o||(a=Y3.blockPresenceSize(n.cid)),this._requestQueue.pushTasks(r.partner,[{topic:n.cid.toString(T7),priority:n.priority,size:a,data:{blockSize:s,isWantBlock:o,haveBlock:!0,sendDontHave:!1}}])}this._scheduleProcessTasks()}}async messageReceived(e,r){let i=this._findOrCreate(e);if(r.empty)return;if(r.full&&(i.wantlist=new F8t),this._updateBlockAccounting(r.blocks,i),r.wantlist.size===0){this._scheduleProcessTasks();return}let n=[],s=[];r.wantlist.forEach(o=>{o.cancel?(i.cancelWant(o.cid),n.push(o.cid)):(i.wants(o.cid,o.priority,o.wantType),s.push(o))}),this._cancelWants(e,n),await this._addWants(e,s),this._scheduleProcessTasks()}_cancelWants(e,r){for(let i of r)this._requestQueue.remove(i.toString(T7),e)}async _addWants(e,r){let i=await this._getBlockSizes(r.map(s=>s.cid)),n=[];for(let s of r){let o=s.cid.toString(T7),a=i.get(o);if(a==null)s.sendDontHave&&n.push({topic:o,priority:s.priority,size:Y3.blockPresenceSize(s.cid),data:{isWantBlock:s.wantType===k9e.Block,blockSize:0,haveBlock:!1,sendDontHave:s.sendDontHave}});else{let c=this._sendAsBlock(s.wantType,a),u=a;c||(u=Y3.blockPresenceSize(s.cid)),n.push({topic:o,priority:s.priority,size:u,data:{isWantBlock:c,blockSize:a,haveBlock:!0,sendDontHave:s.sendDontHave}})}this._requestQueue.pushTasks(e,n)}}_sendAsBlock(e,r){return e===k9e.Block||r<=this._opts.maxSizeReplaceHasWithBlock}async _getBlockSizes(e){let r=await this._getBlocks(e);return new Map([...r].map(([i,n])=>[i,n.length]))}async _getBlocks(e){let r=new Map;return await Promise.all(e.map(async i=>{try{let n=await this.blockstore.get(i);r.set(i.toString(T7),n)}catch(n){n.code!=="ERR_NOT_FOUND"&&this._log.error("failed to query blockstore for %s: %s",i,n)}})),r}_updateBlockAccounting(e,r){for(let i of e.values())this._log("got block (%s bytes)",i.length),r.receivedBytes(i.length)}messageSent(e,r,i){let n=this._findOrCreate(e);n.sentBytes(i.length),n.wantlist.remove(r)}numBytesSentTo(e){return this._findOrCreate(e).accounting.bytesSent}numBytesReceivedFrom(e){return this._findOrCreate(e).accounting.bytesRecv}peerDisconnected(e){}_findOrCreate(e){let r=e.toB58String(),i=this.ledgerMap.get(r);if(i)return i;let n=new j8t(e);return this.ledgerMap.set(r,n),this._stats&&this._stats.push(r,"peerCount",1),n}start(){this._running=!0}stop(){this._running=!1}};D9e.exports=q9e});var j9e=p((TKt,F9e)=>{l();"use strict";var{EventEmitter:G8t}=gr(),{toString:B9e}=(et(),Je),W8t=W3(),Y8t=nl().logger,M9e=t=>`unwant:${B9e(t.multihash.bytes,"base64")}`,L9e=t=>`block:${B9e(t.multihash.bytes,"base64")}`,U9e=class extends G8t{constructor(e){super();this.setMaxListeners(W8t.maxListeners),this._log=Y8t(e,"notif")}hasBlock(e,r){let i=L9e(e);this._log(i),this.emit(i,r)}wantBlock(e,r={}){if(!e)throw new Error("Not a valid cid");let i=L9e(e),n=M9e(e);return this._log(`wantBlock:${e}`),new Promise((s,o)=>{let a=()=>{this.removeListener(i,c),o(new Error(`Block for ${e} unwanted`))},c=u=>{this.removeListener(n,a),s(u)};this.once(n,a),this.once(i,c),r&&r.signal&&r.signal.addEventListener("abort",()=>{this.removeListener(i,c),this.removeListener(n,a),o(new Error(`Want for ${e} aborted`))})})}unwantBlock(e){let r=M9e(e);this._log(r),this.emit(r)}};F9e.exports=U9e});var H9e=p((RKt,z9e)=>{l();"use strict";var{EventEmitter:X8t}=gr(),K9e=vR(),V9e=class extends X8t{constructor(e,r){super();this._options=r,this._queue=[],this._stats={},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this),e.forEach(i=>{this._stats[i]=BigInt(0),this._movingAverages[i]={},this._options.movingAverageIntervals.forEach(n=>{(this._movingAverages[i][n]=K9e(n)).push(this._frequencyLastTime,0)})}),this._enabled=this._options.enabled}enable(){this._enabled=!0}disable(){this._disabled=!0}stop(){this._timeout&&clearTimeout(this._timeout)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}push(e,r){this._enabled&&(this._queue.push([e,r,Date.now()]),this._resetComputeTimeout())}_resetComputeTimeout(){this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._update,this._nextTimeout())}_nextTimeout(){let e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;for(;this._queue.length;){let r=e=this._queue.shift();r&&this._applyOp(r)}e&&this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){let r=e-this._frequencyLastTime;r&&Object.keys(this._stats).forEach(i=>{this._updateFrequencyFor(i,r,e)}),this._frequencyLastTime=e}_updateFrequencyFor(e,r,i){let n=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;let s=n/r*1e3,o=this._movingAverages[e];o||(o=this._movingAverages[e]={}),this._options.movingAverageIntervals.forEach(a=>{let c=o[a];c||(c=o[a]=K9e(a)),c.push(i,s)})}_applyOp(e){let r=e[0],i=e[1];if(typeof i!="number")throw new Error(`invalid increment number: ${i}`);Object.prototype.hasOwnProperty.call(this._stats,r)||(this._stats[r]=BigInt(0)),this._stats[r]=BigInt(this._stats[r])+BigInt(i),this._frequencyAccumulators[r]||(this._frequencyAccumulators[r]=0),this._frequencyAccumulators[r]+=i}};z9e.exports=V9e});var X9e=p((PKt,Y9e)=>{l();"use strict";var{EventEmitter:Q8t}=gr(),$9e=H9e(),G9e={enabled:!1,computeThrottleTimeout:1e3,computeThrottleMaxQueueSize:1e3,movingAverageIntervals:[60*1e3,5*60*1e3,15*60*1e3]},W9e=class extends Q8t{constructor(e=[],r=G9e){super();let i=Object.assign({},G9e,r);if(typeof i.computeThrottleTimeout!="number")throw new Error("need computeThrottleTimeout");if(typeof i.computeThrottleMaxQueueSize!="number")throw new Error("need computeThrottleMaxQueueSize");this._initialCounters=e,this._options=i,this._enabled=this._options.enabled,this._global=new $9e(e,i),this._global.on("update",n=>this.emit("update",n)),this._peers=new Map}enable(){this._enabled=!0,this._options.enabled=!0,this._global.enable()}disable(){this._enabled=!1,this._options.enabled=!1,this._global.disable()}stop(){this._enabled=!1,this._global.stop();for(let e of this._peers)e[1].stop()}get snapshot(){return this._global.snapshot}get movingAverages(){return this._global.movingAverages}forPeer(e){let r=typeof e!="string"&&e.toB58String?e.toB58String():`${e}`;return this._peers.get(r)}push(e,r,i){if(this._enabled&&(this._global.push(r,i),e)){let n=this._peers.get(e);n||(n=new $9e(this._initialCounters,this._options),this._peers.set(e,n)),n.push(r,i)}}disconnected(e){let r=e.toB58String(),i=this._peers.get(r);i&&(i.stop(),this._peers.delete(r))}};Y9e.exports=W9e});var J9e=p((CKt,Z9e)=>{l();"use strict";var Z8t=d9e(),J8t=m9e(),evt=N9e(),tvt=j9e(),rvt=nl().logger,ivt=X9e(),{AbortController:nvt}=sn(),{anySignal:svt}=ku(),{BlockstoreAdapter:ovt}=s8(),{CID:avt}=(Nc(),xh),cvt={statsEnabled:!1,statsComputeThrottleTimeout:1e3,statsComputeThrottleMaxQueueSize:1e3},uvt=["blocksReceived","dataReceived","dupBlksReceived","dupDataReceived","blocksSent","dataSent","providesBufferLength","wantListLength","peerCount"],Q9e=class extends ovt{constructor(e,r,i={}){super();this._libp2p=e,this._log=rvt(this.peerId),this._options=Object.assign({},cvt,i),this._stats=new ivt(uvt,{enabled:this._options.statsEnabled,computeThrottleTimeout:this._options.statsComputeThrottleTimeout,computeThrottleMaxQueueSize:this._options.statsComputeThrottleMaxQueueSize}),this.network=new J8t(e,this,this._stats,{hashers:i.hashers}),this.blockstore=r,this.engine=new evt(this.peerId,r,this.network,this._stats),this.wm=new Z8t(this.peerId,this.network,this._stats),this.notifications=new tvt(this.peerId),this.started=!1}isStarted(){return this.started}get peerId(){return this._libp2p.peerId}async _receiveMessage(e,r){try{await this.engine.messageReceived(e,r)}catch(n){this._log("failed to receive message",r)}if(r.blocks.size===0)return;let i=[];for(let[n,s]of r.blocks.entries()){let o=avt.parse(n);i.push({wasWanted:this.wm.wantlist.contains(o),cid:o,data:s})}this.wm.cancelWants(i.filter(({wasWanted:n})=>n).map(({cid:n})=>n)),await Promise.all(i.map(({cid:n,wasWanted:s,data:o})=>this._handleReceivedBlock(e,n,o,s)))}async _handleReceivedBlock(e,r,i,n){this._log("received block");let s=await this.blockstore.has(r);this._updateReceiveCounters(e.toB58String(),r,i,s),!!n&&await this.put(r,i)}_updateReceiveCounters(e,r,i,n){this._stats.push(e,"blocksReceived",1),this._stats.push(e,"dataReceived",i.length),n&&(this._stats.push(e,"dupBlksReceived",1),this._stats.push(e,"dupDataReceived",i.length))}_receiveError(e){this._log.error("ReceiveError: %s",e.message)}_onPeerConnected(e){this.wm.connected(e)}_onPeerDisconnected(e){this.wm.disconnected(e),this.engine.peerDisconnected(e),this._stats.disconnected(e)}enableStats(){this._stats.enable()}disableStats(){this._stats.disable()}wantlistForPeer(e,r){return this.engine.wantlistForPeer(e)}ledgerForPeer(e){return this.engine.ledgerForPeer(e)}async get(e,r={}){let i=(u,f)=>(this.wm.wantBlocks([u],f),this.notifications.wantBlock(u,f)),n=!1,s=async(u,f)=>{try{return await this.blockstore.get(u,f)}catch(d){if(d.code!=="ERR_NOT_FOUND")throw d;return n||(n=!0,this.network.findAndConnect(u).catch(h=>this._log.error(h))),i(u,f)}},o=new nvt,a=r.signal?svt([r.signal,o.signal]):o.signal,c=await Promise.race([this.notifications.wantBlock(e,{signal:a}),s(e,{signal:a})]);return o.abort(),c}async*getMany(e,r={}){for await(let i of e)yield this.get(i,r)}unwant(e){let r=Array.isArray(e)?e:[e];this.wm.unwantBlocks(r),r.forEach(i=>this.notifications.unwantBlock(i))}cancelWants(e){this.wm.cancelWants(Array.isArray(e)?e:[e])}async put(e,r,i){await this.blockstore.put(e,r),this._sendHaveBlockNotifications(e,r)}async*putMany(e,r){for await(let{key:i,value:n}of this.blockstore.putMany(e,r))this._sendHaveBlockNotifications(i,n),yield{key:i,value:n}}_sendHaveBlockNotifications(e,r){this.notifications.hasBlock(e,r),this.engine.receivedBlocks([{cid:e,data:r}]),this.network.provide(e).catch(i=>{this._log.error("Failed to provide: %s",i.message)})}getWantlist(){return this.wm.wantlist.entries()}peers(){return this.engine.peers()}stat(){return this._stats}start(){this.wm.start(),this.network.start(),this.engine.start(),this.started=!0}stop(){this._stats.stop(),this.wm.stop(),this.network.stop(),this.engine.stop(),this.started=!1}unwrap(){return this.blockstore}};Z9e.exports=Q9e});var t_e=p((OKt,e_e)=>{l();"use strict";var fvt=J9e(),lvt=(t,e,r={})=>new fvt(t,e,r);e_e.exports={createBitswap:lvt}});var s_e=p((kKt,n_e)=>{l();"use strict";var{BlockstoreAdapter:dvt}=s8(),hvt=x0(),r_e=Ha(),pvt=Va(),i_e=class extends dvt{constructor(e,r){super();this.child=e,this.bitswap=r}open(){return this.child.open()}close(){return this.child.close()}unwrap(){return this.child}async put(e,r,i={}){await this.has(e)||(this.bitswap.isStarted()?await this.bitswap.put(e,r,i):await this.child.put(e,r,i))}async*putMany(e,r={}){let i=pvt(e,async({key:n})=>!await this.has(n));this.bitswap.isStarted()?yield*this.bitswap.putMany(i,r):yield*this.child.putMany(i,r)}async get(e,r={}){return!await this.has(e)&&this.bitswap.isStarted()?this.bitswap.get(e,r):this.child.get(e,r)}async*getMany(e,r={}){let i=r_e(),n=r_e();Promise.resolve().then(async()=>{for await(let s of e)!await this.has(s)&&this.bitswap.isStarted()?i.push(s):n.push(s);i.end(),n.end()}),yield*hvt(this.bitswap.getMany(i,r),this.child.getMany(n,r))}async delete(e,r){await this.child.delete(e,r)}async*deleteMany(e,r){yield*this.child.deleteMany(e,r)}async has(e,r={}){return this.child.has(e,r)}async*query(e,r={}){yield*this.child.query(e,r)}async*queryKeys(e,r={}){yield*this.child.queryKeys(e,r)}};n_e.exports=i_e});var a_e=p((qKt,o_e)=>{l();"use strict";var{createBitswap:yvt}=t_e(),gvt=HC(),{Multiaddr:bvt}=rt(),mvt=xt(),vvt=s_e(),R7=class{constructor(e,r,i,n,s){this.peerId=e,this.libp2p=r,this.bitswap=i,this.repo=n,this.blockstore=s}static async start({peerId:e,repo:r,print:i,options:n}){r.closed&&await r.open();let s=await r.config.getAll(),o=await gvt({options:n,repo:r,peerId:e,multiaddrs:wvt(e,s),config:s,keychainConfig:void 0});o.keychain&&await o.loadKeychain(),await o.start();for(let u of o.multiaddrs)i(`Swarm listening on ${u}/p2p/${e.toB58String()}`);let a=yvt(o,r.blocks,{statsEnabled:!0});await a.start();let c=new vvt(r.blocks,a);return r.blocks=c,r.pins.blockstore=c,new R7(e,o,a,r,c)}static async stop(e){e.repo.blocks=e.blockstore.unwrap(),e.repo.pins.blockstore=e.blockstore.unwrap(),await Promise.all([e.bitswap.stop(),e.libp2p.stop()])}};o_e.exports=R7;var wvt=(t,e)=>{let r=t.toB58String(),i=[],n=e.Addresses&&e.Addresses.Swarm||[];for(let s of n){let o=new bvt(s);if(o.protoCodes().includes(_vt))throw mvt(new Error("websocket-star swarm addresses are not supported. See https://github.com/ipfs/js-ipfs/issues/2779"),"ERR_WEBSOCKET_STAR_SWARM_ADDR_NOT_SUPPORTED");let a=o.getPeerId();a&&a!==r&&(o=o.encapsulate(`/p2p/${r}`)),i.push(o)}return i},_vt=479});var u_e=p((DKt,c_e)=>{l();"use strict";var Evt=ke();c_e.exports=({network:t})=>{async function e(r={}){let i=[],{libp2p:n}=await t.use(r);for(let[s,o]of n.peerStore.peers.entries())i.push({id:s,addrs:o.addresses.map(a=>a.multiaddr)});return i}return Evt(e)}});var l_e=p((NKt,f_e)=>{l();"use strict";var Svt=ke();f_e.exports=({network:t})=>{async function e(r,i={}){let{libp2p:n}=await t.use(i);await n.dial(r,i)}return Svt(e)}});var h_e=p((BKt,d_e)=>{l();"use strict";var xvt=ke();d_e.exports=({network:t})=>{async function e(r,i={}){let{libp2p:n}=await t.use(i);await n.hangUp(r)}return xvt(e)}});var y_e=p((MKt,p_e)=>{l();"use strict";var Avt=ke();p_e.exports=({network:t})=>{async function e(r={}){let{libp2p:i}=await t.use(r);return i.multiaddrs}return Avt(e)}});var b_e=p((LKt,g_e)=>{l();"use strict";var Ivt=ke();g_e.exports=({network:t})=>{async function e(r={}){let{libp2p:i}=await t.use(r),n=[];for(let[s,o]of i.connections)for(let a of o){let c={addr:a.remoteAddr,peer:s};(r.verbose||r.direction)&&(c.direction=a.stat.direction),r.verbose&&(c.muxer=a.stat.multiplexer,c.latency="n/a",c.streams=[]),n.push(c)}return n}return Ivt(e)}});var w_e=p((UKt,v_e)=>{l();"use strict";var Tvt=u_e(),Rvt=l_e(),Pvt=h_e(),Cvt=y_e(),Ovt=b_e(),m_e=class{constructor({network:e}){this.addrs=Tvt({network:e}),this.connect=Rvt({network:e}),this.disconnect=Pvt({network:e}),this.localAddrs=Cvt({network:e}),this.peers=Ovt({network:e})}};v_e.exports=m_e});var E_e=p((FKt,__e)=>{l();"use strict";var kvt=tt(),X3={success:!0,time:0,text:""},qvt=ke();__e.exports=({network:t})=>{async function*e(r,i={}){let{libp2p:n}=await t.use();i.count=i.count||10;let s=kvt.createFromB58String(r),o=n.peerStore.get(s),a=o&&o.id;if(!a){yield{...X3,text:`Looking up peer ${r}`};let f=await n.peerRouting.findPeer(s);a=f&&f.id}if(!a)throw new Error("Peer was not found");yield{...X3,text:`PING ${a.toB58String()}`};let c=0,u=0;for(let f=0;f<i.count;f++)try{let d=await n.ping(a);u+=d,c++,yield{...X3,time:d}}catch(d){yield{...X3,success:!1,text:d.toString()}}if(c){let f=u/c;yield{...X3,text:`Average latency: ${f}ms`}}}return qvt(e)}});var I_e=p((jKt,A_e)=>{l();"use strict";var S_e=tt(),x_e=xt(),{NotEnabledError:Dvt}=af(),Nvt=qy(),qp=ke();A_e.exports=({network:t,repo:e})=>{let{get:r,put:i,findProvs:n,findPeer:s,provide:o,query:a}={async get(c,u={}){let{libp2p:f}=await Dp(t,u);return f._dht.get(c,u)},async*put(c,u,f){let{libp2p:d}=await Dp(t,f);yield*d._dht.put(c,u)},async*findProvs(c,u={numProviders:20}){let{libp2p:f}=await Dp(t,u);for await(let d of f._dht.findProviders(c,{maxNumProviders:u.numProviders,signal:u.signal}))yield{id:d.id.toB58String(),addrs:d.addrs}},async findPeer(c,u){let{libp2p:f}=await Dp(t,u),d=await f._dht.findPeer(S_e.parse(c));return{id:d.id.toB58String(),addrs:d.multiaddrs}},async*provide(c,u={recursive:!1}){let{libp2p:f}=await Dp(t,u),d=Array.isArray(c)?c:[c];if(!(await Promise.all(d.map(g=>e.blocks.has(g)))).every(g=>g))throw x_e(new Error("block(s) not found locally, cannot provide"),"ERR_BLOCK_NOT_FOUND");if(u.recursive)throw x_e(new Error("not implemented yet"),"ERR_NOT_IMPLEMENTED_YET");for(let g of d)yield f._dht.provide(g)},async*query(c,u){let{libp2p:f}=await Dp(t,u);for await(let d of f._dht.getClosestPeers(S_e.parse(c).toBytes()))yield{id:d.toB58String(),addrs:[]}}};return{get:qp(r),put:qp(i),findProvs:qp(n),findPeer:qp(s),provide:qp(o),query:qp(a)}};var Dp=async(t,e)=>{let r=await t.use(e);if(Nvt(r.libp2p,"_config.dht.enabled",!1))return r;throw new Dvt("dht not enabled")}});var R_e=p((KKt,T_e)=>{l();"use strict";var Q3=ke(),Bvt=xt(),{NotEnabledError:Mvt}=af(),Lvt=qy();T_e.exports=({network:t,config:e})=>{let r=Lvt(e||{},"Pubsub.Enabled",!0);return{subscribe:r?Q3(i):Z3,unsubscribe:r?Q3(n):Z3,publish:r?Q3(s):Z3,ls:r?Q3(o):Z3,peers:r?Q3(a):Z3};async function i(c,u,f={}){let{libp2p:d}=await t.use(f);return d.pubsub.subscribe(c,u,f)}async function n(c,u,f={}){let{libp2p:d}=await t.use(f);d.pubsub.unsubscribe(c,u,f)}async function s(c,u,f={}){let{libp2p:d}=await t.use(f);if(!u)throw Bvt(new Error('argument "data" is required'),"ERR_ARG_REQUIRED");await d.pubsub.publish(c,u)}async function o(c={}){let{libp2p:u}=await t.use(c);return u.pubsub.getTopics()}async function a(c,u={}){let{libp2p:f}=await t.use(u);return f.pubsub.getSubscribers(c)}};var Z3=async()=>{throw new Mvt("pubsub not enabled")}});var q_e=p((VKt,k_e)=>{l();"use strict";var Uvt=br().bind({ignoreUndefined:!0}),{isTest:Fvt}=Jp(),oO=be()("ipfs"),P_e=xt(),{UnixFS:jvt}=(pi(),us),C_e=(wt(),Mt),Kvt=(Gc(),ab),{identity:O_e}=(qc(),kc),{bases:Vvt,hashes:zvt,codecs:Hvt}=(e4(),e9),$vt=wj(),{AlreadyInitializedError:Gvt}=af(),{fromString:Wvt}=(ut(),lt),Yvt=dK(),Xvt=pK(),Qvt=qK(),Zvt=NK(),Jvt=LK(),e7t=WH(),t7t=RW(),r7t=tY(),i7t=nY(),n7t=oY(),s7t=gY(),o7t=kY(),a7t=$Y(),c7t=ete(),u7t=rte(),f7t=nte(),l7t=Hx(),d7t=Bte(),h7t=Hte(),p7t=Wte(),y7t=Aie(),g7t=zie(),b7t=yne(),m7t=Sne(),v7t=Pne(),w7t=Pwe(),_7t=a_e(),E7t=fb(),S7t=w_e(),x7t=E_e(),A7t=I_e(),I7t=R_e(),T7t=hT(),R7t=pT(),P7t=yT(),P7=class{constructor({print:e,storage:r,codecs:i,options:n}){let{peerId:s,repo:o,keychain:a}=r,c=E7t.create(_7t),u=h7t(n.preload),f=Qvt(),d=Zvt({network:c}),h=new t7t(n),y=Object.values(zvt);(n.ipld&&n.ipld.hashers?n.ipld.hashers:[]).forEach(C=>y.push(C)),this.hashers=new R7t({hashers:y,loadHasher:n.ipld&&n.ipld.loadHasher});let g=Object.values(Vvt);(n.ipld&&n.ipld.bases?n.ipld.bases:[]).forEach(C=>g.push(C)),this.bases=new P7t({bases:g,loadBase:n.ipld&&n.ipld.loadBase});let m=new e7t({repo:o,codecs:i}),E=new a7t({codecs:i,hashers:this.hashers,preload:u,repo:o}),v=new r7t({dns:f,ipns:h,repo:o,codecs:i,peerId:s,isOnline:d,keychain:a,options:n}),A=Jvt({repo:o,codecs:i,bases:this.bases,name:v}),R=new d7t({repo:o,codecs:i,hashers:this.hashers,preload:u}),F=Object.assign(i7t({repo:o,codecs:i,resolve:A,preload:u}),{local:n7t({repo:r.repo})}),{add:q,addAll:D,cat:z,get:G,ls:Y}=new c7t({preload:u,repo:o,options:n.EXPERIMENTAL}),P=y7t({repo:o,preload:u,hashers:this.hashers,options:n}),b=p7t({files:P,preload:u,options:n.preload});this.preload=u,this.name=v,this.ipns=h,this.pin=m,this.resolve=A,this.block=E,this.refs=F,this.start=Yvt({network:c,peerId:s,repo:o,preload:u,ipns:h,mfsPreload:b,print:e,keychain:a,options:n}),this.stop=Xvt({network:c,preload:u,mfsPreload:b,ipns:h,repo:o}),this.dht=A7t({network:c,repo:o}),this.pubsub=I7t({network:c,config:n.config}),this.dns=f,this.isOnline=d,this.id=f7t({network:c,peerId:s}),this.version=u7t({repo:o}),this.bitswap=new s7t({network:c}),this.bootstrap=new o7t({repo:o}),this.config=l7t({repo:o}),this.ping=x7t({network:c}),this.add=q,this.addAll=D,this.cat=z,this.get=G,this.ls=Y,this.dag=R,this.files=P,this.key=new g7t({keychain:a}),this.object=new b7t({preload:u,codecs:i,repo:o}),this.repo=new m7t({repo:o,hashers:this.hashers}),this.stats=new v7t({repo:o,network:c}),this.swarm=new S7t({network:c}),Object.defineProperty(this,"libp2p",{get(){let C=c.try();return C?C.libp2p:void 0}});let w=()=>Promise.reject(P_e(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")),S=async function*(){throw P_e(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")};this.commands=w,this.diag={cmds:w,net:w,sys:w},this.log={level:w,ls:w,tail:S},this.mount=w,this.codecs=i}async init(){throw new Gvt}static async create(e={}){e=Uvt(O7t(),e);let r=e.init||{},i={name:O_e.name,code:O_e.code,encode:f=>f,decode:f=>f},n=Object.values(Hvt);[C_e,Kvt,i].concat(e.ipld&&e.ipld.codecs||[]).forEach(f=>n.push(f));let s=new T7t({codecs:n,loadCodec:e.ipld&&e.ipld.loadCodec}),o=e.silent?oO:console.log,a=await w7t.start(o,s,e),c=await a.repo.config.getAll(),u=new P7({storage:a,print:o,codecs:s,options:{...e,config:c}});if(await u.preload.start(),u.ipns.startOffline(a),a.isNew&&!r.emptyRepo){let f=await C7t(u);oO("adding default assets"),await $vt({addAll:u.addAll,print:o}),oO("initializing IPNS keyspace"),await u.ipns.initializeKeyspace(a.peerId.privKey,Wvt(`/ipfs/${f}`))}return e.start!==!1&&await u.start(),u}};k_e.exports=P7;var C7t=async t=>{let e=C_e.encode({Data:new jvt({type:"directory"}).marshal(),Links:[]}),r=await t.block.put(e,{mhtype:"sha2-256",format:"dag-pb"});return await t.pin.add(r),r},O7t=()=>({start:!0,EXPERIMENTAL:{},preload:{enabled:!Fvt,addresses:["/dns4/node0.preload.ipfs.io/https","/dns4/node1.preload.ipfs.io/https","/dns4/node2.preload.ipfs.io/https","/dns4/node3.preload.ipfs.io/https"]}})});var F7t=p((zKt,D_e)=>{l();"use strict";var k7t=$7(),q7t=iw(),D7t=tt(),N7t=La(),B7t=t0(),{multiaddr:M7t}=rt(),{CID:L7t}=(Ae(),De),{create:U7t}=q_e();D_e.exports={create:U7t,crypto:N7t,isIPFS:B7t,CID:L7t,multiaddr:M7t,PeerId:D7t,globSource:k7t,urlSource:q7t}});return F7t();})();
/*!
  * prr
  * (c) 2013 Rod Vagg <rod@vagg.org>
  * https://github.com/rvagg/prr
  * License: MIT
  */
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * Timestamp for 64-bit time_t, nanosecond precision and strftime
 *
 * @author Yusuke Kawasaki
 * @license MIT
 * @see https://github.com/kawanet/timestamp-nano
 */
return IpfsCore}));
